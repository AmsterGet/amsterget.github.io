function domready(e){var t=!1,n=!0,r=window.document,i=r.documentElement,s=!~navigator.userAgent.indexOf("MSIE 8"),o=s?"addEventListener":"attachEvent",u=s?"removeEventListener":"detachEvent",a=s?"":"on",f=function(n){if(n.type=="readystatechange"&&r.readyState!="complete")return;(n.type=="load"?window:r)[u](a+n.type,f,!1),!t&&(t=!0)&&e.call(window,n.type||n)},l=function(){try{i.doScroll("left")}catch(e){setTimeout(l,50);return}f("poll")};if(r.readyState=="complete")e.call(window,"lazy");else{if(!s&&i.doScroll){try{n=!window.frameElement}catch(c){}n&&l()}r[o](a+"DOMContentLoaded",f,!1),r[o](a+"readystatechange",f,!1),window[o](a+"load",f,!1)}}function l(e){console.log(e)}var requirejs,require,define;(function(ba){function G(e){return"[object Function]"===K.call(e)}function H(e){return"[object Array]"===K.call(e)}function v(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function T(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function t(e,t){return fa.call(e,t)}function m(e,n){return t(e,n)&&e[n]}function B(e,n){for(var r in e)if(t(e,r)&&n(e[r],r))break}function U(e,n,r,i){return n&&B(n,function(n,s){if(r||!t(e,s))i&&"object"==typeof n&&n&&!H(n)&&!G(n)&&!(n instanceof RegExp)?(e[s]||(e[s]={}),U(e[s],n,r,i)):e[s]=n}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ca(e){throw e}function da(e){if(!e)return e;var t=ba;return v(e.split("."),function(e){t=t[e]}),t}function C(e,t,n,r){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=r,n&&(t.originalError=n),t}function ga(e){function n(e,t,n){var r,i,s,o,u,a,f,l,t=t&&t.split("/"),c=A.map,h=c&&c["*"];if(e){e=e.split("/"),i=e.length-1,A.nodeIdCompat&&Q.test(e[i])&&(e[i]=e[i].replace(Q,"")),"."===e[0].charAt(0)&&t&&(i=t.slice(0,t.length-1),e=i.concat(e)),i=e;for(s=0;s<i.length;s++)(o=i[s],"."===o)?(i.splice(s,1),s-=1):".."===o&&0!==s&&(1!=s||".."!==i[2])&&".."!==i[s-1]&&0<s&&(i.splice(s-1,2),s-=2);e=e.join("/")}if(n&&c&&(t||h)){i=e.split("/"),s=i.length;e:for(;0<s;s-=1){u=i.slice(0,s).join("/");if(t)for(o=t.length;0<o;o-=1)if(n=m(c,t.slice(0,o).join("/")))if(n=m(n,u)){r=n,a=s;break e}!f&&h&&m(h,u)&&(f=m(h,u),l=s)}!r&&f&&(r=f,a=l),r&&(i.splice(0,a,r),e=i.join("/"))}return(r=m(A.pkgs,e))?r:e}function r(e){z&&v(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===x.contextName)return t.parentNode.removeChild(t),!0})}function i(e){var t=m(A.paths,e);if(t&&H(t)&&1<t.length)return t.shift(),x.require.undef(e),x.makeRequire(null,{skipMap:!0})([e]),!0}function s(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,t,r,i){var o,u,a=null,f=t?t.name:null,l=e,c=!0,h="";return e||(c=!1,e="_@r"+(q+=1)),e=s(e),a=e[0],e=e[1],a&&(a=n(a,f,i),u=m(j,a)),e&&(a?h=u&&u.normalize?u.normalize(e,function(e){return n(e,f,i)}):-1===e.indexOf("!")?n(e,f,i):e:(h=n(e,f,i),e=s(h),a=e[0],h=e[1],r=!0,o=x.nameToUrl(h))),r=a&&!u&&!r?"_unnormalized"+(W+=1):"",{prefix:a,name:h,parentMap:t,unnormalized:!!r,url:o,originalName:l,isDefine:c,id:(a?a+"!"+h:h)+r}}function a(e){var t=e.id,n=m(O,t);return n||(n=O[t]=new x.Module(e)),n}function f(e,n,r){var i=e.id,s=m(O,i);t(j,i)&&(!s||s.defineEmitComplete)?"defined"===n&&r(j[i]):(s=a(e),s.error&&"error"===n)?r(s.error):s.on(n,r)}function l(e,t){var n=e.requireModules,r=!1;t?t(e):(v(n,function(t){if(t=m(O,t))t.error=e,t.events.error&&(r=!0,t.emit("error",e))}),!r)&&g.onError(e)}function c(){R.length&&(ha.apply(P,[P.length,0].concat(R)),R=[])}function h(e){delete O[e],delete _[e]}function p(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,v(e.depMaps,function(r,i){var s=r.id,o=m(O,s);o&&!e.depMatched[i]&&!n[s]&&(m(t,s)?(e.defineDep(i,j[s]),e.check()):p(o,t,n))}),n[r]=!0)}function d(){var e,t,n=(e=1e3*A.waitSeconds)&&x.startTime+e<(new Date).getTime(),s=[],o=[],u=!1,a=!0;if(!E){E=!0,B(_,function(e){var f=e.map,l=f.id;if(e.enabled&&(f.isDefine||o.push(e),!e.error))if(!e.inited&&n)i(l)?u=t=!0:(s.push(l),r(l));else if(!e.inited&&e.fetched&&f.isDefine&&(u=!0,!f.prefix))return a=!1});if(n&&s.length)return e=C("timeout","Load timeout for modules: "+s,null,s),e.contextName=x.contextName,l(e);a&&v(o,function(e){p(e,{},{})}),(!n||t)&&u&&(z||ea)&&!L&&(L=setTimeout(function(){L=0,d()},50)),E=!1}}function y(e){t(j,e[0])||a(o(e[0],null,!0)).init(e[1],e[2])}function b(e){var e=e.currentTarget||e.srcElement,t=x.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=x.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function w(){var e;for(c();P.length;){e=P.shift();if(null===e[0])return l(C("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));y(e)}}var E,S,x,k,L,A={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},O={},_={},D={},P=[],j={},F={},I={},q=1,W=1;return k={require:function(e){return e.require?e.require:e.require=x.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?j[e.map.id]=e.exports:e.exports=j[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return m(A.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},S=function(e){this.events=m(D,e.id)||{},this.map=e,this.shim=m(A.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},S.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;F[e]||(F[e]=!0,x.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var r=this.exports,i=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(G(i)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{r=x.execCb(n,i,t,r)}catch(s){e=s}else r=x.execCb(n,i,t,r);this.map.isDefine&&void 0===r&&((t=this.module)?r=t.exports:this.usingExports&&(r=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",l(this.error=e)}else r=i;this.exports=r,this.map.isDefine&&!this.ignore&&(j[n]=r,g.onResourceLoad)&&g.onResourceLoad(x,this.map,this.depMaps),h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,r=e.id,i=o(e.prefix);this.depMaps.push(i),f(i,"defined",u(this,function(i){var s,c;c=m(I,this.map.id);var p=this.map.name,d=this.map.parentMap?this.map.parentMap.name:null,v=x.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(i.normalize&&(p=i.normalize(p,function(e){return n(e,d,!0)})||""),i=o(e.prefix+"!"+p,this.map.parentMap),f(i,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),c=m(O,i.id))this.depMaps.push(i),this.events.error&&c.on("error",u(this,function(e){this.emit("error",e)})),c.enable()}else c?(this.map.url=x.nameToUrl(c),this.load()):(s=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),s.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[r],B(O,function(e){0===e.map.id.indexOf(r+"_unnormalized")&&h(e.map.id)}),l(e)}),s.fromText=u(this,function(n,i){var u=e.name,f=o(u),c=M;i&&(n=i),c&&(M=!1),a(f),t(A.config,r)&&(A.config[u]=A.config[r]);try{g.exec(n)}catch(h){return l(C("fromtexteval","fromText eval for "+r+" failed: "+h,h,[r]))}c&&(M=!0),this.depMaps.push(f),x.completeLoad(u),v([u],s)}),i.load(e.name,v,s,A))})),x.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){_[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(e,n){var r,i;if("string"==typeof e){e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=e;if(r=m(k,e.id)){this.depExports[n]=r(this);return}this.depCount+=1,f(e,"defined",u(this,function(e){this.defineDep(n,e),this.check()})),this.errback&&f(e,"error",u(this,this.errback))}r=e.id,i=O[r],!t(k,r)&&i&&!i.enabled&&x.enable(e,this)})),B(this.pluginMaps,u(this,function(e){var t=m(O,e.id);t&&!t.enabled&&x.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},x={config:A,contextName:e,registry:O,defined:j,urlFetched:F,defQueue:P,Module:S,makeModuleMap:o,nextTick:g.nextTick,onError:l,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=A.shim,n={paths:!0,bundles:!0,config:!0,map:!0};B(e,function(e,t){n[t]?(A[t]||(A[t]={}),U(A[t],e,!0,!0)):A[t]=e}),e.bundles&&B(e.bundles,function(e,t){v(e,function(e){e!==t&&(I[e]=t)})}),e.shim&&(B(e.shim,function(e,n){H(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=x.makeShimExports(e)),t[n]=e}),A.shim=t),e.packages&&v(e.packages,function(e){var t,e="string"==typeof e?{name:e}:e;t=e.name,e.location&&(A.paths[t]=e.location),A.pkgs[t]=e.name+"/"+(e.main||"main").replace(ia,"").replace(Q,"")}),B(O,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t))}),(e.deps||e.callback)&&x.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ba,arguments)),t||e.exports&&da(e.exports)}},makeRequire:function(i,s){function u(n,r,f){var c,h;return s.enableBuildCallback&&r&&G(r)&&(r.__requireJsBuild=!0),"string"==typeof n?G(r)?l(C("requireargs","Invalid require call"),f):i&&t(k,n)?k[n](O[i.id]):g.get?g.get(x,n,i,u):(c=o(n,i,!1,!0),c=c.id,t(j,c)?j[c]:l(C("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(i?"":". Use require([])")))):(w(),x.nextTick(function(){w(),h=a(o(null,i)),h.skipMap=s.skipMap,h.init(n,r,f,{enabled:!0}),d()}),u)}return s=s||{},U(u,{isBrowser:z,toUrl:function(e){var t,r=e.lastIndexOf("."),s=e.split("/")[0];return-1!==r&&("."!==s&&".."!==s||1<r)&&(t=e.substring(r,e.length),e=e.substring(0,r)),x.nameToUrl(n(e,i&&i.id,!0),t,!0)},defined:function(e){return t(j,o(e,i,!1,!0).id)},specified:function(e){return e=o(e,i,!1,!0).id,t(j,e)||t(O,e)}}),i||(u.undef=function(e){c();var t=o(e,i,!0),n=m(O,e);r(e),delete j[e],delete F[t.url],delete D[e],T(P,function(t,n){t[0]===e&&P.splice(n,1)}),n&&(n.events.defined&&(D[e]=n.events),h(e))}),u},enable:function(e){m(O,e.id)&&a(e).enable()},completeLoad:function(e){var n,r,s=m(A.shim,e)||{},o=s.exports;for(c();P.length;){r=P.shift();if(null===r[0]){r[0]=e;if(n)break;n=!0}else r[0]===e&&(n=!0);y(r)}r=m(O,e);if(!n&&!t(j,e)&&r&&!r.inited){if(A.enforceDefine&&(!o||!da(o)))return i(e)?void 0:l(C("nodefine","No define call for "+e,null,[e]));y([e,s.deps||[],s.exportsFn])}d()},nameToUrl:function(e,t,n){var r,i,s;(r=m(A.pkgs,e))&&(e=r);if(r=m(I,e))return x.nameToUrl(r,t,n);if(g.jsExtRegExp.test(e))r=e+(t||"");else{r=A.paths,e=e.split("/");for(i=e.length;0<i;i-=1)if(s=e.slice(0,i).join("/"),s=m(r,s)){H(s)&&(s=s[0]),e.splice(0,i,s);break}r=e.join("/"),r+=t||(/^data\:|\?/.test(r)||n?"":".js"),r=("/"===r.charAt(0)||r.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+r}return A.urlArgs?r+((-1===r.indexOf("?")?"?":"&")+A.urlArgs):r},load:function(e,t){g.load(x,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||ja.test((e.currentTarget||e.srcElement).readyState))N=null,e=b(e),x.completeLoad(e.id)},onScriptError:function(e){var t=b(e);if(!i(t.id))return l(C("scripterror","Script error for: "+t.id,e,[t.id]))}},x.require=x.makeRequire(),x}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z="undefined"!=typeof window&&"undefined"!=typeof navigator&&!!window.document,ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}"undefined"!=typeof require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(e,t,n,r){var i,s="_";return!H(e)&&"string"!=typeof e&&(i=e,H(t)?(e=t,t=n,n=r):e=[]),i&&i.context&&(s=i.context),(r=m(F,s))||(r=F[s]=g.s.newContext(s)),i&&r.configure(i),r.require(e,t,n)},g.config=function(e){return g(e)},g.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=g),g.version="2.1.14",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(e){g[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},g.load=function(e,t,n){var r=e&&e.config||{};if(z)return r=g.createNode(r,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),r.attachEvent&&!(r.attachEvent.toString&&0>r.attachEvent.toString().indexOf("[native code"))&&!Y?(M=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)):(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)),r.src=n,J=r,D?y.insertBefore(r,D):y.appendChild(r),J=null,r;if(ea)try{importScripts(n),e.completeLoad(t)}catch(i){e.onError(C("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(e){y||(y=e.parentNode);if(I=e.getAttribute("data-main"))return s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),H(t)||(n=t,t=null),!t&&G(n)&&(t=[],n.length&&(n.toString().replace(ka,"").replace(la,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),M&&((r=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return N=e}),r=N),r&&(e||(e=r.getAttribute("data-requiremodule")),i=F[r.getAttribute("data-requirecontext")])),(i?i.defQueue:R).push([e,t,n])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}})(this),define("requireLib",function(){}),function(e,t){function P(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||n!=="function"&&(t===0||typeof t=="number"&&t>0&&t-1 in e)}function B(e){var t=H[e]={};return b.each(e.match(E)||[],function(e,n){t[n]=!0}),t}function I(e,n,r,i){if(!b.acceptData(e))return;var s,o,u=b.expando,a=typeof n=="string",f=e.nodeType,c=f?b.cache:e,h=f?e[u]:e[u]&&u;if((!h||!c[h]||!i&&!c[h].data)&&a&&r===t)return;h||(f?e[u]=h=l.pop()||b.guid++:h=u),c[h]||(c[h]={},f||(c[h].toJSON=b.noop));if(typeof n=="object"||typeof n=="function")i?c[h]=b.extend(c[h],n):c[h].data=b.extend(c[h].data,n);return s=c[h],i||(s.data||(s.data={}),s=s.data),r!==t&&(s[b.camelCase(n)]=r),a?(o=s[n],o==null&&(o=s[b.camelCase(n)])):o=s,o}function q(e,t,n){if(!b.acceptData(e))return;var r,i,s,o=e.nodeType,u=o?b.cache:e,a=o?e[b.expando]:b.expando;if(!u[a])return;if(t){s=n?u[a]:u[a].data;if(s){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in s?t=[t]:(t=b.camelCase(t),t in s?t=[t]:t=t.split(" "));for(r=0,i=t.length;r<i;r++)delete s[t[r]];if(!(n?U:b.isEmptyObject)(s))return}}if(!n){delete u[a].data;if(!U(u[a]))return}o?b.cleanData([e],!0):b.support.deleteExpando||u!=u.window?delete u[a]:u[a]=null}function R(e,n,r){if(r===t&&e.nodeType===1){var i="data-"+n.replace(F,"-$1").toLowerCase();r=e.getAttribute(i);if(typeof r=="string"){try{r=r==="true"?!0:r==="false"?!1:r==="null"?null:+r+""===r?+r:j.test(r)?b.parseJSON(r):r}catch(s){}b.data(e,n,r)}else r=t}return r}function U(e){var t;for(t in e){if(t==="data"&&b.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function it(){return!0}function st(){return!1}function ct(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function ht(e,t,n){t=t||0;if(b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if(typeof t=="string"){var r=b.grep(e,function(e){return e.nodeType===1});if(at.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function pt(e){var t=dt.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Mt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function _t(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function Dt(e){var t=Ct.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Pt(e,t){var n,r=0;for(;(n=e[r])!=null;r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function Ht(e,t){if(t.nodeType!==1||!b.hasData(e))return;var n,r,i,s=b._data(e),o=b._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)b.event.add(t,n,u[n][r])}o.data&&(o.data=b.extend({},o.data))}function Bt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}if(n==="script"&&t.text!==e.text)_t(t).text=e.text,Dt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&xt.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function jt(e,n){var r,s,o=0,u=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!u)for(u=[],r=e.childNodes||e;(s=r[o])!=null;o++)!n||b.nodeName(s,n)?u.push(s):b.merge(u,jt(s,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],u):u}function Ft(e){xt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;while(i--){t=en[i]+n;if(t in e)return t}return r}function nn(e,t){return e=t||e,b.css(e,"display")==="none"||!b.contains(e.ownerDocument,e)}function rn(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=b._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&nn(r)&&(s[o]=b._data(r,"olddisplay",an(r.nodeName)))):s[o]||(i=nn(r),(n&&n!=="none"||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function sn(e,t,n){var r=$t.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function on(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=b.css(e,n+Zt[s],!0,i)),r?(n==="content"&&(o-=b.css(e,"padding"+Zt[s],!0,i)),n!=="margin"&&(o-=b.css(e,"border"+Zt[s]+"Width",!0,i))):(o+=b.css(e,"padding"+Zt[s],!0,i),n!=="padding"&&(o+=b.css(e,"border"+Zt[s]+"Width",!0,i)));return o}function un(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=qt(e),o=b.support.boxSizing&&b.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Rt(e,t,s);if(i<0||i==null)i=e.style[t];if(Jt.test(i))return i;r=o&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+on(e,t,n||(o?"border":"content"),r,s)+"px"}function an(e){var t=s,n=Qt[e];if(!n){n=fn(e,t);if(n==="none"||!n)It=(It||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(It[0].contentWindow||It[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=fn(e,t),It.detach();Qt[e]=n}return n}function fn(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}function vn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||cn.test(e)?r(e,i):vn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&b.type(t)==="object")for(i in t)vn(e+"["+i+"]",t[i],n,r);else r(e,t)}function _n(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(E)||[];if(b.isFunction(n))while(r=s[i++])r[0]==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function Dn(e,t,n,r){function o(u){var a;return i[u]=!0,b.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===An;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Pn(e,n){var r,i,s=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((s[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}function Hn(e,n,r){var i,s,o,u,a=e.contents,f=e.dataTypes,l=e.responseFields;for(u in l)u in r&&(n[l[u]]=r[u]);while(f[0]==="*")f.shift(),s===t&&(s=e.mimeType||n.getResponseHeader("Content-Type"));if(s)for(u in a)if(a[u]&&a[u].test(s)){f.unshift(u);break}if(f[0]in r)o=f[0];else{for(u in r){if(!f[0]||e.converters[u+" "+f[0]]){o=u;break}i||(i=u)}o=o||i}if(o)return o!==f[0]&&f.unshift(o),r[o]}function Bn(e,t){var n,r,i,s,o={},u=0,a=e.dataTypes.slice(),f=a[0];e.dataFilter&&(t=e.dataFilter(t,e.dataType));if(a[1])for(i in e.converters)o[i.toLowerCase()]=e.converters[i];for(;r=a[++u];)if(r!=="*"){if(f!=="*"&&f!==r){i=o[f+" "+r]||o["* "+r];if(!i)for(n in o){s=n.split(" ");if(s[1]===r){i=o[f+" "+s[0]]||o["* "+s[0]];if(i){i===!0?i=o[n]:o[n]!==!0&&(r=s[0],a.splice(u--,0,r));break}}}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(l){return{state:"parsererror",error:i?l:"No conversion from "+f+" to "+r}}}f=r}return{state:"success",data:t}}function zn(){try{return new e.XMLHttpRequest}catch(t){}}function Wn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Yn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){var r=(Gn[t]||[]).concat(Gn["*"]),i=0,s=r.length;for(;i<s;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,s=0,o=Qn.length,u=b.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Xn||Yn(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Yn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;tr(l,f.opts.specialEasing);for(;s<o;s++){r=Qn[s].call(f,e,l,f.opts);if(r)return r}return Zn(f,l),b.isFunction(f.opts.start)&&f.opts.start.call(e,f),b.fx.timer(b.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function tr(e,t){var n,r,i,s,o;for(i in e){r=b.camelCase(i),s=t[r],n=e[i],b.isArray(n)&&(s=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),o=b.cssHooks[r];if(o&&"expand"in o){n=o.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=s)}else t[r]=s}}function nr(e,t,n){var r,i,s,o,u,a,f,l,c,h=this,p=e.style,d={},v=[],m=e.nodeType&&nn(e);n.queue||(l=b._queueHooks(e,"fx"),l.unqueued==null&&(l.unqueued=0,c=l.empty.fire,l.empty.fire=function(){l.unqueued||c()}),l.unqueued++,h.always(function(){h.always(function(){l.unqueued--,b.queue(e,"fx").length||l.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],b.css(e,"display")==="inline"&&b.css(e,"float")==="none"&&(!b.support.inlineBlockNeedsLayout||an(e.nodeName)==="inline"?p.display="inline-block":p.zoom=1)),n.overflow&&(p.overflow="hidden",b.support.shrinkWrapBlocks||h.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in t){o=t[i];if($n.exec(o)){delete t[i],a=a||o==="toggle";if(o===(m?"hide":"show"))continue;v.push(i)}}s=v.length;if(s){u=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in u&&(m=u.hidden),a&&(u.hidden=!m),m?b(e).show():h.done(function(){b(e).hide()}),h.done(function(){var t;b._removeData(e,"fxshow");for(t in d)b.style(e,t,d[t])});for(i=0;i<s;i++)r=v[i],f=h.createTween(r,m?u[r]:0),d[r]=u[r]||b.style(e,r),r in u||(u[r]=f.start,m&&(f.end=f.start,f.start=r==="width"||r==="height"?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function sr(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,s=e.document,o=e.location,u=e.jQuery,a=e.$,f={},l=[],c="1.9.1",h=l.concat,p=l.push,d=l.slice,v=l.indexOf,m=f.toString,g=f.hasOwnProperty,y=c.trim,b=function(e,t){return new b.fn.init(e,t,r)},w=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,E=/\S+/g,S=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,x=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,T=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,N=/^[\],:{}\s]*$/,C=/(?:^|:|,)(?:\s*\[)+/g,k=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,L=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,A=/^-ms-/,O=/-([\da-z])/gi,M=function(e,t){return t.toUpperCase()},_=function(e){if(s.addEventListener||e.type==="load"||s.readyState==="complete")D(),b.ready()},D=function(){s.addEventListener?(s.removeEventListener("DOMContentLoaded",_,!1),e.removeEventListener("load",_,!1)):(s.detachEvent("onreadystatechange",_),e.detachEvent("onload",_))};b.fn=b.prototype={jquery:c,constructor:b,init:function(e,n,r){var i,o;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?i=[null,e,null]:i=x.exec(e);if(i&&(i[1]||!n)){if(i[1]){n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:s,!0));if(T.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}o=s.getElementById(i[2]);if(o&&o.parentNode){if(o.id!==i[2])return r.find(e);this.length=1,this[0]=o}return this.context=s,this.selector=e,this}return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return d.call(this)},get:function(e){return e==null?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:p,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,s,o,u=arguments[0]||{},a=1,f=arguments.length,l=!1;typeof u=="boolean"&&(l=u,u=arguments[1]||{},a=2),typeof u!="object"&&!b.isFunction(u)&&(u={}),f===a&&(u=this,--a);for(;a<f;a++)if((s=arguments[a])!=null)for(i in s){e=u[i],r=s[i];if(u===r)continue;l&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,o=e&&b.isArray(e)?e:[]):o=e&&b.isPlainObject(e)?e:{},u[i]=b.extend(l,o,r)):r!==t&&(u[i]=r)}return u},b.extend({noConflict:function(t){return e.$===b&&(e.$=a),t&&e.jQuery===b&&(e.jQuery=u),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?--b.readyWait:b.isReady)return;if(!s.body)return setTimeout(b.ready);b.isReady=!0;if(e!==!0&&--b.readyWait>0)return;n.resolveWith(s,[b]),b.fn.trigger&&b(s).trigger("ready").off("ready")},isFunction:function(e){return b.type(e)==="function"},isArray:Array.isArray||function(e){return b.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return e==null?String(e):typeof e=="object"||typeof e=="function"?f[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||b.type(e)!=="object"||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!g.call(e,"constructor")&&!g.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||g.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||s;var r=T.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t);if(t===null)return t;if(typeof t=="string"){t=b.trim(t);if(t&&N.test(t.replace(k,"@").replace(L,"]").replace(C,"")))return(new Function("return "+t))()}b.error("Invalid JSON: "+t)},parseXML:function(n){var r,i;if(!n||typeof n!="string")return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(s){r=t}return(!r||!r.documentElement||r.getElementsByTagName("parsererror").length)&&b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(A,"ms-").replace(O,M)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=P(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:y&&!y.call("﻿ ")?function(e){return e==null?"":y.call(e)}:function(e){return e==null?"":(e+"").replace(S,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(P(Object(e))?b.merge(n,typeof e=="string"?[e]:e):p.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(v)return v.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,s=0;if(typeof r=="number")for(;s<r;s++)e[i++]=n[s];else while(n[s]!==t)e[i++]=n[s++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length;n=!!n;for(;s<o;s++)r=!!t(e[s],s),n!==r&&i.push(e[s]);return i},map:function(e,t,n){var r,i=0,s=e.length,o=P(e),u=[];if(o)for(;i<s;i++)r=t(e[i],i,n),r!=null&&(u[u.length]=r);else for(i in e)r=t(e[i],i,n),r!=null&&(u[u.length]=r);return h.apply([],u)},guid:1,proxy:function(e,n){var r,i,s;return typeof n=="string"&&(s=e[n],n=e,e=s),b.isFunction(e)?(r=d.call(arguments,2),i=function(){return e.apply(n||this,r.concat(d.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,s,o,u){var a=0,f=e.length,l=r==null;if(b.type(r)==="object"){s=!0;for(a in r)b.access(e,n,a,r[a],!0,o,u)}else if(i!==t){s=!0,b.isFunction(i)||(u=!0),l&&(u?(n.call(e,i),n=null):(l=n,n=function(e,t,n){return l.call(b(e),n)}));if(n)for(;a<f;a++)n(e[a],r,u?i:i.call(e[a],a,n(e[a],r)))}return s?e:l?n.call(e):f?n(e[0],r):o},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n){n=b.Deferred();if(s.readyState==="complete")setTimeout(b.ready);else if(s.addEventListener)s.addEventListener("DOMContentLoaded",_,!1),e.addEventListener("load",_,!1);else{s.attachEvent("onreadystatechange",_),e.attachEvent("onload",_);var r=!1;try{r=e.frameElement==null&&s.documentElement}catch(i){}r&&r.doScroll&&function o(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(o,50)}D(),b.ready()}}()}}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){f["[object "+t+"]"]=t.toLowerCase()}),r=b(s);var H={};b.Callbacks=function(e){e=typeof e=="string"?H[e]||B(e):b.extend({},e);var n,r,i,s,o,u,a=[],f=!e.once&&[],l=function(t){r=e.memory&&t,i=!0,o=u||0,u=0,s=a.length,n=!0;for(;a&&o<s;o++)if(a[o].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,a&&(f?f.length&&l(f.shift()):r?a=[]:c.disable())},c={add:function(){if(a){var t=a.length;(function i(t){b.each(t,function(t,n){var r=b.type(n);r==="function"?(!e.unique||!c.has(n))&&a.push(n):n&&n.length&&r!=="string"&&i(n)})})(arguments),n?s=a.length:r&&(u=t,l(r))}return this},remove:function(){return a&&b.each(arguments,function(e,t){var r;while((r=b.inArray(t,a,r))>-1)a.splice(r,1),n&&(r<=s&&s--,r<=o&&o--)}),this},has:function(e){return e?b.inArray(e,a)>-1:!!a&&!!a.length},empty:function(){return a=[],this},disable:function(){return a=f=r=t,this},disabled:function(){return!a},lock:function(){return f=t,r||c.disable(),this},locked:function(){return!f},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],a&&(!i||f)&&(n?f.push(t):l(t)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,s){var o=s[0],u=b.isFunction(e[t])&&e[t];i[s[1]](function(){var e=u&&u.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o+"With"](this===r?n.promise():this,u?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=d.call(arguments),r=n.length,i=r!==1||e&&b.isFunction(e.promise)?r:0,s=i===1?e:b.Deferred(),o=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?d.call(arguments):r,n===u?s.notifyWith(t,n):--i||s.resolveWith(t,n)}},u,a,f;if(r>1){u=new Array(r),a=new Array(r),f=new Array(r);for(;t<r;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(o(t,f,n)).fail(s.reject).progress(o(t,a,u)):--i}return i||s.resolveWith(f,n),s.promise()}}),b.support=function(){var t,n,r,o,u,a,f,l,c,h,p=s.createElement("div");p.setAttribute("className","t"),p.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=p.getElementsByTagName("*"),r=p.getElementsByTagName("a")[0];if(!n||!r||!n.length)return{};u=s.createElement("select"),f=u.appendChild(s.createElement("option")),o=p.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:p.className!=="t",leadingWhitespace:p.firstChild.nodeType===3,tbody:!p.getElementsByTagName("tbody").length,htmlSerialize:!!p.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:r.getAttribute("href")==="/a",opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!o.value,optSelected:f.selected,enctype:!!s.createElement("form").enctype,html5Clone:s.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",boxModel:s.compatMode==="CSS1Compat",deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},o.checked=!0,t.noCloneChecked=o.cloneNode(!0).checked,u.disabled=!0,t.optDisabled=!f.disabled;try{delete p.test}catch(d){t.deleteExpando=!1}o=s.createElement("input"),o.setAttribute("value",""),t.input=o.getAttribute("value")==="",o.value="t",o.setAttribute("type","radio"),t.radioValue=o.value==="t",o.setAttribute("checked","t"),o.setAttribute("name","t"),a=s.createDocumentFragment(),a.appendChild(o),t.appendChecked=o.checked,t.checkClone=a.cloneNode(!0).cloneNode(!0).lastChild.checked,p.attachEvent&&(p.attachEvent("onclick",function(){t.noCloneEvent=!1}),p.cloneNode(!0).click());for(h in{submit:!0,change:!0,focusin:!0})p.setAttribute(l="on"+h,"t"),t[h+"Bubbles"]=l in e||p.attributes[l].expando===!1;return p.style.backgroundClip="content-box",p.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle=p.style.backgroundClip==="content-box",b(function(){var n,r,o,u="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",a=s.getElementsByTagName("body")[0];if(!a)return;n=s.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",a.appendChild(n).appendChild(p),p.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=p.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=o[0].offsetHeight===0,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=c&&o[0].offsetHeight===0,p.innerHTML="",p.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=p.offsetWidth===4,t.doesNotIncludeMarginInBodyOffset=a.offsetTop!==1,e.getComputedStyle&&(t.pixelPosition=(e.getComputedStyle(p,null)||{}).top!=="1%",t.boxSizingReliable=(e.getComputedStyle(p,null)||{width:"4px"}).width==="4px",r=p.appendChild(s.createElement("div")),r.style.cssText=p.style.cssText=u,r.style.marginRight=r.style.width="0",p.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof p.style.zoom!==i&&(p.innerHTML="",p.style.cssText=u+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=p.offsetWidth===3,p.style.display="block",p.innerHTML="<div></div>",p.firstChild.style.width="5px",t.shrinkWrapBlocks=p.offsetWidth!==3,t.inlineBlockNeedsLayout&&(a.style.zoom=1)),a.removeChild(n),n=p=o=r=null}),n=u=a=f=r=o=null,t}();var j=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,F=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(c+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!U(e)},data:function(e,t,n){return I(e,t,n)},removeData:function(e,t){return q(e,t)},_data:function(e,t,n){return I(e,t,n,!0)},_removeData:function(e,t){return q(e,t,!0)},acceptData:function(e){if(e.nodeType&&e.nodeType!==1&&e.nodeType!==9)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,s=this[0],o=0,u=null;if(e===t){if(this.length){u=b.data(s);if(s.nodeType===1&&!b._data(s,"parsedAttrs")){r=s.attributes;for(;o<r.length;o++)i=r[o].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),R(s,i,u[i]));b._data(s,"parsedAttrs",!0)}}return u}return typeof e=="object"?this.each(function(){b.data(this,e)}):b.access(this,function(n){if(n===t)return s?R(s,e,b.data(s,e)):null;this.each(function(){b.data(this,e,n)})},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=b._data(e,t),n&&(!r||b.isArray(n)?r=b._data(e,t,b.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),s=b._queueHooks(e,t),o=function(){b.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),s.cur=i,i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return typeof e!="string"&&(n=e,e="fx",r--),arguments.length<r?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),e==="fx"&&t[0]!=="inprogress"&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,s=b.Deferred(),o=this,u=this.length,a=function(){--i||s.resolveWith(o,[o])};typeof e!="string"&&(n=e,e=t),e=e||"fx";while(u--)r=b._data(o[u],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(a));return a(),s.promise(n)}});var z,W,X=/[\t\r\n]/g,V=/\r/g,$=/^(?:input|select|textarea|button|object)$/i,J=/^(?:a|area)$/i,K=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,Q=/^(?:checked|selected)$/i,G=b.support.getSetAttribute,Y=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(n){}})},addClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=typeof e=="string"&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(a){t=(e||"").match(E)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(X," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");n.className=b.trim(r)}}}return this},removeClass:function(e){var t,n,r,i,s,o=0,u=this.length,a=arguments.length===0||typeof e=="string"&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(a){t=(e||"").match(E)||[];for(;o<u;o++){n=this[o],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(X," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}}}return this},toggleClass:function(e,t){var n=typeof e,r=typeof t=="boolean";return b.isFunction(e)?this.each(function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var s,o=0,u=b(this),a=t,f=e.match(E)||[];while(s=f[o++])a=r?a:!u.hasClass(s),u[a?"addClass":"removeClass"](s)}else if(n===i||n==="boolean")this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,s=this[0];if(!arguments.length){if(s)return r=b.valHooks[s.type]||b.valHooks[s.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(s,"value"))!==t?n:(n=s.value,typeof n=="string"?n.replace(V,""):n==null?"":n);return}return i=b.isFunction(e),this.each(function(n){var s,o=b(this);if(this.nodeType!==1)return;i?s=e.call(this,n,o.val()):s=e,s==null?s="":typeof s=="number"?s+="":b.isArray(s)&&(s=b.map(s,function(e){return e==null?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()];if(!r||!("set"in r)||r.set(this,s,"value")===t)this.value=s})}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(b.support.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!b.nodeName(n.parentNode,"optgroup"))){t=b(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var s,o,u,a=e.nodeType;if(!e||a===3||a===8||a===2)return;if(typeof e.getAttribute===i)return b.prop(e,n,r);o=a!==1||!b.isXMLDoc(e),o&&(n=n.toLowerCase(),s=b.attrHooks[n]||(K.test(n)?W:z));if(r===t)return s&&o&&"get"in s&&(u=s.get(e,n))!==null?u:(typeof e.getAttribute!==i&&(u=e.getAttribute(n)),u==null?t:u);if(r!==null)return s&&o&&"set"in s&&(u=s.set(e,r,n))!==t?u:(e.setAttribute(n,r+""),r);b.removeAttr(e,n)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(E);if(s&&e.nodeType===1)while(n=s[i++])r=b.propFix[n]||n,K.test(n)?!G&&Q.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(G?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&t==="radio"&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,s,o,u=e.nodeType;if(!e||u===3||u===8||u===2)return;return o=u!==1||!b.isXMLDoc(e),o&&(n=b.propFix[n]||n,s=b.propHooks[n]),r!==t?s&&"set"in s&&(i=s.set(e,r,n))!==t?i:e[n]=r:s&&"get"in s&&(i=s.get(e,n))!==null?i:e[n]},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):$.test(e.nodeName)||J.test(e.nodeName)&&e.href?0:t}}}}),W={get:function(e,n){var r=b.prop(e,n),i=typeof r=="boolean"&&e.getAttribute(n),s=typeof r=="boolean"?Y&&G?i!=null:Q.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return s&&s.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):Y&&G||!Q.test(n)?e.setAttribute(!G&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}};if(!Y||!G)b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,t,n){if(!b.nodeName(e,"input"))return z&&z.set(e,t,n);e.defaultValue=t}};G||(z=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&(n==="id"||n==="name"||n==="coords"?r.value!=="":r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="",r==="value"||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:z.get,set:function(e,t,n){z.set(e,t===""?!1:t,n)}},b.each(["width","height"],function(e,t){b.attrHooks[t]=b.extend(b.attrHooks[t],{set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return r==null?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,t){if(b.isArray(t))return e.checked=b.inArray(b(e).val(),t)>=0}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,n,r,s,o){var u,a,f,l,c,h,p,d,v,m,g,y=b._data(e);if(!y)return;r.handler&&(l=r,r=l.handler,o=l.selector),r.guid||(r.guid=b.guid++),(a=y.events)||(a=y.events={}),(h=y.handle)||(h=y.handle=function(e){return typeof b===i||!!e&&b.event.triggered===e.type?t:b.event.dispatch.apply(h.elem,arguments)},h.elem=e),n=(n||"").match(E)||[""],f=n.length;while(f--){u=rt.exec(n[f])||[],v=g=u[1],m=(u[2]||"").split(".").sort(),c=b.event.special[v]||{},v=(o?c.delegateType:c.bindType)||v,c=b.event.special[v]||{},p=b.extend({type:v,origType:g,data:s,handler:r,guid:r.guid,selector:o,needsContext:o&&b.expr.match.needsContext.test(o),namespace:m.join(".")},l);if(!(d=a[v])){d=a[v]=[],d.delegateCount=0;if(!c.setup||c.setup.call(e,s,m,h)===!1)e.addEventListener?e.addEventListener(v,h,!1):e.attachEvent&&e.attachEvent("on"+v,h)}c.add&&(c.add.call(e,p),p.handler.guid||(p.handler.guid=r.guid)),o?d.splice(d.delegateCount++,0,p):d.push(p),b.event.global[v]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,p,d,v,m=b.hasData(e)&&b._data(e);if(!m||!(l=m.events))return;t=(t||"").match(E)||[""],f=t.length;while(f--){u=rt.exec(t[f])||[],p=v=u[1],d=(u[2]||"").split(".").sort();if(!p){for(p in l)b.event.remove(e,p+t[f],n,r,!0);continue}c=b.event.special[p]||{},p=(r?c.delegateType:c.bindType)||p,h=l[p]||[],u=u[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||v===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,d,m.handle)===!1)&&b.removeEvent(e,p,m.handle),delete l[p])}b.isEmptyObject(l)&&(delete m.handle,b._removeData(e,"events"))},trigger:function(n,r,i,o){var u,a,f,l,c,h,p,d=[i||s],v=g.call(n,"type")?n.type:n,m=g.call(n,"namespace")?n.namespace.split("."):[];f=h=i=i||s;if(i.nodeType===3||i.nodeType===8)return;if(nt.test(v+b.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),a=v.indexOf(":")<0&&"on"+v,n=n[b.expando]?n:new b.Event(v,typeof n=="object"&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=r==null?[n]:b.makeArray(r,[n]),c=b.event.special[v]||{};if(!o&&c.trigger&&c.trigger.apply(i,r)===!1)return;if(!o&&!c.noBubble&&!b.isWindow(i)){l=c.delegateType||v,nt.test(l+v)||(f=f.parentNode);for(;f;f=f.parentNode)d.push(f),h=f;h===(i.ownerDocument||s)&&d.push(h.defaultView||h.parentWindow||e)}p=0;while((f=d[p++])&&!n.isPropagationStopped())n.type=p>1?l:c.bindType||v,u=(b._data(f,"events")||{})[n.type]&&b._data(f,"handle"),u&&u.apply(f,r),u=a&&f[a],u&&b.acceptData(f)&&u.apply&&u.apply(f,r)===!1&&n.preventDefault();n.type=v;if(!o&&!n.isDefaultPrevented()&&(!c._default||c._default.apply(i.ownerDocument,r)===!1)&&(v!=="click"||!b.nodeName(i,"a"))&&b.acceptData(i)&&a&&i[v]&&!b.isWindow(i)){h=i[a],h&&(i[a]=null),b.event.triggered=v;try{i[v]()}catch(y){}b.event.triggered=t,h&&(i[a]=h)}return n.result},dispatch:function(e){e=b.event.fix(e);var n,r,i,s,o,u=[],a=d.call(arguments),f=(b._data(this,"events")||{})[e.type]||[],l=b.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=b.event.handlers.call(this,e,f),n=0;while((s=u[n++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,n){var r,i,s,o,u=[],a=n.delegateCount,f=e.target;if(a&&f.nodeType&&(!e.button||e.type!=="click"))for(;f!=this;f=f.parentNode||this)if(f.nodeType===1&&(f.disabled!==!0||e.type!=="click")){s=[];for(o=0;o<a;o++)i=n[o],r=i.selector+" ",s[r]===t&&(s[r]=i.needsContext?b(r,this).index(f)>=0:b.find(r,this,null,[f]).length),s[r]&&s.push(i);s.length&&u.push({elem:f,handlers:s})}return a<n.length&&u.push({elem:this,handlers:n.slice(a)}),u},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,o=e,u=this.fixHooks[i];u||(this.fixHooks[i]=u=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=u.props?this.props.concat(u.props):this.props,e=new b.Event(o),t=r.length;while(t--)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||s),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,u.filter?u.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,o,u=n.button,a=n.fromElement;return e.pageX==null&&n.clientX!=null&&(i=e.target.ownerDocument||s,o=i.documentElement,r=i.body,e.pageX=n.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?n.toElement:a),!e.which&&u!==t&&(e.which=u&1?1:u&2?3:u&4?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){if(b.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1}},focus:{trigger:function(){if(this!==s.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===s.activeElement&&this.blur)return this.blur(),!1},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=s.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,t){if(!(this instanceof b.Event))return new b.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:st):this.type=e,t&&b.extend(this,t),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0},b.Event.prototype={isDefaultPrevented:st,isPropagationStopped:st,isImmediatePropagationStopped:st,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!b.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){if(b.nodeName(this,"form"))return!1;b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(b.nodeName(this,"form"))return!1;b.event.remove(this,"._submit")}}),b.support.changeBubbles||(b.event.special.change={setup:function(){if(Z.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")b.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)});return!1}b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){n++===0&&s.addEventListener(e,r,!0)},teardown:function(){--n===0&&s.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,s){var o,u;if(typeof e=="object"){typeof n!="string"&&(r=r||n,n=t);for(o in e)this.on(o,n,r,e[o],s);return this}r==null&&i==null?(i=n,r=n=t):i==null&&(typeof n=="string"?(i=r,r=t):(i=r,r=n,n=t));if(i===!1)i=st;else if(!i)return this;return s===1&&(u=i,i=function(e){return b().off(e),u.apply(this,arguments)},i.guid=u.guid||(u.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,s;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if(typeof e=="object"){for(s in e)this.off(s,n,e[s]);return this}if(n===!1||typeof n=="function")r=n,n=t;return r===!1&&(r=st),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return b.event.trigger(e,t,n,!0)}}),function(e,t){function rt(e){return J.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function st(e){return e[w]=!0,e}function ot(e){var t=c.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function ut(e,t,n,r){var i,s,o,u,a,f,h,v,m,y;(t?t.ownerDocument||t:E)!==c&&l(t),t=t||c,n=n||[];if(!e||typeof e!="string")return n;if((u=t.nodeType)!==1&&u!==9)return[];if(!p&&!r){if(i=K.exec(e))if(o=i[1]){if(u===9){s=t.getElementById(o);if(!s||!s.parentNode)return n;if(s.id===o)return n.push(s),n}else if(t.ownerDocument&&(s=t.ownerDocument.getElementById(o))&&g(t,s)&&s.id===o)return n.push(s),n}else{if(i[2])return _.apply(n,D.call(t.getElementsByTagName(e),0)),n;if((o=i[3])&&S.getByClassName&&t.getElementsByClassName)return _.apply(n,D.call(t.getElementsByClassName(o),0)),n}if(S.qsa&&!d.test(e)){h=!0,v=w,m=t,y=u===9&&e;if(u===1&&t.nodeName.toLowerCase()!=="object"){f=ht(e),(h=t.getAttribute("id"))?v=h.replace(Y,"\\$&"):t.setAttribute("id",v),v="[id='"+v+"'] ",a=f.length;while(a--)f[a]=v+pt(f[a]);m=$.test(e)&&t.parentNode||t,y=f.join(",")}if(y)try{return _.apply(n,D.call(m.querySelectorAll(y),0)),n}catch(b){}finally{h||t.removeAttribute("id")}}}return Et(e.replace(R,"$1"),t,n,r)}function at(e,t){var n=t&&e,r=n&&(~t.sourceIndex||A)-(~e.sourceIndex||A);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e,t){var n,r,s,o,u,a,f,l=C[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=i.preFilter;while(u){if(!n||(r=U.exec(u)))r&&(u=u.slice(r[0].length)||u),a.push(s=[]);n=!1;if(r=z.exec(u))n=r.shift(),s.push({value:n,type:r[0].replace(R," ")}),u=u.slice(n.length);for(o in i.filter)(r=V[o].exec(u))&&(!f[o]||(r=f[o](r)))&&(n=r.shift(),s.push({value:n,type:o,matches:r}),u=u.slice(n.length));if(!n)break}return t?u.length:u?ut.error(e):C(e,a).slice(0)}function pt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function dt(e,t,n){var i=t.dir,s=n&&i==="parentNode",o=T++;return t.first?function(t,n,r){while(t=t[i])if(t.nodeType===1||s)return e(t,n,r)}:function(t,n,u){var a,f,l,c=x+" "+o;if(u){while(t=t[i])if(t.nodeType===1||s)if(e(t,n,u))return!0}else while(t=t[i])if(t.nodeType===1||s){l=t[w]||(t[w]={});if((f=l[i])&&f[0]===c){if((a=f[1])===!0||a===r)return a===!0}else{f=l[i]=[c],f[1]=e(t,n,u)||r;if(f[1]===!0)return!0}}}}function vt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function gt(e,t,n,r,i,s){return r&&!r[w]&&(r=gt(r)),i&&!i[w]&&(i=gt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||wt(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?mt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=mt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=mt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function yt(e){var t,n,r,s=e.length,o=i.relative[e[0].type],u=o||i.relative[" "],a=o?1:0,l=dt(function(e){return e===t},u,!0),c=dt(function(e){return P.call(t,e)>-1},u,!0),h=[function(e,n,r){return!o&&(r||n!==f)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;a<s;a++)if(n=i.relative[e[a].type])h=[dt(vt(h),n)];else{n=i.filter[e[a].type].apply(null,e[a].matches);if(n[w]){r=++a;for(;r<s;r++)if(i.relative[e[r].type])break;return gt(a>1&&vt(h),a>1&&pt(e.slice(0,a-1)).replace(R,"$1"),n,a<r&&yt(e.slice(a,r)),r<s&&yt(e=e.slice(r)),r<s&&pt(e))}h.push(n)}return vt(h)}function bt(e,t){var n=0,s=t.length>0,o=e.length>0,u=function(u,a,l,h,p){var d,v,m,g=[],y=0,b="0",w=u&&[],E=p!=null,S=f,T=u||o&&i.find.TAG("*",p&&a.parentNode||a),N=x+=S==null?1:Math.random()||.1;E&&(f=a!==c&&a,r=n);for(;(d=T[b])!=null;b++){if(o&&d){v=0;while(m=e[v++])if(m(d,a,l)){h.push(d);break}E&&(x=N,r=++n)}s&&((d=!m&&d)&&y--,u&&w.push(d))}y+=b;if(s&&b!==y){v=0;while(m=t[v++])m(w,g,a,l);if(u){if(y>0)while(b--)!w[b]&&!g[b]&&(g[b]=M.call(h));g=mt(g)}_.apply(h,g),E&&!u&&g.length>0&&y+t.length>1&&ut.uniqueSort(h)}return E&&(x=N,f=S),w};return s?st(u):u}function wt(e,t,n){var r=0,i=t.length;for(;r<i;r++)ut(e,t[r],n);return n}function Et(e,t,n,r){var s,o,a,f,l,c=ht(e);if(!r&&c.length===1){o=c[0]=c[0].slice(0);if(o.length>2&&(a=o[0]).type==="ID"&&t.nodeType===9&&!p&&i.relative[o[1].type]){t=i.find.ID(a.matches[0].replace(et,tt),t)[0];if(!t)return n;e=e.slice(o.shift().value.length)}s=V.needsContext.test(e)?0:o.length;while(s--){a=o[s];if(i.relative[f=a.type])break;if(l=i.find[f])if(r=l(a.matches[0].replace(et,tt),$.test(o[0].type)&&t.parentNode||t)){o.splice(s,1),e=r.length&&pt(o);if(!e)return _.apply(n,D.call(r,0)),n;break}}}return u(e,c)(r,t,p,n,$.test(e)),n}function St(){}var n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,w="sizzle"+ -(new Date),E=e.document,S={},x=0,T=0,N=it(),C=it(),k=it(),L=typeof t,A=1<<31,O=[],M=O.pop,_=O.push,D=O.slice,P=O.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},H="[\\x20\\t\\r\\n\\f]",B="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",j=B.replace("w","w#"),F="([*^$|!~]?=)",I="\\["+H+"*("+B+")"+H+"*(?:"+F+H+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+j+")|)|)"+H+"*\\]",q=":("+B+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g"),U=new RegExp("^"+H+"*,"+H+"*"),z=new RegExp("^"+H+"*([\\x20\\t\\r\\n\\f>+~])"+H+"*"),W=new RegExp(q),X=new RegExp("^"+j+"$"),V={ID:new RegExp("^#("+B+")"),CLASS:new RegExp("^\\.("+B+")"),NAME:new RegExp("^\\[name=['\"]?("+B+")['\"]?\\]"),TAG:new RegExp("^("+B.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},$=/[\x20\t\r\n\f]*[+~]/,J=/^[^{]+\{\s*\[native code/,K=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Q=/^(?:input|select|textarea|button)$/i,G=/^h\d$/i,Y=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,n&1023|56320)};try{D.call(E.documentElement.childNodes,0)[0].nodeType}catch(nt){D=function(e){var t,n=[];while(t=this[e++])n.push(t);return n}}o=ut.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},l=ut.setDocument=function(e){var n=e?e.ownerDocument||e:E;if(n===c||n.nodeType!==9||!n.documentElement)return c;c=n,h=n.documentElement,p=o(n),S.tagNameNoComments=ot(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),S.attributes=ot(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return t!=="boolean"&&t!=="string"}),S.getByClassName=ot(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!e.getElementsByClassName||!e.getElementsByClassName("e").length?!1:(e.lastChild.className="e",e.getElementsByClassName("e").length===2)}),S.getByName=ot(function(e){e.id=w+0,e.innerHTML="<a name='"+w+"'></a><div name='"+w+"'></div>",h.insertBefore(e,h.firstChild);var t=n.getElementsByName&&n.getElementsByName(w).length===2+n.getElementsByName(w+0).length;return S.getIdNotName=!n.getElementById(w),h.removeChild(e),t}),i.attrHandle=ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==L&&e.firstChild.getAttribute("href")==="#"})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},S.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==L&&!p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==L&&!p){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==L&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==L&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=S.tagNameNoComments?function(e,t){if(typeof t.getElementsByTagName!==L)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},i.find.NAME=S.getByName&&function(e,t){if(typeof t.getElementsByName!==L)return t.getElementsByName(name)},i.find.CLASS=S.getByClassName&&function(e,t){if(typeof t.getElementsByClassName!==L&&!p)return t.getElementsByClassName(e)},v=[],d=[":focus"];if(S.qsa=rt(n.querySelectorAll))ot(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||d.push("\\["+H+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&d.push("[*^$]="+H+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")});return(S.matchesSelector=rt(m=h.matchesSelector||h.mozMatchesSelector||h.webkitMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){S.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=new RegExp(d.join("|")),v=new RegExp(v.join("|")),g=rt(h.contains)||h.compareDocumentPosition?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},y=h.compareDocumentPosition?function(e,t){var r;if(e===t)return a=!0,0;if(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))return r&1||e.parentNode&&e.parentNode.nodeType===11?e===n||g(E,e)?-1:t===n||g(E,t)?1:0:r&4?-1:1;return e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,s=e.parentNode,o=t.parentNode,u=[e],f=[t];if(e===t)return a=!0,0;if(!s||!o)return e===n?-1:t===n?1:s?-1:o?1:0;if(s===o)return at(e,t);r=e;while(r=r.parentNode)u.unshift(r);r=t;while(r=r.parentNode)f.unshift(r);while(u[i]===f[i])i++;return i?at(u[i],f[i]):u[i]===E?-1:f[i]===E?1:0},a=!1,[0,0].sort(y),S.detectDuplicates=a,c},ut.matches=function(e,t){return ut(e,null,null,t)},ut.matchesSelector=function(e,t){(e.ownerDocument||e)!==c&&l(e),t=t.replace(Z,"='$1']");if(S.matchesSelector&&!p&&(!v||!v.test(t))&&!d.test(t))try{var n=m.call(e,t);if(n||S.disconnectedMatch||e.document&&e.document.nodeType!==11)return n}catch(r){}return ut(t,c,null,[e]).length>0},ut.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},ut.attr=function(e,t){var n;return(e.ownerDocument||e)!==c&&l(e),p||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):p||S.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},ut.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},ut.uniqueSort=function(e){var t,n=[],r=1,i=0;a=!S.detectDuplicates,e.sort(y);if(a){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));while(i--)e.splice(n[i],1)}return e},s=ut.getText=function(e){var t,n="",r=0,i=e.nodeType;if(!i)for(;t=e[r];r++)n+=s(t);else if(i===1||i===9||i===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(i===3||i===4)return e.nodeValue;return n},i=ut.selectors={cacheLength:50,createPseudo:st,match:V,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||ut.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&ut.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return V.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&W.test(n)&&(t=ht(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return e==="*"?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=N[e+" "];return t||(t=new RegExp("(^|"+H+")"+e+"("+H+"|$)"))&&N(e,function(e){return t.test(e.className||typeof e.getAttribute!==L&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=ut.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),y=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&y){l=m[w]||(m[w]={}),f=l[e]||[],p=f[0]===x&&f[1],h=f[0]===x&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[x,p,h];break}}else if(y&&(f=(t[w]||(t[w]={}))[e])&&f[0]===x)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){y&&((c[w]||(c[w]={}))[e]=[x,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||ut.error("unsupported pseudo: "+e);return r[w]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var i,s=r(e,t),o=s.length;while(o--)i=P.call(e,s[o]),e[i]=!(n[i]=s[o])}):function(e){return r(e,0,n)}):r}},pseudos:{not:st(function(e){var t=[],n=[],r=u(e.replace(R,"$1"));return r[w]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return ut(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||s(t)).indexOf(e)>-1}}),lang:st(function(e){return X.test(e||"")||ut.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||e.nodeType===3||e.nodeType===4)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return G.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()===e.type)},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[n<0?n+t:n]}),even:ct(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=ft(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=lt(n);u=ut.compile=function(e,t){var n,r=[],i=[],s=k[e+" "];if(!s){t||(t=ht(e)),n=t.length;while(n--)s=yt(t[n]),s[w]?r.push(s):i.push(s);s=k(e,bt(i,r))}return s},i.pseudos.nth=i.pseudos.eq,i.filters=St.prototype=i.pseudos,i.setFilters=new St,l(),ut.attr=b.attr,b.find=ut,b.expr=ut.selectors,b.expr[":"]=b.expr.pseudos,b.unique=ut.uniqueSort,b.text=ut.getText,b.isXMLDoc=ut.isXML,b.contains=ut.contains}(e);var ot=/Until$/,ut=/^(?:parents|prev(?:Until|All))/,at=/^.[^:#\[\.,]*$/,ft=b.expr.match.needsContext,lt={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if(typeof e!="string")return r=this,this.pushStack(b(e).filter(function(){for(t=0;t<i;t++)if(b.contains(r[t],this))return!0}));n=[];for(t=0;t<i;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ht(this,e,!1))},filter:function(e){return this.pushStack(ht(this,e,!0))},is:function(e){return!!e&&(typeof e=="string"?ft.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){var n,r=0,i=this.length,s=[],o=ft.test(e)||typeof e!="string"?b(e,t||this.context):0;for(;r<i;r++){n=this[r];while(n&&n.ownerDocument&&n!==t&&n.nodeType!==11){if(o?o.index(n)>-1:b.find.matchesSelector(n,e)){s.push(n);break}n=n.parentNode}}return this.pushStack(s.length>1?b.unique(s):s)},index:function(e){return e?typeof e=="string"?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n=typeof e=="string"?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return ct(e,"nextSibling")},prev:function(e){return ct(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return ot.test(e)||(r=n),r&&typeof r=="string"&&(i=b.filter(r,i)),i=this.length>1&&!lt[e]?b.unique(i):i,this.length>1&&ut.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),t.length===1?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){var i=[],s=e[n];while(s&&s.nodeType!==9&&(r===t||s.nodeType!==1||!b(s).is(r)))s.nodeType===1&&i.push(s),s=s[n];return i},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}});var dt="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",vt=/ jQuery\d+="(?:null|\d+)"/g,mt=new RegExp("<(?:"+dt+")[\\s/>]","i"),gt=/^\s+/,yt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,wt=/<tbody/i,Et=/<|&#?\w+;/,St=/<(?:script|style|link)/i,xt=/^(?:checkbox|radio)$/i,Tt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Ct=/^true\/(.*)/,kt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Lt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},At=pt(s),Ot=At.appendChild(s.createElement("div"));Lt.optgroup=Lt.option,Lt.tbody=Lt.tfoot=Lt.colgroup=Lt.caption=Lt.thead,Lt.th=Lt.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||s).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return b.isFunction(e)?this.each(function(t){b(this).wrapInner(e.call(this,t))}):this.each(function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=0;for(;(n=this[r])!=null;r++)if(!e||b.filter(e,[n]).length>0)!t&&n.nodeType===1&&b.cleanData(jt(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Pt(jt(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&b.cleanData(jt(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return n.nodeType===1?n.innerHTML.replace(vt,""):t;if(typeof e=="string"&&!St.test(e)&&(b.support.htmlSerialize||!mt.test(e))&&(b.support.leadingWhitespace||!gt.test(e))&&!Lt[(bt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(yt,"<$1></$2>");try{for(;r<i;r++)n=this[r]||{},n.nodeType===1&&(b.cleanData(jt(n,!1)),n.innerHTML=e);n=0}catch(s){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return!t&&typeof e!="string"&&(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=h.apply([],e);var i,s,o,u,a,f,l=0,c=this.length,p=this,d=c-1,v=e[0],m=b.isFunction(v);if(m||!(c<=1||typeof v!="string"||b.support.checkClone||!Tt.test(v)))return this.each(function(i){var s=p.eq(i);m&&(e[0]=v.call(this,i,n?s.html():t)),s.domManip(e,n,r)});if(c){f=b.buildFragment(e,this[0].ownerDocument,!1,this),i=f.firstChild,f.childNodes.length===1&&(f=i);if(i){n=n&&b.nodeName(i,"tr"),u=b.map(jt(f,"script"),_t),o=u.length;for(;l<c;l++)s=f,l!==d&&(s=b.clone(s,!0,!0),o&&b.merge(u,jt(s,"script"))),r.call(n&&b.nodeName(this[l],"table")?Mt(this[l],"tbody"):this[l],s,l);if(o){a=u[u.length-1].ownerDocument,b.map(u,Dt);for(l=0;l<o;l++)s=u[l],Nt.test(s.type||"")&&!b._data(s,"globalEval")&&b.contains(a,s)&&(s.src?b.ajax({url:s.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((s.text||s.textContent||s.innerHTML||"").replace(kt,"")))}f=i=null}}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){var n,r=0,i=[],s=b(e),o=s.length-1;for(;r<=o;r++)n=r===o?this:this.clone(!0),b(s[r])[t](n),p.apply(i,n.get());return this.pushStack(i)}}),b.extend({clone:function(e,t,n){var r,i,s,o,u,a=b.contains(e.ownerDocument,e);b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(Ot.innerHTML=e.outerHTML,Ot.removeChild(s=Ot.firstChild));if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!b.isXMLDoc(e)){r=jt(s),u=jt(e);for(o=0;(i=u[o])!=null;++o)r[o]&&Bt(i,r[o])}if(t)if(n){u=u||jt(e),r=r||jt(s);for(o=0;(i=u[o])!=null;o++)Ht(i,r[o])}else Ht(e,s);return r=jt(s,"script"),r.length>0&&Pt(r,!a&&jt(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,c=e.length,h=pt(t),p=[],d=0;for(;d<c;d++){s=e[d];if(s||s===0)if(b.type(s)==="object")b.merge(p,s.nodeType?[s]:s);else if(!Et.test(s))p.push(t.createTextNode(s));else{u=u||h.appendChild(t.createElement("div")),a=(bt.exec(s)||["",""])[1].toLowerCase(),l=Lt[a]||Lt._default,u.innerHTML=l[1]+s.replace(yt,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;!b.support.leadingWhitespace&&gt.test(s)&&p.push(t.createTextNode(gt.exec(s)[0]));if(!b.support.tbody){s=a==="table"&&!wt.test(s)?u.firstChild:l[1]==="<table>"&&!wt.test(s)?u:0,i=s&&s.childNodes.length;while(i--)b.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}b.merge(p,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=h.lastChild}}u&&h.removeChild(u),b.support.appendChecked||b.grep(jt(p,"input"),Ft),d=0;while(s=p[d++]){if(r&&b.inArray(s,r)!==-1)continue;o=b.contains(s.ownerDocument,s),u=jt(h.appendChild(s),"script"),o&&Pt(u);if(n){i=0;while(s=u[i++])Nt.test(s.type||"")&&n.push(s)}}return u=null,h},cleanData:function(e,t){var n,r,s,o,u=0,a=b.expando,f=b.cache,c=b.support.deleteExpando,h=b.event.special;for(;(n=e[u])!=null;u++)if(t||b.acceptData(n)){s=n[a],o=s&&f[s];if(o){if(o.events)for(r in o.events)h[r]?b.event.remove(n,r):b.removeEvent(n,r,o.handle);f[s]&&(delete f[s],c?delete n[a]:typeof n.removeAttribute!==i?n.removeAttribute(a):n[a]=null,l.push(s))}}}});var It,qt,Rt,Ut=/alpha\([^)]*\)/i,zt=/opacity\s*=\s*([^)]*)/,Wt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Vt=/^margin/,$t=new RegExp("^("+w+")(.*)$","i"),Jt=new RegExp("^("+w+")(?!px)[a-z%]+$","i"),Kt=new RegExp("^([+-])=("+w+")","i"),Qt={BODY:"block"},Gt={position:"absolute",visibility:"hidden",display:"block"},Yt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,s,o={},u=0;if(b.isArray(n)){s=qt(e),i=n.length;for(;u<i;u++)o[n[u]]=b.css(e,n[u],!1,s);return o}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t=typeof e=="boolean";return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Rt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var s,o,u,a=b.camelCase(n),f=e.style;n=b.cssProps[a]||(b.cssProps[a]=tn(f,a)),u=b.cssHooks[n]||b.cssHooks[a];if(r===t)return u&&"get"in u&&(s=u.get(e,!1,i))!==t?s:f[n];o=typeof r,o==="string"&&(s=Kt.exec(r))&&(r=(s[1]+1)*s[2]+parseFloat(b.css(e,n)),o="number");if(r==null||o==="number"&&isNaN(r))return;o==="number"&&!b.cssNumber[a]&&(r+="px"),!b.support.clearCloneStyle&&r===""&&n.indexOf("background")===0&&(f[n]="inherit");if(!u||!("set"in u)||(r=u.set(e,r,i))!==t)try{f[n]=r}catch(l){}},css:function(e,n,r,i){var s,o,u,a=b.camelCase(n);return n=b.cssProps[a]||(b.cssProps[a]=tn(e.style,a)),u=b.cssHooks[n]||b.cssHooks[a],u&&"get"in u&&(o=u.get(e,!0,r)),o===t&&(o=Rt(e,n,i)),o==="normal"&&n in Yt&&(o=Yt[n]),r===""||r?(s=parseFloat(o),r===!0||b.isNumeric(s)?s||0:o):o},swap:function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i}}),e.getComputedStyle?(qt=function(t){return e.getComputedStyle(t,null)},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u.getPropertyValue(n)||u[n]:t,f=e.style;return u&&(a===""&&!b.contains(e.ownerDocument,e)&&(a=b.style(e,n)),Jt.test(a)&&Vt.test(n)&&(i=f.width,s=f.minWidth,o=f.maxWidth,f.minWidth=f.maxWidth=f.width=a,a=u.width,f.width=i,f.minWidth=s,f.maxWidth=o)),a}):s.documentElement.currentStyle&&(qt=function(e){return e.currentStyle},Rt=function(e,n,r){var i,s,o,u=r||qt(e),a=u?u[n]:t,f=e.style;return a==null&&f&&f[n]&&(a=f[n]),Jt.test(a)&&!Wt.test(n)&&(i=f.left,s=e.runtimeStyle,o=s&&s.left,o&&(s.left=e.currentStyle.left),f.left=n==="fontSize"?"1em":a,a=f.pixelLeft+"px",f.left=i,o&&(s.left=o)),a===""?"auto":a}),b.each(["height","width"],function(e,t){b.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&Xt.test(b.css(e,"display"))?b.swap(e,Gt,function(){return un(e,t,r)}):un(e,t,r)},set:function(e,n,r){var i=r&&qt(e);return sn(e,n,r?on(e,t,r,b.support.boxSizing&&b.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return zt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&b.trim(s.replace(Ut,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=Ut.test(s)?s.replace(Ut,i):s+" "+i}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,t){if(t)return b.swap(e,{display:"inline-block"},Rt,[e,"marginRight"])}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,t){b.cssHooks[t]={get:function(e,n){if(n)return n=Rt(e,t),Jt.test(n)?b(e).position()[t]+"px":n}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!b.support.reliableHiddenOffsets&&(e.style&&e.style.display||b.css(e,"display"))==="none"},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+Zt[r]+t]=s[r]||s[r-2]||s[0];return i}},Vt.test(e)||(b.cssHooks[e+t].set=sn)});var ln=/%20/g,cn=/\[\]$/,hn=/\r?\n/g,pn=/^(?:submit|button|image|reset|file)$/i,dn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&dn.test(this.nodeName)&&!pn.test(e)&&(this.checked||!xt.test(e))}).map(function(e,t){var n=b(this).val();return n==null?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(hn,"\r\n")}}):{name:t.name,value:n.replace(hn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],s=function(e,t){t=b.isFunction(t)?t():t==null?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional);if(b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){s(this.name,this.value)});else for(r in e)vn(r,e[r],n,s);return i.join("&").replace(ln,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,gn,yn=b.now(),bn=/\?/,wn=/#.*$/,En=/([?&])_=[^&]*/,Sn=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,xn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Tn=/^(?:GET|HEAD)$/,Nn=/^\/\//,Cn=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,kn=b.fn.load,Ln={},An={},On="*/".concat("*");try{gn=o.href}catch(Mn){gn=s.createElement("a"),gn.href="",gn=gn.href}mn=Cn.exec(gn.toLowerCase())||[],b.fn.load=function(e,n,r){if(typeof e!="string"&&kn)return kn.apply(this,arguments);var i,s,o,u=this,a=e.indexOf(" ");return a>=0&&(i=e.slice(a,e.length),e=e.slice(0,a)),b.isFunction(n)?(r=n,n=t):n&&typeof n=="object"&&(o="POST"),u.length>0&&b.ajax({url:e,type:o,dataType:"html",data:n}).done(function(e){s=arguments,u.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){u.each(r,s||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,s){return b.isFunction(r)&&(s=s||i,i=r,r=t),b.ajax({url:e,type:n,dataType:s,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:gn,type:"GET",isLocal:xn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":On,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Pn(Pn(e,b.ajaxSettings),t):Pn(b.ajaxSettings,e)},ajaxPrefilter:_n(Ln),ajaxTransport:_n(An),ajax:function(e,n){function N(e,n,r,i){var l,g,y,E,S,T=n;if(w===2)return;w=2,u&&clearTimeout(u),f=t,o=i||"",x.readyState=e>0?4:0,r&&(E=Hn(c,x,r));if(e>=200&&e<300||e===304)c.ifModified&&(S=x.getResponseHeader("Last-Modified"),S&&(b.lastModified[s]=S),S=x.getResponseHeader("etag"),S&&(b.etag[s]=S)),e===204?(l=!0,T="nocontent"):e===304?(l=!0,T="notmodified"):(l=Bn(c,E),T=l.state,g=l.data,y=l.error,l=!y);else{y=T;if(e||!T)T="error",e<0&&(e=0)}x.status=e,x.statusText=(n||T)+"",l?d.resolveWith(h,[g,T,x]):d.rejectWith(h,[x,T,y]),x.statusCode(m),m=t,a&&p.trigger(l?"ajaxSuccess":"ajaxError",[x,c,l?g:y]),v.fireWith(h,[x,T]),a&&(p.trigger("ajaxComplete",[x,c]),--b.active||b.event.trigger("ajaxStop"))}typeof e=="object"&&(n=e,e=t),n=n||{};var r,i,s,o,u,a,f,l,c=b.ajaxSetup({},n),h=c.context||c,p=c.context&&(h.nodeType||h.jquery)?b(h):b.event,d=b.Deferred(),v=b.Callbacks("once memory"),m=c.statusCode||{},g={},y={},w=0,S="canceled",x={readyState:0,getResponseHeader:function(e){var t;if(w===2){if(!l){l={};while(t=Sn.exec(o))l[t[1].toLowerCase()]=t[2]}t=l[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return w===2?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return w||(c.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)m[t]=[m[t],e[t]];else x.always(e[x.status]);return this},abort:function(e){var t=e||S;return f&&f.abort(t),N(0,t),this}};d.promise(x).complete=v.add,x.success=x.done,x.error=x.fail,c.url=((e||c.url||gn)+"").replace(wn,"").replace(Nn,mn[1]+"//"),c.type=n.method||n.type||c.method||c.type,c.dataTypes=b.trim(c.dataType||"*").toLowerCase().match(E)||[""],c.crossDomain==null&&(r=Cn.exec(c.url.toLowerCase()),c.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||(r[1]==="http:"?80:443))==(mn[3]||(mn[1]==="http:"?80:443)))),c.data&&c.processData&&typeof c.data!="string"&&(c.data=b.param(c.data,c.traditional)),Dn(Ln,c,n,x);if(w===2)return x;a=c.global,a&&b.active++===0&&b.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Tn.test(c.type),s=c.url,c.hasContent||(c.data&&(s=c.url+=(bn.test(s)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=En.test(s)?s.replace(En,"$1_="+yn++):s+(bn.test(s)?"&":"?")+"_="+yn++)),c.ifModified&&(b.lastModified[s]&&x.setRequestHeader("If-Modified-Since",b.lastModified[s]),b.etag[s]&&x.setRequestHeader("If-None-Match",b.etag[s])),(c.data&&c.hasContent&&c.contentType!==!1||n.contentType)&&x.setRequestHeader("Content-Type",c.contentType),x.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+(c.dataTypes[0]!=="*"?", "+On+"; q=0.01":""):c.accepts["*"]);for(i in c.headers)x.setRequestHeader(i,c.headers[i]);if(!c.beforeSend||c.beforeSend.call(h,x,c)!==!1&&w!==2){S="abort";for(i in{success:1,error:1,complete:1})x[i](c[i]);f=Dn(An,c,n,x);if(!f)N(-1,"No Transport");else{x.readyState=1,a&&p.trigger("ajaxSend",[x,c]),c.async&&c.timeout>0&&(u=setTimeout(function(){x.abort("timeout")},c.timeout));try{w=1,f.send(g,N)}catch(T){if(!(w<2))throw T;N(-1,T)}}return x}return x.abort()},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=s.head||b("head")[0]||s.documentElement;return{send:function(t,i){n=s.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){if(t||!n.readyState||/loaded|complete/.test(n.readyState))n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success")},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var jn=[],Fn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=jn.pop()||b.expando+"_"+yn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var s,o,u,a=n.jsonp!==!1&&(Fn.test(n.url)?"url":typeof n.data=="string"&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Fn.test(n.data)&&"data");if(a||n.dataTypes[0]==="jsonp")return s=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,a?n[a]=n[a].replace(Fn,"$1"+s):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+s),n.converters["script json"]=function(){return u||b.error(s+" was not called"),u[0]},n.dataTypes[0]="json",o=e[s],e[s]=function(){u=arguments},i.always(function(){e[s]=o,n[s]&&(n.jsonpCallback=r.jsonpCallback,jn.push(s)),u&&b.isFunction(o)&&o(u[0]),u=o=t}),"script"});var In,qn,Rn=0,Un=e.ActiveXObject&&function(){var e;for(e in In)In[e](t,!0)};b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&zn()||Wn()}:zn,qn=b.ajaxSettings.xhr(),b.support.cors=!!qn&&"withCredentials"in qn,qn=b.support.ajax=!!qn,qn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,s){var o,u,a=n.xhr();n.username?a.open(n.type,n.url,n.async,n.username,n.password):a.open(n.type,n.url,n.async);if(n.xhrFields)for(u in n.xhrFields)a[u]=n.xhrFields[u];n.mimeType&&a.overrideMimeType&&a.overrideMimeType(n.mimeType),!n.crossDomain&&!i["X-Requested-With"]&&(i["X-Requested-With"]="XMLHttpRequest");try{for(u in i)a.setRequestHeader(u,i[u])}catch(f){}a.send(n.hasContent&&n.data||null),r=function(e,i){var u,f,l,c;try{if(r&&(i||a.readyState===4)){r=t,o&&(a.onreadystatechange=b.noop,Un&&delete In[o]);if(i)a.readyState!==4&&a.abort();else{c={},u=a.status,f=a.getAllResponseHeaders(),typeof a.responseText=="string"&&(c.text=a.responseText);try{l=a.statusText}catch(h){l=""}!u&&n.isLocal&&!n.crossDomain?u=c.text?200:404:u===1223&&(u=204)}}}catch(p){i||s(-1,p)}c&&s(u,l,c,f)},n.async?a.readyState===4?setTimeout(r):(o=++Rn,Un&&(In||(In={},b(e).unload(Un)),In[o]=r),a.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Vn,$n=/^(?:toggle|show|hide)$/,Jn=new RegExp("^(?:([+-])=|)("+w+")([a-z%]*)$","i"),Kn=/queueHooks$/,Qn=[nr],Gn={"*":[function(e,t){var n,r,i=this.createTween(e,t),s=Jn.exec(t),o=i.cur(),u=+o||0,a=1,f=20;if(s){n=+s[2],r=s[3]||(b.cssNumber[e]?"":"px");if(r!=="px"&&u){u=b.css(i.elem,e,!0)||n||1;do a=a||".5",u/=a,b.style(i.elem,e,u+r);while(a!==(a=i.cur()/o)&&a!==1&&--f)}i.unit=r,i.start=u,i.end=s[1]?u+(s[1]+1)*n:n}return i}]};b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],Gn[n]=Gn[n]||[],Gn[n].unshift(t)},prefilter:function(e,t){t?Qn.unshift(e):Qn.push(e)}}),b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.options.duration?this.pos=t=b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=b.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(e.elem.style[b.cssProps[e.prop]]!=null||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),s=b.speed(t,n,r),o=function(){var t=er(this,b.extend({},e),s);o.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return typeof e!="string"&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=e!=null&&e+"queueHooks",s=b.timers,o=b._data(this);if(n)o[n]&&o[n].stop&&i(o[n]);else for(n in o)o[n]&&o[n].stop&&Kn.test(n)&&i(o[n]);for(n=s.length;n--;)s[n].elem===this&&(e==null||s[n].queue===e)&&(s[n].anim.stop(r),t=!1,s.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=b.timers,o=r?r.length:0;n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&typeof e=="object"?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};r.duration=b.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;Xn=b.now();for(;r<n.length;r++)e=n[r],!e()&&n[r]===e&&n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Vn||(Vn=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Vn),Vn=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,s={top:0,left:0},o=this[0],u=o&&o.ownerDocument;if(!u)return;return n=u.documentElement,b.contains(n,o)?(typeof o.getBoundingClientRect!==i&&(s=o.getBoundingClientRect()),r=sr(u),{top:s.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:s.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):s},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");r==="static"&&(e.style.position="relative");var i=b(e),s=i.offset(),o=b.css(e,"top"),u=b.css(e,"left"),a=(r==="absolute"||r==="fixed")&&b.inArray("auto",[o,u])>-1,f={},l={},c,h;a?(l=i.position(),c=l.top,h=l.left):(c=parseFloat(o)||0,h=parseFloat(u)||0),b.isFunction(t)&&(t=t.call(e,n,s)),t.top!=null&&(f.top=t.top-s.top+c),t.left!=null&&(f.left=t.left-s.left+h),"using"in t?t.using.call(e,f):i.css(f)}},b.fn.extend({position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return b.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||s.documentElement;while(e&&!b.nodeName(e,"html")&&b.css(e,"position")==="static")e=e.offsetParent;return e||s.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,s){var o=sr(e);if(s===t)return o?n in o?o[n]:o.document.documentElement[i]:e[i];o?o.scrollTo(r?b(o).scrollLeft():s,r?s:b(o).scrollTop()):e[i]=s},e,i,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,s){var o=arguments.length&&(r||typeof i!="boolean"),u=r||(i===!0||s===!0?"margin":"border");return b.access(this,function(n,r,i){var s;return b.isWindow(n)?n.document.documentElement["client"+e]:n.nodeType===9?(s=n.documentElement,Math.max(n.body["scroll"+e],s["scroll"+e],n.body["offset"+e],s["offset"+e],s["client"+e])):i===t?b.css(n,r,u):b.style(n,r,i,u)},n,o?i:t,o,null)}})}),e.jQuery=e.$=b,typeof define=="function"&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})}(window),function(){function e(e,t){if(e!==t){var n=e===e,r=t===t;if(e>t||!n||typeof e=="undefined"&&r)return 1;if(e<t||!r||typeof t=="undefined"&&n)return-1}return 0}function t(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function n(e,t,n){if(t!==t)return h(e,n);n-=1;for(var r=e.length;++n<r;)if(e[n]===t)return n;return-1}function r(e){return typeof e=="function"||!1}function i(e){return typeof e=="string"?e:null==e?"":e+""}function s(e){return e.charCodeAt(0)}function o(e,t){for(var n=-1,r=e.length;++n<r&&-1<t.indexOf(e.charAt(n)););return n}function u(e,t){for(var n=e.length;n--&&-1<t.indexOf(e.charAt(n)););return n}function a(t,n){return e(t.a,n.a)||t.b-n.b}function f(e){return _t[e]}function l(e){return Dt[e]}function c(e){return"\\"+Bt[e]}function h(e,t,n){var r=e.length;for(t+=n?0:-1;n?t--:++t<r;){var i=e[t];if(i!==i)return t}return-1}function p(e){return!!e&&typeof e=="object"}function d(e){return 160>=e&&9<=e&&13>=e||32==e||160==e||5760==e||6158==e||8192<=e&&(8202>=e||8232==e||8233==e||8239==e||8287==e||12288==e||65279==e)}function v(e,t){for(var n=-1,r=e.length,i=-1,s=[];++n<r;)e[n]===t&&(e[n]=I,s[++i]=n);return s}function m(e){for(var t=-1,n=e.length;++t<n&&d(e.charCodeAt(t)););return t}function g(e){for(var t=e.length;t--&&d(e.charCodeAt(t)););return t}function y(e){return Pt[e]}function b(d){function _t(e){if(p(e)&&!(ho(e)||e instanceof Ht)){if(e instanceof Pt)return e;if(ji.call(e,"__chain__")&&ji.call(e,"__wrapped__"))return kr(e)}return new Pt(e)}function Dt(){}function Pt(e,t,n){this.__wrapped__=e,this.__actions__=n||[],this.__chain__=!!t}function Ht(e){this.__wrapped__=e,this.__actions__=null,this.__dir__=1,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=ps,this.__views__=null}function Bt(){this.__data__={}}function jt(e){var t=e?e.length:0;for(this.data={hash:rs(null),set:new Qi};t--;)this.push(e[t])}function Ft(e,t){var n=e.data;return(typeof t=="string"||Zr(t)?n.set.has(t):n.hash[t])?0:-1}function It(e,t){var n=-1,r=e.length;for(t||(t=Ei(r));++n<r;)t[n]=e[n];return t}function qt(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function zt(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function Wt(e,t){for(var n=-1,r=e.length,i=-1,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[++i]=o)}return s}function Xt(e,t){for(var n=-1,r=e.length,i=Ei(r);++n<r;)i[n]=t(e[n],n,e);return i}function Vt(e){for(var t=-1,n=e.length,r=hs;++t<n;){var i=e[t];i>r&&(r=i)}return r}function $t(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function Jt(e,t){return typeof e=="undefined"?t:e}function Kt(e,t,n,r){return typeof e!="undefined"&&ji.call(r,n)?e:t}function Qt(e,t,n){var r=No(t);if(!n)return Yt(t,e,r);for(var i=-1,s=r.length;++i<s;){var o=r[i],u=e[o],a=n(u,t[o],o,e,t);(a===a?a===u:u!==u)&&(typeof u!="undefined"||o in e)||(e[o]=a)}return e}function Gt(e,t){for(var n=-1,r=e.length,i=br(r),s=t.length,o=Ei(s);++n<s;){var u=t[n];i?(u=parseFloat(u),o[n]=mr(u,r)?e[u]:w):o[n]=e[u]}return o}function Yt(e,t,n){n||(n=t,t={});for(var r=-1,i=n.length;++r<i;){var s=n[r];t[s]=e[s]}return t}function Zt(e,t,n){var r=typeof e;return"function"==r?typeof t=="undefined"?e:Dn(e,t,n):null==e?gi:"object"==r?mn(e):typeof t=="undefined"?bn(e+""):gn(e+"",t)}function en(e,t,n,r,i,s,o){var u;if(n&&(u=i?n(e,r,i):n(e)),typeof u!="undefined")return u;if(!Zr(e))return e;if(r=ho(e)){if(u=pr(e),!t)return It(e,u)}else{var a=Ii.call(e),f=a==X;if(a!=$&&a!=q&&(!f||i))return Ot[a]?vr(e,a,t):i?e:{};if(u=dr(f?{}:e),!t)return Yt(e,u,No(e))}for(s||(s=[]),o||(o=[]),i=s.length;i--;)if(s[i]==e)return o[i];return s.push(e),o.push(u),(r?qt:fn)(e,function(r,i){u[i]=en(r,t,n,i,e,s,o)}),u}function tn(e,t,n){if(typeof e!="function")throw new Oi(F);return Gi(function(){e.apply(w,n)},t)}function nn(e,t){var r=e?e.length:0,i=[];if(!r)return i;var s=-1,o=hr(),u=o==n,a=u&&200<=t.length?Ls(t):null,f=t.length;a&&(o=Ft,u=!1,t=a);e:for(;++s<r;)if(a=e[s],u&&a===a){for(var l=f;l--;)if(t[l]===a)continue e;i.push(a)}else 0>o(t,a,0)&&i.push(a);return i}function rn(e,t){var n=!0;return xs(e,function(e,r,i){return n=!!t(e,r,i)}),n}function sn(e,t){var n=[];return xs(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function on(e,t,n,r){var i;return n(e,function(e,n,s){return t(e,n,s)?(i=r?n:e,!1):void 0}),i}function un(e,t,n){for(var r=-1,i=e.length,s=-1,o=[];++r<i;){var u=e[r];if(p(u)&&br(u.length)&&(ho(u)||Qr(u))){t&&(u=un(u,t,n));var a=-1,f=u.length;for(o.length+=f;++a<f;)o[++s]=u[a]}else n||(o[++s]=u)}return o}function an(e,t){Ns(e,t,ui)}function fn(e,t){return Ns(e,t,No)}function ln(e,t){return Cs(e,t,No)}function cn(e,t){for(var n=-1,r=t.length,i=-1,s=[];++n<r;){var o=t[n];vo(e[o])&&(s[++i]=o)}return s}function hn(e,t,n,r,i,s){if(e===t)return 0!==e||1/e==1/t;var o=typeof e,u=typeof t;return"function"!=o&&"object"!=o&&"function"!=u&&"object"!=u||null==e||null==t?e!==e&&t!==t:pn(e,t,hn,n,r,i,s)}function pn(e,t,n,r,i,s,o){var u=ho(e),a=ho(t),f=R,l=R;u||(f=Ii.call(e),f==q?f=$:f!=$&&(u=ii(e))),a||(l=Ii.call(t),l==q?l=$:l!=$&&ii(t));var c=f==$||i&&f==X,a=l==$||i&&l==X;if((l=f==l)&&!u&&!c)return ar(e,t,f);if(i){if(!(l||c&&a))return!1}else{if(f=c&&ji.call(e,"__wrapped__"),a=a&&ji.call(t,"__wrapped__"),f||a)return n(f?e.value():e,a?t.value():t,r,i,s,o);if(!l)return!1}for(s||(s=[]),o||(o=[]),f=s.length;f--;)if(s[f]==e)return o[f]==t;return s.push(e),o.push(t),e=(u?ur:fr)(e,t,n,r,i,s,o),s.pop(),o.pop(),e}function dn(e,t,n,r,i){for(var s=-1,o=t.length,u=!i;++s<o;)if(u&&r[s]?n[s]!==e[t[s]]:!(t[s]in e))return!1;for(s=-1;++s<o;){var a=t[s],f=e[a],l=n[s];if(u&&r[s]?a=typeof f!="undefined"||a in e:(a=i?i(f,l,a):w,typeof a=="undefined"&&(a=hn(l,f,i,!0))),!a)return!1}return!0}function vn(e,t){var n=[];return xs(e,function(e,r,i){n.push(t(e,r,i))}),n}function mn(e){var t=No(e),n=t.length;if(!n)return mi(!0);if(1==n){var r=t[0],i=e[r];if(wr(i))return function(e){return null!=e&&e[r]===i&&(typeof i!="undefined"||r in Cr(e))}}for(var s=Ei(n),o=Ei(n);n--;)i=e[t[n]],s[n]=i,o[n]=wr(i);return function(e){return null!=e&&dn(Cr(e),t,s,o)}}function gn(e,t){return wr(t)?function(n){return null!=n&&n[e]===t&&(typeof t!="undefined"||e in Cr(n))}:function(n){return null!=n&&hn(t,n[e],null,!0)}}function yn(e,t,n,r,i){if(!Zr(e))return e;var s=br(t.length)&&(ho(t)||ii(t));return(s?qt:fn)(t,function(t,o,u){if(p(t)){r||(r=[]),i||(i=[]);e:{t=r;for(var a=i,f=t.length,l=u[o];f--;)if(t[f]==l){e[o]=a[f],o=void 0;break e}f=e[o],u=n?n(f,l,o,e,u):w;var c=typeof u=="undefined";c&&(u=l,br(l.length)&&(ho(l)||ii(l))?u=ho(f)?f:f&&f.length?It(f):[]:mo(l)||Qr(l)?u=Qr(f)?si(f):mo(f)?f:{}:c=!1),t.push(l),a.push(u),c?e[o]=yn(u,l,n,t,a):(u===u?u!==f:f===f)&&(e[o]=u),o=void 0}return o}a=e[o],u=n?n(a,t,o,e,u):w,(l=typeof u=="undefined")&&(u=t),!s&&typeof u=="undefined"||!l&&(u===u?u===a:a!==a)||(e[o]=u)}),e}function bn(e){return function(t){return null==t?w:t[e]}}function wn(e,t){return e+Vi(cs()*(t-e+1))}function En(e,t,n,r,i){return i(e,function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)}),n}function Sn(e,t,n){var r=-1,i=e.length;for(t=null==t?0:+t||0,0>t&&(t=-t>i?0:i+t),n=typeof n=="undefined"||n>i?i:+n||0,0>n&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0,n=Ei(i);++r<i;)n[r]=e[r+t];return n}function xn(e,t){var n;return xs(e,function(e,r,i){return n=t(e,r,i),!n}),!!n}function Tn(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].c;return e}function Nn(t,n,r){var i=-1,s=t.length,o=br(s)?Ei(s):[];return xs(t,function(e){for(var t=n.length,r=Ei(t);t--;)r[t]=null==e?w:e[n[t]];o[++i]={a:r,b:i,c:e}}),Tn(o,function(t,n){var i;e:{i=-1;for(var s=t.a,o=n.a,u=s.length,a=r.length;++i<u;){var f=e(s[i],o[i]);if(f){i=i<a?f*(r[i]?1:-1):f;break e}}i=t.b-n.b}return i})}function Cn(e,t){var n=0;return xs(e,function(e,r,i){n+=+t(e,r,i)||0}),n}function kn(e,t){var r=-1,i=hr(),s=e.length,o=i==n,u=o&&200<=s,a=u?Ls():null,f=[];a?(i=Ft,o=!1):(u=!1,a=t?[]:f);e:for(;++r<s;){var l=e[r],c=t?t(l,r,e):l;if(o&&l===l){for(var h=a.length;h--;)if(a[h]===c)continue e;t&&a.push(c),f.push(l)}else 0>i(a,c,0)&&((t||u)&&a.push(c),f.push(l))}return f}function Ln(e,t){for(var n=-1,r=t.length,i=Ei(r);++n<r;)i[n]=e[t[n]];return i}function An(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?Sn(e,r?0:s,r?s+1:i):Sn(e,r?s+1:0,r?i:s)}function On(e,t){var n=e;n instanceof Ht&&(n=n.value());for(var r=-1,i=t.length;++r<i;){var n=[n],s=t[r];Ji.apply(n,s.args),n=s.func.apply(s.thisArg,n)}return n}function Mn(e,t,n){var r=0,i=e?e.length:r;if(typeof t=="number"&&t===t&&i<=ms){for(;r<i;){var s=r+i>>>1,o=e[s];(n?o<=t:o<t)?r=s+1:i=s}return i}return _n(e,t,gi,n)}function _n(e,t,n,r){t=n(t);for(var i=0,s=e?e.length:0,o=t!==t,u=typeof t=="undefined";i<s;){var a=Vi((i+s)/2),f=n(e[a]),l=f===f;(o?l||r:u?l&&(r||typeof f!="undefined"):r?f<=t:f<t)?i=a+1:s=a}return us(s,vs)}function Dn(e,t,n){if(typeof e!="function")return gi;if(typeof t=="undefined")return e;switch(n){case 1:return function(n){return e.call(t,n)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,s){return e.call(t,n,r,i,s)};case 5:return function(n,r,i,s,o){return e.call(t,n,r,i,s,o)}}return function(){return e.apply(t,arguments)}}function Pn(e){return zi.call(e,0)}function Hn(e,t,n){for(var r=n.length,i=-1,s=os(e.length-r,0),o=-1,u=t.length,a=Ei(s+u);++o<u;)a[o]=t[o];for(;++i<r;)a[n[i]]=e[i];for(;s--;)a[o++]=e[i++];return a}function Bn(e,t,n){for(var r=-1,i=n.length,s=-1,o=os(e.length-i,0),u=-1,a=t.length,f=Ei(o+a);++s<o;)f[s]=e[s];for(o=s;++u<a;)f[o+u]=t[u];for(;++r<i;)f[o+n[r]]=e[s++];return f}function jn(e,t){return function(n,r,i){var s=t?t():{};if(r=cr(r,i,3),ho(n)){i=-1;for(var o=n.length;++i<o;){var u=n[i];e(s,u,r(u,i,n),n)}}else xs(n,function(t,n,i){e(s,t,r(t,n,i),i)});return s}}function Fn(e){return function(){var t=arguments,n=t.length,r=t[0];if(2>n||null==r)return r;var i=t[n-2],s=t[n-1],o=t[3];for(3<n&&typeof i=="function"?(i=Dn(i,s,5),n-=2):(i=2<n&&typeof s=="function"?s:null,n-=i?1:0),o&&gr(t[1],t[2],o)&&(i=3==n?null:i,n=2),s=0;++s<n;)(o=t[s])&&e(r,o,i);return r}}function In(e,t){return function(n,r){var i=n?n.length:0;if(!br(i))return e(n,r);for(var s=t?i:-1,o=Cr(n);(t?s--:++s<i)&&!1!==r(o[s],s,o););return n}}function qn(e){return function(t,n,r){var i=Cr(t);r=r(t);for(var s=r.length,o=e?s:-1;e?o--:++o<s;){var u=r[o];if(!1===n(i[u],u,i))break}return t}}function Rn(e,t){function n(){return(this&&this!==Rt&&this instanceof n?r:e).apply(t,arguments)}var r=zn(e);return n}function Un(e){return function(t){var n=-1;t=di(fi(t));for(var r=t.length,i="";++n<r;)i=e(i,t[n],n);return i}}function zn(e){return function(){var t=Ss(e.prototype),n=e.apply(t,arguments);return Zr(n)?n:t}}function Wn(e){function t(n,r,i){return i&&gr(n,r,i)&&(r=null),n=or(n,e,null,null,null,null,null,r),n.placeholder=t.placeholder,n}return t}function Xn(e,t){return function(n,r,i){i&&gr(n,r,i)&&(r=null);var o=cr(),u=null==r;if(o===Zt&&u||(u=!1,r=o(r,i,3)),u){if(r=ho(n),r||!ri(n))return e(r?n:Nr(n));r=s}return lr(n,r,t)}}function Vn(e,n){return function(r,i,s){return i=cr(i,s,3),ho(r)?(i=t(r,i,n),-1<i?r[i]:w):on(r,i,e)}}function $n(e){return function(n,r,i){return n&&n.length?(r=cr(r,i,3),t(n,r,e)):-1}}function Jn(e){return function(t,n,r){return n=cr(n,r,3),on(t,n,e,!0)}}function Kn(e){return function(){var t=arguments.length;if(!t)return function(){return arguments[0]};for(var n,r=e?t:-1,i=0,s=Ei(t);e?r--:++r<t;){var o=s[i++]=arguments[r];if(typeof o!="function")throw new Oi(F);var u=n?"":Os(o);n="wrapper"==u?new Pt([]):n}for(r=n?-1:t;++r<t;)o=s[r],u=Os(o),n=(i="wrapper"==u?As(o):null)&&yr(i[0])?n[Os(i[0])].apply(n,i[3]):1==o.length&&yr(o)?n[u]():n.thru(o);return function(){var e=arguments;if(n&&1==e.length&&ho(e[0]))return n.plant(e[0]).value();for(var r=0,e=s[r].apply(this,e);++r<t;)e=s[r].call(this,e);return e}}}function Qn(e,t){return function(n,r,i){return typeof r=="function"&&typeof i=="undefined"&&ho(n)?e(n,r):t(n,Dn(r,i,3))}}function Gn(e){return function(t,n,r){return(typeof n!="function"||typeof r!="undefined")&&(n=Dn(n,r,3)),e(t,n,ui)}}function Yn(e){return function(t,n,r){return(typeof n!="function"||typeof r!="undefined")&&(n=Dn(n,r,3)),e(t,n)}}function Zn(e){return function(t,n,r){return(t=i(t))&&(e?t:"")+rr(t,n,r)+(e?"":t)}}function er(e){var t=Kr(function(n,r){var i=v(r,t.placeholder);return or(n,e,null,r,i)});return t}function tr(e,t){return function(n,r,i,s){var o=3>arguments.length;return typeof r=="function"&&typeof s=="undefined"&&ho(n)?e(n,r,i,o):En(n,cr(r,s,4),i,o,t)}}function nr(e,t,n,r,i,s,o,u,a,f){function l(){for(var E=arguments.length,T=E,N=Ei(E);T--;)N[T]=arguments[T];if(r&&(N=Hn(N,r,i)),s&&(N=Bn(N,s,o)),d||g){var T=l.placeholder,C=v(N,T),E=E-C.length;if(E<f){var A=u?It(u):null,E=os(f-E,0),O=d?C:null,C=d?null:C,M=d?N:null,N=d?null:N;return t|=d?k:L,t&=~(d?L:k),m||(t&=~(S|x)),N=[e,t,n,M,O,N,C,A,a,E],A=nr.apply(w,N),yr(e)&&Ms(A,N),A.placeholder=T,A}}if(T=h?n:this,p&&(e=T[b]),u)for(A=N.length,E=us(u.length,A),O=It(N);E--;)C=u[E],N[E]=mr(C,A)?O[C]:w;return c&&a<N.length&&(N.length=a),(this&&this!==Rt&&this instanceof l?y||zn(e):e).apply(T,N)}var c=t&A,h=t&S,p=t&x,d=t&N,m=t&T,g=t&C,y=!p&&zn(e),b=e;return l}function rr(e,t,n){return e=e.length,t=+t,e<t&&is(t)?(t-=e,n=null==n?" ":n+"",hi(n,Wi(t/n.length)).slice(0,t)):""}function ir(e,t,n,r){function i(){for(var t=-1,u=arguments.length,a=-1,f=r.length,l=Ei(u+f);++a<f;)l[a]=r[a];for(;u--;)l[a++]=arguments[++t];return(this&&this!==Rt&&this instanceof i?o:e).apply(s?n:this,l)}var s=t&S,o=zn(e);return i}function sr(e){return function(t,n,r,i){var s=cr(r);return s===Zt&&null==r?Mn(t,n,e):_n(t,n,s(r,i,1),e)}}function or(e,t,n,r,i,s,o,u){var a=t&x;if(!a&&typeof e!="function")throw new Oi(F);var f=r?r.length:0;if(f||(t&=~(k|L),r=i=null),f-=i?i.length:0,t&L){var l=r,c=i;r=i=null}var h=a?null:As(e);return n=[e,t,n,r,i,l,c,s,o,u],h&&(r=n[1],t=h[1],u=r|t,i=t==A&&r==N||t==A&&r==O&&n[7].length<=h[8]||t==(A|O)&&r==N,(u<A||i)&&(t&S&&(n[2]=h[2],u|=r&S?0:T),(r=h[3])&&(i=n[3],n[3]=i?Hn(i,r,h[4]):It(r),n[4]=i?v(n[3],I):It(h[4])),(r=h[5])&&(i=n[5],n[5]=i?Bn(i,r,h[6]):It(r),n[6]=i?v(n[5],I):It(h[6])),(r=h[7])&&(n[7]=It(r)),t&A&&(n[8]=null==n[8]?h[8]:us(n[8],h[8])),null==n[9]&&(n[9]=h[9]),n[0]=h[0],n[1]=u),t=n[1],u=n[9]),n[9]=null==u?a?0:e.length:os(u-f,0)||0,(h?ks:Ms)(t==S?Rn(n[0],n[2]):t!=k&&t!=(S|k)||n[4].length?nr.apply(w,n):ir.apply(w,n),n)}function ur(e,t,n,r,i,s,o){var u=-1,a=e.length,f=t.length,l=!0;if(a!=f&&(!i||f<=a))return!1;for(;l&&++u<a;){var c=e[u],h=t[u],l=w;if(r&&(l=i?r(h,c,u):r(c,h,u)),typeof l=="undefined")if(i)for(var p=f;p--&&(h=t[p],!(l=c&&c===h||n(c,h,r,i,s,o))););else l=c&&c===h||n(c,h,r,i,s,o)}return!!l}function ar(e,t,n){switch(n){case U:case z:return+e==+t;case W:return e.name==t.name&&e.message==t.message;case V:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case J:case K:return e==t+""}return!1}function fr(e,t,n,r,i,s,o){var u=No(e),a=u.length,f=No(t).length;if(a!=f&&!i)return!1;for(var f=i,l=-1;++l<a;){var c=u[l],h=i?c in t:ji.call(t,c);if(h){var p=e[c],d=t[c],h=w;r&&(h=i?r(d,p,c):r(p,d,c)),typeof h=="undefined"&&(h=p&&p===d||n(p,d,r,i,s,o))}if(!h)return!1;f||(f="constructor"==c)}return f||(n=e.constructor,r=t.constructor,!(n!=r&&"constructor"in e&&"constructor"in t)||typeof n=="function"&&n instanceof n&&typeof r=="function"&&r instanceof r)?!0:!1}function lr(e,t,n){var r=n?ps:hs,i=r,s=i;return xs(e,function(e,o,u){o=t(e,o,u),((n?o<i:o>i)||o===r&&o===s)&&(i=o,s=e)}),s}function cr(e,t,n){var r=_t.callback||vi,r=r===vi?Zt:r;return n?r(e,t,n):r}function hr(e,t,r){var i=_t.indexOf||Mr,i=i===Mr?n:i;return e?i(e,t,r):i}function pr(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ji.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function dr(e){return e=e.constructor,typeof e=="function"&&e instanceof e||(e=ki),new e}function vr(e,t,n){var r=e.constructor;switch(t){case Q:return Pn(e);case U:case z:return new r(+e);case G:case Y:case Z:case et:case tt:case nt:case rt:case it:case st:return t=e.buffer,new r(n?Pn(t):t,e.byteOffset,e.length);case V:case K:return new r(e);case J:var i=new r(e.source,yt.exec(e));i.lastIndex=e.lastIndex}return i}function mr(e,t){return e=+e,t=null==t?ys:t,-1<e&&0==e%1&&e<t}function gr(e,t,n){if(!Zr(n))return!1;var r=typeof t;return"number"==r?(r=n.length,r=br(r)&&mr(t,r)):r="string"==r&&t in n,r?(t=n[t],e===e?e===t:t!==t):!1}function yr(e){var t=Os(e);return!!t&&e===_t[t]&&t in Ht.prototype}function br(e){return typeof e=="number"&&-1<e&&0==e%1&&e<=ys}function wr(e){return e===e&&(0===e?0<1/e:!Zr(e))}function Er(e,t){e=Cr(e);for(var n=-1,r=t.length,i={};++n<r;){var s=t[n];s in e&&(i[s]=e[s])}return i}function Sr(e,t){var n={};return an(e,function(e,r,i){t(e,r,i)&&(n[r]=e)}),n}function xr(e){var t;if(!p(e)||Ii.call(e)!=$||!(ji.call(e,"constructor")||(t=e.constructor,typeof t!="function"||t instanceof t)))return!1;var n;return an(e,function(e,t){n=t}),typeof n=="undefined"||ji.call(e,n)}function Tr(e){for(var t=ui(e),n=t.length,r=n&&e.length,i=_t.support,i=r&&br(r)&&(ho(e)||i.nonEnumArgs&&Qr(e)),s=-1,o=[];++s<n;){var u=t[s];(i&&mr(u,r)||ji.call(e,u))&&o.push(u)}return o}function Nr(e){return null==e?[]:br(e.length)?Zr(e)?e:ki(e):ai(e)}function Cr(e){return Zr(e)?e:ki(e)}function kr(e){return e instanceof Ht?e.clone():new Pt(e.__wrapped__,e.__chain__,It(e.__actions__))}function Lr(e,t,n){return e&&e.length?((n?gr(e,t,n):null==t)&&(t=1),Sn(e,0>t?0:t)):[]}function Ar(e,t,n){var r=e?e.length:0;return r?((n?gr(e,t,n):null==t)&&(t=1),t=r-(+t||0),Sn(e,0,0>t?0:t)):[]}function Or(e){return e?e[0]:w}function Mr(e,t,r){var i=e?e.length:0;if(!i)return-1;if(typeof r=="number")r=0>r?os(i+r,0):r;else if(r)return r=Mn(e,t),e=e[r],(t===t?t===e:e!==e)?r:-1;return n(e,t,r||0)}function _r(e){var t=e?e.length:0;return t?e[t-1]:w}function Dr(e){return Lr(e,1)}function Pr(e,t,r,i){if(!e||!e.length)return[];null!=t&&typeof t!="boolean"&&(i=r,r=gr(e,t,i)?null:t,t=!1);var s=cr();if((s!==Zt||null!=r)&&(r=s(r,i,3)),t&&hr()==n){t=r;var o;r=-1,i=e.length;for(var s=-1,u=[];++r<i;){var a=e[r],f=t?t(a,r,e):a;r&&o===f||(o=f,u[++s]=a)}e=u}else e=kn(e,r);return e}function Hr(e){for(var t=-1,n=(e&&e.length&&Vt(Xt(e,Bi)))>>>0,r=Ei(n);++t<n;)r[t]=Xt(e,bn(t));return r}function Br(e,t){var n=-1,r=e?e.length:0,i={};for(!r||t||ho(e[0])||(t=[]);++n<r;){var s=e[n];t?i[s]=t[n]:s&&(i[s[0]]=s[1])}return i}function jr(e){return e=_t(e),e.__chain__=!0,e}function Fr(e,t,n){return t.call(n,e)}function Ir(e,t,n){var r=ho(e)?zt:rn;return n&&gr(e,t,n)&&(t=null),(typeof t!="function"||typeof n!="undefined")&&(t=cr(t,n,3)),r(e,t)}function qr(e,t,n){var r=ho(e)?Wt:sn;return t=cr(t,n,3),r(e,t)}function Rr(e,t,n,r){var i=e?e.length:0;return br(i)||(e=ai(e),i=e.length),i?(n=typeof n!="number"||r&&gr(t,n,r)?0:0>n?os(i+n,0):n||0,typeof e=="string"||!ho(e)&&ri(e)?n<i&&-1<e.indexOf(t,n):-1<hr(e,t,n)):!1}function Ur(e,t,n){var r=ho(e)?Xt:vn;return t=cr(t,n,3),r(e,t)}function zr(e,t,n){return(n?gr(e,t,n):null==t)?(e=Nr(e),t=e.length,0<t?e[wn(0,t-1)]:w):(e=Wr(e),e.length=us(0>t?0:+t||0,e.length),e)}function Wr(e){e=Nr(e);for(var t=-1,n=e.length,r=Ei(n);++t<n;){var i=wn(0,t);t!=i&&(r[t]=r[i]),r[i]=e[t]}return r}function Xr(e,t,n){var r=ho(e)?$t:xn;return n&&gr(e,t,n)&&(t=null),(typeof t!="function"||typeof n!="undefined")&&(t=cr(t,n,3)),r(e,t)}function Vr(e,t){var n;if(typeof t!="function"){if(typeof e!="function")throw new Oi(F);var r=e;e=t,t=r}return function(){return 0<--e?n=t.apply(this,arguments):t=null,n}}function $r(e,t,n){function r(){var n=t-(Zs()-f);0>=n||n>t?(u&&Xi(u),n=h,u=c=h=w,n&&(p=Zs(),a=e.apply(l,o),c||u||(o=l=null))):c=Gi(r,n)}function i(){c&&Xi(c),u=c=h=w,(v||d!==t)&&(p=Zs(),a=e.apply(l,o),c||u||(o=l=null))}function s(){if(o=arguments,f=Zs(),l=this,h=v&&(c||!m),!1===d)var n=m&&!c;else{u||m||(p=f);var s=d-(f-p),g=0>=s||s>d;g?(u&&(u=Xi(u)),p=f,a=e.apply(l,o)):u||(u=Gi(i,s))}return g&&c?c=Xi(c):c||t===d||(c=Gi(r,t)),n&&(g=!0,a=e.apply(l,o)),!g||c||u||(o=l=null),a}var o,u,a,f,l,c,h,p=0,d=!1,v=!0;if(typeof e!="function")throw new Oi(F);if(t=0>t?0:+t||0,!0===n)var m=!0,v=!1;else Zr(n)&&(m=n.leading,d="maxWait"in n&&os(+n.maxWait||0,t),v="trailing"in n?n.trailing:v);return s.cancel=function(){c&&Xi(c),u&&Xi(u),u=c=h=w},s}function Jr(e,t){function n(){var r=arguments,i=n.cache,s=t?t.apply(this,r):r[0];return i.has(s)?i.get(s):(r=e.apply(this,r),i.set(s,r),r)}if(typeof e!="function"||t&&typeof t!="function")throw new Oi(F);return n.cache=new Jr.Cache,n}function Kr(e,t){if(typeof e!="function")throw new Oi(F);return t=os(typeof t=="undefined"?e.length-1:+t||0,0),function(){for(var n=arguments,r=-1,i=os(n.length-t,0),s=Ei(i);++r<i;)s[r]=n[t+r];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}for(i=Ei(t+1),r=-1;++r<t;)i[r]=n[r];return i[t]=s,e.apply(this,i)}}function Qr(e){return br(p(e)?e.length:w)&&Ii.call(e)==q}function Gr(e){return!!e&&1===e.nodeType&&p(e)&&-1<Ii.call(e).indexOf("Element")}function Yr(e){return p(e)&&typeof e.message=="string"&&Ii.call(e)==W}function Zr(e){var t=typeof e;return"function"==t||!!e&&"object"==t}function ei(e){return null==e?!1:Ii.call(e)==X?Ri.test(Hi.call(e)):p(e)&&wt.test(e)}function ti(e){return typeof e=="number"||p(e)&&Ii.call(e)==V}function ni(e){return p(e)&&Ii.call(e)==J||!1}function ri(e){return typeof e=="string"||p(e)&&Ii.call(e)==K}function ii(e){return p(e)&&br(e.length)&&!!At[Ii.call(e)]}function si(e){return Yt(e,ui(e))}function oi(e){return cn(e,ui(e))}function ui(e){if(null==e)return[];Zr(e)||(e=ki(e));for(var t=e.length,t=t&&br(t)&&(ho(e)||Es.nonEnumArgs&&Qr(e))&&t||0,n=e.constructor,r=-1,n=typeof n=="function"&&n.prototype===e,i=Ei(t),s=0<t;++r<t;)i[r]=r+"";for(var o in e)s&&mr(o,t)||"constructor"==o&&(n||!ji.call(e,o))||i.push(o);return i}function ai(e){return Ln(e,No(e))}function fi(e){return(e=i(e))&&e.replace(Et,f).replace(mt,"")}function li(e){return(e=i(e))&&Tt.test(e)?e.replace(xt,"\\$&"):e}function ci(e,t,n){return n&&gr(e,t,n)&&(t=0),ls(e,t)}function hi(e,t){var n="";if(e=i(e),t=+t,1>t||!e||!is(t))return n;do t%2&&(n+=e),t=Vi(t/2),e+=e;while(t);return n}function pi(e,t,n){var r=e;return(e=i(e))?(n?gr(r,t,n):null==t)?e.slice(m(e),g(e)+1):(t+="",e.slice(o(e,t),u(e,t)+1)):e}function di(e,t,n){return n&&gr(e,t,n)&&(t=null),e=i(e),e.match(t||Ct)||[]}function vi(e,t,n){return n&&gr(e,t,n)&&(t=null),p(e)?yi(e):Zt(e,t)}function mi(e){return function(){return e}}function gi(e){return e}function yi(e){return mn(en(e,!0))}function bi(e,t,n){if(null==n){var r=Zr(t),i=r&&No(t);((i=i&&i.length&&cn(t,i))?i.length:r)||(i=!1,n=t,t=e,e=this)}i||(i=cn(t,No(t)));var s=!0,r=-1,o=vo(e),u=i.length;!1===n?s=!1:Zr(n)&&"chain"in n&&(s=n.chain);for(;++r<u;){n=i[r];var a=t[n];e[n]=a,o&&(e.prototype[n]=function(t){return function(){var n=this.__chain__;if(s||n){var r=e(this.__wrapped__);return(r.__actions__=It(this.__actions__)).push({func:t,args:arguments,thisArg:e}),r.__chain__=n,r}return n=[this.value()],Ji.apply(n,arguments),t.apply(e,n)}}(a))}return e}function wi(){}d=d?Ut.defaults(Rt.Object(),d,Ut.pick(Rt,Lt)):Rt;var Ei=d.Array,Si=d.Date,xi=d.Error,Ti=d.Function,Ni=d.Math,Ci=d.Number,ki=d.Object,Li=d.RegExp,Ai=d.String,Oi=d.TypeError,Mi=Ei.prototype,_i=ki.prototype,Di=Ai.prototype,Pi=(Pi=d.window)&&Pi.document,Hi=Ti.prototype.toString,Bi=bn("length"),ji=_i.hasOwnProperty,Fi=0,Ii=_i.toString,qi=d._,Ri=Li("^"+li(Ii).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ui=ei(Ui=d.ArrayBuffer)&&Ui,zi=ei(zi=Ui&&(new Ui(0)).slice)&&zi,Wi=Ni.ceil,Xi=d.clearTimeout,Vi=Ni.floor,$i=ei($i=ki.getPrototypeOf)&&$i,Ji=Mi.push,Ki=_i.propertyIsEnumerable,Qi=ei(Qi=d.Set)&&Qi,Gi=d.setTimeout,Yi=Mi.splice,Zi=ei(Zi=d.Uint8Array)&&Zi,es=ei(es=d.WeakMap)&&es,ts=function(){try{var e=ei(e=d.Float64Array)&&e,t=new e(new Ui(10),0,1)&&e}catch(n){}return t}(),ns=ei(ns=Ei.isArray)&&ns,rs=ei(rs=ki.create)&&rs,is=d.isFinite,ss=ei(ss=ki.keys)&&ss,os=Ni.max,us=Ni.min,as=ei(as=Si.now)&&as,fs=ei(fs=Ci.isFinite)&&fs,ls=d.parseInt,cs=Ni.random,hs=Ci.NEGATIVE_INFINITY,ps=Ci.POSITIVE_INFINITY,ds=Ni.pow(2,32)-1,vs=ds-1,ms=ds>>>1,gs=ts?ts.BYTES_PER_ELEMENT:0,ys=Ni.pow(2,53)-1,bs=es&&new es,ws={},Es=_t.support={};!function(e){Es.funcDecomp=/\bthis\b/.test(function(){return this}),Es.funcNames=typeof Ti.name=="string";try{Es.dom=11===Pi.createDocumentFragment().nodeType}catch(t){Es.dom=!1}try{Es.nonEnumArgs=!Ki.call(arguments,1)}catch(n){Es.nonEnumArgs=!0}}(0,0),_t.templateSettings={escape:pt,evaluate:dt,interpolate:vt,variable:"",imports:{_:_t}};var Ss=function(){function e(){}return function(t){if(Zr(t)){e.prototype=t;var n=new e;e.prototype=null}return n||d.Object()}}(),xs=In(fn),Ts=In(ln,!0),Ns=qn(),Cs=qn(!0),ks=bs?function(e,t){return bs.set(e,t),e}:gi;zi||(Pn=Ui&&Zi?function(e){var t=e.byteLength,n=ts?Vi(t/gs):0,r=n*gs,i=new Ui(t);if(n){var s=new ts(i,0,n);s.set(new ts(e,0,n))}return t!=r&&(s=new Zi(i,r),s.set(new Zi(e,r))),i}:mi(null));var Ls=rs&&Qi?function(e){return new jt(e)}:mi(null),As=bs?function(e){return bs.get(e)}:wi,Os=function(){return Es.funcNames?"constant"==mi.name?bn("name"):function(e){for(var t=e.name,n=ws[t],r=n?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t}:mi("")}(),Ms=function(){var e=0,t=0;return function(n,r){var i=Zs(),s=P-(i-t);if(t=i,0<s){if(++e>=D)return n}else e=0;return ks(n,r)}}(),_s=Kr(function(e,t){return ho(e)||Qr(e)?nn(e,un(t,!1,!0)):[]}),Ds=$n(),Ps=$n(!0),Hs=Kr(function(t,n){t||(t=[]),n=un(n);var r=n.length,i=Gt(t,n);for(n.sort(e);r--;){var s=parseFloat(n[r]);if(s!=o&&mr(s)){var o=s;Yi.call(t,s,1)}}return i}),Bs=sr(),js=sr(!0),Fs=Kr(function(e){return kn(un(e,!1,!0))}),Is=Kr(function(e,t){return ho(e)||Qr(e)?nn(e,t):[]}),qs=Kr(Hr),Rs=Kr(function(e,t){return br(e?e.length:0)&&(e=Nr(e)),Gt(e,un(t))}),Us=jn(function(e,t,n){ji.call(e,n)?++e[n]:e[n]=1}),zs=Vn(xs),Ws=Vn(Ts,!0),Xs=Qn(qt,xs),Vs=Qn(function(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e},Ts),$s=jn(function(e,t,n){ji.call(e,n)?e[n].push(t):e[n]=[t]}),Js=jn(function(e,t,n){e[n]=t}),Ks=Kr(function(e,t,n){var r=-1,i=typeof t=="function",s=e?e.length:0,o=br(s)?Ei(s):[];return xs(e,function(e){var s=i?t:null!=e&&e[t];o[++r]=s?s.apply(e,n):w}),o}),Qs=jn(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Gs=tr(function(e,t,n,r){var i=-1,s=e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n},xs),Ys=tr(function(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n},Ts),Zs=as||function(){return(new Si).getTime()},eo=Kr(function(e,t,n){var r=S;if(n.length)var i=v(n,eo.placeholder),r=r|k;return or(e,r,t,n,i)}),to=Kr(function(e,t){t=t.length?un(t):oi(e);for(var n=-1,r=t.length;++n<r;){var i=t[n];e[i]=or(e[i],S,e)}return e}),no=Kr(function(e,t,n){var r=S|x;if(n.length)var i=v(n,no.placeholder),r=r|k;return or(t,r,e,n,i)}),ro=Wn(N),io=Wn(C),so=Kr(function(e,t){return tn(e,1,t)}),oo=Kr(function(e,t,n){return tn(e,t,n)}),uo=Kn(),ao=Kn(!0),fo=er(k),lo=er(L),co=Kr(function(e,t){return or(e,O,null,null,null,un(t))}),ho=ns||function(e){return p(e)&&br(e.length)&&Ii.call(e)==R};Es.dom||(Gr=function(e){return!!e&&1===e.nodeType&&p(e)&&!mo(e)});var po=fs||function(e){return typeof e=="number"&&is(e)},vo=r(/x/)||Zi&&!r(Zi)?function(e){return Ii.call(e)==X}:r,mo=$i?function(e){if(!e||Ii.call(e)!=$)return!1;var t=e.valueOf,n=ei(t)&&(n=$i(t))&&$i(n);return n?e==n||$i(e)==n:xr(e)}:xr,go=Fn(Qt),yo=Kr(function(e){var t=e[0];return null==t?t:(e.push(Jt),go.apply(w,e))}),bo=Jn(fn),wo=Jn(ln),Eo=Gn(Ns),So=Gn(Cs),xo=Yn(fn),To=Yn(ln),No=ss?function(e){if(e)var t=e.constructor,n=e.length;return typeof t=="function"&&t.prototype===e||typeof e!="function"&&n&&br(n)?Tr(e):Zr(e)?ss(e):[]}:Tr,Co=Fn(yn),ko=Kr(function(e,t){if(null==e)return{};if("function"!=typeof t[0])return t=Xt(un(t),Ai),Er(e,nn(ui(e),t));var n=Dn(t[0],t[1],3);return Sr(e,function(e,t,r){return!n(e,t,r)})}),Lo=Kr(function(e,t){return null==e?{}:"function"==typeof t[0]?Sr(e,Dn(t[0],t[1],3)):Er(e,un(t))}),Ao=Un(function(e,t,n){return t=t.toLowerCase(),e+(n?t.charAt(0).toUpperCase()+t.slice(1):t)}),Oo=Un(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Mo=Zn(),_o=Zn(!0);8!=ls(kt+"08")&&(ci=function(e,t,n){return(n?gr(e,t,n):null==t)?t=0:t&&(t=+t),e=pi(e),ls(e,t||(bt.test(e)?16:10))});var Do=Un(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Po=Un(function(e,t,n){return e+(n?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Ho=Kr(function(e,t){try{return e.apply(w,t)}catch(n){return Yr(n)?n:new xi(n)}}),Bo=Xn(Vt),jo=Xn(function(e){for(var t=-1,n=e.length,r=ps;++t<n;){var i=e[t];i<r&&(r=i)}return r},!0);return _t.prototype=Dt.prototype,Pt.prototype=Ss(Dt.prototype),Pt.prototype.constructor=Pt,Ht.prototype=Ss(Dt.prototype),Ht.prototype.constructor=Ht,Bt.prototype["delete"]=function(e){return this.has(e)&&delete this.__data__[e]},Bt.prototype.get=function(e){return"__proto__"==e?w:this.__data__[e]},Bt.prototype.has=function(e){return"__proto__"!=e&&ji.call(this.__data__,e)},Bt.prototype.set=function(e,t){return"__proto__"!=e&&(this.__data__[e]=t),this},jt.prototype.push=function(e){var t=this.data;typeof e=="string"||Zr(e)?t.set.add(e):t.hash[e]=!0},Jr.Cache=Bt,_t.after=function(e,t){if(typeof t!="function"){if(typeof e!="function")throw new Oi(F);var n=e;e=t,t=n}return e=is(e=+e)?e:0,function(){return 1>--e?t.apply(this,arguments):void 0}},_t.ary=function(e,t,n){return n&&gr(e,t,n)&&(t=null),t=e&&null==t?e.length:os(+t||0,0),or(e,A,null,null,null,null,t)},_t.assign=go,_t.at=Rs,_t.before=Vr,_t.bind=eo,_t.bindAll=to,_t.bindKey=no,_t.callback=vi,_t.chain=jr,_t.chunk=function(e,t,n){t=(n?gr(e,t,n):null==t)?1:os(+t||1,1),n=0;for(var r=e?e.length:0,i=-1,s=Ei(Wi(r/t));n<r;)s[++i]=Sn(e,n,n+=t);return s},_t.compact=function(e){for(var t=-1,n=e?e.length:0,r=-1,i=[];++t<n;){var s=e[t];s&&(i[++r]=s)}return i},_t.constant=mi,_t.countBy=Us,_t.create=function(e,t,n){var r=Ss(e);return n&&gr(e,t,n)&&(t=null),t?Yt(t,r,No(t)):r},_t.curry=ro,_t.curryRight=io,_t.debounce=$r,_t.defaults=yo,_t.defer=so,_t.delay=oo,_t.difference=_s,_t.drop=Lr,_t.dropRight=Ar,_t.dropRightWhile=function(e,t,n){return e&&e.length?An(e,cr(t,n,3),!0,!0):[]},_t.dropWhile=function(e,t,n){return e&&e.length?An(e,cr(t,n,3),!0):[]},_t.fill=function(e,t,n,r){var i=e?e.length:0;if(!i)return[];for(n&&typeof n!="number"&&gr(e,t,n)&&(n=0,r=i),i=e.length,n=null==n?0:+n||0,0>n&&(n=-n>i?0:i+n),r=typeof r=="undefined"||r>i?i:+r||0,0>r&&(r+=i),i=n>r?0:r>>>0,n>>>=0;n<i;)e[n++]=t;return e},_t.filter=qr,_t.flatten=function(e,t,n){var r=e?e.length:0;return n&&gr(e,t,n)&&(t=!1),r?un(e,t):[]},_t.flattenDeep=function(e){return e&&e.length?un(e,!0):[]},_t.flow=uo,_t.flowRight=ao,_t.forEach=Xs,_t.forEachRight=Vs,_t.forIn=Eo,_t.forInRight=So,_t.forOwn=xo,_t.forOwnRight=To,_t.functions=oi,_t.groupBy=$s,_t.indexBy=Js,_t.initial=function(e){return Ar(e,1)},_t.intersection=function(){for(var e=[],t=-1,r=arguments.length,i=[],s=hr(),o=s==n;++t<r;){var u=arguments[t];(ho(u)||Qr(u))&&(e.push(u),i.push(o&&120<=u.length?Ls(t&&u):null))}var r=e.length,o=e[0],a=-1,f=o?o.length:0,l=[],c=i[0];e:for(;++a<f;)if(u=o[a],0>(c?Ft(c,u):s(l,u,0))){for(t=r;--t;){var h=i[t];if(0>(h?Ft(h,u):s(e[t],u,0)))continue e}c&&c.push(u),l.push(u)}return l},_t.invert=function(e,t,n){n&&gr(e,t,n)&&(t=null),n=-1;for(var r=No(e),i=r.length,s={};++n<i;){var o=r[n],u=e[o];t?ji.call(s,u)?s[u].push(o):s[u]=[o]:s[u]=o}return s},_t.invoke=Ks,_t.keys=No,_t.keysIn=ui,_t.map=Ur,_t.mapValues=function(e,t,n){var r={};return t=cr(t,n,3),fn(e,function(e,n,i){r[n]=t(e,n,i)}),r},_t.matches=yi,_t.matchesProperty=function(e,t){return gn(e+"",en(t,!0))},_t.memoize=Jr,_t.merge=Co,_t.mixin=bi,_t.negate=function(e){if(typeof e!="function")throw new Oi(F);return function(){return!e.apply(this,arguments)}},_t.omit=ko,_t.once=function(e){return Vr(e,2)},_t.pairs=function(e){for(var t=-1,n=No(e),r=n.length,i=Ei(r);++t<r;){var s=n[t];i[t]=[s,e[s]]}return i},_t.partial=fo,_t.partialRight=lo,_t.partition=Qs,_t.pick=Lo,_t.pluck=function(e,t){return Ur(e,bn(t))},_t.property=function(e){return bn(e+"")},_t.propertyOf=function(e){return function(t){return null==e?w:e[t]}},_t.pull=function(){var e=arguments,t=e[0];if(!t||!t.length)return t;for(var n=0,r=hr(),i=e.length;++n<i;)for(var s=0,o=e[n];-1<(s=r(t,o,s));)Yi.call(t,s,1);return t},_t.pullAt=Hs,_t.range=function(e,t,n){n&&gr(e,t,n)&&(t=n=null),e=+e||0,n=null==n?1:+n||0,null==t?(t=e,e=0):t=+t||0;var r=-1;t=os(Wi((t-e)/(n||1)),0);for(var i=Ei(t);++r<t;)i[r]=e,e+=n;return i},_t.rearg=co,_t.reject=function(e,t,n){var r=ho(e)?Wt:sn;return t=cr(t,n,3),r(e,function(e,n,r){return!t(e,n,r)})},_t.remove=function(e,t,n){var r=-1,i=e?e.length:0,s=[];for(t=cr(t,n,3);++r<i;)n=e[r],t(n,r,e)&&(s.push(n),Yi.call(e,r--,1),i--);return s},_t.rest=Dr,_t.restParam=Kr,_t.shuffle=Wr,_t.slice=function(e,t,n){var r=e?e.length:0;return r?(n&&typeof n!="number"&&gr(e,t,n)&&(t=0,n=r),Sn(e,t,n)):[]},_t.sortBy=function(e,t,n){if(null==e)return[];var r=-1,i=e.length,s=br(i)?Ei(i):[];return n&&gr(e,t,n)&&(t=null),t=cr(t,n,3),xs(e,function(e,n,i){s[++r]={a:t(e,n,i),b:r,c:e}}),Tn(s,a)},_t.sortByAll=function(){var e=arguments,t=e[0],n=e[3],r=0,i=e.length-1;if(null==t)return[];for(var s=Ei(i);r<i;)s[r]=e[++r];return n&&gr(e[1],e[2],n)&&(s=e[1]),Nn(t,un(s),[])},_t.sortByOrder=function(e,t,n,r){return null==e?[]:(r&&gr(t,n,r)&&(n=null),ho(t)||(t=null==t?[]:[t]),ho(n)||(n=null==n?[]:[n]),Nn(e,t,n))},_t.spread=function(e){if(typeof e!="function")throw new Oi(F);return function(t){return e.apply(this,t)}},_t.take=function(e,t,n){return e&&e.length?((n?gr(e,t,n):null==t)&&(t=1),Sn(e,0,0>t?0:t)):[]},_t.takeRight=function(e,t,n){var r=e?e.length:0;return r?((n?gr(e,t,n):null==t)&&(t=1),t=r-(+t||0),Sn(e,0>t?0:t)):[]},_t.takeRightWhile=function(e,t,n){return e&&e.length?An(e,cr(t,n,3),!1,!0):[]},_t.takeWhile=function(e,t,n){return e&&e.length?An(e,cr(t,n,3)):[]},_t.tap=function(e,t,n){return t.call(n,e),e},_t.throttle=function(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new Oi(F);return!1===n?r=!1:Zr(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Mt.leading=r,Mt.maxWait=+t,Mt.trailing=i,$r(e,t,Mt)},_t.thru=Fr,_t.times=function(e,t,n){if(e=+e,1>e||!is(e))return[];var r=-1,i=Ei(us(e,ds));for(t=Dn(t,n,1);++r<e;)r<ds?i[r]=t(r):t(r);return i},_t.toArray=function(e){var t=e?e.length:0;return br(t)?t?It(e):[]:ai(e)},_t.toPlainObject=si,_t.transform=function(e,t,n,r){var i=ho(e)||ii(e);return t=cr(t,r,4),null==n&&(i||Zr(e)?(r=e.constructor,n=i?ho(e)?new r:[]:Ss(vo(r)&&r.prototype)):n={}),(i?qt:fn)(e,function(e,r,i){return t(n,e,r,i)}),n},_t.union=Fs,_t.uniq=Pr,_t.unzip=Hr,_t.values=ai,_t.valuesIn=function(e){return Ln(e,ui(e))},_t.where=function(e,t){return qr(e,mn(t))},_t.without=Is,_t.wrap=function(e,t){return t=null==t?gi:t,or(t,k,null,[e],[])},_t.xor=function(){for(var e=-1,t=arguments.length;++e<t;){var n=arguments[e];if(ho(n)||Qr(n))var r=r?nn(r,n).concat(nn(n,r)):n}return r?kn(r):[]},_t.zip=qs,_t.zipObject=Br,_t.backflow=ao,_t.collect=Ur,_t.compose=ao,_t.each=Xs,_t.eachRight=Vs,_t.extend=go,_t.iteratee=vi,_t.methods=oi,_t.object=Br,_t.select=qr,_t.tail=Dr,_t.unique=Pr,bi(_t,_t),_t.add=function(e,t){return e+t},_t.attempt=Ho,_t.camelCase=Ao,_t.capitalize=function(e){return(e=i(e))&&e.charAt(0).toUpperCase()+e.slice(1)},_t.clone=function(e,t,n,r){return t&&typeof t!="boolean"&&gr(e,t,n)?t=!1:typeof t=="function"&&(r=n,n=t,t=!1),n=typeof n=="function"&&Dn(n,r,1),en(e,t,n)},_t.cloneDeep=function(e,t,n){return t=typeof t=="function"&&Dn(t,n,1),en(e,!0,t)},_t.deburr=fi,_t.endsWith=function(e,t,n){e=i(e),t+="";var r=e.length;return n=typeof n=="undefined"?r:us(0>n?0:+n||0,r),n-=t.length,0<=n&&e.indexOf(t,n)==n},_t.escape=function(e){return(e=i(e))&&ht.test(e)?e.replace(lt,l):e},_t.escapeRegExp=li,_t.every=Ir,_t.find=zs,_t.findIndex=Ds,_t.findKey=bo,_t.findLast=Ws,_t.findLastIndex=Ps,_t.findLastKey=wo,_t.findWhere=function(e,t){return zs(e,mn(t))},_t.first=Or,_t.has=function(e,t){return e?ji.call(e,t):!1},_t.identity=gi,_t.includes=Rr,_t.indexOf=Mr,_t.inRange=function(e,t,n){return t=+t||0,"undefined"==typeof n?(n=t,t=0):n=+n||0,e>=t&&e<n},_t.isArguments=Qr,_t.isArray=ho,_t.isBoolean=function(e){return!0===e||!1===e||p(e)&&Ii.call(e)==U},_t.isDate=function(e){return p(e)&&Ii.call(e)==z},_t.isElement=Gr,_t.isEmpty=function(e){if(null==e)return!0;var t=e.length;return br(t)&&(ho(e)||ri(e)||Qr(e)||p(e)&&vo(e.splice))?!t:!No(e).length},_t.isEqual=function(e,t,n,r){return n=typeof n=="function"&&Dn(n,r,3),!n&&wr(e)&&wr(t)?e===t:(r=n?n(e,t):w,typeof r=="undefined"?hn(e,t,n):!!r)},_t.isError=Yr,_t.isFinite=po,_t.isFunction=vo,_t.isMatch=function(e,t,n,r){var i=No(t),s=i.length;if(!s)return!0;if(null==e)return!1;if(n=typeof n=="function"&&Dn(n,r,3),!n&&1==s){var o=i[0];if(r=t[o],wr(r))return r===e[o]&&(typeof r!="undefined"||o in Cr(e))}for(var o=Ei(s),u=Ei(s);s--;)r=o[s]=t[i[s]],u[s]=wr(r);return dn(Cr(e),i,o,u,n)},_t.isNaN=function(e){return ti(e)&&e!=+e},_t.isNative=ei,_t.isNull=function(e){return null===e},_t.isNumber=ti,_t.isObject=Zr,_t.isPlainObject=mo,_t.isRegExp=ni,_t.isString=ri,_t.isTypedArray=ii,_t.isUndefined=function(e){return typeof e=="undefined"},_t.kebabCase=Oo,_t.last=_r,_t.lastIndexOf=function(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if(typeof n=="number")i=(0>n?os(r+n,0):us(n||0,r-1))+1;else if(n)return i=Mn(e,t,!0)-1,e=e[i],(t===t?t===e:e!==e)?i:-1;if(t!==t)return h(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1},_t.max=Bo,_t.min=jo,_t.noConflict=function(){return d._=qi,this},_t.noop=wi,_t.now=Zs,_t.pad=function(e,t,n){e=i(e),t=+t;var r=e.length;return r<t&&is(t)?(r=(t-r)/2,t=Vi(r),r=Wi(r),n=rr("",r,n),n.slice(0,t)+e+n):e},_t.padLeft=Mo,_t.padRight=_o,_t.parseInt=ci,_t.random=function(e,t,n){n&&gr(e,t,n)&&(t=n=null);var r=null==e,i=null==t;return null==n&&(i&&typeof e=="boolean"?(n=e,e=1):typeof t=="boolean"&&(n=t,i=!0)),r&&i&&(t=1,i=!1),e=+e||0,i?(t=e,e=0):t=+t||0,n||e%1||t%1?(n=cs(),us(e+n*(t-e+parseFloat("1e-"+((n+"").length-1))),t)):wn(e,t)},_t.reduce=Gs,_t.reduceRight=Ys,_t.repeat=hi,_t.result=function(e,t,n){return t=null==e?w:e[t],typeof t=="undefined"&&(t=n),vo(t)?t.call(e):t},_t.runInContext=b,_t.size=function(e){var t=e?e.length:0;return br(t)?t:No(e).length},_t.snakeCase=Do,_t.some=Xr,_t.sortedIndex=Bs,_t.sortedLastIndex=js,_t.startCase=Po,_t.startsWith=function(e,t,n){return e=i(e),n=null==n?0:us(0>n?0:+n||0,e.length),e.lastIndexOf(t,n)==n},_t.sum=function(e,t,n){n&&gr(e,t,n)&&(t=null);var r=cr(),i=null==t;if(r===Zt&&i||(i=!1,t=r(t,n,3)),i){for(e=ho(e)?e:Nr(e),t=e.length,n=0;t--;)n+=+e[t]||0;e=n}else e=Cn(e,t);return e},_t.template=function(e,t,n){var r=_t.templateSettings;n&&gr(e,t,n)&&(t=n=null),e=i(e),t=Qt(Qt({},n||t),r,Kt),n=Qt(Qt({},t.imports),r.imports,Kt);var s,o,u=No(n),a=Ln(n,u),f=0;n=t.interpolate||St;var l="__p+='";n=Li((t.escape||St).source+"|"+n.source+"|"+(n===vt?gt:St).source+"|"+(t.evaluate||St).source+"|$","g");var h="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(e.replace(n,function(t,n,r,i,u,a){return r||(r=i),l+=e.slice(f,a).replace(Nt,c),n&&(s=!0,l+="'+__e("+n+")+'"),u&&(o=!0,l+="';"+u+";\n__p+='"),r&&(l+="'+((__t=("+r+"))==null?'':__t)+'"),f=a+t.length,t}),l+="';",(t=t.variable)||(l="with(obj){"+l+"}"),l=(o?l.replace(ot,""):l).replace(ut,"$1").replace(at,"$1;"),l="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(s?",__e=_.escape":"")+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",t=Ho(function(){return Ti(u,h+"return "+l).apply(w,a)}),t.source=l,Yr(t))throw t;return t},_t.trim=pi,_t.trimLeft=function(e,t,n){var r=e;return(e=i(e))?e.slice((n?gr(r,t,n):null==t)?m(e):o(e,t+"")):e},_t.trimRight=function(e,t,n){var r=e;return(e=i(e))?(n?gr(r,t,n):null==t)?e.slice(0,g(e)+1):e.slice(0,u(e,t+"")+1):e},_t.trunc=function(e,t,n){n&&gr(e,t,n)&&(t=null);var r=M;if(n=_,null!=t)if(Zr(t)){var s="separator"in t?t.separator:s,r="length"in t?+t.length||0:r;n="omission"in t?i(t.omission):n}else r=+t||0;if(e=i(e),r>=e.length)return e;if(r-=n.length,1>r)return n;if(t=e.slice(0,r),null==s)return t+n;if(ni(s)){if(e.slice(r).search(s)){var o,u=e.slice(0,r);for(s.global||(s=Li(s.source,(yt.exec(s)||"")+"g")),s.lastIndex=0;e=s.exec(u);)o=e.index;t=t.slice(0,null==o?r:o)}}else e.indexOf(s,r)!=r&&(s=t.lastIndexOf(s),-1<s&&(t=t.slice(0,s)));return t+n},_t.unescape=function(e){return(e=i(e))&&ct.test(e)?e.replace(ft,y):e},_t.uniqueId=function(e){var t=++Fi;return i(e)+t},_t.words=di,_t.all=Ir,_t.any=Xr,_t.contains=Rr,_t.detect=zs,_t.foldl=Gs,_t.foldr=Ys,_t.head=Or,_t.include=Rr,_t.inject=Gs,bi(_t,function(){var e={};return fn(_t,function(t,n){_t.prototype[n]||(e[n]=t)}),e}(),!1),_t.sample=zr,_t.prototype.sample=function(e){return this.__chain__||null!=e?this.thru(function(t){return zr(t,e)}):zr(this.value())},_t.VERSION=E,qt("bind bindKey curry curryRight partial partialRight".split(" "),function(e){_t[e].placeholder=_t}),qt(["dropWhile","filter","map","takeWhile"],function(e,t){var n=t!=j,r=t==H;Ht.prototype[e]=function(e,i){var s=this.__filtered__,o=s&&r?new Ht(this):this.clone();return(o.__iteratees__||(o.__iteratees__=[])).push({done:!1,count:0,index:0,iteratee:cr(e,i,1),limit:-1,type:t}),o.__filtered__=s||n,o}}),qt(["drop","take"],function(e,t){var n=e+"While";Ht.prototype[e]=function(n){var r=this.__filtered__,i=r&&!t?this.dropWhile():this.clone();return n=null==n?1:os(Vi(n)||0,0),r?t?i.__takeCount__=us(i.__takeCount__,n):_r(i.__iteratees__).limit=n:(i.__views__||(i.__views__=[])).push({size:n,type:e+(0>i.__dir__?"Right":"")}),i},Ht.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()},Ht.prototype[e+"RightWhile"]=function(e,t){return this.reverse()[n](e,t).reverse()}}),qt(["first","last"],function(e,t){var n="take"+(t?"Right":"");Ht.prototype[e]=function(){return this[n](1).value()[0]}}),qt(["initial","rest"],function(e,t){var n="drop"+(t?"":"Right");Ht.prototype[e]=function(){return this[n](1)}}),qt(["pluck","where"],function(e,t){var n=t?"filter":"map",r=t?mn:bn;Ht.prototype[e]=function(e){return this[n](r(e))}}),Ht.prototype.compact=function(){return this.filter(gi)},Ht.prototype.reject=function(e,t){return e=cr(e,t,1),this.filter(function(t){return!e(t)})},Ht.prototype.slice=function(e,t){e=null==e?0:+e||0;var n=0>e?this.takeRight(-e):this.drop(e);return typeof t!="undefined"&&(t=+t||0,n=0>t?n.dropRight(-t):n.take(t-e)),n},Ht.prototype.toArray=function(){return this.drop(0)},fn(Ht.prototype,function(e,t){var n=_t[t];if(n){var r=/^(?:filter|map|reject)|While$/.test(t),i=/^(?:first|last)$/.test(t);_t.prototype[t]=function(){function t(e){return e=[e],Ji.apply(e,s),n.apply(_t,e)}var s=arguments,o=this.__chain__,u=this.__wrapped__,a=!!this.__actions__.length,f=u instanceof Ht,l=s[0],c=f||ho(u);return c&&r&&typeof l=="function"&&1!=l.length&&(f=c=!1),f=f&&!a,i&&!o?f?e.call(u):n.call(_t,this.value()):c?(u=e.apply(f?u:new Ht(this),s),i||!a&&!u.__actions__||(u.__actions__||(u.__actions__=[])).push({func:Fr,args:[t],thisArg:_t}),new Pt(u,o)):this.thru(t)}}}),qt("concat join pop push replace shift sort splice split unshift".split(" "),function(e){var t=(/^(?:replace|split)$/.test(e)?Di:Mi)[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:join|pop|replace|shift)$/.test(e);_t.prototype[e]=function(){var e=arguments;return r&&!this.__chain__?t.apply(this.value(),e):this[n](function(n){return t.apply(n,e)})}}),fn(Ht.prototype,function(e,t){var n=_t[t];if(n){var r=n.name;(ws[r]||(ws[r]=[])).push({name:t,func:n})}}),ws[nr(null,x).name]=[{name:"wrapper",func:null}],Ht.prototype.clone=function(){var e=this.__actions__,t=this.__iteratees__,n=this.__views__,r=new Ht(this.__wrapped__);return r.__actions__=e?It(e):null,r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=t?It(t):null,r.__takeCount__=this.__takeCount__,r.__views__=n?It(n):null,r},Ht.prototype.reverse=function(){if(this.__filtered__){var e=new Ht(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e},Ht.prototype.value=function(){var e=this.__wrapped__.value();if(!ho(e))return On(e,this.__actions__);var t,n=this.__dir__,r=0>n;t=e.length;for(var i=this.__views__,s=0,o=-1,u=i?i.length:0;++o<u;){var a=i[o],f=a.size;switch(a.type){case"drop":s+=f;break;case"dropRight":t-=f;break;case"take":t=us(t,s+f);break;case"takeRight":s=os(s,t-f)}}t={start:s,end:t},i=t.start,s=t.end,t=s-i,i=r?s:i-1,s=us(t,this.__takeCount__),u=(o=this.__iteratees__)?o.length:0,a=0,f=[];e:for(;t--&&a<s;){for(var i=i+n,l=-1,c=e[i];++l<u;){var h=o[l],p=h.iteratee,d=h.type;if(d==H){if(h.done&&(r?i>h.index:i<h.index)&&(h.count=0,h.done=!1),h.index=i,!(h.done||(d=h.limit,h.done=-1<d?h.count++>=d:!p(c))))continue e}else if(h=p(c),d==j)c=h;else if(!h){if(d==B)continue e;break e}}f[a++]=c}return f},_t.prototype.chain=function(){return jr(this)},_t.prototype.commit=function(){return new Pt(this.value(),this.__chain__)},_t.prototype.plant=function(e){for(var t,n=this;n instanceof Dt;){var r=kr(n);t?i.__wrapped__=r:t=r;var i=r,n=n.__wrapped__}return i.__wrapped__=e,t},_t.prototype.reverse=function(){var e=this.__wrapped__;return e instanceof Ht?(this.__actions__.length&&(e=new Ht(this)),new Pt(e.reverse(),this.__chain__)):this.thru(function(e){return e.reverse()})},_t.prototype.toString=function(){return this.value()+""},_t.prototype.run=_t.prototype.toJSON=_t.prototype.valueOf=_t.prototype.value=function(){return On(this.__wrapped__,this.__actions__)},_t.prototype.collect=_t.prototype.map,_t.prototype.head=_t.prototype.first,_t.prototype.select=_t.prototype.filter,_t.prototype.tail=_t.prototype.rest,_t}var w,E="3.6.0",S=1,x=2,T=4,N=8,C=16,k=32,L=64,A=128,O=256,M=30,_="...",D=150,P=16,H=0,B=1,j=2,F="Expected a function",I="__lodash_placeholder__",q="[object Arguments]",R="[object Array]",U="[object Boolean]",z="[object Date]",W="[object Error]",X="[object Function]",V="[object Number]",$="[object Object]",J="[object RegExp]",K="[object String]",Q="[object ArrayBuffer]",G="[object Float32Array]",Y="[object Float64Array]",Z="[object Int8Array]",et="[object Int16Array]",tt="[object Int32Array]",nt="[object Uint8Array]",rt="[object Uint8ClampedArray]",it="[object Uint16Array]",st="[object Uint32Array]",ot=/\b__p\+='';/g,ut=/\b(__p\+=)''\+/g,at=/(__e\(.*?\)|\b__t\))\+'';/g,ft=/&(?:amp|lt|gt|quot|#39|#96);/g,lt=/[&<>"'`]/g,ct=RegExp(ft.source),ht=RegExp(lt.source),pt=/<%-([\s\S]+?)%>/g,dt=/<%([\s\S]+?)%>/g,vt=/<%=([\s\S]+?)%>/g,mt=/[\u0300-\u036f\ufe20-\ufe23]/g,gt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,yt=/\w*$/,bt=/^0[xX]/,wt=/^\[object .+?Constructor\]$/,Et=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,St=/($^)/,xt=/[.*+?^${}()|[\]\/\\]/g,Tt=RegExp(xt.source),Nt=/['\n\r\u2028\u2029\\]/g,Ct=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),kt=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",Lt="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window".split(" "),At={};At[G]=At[Y]=At[Z]=At[et]=At[tt]=At[nt]=At[rt]=At[it]=At[st]=!0,At[q]=At[R]=At[Q]=At[U]=At[z]=At[W]=At[X]=At["[object Map]"]=At[V]=At[$]=At[J]=At["[object Set]"]=At[K]=At["[object WeakMap]"]=!1;var Ot={};Ot[q]=Ot[R]=Ot[Q]=Ot[U]=Ot[z]=Ot[G]=Ot[Y]=Ot[Z]=Ot[et]=Ot[tt]=Ot[V]=Ot[$]=Ot[J]=Ot[K]=Ot[nt]=Ot[rt]=Ot[it]=Ot[st]=!0,Ot[W]=Ot[X]=Ot["[object Map]"]=Ot["[object Set]"]=Ot["[object WeakMap]"]=!1;var Mt={leading:!1,maxWait:0,trailing:!1},_t={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Dt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Pt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Ht={"function":!0,object:!0},Bt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jt=Ht[typeof exports]&&exports&&!exports.nodeType&&exports,Ft=Ht[typeof module]&&module&&!module.nodeType&&module,It=Ht[typeof self]&&self&&self.Object&&self,Ht=Ht[typeof window]&&window&&window.Object&&window,qt=Ft&&Ft.exports===jt&&jt,Rt=jt&&Ft&&typeof global=="object"&&global||Ht!==(this&&this.window)&&Ht||It||this,Ut=b();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Rt._=Ut,define("underscore",[],function(){return Ut})):jt&&Ft?qt?(Ft.exports=Ut)._=Ut:jt._=Ut:Rt._=Ut}.call(this),function(e,t){if(typeof define=="function"&&define.amd)define("backbone",["underscore","jquery","exports"],function(n,r,i){e.Backbone=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("underscore");t(e,exports,n)}else e.Backbone=t(e,{},e._,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=e.Backbone,s=[],o=s.push,u=s.slice,a=s.splice;t.VERSION="1.1.2",t.$=r,t.noConflict=function(){return e.Backbone=i,this},t.emulateHTTP=!1,t.emulateJSON=!1;var f=t.Events={on:function(e,t,n){if(!c(this,"on",e,[t,n])||!t)return this;this._events||(this._events={});var r=this._events[e]||(this._events[e]=[]);return r.push({callback:t,context:n,ctx:n||this}),this},once:function(e,t,r){if(!c(this,"once",e,[t,r])||!t)return this;var i=this,s=n.once(function(){i.off(e,s),t.apply(this,arguments)});return s._callback=t,this.on(e,s,r)},off:function(e,t,r){var i,s,o,u,a,f,l,h;if(!this._events||!c(this,"off",e,[t,r]))return this;if(!e&&!t&&!r)return this._events=void 0,this;u=e?[e]:n.keys(this._events);for(a=0,f=u.length;a<f;a++){e=u[a];if(o=this._events[e]){this._events[e]=i=[];if(t||r)for(l=0,h=o.length;l<h;l++)s=o[l],(t&&t!==s.callback&&t!==s.callback._callback||r&&r!==s.context)&&i.push(s);i.length||delete this._events[e]}}return this},trigger:function(e){if(!this._events)return this;var t=u.call(arguments,1);if(!c(this,"trigger",e,t))return this;var n=this._events[e],r=this._events.all;return n&&h(n,t),r&&h(r,arguments),this},stopListening:function(e,t,r){var i=this._listeningTo;if(!i)return this;var s=!t&&!r;!r&&typeof t=="object"&&(r=this),e&&((i={})[e._listenId]=e);for(var o in i)e=i[o],e.off(t,r,this),(s||n.isEmpty(e._events))&&delete this._listeningTo[o];return this}},l=/\s+/,c=function(e,t,n,r){if(!n)return!0;if(typeof n=="object"){for(var i in n)e[t].apply(e,[i,n[i]].concat(r));return!1}if(l.test(n)){var s=n.split(l);for(var o=0,u=s.length;o<u;o++)e[t].apply(e,[s[o]].concat(r));return!1}return!0},h=function(e,t){var n,r=-1,i=e.length,s=t[0],o=t[1],u=t[2];switch(t.length){case 0:while(++r<i)(n=e[r]).callback.call(n.ctx);return;case 1:while(++r<i)(n=e[r]).callback.call(n.ctx,s);return;case 2:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o);return;case 3:while(++r<i)(n=e[r]).callback.call(n.ctx,s,o,u);return;default:while(++r<i)(n=e[r]).callback.apply(n.ctx,t);return}},p={listenTo:"on",listenToOnce:"once"};n.each(p,function(e,t){f[t]=function(t,r,i){var s=this._listeningTo||(this._listeningTo={}),o=t._listenId||(t._listenId=n.uniqueId("l"));return s[o]=t,!i&&typeof r=="object"&&(i=this),t[e](r,i,this),this}}),f.bind=f.on,f.unbind=f.off,n.extend(t,f);var d=t.Model=function(e,t){var r=e||{};t||(t={}),this.cid=n.uniqueId("c"),this.attributes={},t.collection&&(this.collection=t.collection),t.parse&&(r=this.parse(r,t)||{}),r=n.defaults({},r,n.result(this,"defaults")),this.set(r,t),this.changed={},this.initialize.apply(this,arguments)};n.extend(d.prototype,f,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(e){return n.clone(this.attributes)},sync:function(){return t.sync.apply(this,arguments)},get:function(e){return this.attributes[e]},escape:function(e){return n.escape(this.get(e))},has:function(e){return this.get(e)!=null},set:function(e,t,r){var i,s,o,u,a,f,l,c;if(e==null)return this;typeof e=="object"?(s=e,r=t):(s={})[e]=t,r||(r={});if(!this._validate(s,r))return!1;o=r.unset,a=r.silent,u=[],f=this._changing,this._changing=!0,f||(this._previousAttributes=n.clone(this.attributes),this.changed={}),c=this.attributes,l=this._previousAttributes,this.idAttribute in s&&(this.id=s[this.idAttribute]);for(i in s)t=s[i],n.isEqual(c[i],t)||u.push(i),n.isEqual(l[i],t)?delete this.changed[i]:this.changed[i]=t,o?delete c[i]:c[i]=t;if(!a){u.length&&(this._pending=r);for(var h=0,p=u.length;h<p;h++)this.trigger("change:"+u[h],this,c[u[h]],r)}if(f)return this;if(!a)while(this._pending)r=this._pending,this._pending=!1,this.trigger("change",this,r);return this._pending=!1,this._changing=!1,this},unset:function(e,t){return this.set(e,void 0,n.extend({},t,{unset:!0}))},clear:function(e){var t={};for(var r in this.attributes)t[r]=void 0;return this.set(t,n.extend({},e,{unset:!0}))},hasChanged:function(e){return e==null?!n.isEmpty(this.changed):n.has(this.changed,e)},changedAttributes:function(e){if(!e)return this.hasChanged()?n.clone(this.changed):!1;var t,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(var s in e){if(n.isEqual(i[s],t=e[s]))continue;(r||(r={}))[s]=t}return r},previous:function(e){return e==null||!this._previousAttributes?null:this._previousAttributes[e]},previousAttributes:function(){return n.clone(this._previousAttributes)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=this,r=e.success;return e.success=function(n){if(!t.set(t.parse(n,e),e))return!1;r&&r(t,n,e),t.trigger("sync",t,n,e)},I(this,e),this.sync("read",this,e)},save:function(e,t,r){var i,s,o,u=this.attributes;e==null||typeof e=="object"?(i=e,r=t):(i={})[e]=t,r=n.extend({validate:!0},r);if(i&&!r.wait){if(!this.set(i,r))return!1}else if(!this._validate(i,r))return!1;i&&r.wait&&(this.attributes=n.extend({},u,i)),r.parse===void 0&&(r.parse=!0);var a=this,f=r.success;return r.success=function(e){a.attributes=u;var t=a.parse(e,r);r.wait&&(t=n.extend(i||{},t));if(n.isObject(t)&&!a.set(t,r))return!1;f&&f(a,e,r),a.trigger("sync",a,e,r)},I(this,r),s=this.isNew()?"create":r.patch?"patch":"update",s==="patch"&&(r.attrs=i),o=this.sync(s,this,r),i&&r.wait&&(this.attributes=u),o},destroy:function(e){e=e?n.clone(e):{};var t=this,r=e.success,i=function(){t.trigger("destroy",t,t.collection,e)};e.success=function(n){(e.wait||t.isNew())&&i(),r&&r(t,n,e),t.isNew()||t.trigger("sync",t,n,e)};if(this.isNew())return e.success(),!1;I(this,e);var s=this.sync("delete",this,e);return e.wait||i(),s},url:function(){var e=n.result(this,"urlRoot")||n.result(this.collection,"url")||F();return this.isNew()?e:e.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(e,t){return e},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(e){return this._validate({},n.extend(e||{},{validate:!0}))},_validate:function(e,t){if(!t.validate||!this.validate)return!0;e=n.extend({},this.attributes,e);var r=this.validationError=this.validate(e,t)||null;return r?(this.trigger("invalid",this,r,n.extend(t,{validationError:r})),!1):!0}});var v=["keys","values","pairs","invert","pick","omit"];n.each(v,function(e){d.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.attributes),n[e].apply(n,t)}});var m=t.Collection=function(e,t){t||(t={}),t.model&&(this.model=t.model),t.comparator!==void 0&&(this.comparator=t.comparator),this._reset(),this.initialize.apply(this,arguments),e&&this.reset(e,n.extend({silent:!0},t))},g={add:!0,remove:!0,merge:!0},y={add:!0,remove:!1};n.extend(m.prototype,f,{model:d,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return t.sync.apply(this,arguments)},add:function(e,t){return this.set(e,n.extend({merge:!1},t,y))},remove:function(e,t){var r=!n.isArray(e);e=r?[e]:n.clone(e),t||(t={});var i,s,o,u;for(i=0,s=e.length;i<s;i++){u=e[i]=this.get(e[i]);if(!u)continue;delete this._byId[u.id],delete this._byId[u.cid],o=this.indexOf(u),this.models.splice(o,1),this.length--,t.silent||(t.index=o,u.trigger("remove",u,this,t)),this._removeReference(u,t)}return r?e[0]:e},set:function(e,t){t=n.defaults({},t,g),t.parse&&(e=this.parse(e,t));var r=!n.isArray(e);e=r?e?[e]:[]:n.clone(e);var i,s,o,u,a,f,l,c=t.at,h=this.model,p=this.comparator&&c==null&&t.sort!==!1,v=n.isString(this.comparator)?this.comparator:null,m=[],y=[],b={},w=t.add,E=t.merge,S=t.remove,x=!p&&w&&S?[]:!1;for(i=0,s=e.length;i<s;i++){a=e[i]||{},a instanceof d?o=u=a:o=a[h.prototype.idAttribute||"id"];if(f=this.get(o))S&&(b[f.cid]=!0),E&&(a=a===u?u.attributes:a,t.parse&&(a=f.parse(a,t)),f.set(a,t),p&&!l&&f.hasChanged(v)&&(l=!0)),e[i]=f;else if(w){u=e[i]=this._prepareModel(a,t);if(!u)continue;m.push(u),this._addReference(u,t)}u=f||u,x&&(u.isNew()||!b[u.id])&&x.push(u),b[u.id]=!0}if(S){for(i=0,s=this.length;i<s;++i)b[(u=this.models[i]).cid]||y.push(u);y.length&&this.remove(y,t)}if(m.length||x&&x.length){p&&(l=!0),this.length+=m.length;if(c!=null)for(i=0,s=m.length;i<s;i++)this.models.splice(c+i,0,m[i]);else{x&&(this.models.length=0);var T=x||m;for(i=0,s=T.length;i<s;i++)this.models.push(T[i])}}l&&this.sort({silent:!0});if(!t.silent){for(i=0,s=m.length;i<s;i++)(u=m[i]).trigger("add",u,this,t);(l||x&&x.length)&&this.trigger("sort",this,t)}return r?e[0]:e},reset:function(e,t){t||(t={});for(var r=0,i=this.models.length;r<i;r++)this._removeReference(this.models[r],t);return t.previousModels=this.models,this._reset(),e=this.add(e,n.extend({silent:!0},t)),t.silent||this.trigger("reset",this,t),e},push:function(e,t){return this.add(e,n.extend({at:this.length},t))},pop:function(e){var t=this.at(this.length-1);return this.remove(t,e),t},unshift:function(e,t){return this.add(e,n.extend({at:0},t))},shift:function(e){var t=this.at(0);return this.remove(t,e),t},slice:function(){return u.apply(this.models,arguments)},get:function(e){return e==null?void 0:this._byId[e]||this._byId[e.id]||this._byId[e.cid]},at:function(e){return this.models[e]},where:function(e,t){return n.isEmpty(e)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var n in e)if(e[n]!==t.get(n))return!1;return!0})},findWhere:function(e){return this.where(e,!0)},sort:function(e){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return e||(e={}),n.isString(this.comparator)||this.comparator.length===1?this.models=this.sortBy(this.comparator,this):this.models.sort(n.bind(this.comparator,this)),e.silent||this.trigger("sort",this,e),this},pluck:function(e){return n.invoke(this.models,"get",e)},fetch:function(e){e=e?n.clone(e):{},e.parse===void 0&&(e.parse=!0);var t=e.success,r=this;return e.success=function(n){var i=e.reset?"reset":"set";r[i](n,e),t&&t(r,n,e),r.trigger("sync",r,n,e)},I(this,e),this.sync("read",this,e)},create:function(e,t){t=t?n.clone(t):{};if(!(e=this._prepareModel(e,t)))return!1;t.wait||this.add(e,t);var r=this,i=t.success;return t.success=function(e,n){t.wait&&r.add(e,t),i&&i(e,n,t)},e.save(null,t),e},parse:function(e,t){return e},clone:function(){return new this.constructor(this.models)},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(e,t){if(e instanceof d)return e;t=t?n.clone(t):{},t.collection=this;var r=new this.model(e,t);return r.validationError?(this.trigger("invalid",this,r.validationError,t),!1):r},_addReference:function(e,t){this._byId[e.cid]=e,e.id!=null&&(this._byId[e.id]=e),e.collection||(e.collection=this),e.on("all",this._onModelEvent,this)},_removeReference:function(e,t){this===e.collection&&delete e.collection,e.off("all",this._onModelEvent,this)},_onModelEvent:function(e,t,n,r){if((e==="add"||e==="remove")&&n!==this)return;e==="destroy"&&this.remove(t,r),t&&e==="change:"+t.idAttribute&&(delete this._byId[t.previous(t.idAttribute)],t.id!=null&&(this._byId[t.id]=t)),this.trigger.apply(this,arguments)}});var b=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample"];n.each(b,function(e){m.prototype[e]=function(){var t=u.call(arguments);return t.unshift(this.models),n[e].apply(n,t)}});var w=["groupBy","countBy","sortBy","indexBy"];n.each(w,function(e){m.prototype[e]=function(t,r){var i=n.isFunction(t)?t:function(e){return e.get(t)};return n[e](this.models,i,r)}});var E=t.View=function(e){this.cid=n.uniqueId("view"),e||(e={}),n.extend(this,n.pick(e,x)),this._ensureElement(),this.initialize.apply(this,arguments),this.delegateEvents()},S=/^(\S+)\s*(.*)$/,x=["model","collection","el","id","attributes","className","tagName","events"];n.extend(E.prototype,f,{tagName:"div",$:function(e){return this.$el.find(e)},initialize:function(){},render:function(){return this},remove:function(){return this.$el.remove(),this.stopListening(),this},setElement:function(e,n){return this.$el&&this.undelegateEvents(),this.$el=e instanceof t.$?e:t.$(e),this.el=this.$el[0],n!==!1&&this.delegateEvents(),this},delegateEvents:function(e){if(!e&&!(e=n.result(this,"events")))return this;this.undelegateEvents();for(var t in e){var r=e[t];n.isFunction(r)||(r=this[e[t]]);if(!r)continue;var i=t.match(S),s=i[1],o=i[2];r=n.bind(r,this),s+=".delegateEvents"+this.cid,o===""?this.$el.on(s,r):this.$el.on(s,o,r)}return this},undelegateEvents:function(){return this.$el.off(".delegateEvents"+this.cid),this},_ensureElement:function(){if(!this.el){var e=n.extend({},n.result(this,"attributes"));this.id&&(e.id=n.result(this,"id")),this.className&&(e["class"]=n.result(this,"className"));var r=t.$("<"+n.result(this,"tagName")+">").attr(e);this.setElement(r,!1)}else this.setElement(n.result(this,"el"),!1)}}),t.sync=function(e,r,i){var s=N[e];n.defaults(i||(i={}),{emulateHTTP:t.emulateHTTP,emulateJSON:t.emulateJSON});var o={type:s,dataType:"json"};i.url||(o.url=n.result(r,"url")||F()),i.data==null&&r&&(e==="create"||e==="update"||e==="patch")&&(o.contentType="application/json",o.data=JSON.stringify(i.attrs||r.toJSON(i))),i.emulateJSON&&(o.contentType="application/x-www-form-urlencoded",o.data=o.data?{model:o.data}:{});if(i.emulateHTTP&&(s==="PUT"||s==="DELETE"||s==="PATCH")){o.type="POST",i.emulateJSON&&(o.data._method=s);var u=i.beforeSend;i.beforeSend=function(e){e.setRequestHeader("X-HTTP-Method-Override",s);if(u)return u.apply(this,arguments)}}o.type!=="GET"&&!i.emulateJSON&&(o.processData=!1),o.type==="PATCH"&&T&&(o.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")});var a=i.xhr=t.ajax(n.extend(o,i));return r.trigger("request",r,a,i),a};var T=typeof window!="undefined"&&!!window.ActiveXObject&&(!window.XMLHttpRequest||!(new XMLHttpRequest).dispatchEvent),N={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};t.ajax=function(){return t.$.ajax.apply(t.$,arguments)};var C=t.Router=function(e){e||(e={}),e.routes&&(this.routes=e.routes),this._bindRoutes(),this.initialize.apply(this,arguments)},k=/\((.*?)\)/g,L=/(\(\?)?:\w+/g,A=/\*\w+/g,O=/[\-{}\[\]+?.,\\\^$|#\s]/g;n.extend(C.prototype,f,{initialize:function(){},route:function(e,r,i){n.isRegExp(e)||(e=this._routeToRegExp(e)),n.isFunction(r)&&(i=r,r=""),i||(i=this[r]);var s=this;return t.history.route(e,function(n){var o=s._extractParameters(e,n);s.execute(i,o),s.trigger.apply(s,["route:"+r].concat(o)),s.trigger("route",r,o),t.history.trigger("route",s,r,o)}),this},execute:function(e,t){e&&e.apply(this,t)},navigate:function(e,n){return t.history.navigate(e,n),this},_bindRoutes:function(){if(!this.routes)return;this.routes=n.result(this,"routes");var e,t=n.keys(this.routes);while((e=t.pop())!=null)this.route(e,this.routes[e])},_routeToRegExp:function(e){return e=e.replace(O,"\\$&").replace(k,"(?:$1)?").replace(L,function(e,t){return t?e:"([^/?]+)"}).replace(A,"([^?]*?)"),new RegExp("^"+e+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(e,t){var r=e.exec(t).slice(1);return n.map(r,function(e,t){return t===r.length-1?e||null:e?decodeURIComponent(e):null})}});var M=t.History=function(){this.handlers=[],n.bindAll(this,"checkUrl"),typeof window!="undefined"&&(this.location=window.location,this.history=window.history)},_=/^[#\/]|\s+$/g,D=/^\/+|\/+$/g,P=/msie [\w.]+/,H=/\/$/,B=/#.*$/;M.started=!1,n.extend(M.prototype,f,{interval:50,atRoot:function(){return this.location.pathname.replace(/[^\/]$/,"$&/")===this.root},getHash:function(e){var t=(e||this).location.href.match(/#(.*)$/);return t?t[1]:""},getFragment:function(e,t){if(e==null)if(this._hasPushState||!this._wantsHashChange||t){e=decodeURI(this.location.pathname+this.location.search);var n=this.root.replace(H,"");e.indexOf(n)||(e=e.slice(n.length))}else e=this.getHash();return e.replace(_,"")},start:function(e){if(M.started)throw new Error("Backbone.history has already been started");M.started=!0,this.options=n.extend({root:"/"},this.options,e),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState);var r=this.getFragment(),i=document.documentMode,s=P.exec(navigator.userAgent.toLowerCase())&&(!i||i<=7);this.root=("/"+this.root+"/").replace(D,"/");if(s&&this._wantsHashChange){var o=t.$('<iframe src="javascript:0" tabindex="-1">');this.iframe=o.hide().appendTo("body")[0].contentWindow,this.navigate(r)}this._hasPushState?t.$(window).on("popstate",this.checkUrl):this._wantsHashChange&&"onhashchange"in window&&!s?t.$(window).on("hashchange",this.checkUrl):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this.fragment=r;var u=this.location;if(this._wantsHashChange&&this._wantsPushState){if(!this._hasPushState&&!this.atRoot())return this.fragment=this.getFragment(null,!0),this.location.replace(this.root+"#"+this.fragment),!0;this._hasPushState&&this.atRoot()&&u.hash&&(this.fragment=this.getHash().replace(_,""),this.history.replaceState({},document.title,this.root+this.fragment))}if(!this.options.silent)return this.loadUrl()},stop:function(){t.$(window).off("popstate",this.checkUrl).off("hashchange",this.checkUrl),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),M.started=!1},route:function(e,t){this.handlers.unshift({route:e,callback:t})},checkUrl:function(e){var t=this.getFragment();t===this.fragment&&this.iframe&&(t=this.getFragment(this.getHash(this.iframe)));if(t===this.fragment)return!1;this.iframe&&this.navigate(t),this.loadUrl()},loadUrl:function(e){return e=this.fragment=this.getFragment(e),n.any(this.handlers,function(t){if(t.route.test(e))return t.callback(e),!0})},navigate:function(e,t){if(!M.started)return!1;if(!t||t===!0)t={trigger:!!t};var n=this.root+(e=this.getFragment(e||""));e=e.replace(B,"");if(this.fragment===e)return;this.fragment=e,e===""&&n!=="/"&&(n=n.slice(0,-1));if(this._hasPushState)this.history[t.replace?"replaceState":"pushState"]({},document.title,n);else{if(!this._wantsHashChange)return this.location.assign(n);this._updateHash(this.location,e,t.replace),this.iframe&&e!==this.getFragment(this.getHash(this.iframe))&&(t.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,e,t.replace))}if(t.trigger)return this.loadUrl(e)},_updateHash:function(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");e.replace(r+"#"+t)}else e.hash="#"+t}}),t.history=new M;var j=function(e,t){var r=this,i;e&&n.has(e,"constructor")?i=e.constructor:i=function(){return r.apply(this,arguments)},n.extend(i,r,t);var s=function(){this.constructor=i};return s.prototype=r.prototype,i.prototype=new s,e&&n.extend(i.prototype,e),i.__super__=r.prototype,i};d.extend=m.extend=C.extend=E.extend=M.extend=j;var F=function(){throw new Error('A "url" property or function must be specified')},I=function(e,t){var n=t.error;t.error=function(r){n&&n(e,r,t),e.trigger("error",e,r,t)}};return t}),define("nprogress",["jquery"],function(e){function r(e,t,n){return e<t?t:e>n?n:e}function i(e){return(-1+e)*100}function s(e,t,r){var s;return n.positionUsing==="translate3d"?s={transform:"translate3d("+i(e)+"%,0,0)"}:n.positionUsing==="translate"?s={transform:"translate("+i(e)+"%,0)"}:s={"margin-left":i(e)+"%"},s.transition="all "+t+"ms "+r,s}var t={};t.version="0.1.2";var n=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};return t.configure=function(t){return e.extend(n,t),this},t.status=null,t.set=function(e){var i=t.isStarted();e=r(e,n.minimum,1),t.status=e===1?null:e;var o=t.render(!i),u=o.find('[role="bar"]'),a=n.speed,f=n.easing;return o[0].offsetWidth,o.queue(function(r){n.positionUsing===""&&(n.positionUsing=t.getPositioningCSS()),u.css(s(e,a,f)),e===1?(o.css({transition:"none",opacity:1}),o[0].offsetWidth,setTimeout(function(){o.css({transition:"all "+a+"ms linear",opacity:0}),setTimeout(function(){t.remove(),r()},a)},a)):setTimeout(r,a)}),this},t.isStarted=function(){return typeof t.status=="number"},t.start=function(){t.status||t.set(0);var e=function(){setTimeout(function(){if(!t.status)return;t.trickle(),e()},n.trickleSpeed)};return n.trickle&&e(),this},t.done=function(e){return!e&&!t.status?this:t.inc(.3+.5*Math.random()).set(1)},t.inc=function(e){var n=t.status;return n?(typeof e!="number"&&(e=(1-n)*r(Math.random()*n,.1,.95)),n=r(n+e,0,.994),t.set(n)):t.start()},t.trickle=function(){return t.inc(Math.random()*n.trickleRate)},t.render=function(r){if(t.isRendered())return e("#nprogress");e("html").addClass("nprogress-busy");var s=e("<div id='nprogress'>").html(n.template),o=r?"-100":i(t.status||0);return s.find('[role="bar"]').css({transition:"all 0 linear",transform:"translate3d("+o+"%,0,0)"}),n.showSpinner||s.find('[role="spinner"]').remove(),s.appendTo(document.body),s},t.remove=function(){e("html").removeClass("nprogress-busy"),e("#nprogress").remove()},t.isRendered=function(){return e("#nprogress").length>0},t.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"},t}),define("localization",["util"],function(){return{ui:{actions:"Actions",on:"ON",off:"OFF",save:"Save",saveAll:"Save All",selectAll:"Select All",cancel:"Cancel",close:"Close",discard:"Discard",clone:"Clone",copy:"Copy",edit:"Edit","delete":"Delete",check:"Check",add:"Add",ok:"Ok",merge:"Merge",viewEmail:"View email",sendEmail:"Send email",sendInvite:"Send invite",back:"Back",update:"Update",del:"Delete",remove:"Remove",submit:"Submit",confirm:"Confirm",create:"Create",register:"Register",refresh:"Refresh",report:"Report",escToCancel:"<strong>Esc</strong> to Cancel",ctrlEnterToSubmit:"<strong>Ctrl + Enter</strong> to Submit",loading:"Loading",load:"Load",post:"Post",gallery:"Gallery",build:"Build",error:"Error",hide:"Hide",yes:"Yes",no:"No",finish:"Finish",move:"Move",restore:"Restore",settings:"Settings",members:"Members",action:"Action",clickToSubmit:"Click to submit this form",clickToCancel:"Click to cancel",noResultsFound:"No results found",clickToggleGallery:"Click to toggle Gallery view",clickOpenNewWindow:"Click to open in new window",jumpToMessage:"Jump to message",clickToSeeDescription:"Click to see description",reuseForAnalyze:"Re-use for analyze",backToTop:"Back to Top",allRights:"All rights reserved",admin:"ADMIN",manager:"MANAGER",lead:"LEAD",member:"MEMBER",customer:"CUSTOMER",user:"USER(OWNER)",you:"you",makeAdmin:"Make Admin",unassign:"Unassign",lockedTitle:"Role can't be changed, since user have ADMIN privileges",more:"more...",wrongCredentials:"user name or password is incorrect",wronglength:"Login must be to 128 characters.",wrongcharacters:"Login should contain only any Latin, numeric characters, symbols: hyphen, underscore.",wrongsignin:"You need to sign in before continuing",wrongrelogin:"Can't get user info. Please relogin",wrongupdating:"Error when update default project: ",reloginToApply:"Please relogin to apply changes!",relogin:"Relogin",avatar:"Profile image",minPrefix:"At least ",minSufix:" symbols required.",minSufixAuto:" symbols required for autocomplete.",maxPrefix:"No more than ",maxSufix:" symbols allowed.",by:"by",sureToRemove:"Are you sure you want to remove %%% <span class='text-wrapper'>'%%%'</span>",sureToUnassign:"Are you sure you want to unassign",sureToDelete:"Are you sure you want to delete",enterChars:"Please enter 1 or more characters",checkQuery:"Check your query and try again",userSm:"user",widgetSm:"widget",dashboardSm:"dashboard",analyze:"Analysis",autoAnalyzeShort:"AA",BASIC:"Basic",OAUTH:"OAuth",NTLM:"NTLM",APIKEY:"ApiKey",previous:"Previous",next:"Next",warning:"WARNING",warningSm:"warning",toolname:"Report Portal",launches:"launches",items:"items",item:"item",sec:"sec",month:"month",monthsString:"months",max:"Max",min:"Min",avg:"Avg",rotateImage:"Rotate image",selectValue:"Select value",from:"from",to:"to",launch:"launch",selectedLaunches:"selected launches",debug:"Debug",allLaunches:"All Launches",smof:"of",smon:"on",backHome:"Back to home",backForm:"Back to Form",today:"Today",yesterday:"Yesterday",sortBy:"Sort by",name:"Name",description:"Description",days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]},uiCommonElements:{cancel:"Cancel",reset:"Reset",close:"Close","delete":"Delete"},footer:{help:"Help",contactUs:"Contact Us",epam:"EPAM",policy:"Privacy Policy",docs:"Documentation",api:"API",licensing:"Licensing",lgplv3:"LGPL 3.0",forkUs:"Fork us on GitHub",chatSlack:"Chat with us on Slack",textCopyright:"&copy; 2017 Report Portal. All Rights Reserved.",textSocial:"Keep in touch with us:",menu:{news:"News",support:"Support",aboutUs:"About Us",contacts:"Contacts"}},notFound:{oops:"Oops, this page was not found",spelling:"You may have mistyped the URL. Please check your spelling.",or:"or",permission:"You do not have permission to access this page. Please check the list of your available projects."},messages:{code:"Code:",details:" details"},login:{passwordTitle:"Password",loginTitle:"Login",signIn:"Sign in",blockedLoginForm:"You entered incorrectly login or password many times. Login form is blocked for ",changePassword:"Change Password",backToLogin:"Back to login",showPassword:"Show password",newPassword:"New password",confirmNewPassword:"Confirm new password",restorePassword:"Restore Password",emailToBegin:"Enter email to begin",forgotPassword:"Forgot your password?"},landing:{threes:{subHeader:"collaborative test automation",ciCd:"Integral part of CI/CD strategy",ciCdText:"we build RP as result of our 15 year experience in test automation for our clients. We believe that it's a missing component in true agile environment, especially with extensive TA",architecture:"Extendible architecture",architectureText:"With extendible architecture Report Portal can accommodate new ideas and implementation from the community",realtime:"realatime reporting and analytics",realtimeText:"Report Portal captures and collects data in real time for collaborative and fast work",analysis:"Intelligent results analysis",analysisText:"learns from the history. So that with can 'understand' root cause of new day test results"},header:{btnLogin:"Login",returnToRP:"Return to RP",linkFeatures:"Benefits",linkAutoAnalysis:"Accelerated analysis",linkProductionUsage:"Realtime Analysis",linkDistributionOfFails:"Root cause",linkYouResultAnalysis:"Team work",linkDocumentation:"Documentation"},GroupIdeasBehindRP:{titleIdeasBehindReportPortal:"Product Benefits",titleLiveVisibility:"Realtime visibility",titleReduceEffort:"Reduce Effort",titleSupportsTools:"Out of box support",titleNiceReports:"Modern reports",titleEasyIntegrate:"Quick startup",titleNoRefactoring:"Team work",descLiveVisibility:"Into your test automation status",descReduceEffort:"Accelerate results analysis leveraging historical data",descSupportsTools:"Out of the box integration with mainstream automation and bugtracking",descNiceReports:"Out of the box analytics and custom dashboards",descEasyIntegrate:"Integrate your existing automation results in same day. On premise or cloud",descNoRefactoring:"Collaborative environment for your entire team"},sitesUsingFoundation:"Sites using foundation:",clients:{altToday:"Today",altCocaCola:"Coca Cola",altMTV:"MTV",altLibertyGlobal:"Liberty Global",altInterContinentalsHotelsGroup:"InterContinentals Hotels Group",altGloboforce:"Globoforce",altWiggle:"Wiggle",altThomsonReuters:"Thomson Reuters",altCanadianTire:"Canadian Tire",altWoltersKluwer:"Wolters Kluwer",altKrux:"Krux",altAccellion:"Accellion",altPlex:"Plex"},documentation:{notAvailable:"Documentation is currently unavailable",notAvailableText:"There is no connection at the moment. You can check our ",notAvailableLink:"Landing Page"}},topMenu:{reportPortal:"Report Portal",rpp:"RPP",status:"Status",activeProjTitle:"Current active project",dashboard:"Dashboard",launches:"Launches",debug:"Debug",favorites:"Favorites",admin:"Admin",members:"Members",logout:"Logout",settings:"Settings",myProjects:"My projects",filters:"Filters",projects:"My Projects:",administrate:"Administrate",profile:"Profile"},widgets:{clickZoomIn:"Click to Zoom in",clickZoomOut:"Click to Zoom out",clickEdit:"Click to Edit widget",clickDelete:"Click to Delete",filterNotFound:"Filter associated with this widget is not found",unableLoadData:"Unable to load data for this widget",unsharedWidget:"Widget has been unshared by owner!",widgetNotFound:"Widget not found!",widgetUnShared:"Widget has been unshared by",dataFilter:"Data filter for widget",fromMyFilters:"from my filters",fromShared:"from shared filters",selectFilter:"Select filter",configureWidget:"Configure widget",selectType:"Select widget type",widgetName:"Widget name",limitResults:"Limit of results",widgetSize:"Widget size",widgetType:"Widget type",typeUserName:"Type user name",typeLaunchName:"Launch name",widgetCriteria:"Criteria for widget",selectCriteria:"Select Criteria",selectShared:"Select shared widget",widgetExists:"Widget already exists on dashboard",emptyShared:"No shared widgets found!",sharedBy:"shared by",widgetSharedBy:"Widget is shared by",widgetCreatedBy:"Widget was created by",noData:"No Data Available.",selectLaunch:"Select launch",chooseFilter:"Choose filter from the list below",limit:"Items count",items:"Items",launchesCount:"Launches count",enterRecipients:"enter recipients",bug:"bug",btsNotConf:"Bug tracking system is not configured for the project.",bugId:"Bug ID",foundIn:"Found in",submitDate:"Submit date",submitter:"Submitter",testCase:"Test Case",allRuns:"All runs",failed:"Failed",not_passed:"% (Failed+Skipped)/Total",affected:"Affected by, %",failure:"failure",failsOf:"fails of",testCaseExe:"test case executions with",lastFailure:"Last Failure",findLastLaunch:"Find in last launch",pieTotal:"Total",totalTestCases:"Total test cases",pieIssues:"Issues",addNewWidget:"Add New Widget",addSharedWidget:"Add Shared Widget",deleteWidget:"Delete Widget",refreshWidget:"Refresh Widget",saveWidget:"Save Widget",editWidget:"Edit Widget",exportWidget:"Export Widget",clickToAdd:"Click here to add new widget",medianValueUniqLaunches:"Median value of total on all unique launches",numberLaunches:"Quantity of launches",quantityLaunches:"quantity of launches",launches:"launches",timeWeeks:"t, weeks",timeDays:"t, days",averageBugs:"On average: %%% % of",propertiesProj:"properties of project",properties:"properties",settings:"settings",project:"project",maxLaunches:"Maximum launches in selection",duration:"Duration",nonPassedCases:"Non-passed test-cases",failedCases:"failed cases",ofInvestigation:"of investigation",ofTestCases:" of test cases",ofIssues:"of issues",growTestCases:"Grow test cases",toInvestigate:"To Investigate",automationBug:"Automation Bug",productBug:"Product Bug",systemIssue:"System Issue",investigated:"Investigated",namePlaceholder:"Enter widget name",descriptionPlaceholder:"Enter widget description",launchMode:"Launch Mode",timelineMode:"Timeline Mode",timelineModeTitle:"Timeline mode",startLaunch:"started launch",finishLaunch:"finished launch",deleteLaunch:"deleted launch",shareWidget:"shared widget",unshareWidget:"unshared widget",shareDashboard:"shared dashboard",unshareDashboard:"unshared dashboard",update_bts:"updated",delete_bts:"removed",create_bts:"configured",attach_issue:"added isssue",post_issue:"posted issue",delete_issue:"removed issue",testItem:"test item",update_project:"updated",update_defect:"updated",delete_defect:"deleted",defectTypes:"defect types",defectType:"defect type",casesLabel:"cases",nonPassedCases:"% of non-passed cases",failedCases:"failed cases",testItemNotFound:". Test item is not found",ofInvestigation:"% of investigations",ofProductBugs:"% of Product Bugs",ofSystemIssues:"% of System Issues",ofAutoBugs:"% of Automation Bugs",productBugs:"Product Bugs",emailNotifications:"E-mail Notifications",on_email:"configured",off_email:"switched off",update_email:"updated",overallStatisticsPanel:"Overall statistics panel",overallStatisticsPanelDescription:"shows summary of test cases with each statuses in the selected launches.",TestCasesStatisticsUniqueLaunches:"Test-cases statistics in unique launches",failedTestCasesTable:"Most failure test-cases table",failedTestCasesTableDescription:"shows the TOP-20 most failing test cases within the specified previous launches.",uniqueBugsTable:"Unique bugs table",uniqueBugsTableDescription:"shows real identified bugs, posted to the Bug Tracking System, and existing in the BTS bugs, loaded on the project.",launchesTable:"Launches table",launchesTableDescription:"shows the configurable table of launches.",statisticsLineChart:"Launch statistics line chart",statisticsLineChartDescription:'- in "Launch Mode" shows the growth trend in the number of test cases with each selected statuses from run to run,<br> - in "Timeline Mode" shows sum, distributed by dates.',statisticsTrendChart:"Launch statistics trend chart",statisticsTrendChartDescription:'- in "Launch Mode" shows the growth trend in the number of test cases with each selected statuses from run to run,<br> - in "Timeline Mode" shows sum, distributed by dates.',comparisonChart:"Different launches comparison chart",comparisonChartDescription:"allows to compare statistics for 2 last launches side by side.",durationChart:"Launches duration chart",durationChartDescription:"shows duration of the selected launches.",percentageOfLaunches:"Investigated percentage of launches",percentageOfLaunchesDescription:'- in "Launch Mode" shows whether the launches are analyzed or not (the percentage of "Investigated"/"To Investigate") from run to run,<br> - in "Timeline Mode" shows percentage of "Investigated"/"To Investigate" tests in all runs per day distributed by dates.',nonPassedTrendChart:"Non-Passed test-cases trend chart",nonPassedTrendChartDescription:"shows the percent ratio of non-passed test cases (Failed + Skipped) to Total cases from run to run.",growthTrendChart:"Test-Cases growth trend chart",growthTrendChartDescription:'- in "Launch Mode" shows the increment of test-cases from run to run,<br> - in "Timeline Mode" shows the increment of test-cases distributed by dates (in launches with the largest number of test-cases per day).',failedTrendChart:"Failed cases trend chart",failedTrendChartDescription:"shows the trend of growth in the number of failed test cases from run to run.",executionIssueStatistics:"Launch execution and issue statistic",executionIssueStatisticsDescription:"shows statistics of the last launch divided into 2 sections:</br> - Skipped, Passed, Failed </br> - Product Bug, System Issue, To Investigate, Automation Bugs.",projectActivityPanel:"Project activity panel",projectActivityPanelDescription:"shows all activities occurring on the project.",percentageOfInvestigationsChart:"Percentage of investigations",percentageOfProductBugsChart:"Percentage of product bugs",launchStatisticsChart:"Launch Statistics",trendChart:"Trend Chart",lineChart:"Line Chart",defaultName:"Widget template name",defaultDescription:"Select widget template and filter to render data trough - and you'll see preview at the right side",generalInfo:"General information",launchesOwners:"Launches owners",lastLaunchStats:"Last launch statistic",launchStats:"Launch statistics",percentageOfProductBugs:"Percentage of product bugs",percentageOfSystemIssues:"Percentage of system issues",percentageOfAutoBugs:"Percentage of auto bugs",pleaseUpdateWidget:'Please, update widget by saving it in <span class="rp-link" href="">Widget Wizard</span>.',haveInvalidCriteria:"You have <strong>%%% invalid $$$</strong> with deleted defect types.",invalidCriteria:"Invalid criterion",criteria:"criteria",criterion:"criterion",saveWidgetDashboard:"Save Widget on Dashboard"},userProfile:{userProfile:"User profile",projectAndRoles:"Assigned on project",regenerateUUID:"Regenerate UUID",updateDataFromUPSA:"Update data from UPSA",updateUserDataFrom:"Update data from",reloginRequired:"relogin is required",forceUpdate:"Force Update",infoSynchronized:"Information for user has been successfully synchronized",UUID:"UUID",msgUUIDTop:"In order to provide security for your own domain password, you can use a user token, named UUID - to verify your account to be able to log with agent.",msgUUIDMid:"For more information visit 'Agent Parameters' page",msgUUIDFoot:"Click the icon to open the page",msgRegenTop:"If you need to update your UUID, click regenerate to have new one.",msgRegenMid:"WARNING!",msgRegenFoot:"All configured agents with old UUID will not be working after that",userConfig:"User Config:",testNG:"TestNG/jUnit",ruby:"Ruby",soapUI:"SoapUI",donNet:".NET",editInfo:"Edit personal info",oldPass:"Old Password",newPass:"New Password",enter:"Enter",confirmPass:"Confirm",uploadPhoto:"Upload photo",removePhoto:"Remove photo",userName:"User Name",email:"Email",selectPhoto:"Select photo",savePhoto:"Save photo",rubyConfigTitle:"COPY AND SAVE IT AS A REPORT_PORTAL.YML FILE",soapConfigTitle:"SET THE FOLLOWS PROPERTIES INTO PROJECT PROPERTIES OR SET THEM TO SYSTEM VARIABLES",dotnetConfigTitle:"FOLLOW INSTALLER INSTRUCTIONS",defaultConfigTitle:"COPY AND SAVE IT AS A REPORTPORTAL.PROPERTIES FILE",required:"REQUIRED",notRequired:"NOT REQUIRED",personalInfo:"Personal Information",configExamples:"Configutation Examples",uuidTitle:"Universally Unique Identifier",regenerateBtn:"Regenerate",projectRole:"Project Role",oldClientComment:'<div class="comment"><p>Client versions before 2.2.3 support <b>com.epam.ta.reportportal.ws.*</b> parameters name format.</p><p>Client versions from 2.2.3 support <b>rp.*</b> and <b>com.epam.ta.reportportal.ws.*</b> parameters name formats.</p><p>Please use new names format, because old ones will be deprecated.</p></div>'},dashboard:{allDashboards:"All Dashboards",addNewDashboard:"Add new Dashboard",maxAdded:"Max amount of dashboards were added",dashboardShared:"Dashboard is shared",dashboardSharedBy:"Dashboard is shared by",dashboardName:"Dashboard Name",namePlaceholder:"Enter Dashboard Name",descriptionPlaceholder:"Enter Dashboard Description",shared:"Shared:",sharedSelect:"Select shared Dashboard",sharedNoFound:"No shared dashboards found!",project:"Project:",noDashboard:"You have no Dashboards",noSharedDashboard:"No Dashboards are shared",noDashboardSearch:"No Dashboard found for",checkQuery:"Check your query and try again",dashboardEmpty:"Dashboard list is empty!",clickToAdd:"Add your first Dashboard to analyse statistics",addDashboard:"Add dashboard",editDashboard:"edit dashboard",titleEditDashboard:"Click to edit dashboard name",removeDashboard:"Remove Dashboard",titleRemoveDashboard:"Click to remove dashboard",dashboardExists:"The dashboard is already added to the project",addWidget:"Add Widget",exportTo:"Export",settingsButton:"Settings",refresh:"Refresh",remove:"Remove",addFilter:"Add Filter",exitFullscreen:"Exit full screen",fullscreen:"Full Screen",nextStep:"Next Step",previousStep:"Previous Step",saveWidget:"Please, save your filter to add widget.",widgetEmpty:"No widgets found!",clickToAddWidget:"Click 'Add Widget' button to create widget.",dashboardNotShared:"Dashboard has been unshared by owner!",dashboardIsNotShared:"Dashboard is not shared by owner!",deletedSharedDashboard:"Dashboard has been deleted by owner!",noWidgetsInDashBoard:"Dashboard doesn't contain any widget.",selectDashboard:"Select dashboard",firstDashboard:"My first dashboard",autoCreated:"* First dashboard was created automatically",dashboardsEmpty:"No dashboards found! Click 'Add new Dashboard' button to create dashboard.",deletedByOwner:"Deleted by owner",deletedDashboard:"Deleted dashboard",myDashboards:"My Dashboards",favoriteDashboards:"Favorite shared Dashboards",shareDashboardAs:"Share dashboard at ",createDashboard:"Create Dashboard",shareDashboard:"Shared Dashboard",shareDashboards:"Shared Dashboards",share:"Share",sharedBy:"Dashbord is shared by",maxWidgetsAdded:"Maximum widgets reached",nameNewDashboard:"Enter New Dashboard Name",tHeadTitleOwners:"Owners",tHeadTitleDashboardName:"Dashboard Name",description:"Description"},favorites:{title:"Filters",favoriteFilters:"Favorite filters",sharedFilters:"Shared filters",favoriteLinks:"Favorite links",msgFavoriteFilters:"Filters are issue searches that have been saved for re-use.",msgSharedFilters:"Filters which shared with you on the project.",msgFavoriteLinks:"This page shows you all your favorite links.",name:"Name: ",fName:"Filter name",fOptions:"Options",fOwner:"Owner",fShared:"Shared",fDisplayOnLaunches:"Display on launches",fDelete:"Delete",addFilter:"Add Filter",filterNotFound:"No filters found!",linksNotFound:"No links found!",shareFilter:"Share filter",unShareFilter:"Unshare Filter",namePlaceholder:"Name",sortedBy:" sorted by: ",addToTabs:"Add to launch tabs",removeFromTabs:"Remove from Launch Tabs"},launches:{linkName:"Link Name",clickToSaveLink:"Click to save the link",openToHistory:"Open to history view",launchHash:"Launch #",clickToSubmitComment:"Click to submit this comment to issue tracking system",selectDefectComent:"Please select defect type or add comment!",componentPlaseholder:"Component1, component2",ticketType:"Ticket type:",priority:"Priority:",relatedIssue:"Related issue:",includeLogs:"Logs",includeComments:"Comment",includeScreenshots:"Screenshots",fillAllRequired:"Fill in all required fields",credentialsSoft:"In case of empty fields Report Portal credentials will be used",credentialsSoftTfs:"In case of empty fields Windows credentials will be used",problemInteracting:"Error interacting with external system. Check the entered data",problemGeneral:"Error occurred: ",forceFinish:"Force finish",finishWarning:"In case of finish the %%%, all data will be missed. Are you sure you want to finish %%%?",deleteWarning:"In case of delete the launch, all related data will be deleted. Are you sure you want to delete launch",deleteItemWarning:"In case of delete the test item, all related data will be deleted. Are you sure you want to delete test item",finishAgree:"I am sure I want to finish %%%",deleteAgree:"I am sure I want to delete %%%",errorItem:"Error Item",jiraCredentials:"Jira credentials",tfsCredentials:"TFS credentials",rallyCredentials:"Rally credentials:",userName:"User name",password:"Password",includeData:"Include data",willBePostedTo:"Bug will be posted to",willBeLoadedTo:"Bug will be loaded to",noItemsInside:"No items inside",actionTitle:"Select several items to processing",multiSelectError:"You cannot perform operation to invalid items",proceedValidItems:"Proceed Valid Items",editDefects:"Edit Defects",deleteBulk:"Delete Test Items in bulk",bredcrumbsLostLaunch:"Original launch was lost",bredcrumbsLostLaunchRestore:"Restore path",issueTitle:"Issue title",components:"Components:",summarizeIssue:"Summarize issue title:",shiftToLaunches:"Move to All Launches",shiftToDebug:"Move to Debug",owner:"Owner",addToDashboard:"Add to dashboard",postBug:"Post Bug",postBugTo:"Post Bug to",loadBug:"Load Bug",addIssueId:"Add Issue ID",key:"Issue Key (for multiple options - type issue ID and press Enter)",configureTBS:"Configure Bug Tracking System to post bugs",configureTBSLoad:"Configure Bug Tracking System to load bugs",noIssues:"You can't Post Bug if item has no issues",noIssuesLoad:"You can't Load Bug if item has no issues",historyView:"History",skippedDuration:"SKIPPED. Duration: ",stoppedDuration:"Run STOPPED after:",interruptedDuration:"Run INTERRUPTED after:",inProcessAndEndedDuration:"Wrong status: 'In Progress' with finish time",notInProcessNotEndedDuration:"Wrong state: item is not 'In Progress', but has no finish time",inProcess:"In Progress",prefixDuration:"Duration: ",finishTime:"  Finish time: ",prefixRunInterrupted:"Run INTERRUPTED after: ",stoppedAt:". Stopped at: ",prefixStartTime:"Start time: ",prefixStatus:"Status: ",methodTypeTest:"Test",methodTypeTestClass:"",youAreEditing:"You are editing ",objects:" objects",Compare:"Compare",clickToCompare:"Click on the item in table to select it for compare!",compareLaunches:"Compare Launches",inProgress:"In Progress",merge:"Merge",mergeLaunches:"Merge Launches",mergeLaunchesModalTitle:"All selected launches will be merged in one",clickToLoadMore:"Click here to load more items",clickToMerge:"Click on two or more launches in table to select for merge!",filterIsShared:"Filter is shared",filterIsSharedByOtherUser:"Filter is shared by other user",launchEditor:"Launch Editor",launchName:"Launch name",launchNumber:"Launch number",disclaimerChangeDescription:"Change of description and tags can affect your filtering results, widgets, trends",matchTitle:"Match issues in Launch",nothingToMatch:"Launch has no issues to match","export":"Export",itemName:"Test item name",extendWithOriginal:"Extend child suites description with original launch name (e.g. @launch 'Launch #1')",launchNotInProgress:"Launch should not be in the status IN PROGRESS!",launchIsProcessing:"Launch should not be processing by Auto Analysis!",forbiddenIsProcessing:"Update of test item is forbidden for launch with Auto Analyze in progress",replaceComments:"Replace Comments to All Selected Items",noLaunchFound:"Launch is not found",noItemFound:"Item is not found",originalLaunchLost:"Original launch was lost",showPreconditionMethods:"Collapse precondition methods",hidePreconditionMethods:"Expand precondition methods",approximateTimeLeft:"~%%% left",approximateTimeLessMin:"<1m left",approximateTimeExpected:"Average executions time -",approximateTimeOverLap:"current overlap -",launchFinished:"Launch is finished",launchIsDeleting:"The launch is in the removal process!",noItemInLaunch:"No Item<br> in Launch",emptyItem:"Item is Empty",severalItems:"There’re several items with the same names, descriptions and tags",multipleSelectHeader:"YOU CAN PERFORM ACTIONS WITH SELECTED ITEMS:"},launchStatus:{FAILED:"Failed",PASSED:"Passed",STOPPED:"Stopped",INTERRUPTED:"Interrupted",IN_PROGRESS:"In Progress"},historyLine:{tooltips:{FAILED:"Failed",PASSED:"Passed",STOPPED:"Stopped",SKIPPED:"Skipped",INTERRUPTED:"Interrupted",IN_PROGRESS:"In Progress",MANY:"There are several items with the same names, descriptions and tags",NOT_FOUND:"No Item in Launch"}},infoLine:{product_bug:"Product Bugs",automation_bug:"Automation Bugs",system_issue:"System Issues",to_investigate:"To Investigate",no_defect:"No Defects",total:"Total"},testTableMethodTypes:{TEST:"Test Class",STEP:"Test",AFTER_CLASS:"After Class",BEFORE_CLASS:"Before Class",BEFORE_METHOD:"Before Method",AFTER_METHOD:"After Method",AFTER_GROUPS:"After Groups",BEFORE_GROUPS:"Before Groups",BEFORE_SUITE:"Before Suite",AFTER_SUITE:"After Suite",AFTER_TEST:"After Test",BEFORE_TEST:"Before Test"},filterNameById:{statistics$executions$total:"Total",statistics$executions$passed:"Passed",statistics$executions$failed:"Failed",statistics$executions$skipped:"Skipped",statistics$defects$product_bug:"Product Bug",statistics$defects$automation_bug:"Automation Bug",statistics$defects$system_issue:"System Issue",statistics$defects$to_investigate:"To Investigate",statistics$defects$no_defect:"No Defect",statistics$defects$product_bug$total:"Total PB",statistics$defects$automation_bug$total:"Total AB",statistics$defects$system_issue$total:"Total SI",statistics$defects$to_investigate$total:"TI",statistics$defects$no_defect$total:"Total ND",product_bug:"Product Bug",automation_bug:"Automation Bug",system_issue:"System Issue",to_investigate:"To Investigate",no_defect:"No Defect",tags:"Tags",start_time:"Start Time",message:"Message",description:"Description",name:"Launch Name",itemName:"Test Item Name",level:"Log level",time:"Time Range",issue$issue_comment:"Defect comment",issue$issue_type:"Defect Type",status:"Status",type:"Method Type",history_depth:"History Depth",user:"Owner"},filterNamePluralById:{product_bug:"Product Bugs",automation_bug:"Automation Bugs",system_issue:"System Issues",to_investigate:"To Investigates",no_defect:"No Defects"},filterNameByValue:{ALL:"All",PASSED:"Passed",FAILED:"Failed",SKIPPED:"Skipped",TO_INVESTIGATE:"To Investigate",NO_DEFECT:"No defect",PRODUCT_BUGS:"Product Bug",AUTOMATION_BUGS:"Automation Bug",inProgress:"In Progress",SYSTEM_ISSUE:"System Issue",TRACE:"Trace",DEBUG:"Debug",INFO:"Info",WARN:"Warn",ERROR:"Error",Screenshot:"Attachment"},launchesHeaders:{start_time:"Start Time",start_time_short:"Start",end_time:"Finish time",name:"Name",name_short:"Name",duration:"Time",duration_short:"Time",total:"Total",total_short:"TTL",passed:"Passed",passed_short:"PS",failed:"Failed",failed_short:"FL",skipped:"Skipped",skipped_short:"SKP",product_bug:"Product Bug",product_bug_short:"Product Bug",product_bug_super_short:"PB",auto_bug:"Auto Bug",automation_bug:"Auto Bug",automation_bug_short:"Auto Bug",automation_bug_super_short:"AB",system_issue:"System Issue",system_issue_short:"System Issue",system_issue_super_short:"SI",to_investigate:"To Investigate",to_investigate_short:"To Invest",to_investigate_super_short:"TI",no_defect:"No Defect",type:"Method Type",type_short:"Method Type",status:"Status",status_short:"Status",issue:"Defect Type",issue_short:"Defect Type",time:"Time",time_short:"Time",message:"Log Message",message_short:"Log Message",attachment:"Attachment",attachment_short:"ATH",interruptedAfter:"Run INTERRUPTED after:",stoppedAt:"Stopped at:",durationSpecific:"Duration is interval between first child starts and last child ends. But if child run in parallel, end time is a time of longest child, in this case duration will not be equal to child duration sum."},launchLogItem:{stackTrace:"stack trace",attachments:"attachments",itemDetails:"item details",historyOfActions:"history of actions"},statisticsPanel:{productBug:"Product Bugs",testBug:"Automation Bugs",systemIssue:"System issues",toInvestigate:"To Investigate"},logs:{noLogsFound:"No logs found",openFile:"Open the file in a new window",logLevel:"Log level",ticketNotFound:"Issue not found:",ticketStatusProblem:"Issue doesn't exist or no connection to the External System",summary:"Summary:",status:"Status:",prevTestItem:"Previous Test Item",nextTestItem:"Next Test Item",filterAttachments:"Logs with Attachments",notFoundActivity:"No activities to display",notFoundAttachments:"No attachments to display",notFoundStackTrace:"No Stack Trace to display",goToLog:"Go to Stack Trace in Log Message",nextError:"Next Error"},defectNameById:{TO_INVESTIGATE:"To Investigate",PRODUCT_BUG:"Product Bug",AUTOMATION_BUG:"Automation Bug",SYSTEM_ISSUE:"System Issue",NO_DEFECT:"No defect"},defectShortCutById:{TO_INVESTIGATE:"TI",PRODUCT_BUG:"PB",AUTOMATION_BUG:"AB",SYSTEM_ISSUE:"SI",NO_DEFECT:"ND"},filterConditions:{eq:"equals","!eq":"not equals",ne:"not equals",cnt:"contains","!cnt":"not contains",and:"and",has:"and","in":"or",or:"or",gte:"greater than or equal",lte:"less than or equal"},filters:{moreCriteria:"More Criteria",toSaveText:"Apply any filter to save the filter to favorites",tabIsUnsaved:"Tab contains unsaved changes",enterFilterName:"Enter new filter name",more:"More",all:"All",name:"Name:",shared:"Shared:",noInfoFilter:"No info matches this filter",notSaveDescription:"Filter is not saved",sharedBy:"Filter is shared by",sharedDescription:"Filter is shared",globalDescription:"Filter is shared by other user"},filter:{name:"Name",namePlaceholder:"Enter Filter Name",share:"Share",description:"Description",descriptionPlaceholder:"Enter Filter Description",edit:"Edit Filter",addNew:"Add New Filter",filterName:"Filter Name"},project:{newProject:"New Project",sureToRemove:"Are you sure you want to delete member ",userAccess:"Users with access to",newMember:"New project member",addMember:"Add project member",assignMember:"Assign member",assignMemberToProject:"Assign member to the project",aboutPermissions:"Read more about project permissions",openPermissionsMap:"Click to open Permission Map",permissionsMap:"Permission Map",projectMembers:"Project members",proposedRole:"Proposed Role",projectRole:"Project Role",unAssign:"Unassign",removeUser:"Remove user from team",unassignMember:"Unassign - Remove user from team",settings:"Settings",settingsFor:"Settings for",name:"Name",launchesNames:"Launch Names",selectTags:"Select tags",selectLaunchNames:"Select launch names",toolset:"Project toolset:",specificProject:"Add controls according to related specific of project",launchTimeout:"Launch Inactivity Timeout",scheduleForInterupt:"Schedule time for Job to interrupt inactive launches",keepLogs:"Keep Logs",howKeepLogs:"How long to keep old logs in launches. Related launches structure will be saved, in order to keep statistics",keepScreen:"Keep Screenshots",howKeepScreen:"How long to keep screenshots in system",bts:"Bug Tracking System",properties:"Properties",linkBts:"Link to issue tracker system",forExample:"for example,",oauthToken:"OAuth authorization token",projectNameBts:"Project name in issue tracker system",propIssueForm:"Default properties for Issue Form",components:"Components",issueComponents:"Issue related components, separate by comma",ticketType:"Ticket type",ticketType:"Ticket type",defaultPriority:"Default Priority",autoAnalysis:"Auto Analysis",autoAnalysisOnOff:"<p>If ON - analysis starts as soon as any launch finished.</p> <p>If OFF - not automatic, but can be invoked manually</p>",emailNotifications:"E-mail Notifications",emailRecipients:"Recipients",duplicateEmailCase:"Such notification rule already exists. You can't create duplicate.",emailInCase:"In Case",rule:"RULE",deleteRule:"Delete RULE",from:"From",addRule:"Add New Rule",launchOwner:"Launch owner",launchOwnerDescription:"Launch owner (who launched - that received)",sendNotification:"Send e-mail notifications about launches finished",emptyRecipients:"Select at least one recipient",notFoundRecipients:"User does not exist. Please, check the entered data.",invalidRecipients:"Please select at least one recipient",sendLaunchNames:"Send notifications about selected launches finished",sendTags:"Send notifications about launches containing specified tags",incorectEmail:"Please enter correct email",incorectTags:"Please enter correct tags",enterRecipients:"Select team members",generalTab:"General",notificationsTab:"Notifications",btsTab:"Bug Tracking System",demoDataSettings:"Demo Data",generateDemoData:"Generate Demo Data",generateDemoDataTitle:"the system will generate the following demo data:",generateDemoDataLaunches:"10 Launches",generateDemoDataDashboard:"1 Dashboard with 9 Widgets",generateDemoDataFilter:"1 Filter",postfixLabel:"Postfix will be added to the demo dashboard, widgets, filter name",removeDemoData:"You will have to remove the Demo Data manually.",postfixPlaceHolder:"Enter Postfix",posfixUniq:"Postfix already used or not align with already existing data. Please use another one",generationDataInProgress:"Data generation is started. The process can take several minutes, please wait.",generateDataMobile:"You can generate data only on desktop view.",beta:"beta",aboutinfo:"Detailed information about the project",unableLoadData:"Unable to load data",defectTypes:"Defect types",nav:{defectName:"Defect name",abbreviation:"Abbreviation",color:"Color",diagram:"Diagram"},titleGroup:{titleProductBug:"Product bugs group",titleSystemIssue:"System issues group",titleAutomationBug:"Automation Bugs Group",titleNoDefect:"No defect bugs group",titleToInvestigate:"To investigate"},noDefect:"No defect",systemIssue:"System issue",productBug:"Product bug",toInvestigate:"To investigate",automationBug:"Automation bug",addSubType:"Add Defect Type",addSubTypeShort:"Add",canBeAdded:"subtypes can be added",limitReached:"All 10 sub-types are already added",inputValLongName:"Subtype name",inputValShortName:"Abbreviation",ExplChosenColors:"Example of chosen colors",LinkResetToDefaultColors:"Reset to Default Colors",ruleDeleted:"Rule will be deleted after submit",noCustomDefectsWereAdded:"No custom defects were added",noCustomColors:"No colors to update"},bts:{oAuthToken:"OAuth token",apiKey:"ApiKey",defaultProperties:"Default properties for Issue Form",fieldsReset:"! The default properties for issue will be reset",showFields:"Show fields",defaultValue:"Default value",errorInteracting:"Error interacting with external system. Check the entered data",errorCredentials:"Credentials are invalid. Check the entered data",projectNotFound:"Project %%% not found. Check the entered data",authorizationType:"Authorization Type",linkTo:"Link to BTS",projectName:"Project Name in BTS",projectId:"Project Id in BTS",userName:"BTS Username",password:"BTS Password",domain:"Domain",removeProject:"Remove project",projectNameIn:"Project name",tbsChangeWarning:"Warning! If you configure new system settings, the current project will be reset!",configureFields:"Configure Bug Tracking System default properties to post bugs",issueId:"Issue ID",linkToIssue:"Link to Issue",addNewIssues:"Add New Issues",addNewIssue:"Add New Issue",btsInstances:"Bts Instances:",btsAddNewInstance:"Add New Instance",btsNotFound:"To configure Bug Tracking System, please deploy appropriate micro-service"},admin:{privileges:"Administrator has full privileges according to permission map",managementBoard:"Management Board",users:"All Users",settings:"Settings",serverSettings:"Server Settings",emailSettings:"E-mail server",authSettings:"Authorization Configuration",host:"Host",port:"Port",username:"Username",password:"Password",authorization:"Authorization",protocol:"Protocol",addUser:"Add User",inviteUser:"Invite User",projects:"Projects",addProject:"Add project",addNewProject:"Add new project",addProjectTitle:"Assign project to the member",addNewProject:"Add new project",activeProjects:"Active projects",notActiveProjects:"Not active projects",personalProjects:"Personal projects",noProjectsFound:"No projects found for",newProject:"new",usersQuantity:"members",usersQuantitySingular:"member",launchesQuantity:"launches",launchesQuantitySingular:"launch",lastRunPrefix:"Run ",lastRunSuffix:"0 days ago",goToProject:"Open",assignToProject:"Assign me",backToProject:"Back to project",search:"Search",lastLogin:"Last login",projectsRoles:"Projects and Roles",deleteUser:"Delete User",viewProjects:" View Projects and Roles",addNewUser:"Add new user",inviteNewUser:"Invite user to the project",configPage:" project configuration page",projectMembers:"Members",enterProjectName:"Enter Project Name",assigned:"Assigned",add:"Add",invite:"Invite",assign:"Assign",sortBy:"Sort by",selectCriteria:"Select Criteria",creationDate:"Creation date",name:"Name",lastLaunchDate:"Last launch date",actions:"Actions",projectName:"Project name",projectRole:"Project role",cantUnAssignFromDefault:"The user cannot be unassigned from Default_Project",cantUnAssignFromPersonal:"The user cannot be unassigned from Personal project",kpi:"KPI",projectTitle:"See detailed information",projectDetailsTitle:"See detailed information about the project ",generalInfo:"General information",launchesOwners:"Launches owners",memberName:"Member name",numberOfLaunches:"Number of launches",launches:" launches",launch:" launch",members:"member",launchesAverage:"launches average per week",launchesAverageSingular:"launch average per week",uniqueBugs:"unique bug posted",noLaunchesPerformed:"No launches were performed at the selected period",titleAllProjects:"All Projects",titleMembers:"Members",titleSettings:"Settings",internalProjects:"Internal projects",personalProjects:"Personal projects",searchByName:"Search by Name",TLS:"TLS",SSL:"SSL",emailError:"Test connection was failed:",addUserProject:"Add User to Project",projectName:"Project name",projectRole:"Project role",enableEmailServer:"Enable Email Server",enableGuestAccount:"Enable Guest Account",activateGitHubAuth:"Activate GitHub Authorization",gitHubClientId:"Client ID",gitHubClientSecret:"Client Secret",gitHubOrgName:"Organization Name",addGitHubOrg:"Add GitHub Organization",emailSender:"Default sender name"},registration:{welcomeMsg:'<span class="welcome">Welcome,</span><br>complete the registration form',loginHint:"1-128 symbols, Latin, numeric characters, symbols: hyphen, underscore",nameHint:"3-256 symbols, Latin, Cyrillic, numeric characters, symbols: hyphen, underscore, dot, space",passwordHint:"4-25 symbols"},members:{projectMembers:"Project members",registration:"Registration",completeToRegister:"Complete the form to register on the Report Portal",title:"Members",addMember:"Add User",inviteMember:"Invite User",addMemberToProject:"Add new user to the project",inviteMemberToProject:"Invite new member to the project",backToMembers:"Back to members",expired:"This invitation has expired or already used",startWork:"to start work with Report Portal",successAddUser:"New account has been created successfully",viewEmail:"View email",nameLoginEmail:"Name, login, e-mail",searchNameLogin:"Search by Name, Login",searchNameLoginEmail:"Search by Name, Login, Email",searchName:"Search by Name",unAssignTitle:"Unassign user from the project",unAssignTitleYou:"Impossible to unassign own account from project",unAssignTitleNoPermission:"You have no enough permission",unAssignTitleExternal:"Impossible to unassign UPSA-user from UPSA-project",unAssignTitlePersonal:"Impossible to unassign user from personal project",unAssign:"Unassign",assignTitle:"Add member to the project",assign:"Assign",permissionsMap:"Permission Map",assignedMembers:"Project members",assignProjectTitle:"Assign member to the project",linkTo:"Link to",welcomeTo:"Welcome to",registeredOn:"You have been successfully registered on",useInformation:"Please, use the following information to login:",lockedPermissionsTitle:"You do not have enough permissions to update this member",invitationSent:"The invitation was sent on",titleAllMembers:"All Members",titleNameLogin:"Name / Login",titleNameLoginEmail:"Name / Login / Email",enterLoginEmail:"Enter Login or Email",alredyAdded:"User has already assigned to the project",invitePref:"Invite",sendInvite:"Send invite via e-mail"},comparators:{eq:"=",gte:">=",lte:"<=",gt:">",lt:"<",cnt:"contains",ex:"exists",btw:"between",not:" not ",and:" and ",andb:" AND "},successMessages:{defaults:"Completed successfully!",unAssignMember:"User has been unassigned from project!",deleteUser:"User has been deleted from system!",deleteFilter:"Filter was deleted",deleteBts:"Project settings were successfully updated",deleteSubType:"Defect types were successfully deleted",deleteOneSubType:"Defect type was successfully deleted",deletePhoto:"Photo has been deleted successfully",deleteMember:"User '%%%' was deleted",deleteProject:"Project was deleted",dashboardDelete:"Dashboard has been deleted!",deletedWidget:"Widget has been deleted!",addedWidget:"Widget has been added",dashboardDeletedUnsharedByOwner:"Dashboard has been deleted",deleteLaunch:"Launch was deleted",deleteLaunches:"Launches were deleted",deleteTestItem:"Item was deleted",deleteTestItems:"Items were deleted",submitKeys:"Defect link is added",editFilter:"Filter has been updated!",sharedFilter:"Filter name has been shared!",unsharedFilter:"Filter name has been unshared!",signedIn:"Signed in successfully",addTicket:"Ticket has been created.",removeTicket:"Ticket has been deleted!",switchToDebug:"Launch has been successfully shifted to Debug",switchToAllLaunches:"Launch has been successfully shifted to All Launches",updateLaunch:"Launch has been updated",addLaunchFilter:"Filter has been added to launch tabs",removeLaunchFilter:"Filter has been removed from launch tabs",savedLaunchFilter:"Filter has been saved",savedLaunchFilters:"Filters have been saved",savedFilter:"Filter has been created",saveWidget:"Widget has been saved successfully",dashboardAdded:"Dashboard has been added",dashboardUpdated:"Dashboard has been updated",mergeLaunches:"Launches have been merged",startedAutoanalyzer:"Auto-analyzer for launch successfully started.",updateProjectSettings:"Project settings were successfully updated",finishLaunch:"Launch was successfully forced to finish",addMember:"Member was successfully added.",inviteMember:"Invite for member is successfully registered. Confirmation info will be send on provided email. Expiration: 1 day.",registerMember:"Registration has been completed successfully",projectCreated:"The project '%%%' has been successfully created",setAdminSettings:"Email server settings have been updated",deleteOrgOAuthSettings:"GitHub organization has been deleted",setOAuthSettings:"OAuth integration settings have been updated",deleteOAuthSettings:"OAuth integration settings were successfully removed",updateProjectRole:"Member '%%%' has been updated",updateEmailProjectSettings:"Notification rule has been removed.",updateSubType:"Defect type was successfully updated",updateSubTypesColores:"Defect types colors were successfully updated",assignMember:"Member '%%%' was assigned to the project",assignYourSelf:"You was assigned to the project ",matchIssueInLog:"Match issues in launch is over. Navigate to the launch root to see results.",changeRole:"User role for '%%%' was changed",submitForgotPass:"Password recovery instructions have been sent to email %%%",submitChangePass:"Your password has been changed successfully",submitProfileInfo:"Changes have been saved successfully",submitUpload:"Photo has been uploaded successfully",updateUuid:"UUID has been regenerated",addSubType:"New defect type was successfully created",startAnalyzeAction:"Auto-analyzer has been started.",generateDemoData:"Demo Data has been generated",changedColorDefectTypes:"Defect types have been updated.",updateDefect:"Defects have been updated"},failMessages:{noPermissions:"You do not have enough permissions. Access is denied!",defaults:"An error occurred while connecting to server",duplicatedRecourse:"Duplication of the resources has been detected!",shareFilter:"Error when sharing filter: ",deleteFilter:"Error when deleting filter: ",deleteBts:"Failed to delete project settings",deleteUser:"Error when deleting user:",editFilter:"Error when editing filter: ",errorSaveTicket:"Error when post ticket! ",errorCompareLaunches:"Error when compare launches: ",projectLoad:"Can't get project info. Please re-login.",dashboardDelete:"Error when deleting dashboard: ",savedLaunchFilter:"Could not save filter",savedLaunchFilterQuantity:"Could not save filter, number of elements per page should be no more than 150",savedLaunchFilters:"Could not save filters",errorSaveWidget:"Error saving the widget",errorUpdateWidget:"Error when updating widget",filterNameDuplication:"Error when updating widget",unAssignMember:"Fail to unassign member from the project",loadFilters:"Could not load filters.",widgetSave:"Could not save widget to the server",widgetAddToDashboard:"Could not add selected widget to dashboard",widgetUpdate:"Could not complete widget update",postTicketToBts:"Could not post bug to bug tracking system",updateProjectSettings:"Failed to update project settings",getUsers:"Failed to get users for current project",widgetPreviewData:"Failed to get data for widget preview",widgetData:"Failed to get data for widget",getDashBoards:"Failed to get dashboards for current project",connectToServer:"Failed to connect to the server",addDashBoard:"Failed to save new dashboard",sharedWidgetData:"Failed to get shared widget data",widgetNames:"Failed to load widgets name collection",adminLoadProjects:"Failed to load projects from the server",updateDefect:"Failed to update defect information",addMember:"Error when add member",inviteMember:"Error when invite member",registerMember:"Error when register member",validateRegisterBid:"Error when validate for user registration",finishLaunch:"Failed to force finish the launch",loadFilters:"Failed to load filters list",getItemsWidgetBugTable:"Failed to load data for widget",gridData:"Failed to load data for launches table",updateDashboard:"Failed to update dashboard or its component",getSharedDashboards:"Failed to get shared dashboards list",addSharedDashboard:"Failed to add shared dashboard",updateDefaultProject:"Failed to update default project for user",getUserInfo:"Failed to obtain user info",projectCreate:"Failed to create project",deleteProject:"Failed to delete project",updateProjectRole:"Failed to update project role",setAdminSettings:"Failed to update email server settings",setOAuthSettings:"Failed to update OAuth integration settings",deleteOAuthSettings:"Failed to delete OAuth integration settings",deleteMember:"Failed to delete user",loadMembers:"Failed to load members",assignMember:"Failed to assigned member to the project",assignYourSelf:"Failed to assign yourself to the project",submitKeys:"Failed to load bugs with provided ids ",startAnalyzeAction:"Failed to start analyze",changeRole:"Failed to change user role for '%%%'",loadProjectInfo:"Failed to load a project information",submitForgotPass:"User with entered email address is not found",submitForgotPassRestricted:"Unable to change password for external user",submitForgotPassBrokenConf:"Email configuration is broken or switched-off. Please configure email server in Report Portal settings.",submitChangePass:"Failed to update password",submitProfileInfo:"Failed to update profile info",submitProfileInfoDuplication:"Entered email already exists in the system",submitProfileInfoWrongData:"Email is incorrect",submitChangePassInvalid:"Invalid password was entered",submitUpload:"Failed to upload photo",deletePhoto:"Failed to delete photo",clearExternalSystem:"Failed to clear current BTS setup",mergeLaunches:"Failed to merge selected launches",forceUpdateUserRoles:"Error when update data from UPSA",forceUpdateGitHub:"Error when update data from GitHub",updateUuid:"Error when regenerate UUID: ",loadHistory:"Failed to load history for current item",loadActivityItems:"Failed to load activity items",loadNavigationStep:"Failed to load",sessionExpired:"Your session has been expired",getItemInfo:"Failed to load info for item",dublPostFix:"Postfix already used or not align with already existing data. Please use another one",serverNotConfigured:"Email server is not configured",impossibleInvite:"Impossible to invite user due to email server configuration is broken or switched-off",addUserWithoutEmail:"User has been created, but impossible to send message due to email server configuration is broken or switched-off"},infoMessages:{defaults:"System state has been changed",logOuted:"You have been logged out",noResults:"No results to display"},validation:{defaultMessage:"Value did not pass validation",issueTitleEmpty:"Title should not contain only white spaces and shouldn't be empty",issueTitleLength:"Title should have size from '4' to '512'",componentsLength:"Components should not contains only white spaces and shouldn't be empty",logMessageLength:"Message length should have size from %%% to %%%.",filtersNameLength:"Filter name length should have size from %%% to %%%",filterNameLength:"Filter name length should have size from %%% to %%% characters.",filterDescriptionLength:"Filter description length should have size from %%% to %%%.",filterDescriptionMaxLength:"Filter description length should have size to %%%.",filterNameDuplication:"This name is already in use. Please choose something else.",filterStaticsDigitsOnly:"This filter accepts only digits.",dashboardNameLength:"Dashboard name should have size from %%% to %%%",widgetNameLength:"Widget name should have size from '3' to '128'",projectNameLength:"Project name should have size from '1' to '55'",countCantBeEmpty:"Items count can not be empty",launchesCantBeEmpty:"Select launch to create widget",countWrongAmount:"Items count is out of range",countWrongAmountSize:"Items count should have size ",itemsSizeLength:"Items count should have size %%% to %%%",selectAtLeastOneCriteria:"Select at least one criteria option",selectAtLeastOneAction:"Select at least one actions option",selectAllOptionsForWidget:"Select all options to add new widget",btsLinkRequired:"Please provide a valid BTS link",btsLinkRegex:"BTS link should match a valid website address",jiraLinkLength:"Please provide a valid JIRA link",requiredDefault:"This field is required",dashboardNameDuplication:"This name is already in use",widgetNameDuplication:"This widget name is already in use",descriptionsSize:"Descriptions should have size not more than 1024",loginSize:"Login should have size to {1}.",fullNameSize:"Full name should have size from '{0}' to '{1}'.",passwordSize:"Password should have size from '{0}' to '{1}'.",incorrectEmail:"Email is incorrect. Please enter correct email.",registeredEmail:"Entered email already exists in the system.",registeredLogin:"Entered login already exists in the system.",confirmPassword:"Password and confirm password do not match.",memberNameLength:"Member name should have size from '1' to '128'",filterNameMax:"Filter name should have size up to '55'",fullNameRegex:"Only Latin, numbers symbols, underscore, dash, dot, space are possible",mergeNameLength:"Field name should have size from '3' to '256'",fromEmailLength:"'From' field should have size from '5' to '256'",addProjectNameLength:"Project name should have size from '3' to '256'",projectNameRegex:"Only Latin, numbers symbols, underscore, dash are possible",projectNameRequired:"Enter a project name",projectNameDuplication:"Project with the same name already exists in the system",hostLength:"Only numbers from '1' to '65535' are possible.",bugIdPattern:"Special symbols are prohibited",launchDescriptionLength:"Description should have size not more than 1024 symbols",submitProfileInfoEmail:"Email is incorrect",emailMatchRegex:"Check the entered email",emailNotificationLength:"Email should have size from '{0}' to '{1}'.",emailInternalRegex:"The password cannot be changed. Please use you domain password.",confirmMinMax:"Password should have size from '4' to '25' symbols",confirmMatch:"Passwords do not match",fullNameInfoRegex:"Full name should have size from '3' to '256' symbols, Latin, Cyrillic, numeric characters, hyphen, underscore, dot, space.",loginRegex:"Full name should have size from '1' to '128' symbols, Latin, numeric characters, hyphen, underscore.",originalPassRegex:"Password should have size from '4' to '25' symbols",hostMatchRegex:"Check the entered data",wrongImage:"You can upload jpeg, png, gif file, no more than 1 MB and 300x500px",restorationExpired:"The link to restore password has been expired or already used",tfsDomainLength:"Domain should have size from '1' to '255' symbols",apiKeyLength:"Api key should have size from '4' to '128' symbols",passwordLength:"Password should have size from '4' to '25' symbols",usernameLength:"Username should have size from '4' to '128' symbols",onlyIntegersRegex:"Only numbers are allowed",doublesRegex:"This field accepts double type numbers",issueLinkRegex:"Link should match a valid website address",issueLinkRequired:"Link should match a valid website address",issueIdLength:"Issue Id should have size from %%% to %%%",fieldRequired:"This field is required",defectName:"Full name should have size from '3' to '55'",wrongSymbol:"Only Latin, numbers symbols, hyphen, underscore are possible",defectUniq:"Full name and Short name set should be unique",defectShortName:"Short name should have size from '1' to '4'",defectColor:"Select color for defect type",postfixLength:"Postfix should have size from %%% to %%%"},forms:{name:"Name",owner:"Owner",tags:"Tags",description:"Description",startTime:"Start time",endTime:"End time",user:"User",finishTime:"Finish time",number:"Number",lastModified:"Last modified",status:"Status",updateProject:"Update project settings",updateItem:"Update item",startLaunch:"Start launch",finishLaunch:"Finish launch",deleteLaunch:"Delete launch",shareWidgetDashboard:"Share widget, dashboard",unShareWidgetDashboard:"Unshare widget, dashboard",postIssue:"Post issue to BTS",attachIssue:"Attach issue to BTS",history:"History",project:"Project",login:"Login",fullName:"Full Name",email:"Email",loginOrEmail:"Login or Email",password:"Password",confirmPassword:"Confirm password",genPassword:"Generate password",projectRole:"Project role",accountRole:"Account role",selectProject:"Select a project",symbolsForName:"3-256 symbols, Latin, Cyrillic, numeric characters, symbols: hyphen, underscore, dot, space.",symbolsForLogin:"1-128 symbols, Latin, numeric characters, symbols: hyphen, underscore.",symbolsForPass:"4-25 symbols.",passwordSize:'Password should have size from "4" to "25".',passwordEmpty:"Password shouldn't be empty.",adminPrivileges:"Administrator will have full privileges according to permission map",showPassword:"Show password",linkInvitation:"Link to invitation",createUser:"Add, register user",updateDefects:"Update defect types",updateBts:"Update BTS",projectNameIn:"Project Name in",bugWillBeLoaded:"Bug will be loaded to ",copyLink:"Copy Link"},wizard:{widgetWizard:"Widget Wizard",widgetType:"Widget Type",nameAndDashboard:"Name & Dashboard",sharedFilters:"Shared Filters",ownFilters:"Own Filters",sharedWidgets:"Shared Widgets",widgetTemplates:"Widget Templates",enterWidgetName:"Enter new widget name",createDashboard:"Create Dashboard",sharedDashboards:"Shared Dashboards",ownDashboards:"Own Dashboards",enterDashboardName:"Enter new dashboard name",sharedFiltersAbsent:"No shared filters found",ownFiltersAbsent:"No filters found for ",sharedWidgetAdded:"Widget is already added to selected dashboard",sharedWidgetCantBeAdded:"Widget could not be added",noOwnDashboards:"Project has no dashboards yet",noSharedWidgets:"No widgets are shared",saveNewDashboard:"Please, save new dashboard or switch to 'Own Dashboards'",impossibleShared:"Impossible to choose shared widget",widgetOnSharedDashboard:"The widget will be shared by default because the dashboard is shared",actionTitle:"Actions for Widget",criteriaTitle:"Criteria for Widget",modeTitle:"Mode",criteriaSelectTitle:"Select Criteria",actionSelectTitle:"Select Actions",modeSelectTitle:"Select Mode",previewDefault:"Select widget template and filter to see preview",previewNotAvailable:"Preview is not available for this type of widget template",previewNoFilter:"Select a filter to see preview",previewNoTemplate:"Select widget template to see preview",previewDataNotAvailable:"Can't get data for preview.",incomplete:"Undone",complete:"Compete"},dialogHeader:{deleteFilter:"DELETE FILTER",deleteProject:"DELETE PROJECT",deleteEmailRule:"DELETE RULE",deleteUser:"DELETE USER",deleteImage:"DELETE IMAGE",dashboardDelete:"DELETE DASHBOARD",deletedWidget:"DELETE WIDGET",deleteBts:"Delete Project",unAssignMember:"UNASSIGN USER",changeRole:"CHANGE ROLE",sureToRemoveWidget:"REMOVE WIDGET",titleEditDefectType:"Edit Defect Type",titleResetDefectColors:"Reset defect colors",titleDeleteDefectType:"Delete defect type",forceFinish:"Force Finish",moveToDebug:"Move to debug",moveToAllLaunches:"Move to all launches",editLaunch:"Edit Launch",editDashboard:"Edit Dashboard",editTestItem:"Edit Test Item",changePassword:"Change Password",editUserInfo:"Edit Personal Information",addDashboard:"Add New Dashboard",regenerateUUID:"REGENERATE UUID",deleteOrg:"Delete GitHub organization",logAttachment:"ATTACHMENT"},dialog:{regenerateUUID:"Regenerate UUID",unableSelectForMerge:"Error: Unable to select launch for merge!",createNewDashboard:"Create new Dashboard",dashboardSettings:"Dashboard settings",deleteFilter:"Are you sure you want to delete the filter <b>'%%%'</b>?",deleteProject:"Are you sure you want to delete the project <b>'%%%'</b>?",deleteEmailRule:"Are you sure you want to remove notification rule?",deleteEmailRuleBtn:"Remove",unAssignMember:"Are you sure you want to unassign user <b>'%%%'</b> from the project <b>'%%%'</b>?",unAssignMemberBtn:"Unassign",deleteUser:"Are you sure you want to delete user <b>'%%%'<b>?",changeRole:"Are you sure you want to change the account role for the <b>'%%%'</b>?",changeRoleBtn:"Change",deleteImage:"Are you sure you want to delete profile photo?",deleteBts:"Are you sure you want to remove %%% project <b>'%%%'</b> from project settings?",dashboardDelete:"Are you sure want to delete dashboard <b>'%%%'</b>?",deletedWidget:"Are you sure you want to remove widget <b>'%%%'</b>?",deleteBtsBtn:"Remove",dashboardDeleteBtn:"Remove",sureToRemoveWidget:"Are you sure you want to remove %%% <b>'%%%'</b>?",launchEditor:"Edit launch",itemEditor:"Edit item",defectEditor:"Edit defect",choseDefectType:"Choose Defect Type",commentForDefect:"Leave Comment to Defect Type",defectType:"Defect Type",mergeLaunches:"Merge Launches",postBug:"Post bug",loadBug:"Load bug",launchDetails:"Launch Details",testItemDetails:"Item Details",launchDescrPlaceholder:"Enter Launch Description",testItemDescrPlaceholder:"Enter Item Description",launchTagPlaceholder:"Enter Tag Name",editFilter:"Edit filter",addFilter:"Add filter",moveLaunch:"Are you sure you want to move %%% to %%%?",filterOptions:"Filter Options",msgDeleteItems:"In case of delete the %%%, all related data will be deleted. Are you sure you want to delete %%%?",msgDeleteDefectType:"I am sure I want to remove custom defect type",msgDeleteProject:"I am sure I want to delete project",msgDeleteOrg:"In case of delete the GitHub organization, users from this organization could not be able to login Report Portal. Are you sure, you want to delete selected organization?",deleteOrg:"I am sure I want to delete organization",msgResetColorsDefectType:"Are you sure you want to reset custom defect's colors to default?",msgMessageTop:"In case of delete custom defect, all investigated as <strong>'%%%'</strong> defects will be marked as <strong>'%%%'</strong>"},time:{day:"day",days:"days",hour:"hour",hours:"hours",minute:"minute",minutes:"minutes",seconds:"seconds",second:"second"},activity:{email:"E-mail notifications",keepLogs:"Keep logs",keepScreenshots:"Keep screenshots",auto_analyze:"Auto Analysis",launchInactivity:"Launch inactivity timeout"},permissionMap:{owner:"owner",notOwner:"not owner",actionRole:"Action\\Project Role",accessToManagementSystem:"Have access to Management System",readData:"Read data",seeMembers:"See list of project members",userFromProject:"user to/from the project",assign:"Un/Assign",internal:"internal",user:"user",changeUserRole:"Change users role on a project",createProject:"Create project",updateSettings:"Update project settings",seeSettings:"See Project Settings",deleteProject:"Delete project",deleteLaunch:"Delete Launch",deleteTests:"Delete Test Item",deleteLog:"Delete Log",unSlashAssign:"Un/Assign",userToFrom:"user to/from the project",editOwnAccount1:"Edit own account",editOwnAccount2:"(not implemented yet)",forceFinishLaunch:"Force finish launch",startAnalysis:"Start Analysis manually",deleteTestItem:"Delete Test Item and Log",moveToDebug:"Move launch to debug/default mode",mergeLaunches:"Merge launches",workWithFiltersEtc:"Work with filters, widgets, dashboards (create, edit, delete, share)",oneAttention:"Action can be done for a user with similar and lower role only (E.g. Lead cannot change role for a Project Manager).",twoAttention:"Action can be done for a user with similar and lower role only (E.g. Lead cannot assign/unassign a Project Manager) and for user with Administrator account role.",threeAttention:"Action can be done for a Internal user."}}}),function(e,t){typeof exports=="object"&&typeof module!="undefined"?module.exports=t():typeof define=="function"&&define.amd?define("moment",t):e.moment=t()}(this,function(){"use strict";function t(){return e.apply(null,arguments)}function n(t){e=t}function r(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(e){return Object.prototype.toString.call(e)==="[object Array]"}function s(e){return Object.prototype.toString.call(e)==="[object Date]"||e instanceof Date}function o(e,t){var n=[],r;for(r=0;r<e.length;++r)n.push(t(e[r],r));return n}function u(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e,t){for(var n in t)u(t,n)&&(e[n]=t[n]);return u(t,"toString")&&(e.toString=t.toString),u(t,"valueOf")&&(e.valueOf=t.valueOf),e}function f(e,t,n,r){return pn(e,t,n,r,!0).utc()}function l(e){return e._isValid==null&&(e._isValid=!isNaN(e._d.getTime())&&e._pf.overflow<0&&!e._pf.empty&&!e._pf.invalidMonth&&!e._pf.nullInput&&!e._pf.invalidFormat&&!e._pf.userInvalidated,e._strict&&(e._isValid=e._isValid&&e._pf.charsLeftOver===0&&e._pf.unusedTokens.length===0&&e._pf.bigHour===undefined)),e._isValid}function c(e){var t=f(NaN);return e!=null?a(t._pf,e):t._pf.userInvalidated=!0,t}function p(e,t){var n,r,i;typeof t._isAMomentObject!="undefined"&&(e._isAMomentObject=t._isAMomentObject),typeof t._i!="undefined"&&(e._i=t._i),typeof t._f!="undefined"&&(e._f=t._f),typeof t._l!="undefined"&&(e._l=t._l),typeof t._strict!="undefined"&&(e._strict=t._strict),typeof t._tzm!="undefined"&&(e._tzm=t._tzm),typeof t._isUTC!="undefined"&&(e._isUTC=t._isUTC),typeof t._offset!="undefined"&&(e._offset=t._offset),typeof t._pf!="undefined"&&(e._pf=t._pf),typeof t._locale!="undefined"&&(e._locale=t._locale);if(h.length>0)for(n in h)r=h[n],i=t[r],typeof i!="undefined"&&(e[r]=i);return e}function v(e){p(this,e),this._d=new Date(+e._d),d===!1&&(d=!0,t.updateOffset(this),d=!1)}function m(e){return e instanceof v||e!=null&&u(e,"_isAMomentObject")}function g(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(t>=0?n=Math.floor(t):n=Math.ceil(t)),n}function y(e,t,n){var r=Math.min(e.length,t.length),i=Math.abs(e.length-t.length),s=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&g(e[o])!==g(t[o]))&&s++;return s+i}function b(){}function S(e){return e?e.toLowerCase().replace("_","-"):e}function x(e){var t=0,n,r,i,s;while(t<e.length){s=S(e[t]).split("-"),n=s.length,r=S(e[t+1]),r=r?r.split("-"):null;while(n>0){i=T(s.slice(0,n).join("-"));if(i)return i;if(r&&r.length>=n&&y(s,r,!0)>=n-1)break;n--}t++}return null}function T(e){var t=null;if(!w[e]&&typeof module!="undefined"&&module&&module.exports)try{t=E._abbr,require("./locale/"+e),N(t)}catch(n){}return w[e]}function N(e,t){var n;return e&&(typeof t=="undefined"?n=k(e):n=C(e,t),n&&(E=n)),E._abbr}function C(e,t){return t!==null?(t.abbr=e,w[e]||(w[e]=new b),w[e].set(t),N(e),w[e]):(delete w[e],null)}function k(e){var t;e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr);if(!e)return E;if(!i(e)){t=T(e);if(t)return t;e=[e]}return x(e)}function A(e,t){var n=e.toLowerCase();L[n]=L[n+"s"]=L[t]=e}function O(e){return typeof e=="string"?L[e]||L[e.toLowerCase()]:undefined}function M(e){var t={},n,r;for(r in e)u(e,r)&&(n=O(r),n&&(t[n]=e[r]));return t}function _(e,n){return function(r){return r!=null?(P(this,e,r),t.updateOffset(this,n),this):D(this,e)}}function D(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function P(e,t,n){return e._d["set"+(e._isUTC?"UTC":"")+t](n)}function H(e,t){var n;if(typeof e=="object")for(n in e)this.set(n,e[n]);else{e=O(e);if(typeof this[e]=="function")return this[e](t)}return this}function B(e,t,n){var r=""+Math.abs(e),i=e>=0;while(r.length<t)r="0"+r;return(i?n?"+":"":"-")+r}function R(e,t,n,r){var i=r;typeof r=="string"&&(i=function(){return this[r]()}),e&&(q[e]=i),t&&(q[t[0]]=function(){return B(i.apply(this,arguments),t[1],t[2])}),n&&(q[n]=function(){return this.localeData().ordinal(i.apply(this,arguments),e)})}function U(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function z(e){var t=e.match(j),n,r;for(n=0,r=t.length;n<r;n++)q[t[n]]?t[n]=q[t[n]]:t[n]=U(t[n]);return function(i){var s="";for(n=0;n<r;n++)s+=t[n]instanceof Function?t[n].call(i,e):t[n];return s}}function W(e,t){return e.isValid()?(t=X(t,e.localeData()),I[t]||(I[t]=z(t)),I[t](e)):e.localeData().invalidDate()}function X(e,t){function r(e){return t.longDateFormat(e)||e}var n=5;F.lastIndex=0;while(n>=0&&F.test(e))e=e.replace(F,r),F.lastIndex=0,n-=1;return e}function ut(e,t,n){ot[e]=typeof t=="function"?t:function(e){return e&&n?n:t}}function at(e,t){return u(ot,e)?ot[e](t._strict,t._locale):new RegExp(ft(e))}function ft(e){return e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function ct(e,t){var n,r=t;typeof e=="string"&&(e=[e]),typeof t=="number"&&(r=function(e,n){n[t]=g(e)});for(n=0;n<e.length;n++)lt[e[n]]=r}function ht(e,t){ct(e,function(e,n,r,i){r._w=r._w||{},t(e,r._w,r,i)})}function pt(e,t,n){t!=null&&u(lt,e)&&lt[e](t,n._a,n,e)}function Et(e,t){return(new Date(Date.UTC(e,t+1,0))).getUTCDate()}function xt(e){return this._months[e.month()]}function Nt(e){return this._monthsShort[e.month()]}function Ct(e,t,n){var r,i,s;this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]);for(r=0;r<12;r++){i=f([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(s="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(s.replace(".",""),"i"));if(n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function kt(e,t){var n;if(typeof t=="string"){t=e.localeData().monthsParse(t);if(typeof t!="number")return e}return n=Math.min(e.date(),Et(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function Lt(e){return e!=null?(kt(this,e),t.updateOffset(this,!0),this):D(this,"Month")}function At(){return Et(this.year(),this.month())}function Ot(e){var t,n=e._a;return n&&e._pf.overflow===-2&&(t=n[vt]<0||n[vt]>11?vt:n[mt]<1||n[mt]>Et(n[dt],n[vt])?mt:n[gt]<0||n[gt]>24||n[gt]===24&&(n[yt]!==0||n[bt]!==0||n[wt]!==0)?gt:n[yt]<0||n[yt]>59?yt:n[bt]<0||n[bt]>59?bt:n[wt]<0||n[wt]>999?wt:-1,e._pf._overflowDayOfYear&&(t<dt||t>mt)&&(t=mt),e._pf.overflow=t),e}function Mt(e){t.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function _t(e,t){var n=!0;return a(function(){return n&&(Mt(e),n=!1),t.apply(this,arguments)},t)}function Pt(e,t){Dt[e]||(Mt(t),Dt[e]=!0)}function It(e){var t,n,r=e._i,i=Ht.exec(r);if(i){e._pf.iso=!0;for(t=0,n=Bt.length;t<n;t++)if(Bt[t][1].exec(r)){e._f=Bt[t][0]+(i[6]||" ");break}for(t=0,n=jt.length;t<n;t++)if(jt[t][1].exec(r)){e._f+=jt[t][0];break}r.match(rt)&&(e._f+="Z"),un(e)}else e._isValid=!1}function qt(e){var n=Ft.exec(e._i);if(n!==null){e._d=new Date(+n[1]);return}It(e),e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))}function Rt(e,t,n,r,i,s,o){var u=new Date(e,t,n,r,i,s,o);return e<1970&&u.setFullYear(e),u}function Ut(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function zt(e){return Wt(e)?366:365}function Wt(e){return e%4===0&&e%100!==0||e%400===0}function Vt(){return Wt(this.year())}function $t(e,t,n){var r=n-t,i=n-e.day(),s;return i>r&&(i-=7),i<r-7&&(i+=7),s=dn(e).add(i,"d"),{week:Math.ceil(s.dayOfYear()/7),year:s.year()}}function Jt(e){return $t(e,this._week.dow,this._week.doy).week}function Qt(){return this._week.dow}function Gt(){return this._week.doy}function Yt(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function Zt(e){var t=$t(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}function en(e,t,n,r,i){var s=Ut(e,0,1).getUTCDay(),o,u;return s=s===0?7:s,n=n!=null?n:i,o=i-s+(s>r?7:0)-(s<i?7:0),u=7*(t-1)+(n-i)+o+1,{year:u>0?e:e-1,dayOfYear:u>0?u:zt(e-1)+u}}function tn(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}function nn(e,t,n){return e!=null?e:t!=null?t:n}function rn(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function sn(e){var t,n,r=[],i,s;if(e._d)return;i=rn(e),e._w&&e._a[mt]==null&&e._a[vt]==null&&on(e),e._dayOfYear&&(s=nn(e._a[dt],i[dt]),e._dayOfYear>zt(s)&&(e._pf._overflowDayOfYear=!0),n=Ut(s,0,e._dayOfYear),e._a[vt]=n.getUTCMonth(),e._a[mt]=n.getUTCDate());for(t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=i[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[gt]===24&&e._a[yt]===0&&e._a[bt]===0&&e._a[wt]===0&&(e._nextDay=!0,e._a[gt]=0),e._d=(e._useUTC?Ut:Rt).apply(null,r),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[gt]=24)}function on(e){var t,n,r,i,s,o,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(s=1,o=4,n=nn(t.GG,e._a[dt],$t(dn(),1,4).year),r=nn(t.W,1),i=nn(t.E,1)):(s=e._locale._week.dow,o=e._locale._week.doy,n=nn(t.gg,e._a[dt],$t(dn(),s,o).year),r=nn(t.w,1),t.d!=null?(i=t.d,i<s&&++r):t.e!=null?i=t.e+s:i=s),u=en(n,r,i,o,s),e._a[dt]=u.year,e._dayOfYear=u.dayOfYear}function un(e){if(e._f===t.ISO_8601){It(e);return}e._a=[],e._pf.empty=!0;var n=""+e._i,r,i,s,o,u,a=n.length,f=0;s=X(e._f,e._locale).match(j)||[];for(r=0;r<s.length;r++)o=s[r],i=(n.match(at(o,e))||[])[0],i&&(u=n.substr(0,n.indexOf(i)),u.length>0&&e._pf.unusedInput.push(u),n=n.slice(n.indexOf(i)+i.length),f+=i.length),q[o]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(o),pt(o,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=a-f,n.length>0&&e._pf.unusedInput.push(n),e._pf.bigHour===!0&&e._a[gt]<=12&&(e._pf.bigHour=undefined),e._a[gt]=an(e._locale,e._a[gt],e._meridiem),sn(e),Ot(e)}function an(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):e.isPM!=null?(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0),t):t}function fn(e){var t,n,i,s,o;if(e._f.length===0){e._pf.invalidFormat=!0,e._d=new Date(NaN);return}for(s=0;s<e._f.length;s++){o=0,t=p({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._pf=r(),t._f=e._f[s],un(t);if(!l(t))continue;o+=t._pf.charsLeftOver,o+=t._pf.unusedTokens.length*10,t._pf.score=o;if(i==null||o<i)i=o,n=t}a(e,n||t)}function ln(e){if(e._d)return;var t=M(e._i);e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],sn(e)}function cn(e){var t=e._i,n=e._f,r;return e._locale=e._locale||k(e._l),t===null||n===undefined&&t===""?c({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),m(t)?new v(Ot(t)):(i(n)?fn(e):n?un(e):hn(e),r=new v(Ot(e)),r._nextDay&&(r.add(1,"d"),r._nextDay=undefined),r))}function hn(e){var n=e._i;n===undefined?e._d=new Date:s(n)?e._d=new Date(+n):typeof n=="string"?qt(e):i(n)?(e._a=o(n.slice(0),function(e){return parseInt(e,10)}),sn(e)):typeof n=="object"?ln(e):typeof n=="number"?e._d=new Date(n):t.createFromInputFallback(e)}function pn(e,t,n,i,s){var o={};return typeof n=="boolean"&&(i=n,n=undefined),o._isAMomentObject=!0,o._useUTC=o._isUTC=s,o._l=n,o._i=e,o._f=t,o._strict=i,o._pf=r(),cn(o)}function dn(e,t,n,r){return pn(e,t,n,r,!1)}function gn(e,t){var n,r;t.length===1&&i(t[0])&&(t=t[0]);if(!t.length)return dn();n=t[0];for(r=1;r<t.length;++r)t[r][e](n)&&(n=t[r]);return n}function yn(){var e=[].slice.call(arguments,0);return gn("isBefore",e)}function bn(){var e=[].slice.call(arguments,0);return gn("isAfter",e)}function wn(e){var t=M(e),n=t.year||0,r=t.quarter||0,i=t.month||0,s=t.week||0,o=t.day||0,u=t.hour||0,a=t.minute||0,f=t.second||0,l=t.millisecond||0;this._milliseconds=+l+f*1e3+a*6e4+u*36e5,this._days=+o+s*7,this._months=+i+r*3+n*12,this._data={},this._locale=k(),this._bubble()}function En(e){return e instanceof wn}function Sn(e,t){R(e,0,0,function(){var e=this.utcOffset(),n="+";return e<0&&(e=-e,n="-"),n+B(~~(e/60),2)+t+B(~~e%60,2)})}function Tn(e){var t=(e||"").match(rt)||[],n=t[t.length-1]||[],r=(n+"").match(xn)||["-",0,0],i=+(r[1]*60)+g(r[2]);return r[0]==="+"?i:-i}function Nn(e,n){var r,i;return n._isUTC?(r=n.clone(),i=(m(e)||s(e)?+e:+dn(e))- +r,r._d.setTime(+r._d+i),t.updateOffset(r,!1),r):dn(e).local()}function Cn(e){return-Math.round(e._d.getTimezoneOffset()/15)*15}function kn(e,n){var r=this._offset||0,i;return e!=null?(typeof e=="string"&&(e=Tn(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&n&&(i=Cn(this)),this._offset=e,this._isUTC=!0,i!=null&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?Xn(this,qn(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Cn(this)}function Ln(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function An(e){return this.utcOffset(0,e)}function On(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(Cn(this),"m")),this}function Mn(){return this._tzm?this.utcOffset(this._tzm):typeof this._i=="string"&&this.utcOffset(Tn(this._i)),this}function _n(e){return e?e=dn(e).utcOffset():e=0,(this.utcOffset()-e)%60===0}function Dn(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Pn(){if(this._a){var e=this._isUTC?f(this._a):dn(this._a);return this.isValid()&&y(this._a,e.toArray())>0}return!1}function Hn(){return!this._isUTC}function Bn(){return this._isUTC}function jn(){return this._isUTC&&this._offset===0}function qn(e,t){var n=e,r=null,i,s,o;return En(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:typeof e=="number"?(n={},t?n[t]=e:n.milliseconds=e):(r=Fn.exec(e))?(i=r[1]==="-"?-1:1,n={y:0,d:g(r[mt])*i,h:g(r[gt])*i,m:g(r[yt])*i,s:g(r[bt])*i,ms:g(r[wt])*i}):(r=In.exec(e))?(i=r[1]==="-"?-1:1,n={y:Rn(r[2],i),M:Rn(r[3],i),d:Rn(r[4],i),h:Rn(r[5],i),m:Rn(r[6],i),s:Rn(r[7],i),w:Rn(r[8],i)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=zn(dn(n.from),dn(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),s=new wn(n),En(e)&&u(e,"_locale")&&(s._locale=e._locale),s}function Rn(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function Un(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t- +e.clone().add(n.months,"M"),n}function zn(e,t){var n;return t=Nn(t,e),e.isBefore(t)?n=Un(e,t):(n=Un(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Wn(e,t){return function(n,r){var i,s;return r!==null&&!isNaN(+r)&&(Pt(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),s=n,n=r,r=s),n=typeof n=="string"?+n:n,i=qn(n,r),Xn(this,i,e),this}}function Xn(e,n,r,i){var s=n._milliseconds,o=n._days,u=n._months;i=i==null?!0:i,s&&e._d.setTime(+e._d+s*r),o&&P(e,"Date",D(e,"Date")+o*r),u&&kt(e,D(e,"Month")+u*r),i&&t.updateOffset(e,o||u)}function Jn(e){var t=e||dn(),n=Nn(t,this).startOf("day"),r=this.diff(n,"days",!0),i=r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this,dn(t)))}function Kn(){return new v(this)}function Qn(e,t){var n;return t=O(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=m(e)?e:dn(e),+this>+e):(n=m(e)?+e:+dn(e),n<+this.clone().startOf(t))}function Gn(e,t){var n;return t=O(typeof t!="undefined"?t:"millisecond"),t==="millisecond"?(e=m(e)?e:dn(e),+this<+e):(n=m(e)?+e:+dn(e),+this.clone().endOf(t)<n)}function Yn(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)}function Zn(e,t){var n;return t=O(t||"millisecond"),t==="millisecond"?(e=m(e)?e:dn(e),+this===+e):(n=+dn(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))}function er(e){return e<0?Math.ceil(e):Math.floor(e)}function tr(e,t,n){var r=Nn(e,this),i=(r.utcOffset()-this.utcOffset())*6e4,s,o;return t=O(t),t==="year"||t==="month"||t==="quarter"?(o=nr(this,r),t==="quarter"?o/=3:t==="year"&&(o/=12)):(s=this-r,o=t==="second"?s/1e3:t==="minute"?s/6e4:t==="hour"?s/36e5:t==="day"?(s-i)/864e5:t==="week"?(s-i)/6048e5:s),n?o:er(o)}function nr(e,t){var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),i,s;return t-r<0?(i=e.clone().add(n-1,"months"),s=(t-r)/(r-i)):(i=e.clone().add(n+1,"months"),s=(t-r)/(i-r)),-(n+s)}function rr(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function ir(){var e=this.clone().utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():W(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):W(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function sr(e){var n=W(this,e||t.defaultFormat);return this.localeData().postformat(n)}function or(e,t){return qn({to:this,from:e}).locale(this.locale()).humanize(!t)}function ur(e){return this.from(dn(),e)}function ar(e){var t;return e===undefined?this._locale._abbr:(t=k(e),t!=null&&(this._locale=t),this)}function lr(){return this._locale}function cr(e){e=O(e);switch(e){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return e==="week"&&this.weekday(0),e==="isoWeek"&&this.isoWeekday(1),e==="quarter"&&this.month(Math.floor(this.month()/3)*3),this}function hr(e){return e=O(e),e===undefined||e==="millisecond"?this:this.startOf(e).add(1,e==="isoWeek"?"week":e).subtract(1,"ms")}function pr(){return+this._d-(this._offset||0)*6e4}function dr(){return Math.floor(+this/1e3)}function vr(){return this._offset?new Date(+this):this._d}function mr(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function gr(){return l(this)}function yr(){return a({},this._pf)}function br(){return this._pf.overflow}function wr(e,t){R(0,[e,e.length],0,t)}function Er(e,t,n){return $t(dn([e,11,31+t-n]),t,n).week}function Sr(e){var t=$t(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return e==null?t:this.add(e-t,"y")}function xr(e){var t=$t(this,1,4).year;return e==null?t:this.add(e-t,"y")}function Tr(){return Er(this.year(),1,4)}function Nr(){var e=this.localeData()._week;return Er(this.year(),e.dow,e.doy)}function Cr(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}function Lr(e,t){if(typeof e=="string")if(!isNaN(e))e=parseInt(e,10);else{e=t.weekdaysParse(e);if(typeof e!="number")return null}return e}function Or(e){return this._weekdays[e.day()]}function _r(e){return this._weekdaysShort[e.day()]}function Pr(e){return this._weekdaysMin[e.day()]}function Hr(e){var t,n,r;this._weekdaysParse||(this._weekdaysParse=[]);for(t=0;t<7;t++){this._weekdaysParse[t]||(n=dn([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i"));if(this._weekdaysParse[t].test(e))return t}}function Br(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=Lr(e,this.localeData()),this.add(e-t,"d")):t}function jr(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function Fr(e){return e==null?this.day()||7:this.day(this.day()%7?e:e-7)}function Ir(e,t){R(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function qr(e,t){return t._meridiemParse}function Rr(e){return(e+"").toLowerCase().charAt(0)==="p"}function zr(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}function $r(e){R(0,[e,3],0,"millisecond")}function Kr(){return this._isUTC?"UTC":""}function Qr(){return this._isUTC?"Coordinated Universal Time":""}function Zr(e){return dn(e*1e3)}function ei(){return dn.apply(null,arguments).parseZone()}function ni(e,t,n){var r=this._calendar[e];return typeof r=="function"?r.call(t,n):r}function ii(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t}function oi(){return this._invalidDate}function fi(e){return this._ordinal.replace("%d",e)}function li(e){return e}function hi(e,t,n,r){var i=this._relativeTime[n];return typeof i=="function"?i(e,t,n,r):i.replace(/%d/i,e)}function pi(e,t){var n=this._relativeTime[e>0?"future":"past"];return typeof n=="function"?n(t):n.replace(/%s/i,t)}function di(e){var t,n;for(n in e)t=e[n],typeof t=="function"?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function mi(e,t,n,r){var i=k(),s=f().set(r,t);return i[n](s,e)}function gi(e,t,n,r,i){typeof e=="number"&&(t=e,e=undefined),e=e||"";if(t!=null)return mi(e,t,n,i);var s,o=[];for(s=0;s<r;s++)o[s]=mi(e,s,n,i);return o}function yi(e,t){return gi(e,t,"months",12,"month")}function bi(e,t){return gi(e,t,"monthsShort",12,"month")}function wi(e,t){return gi(e,t,"weekdays",7,"day")}function Ei(e,t){return gi(e,t,"weekdaysShort",7,"day")}function Si(e,t){return gi(e,t,"weekdaysMin",7,"day")}function Ti(){var e=this._data;return this._milliseconds=xi(this._milliseconds),this._days=xi(this._days),this._months=xi(this._months),e.milliseconds=xi(e.milliseconds),e.seconds=xi(e.seconds),e.minutes=xi(e.minutes),e.hours=xi(e.hours),e.months=xi(e.months),e.years=xi(e.years),this}function Ni(e,t,n,r){var i=qn(t,n);return e._milliseconds+=r*i._milliseconds,e._days+=r*i._days,e._months+=r*i._months,e._bubble()}function Ci(e,t){return Ni(this,e,t,1)}function ki(e,t){return Ni(this,e,t,-1)}function Li(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,i,s,o,u=0;return r.milliseconds=e%1e3,i=er(e/1e3),r.seconds=i%60,s=er(i/60),r.minutes=s%60,o=er(s/60),r.hours=o%24,t+=er(o/24),u=er(Ai(t)),t-=er(Oi(u)),n+=er(t/30),t%=30,u+=er(n/12),n%=12,r.days=t,r.months=n,r.years=u,this}function Ai(e){return e*400/146097}function Oi(e){return e*146097/400}function Mi(e){var t,n,r=this._milliseconds;e=O(e);if(e==="month"||e==="year")return t=this._days+r/864e5,n=this._months+Ai(t)*12,e==="month"?n:n/12;t=this._days+Math.round(Oi(this._months/12));switch(e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*24*60+r/6e4;case"second":return t*24*60*60+r/1e3;case"millisecond":return Math.floor(t*24*60*60*1e3)+r;default:throw new Error("Unknown unit "+e)}}function _i(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+g(this._months/12)*31536e6}function Di(e){return function(){return this.as(e)}}function Ui(e){return e=O(e),this[e+"s"]()}function zi(e){return function(){return this._data[e]}}function Gi(){return er(this.days()/7)}function es(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function ts(e,t,n){var r=qn(e).abs(),i=Yi(r.as("s")),s=Yi(r.as("m")),o=Yi(r.as("h")),u=Yi(r.as("d")),a=Yi(r.as("M")),f=Yi(r.as("y")),l=i<Zi.s&&["s",i]||s===1&&["m"]||s<Zi.m&&["mm",s]||o===1&&["h"]||o<Zi.h&&["hh",o]||u===1&&["d"]||u<Zi.d&&["dd",u]||a===1&&["M"]||a<Zi.M&&["MM",a]||f===1&&["y"]||["yy",f];return l[2]=t,l[3]=+e>0,l[4]=n,es.apply(null,l)}function ns(e,t){return Zi[e]===undefined?!1:t===undefined?Zi[e]:(Zi[e]=t,!0)}function rs(e){var t=this.localeData(),n=ts(this,!e,t);return e&&(n=t.pastFuture(+this,n)),t.postformat(n)}function ss(){var e=is(this.years()),t=is(this.months()),n=is(this.days()),r=is(this.hours()),i=is(this.minutes()),s=is(this.seconds()+this.milliseconds()/1e3),o=this.asSeconds();return o?(o<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||s?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(s?s+"S":""):"P0D"}var e,h=t.momentProperties=[],d=!1,w={},E,L={},j=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,F=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,I={},q={},V=/\d/,$=/\d\d/,J=/\d{3}/,K=/\d{4}/,Q=/[+-]?\d{6}/,G=/\d\d?/,Y=/\d{1,3}/,Z=/\d{1,4}/,et=/[+-]?\d{1,6}/,tt=/\d+/,nt=/[+-]?\d+/,rt=/Z|[+-]\d\d:?\d\d/gi,it=/[+-]?\d+(\.\d{1,3})?/,st=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,ot={},lt={},dt=0,vt=1,mt=2,gt=3,yt=4,bt=5,wt=6;R("M",["MM",2],"Mo",function(){return this.month()+1}),R("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),R("MMMM",0,0,function(e){return this.localeData().months(this,e)}),A("month","M"),ut("M",G),ut("MM",G,$),ut("MMM",st),ut("MMMM",st),ct(["M","MM"],function(e,t){t[vt]=g(e)-1}),ct(["MMM","MMMM"],function(e,t,n,r){var i=n._locale.monthsParse(e,r,n._strict);i!=null?t[vt]=i:n._pf.invalidMonth=e});var St="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Tt="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),Dt={};t.suppressDeprecationWarnings=!1;var Ht=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Bt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],jt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ft=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=_t("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),R(0,["YY",2],0,function(){return this.year()%100}),R(0,["YYYY",4],0,"year"),R(0,["YYYYY",5],0,"year"),R(0,["YYYYYY",6,!0],0,"year"),A("year","y"),ut("Y",nt),ut("YY",G,$),ut("YYYY",Z,K),ut("YYYYY",et,Q),ut("YYYYYY",et,Q),ct(["YYYY","YYYYY","YYYYYY"],dt),ct("YY",function(e,n){n[dt]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(e){return g(e)+(g(e)>68?1900:2e3)};var Xt=_("FullYear",!1);R("w",["ww",2],"wo","week"),R("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),ut("w",G),ut("ww",G,$),ut("W",G),ut("WW",G,$),ht(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=g(e)});var Kt={dow:0,doy:6};R("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),ut("DDD",Y),ut("DDDD",J),ct(["DDD","DDDD"],function(e,t,n){n._dayOfYear=g(e)}),t.ISO_8601=function(){};var vn=_t("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var e=dn.apply(null,arguments);return e<this?this:e}),mn=_t("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var e=dn.apply(null,arguments);return e>this?this:e});Sn("Z",":"),Sn("ZZ",""),ut("Z",rt),ut("ZZ",rt),ct(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=Tn(e)});var xn=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Fn=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,In=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;qn.fn=wn.prototype;var Vn=Wn(1,"add"),$n=Wn(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var fr=_t("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===undefined?this.localeData():this.locale(e)});R(0,["gg",2],0,function(){return this.weekYear()%100}),R(0,["GG",2],0,function(){return this.isoWeekYear()%100}),wr("gggg","weekYear"),wr("ggggg","weekYear"),wr("GGGG","isoWeekYear"),wr("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),ut("G",nt),ut("g",nt),ut("GG",G,$),ut("gg",G,$),ut("GGGG",Z,K),ut("gggg",Z,K),ut("GGGGG",et,Q),ut("ggggg",et,Q),ht(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=g(e)}),ht(["gg","GG"],function(e,n,r,i){n[i]=t.parseTwoDigitYear(e)}),R("Q",0,0,"quarter"),A("quarter","Q"),ut("Q",V),ct("Q",function(e,t){t[vt]=(g(e)-1)*3}),R("D",["DD",2],"Do","date"),A("date","D"),ut("D",G),ut("DD",G,$),ut("Do",function(e,t){return e?t._ordinalParse:t._ordinalParseLenient}),ct(["D","DD"],mt),ct("Do",function(e,t){t[mt]=g(e.match(G)[0],10)});var kr=_("Date",!0);R("d",0,"do","day"),R("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),R("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),R("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),R("e",0,0,"weekday"),R("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),ut("d",G),ut("e",G),ut("E",G),ut("dd",st),ut("ddd",st),ut("dddd",st),ht(["dd","ddd","dddd"],function(e,t,n){var r=n._locale.weekdaysParse(e);r!=null?t.d=r:n._pf.invalidWeekday=e}),ht(["d","e","E"],function(e,t,n,r){t[r]=g(e)});var Ar="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Mr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Dr="Su_Mo_Tu_We_Th_Fr_Sa".split("_");R("H",["HH",2],0,"hour"),R("h",["hh",2],0,function(){return this.hours()%12||12}),Ir("a",!0),Ir("A",!1),A("hour","h"),ut("a",qr),ut("A",qr),ut("H",G),ut("h",G),ut("HH",G,$),ut("hh",G,$),ct(["H","HH"],gt),ct(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e}),ct(["h","hh"],function(e,t,n){t[gt]=g(e),n._pf.bigHour=!0});var Ur=/[ap]\.?m?\.?/i,Wr=_("Hours",!0);R("m",["mm",2],0,"minute"),A("minute","m"),ut("m",G),ut("mm",G,$),ct(["m","mm"],yt);var Xr=_("Minutes",!1);R("s",["ss",2],0,"second"),A("second","s"),ut("s",G),ut("ss",G,$),ct(["s","ss"],bt);var Vr=_("Seconds",!1);R("S",0,0,function(){return~~(this.millisecond()/100)}),R(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),$r("SSS"),$r("SSSS"),A("millisecond","ms"),ut("S",Y,V),ut("SS",Y,$),ut("SSS",Y,J),ut("SSSS",tt),ct(["S","SS","SSS","SSSS"],function(e,t){t[wt]=g(("0."+e)*1e3)});var Jr=_("Milliseconds",!1);R("z",0,0,"zoneAbbr"),R("zz",0,0,"zoneName");var Gr=v.prototype;Gr.add=Vn,Gr.calendar=Jn,Gr.clone=Kn,Gr.diff=tr,Gr.endOf=hr,Gr.format=sr,Gr.from=or,Gr.fromNow=ur,Gr.get=H,Gr.invalidAt=br,Gr.isAfter=Qn,Gr.isBefore=Gn,Gr.isBetween=Yn,Gr.isSame=Zn,Gr.isValid=gr,Gr.lang=fr,Gr.locale=ar,Gr.localeData=lr,Gr.max=mn,Gr.min=vn,Gr.parsingFlags=yr,Gr.set=H,Gr.startOf=cr,Gr.subtract=$n,Gr.toArray=mr,Gr.toDate=vr,Gr.toISOString=ir,Gr.toJSON=ir,Gr.toString=rr,Gr.unix=dr,Gr.valueOf=pr,Gr.year=Xt,Gr.isLeapYear=Vt,Gr.weekYear=Sr,Gr.isoWeekYear=xr,Gr.quarter=Gr.quarters=Cr,Gr.month=Lt,Gr.daysInMonth=At,Gr.week=Gr.weeks=Yt,Gr.isoWeek=Gr.isoWeeks=Zt,Gr.weeksInYear=Nr,Gr.isoWeeksInYear=Tr,Gr.date=kr,Gr.day=Gr.days=Br,Gr.weekday=jr,Gr.isoWeekday=Fr,Gr.dayOfYear=tn,Gr.hour=Gr.hours=Wr,Gr.minute=Gr.minutes=Xr,Gr.second=Gr.seconds=Vr,Gr.millisecond=Gr.milliseconds=Jr,Gr.utcOffset=kn,Gr.utc=An,Gr.local=On,Gr.parseZone=Mn,Gr.hasAlignedHourOffset=_n,Gr.isDST=Dn,Gr.isDSTShifted=Pn,Gr.isLocal=Hn,Gr.isUtcOffset=Bn,Gr.isUtc=jn,Gr.isUTC=jn,Gr.zoneAbbr=Kr,Gr.zoneName=Qr,Gr.dates=_t("dates accessor is deprecated. Use date instead.",kr),Gr.months=_t("months accessor is deprecated. Use month instead",Lt),Gr.years=_t("years accessor is deprecated. Use year instead",Xt),Gr.zone=_t("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Ln);var Yr=Gr,ti={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},ri={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},si="Invalid date",ui="%d",ai=/\d{1,2}/,ci={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},vi=b.prototype;vi._calendar=ti,vi.calendar=ni,vi._longDateFormat=ri,vi.longDateFormat=ii,vi._invalidDate=si,vi.invalidDate=oi,vi._ordinal=ui,vi.ordinal=fi,vi._ordinalParse=ai,vi.preparse=li,vi.postformat=li,vi._relativeTime=ci,vi.relativeTime=hi,vi.pastFuture=pi,vi.set=di,vi.months=xt,vi._months=St,vi.monthsShort=Nt,vi._monthsShort=Tt,vi.monthsParse=Ct,vi.week=Jt,vi._week=Kt,vi.firstDayOfYear=Gt,vi.firstDayOfWeek=Qt,vi.weekdays=Or,vi._weekdays=Ar,vi.weekdaysMin=Pr,vi._weekdaysMin=Dr,vi.weekdaysShort=_r,vi._weekdaysShort=Mr,vi.weekdaysParse=Hr,vi.isPM=Rr,vi._meridiemParse=Ur,vi.meridiem=zr,N("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=g(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}}),t.lang=_t("moment.lang is deprecated. Use moment.locale instead.",N),t.langData=_t("moment.langData is deprecated. Use moment.localeData instead.",k);var xi=Math.abs,Pi=Di("ms"),Hi=Di("s"),Bi=Di("m"),ji=Di("h"),Fi=Di("d"),Ii=Di("w"),qi=Di("M"),Ri=Di("y"),Wi=zi("milliseconds"),Xi=zi("seconds"),Vi=zi("minutes"),$i=zi("hours"),Ji=zi("days"),Ki=zi("months"),Qi=zi("years"),Yi=Math.round,Zi={s:45,m:45,h:22,d:26,M:11},is=Math.abs,os=wn.prototype;os.abs=Ti,os.add=Ci,os.subtract=ki,os.as=Mi,os.asMilliseconds=Pi,os.asSeconds=Hi,os.asMinutes=Bi,os.asHours=ji,os.asDays=Fi,os.asWeeks=Ii,os.asMonths=qi,os.asYears=Ri,os.valueOf=_i,os._bubble=Li,os.get=Ui,os.milliseconds=Wi,os.seconds=Xi,os.minutes=Vi,os.hours=$i,os.days=Ji,os.weeks=Gi,os.months=Ki,os.years=Qi,os.humanize=rs,os.toISOString=ss,os.toString=ss,os.toJSON=ss,os.locale=ar,os.localeData=lr,os.toIsoString=_t("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",ss),os.lang=fr,R("X",0,0,"unix"),R("x",0,0,"valueOf"),ut("x",nt),ut("X",it),ct("X",function(e,t,n){n._d=new Date(parseFloat(e,10)*1e3)}),ct("x",function(e,t,n){n._d=new Date(g(e))}),t.version="2.10.2",n(dn),t.fn=Yr,t.min=yn,t.max=bn,t.utc=f,t.unix=Zr,t.months=yi,t.isDate=s,t.locale=N,t.invalid=c,t.duration=qn,t.isMoment=m,t.weekdays=wi,t.parseZone=ei,t.localeData=k,t.isDuration=En,t.monthsShort=bi,t.weekdaysMin=Si,t.defineLocale=C,t.weekdaysShort=Ei,t.normalizeUnits=O,t.relativeTimeThreshold=ns;var us=t;return us}),define("templates",[],function(){return this.JST=this.JST||{},this.JST["tpl-admin-all-members-action-header"]=function(e){var t,n="",r=_.escape;return n+='<div class="col-md-4 rp-custom-col">\r\n    <div class="rp-table-th">'+((t=e.text.userProfile.projectAndRoles)==null?"":t)+'</div>\r\n</div>\r\n<div class="col-md-2 rp-custom-col">\r\n    <div class="rp-table-th">'+((t=e.text.ui.action)==null?"":t)+"</div>\r\n</div>",n},this.JST["tpl-admin-all-members-action"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.member;return n+='\r\n<div class="col-md-4 rp-custom-col">\r\n    <div class="rp-info rp-info-padding">\r\n        <a href="#viewProejcts" class="rp-btn rp-btn-default rp-button-with-icon" data-js-view-projects data-id="'+((t=o.userId)==null?"":t)+'" title="'+((t=e.text.admin.viewProjects)==null?"":t)+'">\r\n            <i class="material-icons">visibility</i>\r\n            <span class="hidden-sm hidden-xs rp-btn-val">'+((t=e.text.admin.viewProjects)==null?"":t)+'</span>\r\n        </a>\r\n    </div>\r\n</div>\r\n<div class="col-md-2 rp-custom-col">\r\n    <div class="rp-info rp-info-padding">\r\n        ',o.account_type!="UPSA"&&!e.util.isYou(o)&&(n+='\r\n            <div class="rp-btn rp-btn-danger rp-button-with-icon member-action" data-id="'+((t=o.userId)==null?"":t)+'" title="'+((t=e.text.ui.delete)==null?"":t)+'">\r\n                <i class="material-icons">clear</i>\r\n                <span class="hidden-sm hidden-xs rp-btn-val">'+((t=e.text.ui.del)==null?"":t)+"</span>\r\n            </div>\r\n        "),n+="\r\n    </div>\r\n</div>\r\n",delete e.member,delete e.isAdmin,n},this.JST["tpl-admin-assign-project"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="row rp-table-row">\r\n    <div class="rp-table-th col-sm-4">\r\n        <div class="form-group">\r\n            <select id="projectId" name="projectId"></select>\r\n        </div>\r\n    </div>\r\n    <div class="rp-table-th col-sm-5">\r\n        ',e.isAdmin?n+="\r\n        "+((t=e.text.admin.privileges)==null?"":t)+"\r\n        ":(n+='\r\n        <div class="rp-btn-group rp-width-100">\r\n            <button type="button"\r\n                class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                data-toggle="dropdown">\r\n                <span class="select-value" data-role="'+((t=e.defaultRole)==null?"":t)+'">'+((t=e.roles[e.defaultRole])==null?"":t)+'</span>\r\n                <span class="rp-caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu">\r\n                ',_.each(e.roles,function(r,i){n+='\r\n                <li>\r\n                    <a href="#" class="roles-option-empty '+((t=i===e.defaultRole?"active":"")==null?"":t)+'" data-value="'+((t=i)==null?"":t)+'">\r\n                        '+((t=r)==null?"":t)+"\r\n                    </a>\r\n                </li>\r\n                "}),n+="\r\n            </ul>\r\n        </div>\r\n        "),n+='\r\n    </div>\r\n    <div class="rp-table-th col-sm-3">\r\n        <a class="rp-btn rp-btn-default rp-button-with-icon assign-member"\r\n            disabled="disabled"\r\n            href="#"\r\n            title="'+((t=e.text.members.assignProjectTitle)==null?"":t)+'">\r\n            <i class="rp-icons rp-icons-assign"></i>\r\n            <span class="hidden-md hidden-sm hidden-xs rp-btn-val">\r\n                '+((t=e.text.members.assign)==null?"":t)+"\r\n            </span>\r\n        </a>\r\n    </div>\r\n</div>",n},this.JST["tpl-admin-content-shell"]=function(e){var t,n="",r=_.escape;return n+='<div class="col-sm-12 projects_list_wpapper" id="contentBody"></div>',n},this.JST["tpl-admin-header"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<nav class="navbar rp-navbar-header" role="navigation">\r\n    <div class="navbar-header visible-xs mobile-main-header">\r\n        <div class="button-menu-open" data-js-toogle-menu>\r\n            <div class="menu-icon-part"></div>\r\n            <div class="menu-icon-part"></div>\r\n            <div class="menu-icon-part"></div>\r\n        </div>\r\n        <div class="button-menu-close hidden" data-js-toogle-menu>\r\n            <i class="material-icons close-menu" title="Menu close" data-js-filter-close>close</i>\r\n        </div>\r\n        <div class="rp-logo"></div>\r\n    </div>\r\n    <div class="navbar-collapse" id="navbar-header-collapse">\r\n        <h3 class="col-sm-4 admin_header">'+((t=e.text.admin.managementBoard)==null?"":t)+'<span class="header-crumb" data-js-admin-header-crumb></span></h3>\r\n        <div class="pull-right admin_header_controls">\r\n            ',e.project&&(n+='\r\n            <a id="backToProject" href="#'+r(e.lastURL)+'" class="backToProject">\r\n                <i class="material-icons">keyboard_arrow_left</i>\r\n                '+((t=e.text.admin.backToProject)==null?"":t)+"\r\n            </a>\r\n            "),n+='\r\n            <a id="logout" href="#login" class="logout">\r\n                <span class="custom-padding">'+((t=e.text.topMenu.logout)==null?"":t)+'</span>\r\n                <i class="material-icons">power_settings_new</i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n</nav>',n},this.JST["tpl-admin-member-projects"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="col-sm-6 col-md-offset-4 view_projects_wrapper">\r\n    <div class="row rp-table-thead visible-md visible-lg">\r\n        <div class="rp-table-th col-md-4">'+((t=e.text.admin.projectName)==null?"":t)+'</div>\r\n        <div class="rp-table-th col-md-5">'+((t=e.text.admin.projectRole)==null?"":t)+'</div>\r\n        <div class="rp-table-th col-md-3">'+((t=e.text.ui.action)==null?"":t)+"</div>\r\n    </div>\r\n    ",_.forEach(e.member.assigned_projects_array,function(r){var i=r.key,s=r.value;n+='\r\n        <div class="row rp-table-row">\r\n            <div class="rp-table-th col-md-4 break-link view_project_name">'+((t=i)==null?"":t)+'</div>\r\n            <div class="rp-table-th col-md-5">\r\n                ',e.isAdmin(e.member)?n+="\r\n                "+((t=e.text.admin.privileges)==null?"":t)+"\r\n                ":(n+='\r\n                <div class="rp-btn-group rp-width-100">\r\n                    <button type="button"\r\n                        class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                        data-toggle="dropdown">\r\n                        <span class="select-value" data-project="'+((t=i)==null?"":t)+'">\r\n                            '+((t=e.roles[s.projectRole])==null?"":t)+'\r\n                        </span>\r\n                        <span class="rp-caret"></span>\r\n                    </button>\r\n                    <ul class="dropdown-menu">\r\n                        ',_.each(e.roles,function(e,r){n+='\r\n                            <li>\r\n                                <a href="#"\r\n                                class="roles-option '+((t=r===s.projectRole?"active":"")==null?"":t)+'"\r\n                                data-value="'+((t=r)==null?"":t)+'">\r\n                                    '+((t=e)==null?"":t)+"\r\n                                </a>\r\n                            </li>\r\n                        "}),n+="\r\n                    </ul>\r\n                </div>\r\n                "),n+='\r\n            </div>\r\n            <div class="rp-table-th col-md-3">\r\n                ';if(!e.unassignedLock(e.member,s)){n+="\r\n                    ";var o=e.isPersonalProjectOwner(e.member,r);n+="\r\n                    ",e.defaultProject!==i&&!o?n+='\r\n                        <div class="rp-btn rp-btn-default rp-button-with-icon unassign-member"\r\n                            title="'+((t=e.text.members.unAssignTitle)==null?"":t)+'"\r\n                            data-project="'+((t=i)==null?"":t)+'">\r\n                            <i class="rp-icons rp-icons-unassign"></i>\r\n                            <span class="hidden-md hidden-sm hidden-xs rp-btn-val">\r\n                                '+((t=e.text.members.unAssign)==null?"":t)+"\r\n                            </span>\r\n                        </div>\r\n                    ":n+='\r\n                        <span class="btn">\r\n                            <i class="material-icons"\r\n                                title="'+((t=o?e.text.admin.cantUnAssignFromPersonal:e.text.admin.cantUnAssignFromDefault)==null?"":t)+'">lock</i>\r\n                        </span>\r\n                    ',n+="\r\n                "}n+="\r\n            </div>\r\n        </div>\r\n    "}),n+='\r\n    <div class="row rp-table-row add-row">\r\n        <div class="rp-table-th col-md-4">\r\n            <div class="rp-btn rp-btn-submit rp-button-with-icon add-project"\r\n                href="#"\r\n                title="'+((t=e.text.admin.addProjectTitle)==null?"":t)+'">\r\n                <i class="material-icons">add</i>\r\n                <span class="hidden-md hidden-sm hidden-xs rp-btn-val">\r\n                    '+((t=e.text.ui.add)==null?"":t)+'\r\n                </span>\r\n            </div>\r\n        </div>\r\n        <div class="rp-table-th col-md-3"></div>\r\n        <div class="rp-table-th col-md-2"></div>\r\n    </div>\r\n</div>',n},this.JST["tpl-admin-members-assign-action"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o,u,a;o=e.member,u=e.isAdmin,a=e.canEdit(o),n+='<div class="col-md-4 rp-custom-col clearfix">\r\n    ';if(u)n+='\r\n        <div class="col-sm-12 rp-info rp-info-padding admin-role">\r\n            '+((t=e.text.admin.privileges)==null?"":t)+"\r\n        </div>\r\n    ";else{n+='\r\n    <div class="rp-btn-group rp-width-100 rp-info rp-info-padding select-role">\r\n        <button type="button"\r\n            data-value="'+((t=e.defaultRole)==null?"":t)+'" \r\n            class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle '+((t=e.getColorClass&&e.getColorClass(o))==null?"":t)+'"\r\n            data-toggle="dropdown">\r\n            <span class="select-value" data-id="'+((t=o.userId)==null?"":t)+'">'+((t=e.defaultRole)==null?"":t)+'</span>\r\n            <span class="rp-caret"></span>\r\n        </button>\r\n        <ul class="dropdown-menu">\r\n            ';var f=0;n+="\r\n            ",_.forEach(e.roles,function(r,i){n+="\r\n                ";var s=f>e.projectRoleIndex?"disabled":"";n+='\r\n                    <li class="'+((t=s)==null?"":t)+'">\r\n                        <a href="#"\r\n                            class="project-roles '+((t=e.defaultRole===i?"active":"")==null?"":t)+" "+((t=s)==null?"":t)+'"\r\n                            data-value="'+((t=i)==null?"":t)+'">\r\n                            '+((t=r)==null?"":t)+"\r\n                        </a>\r\n                    </li>\r\n                ",f+=1,n+="\r\n            "}),n+='\r\n        </ul>\r\n    </div>\r\n    <div class="rp-btn-group col-sm-2 rp-info-padding action-info">\r\n        ',u&&(n+='\r\n            <i class="material-icons" title="'+((t=e.text.ui.lockedTitle)==null?"":t)+'">lock</i>\r\n        '),n+="\r\n    </div>\r\n    "}return n+='\r\n</div>\r\n<div class="col-md-2 rp-custom-col clearfix">\r\n    <div class="rp-info rp-info-padding">\r\n        ',e.unassignedLock(o)||(n+="\r\n            ",a&&(n+=' \r\n                <button data-id="'+((t=o.userId)==null?"":t)+'"\r\n                    class="rp-btn rp-btn-default rp-button-with-icon member-action"\r\n                    data-value="'+((t=e.defaultRole)==null?"":t)+'"\r\n                    title="'+((t=e.text.members.assignTitle)==null?"":t)+'">\r\n                    <i class="rp-icons rp-icons-assign"></i>\r\n                    <span class="hidden-sm hidden-xs rp-btn-val">'+((t=e.text.members.assign)==null?"":t)+"</span>\r\n                </button>\r\n            "),n+="\r\n        "),n+="\r\n    </div>\r\n</div>",delete e.member,delete e.isAdmin,n},this.JST["tpl-admin-members-assign-header"]=function(e){var t,n="",r=_.escape;return n+='<div class="col-md-4 rp-custom-col">\r\n    <div class="rp-table-th">'+((t=e.text.project.projectRole)==null?"":t)+'</div>\r\n</div>\r\n<div class="col-md-2 rp-custom-col">\r\n    <div class="rp-table-th">'+((t=e.text.ui.action)==null?"":t)+"</div>\r\n</div>",n},this.JST["tpl-admin-project-body"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="general_tabs clearfix" role="tabpanel">\r\n    <div class="tab-content clearfix">\r\n        <div role="tabpanel"\r\n            id="projectSettings"\r\n            class="tab-pane form-horizontal '+((t=e.tab==="settings"?"active":"")==null?"":t)+'">\r\n            ',e.id||(n+='\r\n                <div class="admin-add-project-wrapper clearfix">\r\n                    <div class="rp-form-group clearfix">\r\n                        <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col control-label obligatory-field" for="projectName">\r\n                            '+((t=e.text.admin.projectName)==null?"":t)+'\r\n                        </label>\r\n                        <div class="col-md-6 col-sm-9 col-xs-12 rp-custom-col">\r\n                            <input type="text"\r\n                                placeholder="'+((t=e.text.admin.projectName)==null?"":t)+'"\r\n                                id="projectName"\r\n                                autocomplete="off"\r\n                                class="rp-input-default rp-width-100 form-control" />\r\n                            <div class="error-bottom">\r\n                                <div class="help-inline"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-md-3 hidden-sm hidden-xs rp-custom-col"></div>\r\n                    </div>                    <div class="rp-form-group clearfix">\r\n                        <div class="col-md-9 col-sm-12 col-xs-12 rp-custom-col clearfix">\r\n                            <button type="button" class="rp-btn rp-btn-submit create-project float-right" id="create-project">\r\n                                '+((t=e.text.ui.save)==null?"":t)+'\r\n                            </button>\r\n                            <a href="#administrate/projects" class="rp-btn rp-btn-cancel float-right">\r\n                                '+((t=e.text.ui.cancel)==null?"":t)+'\r\n                            </a>\r\n                        </div>\r\n                        <div class="col-md-3 hidden-sm hidden-xs rp-custom-col"></div>\r\n                    </div>\r\n                </div>\r\n            '),n+='\r\n        </div>\r\n        <div role="tabpanel" class="tab-pane form-horizontal '+((t=e.tab==="members"?"active":"")==null?"":t)+'" id="projectUsers" >\r\n            <div class="rp-project-members members-admin" data-js-project-members></div>\r\n        </div>\r\n    </div>\r\n</div>',n},this.JST["tpl-admin-project-details-header"]=function(e){var t,n="",r=_.escape;return n+='<div id="headerBar" class="clearfix">\r\n    <ul class="rp-nav-left">\r\n        <li class="title-holder">\r\n            <a href="/#administrate/projects"\r\n               class="header-alike"\r\n               title="'+((t=e.text.admin.projects)==null?"":t)+'">\r\n                <span>'+((t=e.text.admin.projects)==null?"":t)+'</span>\r\n            </a>\r\n        </li>\r\n        <li class="title-holder">\r\n                <span class="header-alike">\r\n                    '+((t=e.projectId)==null?"":t)+'\r\n                </span>\r\n        </li>\r\n    </ul>\r\n    <div class="btn-group rp-nav-right in-header-block" data-toggle="buttons">\r\n        <label class="btn btn-custom '+((t=e.interval===6?"active":"")==null?"":t)+'">\r\n            <input type="radio"\r\n                   name="interval"\r\n                   id="interval6"\r\n                   autocomplete="off"\r\n            '+((t=e.interval===6?"checked":"")==null?"":t)+'\r\n            data-value="6" />6 '+((t=e.text.ui.monthsString)==null?"":t)+'\r\n        </label>\r\n        <label class="btn btn-custom '+((t=e.interval===3?"active":"")==null?"":t)+'">\r\n            <input type="radio"\r\n                   name="interval"\r\n                   id="interval3"\r\n                   autocomplete="off"\r\n            '+((t=e.interval===3?"checked":"")==null?"":t)+'\r\n            data-value="3" />3 '+((t=e.text.ui.monthsString)==null?"":t)+'\r\n        </label>\r\n        <label class="btn btn-custom '+((t=e.interval===1?"active":"")==null?"":t)+'">\r\n            <input type="radio"\r\n                   name="interval"\r\n                   id="interval1"\r\n                   autocomplete="off"\r\n            '+((t=e.interval===1?"checked":"")==null?"":t)+'\r\n            data-value="1" />1 '+((t=e.text.ui.month)==null?"":t)+"\r\n        </label>\r\n    </div>\r\n</div>",n},this.JST["tpl-admin-project-details"]=function(e){var t,n="",r=_.escape;return n+='<div class="col-sm-12 rp-admin-project-details" id="contentBody">\r\n    <div class="btn-group rp-nav-right in-header-block project-intervals" data-toggle="buttons">\r\n        <label class="btn btn-custom ">\r\n            <input type="radio" name="interval" id="interval6" autocomplete="off" data-value="6">6 months\r\n        </label>\r\n        <label class="btn btn-custom active">\r\n            <input type="radio" name="interval" id="interval3" autocomplete="off" checked="" data-value="3">3 months\r\n        </label>\r\n        <label class="btn btn-custom ">\r\n            <input type="radio" name="interval" id="interval1" autocomplete="off" data-value="1">1 month\r\n        </label>\r\n    </div>\r\n    <div id="contentTarget"></div>\r\n</div>\r\n',n},this.JST["tpl-admin-project-header"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o="rp-hide",u="rp-hide",a=e.projectName;return e.tab==="settings"&&(o="rp-show"),e.tab==="members"&&(u="rp-show"),n+='\r\n<div id="headerBar" class="clearfix">\r\n    <ul class="rp-nav-left">\r\n        <li class="title-holder" id="title-all-project">\r\n            <a href="#administrate/projects" class="header-alike">\r\n                '+((t=e.text.admin.titleAllProjects)==null?"":t)+"\r\n            </a>\r\n        </li>\r\n        ",a!==undefined&&(n+='\r\n            <li class="title-holder" id="title-current-project">\r\n                <a href="#administrate/project-details/'+((t=e.projectName)==null?"":t)+'" class="header-alike">\r\n                    '+((t=a)==null?"":t)+"\r\n                </a>\r\n            </li>\r\n        "),n+='\r\n        <li class="title-holder '+((t=u)==null?"":t)+'" id="title-members">\r\n            <span class="header-alike">'+((t=e.text.admin.titleMembers)==null?"":t)+'</span>\r\n        </li>\r\n        <li class="title-holder '+((t=o)==null?"":t)+'" id="title-settings">\r\n            <span class="header-alike">'+((t=e.text.admin.titleSettings)==null?"":t)+"</span>\r\n        </li>\r\n    </ul>\r\n</div>",n},this.JST["tpl-admin-projects-header"]=function(e){var t,n="",r=_.escape;return n+='<div id="headerBar" class="clearfix">\r\n    <ul class="rp-nav-left">\r\n        <li class="title-holder" id="title-all-project">\r\n            <span class="header-alike">\r\n                '+((t=e.text.admin.titleAllProjects)==null?"":t)+'\r\n            </span>\r\n        </li>\r\n    </ul>\r\n    <div class="pull-right header-menu">\r\n        <a href="#administrate/projects/add"\r\n           id="addProjectBtn"\r\n           class="rp-btn rp-btn-default-revers rp-button-with-icon">\r\n            <i class="rp-icons rp-icons-add-project"></i>\r\n            <span class="hidden-sm hidden-xs rp-btn-val">\r\n                '+((t=e.text.admin.addProject)==null?"":t)+"\r\n            </span>\r\n        </a>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-admin-projects-list-shell"]=function(e){var t,n="",r=_.escape;return n+='<div class="row-custom rp-projects-list-header clearfix">\r\n    <div class="col-md-3">\r\n        <div class="form-group projects-list-search">\r\n            <input type="text" value=""  placeholder="'+((t=e.text.admin.searchByName)==null?"":t)+'" name="nameFilter"\r\n                   id="nameFilter" class="favorites-name-filter rp-input-search" data-js-filter-projects>\r\n            <i class="material-icons">search</i>\r\n            <div style="display:none;" class="error-hint help-inline"></div>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="col-md-6 sort-projects-list">\r\n        <label class="form_label sort-label" for="sortDirection">\r\n            '+((t=e.text.admin.sortBy)==null?"":t)+'\r\n        </label>\r\n        <div class="btn-group" role="group" id="sortDirection" data-js-sort-block>\r\n            </button><button type="button" class="rp-btn rp-btn-default-revers active asc" data-type="name">\r\n                '+((t=e.text.admin.name)==null?"":t)+'\r\n                <i class="material-icons arrow_up">keyboard_arrow_up</i>\r\n                <i class="material-icons arrow_down">keyboard_arrow_down</i>\r\n            </button><button type="button" class="rp-btn rp-btn-default-revers" data-type="creationDate">\r\n                '+((t=e.text.admin.creationDate)==null?"":t)+'\r\n                <i class="material-icons arrow_up">keyboard_arrow_up</i>\r\n                <i class="material-icons arrow_down">keyboard_arrow_down</i>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-3">\r\n        <ul class="rp-nav rp-nav-right projects-view-switcher" role="group">\r\n            <li class="float-left">\r\n                <button class="projects-view projects-view-tile rp-btn rp-btn-default active"\r\n                        data-view-type="tile">\r\n                    <i class="material-icons">view_module</i>\r\n                </button>\r\n            </li>\r\n            <li class="float-left">\r\n                <button class="projects-view projects-view-table rp-btn rp-btn-default"\r\n                        data-view-type="table">\r\n                    <i class="material-icons">view_list</i>\r\n                </button>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n<div class="container-fluid rp-projects-list-body">\r\n    <div class="row">\r\n        <ul class="nav nav-tabs nav-tabs-custom" role="tablist">\r\n            <li role="presentation"\r\n                class="'+((t=!e.query||e.query==="internal"?"active":"")==null?"":t)+'">\r\n                <a href="#administrate/projects/internal"\r\n                   data-target="#internalProjects"\r\n                   aria-controls="home"\r\n                   role="tab"\r\n                   data-toggle="tab"\r\n                   class="tab"\r\n                   data-query="internal">\r\n                    '+((t=e.text.admin.internalProjects)==null?"":t)+' <span data-js-internal-qty></span>\r\n                </a>\r\n            </li>\r\n            <li role="presentation" class="'+((t=e.query==="personal"?"active":"")==null?"":t)+'">\r\n                <a href="#administrate/projects/personal"\r\n                   data-target="#personalProjects"\r\n                   aria-controls="profile"\r\n                   role="tab"\r\n                   data-toggle="tab"\r\n                   class="tab"\r\n                   data-query="personal">\r\n                    '+((t=e.text.admin.personalProjects)==null?"":t)+' <span data-js-personal-qty></span>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n        <div class="tab-content">\r\n            <div role="tabpanel"\r\n                 class="tab-pane '+((t=!e.query||e.query==="internal"?"active":"")==null?"":t)+'"\r\n                 data-js-internal-content id="internalProjects"></div>\r\n            <div role="tabpanel" class="tab-pane '+((t=e.query==="personal"?"active":"")==null?"":t)+'"\r\n                 data-js-personal-content id="personalProjects"></div>\r\n        </div>\r\n    </div>\r\n</div>',n},this.JST["tpl-admin-projects-list"]=function(e){var t,n="",r=_.escape;return n+='<div data-js-projects-loader class="projects-list-loader">\r\n    <i class="material-icons loader-animation">refresh</i>\r\n</div>\r\n<div class="container-fluid">\r\n    <div data-js-projects-list class="row"></div>\r\n</div>\r\n<div data-js-projects-paging></div>',n},this.JST["tpl-admin-projects-table-view"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=0;return n+='\r\n<div class="container-fluid projects-table-view">\r\n    <div class="row rp-table-thead visible-md visible-lg">     \r\n        <div class="col-md-4"><div class="rp-table-th">'+((t=e.text.admin.projectName)==null?"":t)+'</div></div>\r\n        <div class="col-md-1"><div class="rp-table-th">'+((t=e.text.admin.kpi)==null?"":t)+'</div></div>\r\n        <div class="col-md-1"><div class="rp-table-th text-right">'+((t=e.text.admin.projectMembers)==null?"":t)+'</div></div>\r\n        <div class="col-md-1"><div class="rp-table-th text-right">'+((t=e.text.topMenu.launches)==null?"":t)+'</div></div>\r\n        <div class="col-md-2"><div class="rp-table-th">'+((t=e.text.admin.lastLaunchDate)==null?"":t)+'</div></div>\r\n        <div class="col-md-2"><div class="rp-table-th text-center">'+((t=e.text.favorites.fActions)==null?"":t)+'</div></div>\r\n        <div class="col-md-1"><div class="rp-table-th text-center">'+((t=e.text.ui.delete)==null?"":t)+"</div></div>\r\n    </div>\r\n    ",_.forEach(e.collection,function(i,s){n+="\r\n        ";if(e.filter(i,e.search)){n+="\r\n            ",o+=1,n+="\r\n            ";var u=i.lastRun&&!e.hasRunsLastWeek(i.lastRun)?"dimmed":"";n+="\r\n            ";var a=!e.isPersonalProject(i)&&e.isNew&&e.isNew(i.creationDate);n+="\r\n            ";var f=!!e.userProjects[i.projectId];n+='\r\n            <div class="row project-row '+((t=u)==null?"":t)+'">\r\n                <div class="col-md-4 clearfix">\r\n                     <div class="col-xs-5 visible-xs visible-sm">\r\n                        <h5>'+((t=e.text.admin.projectName)==null?"":t)+'</h5>\r\n                    </div>\r\n                     <div class="col-xs-7 no-padding col-md-12">\r\n                            <h4 class="project_name">\r\n                                <span class="name ',a&&(n+="name-label"),n+='">\r\n                                    <a href="#administrate/project-details/'+r(i.projectId)+'" class="project_details break-link" title="'+((t=e.text.admin.projectTitle)==null?"":t)+'">\r\n                                        '+((t=e.search?e.textWrapper(i.projectId,e.search):i.projectId)==null?"":t)+"\r\n                                    </a>\r\n                                    ",a&&(n+='\r\n                                    <span class="label label-success you">'+((t=e.text.admin.newProject)==null?"":t)+"</span>\r\n                                    "),n+='\r\n                                </span>\r\n                            </h4>\r\n                     </div>\r\n                </div>\r\n                <div class="col-md-1 clearfix"></div>\r\n                <div class="col-md-1 clearfix">\r\n                     <div class="col-xs-5 visible-xs visible-sm">\r\n                        <h5>'+((t=e.text.admin.projectMembers)==null?"":t)+'</h5>\r\n                    </div>\r\n                     <div class="col-xs-7 no-padding col-md-12">\r\n                        <div class="project-info text-right">\r\n                             <strong>'+((t=i.usersQuantity)==null?"":t)+'</strong>\r\n                        </div>\r\n                     </div>\r\n                </div>\r\n                <div class="col-md-1 clearfix">\r\n                    <div class="col-xs-5 visible-xs visible-sm">\r\n                        <h5>'+((t=e.text.topMenu.launches)==null?"":t)+'</h5>\r\n                    </div>\r\n                    <div class="col-xs-7 no-padding col-md-12">\r\n                        <div class="project-info text-right">\r\n                            <strong>'+((t=i.launchesQuantity)==null?"":t)+'</strong>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-2 clearfix">\r\n                    <div class="col-xs-5 visible-xs visible-sm">\r\n                        <h5>'+((t=e.text.admin.lastLaunchDate)==null?"":t)+'</h5>\r\n                    </div>\r\n                    <div class="col-xs-7 no-padding col-md-12">\r\n                        <div class="project-info">\r\n                            '+((t=i.lastRun?e.util.daysFromNow(i.lastRun):e.text.admin.lastRunSuffix)==null?"":t)+'\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-2 clearfix">\r\n                    <div class="col-xs-5 visible-xs visible-sm">\r\n                        <h5>'+((t=e.text.favorites.fActions)==null?"":t)+'</h5>\r\n                    </div>\r\n                    <div class="col-xs-7 no-padding col-md-12">\r\n                            <ul class="nav rp-icons-style projects-table-view-actions">\r\n                                <li class="col-xs-4 projects-table-view-list-item">\r\n                                    <a class="project-link"\r\n                                        title="'+((t=e.text.ui.settings)==null?"":t)+'"\r\n                                        href="#administrate/projects/'+r(i.projectId)+'/settings">\r\n                                        <i class="material-icons">settings</i>\r\n                                    </a>\r\n                                </li>\r\n                                <li class="col-xs-4 projects-table-view-list-item">\r\n                                    <a class="project-link"\r\n                                        title="'+((t=e.text.ui.members)==null?"":t)+'"\r\n                                        href="#administrate/projects/'+r(i.projectId)+'/members">\r\n                                        <i class="rp-icons rp-icons-all-users"></i>\r\n                                    </a>\r\n                                </li>\r\n                                <li class="col-xs-4 switch-icons projects-table-view-list-item '+((t=f?"":"no-assigned")==null?"":t)+'">\r\n                                     <a class="project-link go-to-project"\r\n                                        title="'+((t=e.text.admin.goToProject)==null?"":t)+'"\r\n                                        href="#'+r(i.projectId)+'">\r\n                                         <i class="material-icons">open_in_browser</i>\r\n                                     </a>\r\n                                    ',f||(n+='\r\n                                        <a class="project-link assign-to-project"\r\n                                            title="'+((t=e.text.admin.assignToProject)==null?"":t)+'"\r\n                                            href="#"\r\n                                            data-project="'+r(i.projectId)+'">\r\n                                            <i class="material-icons">playlist_add_check</i>\r\n                                        </a>\r\n                                    '),n+='\r\n                                </li>\r\n                            </ul>\r\n                     </div>\r\n                </div>\r\n                <div class="col-md-1 no-padding clearfix text-center">\r\n                    ',e.canDelete(i)&&!e.isPersonalProject(i)&&(n+='\r\n                    <a class=" project-link remove-project"\r\n                       href="#" title="'+((t=e.text.permissionMap.deleteProject)==null?"":t)+'"\r\n                       data-id="'+r(i.projectId)+'"\r\n                       data-active="'+((t=e.active)==null?"":t)+'">\r\n                        <i class="rp-icons rp-icons-delete" data-js-remove=""></i>\r\n                    </a>\r\n                    '),n+="\r\n                </div>\r\n            </div>\r\n        "}n+="\r\n    "}),n+="\r\n</div>\r\n",o===0&&(n+='\r\n    <div class="col-sm-12">\r\n        <h3>'+((t=e.text.infoMessages.noResults)==null?"":t)+"</h3>\r\n    </div>\r\n"),n+="\r\n",n},this.JST["tpl-admin-projects-tile-view"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=0;return n+="\r\n",_.forEach(e.collection,function(i,s){n+="\r\n    ";if(e.filter(i,e.search)){n+="\r\n    ",o+=1,n+="\r\n        ";var u=i.lastRun&&!e.hasRunsLastWeek(i.lastRun)?"dimmed":"";n+="\r\n        ";var a=!e.isPersonalProject(i)&&e.isNew&&e.isNew(i.creationDate);n+="\r\n        ";var f=a?"":"no-label";n+='\r\n          <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3 project-item project-row '+((t=u)==null?"":t)+'">\r\n            <div class="project-wrapper">\r\n                ',e.canDelete(i)&&!e.isPersonalProject(i)&&(n+='\r\n                    <div class="remove-project"\r\n                        data-id="'+r(i.projectId)+'"\r\n                        data-active="'+((t=e.active)==null?"":t)+'">\r\n                        <i class="material-icons">clear</i>\r\n                    </div>\r\n                '),n+='\r\n                <h2 class="project_name '+((t=f)==null?"":t)+'">\r\n                    <span class="name ',a&&(n+="name-label"),n+='">\r\n                        <a href="#administrate/project-details/'+r(i.projectId)+'" class="project_details break-link" title="'+((t=e.text.admin.projectTitle)==null?"":t)+'">\r\n                            '+((t=e.search?e.textWrapper(i.projectId,e.search):i.projectId)==null?"":t)+"\r\n                        </a>\r\n                        ",a&&(n+='\r\n                        <span class="label label-success you">'+((t=e.text.admin.newProject)==null?"":t)+"</span>\r\n                        "),n+='\r\n                    </span>\r\n                </h2>\r\n                <div class="row project_info_wrapper">\r\n                    <div class="col-sm-6 text-center heartbeat_block">\r\n                        <div class="health_icon">\r\n                            <i class="rp-icons rp-icons-heartbeat"></i>\r\n                        </div>\r\n                        <div class="health_index"><!-- health index --></div>\r\n                    </div>\r\n                    <div class="col-sm-6 project_info_block">\r\n                        <div class="project_info"><span class="bold">'+((t=i.usersQuantity)==null?"":t)+"</span>"+((t=i.usersQuantity==1?e.text.admin.usersQuantitySingular:e.text.admin.usersQuantity)==null?"":t)+'</div>\r\n                        <div class="project_info"><span class="bold">'+((t=i.launchesQuantity)==null?"":t)+"</span>"+((t=i.launchesQuantity==1?e.text.admin.launchesQuantitySingular:e.text.admin.launchesQuantity)==null?"":t)+'</div>\r\n                        <div class="project_info">'+((t=e.text.admin.lastRunPrefix)==null?"":t)+""+((t=i.lastRun?e.util.daysFromNow(i.lastRun):e.text.admin.lastRunSuffix)==null?"":t)+"</div>\r\n                    </div>\r\n                </div>\r\n                ";var l=!!e.userProjects[i.projectId];n+='\r\n                <div class="row project-link_wrapper '+((t=l?"":"no-assigned")==null?"":t)+'">\r\n                    <a class="col-sm-4 project-link" title="'+((t=e.text.ui.settings)==null?"":t)+'" href="#administrate/projects/'+r(i.projectId)+'/settings">\r\n                        <i class="material-icons">settings</i>\r\n                    </a>\r\n                    <a class="col-sm-4 project-link" title="'+((t=e.text.ui.members)==null?"":t)+'" href="#administrate/projects/'+r(i.projectId)+'/members">\r\n                        <i class="rp-icons rp-icons-all-users"></i>\r\n                    </a>\r\n                    <a class="col-sm-4 project-link go-to-project" title="'+((t=e.text.admin.goToProject)==null?"":t)+'" href="#'+r(i.projectId)+'">\r\n                        <i class="material-icons">open_in_browser</i>\r\n                    </a>\r\n                    ',l||(n+='\r\n                    <a class="col-sm-4 project-link assign-to-project" title="'+((t=e.text.admin.assignToProject)==null?"":t)+'" href="#" data-project="'+r(i.projectId)+'">\r\n                        <i class="material-icons">playlist_add_check</i>\r\n                    </a>\r\n                    '),n+="\r\n                </div>\r\n            </div>\r\n        </div>\r\n        ",o%4===0&&(n+='\r\n            <div class="clearfix"></div>\r\n        '),n+="\r\n    "}n+="\r\n"}),n+="\r\n",o===0&&(n+='\r\n    <div class="col-sm-12">\r\n        <div class="col-sm-12 text-center">\r\n            <h3 class="title-no-data text-center">\r\n                <i class="rp-icons rp-icons-warning"></i>\r\n                <span class="warning">'+((t=e.text.infoMessages.noResults)==null?"":t)+"</span>\r\n            </h3>\r\n        </div>\r\n    </div>\r\n"),n+="\r\n",n},this.JST["tpl-admin-settings-body"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="form-horizontal rp-email-settings email-settings" id="email-settings">\r\n    <div class="rp-form-group clearfix">\r\n        <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col obligatory-field" for="host">\r\n            '+((t=e.text.admin.host)==null?"":t)+'\r\n        </label>\r\n        <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n            <input type="text" class="rp-input-default rp-width-100 form-control" id="host"\r\n                   value="'+r(e.emailConfig.host||"")+'"/>\r\n            <div class="error-bottom">\r\n                <div class="help-inline"></div>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-5 rp-custom-col hidden-xs hidden-sm"></div>\r\n    </div>\r\n    <div class="rp-form-group clearfix protocol">\r\n        <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col">\r\n            '+((t=e.text.admin.protocol)==null?"":t)+'\r\n        </label>\r\n        <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n            <div class="rp-btn-group btn-group rp-width-100">\r\n                <button type="button" class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                        data-toggle="dropdown"\r\n                ';var o=(e.emailConfig.protocol?_.find(e.settings.protocol,function(t){return t.value===e.emailConfig.protocol}):e.settings.protocol[0])||e.settings.protocol[0];n+=' data-value="'+((t=e.emailConfig.protocol)==null?"":t)+'" class="protocol">\r\n                <span class="select-value">'+((t=o.name)==null?"":t)+'</span>\r\n                <span class="rp-caret"></span>\r\n                </button>\r\n                <ul class="dropdown-menu">\r\n                    ',_.each(e.settings.protocol,function(e){n+='\r\n                    <li>\r\n                        <a href="#" data-value="'+((t=e.value)==null?"":t)+'">'+((t=e.name)==null?"":t)+"</a>\r\n                    </li>\r\n                    "}),n+='\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-5 rp-custom-col hidden-xs hidden-sm"></div>\r\n    </div>\r\n    <div class="rp-form-group clearfix">\r\n        <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col obligatory-field" for="port">\r\n            '+((t=e.text.admin.port)==null?"":t)+'\r\n        </label>\r\n        <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n            <input type="text" class="rp-input-default rp-width-100 form-control" id="port"\r\n                   value="'+r(e.emailConfig.port||"")+'"/>\r\n            <div class="error-bottom">\r\n                <div class="help-inline"></div>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-5 rp-custom-col hidden-xs hidden-sm"></div>\r\n    </div>\r\n    <div class="rp-form-group clearfix">\r\n        <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col">\r\n            '+((t=e.text.admin.authorization)==null?"":t)+'\r\n        </label>\r\n        <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n            <div class="rp-btn-group btn-group rp-width-100">\r\n                ';var u=e.emailConfig.authEnabled?e.text.ui.on:e.text.ui.off;return n+='\r\n                <button type="button" class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                        data-toggle="dropdown" data-value="'+((t=u)==null?"":t)+'" id="authorizationEnabled">\r\n                    <span class="select-value">'+((t=u)==null?"":t)+'</span>\r\n                    <span class="rp-caret"></span>\r\n                </button>\r\n                <ul class="dropdown-menu">\r\n                    <li><a href="#">'+((t=e.text.ui.on)==null?"":t)+'</a></li>\r\n                    <li><a href="#">'+((t=e.text.ui.off)==null?"":t)+'</a></li>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-5 rp-custom-col hidden-xs hidden-sm"></div>\r\n    </div>\r\n    <div class="auth" ',e.emailConfig.authEnabled||(n+='style="display: none"'),n+='>\r\n        <div class="rp-form-group clearfix">\r\n            <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col" for="username">\r\n                '+((t=e.text.admin.username)==null?"":t)+'\r\n            </label>\r\n            <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n                <input type="text" class="rp-input-default rp-width-100 form-control" id="username"\r\n                       value="'+r(e.emailConfig.username||"")+'" data-js-username>\r\n                <div class="error-bottom">\r\n                    <div class="help-inline"></div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-5 rp-custom-col hidden-xs hidden-sm"></div>\r\n        </div>\r\n        <div class="rp-form-group clearfix">\r\n            <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col" for="password">'+((t=e.text.admin.password)==null?"":t)+'</label>\r\n            <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n                <input type="password" class="rp-input-default rp-width-100 form-control" id="password"\r\n                       value="'+r(e.emailConfig.password||"")+'" data-js-password>\r\n                <div class="error-bottom">\r\n                    <div class="help-inline"></div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-5 rp-custom-col hidden-xs hidden-sm"></div>\r\n        </div>\r\n    </div>\r\n    <div class="rp-form-group clearfix">\r\n        <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col"></label>\r\n        <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n            <div class="tls-enabled">\r\n\r\n                <label class="rp-checkbox-wrap">\r\n                    <input data-js-tls-enabled class="rp-input-checkbox" type="checkbox" ',e.emailConfig.starTlsEnabled&&(n+='checked="checked"'),n+=' id="tls">\r\n                    <span>'+((t=e.text.admin.TLS)==null?"":t)+'</span>\r\n                </label>\r\n                <label class="rp-checkbox-wrap">\r\n                    <input data-js-ssl-enabled class="rp-input-checkbox" type="checkbox" ',e.emailConfig.sslEnabled&&(n+='checked="checked"'),n+=' id="ssl">\r\n                    <span>'+((t=e.text.admin.SSL)==null?"":t)+'</span>\r\n                </label>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-5 rp-custom-col hidden-xs hidden-sm"></div>\r\n    </div>\r\n    <div class="rp-form-group clearfix email-server-error" data-js-connection-error style="display: none;">\r\n        <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col"></label>\r\n        <div class="col-md-6 col-sm-9 col-xs-12 rp-custom-col ">\r\n            <div class="alert alert-danger" data-js-connection-message></div>\r\n        </div>\r\n        <div class="col-md-3 rp-custom-col hidden-xs hidden-sm"></div>\r\n    </div>\r\n    <div class="rp-form-group clearfix">\r\n        <div class="col-md-3 hidden-sm hidden-xs rp-custom-col"></div>\r\n        <div class="col-md-4 col-sm-12 col-xs-12 rp-custom-col button-panel clearfix">\r\n            <button type="submit" class="rp-btn rp-btn-submit float-right" id="submit-email-settings">\r\n                '+((t=e.text.ui.submit)==null?"":t)+'\r\n            </button>\r\n        </div>\r\n        <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n    </div>\r\n</div>',n},this.JST["tpl-admin-settings-header"]=function(e){var t,n="",r=_.escape;return n+='<div id="headerBar" class="clearfix">\r\n    <ul class="rp-nav-left">\r\n        <li class="title-holder">\r\n            <span class="header-alike">'+((t=e.text.admin.serverSettings)==null?"":t)+'</span>\r\n        </li>\r\n        <li class="title-holder" id="assignedTitle">\r\n            <span class="header-alike">'+((t=e.text.admin.emailSettings)==null?"":t)+"</span>\r\n        </li>\r\n    </ul>\r\n</div>",n},this.JST["tpl-admin-side-bar"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="sidebar-close" data-js-sidebar-close></div>\r\n<span class="logo">\r\n    <i class="sprite sprite-logo"></i>\r\n    <!-- <span>'+((t=e.text.topMenu.reportPortal)==null?"":t)+'</span> -->\r\n</span>\r\n<nav data-js-scroll-container class="admin-side-bar">\r\n    <ul class="main-menu" id="adminBar">\r\n        <li>\r\n            <a href="#administrate/projects"\r\n                id="projectsSection"\r\n                class="'+((t=e.page==="projects"?"active":"")==null?"":t)+'">\r\n                <i class="rp-icons rp-icons-projects fsize-19"></i>\r\n                <span>'+((t=e.text.admin.projects)==null?"":t)+'</span>\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a href="#administrate/users"\r\n                id="usersSection"\r\n                class="'+((t=e.page==="users"?"active":"")==null?"":t)+'">\r\n                <i class="rp-icons rp-icons-all-users fsize-17"></i>\r\n                <span>'+((t=e.text.admin.users)==null?"":t)+'</span>\r\n            </a>\r\n        </li>\r\n        <li>\r\n            <a href="#administrate/settings"\r\n                id="settingsSection"\r\n                class="'+((t=e.page==="settings"?"active":"")==null?"":t)+'">\r\n                <i class="rp-icons rp-icons-settings-left-menu  fsize-23"></i>\r\n                <span>'+((t=e.text.admin.serverSettings)==null?"":t)+'</span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n    <ul class="user-menu">\r\n        ',e.lastURL&&(n+='\r\n            <li class="'+((t=isActive)==null?"":t)+' col-xs-6 col-sm-12">\r\n                <a href="#'+r(e.lastURL)+'" class="mem-set user-id">\r\n                    <i class="material-icons">chevron_left</i>\r\n                    '+((t=e.text.admin.backToProject)==null?"":t)+"\r\n                </a>\r\n            </li>\r\n        "),n+='\r\n        <li class="'+((t=isActive)==null?"":t)+' col-xs-6 col-sm-12">\r\n            <a href="#user-profile" class="mem-set user-id">\r\n                <i class="material-icons">person</i>\r\n                <span class="custom-padding">'+((t=e.text.topMenu.profile)==null?"":t)+'</span>\r\n            </a>\r\n        </li>\r\n        <li class="'+((t=isActive)==null?"":t)+' col-xs-6 col-sm-12">\r\n            <a href="#login" id="logout" >\r\n                <i class="rp-icons rp-icons-logout fsize-23"></i>\r\n                <span class="custom-padding">'+((t=e.text.topMenu.logout)==null?"":t)+'</span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n</nav>\r\n</nav>\r\n<a id="back-top" class="hidden-xs" title="'+((t=e.text.ui.backToTop)==null?"":t)+'" style="display: none;" global-back-top>\r\n    <nobr>\r\n        <span id="btt-span">'+((t=e.text.ui.backToTop)==null?"":t)+"</span>\r\n    </nobr>\r\n</a>\r\n",n},this.JST["tpl-admin-users-header"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div id="headerBar" class="clearfix">\r\n    <ul class="rp-nav-left">\r\n        <li class="title-holder">\r\n            <span class="header-alike">'+((t=e.text.admin.users)==null?"":t)+'</span>\r\n        </li>\r\n    </ul>\r\n    <ul class="rp-nav-right">\r\n        <li class="rp-launch-bt float-right margin-left-10 rp-item-li-fix-height">\r\n            <a href="#administrate/users/add"\r\n                id="toAddUser"\r\n                title="'+((t=e.text.admin.addUser)==null?"":t)+'"\r\n                class="rp-btn rp-btn-default-revers rp-button-with-icon ',e.action=="add"&&"disabled",n+='">\r\n                <i class="rp-icons rp-icons-add-user"></i>\r\n                <span class="hidden-sm hidden-xs rp-btn-val">'+((t=e.text.admin.addUser)==null?"":t)+'</span>\r\n            </a>\r\n        </li>\r\n        <li class="rp-launch-btn float-right margin-left-10 rp-item-li-fix-height">\r\n            <a href="#administrate/users/invite"\r\n                id="toInviteUser"\r\n                title="'+((t=e.text.admin.inviteUser)==null?"":t)+'"\r\n                class="rp-btn rp-btn-default-revers rp-button-with-icon ',e.action=="invite"&&"disabled",n+='">\r\n                <i class="rp-icons rp-icons-invite-user"></i>\r\n                <span class="hidden-sm hidden-xs rp-btn-val">'+((t=e.text.admin.inviteUser)==null?"":t)+"</span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n</div>",n},this.JST["tpl-admin-users"]=function(e){var t,n="",r=_.escape;return n+='<div class="all-users">\r\n    <div class="container-fluid rp-margin-reset rp-odd-even rp-members-list rp-table-hover">\r\n        <div class="row rp-table-thead visible-md visible-lg">\r\n            <div class="col-md-6">\r\n                <div class="col-md-6">\r\n                    <div class="input-filter form-group">\r\n                        <input type="text"\r\n                            class="favorites-name-filter rp-input-search"\r\n                            id="userFilter"\r\n                            name="userFilter"\r\n                            placeholder="'+((t=e.text.favorites.fName)==null?"":t)+'"\r\n                            value="'+r(e.nameFilterValue||"")+'" />\r\n                        <i class="material-icons">search</i>\r\n                        <div class="error-hint help-inline" style="display:none;"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-2">\r\n                <div class="rp-table-th">'+((t=e.text.admin.lastLogin)==null?"":t)+'</div>\r\n            </div>\r\n            <div class="col-md-2">\r\n                <div class="rp-table-th">'+((t=e.text.admin.projectsRoles)==null?"":t)+'</div>\r\n            </div>\r\n            <div class="col-md-2">\r\n                <div class="rp-table-th">'+((t=e.text.admin.deleteUser)==null?"":t)+'</div>\r\n            </div>\r\n        </div>\r\n        <div class="users-list">\r\n            <div id="usersList"></div>\r\n            <div id="popupLoader" class="admin-section" style="display:none;">\r\n                <i class="material-icons loader-animation">refresh</i>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div id="pagingHolder"></div>\r\n</div>',n},this.JST["tpl-projects-body"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-admin-projects" data-js-admin-projects></div>',n},this.JST["tpl-projects-details"]=function(e){var t,n="",r=_.escape;return n+='<div class="col-sm-12 rp-admin-project-details" id="contentBody">\r\n    <div class="btn-group rp-nav-right in-header-block project-intervals" data-toggle="buttons">\r\n        <label class="btn btn-custom ">\r\n            <input type="radio" name="interval" id="interval6" autocomplete="off" data-value="6">6 months\r\n        </label>\r\n        <label class="btn btn-custom active">\r\n            <input type="radio" name="interval" id="interval3" autocomplete="off" checked="" data-value="3">3 months\r\n        </label>\r\n        <label class="btn btn-custom ">\r\n            <input type="radio" name="interval" id="interval1" autocomplete="off" data-value="1">1 month\r\n        </label>\r\n    </div>\r\n    <div id="contentTarget"></div>\r\n</div>\r\n',n},this.JST["tpl-projects-header"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-admin-header">\r\n    <div class="admin-breadcrumbs" data-js-main-breadcrumbs></div>\r\n    <div class="admin-header-menu">\r\n        <div class="project-buttons" data-js-project-buttons>\r\n            <a class="rp-btn rp-btn-default-revers rp-button-with-icon" data-js-project-settings title="'+((t=e.text.ui.settings)==null?"":t)+'">\r\n                <i class="material-icons">settings</i>\r\n                <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.ui.settings)==null?"":t)+'</span>\r\n            </a>\r\n            <a class="rp-btn rp-btn-default-revers rp-button-with-icon" data-js-project-members title="'+((t=e.text.admin.projectMembers)==null?"":t)+'">\r\n                <i class="rp-icons rp-icons-all-users"></i>\r\n                <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.admin.projectMembers)==null?"":t)+'</span>\r\n            </a>\r\n        </div>\r\n        <div class="project-buttons" data-js-add-project-button>\r\n            <a class="rp-btn rp-btn-default-revers rp-button-with-icon" data-js-add-project title="'+((t=e.text.admin.addProject)==null?"":t)+'">\r\n                <i class="rp-icons rp-icons-add-project"></i>\r\n                <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.admin.addProject)==null?"":t)+"</span>\r\n            </a>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-projects-item-list"]=function(e){var t,n="",r=_.escape;return n+='<div class="project-wrapper">\r\n    <div class="remove-project hide" data-js-delete-project>\r\n        <i class="material-icons">clear</i>\r\n    </div>\r\n    <h2 class="project-name">\r\n        <span class="name" data-js-project-name-label>\r\n            <a href="" class="project_details break-link" title="'+((t=e.text.admin.projectTitle)==null?"":t)+'" data-js-project-name></a>\r\n            <span class="new-label hide" data-js-project-new>'+((t=e.text.admin.newProject)==null?"":t)+'</span>\r\n        </span>\r\n    </h2>\r\n    <div class="project-info-wrapper">\r\n        <div class="heartbeat-block">\r\n            <div class="health-icon">\r\n                <i class="rp-icons rp-icons-heartbeat"></i>\r\n            </div>\r\n            <div class="health-index"><!-- health index --></div>\r\n        </div>\r\n        <div class="project-info-block">\r\n            <div class="project-info" data-js-project-users></div>\r\n            <div class="project-info" data-js-project-launches></div>\r\n            <div class="project-info" data-js-project-last-run></div>\r\n        </div>\r\n    </div>\r\n    <div class="project-link-wrapper">\r\n        <a class="project-link go-to-settings" title="'+((t=e.text.ui.settings)==null?"":t)+'" href="" data-js-settings-link>\r\n            <i class="material-icons">settings</i>\r\n        </a>\r\n        <a class="project-link go-to-members" title="'+((t=e.text.ui.members)==null?"":t)+'" href="" data-js-members-link>\r\n            <i class="rp-icons rp-icons-all-users"></i>\r\n        </a>\r\n        <a class="project-link go-to-project hide" title="'+((t=e.text.admin.goToProject)==null?"":t)+'" href="#open-project" data-js-go-to-project>\r\n            <i class="material-icons">open_in_browser</i>\r\n        </a>\r\n        <a class="project-link assign-to-project hide" title="'+((t=e.text.admin.assignToProject)==null?"":t)+'" href="#assign-to-project" data-js-assign-to-project>\r\n            <i class="material-icons">playlist_add_check</i>\r\n        </a>\r\n    </div>\r\n</div>',n},this.JST["tpl-projects-item-table"]=function(e){var t,n="",r=_.escape;return n+='<div class="project-delete-col">\r\n    <div class="remove-project">\r\n        <a class="project-link hide" data-js-delete-project href="#delete-project"\r\n           title="'+((t=e.text.permissionMap.deleteProject)==null?"":t)+'">\r\n            <i class="rp-icons rp-icons-delete"></i>\r\n        </a>\r\n    </div>\r\n</div>\r\n<div class="project-cols-group">\r\n    <div class="grid-cell project-name-col">\r\n        <div class="project-title-mobile">\r\n            <h5>'+((t=e.text.admin.projectName)==null?"":t)+'</h5>\r\n        </div>\r\n        <h2 class="project-name">\r\n            <span class="name">\r\n                <a href="" class="project_details break-link" title="'+((t=e.text.admin.projectTitle)==null?"":t)+'"\r\n                   data-js-project-name></a>\r\n                <span class="label label-success hide" data-js-project-new>'+((t=e.text.admin.newProject)==null?"":t)+'</span>\r\n            </span>\r\n        </h2>\r\n    </div>\r\n    <div class="grid-cell project-kpi-col"></div>\r\n    <div class="grid-cell project-members-col">\r\n        <div class="project-title-mobile">\r\n            <h5>'+((t=e.text.admin.projectMembers)==null?"":t)+'</h5>\r\n        </div>\r\n        <div class="project-members">\r\n            <div class="project-info" data-js-project-users></div>\r\n        </div>\r\n    </div>\r\n    <div class="grid-cell project-launches-col">\r\n        <div class="project-title-mobile">\r\n            <h5>'+((t=e.text.topMenu.launches)==null?"":t)+'</h5>\r\n        </div>\r\n        <div class="project-launches">\r\n            <div class="project-info" data-js-project-launches></div>\r\n        </div>\r\n    </div>\r\n    <div class="grid-cell project-date-col">\r\n        <div class="project-title-mobile">\r\n            <h5>'+((t=e.text.admin.lastLaunchDate)==null?"":t)+'</h5>\r\n        </div>\r\n        <div class="project-date">\r\n            <div class="project-info" data-js-project-last-run></div>\r\n        </div>\r\n    </div>\r\n    <div class="grid-cell project-actions-col">\r\n        <div class="projects-actions">\r\n            <div class="project-link-wrapper">\r\n                <a class="project-link go-to-settings" title="'+((t=e.text.ui.settings)==null?"":t)+'" href=""\r\n                   data-js-settings-link>\r\n                    <i class="material-icons">settings</i>\r\n                </a>\r\n                <a class="project-link go-to-members" title="'+((t=e.text.ui.members)==null?"":t)+'" href="" data-js-members-link>\r\n                    <i class="rp-icons rp-icons-all-users"></i>\r\n                </a>\r\n                <a class="project-link go-to-project hide" title="'+((t=e.text.admin.goToProject)==null?"":t)+'"\r\n                   href="#open-project" data-js-go-to-project>\r\n                    <i class="material-icons">open_in_browser</i>\r\n                </a>\r\n                <a class="project-link assign-to-project hide" title="'+((t=e.text.admin.assignToProject)==null?"":t)+'"\r\n                   href="#assign-to-project" data-js-assign-to-project>\r\n                    <i class="material-icons">playlist_add_check</i>\r\n                </a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',n},this.JST["tpl-projects-list-head"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-table-thead">\r\n    <div class="project-delete-col">\r\n        <div class="rp-table-th text-center">'+((t=e.text.ui.delete)==null?"":t)+'</div>\r\n    </div>\r\n    <div class="project-cols-group">\r\n        <div class="grid-cell project-name-col">\r\n            <div class="rp-table-th">'+((t=e.text.admin.projectName)==null?"":t)+'</div>\r\n        </div>\r\n        <div class="grid-cell project-kpi-col">\r\n            <div class="rp-table-th">'+((t=e.text.admin.kpi)==null?"":t)+'</div>\r\n        </div>\r\n        <div class="grid-cell project-members-col">\r\n            <div class="rp-table-th">'+((t=e.text.admin.projectMembers)==null?"":t)+'</div>\r\n        </div>\r\n        <div class="grid-cell project-launches-col">\r\n            <div class="rp-table-th">'+((t=e.text.topMenu.launches)==null?"":t)+'</div>\r\n        </div>\r\n        <div class="grid-cell project-date-col">\r\n            <div class="rp-table-th">'+((t=e.text.admin.lastLaunchDate)==null?"":t)+'</div>\r\n        </div>\r\n        <div class="grid-cell project-actions-col">\r\n            <div class="rp-table-th text-center">'+((t=e.text.admin.actions)==null?"":t)+"</div>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-projects-list-shell"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-projects-list-header">\r\n    <div class="projects-list-search">\r\n        <div class="form-group projects-search">\r\n            <input type="text" value="" placeholder="'+((t=e.text.admin.searchByName)==null?"":t)+'" name="nameFilter"\r\n                   id="nameFilter" class="favorites-name-filter rp-input-search" data-js-filter-projects>\r\n            <i class="material-icons">search</i>\r\n            <div style="display:none;" class="error-hint help-inline"></div>\r\n        </div>\r\n    </div>\r\n    <div class="sort-projects-list">\r\n        <label class="form_label sort-label" for="sortDirection">\r\n            '+((t=e.text.admin.sortBy)==null?"":t)+'\r\n        </label>\r\n        <div class="rp-btn-group" id="sortDirection" data-js-sort-block>\r\n            <button type="button" class="rp-btn rp-btn-default-revers active asc" data-type="name">\r\n                '+((t=e.text.admin.name)==null?"":t)+'\r\n                <i class="material-icons arrow_up">keyboard_arrow_up</i>\r\n                <i class="material-icons arrow_down">keyboard_arrow_down</i>\r\n            </button>\r\n            <button type="button" class="rp-btn rp-btn-default-revers" data-type="creationDate">\r\n                '+((t=e.text.admin.creationDate)==null?"":t)+'\r\n                <i class="material-icons arrow_up">keyboard_arrow_up</i>\r\n                <i class="material-icons arrow_down">keyboard_arrow_down</i>\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div class="change-projects-view">\r\n        <ul class="rp-nav rp-nav-right projects-view-switcher" role="group">\r\n            <li>\r\n                <button class="projects-view projects-view-tile rp-btn rp-btn-default active"\r\n                        data-js-view-type="list">\r\n                    <i class="material-icons">view_module</i>\r\n                </button>\r\n            </li>\r\n            <li>\r\n                <button class="projects-view projects-view-table rp-btn rp-btn-default"\r\n                        data-js-view-type="table">\r\n                    <i class="material-icons">view_list</i>\r\n                </button>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n</div>\r\n<div class="rp-projects-list-body">\r\n    <ul class="nav nav-tabs nav-tabs-custom" role="tablist">\r\n        <li class="'+((t=!e.tab||e.tab==="internal"?"active":"")==null?"":t)+'">\r\n            <a href="#administrate/projects/internal" class="tab" data-js-tab-action="internal">\r\n                '+((t=e.text.admin.internalProjects)==null?"":t)+' <span data-js-internal-qty></span>\r\n            </a>\r\n        </li>\r\n        <li class="'+((t=e.tab==="personal"?"active":"")==null?"":t)+'">\r\n            <a href="#administrate/projects/personal" class="tab" data-js-tab-action="personal">\r\n                '+((t=e.text.admin.personalProjects)==null?"":t)+' <span data-js-personal-qty></span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n    <div class="nav-tabs-mobile">\r\n        <div class="dropdown">\r\n            <button type="button" class="rp-btn rp-btn-with-dropdown dropdown-toggle" data-toggle="dropdown" aria-expanded="true">\r\n                <span class="select-value" data-js-selected-tab></span>\r\n                <span class="rp-caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu">\r\n                <li><a href="#administrate/projects/internal" data-js-tab-action="internal">'+((t=e.text.admin.internalProjects)==null?"":t)+'</a></li>\r\n                <li><a href="#administrate/projects/personal" data-js-tab-action="personal">'+((t=e.text.admin.personalProjects)==null?"":t)+'</a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="tab-content">\r\n        <div role="tabpanel" class="tab-pane" data-js-tab-content="internal"></div>\r\n        <div role="tabpanel" class="tab-pane" data-js-tab-content="personal"></div>\r\n    </div>\r\n</div>',n},this.JST["tpl-projects-list"]=function(e){var t,n="",r=_.escape;return n+='<div data-js-projects-loader class="preloader">\r\n    <i class="material-icons loader-animation">refresh</i>\r\n</div>\r\n<div data-js-projects-content>\r\n    <div data-js-projects-list></div>\r\n    <div class="projects-paging" data-js-projects-paging></div>\r\n</div>\r\n<div data-js-projects-empty class="hide">\r\n    <div class="no-result-found">\r\n        <p class="no-result-title"><i class="rp-icons rp-icons-warning"></i> '+((t=e.text.admin.noProjectsFound)==null?"":t)+" '<span data-js-search-text></span>'</p>\r\n        <p>"+((t=e.text.ui.checkQuery)==null?"":t)+"</p>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-projects-table"]=function(e){var t,n="",r=_.escape;return n+='<div data-js-projects-loader class="projects-list-loader">\r\n    <i class="material-icons loader-animation">refresh</i>\r\n</div>\r\n<div class="container-fluid">\r\n    <div data-js-projects-list class="row"></div>\r\n</div>\r\n<div data-js-projects-paging></div>',n},this.JST["tpl-auth-server-organizations"]=function(e){var t,n="",r=_.escape;return n+='<label class="rp-field" data-js-org-row>\r\n    <span>'+((t=e.text.admin.gitHubOrgName)==null?"":t)+'</span>\r\n    <input type="text" class="rp-input" disabled data-js-org-name="'+r(e.name)+'" value="'+r(e.name)+'">\r\n    <span class="validate-hint"></span>\r\n    <a href="delete-organization" class="delete-item" data-js-delete-org>\r\n        <i class="rp-icons rp-icons-cancel"></i>\r\n    </a>\r\n</label>',n},this.JST["tpl-auth-server-settings"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-auth-server-settings">\r\n    <form class="rp-form">\r\n        <div class="rp-field">\r\n            <span>'+((t=e.text.admin.activateGitHubAuth)==null?"":t)+'</span>\r\n            <div class="github-auth-state-mobile" data-js-github-enable-mobile></div>\r\n            <label class="rp-switcher-big">\r\n                <span class="turn-on">ON</span>\r\n                <span class="turn-off">OFF</span>\r\n                <input type="checkbox" data-js-github-enable>\r\n                <div class="slider"></div>\r\n            </label>\r\n        </div>\r\n        <div data-js-github-config>\r\n            <label class="rp-field">\r\n                <span class="required">'+((t=e.text.admin.gitHubClientId)==null?"":t)+'</span>\r\n                <input type="text" class="rp-input" data-js-client-id>\r\n                <span class="validate-hint"></span>\r\n            </label>\r\n            <label class="rp-field">\r\n                <span class="required">'+((t=e.text.admin.gitHubClientSecret)==null?"":t)+'</span>\r\n                <input type="text" class="rp-input" data-js-client-secret>\r\n                <span class="validate-hint"></span>\r\n            </label>\r\n            <div data-js-onganizations></div>\r\n            <div data-js-add-org-form class="add-new-org-form hide">\r\n                <label class="rp-field" data-js-add-org-row>\r\n                    <span>'+((t=e.text.admin.gitHubOrgName)==null?"":t)+'</span>\r\n                    <input type="text" class="rp-input" data-js-new-org>\r\n                    <span class="validate-hint"></span>\r\n                    <a href="delete-organization" class="delete-item" data-js-remove-add-new-org>\r\n                        <i class="rp-icons rp-icons-cancel"></i>\r\n                    </a>\r\n                </label>\r\n            </div>\r\n            <div class="add-new-org-btn">\r\n                <label class="rp-field">\r\n                    <span></span>\r\n                    <button type="button" class="rp-btn rp-btn-default rp-button-with-icon" data-js-add-org-btn>\r\n                        <i class="material-icons">add</i>\r\n                        <span class="rp-btn-val">'+((t=e.text.admin.addGitHubOrg)==null?"":t)+'</span>\r\n                    </button>\r\n                </label>\r\n            </div>\r\n        </div>\r\n        <div class="rp-field">\r\n            <button type="button" class="rp-btn rp-btn-submit" data-js-submit-auth-settings>\r\n                '+((t=e.text.ui.submit)==null?"":t)+'\r\n            </button>\r\n        </div>\r\n    </form>\r\n    <div class="mobile-disabling-cover"></div>\r\n</div>',n},this.JST["tpl-email-server-settings"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-email-settings">\r\n    <form class="rp-form">\r\n        <div class="rp-field">\r\n            <span>'+((t=e.text.admin.enableEmailServer)==null?"":t)+'</span>\r\n            <div class="email-server-state-mobile" data-js-server-enable-mobile></div>\r\n            <label class="rp-switcher-big">\r\n                <span class="turn-on">ON</span>\r\n                <span class="turn-off">OFF</span>\r\n                <input type="checkbox" data-js-server-enable>\r\n                <div class="slider"></div>\r\n            </label>\r\n        </div>\r\n        <div data-js-server-config>\r\n            <label class="rp-field">\r\n                <span class="required">'+((t=e.text.admin.host)==null?"":t)+'</span>\r\n                <input type="text" class="rp-input" data-js-server-host>\r\n                <span class="validate-hint"></span>\r\n            </label>\r\n            <label class="rp-field">\r\n                <span>'+((t=e.text.admin.protocol)==null?"":t)+'</span>\r\n                <div data-js-server-protocol class="rp-field-item"></div>\r\n            </label>\r\n            <label class="rp-field">\r\n                <span>'+((t=e.text.admin.emailSender)==null?"":t)+'</span>\r\n                <input type="text" class="rp-input" data-js-server-sender>\r\n            </label>\r\n            <label class="rp-field">\r\n                <span class="required">'+((t=e.text.admin.port)==null?"":t)+'</span>\r\n                <input type="text" class="rp-input" data-js-server-port>\r\n                <span class="validate-hint"></span>\r\n            </label>\r\n            <label class="rp-field">\r\n                <span>'+((t=e.text.admin.authorization)==null?"":t)+'</span>\r\n                <div data-js-server-auth class="rp-field-item"></div>\r\n            </label>\r\n            <div class="auth" dats-js-server-auth-config>\r\n                <label class="rp-field">\r\n                    <span>'+((t=e.text.admin.username)==null?"":t)+'</span>\r\n                    <input type="text" class="rp-input" data-js-server-username>\r\n                </label>\r\n                <label class="rp-field">\r\n                    <span>'+((t=e.text.admin.password)==null?"":t)+'</span>\r\n                    <input type="password" class="rp-input" data-js-server-password>\r\n                </label>\r\n            </div>\r\n            <div class="rp-field">\r\n                <span></span>\r\n                <div class="tls-enabled">\r\n                    <label class="rp-checkbox-wrap" for="tls">\r\n                        <input data-js-tls-enabled class="rp-input-checkbox" type="checkbox" id="tls"\r\n                               data-js-server-tls>\r\n                        <span>'+((t=e.text.admin.TLS)==null?"":t)+'</span>\r\n                    </label>\r\n                    <label class="rp-checkbox-wrap" for="ssl">\r\n                        <input data-js-ssl-enabled class="rp-input-checkbox" type="checkbox" id="ssl"\r\n                               data-js-server-ssl>\r\n                        <span>'+((t=e.text.admin.SSL)==null?"":t)+'</span>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="rp-field email-server-error">\r\n            <div class="test-connection-alert" data-js-server-connection-message></div>\r\n        </div>\r\n        <div class="rp-field email-server-btn">\r\n            <button type="button" class="rp-btn rp-btn-submit" data-js-submit-server-settings>\r\n                '+((t=e.text.ui.submit)==null?"":t)+'\r\n            </button>\r\n        </div>\r\n    </form>\r\n    <div class="mobile-disabling-cover"></div>\r\n</div>\r\n',n},this.JST["tpl-server-settings-body"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-server-settings" data-js-settings></div>',n},this.JST["tpl-server-settings-header"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-admin-header">\r\n    <div class="admin-breadcrumbs" data-js-main-breadcrumbs></div>\r\n</div>',n},this.JST["tpl-server-settings-shell"]=function(e){var t,n="",r=_.escape;return n+='<ul class="nav-tabs-custom" role="tablist">\r\n    <li class="'+((t=e.tab==="email"?"active":"")==null?"":t)+'">\r\n        <a href="#administrate/settings/email" class="tab" data-js-tab-action="email">\r\n            '+((t=e.text.admin.emailSettings)==null?"":t)+'\r\n        </a>\r\n    </li>\r\n    <li class="'+((t=e.tab==="auth"?"active":"")==null?"":t)+'">\r\n        <a href="#administrate/settings/auth" class="tab" data-js-tab-action="auth">\r\n            '+((t=e.text.admin.authSettings)==null?"":t)+'\r\n        </a>\r\n    </li>\r\n</ul>\r\n<div class="tab-content setting-content-wrapper">\r\n    <div class="tab-pane '+((t=e.tab==="email"?"active":"")==null?"":t)+'" data-js-tab-content="email"></div>\r\n    <div class="tab-pane '+((t=e.tab==="auth"?"active":"")==null?"":t)+'" data-js-tab-content="auth"></div>\r\n</div>',n},this.JST["tpl-users-body"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-admin-all-users" data-js-all-users></div>',n},this.JST["tpl-users-header"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-admin-header">\r\n    <div class="admin-breadcrumbs" data-js-main-breadcrumbs></div>\r\n</div>',n},this.JST["tpl-users-item"]=function(e){var t,n="",r=_.escape;return n+='<div class="grid-cell action-grid-cell">\r\n    <div class="users-actions">\r\n        <a class="remove-user" href="#delete-user" title="'+((t=e.text.admin.deleteUser)==null?"":t)+'" data-js-delete-user>\r\n            <i class="rp-icons rp-icons-delete"></i>\r\n        </a>\r\n    </div>\r\n</div>\r\n<div class="user-row-inner">\r\n    <div class="grid-cell name-grid-cell">\r\n        <div class="user-wrap">\r\n            <div class="user-avatar">\r\n                <img data-js-user-avatar src=""/>\r\n            </div>\r\n            <div class="user-info">\r\n                <div class="user-info-wrap">\r\n                    <p class="user-name" data-js-user-name></p>\r\n                    <p class="user-you" data-js-user-you>'+((t=e.text.ui.you)==null?"":t)+'</p>\r\n                    <a class="user-admin" href="#remove-admin" data-js-user-admin>'+((t=e.text.ui.admin)==null?"":t)+'</a>\r\n                    <a class="make-admin" href="#make-admin" data-js-make-admin>'+((t=e.text.ui.makeAdmin)==null?"":t)+'</a>\r\n                    <br>\r\n                    <p class="user-login" data-js-user-login></p>\r\n                    <br>\r\n                    <p class="user-email"><a href="" class="rp-link" data-js-user-email></a></p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="grid-cell login-grid-cell">\r\n        <div class="user-title-mobile">'+((t=e.text.admin.lastLogin)==null?"":t)+':</div>\r\n        <div class="login-time show-time" data-js-login-time>\r\n            <span class="from-now" data-js-time-from-now></span>\r\n            <span class="exact-time" data-js-time-exact></span>\r\n        </div>\r\n    </div>\r\n    <div class="grid-cell role-grid-cell">\r\n        <div class="users-project-roles">\r\n            <a href="#viewProejcts" class="rp-btn rp-btn-default rp-button-with-icon" data-js-view-projects\r\n               title="'+((t=e.text.admin.viewProjects)==null?"":t)+'">\r\n                <i class="rp-icons rp-icons-eye"></i>\r\n                <span class="hidden-sm hidden-xs rp-btn-val">'+((t=e.text.admin.viewProjects)==null?"":t)+'</span>\r\n            </a>\r\n            <div class="users-project-mobile" data-js-user-projects-mobile></div>\r\n        </div>\r\n    </div>\r\n    <div class="clear-for-projects-list"></div>\r\n    <div data-js-user-projects></div>\r\n</div>',n},this.JST["tpl-users-project-add"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<form data-js-assign-form>\r\n    <div class="grid-cell project-name-cell">\r\n        <div class="project-select form-group" data-js-assign-form-group>\r\n            <input id="project" name="project" type="text" value="" data-js-project>\r\n            <div class="error-bottom">\r\n                <div class="help-inline" data-js-error-text></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="grid-cell project-role-cell">\r\n        <div class="user-select-role">\r\n            <div class="rp-btn-group rp-width-100">\r\n                <button type="button" class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                        data-toggle="dropdown">\r\n                    <span class="select-value" data-js-project-role></span>\r\n                    <span class="rp-caret"></span>\r\n                </button>\r\n                <ul class="dropdown-menu" data-js-dropdown-roles>\r\n                    ',_.each(e.roles,function(e,r){n+='\r\n                    <li>\r\n                        <a href="#" class="roles-option" data-value="'+((t=r)==null?"":t)+'">\r\n                            '+((t=e)==null?"":t)+"\r\n                        </a>\r\n                    </li>\r\n                    "}),n+='\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="grid-cell project-action-cell">\r\n        <div class="rp-btn rp-btn-default rp-button-with-icon" title="'+((t=e.text.members.assignProjectTitle)==null?"":t)+'"\r\n             data-js-assign>\r\n            <i class="rp-icons rp-icons-unassign"></i>\r\n        <span class="hidden-md hidden-sm hidden-xs rp-btn-val">\r\n            '+((t=e.text.members.assign)==null?"":t)+"\r\n        </span>\r\n        </div>\r\n    </div>\r\n</form>",n},this.JST["tpl-users-projects-item"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="grid-cell project-name-cell">\r\n    <div class="project-name" data-js-project></div>\r\n</div>\r\n<div class="grid-cell project-role-cell">\r\n    <div class="user-select-role">\r\n        <div class="rp-btn-group rp-width-100">\r\n            <button type="button" class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle" data-toggle="dropdown">\r\n                <span class="select-value" data-js-project-role></span>\r\n                <span class="rp-caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu" data-js-dropdown-roles>\r\n                ',_.each(e.roles,function(e,r){n+='\r\n                <li>\r\n                    <a href="#" class="roles-option" data-value="'+((t=r)==null?"":t)+'">\r\n                        '+((t=e)==null?"":t)+"\r\n                    </a>\r\n                </li>\r\n                "}),n+='\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="grid-cell project-action-cell">\r\n    <div class="rp-btn rp-btn-default rp-button-with-icon" title="'+((t=e.text.members.unAssignTitle)==null?"":t)+'" data-js-unassign>\r\n        <i class="rp-icons rp-icons-unassign"></i>\r\n        <span class="hidden-md hidden-sm hidden-xs rp-btn-val">\r\n            '+((t=e.text.members.unAssign)==null?"":t)+"\r\n        </span>\r\n    </div>\r\n</div>",n},this.JST["tpl-users-projects"]=function(e){var t,n="",r=_.escape;return n+='<div class="user-projects-table">\r\n    <div data-js-project-list></div>\r\n    <div data-js-loader class="preloader" style="display: block;">\r\n        <i class="material-icons loader-animation">refresh</i>\r\n    </div>\r\n    <div data-js-add-form></div>\r\n    <div class="row rp-table-row user-projects-row" data-js-add-project-row>\r\n        <div class="grid-cell project-name-cell">\r\n            <a class="rp-btn rp-btn-default rp-button-with-icon" href="#add-project"\r\n                 title="'+((t=e.text.admin.addProjectTitle)==null?"":t)+'" data-js-add-project>\r\n                <i class="material-icons">add</i>\r\n                <span class="hidden-md hidden-sm hidden-xs rp-btn-val">\r\n                    '+((t=e.text.admin.addUserProject)==null?"":t)+"\r\n                </span>\r\n            </a>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-users-shell"]=function(e){var t,n="",r=_.escape;return n+='<div class="all-users-actions">\r\n    <div class="all-users-filter">\r\n        <div class="rp-input-search-wrap">\r\n            <div class="input-filter form-group">\r\n                <input type="text" class="rp-input-search form-control" id="usersFilter" name="usersFilter"\r\n                       placeholder="" maxlength="128" data-js-users-search>\r\n                <i class="material-icons">search</i>\r\n                <div class="error-bottom">\r\n                    <div class="help-inline"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="all-users-buttons">\r\n        <button type="button" class="rp-btn rp-btn-default rp-button-with-icon not-small" data-js-add-user>\r\n            <i class="rp-icons rp-icons-add-user"></i>\r\n            <span class="rp-btn-val">'+r(e.text.members.addMember)+'</span>\r\n        </button>\r\n        <button type="button" class="rp-btn rp-btn-default rp-button-with-icon not-small" data-js-invite-user>\r\n            <i class="rp-icons rp-icons-invite-user"></i>\r\n            <span class="rp-btn-val">'+r(e.text.members.inviteMember)+'</span>\r\n        </button>\r\n    </div>\r\n</div>\r\n<div class="all-users-table rp-table-grid show-from-now" data-js-users-table>\r\n    <div class="row rp-grid-thead">\r\n        <div class="rp-grid-th grid-cell action-grid-cell">\r\n            <div class="table-wrapper">\r\n                <div class="middle-wrapper users-actions">\r\n                    <span class="rp-grid-th-name">'+((t=e.text.ui.delete)==null?"":t)+'</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="user-row-inner">\r\n            <div class="rp-grid-th grid-cell name-grid-cell">\r\n                <div class="table-wrapper">\r\n                    <div class="middle-wrapper">\r\n                        <span class="rp-grid-th-name">'+((t=e.text.members.titleNameLoginEmail)==null?"":t)+'</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="rp-grid-th grid-cell login-grid-cell">\r\n                <div class="table-wrapper">\r\n                    <div class="middle-wrapper">\r\n                        <span class="rp-grid-th-name">'+((t=e.text.admin.lastLogin)==null?"":t)+'</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="rp-grid-th grid-cell role-grid-cell">\r\n                <div class="table-wrapper">\r\n                    <div class="middle-wrapper">\r\n                        <span class="rp-grid-th-name">'+((t=e.text.admin.projectsRoles)==null?"":t)+"</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div data-js-users-list></div>\r\n</div>\r\n<div data-js-users-paginate></div>",n},this.JST["tpl-component-code-highlighter"]=function(e){var t,n="",r=_.escape;return n+="<pre><code data-js-code>"+r(e.binaryContent)+"</code></pre>\r\n",n},this.JST["tpl-component-colorpicker"]=function(e){var t,n="",r=_.escape;return n+='<input type="text" data-js-colorpicker-holder/>\r\n',n},this.JST["tpl-component-main-breadcrumbs-item"]=function(e){var t,n="",r=_.escape;return n+='<a href="" data-js-link></a>\r\n<span data-js-name></span>',n},this.JST["tpl-component-swipe-gallery"]=function(e){var t,n="",r=_.escape;return n+='<div data-js-block class="swipe-gallery-component">\r\n    <div class="ul_overflow">\r\n        <ul data-js-list></ul>\r\n        <div data-js-side-left class="side_left"></div>\r\n        <div data-js-side-right class="side_right"></div>\r\n    </div>\r\n</div>',n},this.JST["tpl-components-empty"]=function(e){var t,n="",r=_.escape;return n+='<div class="all_launches">\r\n    <div class="well">\r\n        <h3 class="title-no-data text-center">\r\n            <i class="rp-icons rp-icons-warning"></i>\r\n            <span class="warning">'+((t=e.text.ui.noResultsFound)==null?"":t)+"</span>\r\n        </h3>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-components-grid"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="all_launches table-responsive">\r\n    <table class="table table-hover table-striped" width="100%">\r\n        <tbody>\r\n        <tr>\r\n            ',_.each(e.headers,function(e,r,i){n+='\r\n            <th class="'+((t=e.spanclass)==null?"":t)+" ",e.sortable&&(n+=" sortable"),n+='">\r\n                    <span>\r\n                        '+((t=e.text)==null?"":t)+"\r\n                        ",e.direction==="ASC"&&(n+='\r\n                            <span class="dropup"><span class="caret"/></span>\r\n                        '),n+="\r\n                        ",e.direction==="DESC"&&(n+='\r\n                            <span class="dropdown"><span class="caret"/></span>\r\n                        '),n+="\r\n                    </span>\r\n            </th>\r\n            "}),n+="\r\n        </tr>\r\n        ",_.each(e.rows,function(e,r,i){n+='\r\n        <tr data-item-id="'+((t=e.itemId)==null?"":t)+'" class="'+((t=e.rowClass)==null?"":t)+'">'+((t=e.rowBody)==null?"":t)+"</tr>\r\n        "}),n+="\r\n        </tbody>\r\n    </table>\r\n</div>",n},this.JST["tpl-components-paging"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return e.minPaging?(n+='\r\n<div class="pagination-min-component">\r\n    <ul class="min-paging">\r\n        <li class="previous ',e.hasPrevious||(n+="disabled"),n+='"><i class="material-icons">keyboard_arrow_left</i></li>\r\n        <span class="min-paging-text"><span>'+((t=e.active)==null?"":t)+"</span>of<span>"+((t=e.totalPages)==null?"":t)+'</span></span>\r\n        <li class="next ',e.hasNext||(n+="disabled"),n+='"><i class="material-icons">keyboard_arrow_right</i></li>\r\n    </ul>\r\n</div>\r\n'):(n+='\r\n<div class="pagination-component row">\r\n    ',e.showControls&&(n+='\r\n    <ul class="clearfix">\r\n        <li class="first ',e.hasPrevious||(n+="disabled"),n+='"><i class="rp-icons rp-icons-left"></i> </li>\r\n        <li class="previous ',e.hasPrevious||(n+="disabled"),n+='"><i class="material-icons">keyboard_arrow_left</i></li>\r\n        ',e.pages[0]!=1&&(n+='\r\n        <li class="more">...</li>\r\n        '),n+="\r\n        ",_.each(e.pages,function(r,i,s){n+='\r\n        <li class="',e.active===r?n+="active":n+=" page ",n+='">'+((t=r)==null?"":t)+"</li>\r\n        "}),n+="\r\n        ",e.pages[e.pages.length-1]*e.objectsOnPage<e.totalElements&&(n+='\r\n        <li class="more">...</li>\r\n        '),n+='\r\n        <li class="next ',e.hasNext||(n+="disabled"),n+='"><i class="material-icons">keyboard_arrow_right</i></li>\r\n        <li class="last ',e.hasNext||(n+="disabled"),n+='"><i class="rp-icons rp-icons-right"></i></li>\r\n    </ul>\r\n    '),n+='\r\n    <div class="left-block">\r\n        '+((t=e.from)==null?"":t)+" - ",e.to<e.totalElements?n+=(t=e.to)==null?"":t:n+=(t=e.totalElements)==null?"":t,n+=" of "+((t=e.totalElements)==null?"":t)+'\r\n    </div>\r\n    <div class="right-block">\r\n        <input type="text" maxlength="3" data-js-per-page-input>\r\n        <span class="per-page" data-js-per-page>'+((t=e.objectsOnPage)==null?"":t)+"</span>\r\n        <span> per page</span>\r\n    </div>\r\n\r\n</div>\r\n"),n},this.JST["tpl-dialog-buttons"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return e.hideDismiss||(n+='\r\n<button data-dismiss="modal" class="rp-btn rp-btn-cancel" type="button">\r\n    '+((t=e.text.ui[e.dismissTxt||"cancel"])==null?"":t)+"\r\n</button>\r\n"),n+='\r\n<button class="rp-btn rp-btn-submit '+((t=e.actionStatus?"":"disabled")==null?"":t)+'" id="actionBtnDialog" type="button">\r\n    '+((t=e.text.ui[e.actionTxt||"save"])==null?"":t)+"\r\n</button>",n},this.JST["tpl-dialog-shell"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="modal fade dialog-shell rp-modal-dialog" id="customDialogModal" tabindex="-1" role="dialog" aria-labelledby="customDialogModal" aria-hidden="true">\r\n    <div class="modal-dialog modal-'+((t=e.size)==null?"":t)+'">\r\n        <div class="modal-content">\r\n            '+((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.dialog[e.headerTxt]}))==null?"":t)+'\r\n            <!--<div class="modal-header">-->\r\n                <!--<h2 class="col-lg-10 col-md-10 col-sm-10 col-xs-10 break-link">-->\r\n                    <!--'+((t=e.text.dialog[e.headerTxt])==null?"":t)+"-->\r\n                    <!--",e.isBeta&&(n+='-->\r\n                    <!--<span class="label label-above label-success">'+((t=e.text.project.beta)==null?"":t)+"</span>-->\r\n                    <!--"),n+='-->\r\n                <!--</h2>-->\r\n                <!--<div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 panel-action">-->\r\n                    <!--<sapn class="close-pop-up" data-js-close data-dismiss="modal">-->\r\n                        <!--<i class="material-icons">clear</i>-->\r\n                    <!--</span>-->\r\n                <!--</div>-->\r\n            <!--</div>-->\r\n            <div class="modal-body clearfix" id="contentModal"></div>\r\n            <div class="modal-footer">\r\n                <div class="pull-right" id="buttonsModal"></div>\r\n            </div>\r\n            <div class="shared-loader" id="dialogShellLoader" style="display:none;">\r\n                <i class="material-icons loader-animation">autorenew</i>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',n},this.JST["tpl-drop-down-component"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<button type="button" class="rp-btn rp-btn-with-dropdown dropdown-toggle" data-toggle="dropdown" >\r\n    <span class="select-value" data-js-select-value>'+r(e.placeholder)+'</span>\r\n    <span class="rp-caret"></span>\r\n    <div class="validate-hint-wrapper">\r\n        <div class="validate-hint" data-js-hint-message></div>\r\n    </div>\r\n</button>\r\n<ul class="dropdown-menu">\r\n    ',_.each(e.data,function(t){n+="\r\n    <li>\r\n        ",e.multiple?n+='\r\n        <label class="checkbox rp-checkbox-wrap" data-js-label>\r\n            <input class="criteria-option rp-input-checkbox" type="checkbox" data-value="'+r(t.value)+'", data-name="'+r(t.name)+'">\r\n            <span>'+r(t.name)+"</span>\r\n        </label>\r\n        ":n+='\r\n        <a href="#" data-value="'+r(t.value)+'">'+r(t.name)+"</a>\r\n        ",n+="\r\n    </li>\r\n    "}),n+="\r\n</ul>\r\n",n},this.JST["tpl-markdown-editor"]=function(e){var t,n="",r=_.escape;return n+="<textarea data-js-text-area></textarea>\r\n",n},this.JST["tpl-dashboard-addnew-form"]=function(e){var t,n="",r=_.escape;return n+='<div role="tabpanel" class="modal-dialog-create-new-dashboard">\r\n    <ul class="nav-tabs-custom clearfix" role="tablist">\r\n        <li role="presentation" class="active">\r\n            <a href="#createNewDashboard" aria-controls="createNewDashboard" role="tab" data-toggle="tab">\r\n                '+((t=e.text.dashboard.createDashboard)==null?"":t)+'\r\n            </a>\r\n        </li>\r\n        <li role="presentation">\r\n            <a href="#shareDashboard" aria-controls="shareDashboard" role="tab" data-toggle="tab">\r\n                '+((t=e.text.dashboard.shareDashboard)==null?"":t)+'\r\n            </a>\r\n        </li>\r\n    </ul>    <div class="tab-content">\r\n        <div role="tabpanel" class="tab-pane active" id="createNewDashboard">\r\n            <div class="rp-form-group">\r\n                <div class="col-md-9 col-sm-9 col-xs-8 rp-custom-col">\r\n                    <label class="control-label rp-control-label">\r\n                        '+((t=e.text.dashboard.dashboardName)==null?"":t)+'\r\n                    </label>\r\n                    <div>\r\n                        <input type="text"\r\n                            id="dashboardName"\r\n                            placeholder="'+((t=e.text.dashboard.nameNewDashboard)==null?"":t)+'"\r\n                            class="rp-input rp-width-100">\r\n                        <span class="help-inline"></span>\r\n                    </div>\r\n                </div>                <div class="col-md-3 col-sm-3 col-xs-4 rp-custom-col">\r\n                    <label class="rp-control-label control-label">\r\n                        '+((t=e.text.dashboard.share)==null?"":t)+'\r\n                    </label>\r\n                    <div>\r\n                        <input type="checkbox" class="js-switch" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>        <div role="tabpanel" class="tab-pane" id="shareDashboard">\r\n            <div class="rp-dashboard-overflow b-shareddash-list">\r\n                <div class="shared-loader">\r\n                    <i class="material-icons loader-animation">autorenew</i>\r\n                </div>\r\n                <div class="borderWidget rp-dashboard-content"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div> ',n},this.JST["tpl-dashboard-form-shared-list"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return _.isEmpty(e.items)?n+='\r\n    <div class="no-dashboards">\r\n        <h3 class="title-no-data text-center">\r\n            <i class="rp-icons rp-icons-warning"></i>\r\n            <span class="warning">'+((t=e.text.dashboard.sharedNoFound)==null?"":t)+"</span>\r\n        </h3>\r\n    </div>\r\n":(n+='\r\n    <ul class="dashboard_list clearfix">\r\n        <li class="thead-dashboard-list clearfix">\r\n           <div class="col-md-6 col-sm-6 col-xs-6">'+((t=e.text.dashboard.tHeadTitleOwners)==null?"":t)+'</div>\r\n           <div class="col-md-6 col-sm-6 col-xs-6">'+((t=e.text.dashboard.tHeadTitleDashboardName)==null?"":t)+"</div>\r\n        </li>\r\n        ",_.each(e.items,function(i){n+='\r\n            <li class="title user_name clearfix">\r\n                <div class="col-md-6 col-sm-6 col-xs-6">\r\n                    '+((t=i.name)==null?"":t)+'\r\n                </div>\r\n                <div class="col-md-6 col-sm-6 col-xs-6">\r\n                    ',_.each(i.dashboards,function(i){n+='\r\n                        <p class="dashboard_title clearfix">\r\n                            ',i.dublicate?n+='\r\n                                <a class="shared-dashboard disabled-link"\r\n                                    title="'+((t=e.text.dashboard.dashboardExists)==null?"":t)+'"\r\n                                    href="#'+((t=i.id)==null?"":t)+'"\r\n                                    data-dashboard-id="'+((t=i.id)==null?"":t)+'">\r\n                                    '+r(i.name)+"\r\n                                </a>\r\n                            ":n+='\r\n                                <a class="shared-dashboard"\r\n                                    href="#'+((t=i.id)==null?"":t)+'"\r\n                                    data-dashboard-id="'+((t=i.id)==null?"":t)+'">\r\n                                    '+r(i.name)+"\r\n                                </a>\r\n                            ",n+="\r\n                        </p>\r\n                    "}),n+="\r\n                </div>\r\n            </li>\r\n        "}),n+="\r\n    </ul>\r\n"),n+="\r\n",n},this.JST["tpl-dashboard-menu-item"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<a id="'+((t=e.id)==null?"":t)+'" href="#'+r(e.currentProjectUrl)+"/dashboard/"+((t=e.id)==null?"":t)+'" class="dashboard-item">\r\n    <span class="dashboard-name '+r(e.editable)+'">\r\n        ',e.isFavorite&&(n+='\r\n        <span class="label label-default" title="'+r(e.owner.capitalizeName())+'">'+r(e.owner.capitalizeName().getCapitalizedOnly())+"</span>\r\n        "),n+="\r\n        ";var o=e.name.split(" ");return n+="\r\n        ",_.each(o,function(e){n+="\r\n            ",e.length>12?n+='\r\n                <span style="display: inline-block; word-break: break-all">'+r(e)+"</span>\r\n            ":n+="\r\n                "+r(e)+"\r\n            ",n+="\r\n        "}),n+="\r\n        ",e.isFavoriteNotShared&&(n+='\r\n            &nbsp;<i class="material-icons" title="Dashboard not shared">visibility_off</i>\r\n        '),n+='\r\n    </span>\r\n    <span class="dashboard-buttons">\r\n        ',e.editable&&(n+='\r\n        <button class="edit" title="'+((t=e.text.dashboard.titleEditDashboard)==null?"":t)+'">\r\n            <span class="glyphicon glyphicon-edit"></span>'+((t=e.text.dashboard.editDashboard)==null?"":t)+"\r\n        </button>\r\n        "),n+='\r\n        <button class="remove" title="'+((t=e.text.dashboard.titleRemoveDashboard)==null?"":t)+'">\r\n            <span class="glyphicon glyphicon-remove"></span>'+((t=e.text.dashboard.removeDashboard)==null?"":t)+"\r\n        </button>\r\n    </span>\r\n</a>\r\n",n},this.JST["tpl-dashboard-menu-view"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div id="headerBar" class="dashboard-header-wrap clearfix">\r\n    ';if(!_.isEmpty(e.dashboards)){n+='\r\n    <ul class="rp-nav rp-nav-left dashboard-title clearfix">\r\n        <li>\r\n            <a href="#"\r\n                class="break-link"\r\n                data-is-shared="'+((t=!!(e.currentDashboard&&e.currentDashboard.owner&&e.currentDashboard.owner!==e.user.name))==null?"":t)+'">\r\n                <i class="rp-svg-icon svg-icon-menu-size-14"></i>\r\n                ';if(e.currentDashboard){n+="\r\n                    ",e.currentDashboard.owner&&e.currentDashboard.name?n+="\r\n                        <span>"+r(e.currentDashboard.name)+"</span>\r\n                    ":n+="\r\n                        <span>"+((t=e.text.dashboard.deletedDashboard)==null?"":t)+"</span>\r\n                    ",n+="\r\n                    ";if(e.currentDashboard.owner&&e.currentDashboard.owner!==e.user.name){n+="\r\n                        ";var o=e.currentDashboard.owner.capitalizeName();n+='\r\n                        <span class="rp-shared-dashboard">\r\n                            (<span title="'+((t=e.text.dashboard.dashboardShared)==null?"":t)+" "+r(o)+'"><i class="material-icons">public</i>'+((t=e.text.widgets.sharedBy)==null?"":t)+" "+r(o)+"</span>)\r\n                        </span>\r\n                    "}n+="\r\n                "}else n+="\r\n                    <span>"+((t=e.text.dashboard.selectDashboard)==null?"":t)+"</span>\r\n                ";n+='\r\n                <i class="material-icons">arrow_drop_down</i>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n    '}else n+='\r\n        <div class="action-panel-dashboard float-left clearfix">\r\n            <button class="rp-btn rp-btn-default rp-button-with-icon add-new-dashboard">\r\n                <i class="material-icons">add</i>\r\n                <span class="hidden-xs rp-btn-val">\r\n                    '+((t=e.text.dashboard.addNewDashboard)==null?"":t)+"\r\n                </span>\r\n            </button>\r\n        </div>\r\n    ";n+="\r\n    ";if(e.currentDashboard){n+='\r\n    <!-- <ul class="nav nav-pills rp-nav-right dashboard-edits"> -->\r\n        <ul class="rp-nav rp-nav-right clearfix">\r\n            ';var u=!!e.currentDashboard.isDirectLinkDashboard;n+="\r\n            ";var a=u?"disabled":"";n+='\r\n                <li class="'+((t=a)==null?"":t)+' float-right margin-left-10 rp-item-li-fix-height">\r\n                    <a href="#remove" class="rp-btn rp-btn-default rp-button-with-icon remove-dashboard">\r\n                        <i class="material-icons">clear</i>\r\n                        <span class="hidden-sm hidden-xs rp-btn-val">\r\n                            '+((t=e.text.dashboard.remove)==null?"":t)+"\r\n                        </span>\r\n                    </a>\r\n                </li>\r\n            ",n+="\r\n            ",e.currentDashboard.owner==e.user.name&&(n+='\r\n                <li class="float-right margin-left-10 rp-item-li-fix-height">\r\n                    <a href="#settings" class="rp-btn rp-btn-default rp-button-with-icon edit-dashboard">\r\n                        <i class="material-icons">settings</i>\r\n                        <span class="hidden-sm hidden-xs rp-btn-val">\r\n                            '+((t=e.text.dashboard.settingsButton)==null?"":t)+'\r\n                        </span>\r\n                    </a>\r\n                </li>\r\n                <li class="float-right margin-left-10 rp-item-li-fix-height">\r\n                    <a href="#" class="rp-btn rp-btn-default rp-button-with-icon add-widget">\r\n                        <i class="material-icons">add_circle</i>\r\n                        <span class="hidden-sm hidden-xs rp-btn-val">\r\n                            '+((t=e.text.dashboard.addWidget)==null?"":t)+"\r\n                        </span>\r\n                    </a>\r\n                </li>\r\n            "),n+="\r\n            ",n+='\r\n            <li class="float-right margin-left-10 rp-item-li-fix-height">\r\n                <a href="#fullscreen" class="rp-btn rp-btn-default rp-button-with-icon fullscreen-dashboard">\r\n                    <i class="material-icons">zoom_out_map</i>\r\n                    <span class="hidden-sm hidden-xs rp-btn-val">\r\n                        '+((t=e.text.dashboard.fullscreen)==null?"":t)+"\r\n                    </span>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    "}return n+="\r\n</div>\r\n",n},this.JST["tpl-dashboard-notfound"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="no-dashboards">\r\n    <div class="well">\r\n        <h3 class="title-no-data text-center">\r\n            <i class="rp-icons rp-icons-warning"></i>\r\n            <span class="warning">\r\n                ',e.notfound?n+="\r\n                    "+((t=e.text.dashboard.noDashboard)==null?"":t)+"\r\n                ":e.no_dashboards?n+="\r\n                    "+((t=e.text.dashboard.dashboardsEmpty)==null?"":t)+"\r\n                ":e.dashboardIsNotShared?n+="\r\n                    "+((t=e.text.dashboard.dashboardIsNotShared)==null?"":t)+"\r\n                ":e.deletedShared?n+="\r\n                    "+((t=e.text.dashboard.deletedSharedDashboard)==null?"":t)+"\r\n                ":e.notShared?n+="\r\n                    "+((t=e.text.dashboard.dashboardNotShared)==null?"":t)+"\r\n                ":e.noWidgets?n+="\r\n                    "+((t=e.text.dashboard.widgetEmpty)==null?"":t)+'\r\n                    <span id="clickToAddWidget">\r\n                        '+((t=e.text.dashboard.clickToAddWidget)==null?"":t)+"\r\n                    </span>\r\n                ":e.sharedEmpty&&(n+="\r\n                    "+((t=e.text.dashboard.noWidgetsInDashBoard)==null?"":t)+"\r\n                "),n+="\r\n            </span>\r\n        </h3>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-dashboard-settings-form"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="form-group col-sm-9">\r\n    <label class="rp-control-label">'+((t=e.text.dashboard.dashboardName)==null?"":t)+'</label>\r\n    <div>\r\n        <input type="text" id="dashboardName" placeholder="'+r(e.name)+'" value="'+r(e.name)+'" class="rp-input rp-width-100">\r\n        <span class="help-inline"></span>\r\n    </div>\r\n</div>\r\n<div class="form-group col-sm-3 ">\r\n    <label class="rp-control-label">'+((t=e.text.filter.share)==null?"":t)+'</label>\r\n    <div>\r\n        <input type="checkbox" class="js-switch" ',e.shared&&(n+=' checked="checked" '),n+=" />\r\n    </div>\r\n</div>",n},this.JST["tpl-dashboard-widget"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="widgets-list grid-stack" data-gs-width="12"></div>\r\n',e.noShared&&(n+='\r\n<div class="row">\r\n    <div class="col-md-12">\r\n        <div class="panel rb-panel-btn">\r\n            <a href="#" id="addNewWidget" class="btn btn-block rb-btn-settings">'+((t=e.text.widgets.clickToAdd)==null?"":t)+"</a>\r\n        </div>\r\n    </div>\r\n</div>\r\n"),n},this.JST["tpl-dashboards-list-item"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+="<li ",e.active&&(n+=' class="active"'),n+=' >\r\n    <a class="dashboard-project-link clearfix"\r\n        href="#'+((t=e.projectUrl)==null?"":t)+"/dashboard/"+((t=e.dash.id)==null?"":t)+'"\r\n        id="'+((t=e.dash.id)==null?"":t)+'"\r\n        title="'+((t=e.dash.name)==null?"":t)+'">\r\n        <span class="dashboard-project-name">'+r(e.dash.name)+"</span>\r\n        ",e.dash.isShared&&(n+='\r\n            <i class="material-icons">reply</i>\r\n        '),n+="\r\n    </a>\r\n</li>",n},this.JST["tpl-dashboards-list-my"]=function(e){var t,n="",r=_.escape;return n+="<h4>"+((t=e.text.dashboard.myDashboards)==null?"":t)+'</h4>\r\n<div class="container-fluid">\r\n    <div class="row">\r\n        <div class="borderWidget my-dashboards-list">\r\n            <div class="columnWidget">\r\n                <ul>\r\n                </ul>\r\n            </div>\r\n            <div class="columnWidget">\r\n                <ul>\r\n                </ul>\r\n            </div>\r\n            <div class="columnWidget">\r\n                <ul>\r\n                </ul>\r\n            </div>\r\n            <div class="columnWidget">\r\n                <ul>\r\n                </ul>\r\n            </div>\r\n            <div class="columnWidget">\r\n                <ul>\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',n},this.JST["tpl-dashboards-list-shared"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=0;return n+="\r\n<h4>"+((t=e.text.dashboard.favoriteDashboards)==null?"":t)+'</h4>\r\n<div class="container-fluid">\r\n    <div class="row">\r\n        <div class="borderWidget shared-dashboards-list">\r\n            ',_.each(e.items,function(i){n+="\r\n                ",o+=1,n+='\r\n                <div class="columnWidget">\r\n                    <ul>\r\n                        <li class="title">\r\n                            ',i.owner?n+="\r\n                                "+((t=e.text.ui.by)==null?"":t)+" "+r(i.name)+"\r\n                            ":n+="\r\n                                "+((t=e.text.dashboard.deletedByOwner)==null?"":t)+"\r\n                            ",n+="\r\n                        </li>\r\n                        ",_.each(i.dashboards,function(s){n+="\r\n                            <li ",e.activeId==s.id&&(n+='class="active"'),n+='>\r\n                                <a id="'+((t=s.id)==null?"":t)+'"\r\n                                    ',i.owner||(n+='class="disabled"'),n+='\r\n                                    href="#'+r(e.projectUrl)+"/dashboard/"+((t=s.id)==null?"":t)+'">\r\n                                        ',i.owner?(n+="\r\n                                            "+r(s.name)+"\r\n                                            ",s.isShared||(n+='\r\n                                                <span class="unshared-dashboard"\r\n                                                    data-js-unshared-dashboard\r\n                                                    title="'+((t=e.text.dashboard.dashboardNotShared)==null?"":t)+'">\r\n                                                    <i class="material-icons">clear</i>\r\n                                                </span>\r\n                                            '),n+="\r\n                                        "):n+='\r\n                                            <span class="remove"\r\n                                                data-js-remove-dashboard\r\n                                                title="'+((t=e.text.dashboard.removeDashboard)==null?"":t)+'">\r\n                                                <i class="material-icons">clear</i>\r\n                                            </span>\r\n                                            '+((t=e.text.dashboard.deletedDashboard)==null?"":t)+"\r\n                                        ",n+="\r\n                                </a>\r\n                            </li>\r\n                        "}),n+="\r\n                    </ul>\r\n                </div>\r\n                ",o%5===0&&(n+='\r\n                    <div class="clearfix"></div>\r\n                '),n+="\r\n            "}),n+="\r\n        </div>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-dashboards-list"]=function(e){var t,n="",r=_.escape;return n+='<div class="dashboards-container">\r\n    <div class="add-dash-button">\r\n        <button class="rp-btn rp-btn-default rp-button-with-icon not-small add-new-dashboard">\r\n            <i class="material-icons">add</i>\r\n            <span class="rp-btn-val">'+((t=e.text.dashboard.addNewDashboard)==null?"":t)+"</span>\r\n        </button>\r\n    </div>\r\n</div>",n},this.JST["tpl-documentation-anchor"]=function(e){var t,n="",r=_.escape;return n+='<a href="#documentation/'+((t=e.anchor)==null?"":t)+'" name="'+((t=e.currentIndex.toLowerCase())==null?"":t)+'" class="anchor">\r\n    <span class="anchor-target" id="'+((t=e.currentIndex)==null?"":t)+'"></span>\r\n    <span class="anchor glyphicon glyphicon-link"></span>\r\n</a>',n},this.JST["tpl-documentation-content"]=function(e){var t,n="",r=_.escape;return n+='<div class="b-docs__wrapper"></div>',n},this.JST["tpl-documentation-menu-item"]=function(e){var t,n="",r=_.escape;return n+='<li class="g-nav--scrolled" data-question-id=\''+((t=e.id)==null?"":t)+"'>\r\n    <a href=\"#documentation/"+((t=e.titleForIndex)==null?"":t)+'" data-id="'+((t=e.titleForIndex)==null?"":t)+'">'+((t=e.title)==null?"":t)+"</a>\r\n</li>",n},this.JST["tpl-documentation-menu"]=function(e){var t,n="",r=_.escape;return n+='<div class="controls">\r\n    <div class="docs-controls" data-js-content-search>\r\n        <i class="rp-icons rp-icons-search"></i>\r\n        <input type="search" class="rp-input" id="search" placeholder="Search...">\r\n        <a class="all" data-show-all><i class="material-icons">clear</i><span>All</span></a>\r\n        <a class="search-cancel" data-js-search-cancel>Cancel</a>\r\n    </div>\r\n    <div class="content-search-btn" data-js-show-serach><i class="rp-icons rp-icons-search"></i></div>\r\n    <a href="#" class="menu-title dropdown-toggle" data-toggle="dropdown" data-js-content-dropdown>\r\n        <span class="selected-project" title="Current active project">TABLE OF CONTENT</span>\r\n        <i class="material-icons">keyboard_arrow_down</i>\r\n    </a>\r\n    <ul class="nav sidenav dropdown-menu"></ul>\r\n    <p class="doc-menu-not-found">No result found</p>\r\n</div>\r\n',n},this.JST["tpl-documentation-question-view"]=function(e){var t,n="",r=_.escape;return n+="<h1>"+((t=e.title)==null?"":t)+"</h1>\r\n"+((t=e.body)==null?"":t),n},this.JST["tpl-documentation-questions-list"]=function(e){var t,n="",r=_.escape;return n+='    <li data-question-id="'+((t=e.id)==null?"":t)+'" class="not-nested">\r\n        <a href="#documentation/'+((t=e.titleForIndex)==null?"":t)+'">\r\n            '+((t=e.title)==null?"":t)+'\r\n        </a>\r\n        <ul class="nav"></ul>\r\n    </li>',n},this.JST["tpl-documentation-section-menu"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<ul id="toc">\r\n    ',_.each(e.menu,function(e){n+='\r\n       <li class="toc-level toc-level-'+((t=e.level)==null?"":t)+'"><a href="#documentation/'+((t=e.link)==null?"":t)+'">'+((t=e.title)==null?"":t)+"</a></li>\r\n      "}),n+="\r\n</ul>",n},this.JST["tpl-documentation-view"]=function(e){var t,n="",r=_.escape;return n+='<div class="documentation-block">\r\n    <div class="b-docs__nav js-docnav col-sm-3 col-lg-2" id="navigation"></div>\r\n    <div class="b-docs__content b-content js-content col-sm-9 col-sm-offset-3 col-md-offset-3 col-md-9 col-lg-offset-2 col-lg-10"></div>\r\n</div>\r\n<div class="documentation-not-available">\r\n    <div class="preview"></div>\r\n    <h1>'+r(e.text.landing.documentation.notAvailable)+"</h1>\r\n    <p>"+r(e.text.landing.documentation.notAvailableText)+'<a href="#">'+r(e.text.landing.documentation.notAvailableLink)+"</a></p>\r\n</div>\r\n",n},this.JST["tpl-favorite-item"]=function(e){var t,n="",r=_.escape;return n+='\r\n    <div class="grid-cell name-grid-cell">\r\n        <div class="visible-md visible-lg visible-xl">\r\n            <a class="rp-link" data-js-filter-link></a><span data-js-filter-name></span>&nbsp;&nbsp;<i class="filter-edit material-icons" data-js-filter-edit>edit</i>\r\n            <p class="description-item" data-js-description></p>\r\n        </div>\r\n        <div class="mobile-title visible-sm visible-xs">\r\n            <div class="row">\r\n                <div class="col-xs-10">\r\n                    <a class="rp-link" data-js-filter-link></a>\r\n                    <span  data-js-filter-name></span>\r\n                    <i class="material-icons filter-edit-mobile" data-js-filter-edit>edit</i>\r\n                </div>\r\n                <div class="col-xs-2" >\r\n                    <i class="rp-icons rp-icons-delete" data-js-remove></i>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="grid-cell option-grid-cell">\r\n            <span class="" data-js-filter-options></span>\r\n    </div>\r\n    <div class="grid-cell owner-grid-cell">\r\n        <div class="visible-md visible-lg">\r\n            <span class="" data-js-owner></span>\r\n        </div>\r\n        <div class="visible-sm visible-xs">\r\n            <span class="description">'+r(e.text.favorites.fOwner)+': </span>\r\n            <span class="" data-js-owner></span>\r\n        </div>\r\n    </div>\r\n    <div class="grid-cell icons-grid-cell">\r\n        <div class="text-center visible-md visible-lg" data-js-filter-shared>\r\n            <i class="material-icons" data-js-filter-shared-icon>check</i>\r\n        </div>\r\n        <div class="visible-sm visible-xs" data-js-filter-shared>\r\n            <span class="description">'+r(e.text.favorites.fShared)+': </span>\r\n            <i class="material-icons" data-js-filter-shared-icon>check</i>\r\n        </div>\r\n    </div>\r\n    <div class="grid-cell display-launch-grid-cell switcher-block">\r\n        <div class="text-center visible-md visible-lg">\r\n            <label class="rp-switcher">\r\n                <input type="checkbox" data-js-switch-to-launch>\r\n                <div class="slider"></div>\r\n            </label>\r\n            <span class="switcher-text" data-js-switch-to-launch-text></span>\r\n        </div>\r\n        <div class="visible-sm visible-xs">\r\n            <span class="description">'+r(e.text.favorites.fDisplayOnLaunches)+': </span>\r\n            <label class="rp-switcher rp-switcher-sm">\r\n                <input type="checkbox" data-js-switch-to-launch-mobile>\r\n                <div class="slider"></div>\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="grid-cell icons-grid-cell visible-md visible-lg">\r\n        <div class="md-text-center">\r\n            <i class="rp-icons rp-icons-delete" data-js-remove></i>\r\n        </div>\r\n    </div>',n},this.JST["tpl-favorite-page"]=function(e){var t,n="",r=_.escape;return n+='\r\n<div id="filter-page" class="container-fluid rp-margin-reset rp-odd-even rp-table-hover">\r\n    <div class="row">\r\n        <div class="filter-header">\r\n            <div class="col-md-4 col-xs-7">\r\n                <div class="input-filter form-group">\r\n                    <input type="text" class="rp-input-search favorites-name-filter rp-input-sm form-control" data-js-filter-name name="userFilter" placeholder="Search by Name" value="">\r\n                    <i class="material-icons">search</i>\r\n                    <div class="error-bottom">\r\n                        <div class="help-inline"></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-5 search-description">\r\n                '+r(e.text.favorites.msgFavoriteFilters)+'\r\n            </div>\r\n            <div class="col-md-3 col-xs-5">\r\n                <button type="button" class="rp-btn rp-btn-default rp-button-with-icon not-small float-right" data-js-add-filter>\r\n                    <i class="rp-icons rp-icons-add-filter"></i>\r\n                    <span class="rp-btn-val">'+r(e.text.favorites.addFilter)+'</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="rp-table-grid favorites-grid">\r\n        <div class="row rp-grid-thead fixed_table_header visible-md visible-lg visible-xl">\r\n            <div class="grid-cell name-grid-cell rp-grid-th">\r\n                <div class="table-wrapper"><div class="middle-wrapper">\r\n                    <span class="rp-grid-th-name">'+r(e.text.favorites.fName)+'</span>\r\n                </div></div>\r\n            </div>\r\n            <div class="grid-cell option-grid-cell rp-grid-th">\r\n                <div class="table-wrapper"><div class="middle-wrapper">\r\n                    <span class="rp-grid-th-name">'+r(e.text.favorites.fOptions)+'</span>\r\n                </div></div>\r\n            </div>\r\n            <div class="grid-cell owner-grid-cell rp-grid-th">\r\n                <div class="table-wrapper"><div class="middle-wrapper">\r\n                    <span class="rp-grid-th-name">'+r(e.text.favorites.fOwner)+'</span>\r\n                </div></div>\r\n            </div>\r\n            <div class="grid-cell icons-grid-cell rp-grid-th text-center">\r\n                <div class="table-wrapper"><div class="middle-wrapper">\r\n                    <span class="rp-grid-th-name">'+r(e.text.favorites.fShared)+'</span>\r\n                </div></div>\r\n            </div>\r\n            <div class="grid-cell display-launch-grid-cell rp-grid-th text-center">\r\n                <div class="table-wrapper"><div class="middle-wrapper">\r\n                    <span class="rp-grid-th-name">'+r(e.text.favorites.fDisplayOnLaunches)+'</span>\r\n                </div></div>\r\n            </div>\r\n            <div class="grid-cell icons-grid-cell rp-grid-th text-center">\r\n                <div class="table-wrapper"><div class="middle-wrapper">\r\n                    <span class="rp-grid-th-name">'+r(e.text.favorites.fDelete)+'</span>\r\n                </div></div>\r\n            </div>\r\n        </div>\r\n        <div data-js-filter-list></div>\r\n    </div>\r\n\r\n    <div class="no-filters-exist" data-js-empty-block>\r\n        <div class="no-filter-img"></div>\r\n        <h3>There Are No Filters</h3>\r\n        <p>You can create your first filter on the <a href="#" class="rp-link" data-js-link-launch>Launch Page</a></p>\r\n        <p>or</p>\r\n        <button type="button" class="rp-btn rp-btn-default rp-button-with-icon not-small" data-js-add-filter>\r\n            <i class="rp-icons rp-icons-add-filter"></i>\r\n            <span class="rp-btn-val">'+r(e.text.favorites.addFilter)+'</span>\r\n        </button>\r\n    </div>\r\n    <div class="no-filters-found" data-js-not-found>\r\n        <h3><i class="rp-icons rp-iconswarning"></i>No filters found for \'<span data-js-search-value></span>\'</h3>\r\n        <p>Check your query and try again</p>\r\n    </div>\r\n    <div class="preloader">\r\n        <i class="material-icons loader-animation">refresh</i>\r\n    </div>\r\n\r\n    <div data-js-filter-paginate></div>\r\n</div>',n},this.JST["tpl-entity-base"]=function(e){var t,n="",r=_.escape;return n+='<div class="form-group">\r\n    <label class="filter-name" data-js-name></label>\r\n    <span class="remove-filter float-right" data-js-remove>\r\n            <i class="material-icons">clear</i>\r\n        </span>\r\n    <div class="input-group input-group-sm" data-js-content>\r\n    </div>\r\n    <div class="filter-hint" data-js-hint></div>\r\n</div>',n},this.JST["tpl-entity-conditions"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<button type="button" class="btn dropdown-toggle" data-value="'+((t=e.condition)==null?"":t)+'" data-toggle="dropdown" aria-expanded="false">\r\n    <span class="select-value">\r\n        ';var o=_.find(e.options,function(t){return e.condition==t.id});return n+="\r\n        "+((t=o.shortCut||e.condition)==null?"":t)+'\r\n    </span>\r\n    <span class="caret"></span>\r\n</button>\r\n<ul class="dropdown-menu option-menu dropdown-menu-left" role="menu">\r\n    ',_.each(e.options,function(r){n+="\r\n        <li ",e.condition==r.id&&(n+='class="active"'),n+='><a href="#" data-short="'+((t=r.shortCut||"")==null?"":t)+'" data-value="'+((t=r.id)==null?"":t)+'">'+((t=e.text.filterConditions[r.id])==null?"":t)+"</a></li>\r\n    "}),n+="\r\n</ul>",n},this.JST["tpl-entity-input"]=function(e){var t,n="",r=_.escape;return n+='<input type="text" class="filter statistics-number form-control input-sm" data-js-input>\r\n<span class="clear-text" data-js-clear-input></span>\r\n',n},this.JST["tpl-entity-invalid"]=function(e){var t,n="",r=_.escape;return n+='<input disabled="" type="text" class="form-control input-sm invalid" data-js-input>\r\n<div class="help-inline rp-display-inline-block">\r\n    <span>No info matches this filter</span>\r\n</div>',n},this.JST["tpl-entity-select"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<button class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n        data-toggle="dropdown">\r\n    <span class="select-value" data-js-value></span>\r\n    <span class="rp-caret"></span>\r\n</button>\r\n<ul class="dropdown-menu rp-width-100">\r\n    ',_.each(e.values,function(e,i){n+='\r\n    <li class="filter">\r\n        <a class="checkbox value-selector '+((t=e.subOption?"sub-option":"")==null?"":t)+'">\r\n            <label class="rp-checkbox-wrap" '+((t=e.value=="All"?"data-js-toggle-all":"")==null?"":t)+">\r\n                ",e.value!="All"&&(n+='\r\n                <input class="rp-input-checkbox"\r\n                       data-value="'+r(e.value)+'"\r\n                       data-name="'+r(e.name)+'"\r\n                '+((t=e.subType?'data-subtype="'+e.subType+'"':"")==null?"":t)+"\r\n                "+((t=e.mainType?'data-maintype="'+e.mainType+'"':"")==null?"":t)+'\r\n                type="checkbox" />\r\n                '),n+='\r\n                <span class="text-ellipsis">'+((t=e.name)==null?"":t)+"</span>\r\n            </label>\r\n        </a>\r\n    </li>\r\n    "}),n+="\r\n</ul>\r\n",n},this.JST["tpl-entity-tag"]=function(e){var t,n="",r=_.escape;return n+='<input autocomplete="off"  type="text"\r\n       data-warning="'+((t=e.warning)==null?"":t)+'"\r\n       value="'+((t=e.value)==null?"":t)+'" class="input-sm tags-typeahead" data-js-tag-input>',n},this.JST["tpl-entity-time-range"]=function(e){var t,n="",r=_.escape;return n+='<span class="input-group-btn rp-btn rp-btn-with-dropdown form-control input-sm timerange" data-js-input>\r\n            <span class="caret"></span>\r\n        </span>',n},this.JST["tpl-filter-entities-choice"]=function(e){var t,n="",r=_.escape;return n+='<div class="btn-group filter-entities-choice">\r\n    <button class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n            data-toggle="dropdown"\r\n            type="button">\r\n        <span class="select-value">'+((t=e.text.filters.more)==null?"":t)+'</span>\r\n        <span class="rp-caret"></span>\r\n    </button>\r\n    <ul class="dropdown-menu filters-criteria" data-js-entity-choice-list></ul>\r\n</div>\r\n',n},this.JST["tpl-filter-entities"]=function(e){var t,n="",r=_.escape;return n+='<div class="filter-entities-container" data-js-entities></div>\r\n<div class="filter-entities-container" data-js-entities-choice></div>',n},this.JST["tpl-filter-entity-choice"]=function(e){var t,n="",r=_.escape;return n+='<label class="checkbox rp-checkbox-wrap" data-js-link>\r\n    <input class="criteria-option rp-input-checkbox" type="checkbox" data-js-check-visible>\r\n    <span data-js-name></span>\r\n</label>\r\n',n},this.JST["tpl-filter-entity-dropdown"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<button class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n        data-toggle="dropdown">\r\n    <span class="select-value" data-js-value></span>\r\n    <span class="rp-caret"></span>\r\n</button>\r\n<ul class="dropdown-menu rp-width-100">\r\n    ',_.each(e.options,function(e,r){n+='\r\n    <li class="filter">\r\n        <a class="value-selector" data-value="'+((t=e.value)==null?"":t)+'">\r\n            <span class="text-ellipsis">'+((t=e.name)==null?"":t)+"</span>\r\n        </a>\r\n    </li>\r\n    "}),n+="\r\n</ul>\r\n\r\n",n},this.JST["filter-sorting-item-view"]=function(e){var t,n="",r=_.escape;return n+='<a>\r\n    <span data-js-name></span>\r\n    <i class="material-icons" data-js-ask-icon>keyboard_arrow_up</i>\r\n    <i class="material-icons" data-js-desc-icon>keyboard_arrow_down</i>\r\n</a>',n},this.JST["filter-sorting-view"]=function(e){var t,n="",r=_.escape;return n+='<span class="dropdown-toggle" data-toggle="dropdown" type="button" aria-expanded="true">\r\n    <span data-js-sorting-name></span>\r\n    <i class="material-icons" data-js-ask-sort>keyboard_arrow_up</i>\r\n    <i class="material-icons" data-js-desc-sort>keyboard_arrow_down</i>\r\n</span>\r\n<ul class="dropdown-menu" data-js-sorting-list></ul>',n},this.JST["tpl-filters-button"]=function(e){var t,n="",r=_.escape;return n+='<ul class="button_filter">\r\n    <li>\r\n        <button class="my_button '+((t=e.name)==null?"":t)+" "+((t=e.value?"active":"")==null?"":t)+'"\r\n            type="button"\r\n            data-id="'+((t=e.name)==null?"":t)+'">\r\n            '+((t=e.text.filterNameByValue[e.name])==null?"":t)+"\r\n        </button>\r\n    </li>\r\n</ul>\r\n",n},this.JST["tpl-filters-invalid"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="form-group has-error" data-id="'+((t=e.id)==null?"":t)+'">\r\n    <label class="filter-name">'+((t=e.name)==null?"":t)+"</label>\r\n    ",e.required||(n+='\r\n        <span class="remove-filter float-right">\r\n            <i class="material-icons">clear</i>\r\n        </span>\r\n    '),n+='\r\n    <div class="input-group input-group-sm dropdown-like">\r\n        <div class="filter-option-input">\r\n            <input disabled type="text"\r\n                class="form-control input-sm invalid"\r\n                placeholder=""\r\n                value="'+r(e.value)+'" />\r\n            <div class="help-inline">\r\n                <span>'+((t=e.text.filters.noInfoFilter)==null?"":t)+'</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="tt-dropdown-menu filter-hint"></div>\r\n</div>',n},this.JST["tpl-filters-multi-button"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="log_level">'+((t=e.text.logs.logLevel)==null?"":t)+'</div>\r\n<ul class="my_button_group">\r\n    ',_.each(e.values,function(r){var i=e.value.indexOf(r)>=0?"active":"";n+='\r\n        <li>\r\n            <button class="my_button '+((t=i)==null?"":t)+" "+((t=r)==null?"":t)+'" type="button" data-id="'+((t=r)==null?"":t)+'">\r\n                '+((t=e.text.filterNameByValue[r])==null?"":t)+"\r\n            </button>\r\n        </li>\r\n    "}),n+="\r\n</ul>",n},this.JST["tpl-filters-panel"]=function(e){var t,n="",r=_.escape;return n+='<div class="filters-cover"></div><div class="rp-filter-tabs"></div><div class="rp-filter-inputs clearfix">\r\n    <div id="filterInputs" class="col-xs-12"></div>\r\n</div>',n},this.JST["tpl-filters-select"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="form-group" data-id="'+((t=e.id)==null?"":t)+'">\r\n    <label for="filter-name" class="filter-name">\r\n        '+((t=e.text.filterNameById[e.id.escapeLessDirection()])==null?"":t)+"\r\n    </label>\r\n    ",e.required||(n+='\r\n        <span class="remove-filter float-right">\r\n            <i class="material-icons">clear</i>\r\n        </span>\r\n    '),n+='\r\n    <div class="input-group input-group-sm dropdown-like">\r\n        <div class="input-group-btn btn-group-fix-font">\r\n            <button class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle" data-toggle="dropdown">\r\n                <span class="select-value">'+((t=e.value)==null?"":t)+'</span>\r\n                <span class="rp-caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu rp-width-100">\r\n                ',_.each(e.values,function(e,r){n+='\r\n                    <li class="filter">\r\n                        <a class="value-selector" data-value="'+((t=e.value)==null?"":t)+'">'+((t=e.name)==null?"":t)+"</a>\r\n                    </li>\r\n                "}),n+="\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-filters-statistic"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="form-group" data-id="'+((t=e.id)==null?"":t)+'">\r\n    ',e.label?n+='\r\n        <label for="filter-name" class="filter-name">'+((t=e.label)==null?"":t)+"</label>\r\n    ":n+='\r\n        <label for="filter-name" class="filter-name">\r\n            '+((t=e.text.filterNameById[e.id.escapeLessDirection()])==null?"":t)+"\r\n        </label>\r\n    ",n+="\r\n    ",e.required||(n+='\r\n        <span class="remove-filter float-right">\r\n            <i class="material-icons">clear</i>\r\n        </span>\r\n    '),n+='\r\n    <div class="input-group input-group-sm">\r\n        <div class="input-group-sm filter-option-select">\r\n            <button type="button" class="btn dropdown-toggle" data-value="'+((t=e.condition)==null?"":t)+'" data-toggle="dropdown" aria-expanded="false">\r\n                <span class="select-value">\r\n                    ';var o=_.find(e.options,function(t){return e.condition==t.id});return n+="\r\n                    "+((t=o.shortCut||e.condition)==null?"":t)+'\r\n                </span> <span class="caret"></span></button>\r\n            <ul class="dropdown-menu option-menu dropdown-menu-left" role="menu">\r\n                ',_.each(e.options,function(r){n+="\r\n                <li ",e.condition==r.id&&(n+='class="active"'),n+='><a href="#" data-short="'+((t=r.shortCut||"")==null?"":t)+'" data-value="'+((t=r.id)==null?"":t)+'">'+((t=e.text.filterConditions[r.id||r.shortCut])==null?"":t)+"</a></li>\r\n                "}),n+='\r\n            </ul>\r\n        </div>\r\n        <div class="filter-option-input">\r\n            <input type="text" placeholder="" value="'+((t=e.value)==null?"":t)+'" class="filter statistics-number form-control input-sm" maxlength="5" />\r\n            <span class="clear-text"></span>\r\n        </div>\r\n    </div>\r\n</div>',n},this.JST["tpl-filters-status-defect"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="form-group" data-id="'+((t=e.id)==null?"":t)+'">\r\n    <label class="filter-name">'+((t=e.text.filterNameById[e.id.escapeLessDirection()])==null?"":t)+"</label>\r\n    ",e.required||(n+='\r\n        <span class="remove-filter float-right">\r\n            <i class="material-icons">clear</i>\r\n        </span>\r\n    '),n+='\r\n    <div class="input-group input-group-sm dropdown-like">\r\n        <div class="input-group-btn btn-group-fix-font">\r\n            <button class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                id="statusFilterSelector"\r\n                data-toggle="dropdown">\r\n               <span class="select-value"></span>\r\n                <span class="rp-caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu rp-width-100">\r\n                ',_.each(e.values,function(e,i){n+='\r\n                    <li class="filter">\r\n                        <a class="checkbox value-selector '+((t=e.subOption?"sub-option":"")==null?"":t)+'">\r\n                            <label>\r\n                                ',i>0&&(n+='\r\n                                    <input class="rp-input-checkbox"\r\n                                        data-value="'+r(e.value)+'"\r\n                                        data-name="'+r(e.name)+'"\r\n                                        '+((t=e.subType?'data-subtype="'+e.subType+'"':"")==null?"":t)+"\r\n                                        "+((t=e.mainType?'data-maintype="'+e.mainType+'"':"")==null?"":t)+'\r\n                                        type="checkbox" />\r\n                                '),n+='\r\n                                <span class="text-ellipsis">'+((t=e.name)==null?"":t)+"</span>\r\n                            </label>\r\n                        </a>\r\n                    </li>\r\n                "}),n+="\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-filters-status"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="form-group" data-id="'+((t=e.id)==null?"":t)+'">\r\n    <label class="filter-name">'+((t=e.text.filterNameById[e.id.escapeLessDirection()])==null?"":t)+"</label>\r\n    ",e.required||(n+='\r\n        <span class="remove-filter float-right">\r\n            <i class="material-icons">clear</i>\r\n        </span>\r\n    '),n+='\r\n    <div class="input-group input-group-sm dropdown-like">\r\n        <div class="input-group-btn btn-group-fix-font">\r\n            <button class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                id="statusFilterSelector"\r\n                data-toggle="dropdown">\r\n                <span class="select-value">'+((t=e.value)==null?"":t)+'</span>\r\n                <span class="rp-caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu rp-width-100">\r\n                ',_.each(e.values,function(r,i){n+='\r\n                    <li class="filter">\r\n                        <a class="checkbox value-selector">\r\n                            <label>\r\n                                ';if(i>0){n+="\r\n                                    ";var s=e.value.toUpperCase().indexOf(r.toUpperCase())!==-1||e.value==="All"?'checked="checked"':"";n+='\r\n                                    <input class="rp-input-checkbox"\r\n                                        data-value="'+((t=r)==null?"":t)+'"\r\n                                        type="checkbox" '+((t=s)==null?"":t)+" />\r\n                                "}n+="\r\n                                <span>"+((t=r)==null?"":t)+"</span>\r\n                            </label>\r\n                        </a>\r\n                    </li>\r\n                "}),n+="\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-filters-tab-criteria"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="tab-filters clearfix" data-id="'+((t=e.id)==null?"":t)+'">\r\n    ';var o=_.all(e.criteria,function(e){return e.required==1});return n+="\r\n    ",e.criteria.length>0&&!o&&(n+='\r\n    <div class="btn-group criteria-btn">\r\n        <button class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n            data-toggle="dropdown"\r\n            type="button">\r\n            <span class="select-value">'+((t=e.text.filters.more)==null?"":t)+'</span>\r\n            <span class="rp-caret"></span>\r\n        </button>\r\n        <ul class="dropdown-menu filters-criteria">\r\n            ',_.each(e.criteria,function(r,i){n+="\r\n                ",!r.required&&!r.hideCriteria&&(n+='\r\n                <li>\r\n                    <a class="checkbox '+((t=r.subFilter?"sub-option":"")==null?"":t)+'">\r\n                        <label>\r\n                            <input class="'+((t=r.name)==null?"":t)+' criteria-option rp-input-checkbox"\r\n                                data-id="'+((t=r.id)==null?"":t)+'"\r\n                                ',r.visible&&(n+="checked"),n+='\r\n                                type="checkbox" />\r\n                            <span>\r\n                                '+((t=r.longName?r.longName:e.text.filterNameById[r.id.escapeLessDirection()])==null?"":t)+"\r\n                            </span>\r\n                        </label>\r\n                    </a>\r\n                </li>\r\n                "),n+="\r\n            "}),n+="\r\n        </ul>\r\n    </div>\r\n    "),n+="\r\n</div>\r\n",n},this.JST["tpl-filters-tab-editor"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="form-group col-sm-9">\r\n    <label class="rp-control-label" for="tabName">'+((t=e.text.filter.name)==null?"":t)+'</label>\r\n    <div>\r\n        <input type="text" placeholder="'+((t=e.text.filters.enterFilterName)==null?"":t)+'" id="tabName" class="rp-input rp-width-100"\r\n               value="'+r(e.name||"")+'">\r\n        <span class="help-inline"></span>\r\n    </div>\r\n</div><div class="form-group col-sm-3 col-xs-3">\r\n    <label class="rp-control-label"  for="tabShared">'+((t=e.text.filter.share)==null?"":t)+'</label>\r\n    <div>\r\n        <input id="tabShared" type="checkbox" class="js-switch" ',e.isShared&&(n+=' checked="checked" '),n+=" />\r\n    </div>\r\n</div>",n},this.JST["tpl-filters-tab-menu"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return _.forEach(e.tabs,function(i,s){n+='\r\n    <div class="'+((t=s===e.id?"active":"")==null?"":t)+" tab "+((t=i.isShared?"shared":"")==null?"":t)+" "+((t=s==="allCases"?"all-cases":"")==null?"":t)+'"\r\n         data-id="'+((t=s)==null?"":t)+'">\r\n        <a href="#" data-toggle="dropdown" class="tab-controls">\r\n            <i class="rp-svg-icon svg-icon-menu-size-14"></i>\r\n        </a>\r\n        <span class="name-text multiple-spaces">'+r(i.name||e.text.filters.all)+"</span>\r\n        ",i.isShared&&(n+="\r\n            ",i.owner!==e.user?n+='\r\n                <span class="public-icon-wrapper">\r\n                    <i class="material-icons" title="'+((t=e.text.launches.filterIsSharedByOtherUser)==null?"":t)+'">\r\n                        public\r\n                    </i>\r\n                </span>\r\n            ':n+='\r\n                <span class="share-icon-wrapper">\r\n                    <i class="material-icons" title="'+((t=e.text.launches.filterIsShared)==null?"":t)+'">share</i>\r\n                </span>\r\n            ',n+="\r\n        "),n+="\r\n    </div>\r\n"}),n+='\r\n<div class="add-new tab">\r\n    <i class="material-icons">add</i>\r\n    <input class=\'form-control\' placeholder=\''+((t=e.text.filters.enterFilterName)==null?"":t)+'\' />\r\n    <i class="material-icons icon-cancel" title="'+((t=e.text.filters.close)==null?"":t)+'">cancel</i>\r\n    <span>Add Filter</span>\r\n</div>',n},this.JST["tpl-filters-tab-new-option"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="active tab '+((t=e.isShared?"shared":"")==null?"":t)+'" data-id="'+((t=e.id)==null?"":t)+'">\r\n    <a href="#" data-toggle="dropdown" class="tab-controls">\r\n        <i class="rp-svg-icon svg-icon-menu-size-14"></i>\r\n    </a>\r\n    <span class="name-text multiple-spaces">\r\n        '+r(e.name)+"\r\n    </span>\r\n    ",e.isShared&&(n+='\r\n        <span class="share-icon-wrapper">\r\n            <i class="material-icons" title="'+((t=e.text.launches.filterIsShared)==null?"":t)+'">share</i>\r\n        </span>\r\n    '),n+="\r\n</div>",n},this.JST["tpl-filters-tab-options"]=function(e){var t,n="",r=_.escape;return n+='<ul class="dropdown-menu filter-manager">\r\n    <li class="action"><span class="edit-tab menu-option '+((t=e.edit?"":"disabled")==null?"":t)+'">'+((t=e.text.ui.edit)==null?"":t)+'</span></li>\r\n    <li class="action"><span class="save-tab menu-option '+((t=e.save?"":"disabled")==null?"":t)+'">'+((t=e.text.ui.save)==null?"":t)+'</span></li>\r\n    <li class="action"><span class="save-all-tab menu-option '+((t=e.saveAll?"":"disabled")==null?"":t)+'">'+((t=e.text.ui.saveAll)==null?"":t)+'</span></li>\r\n    <li class="action"><span class="clone-tab menu-option '+((t=e.clone?"":"disabled")==null?"":t)+'">'+((t=e.text.ui.clone)==null?"":t)+'</span></li>\r\n    <li class="action"><span class="discard-tab menu-option '+((t=e.discard?"":"disabled")==null?"":t)+'">'+((t=e.text.ui.discard)==null?"":t)+'</span></li>\r\n    <li class="divider"></li>\r\n    <li class="action"><span class="close-tab menu-option '+((t=e.close?"":"disabled")==null?"":t)+'">'+((t=e.text.ui.close)==null?"":t)+"</span></li>\r\n</ul>",n},this.JST["tpl-filters-timer"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="form-group" data-id="'+((t=e.id)==null?"":t)+'">\r\n    <label for="filter-name" class="filter-name">\r\n        '+((t=e.text.filterNameById[e.id.escapeLessDirection()])==null?"":t)+"\r\n    </label>\r\n    ",e.required||(n+='\r\n        <span class="remove-filter float-right">\r\n            <i class="material-icons">clear</i>\r\n        </span>\r\n    '),n+='\r\n    <div class="input-group input-group-sm dropdown-like">\r\n        <span class="input-group-btn rp-btn rp-btn-with-dropdown form-control input-sm timerange">\r\n            '+((t=e.value)==null?"":t)+'\r\n            <span class="caret"></span>\r\n        </span>\r\n        <span class="hidden val"></span>\r\n    </div>\r\n</div>\r\n',n},this.JST["tpl-filters-user"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="form-group" data-id="'+((t=e.id)==null?"":t)+'">\r\n    <label class="filter-name">'+((t=e.text.filterNameById[e.id.escapeLessDirection()])==null?"":t)+"</label>\r\n    ",e.required||(n+='\r\n        <span class="remove-filter float-right">\r\n            <i class="material-icons">clear</i>\r\n        </span>\r\n    '),n+='\r\n    <div class="input-group input-group-sm">\r\n        ';if(e.options&&e.options.length){n+='\r\n        <div class="input-group-sm filter-option-select">\r\n            <button type="button" class="btn dropdown-toggle" data-value="'+((t=e.condition)==null?"":t)+'" data-toggle="dropdown" aria-expanded="false">\r\n                <span class="select-value">\r\n                    ';var o=_.find(e.options,function(t){return e.condition==t.id});n+="\r\n                    "+((t=o.shortCut||e.condition)==null?"":t)+'\r\n                </span> <span class="caret"></span></button>\r\n            <ul class="dropdown-menu option-menu dropdown-menu-left" role="menu">\r\n                ',_.each(e.options,function(r){n+="\r\n                <li ",e.condition==r.id&&(n+='class="active"'),n+='><a href="#" data-short="'+((t=r.shortCut||"")==null?"":t)+'" data-value="'+((t=r.id)==null?"":t)+'">'+((t=e.text.filterConditions[r.shortCut||r.id])==null?"":t)+"</a></li>\r\n                "}),n+="\r\n            </ul>\r\n        </div>\r\n        "}n+='        \r\n        <div class="filter-option-input">\r\n            ';var u=e.id!="tags"?e.text.ui.minPrefix+" "+e.startSearch+" "+e.text.ui.minSufix:e.text.ui.enterChars;return n+='\r\n            <input autocomplete="off" id="tagFilter" type="text"\r\n                   data-warning="'+((t=u)==null?"":t)+'"\r\n                   value="'+((t=e.value)==null?"":t)+'" class="input-sm tags-typeahead" />\r\n        </div>\r\n    </div>\r\n</div>',n},this.JST["tpl-filters-view"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="form-group" data-id="'+((t=e.id)==null?"":t)+'">\r\n    ';var o=e.id.escapeLessDirection()!=="name"?e.id.escapeLessDirection():e.gridType==="launch"?"name":"itemName";n+='\r\n    <label class="filter-name">'+((t=e.text.filterNameById[o])==null?"":t)+"</label>\r\n    ",e.required||(n+='\r\n        <span class="remove-filter float-right">\r\n            <i class="material-icons">clear</i>\r\n        </span>\r\n    '),n+='\r\n    <div class="input-group input-group-sm dropdown-like">\r\n        ';if(e.options&&e.options.length){n+='\r\n        <div class="input-group-sm filter-option-select">\r\n            <button type="button" class="btn dropdown-toggle" data-value="'+((t=e.condition)==null?"":t)+'" data-toggle="dropdown" aria-expanded="false">\r\n                <span class="select-value">\r\n                    ';var u=_.find(e.options,function(t){return e.condition==t.id});n+="\r\n                    "+((t=u.shortCut||e.condition)==null?"":t)+'\r\n                </span> <span class="caret"></span></button>\r\n            <ul class="dropdown-menu option-menu dropdown-menu-left" role="menu">\r\n                ',_.each(e.options,function(r){n+="\r\n                <li ",e.condition==r.id&&(n+='class="active"'),n+='><a href="#" data-short="'+((t=r.shortCut||"")==null?"":t)+'" data-value="'+((t=r.id)==null?"":t)+'">'+((t=e.text.filterConditions[r.shortCut||r.id])==null?"":t)+"</a></li>\r\n                "}),n+="\r\n            </ul>\r\n        </div>\r\n        "}return n+='\r\n        <div class="filter-option-input">\r\n            <input type="text" class="form-control input-sm" placeholder="" value="'+r(e.value)+'" />\r\n            <span class="clear-text"></span>\r\n        </div>\r\n    </div>\r\n    <div class="tt-dropdown-menu filter-hint"></div>\r\n</div>',n},this.JST["tpl-delete-user"]=function(e){var t,n="",r=_.escape;return n+='<div class="modal fade dialog-shell" id="deleteUser" tabindex="-1" role="dialog" aria-labelledby="deleteUser" aria-hidden="true">\r\n    <div class="modal-dialog modal-sm">\r\n        <div class="modal-content">\r\n            <div class="modal-body">\r\n                <h4 class="col-sm-12" style="word-break: normal !important;">'+((t=e.text.ui.sureToDelete)==null?"":t)+" "+((t=e.text.ui.userSm)==null?"":t)+' <strong class="user-name-holder"></strong>?</h4>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="rp-btn rp-btn-cancel" data-dismiss="modal">'+((t=e.text.ui.cancel)==null?"":t)+'</button>\r\n                <button type="button" class="rp-btn rp-btn-danger">'+((t=e.text.ui.del)==null?"":t)+"</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-remove-dashboard"]=function(e){var t,n="",r=_.escape;return n+='<div class="modal fade dialog-shell" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">\r\n    <div class="modal-dialog modal-sm">\r\n        <div class="modal-content">\r\n            <div class="modal-body">\r\n                <h4 class="col-sm-12" id="modal-content-text">\r\n                    '+((t=e.format(e.text.ui[e.message]))==null?"":t)+'?\r\n                </h4>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="rp-btn rp-btn-cancel" data-dismiss="modal">'+((t=e.text.ui.cancel)==null?"":t)+'</button>\r\n                <button type="button" class="rp-btn rp-btn-danger">'+((t=e.text.ui.remove)==null?"":t)+"</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-remove-widget"]=function(e){var t,n="",r=_.escape;return n+='<div class="modal fade dialog-shell" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">\r\n    <div class="modal-dialog modal-sm">\r\n        <div class="modal-content">\r\n            <div class="modal-body">\r\n                <h4 class="col-sm-12" id="modal-content-text">\r\n                    '+((t=e.format(e.text.ui[e.message]))==null?"":t)+'?\r\n                </h4>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="rp-btn rp-btn-cancel" data-dismiss="modal">'+((t=e.text.ui.cancel)==null?"":t)+'</button>\r\n                <button type="button" class="rp-btn rp-btn-danger">'+((t=e.text.ui.remove)==null?"":t)+"</button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-landing-header"]=function(e){var t,n="",r=_.escape;return n+='<nav class="navbar navbar-default">\r\n    <div class="container">\r\n        <div class="b-header__menuline js-menuline"></div>\r\n        <div class="navbar-header">\r\n            <button type="button"\r\n                    class="navbar-toggle collapsed js-collapse"\r\n                    data-toggle="collapse"\r\n                    data-target="#navbar">\r\n                <span class="sr-only">Toggle navigation</span>\r\n                <span class="icon-bar"></span>\r\n                <span class="icon-bar"></span>\r\n                <span class="icon-bar"></span>\r\n            </button>\r\n            <span class="navbar-brand b-header__logo js-logo"></span>\r\n        </div>\r\n        <div class="collapse navbar-collapse js-navbar" id="navbar">\r\n            <ul class="nav navbar-nav b-header__menu js-headermenu" id="pagenavigator">\r\n                <li class="b-menu__link">\r\n                    <a href="#features">\r\n                        '+((t=e.text.landing.header.linkFeatures)==null?"":t)+'\r\n                    </a>\r\n                </li>\r\n                <li class="b-menu__link">\r\n                    <a href="#analysis">\r\n                        '+((t=e.text.landing.header.linkAutoAnalysis)==null?"":t)+'\r\n                    </a>\r\n                </li>\r\n                <li class="b-menu__link">\r\n                    <a href="#productionUsage">\r\n                        '+((t=e.text.landing.header.linkProductionUsage)==null?"":t)+'\r\n                    </a>\r\n                </li>\r\n                <li class="b-menu__link">\r\n                    <a href="#distributionOfFails">\r\n                        '+((t=e.text.landing.header.linkDistributionOfFails)==null?"":t)+'\r\n                    </a>\r\n                </li>\r\n                <li class="b-menu__link">\r\n                    <a href="#resultAnalysis">\r\n                        '+((t=e.text.landing.header.linkYouResultAnalysis)==null?"":t)+'\r\n                    </a>\r\n                </li>\r\n                <li class="b-menu__link js-doc-link">\r\n                    <a href="#documentation">\r\n                        '+((t=e.text.landing.header.linkDocumentation)==null?"":t)+'\r\n                    </a>\r\n                </li>\r\n                <div class="menu-item">\r\n                    <a href="https://github.com/reportportal/reportportal" target="_blank">\r\n                        FORK ON\r\n                        <svg aria-hidden="true" height="28" version="1.1" viewBox="0 0 16 16" width="28"><path\r\n                                d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>\r\n\r\n                    </a>\r\n                </div>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="rp-landing-header-buttons">\r\n\r\n        <!--<span class="rp-btn-landing-header login-button" data-js-show-login>-->\r\n        <!--<span>'+((t=e.text.landing.header.btnLogin)==null?"":t)+'</span>-->\r\n        <!--<i class="material-icons">exit_to_app</i>-->\r\n    <!--</span>-->\r\n        <!--<a class="rp-btn-landing-header return-button" data-js-return-button href="/reportportal-ws">-->\r\n            <!--<i class="material-icons">reply</i>-->\r\n            <!--<span>'+((t=e.text.landing.header.returnToRP)==null?"":t)+'</span>-->\r\n        <!--</a>-->\r\n    </div>\r\n\r\n</nav>\r\n<div class="block-login js-loginblock"></div>',n},this.JST["tpl-landing-page"]=function(e){var t,n="",r=_.escape;return n+='<header class="b-header js-header"></header>\r\n<main class="b-main js-main-container"></main>\r\n<div class="social-block" data-js-social-block>\r\n    <a href="https://github.com/reportportal" class="gh-icon" target="_blank"></a>\r\n    <a href="https://www.facebook.com/ReportPortal.io" class="fb-icon" target="_blank"></a>\r\n    <a href="http://twitter.com/ReportPortal_io" class="tw-icon" target="_blank"></a>\r\n    <a href="https://www.youtube.com/channel/UCsZxrHqLHPJcrkcgIGRG-cQ" class="yt-icon" target="_blank"></a>\r\n    <a href="https://vk.com/reportportal_io" class="vk-icon" target="_blank"></a>\r\n</div>\r\n<main class="b-docs js-docs-container clearfix"></main>\r\n<footer class="b-footer clearfix">\r\n    <div class="left-block">\r\n        <span>'+((t=e.text.footer.textCopyright)==null?"":t)+'</span>\r\n        <span class="separate"></span>\r\n        <a href="mailto:SupportEPMC-TSTReportPortal@epam.com?subject=Report%20Portal%20Support.%20Landing">\r\n            '+((t=e.text.footer.menu.support)==null?"":t)+'\r\n        </a>\r\n        <span class="separate"></span>\r\n        <a href="mailto:SupportEPMC-TSTReportPortal@epam.com?subject=Report%20Portal%20Contact.%20Landing">\r\n            '+((t=e.text.footer.menu.contacts)==null?"":t)+'\r\n        </a>\r\n    </div>\r\n    <div class="right-block">\r\n        <span>'+((t=e.text.footer.textSocial)==null?"":t)+'</span>\r\n        <a href="https://github.com/reportportal" class="gh-icon" target="_blank"></a>\r\n        <a href="https://www.facebook.com/ReportPortal.io" class="fb-icon" target="_blank"></a>\r\n        <a href="http://twitter.com/ReportPortal_io" class="tw-icon" target="_blank"></a>\r\n        <a href="https://www.youtube.com/channel/UCsZxrHqLHPJcrkcgIGRG-cQ" class="yt-icon" target="_blank"></a>\r\n        <a href="https://vk.com/reportportal_io" class="vk-icon" target="_blank"></a>\r\n    </div>\r\n</footer>\r\n',n},this.JST["tpl-landing-section-analysis"]=function(e){var t,n="",r=_.escape;return n+='<div class="col-md-10 col-md-offset-1" data-js-scroll-action>\r\n    <div class="col-md-6 col-lg-push-6 col-md-push-6 animated js-commonel g-invisible"\r\n         data-animation="fadeInRight">\r\n        <h3 class="b-common__header">Auto analysis</h3>        <p class="b-common__text">Report Portal provides great capabilities along with Auto Results Analysis\r\n            by leveraging  historical data of test execution. So with next execution it will automatically\r\n            figure out root cause of fail, doing analysis itself, and afford you with the flag were engineer\r\n            should pay attention and which test cases results require actual analysis by human.</p>\r\n    </div>\r\n    <div class="col-md-6 col-lg-pull-6 col-md-pull-6 animated js-commonel g-invisible"\r\n         data-animation="fadeInLeft">\r\n        <div class="b-autotrees__trees js-redleaves">\r\n            <img class="b-autotrees__image" src="img/landing/trees.png" alt="">            <div class="b-autotrees__leaves b-autotrees__leaves--front js-redleaves--front">\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n            </div>\r\n            <div class="b-autotrees__leaves b-autotrees__leaves--lb js-redleaves--back">\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n            </div>\r\n            <div class="b-autotrees__leaves b-autotrees__leaves--rb js-redleaves--back">\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n            </div>\r\n            <div class="b-autotrees__leaves b-autotrees__leaves--rrb js-redleaves--back">\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n                <div class="b-autotrees__leaf js-redleaf animated"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="b-common--divider col-md-12"></div>\r\n</div>\r\n<div class="col-md-12 col-md-offset-1" data-js-scroll-action>\r\n    <h3 class="b-common__header b-autotrees__header g-darkgray">Report portal at a glance</h3>    <div class="b-common__list col-lg-9 col-lg-offset-1 g-darkgray clearfix">\r\n        <div class="b-common__li col-md-4 col-sm-6 col-xs-12 animated js-commonel g-invisible"\r\n             data-animation="fadeIn"><span class="b-common__marker"></span>Easy reporting\r\n        </div>\r\n        <div class="b-common__li col-md-4 col-sm-6 col-xs-12 animated js-commonel g-invisible"\r\n             data-animation="fadeIn"><span class="b-common__marker"></span>Auto Analysis\r\n        </div>\r\n        <div class="b-common__li col-md-4 col-sm-6 col-xs-12 hidden-sm hidden-xs animated js-commonel g-invisible"\r\n             data-animation="fadeIn"><span class="b-common__marker"></span>Real-time\r\n        </div>\r\n        <div class="b-common__li col-md-4 col-sm-6 col-xs-12 animated js-commonel g-invisible"\r\n             data-animation="fadeIn"><span class="b-common__marker"></span>saved search\r\n        </div>\r\n        <div class="b-common__li col-md-4 col-sm-6 col-xs-12 animated js-commonel g-invisible"\r\n             data-animation="fadeIn"><span class="b-common__marker"></span>History\r\n        </div>\r\n        <div class="b-common__li col-md-4 col-sm-6 col-xs-12 hidden-lg hidden-md animated js-commonel g-invisible"\r\n             data-animation="fadeIn"><span class="b-common__marker"></span>Post bug one click\r\n        </div>\r\n        <div class="b-common__li col-md-4 col-sm-6 col-xs-12 animated js-commonel g-invisible"\r\n             data-animation="fadeIn"><span class="b-common__marker"></span>Supplementary features\r\n        </div>\r\n    </div>\r\n</div>',n},this.JST["tpl-landing-section-distribution"]=function(e){var t,n="",r=_.escape;return n+='<div class="col-md-10 col-md-offset-1">\r\n    <div class="col-md-6 col-lg-push-6 col-md-push-6 animated js-commonel g-invisible"\r\n         data-animation="fadeInRight">\r\n        <h3 class="b-common__header">Distribution of fails</h3>        <p class="b-common__text">Report Portal also give you an ability to collaboratively analyze test\r\n            automation results. Particular fail can associate with a product bug, or automation issue,\r\n            system issue and even could be submitted as an issue ticket directly from this execution result\r\n            into the bug tracking system. With automatic track back links.\r\n            <br>\r\n            Quantity of product bugs in distribution can show you the value of test automation.\r\n        </p>\r\n        <a class="b-common__button" href="#" style="visibility: hidden">Explore more features</a>\r\n    </div>\r\n    <div class="b-common__svg col-md-6 col-lg-pull-6 col-md-pull-6 animated js-commonel g-invisible"\r\n         data-animation="fadeInLeft">\r\n        <img src="img/landing/glare1.png" alt="">\r\n    </div>\r\n</div>',n},this.JST["tpl-landing-section-features"]=function(e){var t,n="",r=_.escape;return n+='<div class="b-features__text">\r\n    <h3>'+((t=e.text.landing.GroupIdeasBehindRP.titleIdeasBehindReportPortal)==null?"":t)+'</h3>\r\n</div>\r\n<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 rp-overflow-hidden">\r\n    <div class="b-feature col-xs-12 col-sm-4 col-lg-4 animated g-invisible js-feature"\r\n        data-animation="fadeIn">\r\n        <div class="b-feature__icon animated js-featicon" data-animation="bounceIn">\r\n            <i class="rp-icons rp-icons-live-visibility-landing fsize-130"></i>\r\n        </div>\r\n        <h3 class="b-feature__header">'+((t=e.text.landing.GroupIdeasBehindRP.titleLiveVisibility)==null?"":t)+"</h3>\r\n        <p>"+((t=e.text.landing.GroupIdeasBehindRP.descLiveVisibility)==null?"":t)+'</p>\r\n    </div>\r\n    <div class="b-feature col-xs-12 col-sm-4 col-lg-4 animated g-invisible js-feature"\r\n        data-animation="fadeIn">\r\n        <div class="b-feature__icon animated js-featicon" data-animation="bounceIn">\r\n            <i class="rp-icons rp-icons-integrate-landing fsize-130"></i>\r\n        </div>\r\n        <h3 class="b-feature__header">'+((t=e.text.landing.GroupIdeasBehindRP.titleEasyIntegrate)==null?"":t)+"</h3>\r\n        <p>"+((t=e.text.landing.GroupIdeasBehindRP.descEasyIntegrate)==null?"":t)+'</p>\r\n    </div>\r\n    <div class="b-feature col-xs-12 col-sm-4 col-lg-4 animated g-invisible js-feature"\r\n        data-animation="fadeIn">\r\n        <div class="b-feature__icon animated js-featicon" data-animation="bounceIn">\r\n            <i class="rp-icons rp-icons-report-landing fsize-130"></i>\r\n        </div>\r\n        <h3 class="b-feature__header">'+((t=e.text.landing.GroupIdeasBehindRP.titleNiceReports)==null?"":t)+"</h3>\r\n        <p>"+((t=e.text.landing.GroupIdeasBehindRP.descNiceReports)==null?"":t)+'</p>\r\n    </div>\r\n</div>\r\n<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1 rp-overflow-hidden">\r\n    <div class="b-feature col-xs-12 col-sm-4 col-lg-4 animated g-invisible js-feature"\r\n        data-animation="fadeIn">\r\n        <div class="b-feature__icon animated js-featicon" data-animation="bounceIn">\r\n            <i class="rp-icons rp-icons-refactoring-landing fsize-150"></i>\r\n        </div>\r\n        <h3 class="b-feature__header">'+((t=e.text.landing.GroupIdeasBehindRP.titleNoRefactoring)==null?"":t)+"</h3>\r\n        <p>"+((t=e.text.landing.GroupIdeasBehindRP.descNoRefactoring)==null?"":t)+'</p>\r\n    </div>\r\n    <div class="b-feature col-xs-12 col-sm-4 col-lg-4 animated g-invisible js-feature"\r\n        data-animation="fadeIn">\r\n        <div class="b-feature__icon animated js-featicon" data-animation="bounceIn">\r\n            <i class="rp-icons rp-icons-fighter-jet-landing fsize-150"></i>\r\n        </div>\r\n        <h3 class="b-feature__header">'+((t=e.text.landing.GroupIdeasBehindRP.titleReduceEffort)==null?"":t)+"</h3>\r\n        <p>"+((t=e.text.landing.GroupIdeasBehindRP.descReduceEffort)==null?"":t)+'</p>\r\n    </div>\r\n    <div class="b-feature col-xs-12 col-sm-4 col-lg-4 animated g-invisible js-feature"\r\n        data-animation="fadeIn">\r\n        <div class="b-feature__icon animated js-featicon" data-animation="bounceIn">\r\n            <i class="rp-icons rp-icons-settings-landing fsize-150"></i>\r\n        </div>\r\n        <h3 class="b-feature__header">'+((t=e.text.landing.GroupIdeasBehindRP.titleSupportsTools)==null?"":t)+"</h3>\r\n        <p>"+((t=e.text.landing.GroupIdeasBehindRP.descSupportsTools)==null?"":t)+"</p>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-landing-section-production_usage"]=function(e){var t,n="",r=_.escape;return n+='<div class="col-md-10 col-md-offset-1">\r\n    <div class="col-md-5 animated js-commonel g-invisible" data-animation="fadeInLeft">\r\n        <h3 class="b-common__header">Realtime Trends</h3>        <p class="b-common__text">Trends of growth, execuctions and other metrics will be available with\r\n            ready-to-go library of templates for widgets.\r\n            <br>\r\n            Real-time integration allows to manage and track execution status directly\r\n            from Report Portal.  Test cases results will be stored with the same structure you have it in\r\n            your suites and test plan.\r\n        </p>\r\n    </div>\r\n    <div class="b-common__svg col-md-7 animated g-invisible js-d3 js-graph" data-animation="fadeInRight"\r\n         data-graph="d3graph"></div>\r\n</div>',n},this.JST["tpl-landing-section-result_analysis"]=function(e){var t,n="",r=_.escape;return n+='<div class="col-md-10 col-md-offset-1">\r\n    <div class="col-md-5 animated js-commonel g-invisible" data-animation="fadeInLeft">\r\n        <h3 class="b-common__header">See results been analyzed</h3>        <p class="b-common__text">\r\n            Report Portal is in-cloud service, provides great capabilities for speeding up results analysis\r\n            and reporting by means of built-in analytical features.\r\n            <br>\r\n            Test cases results will be stored with the same structure you have it in your suites and test\r\n            plan. The test cases will be shown with all related data in one place, right where you need it:\r\n            logs, screenshots, binary data. The execution pipeline of certain test case available for you\r\n            also, so one can see previous execution result in one click.\r\n        </p>\r\n    </div>\r\n    <div class="b-common__svg col-md-7 animated g-invisible js-d3 js-histogram" data-animation="fadeInRight"\r\n         data-graph="d3histogram">\r\n    </div>\r\n</div>',n},this.JST["tpl-landing-section-trees"]=function(e){var t,n="",r=_.escape;return n+='<div class="b-trees__overflow">\r\n    <div class="b-trees__bg b-trees__bg--bg js-forest" data-speed="0.05"></div>\r\n    <div class="b-trees__bg b-trees__bg--backtreeone js-forest" data-speed="0.071"></div>\r\n    <div class="b-trees__bg b-trees__bg--backtreetwo js-forest" data-speed="0.25"></div>\r\n    <div id="frontTree" class=" b-trees__bg b-trees__bg--fronttree js-forest" data-speed="0.45"></div>\r\n    <div class="b-trees__bg b-trees__bg--sun js-forest" data-speed="0.02"></div>\r\n    <div class="b-central js-forest" data-speed="0.85">\r\n        <div class="b-central__logo">\r\n            <img src="img/landing/intro/logo.png" alt="">\r\n            <p>'+r(e.text.landing.threes.subHeader)+'</p>\r\n        </div>\r\n        <div class="b-central__play js-play" style="visibility: hidden;">\r\n            <a href="">\r\n                <i class="material-icons">play_arrow</i>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <div class="b-leaves js-leaves">\r\n        <div class="b-leaf b-leaf--smallgreen js-forest js-leaf" data-speed="0.35">\r\n            <div class="b-leaf__border">\r\n                <div class="b-leafborder b-leafborder--tl"></div>\r\n                <div class="b-leafborder b-leafborder--tr"></div>\r\n                <div class="b-leafborder b-leafborder--br"></div>\r\n                <div class="b-leafborder b-leafborder--bl"></div>\r\n                <img src="img/landing/intro/leaves/smallgreen_leaf.png" alt="">\r\n            </div>\r\n            <div class="b-leaf__info">\r\n                <div class="b-leafinfo">\r\n                    <h4 class="b-leafinfo__header">'+r(e.text.landing.threes.ciCd)+'</h4>\r\n                    <p class="b-leafinfo__text">'+r(e.text.landing.threes.ciCdText)+'</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="b-leaf b-leaf--yellow js-forest js-leaf" data-speed="0.4">\r\n            <div class="b-leaf__border">\r\n                <div class="b-leafborder b-leafborder--tl"></div>\r\n                <div class="b-leafborder b-leafborder--tr"></div>\r\n                <div class="b-leafborder b-leafborder--br"></div>\r\n                <div class="b-leafborder b-leafborder--bl"></div>\r\n                <img src="img/landing/intro/leaves/yellow_leaf.png" alt="">\r\n            </div>\r\n            <div class="b-leaf__info">\r\n                <div class="b-leafinfo">\r\n                    <h4 class="b-leafinfo__header">'+r(e.text.landing.threes.realtime)+'</h4>\r\n                    <p class="b-leafinfo__text">'+r(e.text.landing.threes.realtimeText)+'</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="b-leaf b-leaf--biggreen js-forest js-leaf" data-speed="0.25">\r\n            <div class="b-leaf__border">\r\n                <div class="b-leafborder b-leafborder--tl"></div>\r\n                <div class="b-leafborder b-leafborder--tr"></div>\r\n                <div class="b-leafborder b-leafborder--br"></div>\r\n                <div class="b-leafborder b-leafborder--bl"></div>\r\n                <img src="img/landing/intro/leaves/biggreen_leaf.png" alt="">\r\n            </div>\r\n            <div class="b-leaf__info">\r\n                <div class="b-leafinfo">\r\n                    <h4 class="b-leafinfo__header">'+r(e.text.landing.threes.architecture)+'</h4>\r\n                    <p class="b-leafinfo__text">'+r(e.text.landing.threes.architectureText)+'</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="b-leaf b-leaf--orange js-forest js-leaf js-leaf--orange" data-speed="0.33">\r\n            <div class="b-leaf__border">\r\n                <div class="b-leafborder b-leafborder--tl"></div>\r\n                <div class="b-leafborder b-leafborder--tr"></div>\r\n                <div class="b-leafborder b-leafborder--br"></div>\r\n                <div class="b-leafborder b-leafborder--bl"></div>\r\n                <img src="img/landing/intro/leaves/orange_leaf.png" alt="">\r\n            </div>\r\n            <div class="b-leaf__info">\r\n                <div class="b-leafinfo">\r\n                    <h4 class="b-leafinfo__header">'+r(e.text.landing.threes.analysis)+'</h4>\r\n                    <p class="b-leafinfo__text">'+r(e.text.landing.threes.analysisText)+"</p>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-landing-section-watch"]=function(e){var t,n="",r=_.escape;return n+='<div class="b-watch__container col-md-10 col-md-offset-1 js-watch__container g-invisible">\r\n    <div class="col-xs-6 b-watch__line b-watch__line--start js-watch animated" data-animation="fadeInDown">\r\n        <div class="b-watchline__circle b-watchline__circle--start js-watch animated"\r\n            data-animation="fadeInRight">\r\n            <span class="b-watchline__text">Start</span>\r\n        </div>\r\n    </div>\r\n    <div class="col-xs-6 b-watch__line b-watch__line--finish js-watch animated" data-animation="fadeInDown">\r\n        <div class="b-watchline__circle b-watchline__circle--finish js-watch animated"\r\n            data-animation="fadeInLeft">\r\n            <span class="b-watchline__text">Finish</span>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-4 col-sm-3 col-xs-4 b-watch__start g-col-xxs-12 js-watch animated"\r\n         data-animation="fadeInRight">\r\n        <div class="b-watch__header b-watch__header--start">\r\n            <span class="b-watch__text--big g-bolder">Integration</span>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-4 col-sm-6 col-xs-4 b-watch__thewatch g-col-xxs-12 js-thewatch animated"\r\n         data-animation="fadeIn">\r\n        <div class="b-thewatch__container">\r\n            <img class="js-watch__image" src="img/landing/watch/watch.png" alt="Watch">            <div class="b-watcharrow">\r\n                <div class="b-watcharrow__arrow js-arrow"></div>\r\n                <div class="b-watcharrow__circle js-arrowcircle"></div>\r\n            </div>\r\n            <div class="b-watch__circle js-watchcircle"></div>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-4 col-sm-3 col-xs-4 b-watch__finish g-col-xxs-12 js-watch animated"\r\n         data-animation="fadeInLeft">\r\n        <div class="b-watch__header b-watch__header--finish">\r\n            <span class="b-watch__text b-watch__text--big g-bolder">Few hours</span>\r\n            <br>\r\n            <span class="b-watch__text b-watch__text--small g-bolder">of your time</span>\r\n        </div>\r\n    </div>\r\n</div>',n},this.JST["tpl-Launch-step-log-defect-ticket"]=function(e){var t,n="",r=_.escape;return n+='<span data-js-ticket-id></span>\r\n<i data-js-issue-remove-ticket class="material-icons">clear</i>\r\n<div class="ui-tooltip">\r\n    <div class="ui-tooltip-content">\r\n        <img data-js-preloader src="img/time-in-progress.gif" />\r\n        <span class="ui-tooltip-message" data-js-tooltip-message></span>\r\n    </div>\r\n</div>\r\n',n},this.JST["tpl-launch-body"]=function(e){var t,n="",r=_.escape;return n+='<div class="launches-header-bar clearfix" data-js-header-bar>\r\n    <div class="multiple-selected-container" data-js-multiple-selected></div>\r\n    <div class="crumbs-container" data-js-crumbs></div>\r\n    <div data-js-controls-container></div>\r\n</div>\r\n<div class="preloader" data-js-preloader-launch-body>\r\n    <i class="material-icons loader-animation">refresh</i>\r\n</div>\r\n<div class="no-result-found" data-js-launch-not-found>\r\n    <i class="rp-icons rp-icons-warning"></i>\r\n    <span>'+((t=e.text.launches.noLaunchFound)==null?"":t)+"</span>\r\n    <p>"+r(e.text.failMessages.gridData)+'</p>\r\n</div>\r\n<div class="no-result-found" data-js-item-not-found>\r\n    <i class="rp-icons rp-icons-warning"></i>\r\n    <span>'+((t=e.text.launches.noItemFound)==null?"":t)+"</span>\r\n    <p>"+r(e.text.failMessages.gridData)+'</p>\r\n</div>\r\n<div class="launch-body-wrapper" data-js-info-container></div>',n},this.JST["tpl-launch-crumb"]=function(e){var t,n="",r=_.escape;return n+='<span class="fail-load-container">\r\n    <i class="rp-icons rp-icons-warning"></i>\r\n    <span class="ellipse" >'+r(e.text.launches.errorItem)+'</span>\r\n    <i class="arrow material-icons">keyboard_arrow_right</i>\r\n</span>\r\n<span class="success-load-container">\r\n    <i title="List view" class="material-icons" data-js-list-view-icon>format_indent_increase</i>\r\n    <a class="ellipse" data-js-link></a>\r\n    <span class="link-as-element ellipse" data-js-name></span>\r\n    <span class="autoanalyze" data-js-auto-analize>'+((t=e.text.ui.autoAnalyzeShort)==null?"":t)+'</span>\r\n    <i class="arrow material-icons">keyboard_arrow_right</i>\r\n</span>\r\n',n},this.JST["tpl-launch-crumbs"]=function(e){var t,n="",r=_.escape;return n+='<ul class="rp-nav rp-nav-left launch-breadcrumbs" data-js-crumbs-container>\r\n    <i class="load-crumbs material-icons loader-animation">refresh</i>\r\n    <li class="breadcrumbs-mode-container" data-js-switch-mode>\r\n        <i class="rp-icons rp-icons-square-plus breadcrumb-plus"></i>\r\n        <i class="rp-icons rp-icons-square-minus breadcrumb-minus"></i>\r\n    </li>\r\n    <li class="bredcrambs-lost-path" data-js-lost-path>\r\n        <span>'+r(e.text.launches.bredcrumbsLostLaunch)+"</span>\r\n        <a data-js-restore-lost-path>"+r(e.text.launches.bredcrumbsLostLaunchRestore)+"</a>\r\n    </li>\r\n</ul>",n},this.JST["tpl-launch-edit-menu"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return e.isCustomer||(n+="\r\n    ",_.isUndefined(e.item.mode)||(n+="\r\n        <li>\r\n            <a data-js-switch-mode></a>\r\n        </li>\r\n    "),n+="\r\n"),n+="\r\n<li>\r\n    <a data-js-finish>"+((t=e.text.launches.forceFinish)==null?"":t)+"</a>\r\n</li>\r\n",e.isDebug||(n+='\r\n    <li data-js-can-match>\r\n        <a data-js-can-match data-js-start-analyze data-type="match">\r\n            '+((t=e.text.launches.matchTitle)==null?"":t)+"\r\n        </a>\r\n    </li>\r\n"),n+="\r\n",e.isDebug||(n+='\r\n    <li data-js-can-analyze>\r\n        <a data-js-can-analyze data-js-start-analyze data-analyze-type="analyze">\r\n            '+((t=e.text.ui.analyze)==null?"":t)+"\r\n        </a>\r\n    </li>\r\n"),n+="\r\n<li>\r\n    <a data-js-remove>\r\n        "+((t=e.text.ui.delete)==null?"":t)+"\r\n    </a>\r\n</li>\r\n",e.exportFormats&&(n+='\r\n    <li role="separator" class="divider"></li>\r\n    <li class="rp-export-launch-group">\r\n        <span class="rp-export-label">'+((t=e.text.launches.export)==null?"":t)+':</span>\r\n        <div class="rp-export-btn-group">\r\n            ',_.each(e.exportFormats,function(r,i){n+='\r\n            <a href="'+((t=e.updateImagePath(e.getExportUrl(e.item.id,i)))==null?"":t)+'" download\r\n               data-js-export-format="'+((t=i)==null?"":t)+'" class="rp-btn rp-btn-default">'+((t=r.name)==null?"":t)+"</a>\r\n            "}),n+="\r\n        </div>\r\n    </li>\r\n"),n+="\r\n",n},this.JST["tpl-launch-filter-label"]=function(e){var t,n="",r=_.escape;return n+='<i class="material-icons" data-js-filter-shared>share</i>\r\n<span class="filter-name" data-js-filter-name></span>\r\n<i class="material-icons" data-js-filter-not-my>public</i>\r\n<span class="obligatory-field" data-js-filter-not-save></span>\r\n<i class="rp-icons rp-icons-buble comment-icon" data-js-filter-comment></i>\r\n<i class="material-icons close-filter" title="Filter close" data-js-filter-close>close</i>\r\n<div data-js-tooltip></div>\r\n',n},this.JST["tpl-launch-filter-panel"]=function(e){var t,n="",r=_.escape;return n+='<div class="filter-block">\r\n    <div class="filter-entities clearfix" data-js-filter-entities>\r\n\r\n    </div>\r\n    <div class="filter-settings">\r\n        <div class="left-items">\r\n            <a class="rp-btn rp-btn-default rp-button-with-icon" title="Add Widget" data-js-add-widget>\r\n                <i class="material-icons">add_circle</i>\r\n                <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.widgets.addNewWidget)==null?"":t)+'</span>\r\n            </a>\r\n        </div>\r\n        <div class="right-items">\r\n            <a class="rp-btn rp-btn-default rp-button-with-icon" title="Discard" data-js-discard-filter>\r\n                <i class="rp-icons rp-icons-discard"></i>\r\n                <span class="rp-btn-val hidden-sm hidden-xs">Discard</span>\r\n            </a>\r\n            <a class="rp-btn rp-btn-default rp-button-with-icon" title="Clone" data-js-clone-filter>\r\n                <i class="material-icons">library_add</i>\r\n                <span class="rp-btn-val hidden-sm hidden-xs">Clone</span>\r\n            </a>\r\n            <a class="rp-btn rp-btn-default rp-button-with-icon" title="Edit" data-js-edit-filter>\r\n                <i class="material-icons">edit</i>\r\n                <span class="rp-btn-val hidden-sm hidden-xs">Edit</span>\r\n            </a>\r\n            <a class="rp-btn rp-btn-default rp-button-with-icon" title="Save" data-js-save-filter>\r\n                <i class="material-icons">bookmark_border</i>\r\n                <span class="rp-btn-val hidden-sm hidden-xs">Save</span>\r\n            </a>\r\n        </div>\r\n        <div class="right-items">\r\n            <div class="description" data-js-filter-shared-descr><i class="material-icons" title="'+((t=e.text.filters.sharedDescription)==null?"":t)+'">share</i><span>'+((t=e.text.filters.sharedDescription)==null?"":t)+'</span></div>\r\n            <div class="description" data-js-filter-not-save-descr><span class="obligatory-field"></span><span>'+((t=e.text.filters.notSaveDescription)==null?"":t)+'</span></div>\r\n            <div class="description" data-js-filter-not-my-descr><i class="material-icons" title="'+((t=e.text.filters.globalDescription)==null?"":t)+'">public</i><span>'+((t=e.text.filters.globalDescription)==null?"":t)+"</span></div>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-launch-header"]=function(e){var t,n="",r=_.escape;return n+='<div class="launches-header-block clearfix">\r\n    <div class="filters-overflow-mobile">\r\n        <div class="rp-btn rp-btn-with-dropdown dropdown-toggle" data-toggle="dropdown">\r\n            <div class="select-value" data-js-active-filter></div>\r\n            <span class="rp-caret"></span>\r\n        </div>\r\n        <div class="dropdown-menu rp-width-100" data-js-filter-list-mobile>\r\n        </div>\r\n        <div class="mobile-filter-add rp-btn rp-btn-default rp-button-with-icon" data-js-add-filter>\r\n            <i class="rp-icons rp-icons-add-filter"></i>\r\n        </div>\r\n    </div>\r\n    <div class="filter-overflow" data-js-filters-overflow>\r\n        <div class="all-launches-overflow">\r\n            <a class="filter-item" data-js-all-link><span class="filter-name">All Launches</span></a>\r\n        </div>\r\n        <div class="new-filter-button rp-btn rp-btn-default rp-button-with-icon not-small" data-js-add-filter>\r\n            <i class="rp-icons rp-icons-add-filter"></i>\r\n            <span class="rp-btn-val">Add Filter</span>\r\n        </div>\r\n        <div class="filters-list" data-js-filter-list></div>\r\n    </div>\r\n    <div class="filter-panel-overflow" data-js-filter-panel></div>\r\n</div>',n},this.JST["tpl-launch-launch-control"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.context==="userdebug";return n+='\r\n<div class="control-buttons rp-nav rp-nav-right">\r\n    <a class="rp-btn mobile-hide rp-btn-default rp-button-with-icon rp-button-dropdown disabled" data-js-multi-button aria-expanded="true" data-toggle="dropdown" title="'+((t=e.text.launches.actionTitle)==null?"":t)+'">\r\n        <i class="material-icons">menu</i>\r\n        <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.ui.actions)==null?"":t)+'</span>\r\n        <i class="material-icons">keyboard_arrow_down</i>\r\n    </a>\r\n    <ul class="dropdown-menu">\r\n        ',o||(n+='\r\n        <li>\r\n            <a data-js-multi-action="merge">'+((t=e.text.launches.merge)==null?"":t)+'</a>\r\n        </li>\r\n        <li>\r\n            <a data-js-multi-action="compare">'+((t=e.text.launches.Compare)==null?"":t)+"</a>\r\n        </li>\r\n        "),n+='\r\n        <li>\r\n            <a data-js-multi-action="changemode">'+((t=o?e.text.launches.shiftToLaunches:e.text.launches.shiftToDebug)==null?"":t)+'</a>\r\n        </li>\r\n        <li>\r\n            <a data-js-multi-action="forcefinish">'+((t=e.text.launches.forceFinish)==null?"":t)+'</a>\r\n        </li>\r\n        <li>\r\n            <a data-js-multi-action="remove">'+((t=e.text.ui.delete)==null?"":t)+'</a>\r\n        </li>\r\n    </ul>\r\n    <a class="rp-btn rp-btn-default rp-button-with-icon" data-js-refresh title="'+((t=e.text.ui.refresh)==null?"":t)+'">\r\n        <i class="material-icons">autorenew</i>\r\n        <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.ui.refresh)==null?"":t)+'</span>\r\n        <span data-js-refresh-counter class="counter"></span>\r\n    </a>\r\n</div>\r\n',e.context=="userdebug"&&(n+='\r\n<div class="refine-wrapper filter-entities clearfix">\r\n    <span class="refine-label hidden-xs">REFINE:</span>\r\n    <div data-js-refine-entities></div>\r\n</div>\r\n'),n},this.JST["tpl-launch-launch-table"]=function(e){function s(){n+=i.call(arguments,"")}function o(e,t){return'<div class="table-wrapper"><div class="middle-wrapper"><span class="text-overflow" data-js-launch-table-title="'+e+'">'+'<div class="filter-icon-wrapper">'+'<i class="rp-icons rp-icons-filter"></i>'+"</div>&nbsp;"+'<span class="long-size">'+e+"</span>"+'<span class="short-size" title="'+e+'">'+t+"</span>&nbsp;"+'<div class="sort-icon-wrapper">'+'<i class="material-icons">keyboard_arrow_up</i>'+'<i class="material-icons">keyboard_arrow_down</i>'+"</div>"+"</span>"+"</div>"+"</div>"}var t,n="",r=_.escape,i=Array.prototype.join;return n+='\r\n\r\n\r\n\r\n<div class="rp-table-grid all-launches-grid suit-grid rp-odd-even rp-table-hover" data-js-table-container>\r\n    <div class="row rp-grid-thead" data-js-fixed-header>\r\n        <div class="grid-cell name-grid-cell rp-grid-th" data-sorter="name" data-filter="name">\r\n            '+((t=o(e.text.launchesHeaders.name,e.text.launchesHeaders.name_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell time-grid-cell rp-grid-th" data-sorter="start_time" data-filter="start_time">\r\n            '+((t=o(e.text.launchesHeaders.start_time,e.text.launchesHeaders.start_time_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell number-grid-cell rp-grid-th" data-sorter="statistics$executions$total" data-filter="statistics$executions$total">\r\n            '+((t=o(e.text.launchesHeaders.total,e.text.launchesHeaders.total_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell number-grid-cell rp-grid-th" data-sorter="statistics$executions$passed" data-filter="statistics$executions$passed">\r\n            '+((t=o(e.text.launchesHeaders.passed,e.text.launchesHeaders.passed_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell number-grid-cell rp-grid-th" data-sorter="statistics$executions$failed" data-filter="statistics$executions$failed">\r\n            '+((t=o(e.text.launchesHeaders.failed,e.text.launchesHeaders.failed_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell number-grid-cell rp-grid-th" data-sorter="statistics$executions$skipped" data-filter="statistics$executions$skipped">\r\n            '+((t=o(e.text.launchesHeaders.skipped,e.text.launchesHeaders.skipped_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell counter-grid-cell rp-grid-th" data-sorter="statistics$defects$product_bug$total" data-filter="statistics$defects$product_bug$total">\r\n            '+((t=o(e.text.launchesHeaders.product_bug,e.text.launchesHeaders.product_bug_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell counter-grid-cell rp-grid-th" data-sorter="statistics$defects$automation_bug$total" data-filter="statistics$defects$automation_bug$total">\r\n            '+((t=o(e.text.launchesHeaders.automation_bug,e.text.launchesHeaders.automation_bug_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell counter-grid-cell rp-grid-th" data-sorter="statistics$defects$system_issue$total" data-filter="statistics$defects$system_issue$total">\r\n            '+((t=o(e.text.launchesHeaders.system_issue,e.text.launchesHeaders.system_issue_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell counter-grid-cell rp-grid-th" data-sorter="statistics$defects$to_investigate$total" data-filter="statistics$defects$to_investigate$total">\r\n            '+((t=o(e.text.launchesHeaders.to_investigate,e.text.launchesHeaders.to_investigate_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell select-grid-cell rp-grid-th">\r\n            <div class="table-wrapper">\r\n                <div class="middle-wrapper">\r\n                    <label class="rp-checkbox-wrap">\r\n                        <input class="rp-input-checkbox" type="checkbox" data-js-select-all>\r\n                        <span></span>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n',n},this.JST["tpl-launch-multiple-selected-item"]=function(e){var t,n="",r=_.escape;return n+='<span data-js-item-name></span>\r\n<i class="material-icons close-icon-item" data-ja-close-item>clear</i>',n},this.JST["tpl-launch-multiple-selected"]=function(e){var t,n="",r=_.escape;return n+="<h2>"+((t=e.text.launches.multipleSelectHeader)==null?"":t)+'</h2>\r\n<div class="items-container" data-js-multi-select-items></div>\r\n<p class="error-message" data-js-error-message>'+((t=e.text.launches.multiSelectError)==null?"":t)+'</p>\r\n<i class="material-icons close-icon" data-ja-close>clear</i>\r\n<div class="rp-btn rp-btn-default proceed-button" data-js-proceed title="'+((t=e.text.launches.proceedValidItems)==null?"":t)+'">\r\n    <span class="rp-btn-val">'+((t=e.text.launches.proceedValidItems)==null?"":t)+"</span>\r\n</div>",n},this.JST["tpl-launch-step-control"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.context==="userdebug";return n+='\r\n<div class="control-buttons rp-nav rp-nav-right">\r\n    <div class="rp-btn mobile-hide rp-btn-default rp-button-with-icon rp-button-dropdown disabled" data-js-multi-button aria-expanded="true" data-toggle="dropdown" title="'+((t=e.text.launches.actionTitle)==null?"":t)+'">\r\n        <i class="material-icons">menu</i>\r\n        <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.ui.actions)==null?"":t)+'</span>\r\n        <i class="material-icons">keyboard_arrow_down</i>\r\n    </div>\r\n    <ul class="dropdown-menu">\r\n        <li>\r\n            <a data-js-multi-action="editdefect">'+((t=e.text.launches.editDefects)==null?"":t)+"</a>\r\n        </li>\r\n        ",o||(n+='\r\n            <li>\r\n                <a data-js-multi-action="postbug">'+((t=e.text.launches.postBug)==null?"":t)+'</a>\r\n            </li>\r\n            <li>\r\n                <a data-js-multi-action="loadbug">'+((t=e.text.launches.loadBug)==null?"":t)+"</a>\r\n            </li>\r\n        "),n+='\r\n        <li>\r\n            <a data-js-multi-action="remove">'+((t=e.text.ui.delete)==null?"":t)+"</a>\r\n        </li>\r\n    </ul>\r\n    ",o||(n+='\r\n        <div class="rp-btn rp-btn-default rp-button-with-icon hide" data-js-history title="'+((t=e.text.launches.historyView)==null?"":t)+'">\r\n            <i class="material-icons">history</i>\r\n            <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.launches.historyView)==null?"":t)+"</span>\r\n        </div>\r\n    "),n+='\r\n    <div class="rp-btn rp-btn-default rp-button-with-icon" data-js-refresh title="'+((t=e.text.ui.refresh)==null?"":t)+'">\r\n        <i class="material-icons">autorenew</i>\r\n        <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.ui.refresh)==null?"":t)+'</span>\r\n        <span data-js-refresh-counter class="counter"></span>\r\n    </div>\r\n</div>\r\n\r\n<div class="info-wrapper clearfix" data-js-info-line></div>\r\n\r\n<div class="refine-wrapper filter-entities clearfix">\r\n    <span class="refine-label hidden-xs">REFINE:</span>\r\n    <div data-js-refine-entities></div>\r\n</div>',n},this.JST["tpl-launch-step-item"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="row rp-table-row '+((t=e.isCollapsedMethod?"collapse-method":"")==null?"":t)+'" data-js-status-class>\r\n    <div class="grid-cell time-grid-cell method-type-grid-cell">\r\n        <span class="text-muted" data-js-method-type></span>\r\n    </div>\r\n    <div class="grid-cell name-grid-cell">\r\n        <div class="name-grid-overflow">\r\n            <h5 class="rp-grid-name">\r\n                <a href="" data-js-name-link><span data-js-name></span><span data-js-launch-number></span></a>&nbsp;&nbsp;<i class="item-edit-icon material-icons" data-js-item-edit>edit</i>\r\n            </h5>\r\n            <ul class="rp-grid-tags">\r\n                <li class="rp-item-duration" >\r\n                    <span data-js-item-status></span>\r\n                    <span class="mobile-tag">&nbsp;&nbsp;|&nbsp;&nbsp;<span data-js-time-from-now></span></span>\r\n                </li>\r\n                <li title="Owner" class="rp-launch-owner owner" data-js-owner-block>\r\n                    <i class="material-icons">person</i>\r\n                    <a data-js-owner-name></a>\r\n                </li>\r\n                <li class="rp-launch-tags" data-js-tags-container>\r\n                    <i class="rp-icons rp-icons-ticket"></i>\r\n                    <span data-js-tags></span>\r\n                </li>\r\n                <li class="mobile-tag">\r\n                    <span>@</span><span data-js-method-type></span>&nbsp;&nbsp;|&nbsp;&nbsp;<span data-js-status></span>\r\n                </li>\r\n            </ul>\r\n            <div class="rp-grid-description" data-js-description></div>\r\n        </div>\r\n    </div>\r\n    <div class="grid-cell status-grid-cell"><strong data-js-status></strong></div>\r\n    <div class="grid-cell time-grid-cell">\r\n        <div data-js-time-format class="pr-grid-show-time">\r\n            <span class="hidden-sm hidden-md hidden-lg"><b>'+((t=e.text.launches.prefixStartTime)==null?"":t)+'</b></span>\r\n            <span class="from-now" data-js-time-from-now></span>\r\n            <span class="exact-time" data-js-time-exact></span>\r\n        </div>\r\n    </div>\r\n    <!--<div class="grid-cell status-grid-cell" data-js-item-status></div>-->\r\n    ',e.noIssue||(n+='\r\n    <div class="grid-cell type-grid-cell" data-js-step-issue></div>\r\n    <div class="grid-cell select-grid-cell" data-js-select-cell>\r\n        <div class="table-wrapper">\r\n            <div class="middle-wrapper">\r\n                <label class="rp-checkbox-wrap">\r\n                    <input class="rp-input-checkbox" type="checkbox" data-js-select-item>\r\n                    <span></span>\r\n                </label>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    '),n+="\r\n</div>\r\n",n},this.JST["tpl-launch-step-log-defect-type"]=function(e){var t,n="",r=_.escape;return n+='<div data-js-issue-type class="step-log-defect-type">\r\n    <div class="defect-type-badge-overflow" data-js-edit-defect>\r\n        <span class="defect-type-badge" data-js-issue-title>\r\n            <i data-js-issue-color></i>\r\n            <span data-js-issue-name></span>\r\n        </span>&nbsp;&nbsp;<i class="material-icons edit-defect" >edit</i>\r\n    </div>\r\n    <div data-js-issue-tickets class="tickets-container"></div>\r\n    <div class="defect-type-description" data-js-issue-comment></div>\r\n</div>',n},this.JST["tpl-launch-step-parent"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="row rp-table-row rp-step-parents-line">\r\n    <div class="parents-line">\r\n        ';var o="";return n+="\r\n        ",_.each(e.model.parentPath,function(i,s){n+="\r\n            ",o&&(n+='<span class="parents-line-item">/</span>'),n+="\r\n             ",o?o+="/"+s:o=e.getParentUrl(s),n+='\r\n             <a href="'+((t=o)==null?"":t)+'" class="parents-line-item">'+r(i)+"</a>\r\n        "}),n+="\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-launch-step-table"]=function(e){function s(){n+=i.call(arguments,"")}function o(e,t){return'<div class="table-wrapper"><div class="middle-wrapper"><span class="text-overflow"><div class="filter-icon-wrapper"><i class="rp-icons rp-icons-filter"></i></div>&nbsp;<span class="long-size">'+e+"</span>"+'<span class="short-size" title="'+e+'">'+t+"</span>&nbsp;"+'<div class="sort-icon-wrapper">'+'<i class="material-icons">keyboard_arrow_up</i>'+'<i class="material-icons">keyboard_arrow_down</i>'+"</div>"+"</span>"+"</div>"+"</div>"}var t,n="",r=_.escape,i=Array.prototype.join;return n+='\r\n\r\n\r\n\r\n<div class="rp-table-grid step-grid rp-odd-even rp-table-hover" data-js-table-container>\r\n    <div class="row rp-grid-thead hidden-xs" data-js-fixed-header>\r\n        <div class="grid-cell time-grid-cell rp-grid-th add-collapse-methods-btn" data-sorter="type" data-filter="type">\r\n           <label class="rp-switcher" data-js-collapse-label title="Expand precondition methods">\r\n               <input type="checkbox" data-js-collapse-input>\r\n               <div class="slider"></div>\r\n           </label>\r\n           '+((t=o(e.text.launchesHeaders.type,e.text.launchesHeaders.type_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell name-grid-cell rp-grid-th" data-sorter="name" data-filter="name">\r\n            '+((t=o(e.text.launchesHeaders.name,e.text.launchesHeaders.name_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell status-grid-cell rp-grid-th" data-sorter="status" data-filter="status">\r\n            '+((t=o(e.text.launchesHeaders.status,e.text.launchesHeaders.status_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell time-grid-cell rp-grid-th" data-sorter="start_time" data-filter="start_time">\r\n            '+((t=o(e.text.launchesHeaders.start_time,e.text.launchesHeaders.start_time_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell type-grid-cell rp-grid-th" data-sorter="issue$issue_type" data-filter="issue$issue_type">\r\n            '+((t=o(e.text.launchesHeaders.issue,e.text.launchesHeaders.issue_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell select-grid-cell rp-grid-th">\r\n            <div class="table-wrapper">\r\n                <div class="middle-wrapper">\r\n                    <label class="rp-checkbox-wrap">\r\n                        <input class="rp-input-checkbox" type="checkbox" data-js-select-all>\r\n                        <span></span>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n\r\n\r\n\r\n',n},this.JST["tpl-launch-suite-control"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.context==="userdebug";return n+='\r\n<div class="control-buttons rp-nav rp-nav-right">\r\n    <div class="rp-btn mobile-hide rp-btn-default rp-button-with-icon disabled" data-js-milti-delete title="'+((t=e.text.launches.actionTitle)==null?"":t)+'">\r\n        <i class="rp-icons rp-icons-delete"></i>\r\n        <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.ui.delete)==null?"":t)+"</span>\r\n    </div>\r\n    ",o||(n+='\r\n        <div class="rp-btn rp-btn-default rp-button-with-icon hide" data-js-history title="'+((t=e.text.launches.historyView)==null?"":t)+'">\r\n            <i class="material-icons">history</i>\r\n            <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.launches.historyView)==null?"":t)+"</span>\r\n        </div>\r\n    "),n+='\r\n    <div class="rp-btn rp-btn-default rp-button-with-icon" data-js-refresh title="'+((t=e.text.ui.refresh)==null?"":t)+'">\r\n        <i class="material-icons">autorenew</i>\r\n        <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.ui.refresh)==null?"":t)+'</span>\r\n        <span data-js-refresh-counter class="counter"></span>\r\n    </div>\r\n</div>\r\n\r\n<div class="info-wrapper clearfix" data-js-info-line></div>\r\n\r\n<div class="refine-wrapper filter-entities clearfix">\r\n    <span class="refine-label hidden-xs">REFINE:</span>\r\n    <div data-js-refine-entities></div>\r\n</div>',n},this.JST["tpl-launch-suite-defects-hover"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="launch-suite-defect-hover">\r\n    <div class="defect-title">\r\n        <',e.noLink?n+="span":n+='a href="'+r(e.total.url)+'"',n+=' class="defect-row" data-js-defect-total>\r\n           <span class="defect-name">\r\n             <span class="defect-color" style="background: '+r(e.total.color)+'"></span>\r\n                '+((t=!e.noSubDefects?e.text.infoLine.total:"")==null?"":t)+" "+r(e.total.name)+'\r\n            </span>\r\n            <span class="defect-value">'+((t=e.total.value)==null?"":t)+"</span>\r\n        </",e.noLink?n+="span":n+="a",n+=">\r\n    </div>\r\n    ",e.subDefects.length&&!e.noSubDefects&&(n+="\r\n    <ul>\r\n        ",_.each(e.subDefects,function(i){n+="\r\n        <li>\r\n            <",e.noLink?n+="span":n+='a href="'+r(i.url)+'"',n+=' class="defect-row">\r\n                <span class="defect-name">\r\n                    <span class="defect-color" style="background: '+r(i.color)+'"></span>\r\n                    '+r(i.name)+'\r\n                </span>\r\n                <span class="defect-value">'+((t=i.value)==null?"":t)+"</span>\r\n            </",e.noLink?n+="span":n+="a",n+=">\r\n        </li>\r\n        "}),n+="\r\n    </ul>\r\n    "),n+="\r\n</div>\r\n",n},this.JST["tpl-launch-suite-defects"]=function(e){var t,n="",r=_.escape;return n+='<div class="launch-suite-defects" data-js-hover-defect>\r\n    <a class="chart-overflow" data-js-link>\r\n        <svg data-js-chart></svg>\r\n        <div class="total-overflow">\r\n            <span data-js-defects-total></span>\r\n        </div>\r\n    </a>\r\n    <div class="defect-hover" data-js-hover-view-container></div>\r\n</div>\r\n',n},this.JST["tpl-launch-suite-info-panel"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<ul class="info_section clearfix">\r\n    <li class="progress-block">\r\n        <div class="progress" data-js-executions>\r\n            <div data-js-passed-progress class="progress-bar"></div>\r\n            <div data-js-failed-progress class="progress-bar"></div>\r\n            <div data-js-skipped-progress class="progress-bar"></div>\r\n        </div>\r\n        <div class="hover-area" data-js-hover-element></div>\r\n    </li>\r\n    <li class="passed-block">\r\n        <span class="info-section-passed">'+((t=e.text.launchesHeaders.passed)==null?"":t)+' <span data-js-statistics-passed></span>%</span>\r\n    </li>\r\n    <li class="total-block">\r\n        <span class="info-section-total">'+((t=e.text.launchesHeaders.total)==null?"":t)+' <span data-js-statistics-total></span></span>\r\n    </li>\r\n    <li>\r\n        <span class="duration" data-js-duration>\r\n            '+((t=e.text.launches.prefixDuration)==null?"":t)+'\r\n            <span data-js-item-duration></span>\r\n        </span>\r\n        <div class="hover-area" data-js-hover-element></div>\r\n    </li>\r\n    <li class="br-block"></li>\r\n    ',_.each(e.defectTypes,function(e,r){n+='\r\n    <li class="defect-block">\r\n        <span class="info-section-issue" data-js-defect-type="'+((t=e.type)==null?"":t)+'">\r\n            <span class="issue-type"><i  style="background: '+((t=e.color)==null?"":t)+'"></i><span>'+((t=e.shortName)==null?"":t)+'</span></span>\r\n            <span class="issues" data-js-defect-'+((t=e.type)==null?"":t)+'-total style="border-color: '+((t=e.color)==null?"":t)+'"></span>\r\n            <div class="defect-hover" data-js-hover-element></div>\r\n        </span>\r\n    </li>\r\n    '}),n+="\r\n</ul>",n},this.JST["tpl-launch-suite-item-duration"]=function(e){var t,n="",r=_.escape;return n+='<span class="duration-content" data-js-status-title>\r\n    <i data-js-status-icon></i>\r\n    <span class="duration-time" data-js-duration-time></span>\r\n</span>',n},this.JST["tpl-launch-suite-item"]=function(e){var t,n="",r=_.escape;return n+='\r\n    <div class="grid-cell name-grid-cell name-cell '+((t=e.type=="LAUNCH"?"launch-name-cell":"")==null?"":t)+'">\r\n        <div class="btn-group" data-js-launch-edit>\r\n            <a class="item-menu" data-js-launch-menu data-toggle="dropdown" href="#">\r\n                <i class="rp-svg-icon svg-icon-menu-size-14"></i>\r\n            </a>\r\n        </div>\r\n        <div class="name-grid-overflow">\r\n            <h5 class="rp-grid-name">\r\n                <a href="" data-js-name-link><span data-js-name></span><span data-js-launch-number></span></a><span class="autoanalyze" data-js-analize-label>'+((t=e.text.ui.analyze)==null?"":t)+'</span>&nbsp;&nbsp;<i class="item-edit-icon material-icons" data-js-item-edit>edit</i>\r\n            </h5>\r\n            <ul class="rp-grid-tags">\r\n                <li class="rp-item-duration" >\r\n                    <span data-js-item-status></span>\r\n                    <span class="mobile-tag">| <span data-js-time-from-now></span></span>\r\n                </li>\r\n                <li title="Owner" class="rp-launch-owner owner" data-js-owner-block>\r\n                    <i class="material-icons">person</i>\r\n                    <a data-js-owner-name></a>\r\n                </li>\r\n                <li class="rp-launch-tags" data-js-tags-container>\r\n                    <i class="rp-icons rp-icons-ticket"></i>\r\n                    <span data-js-tags></span>\r\n                </li>\r\n            </ul>\r\n            <div class="rp-grid-description" data-js-description></div>\r\n        </div>\r\n    </div>\r\n    <div class="grid-cell time-grid-cell">\r\n        <div data-js-time-format class="pr-grid-show-time">\r\n            <span class="hidden-sm hidden-md hidden-lg"><b>'+((t=e.text.launches.prefixStartTime)==null?"":t)+'</b></span>\r\n            <span class="from-now" data-js-time-from-now></span>\r\n            <span class="exact-time" data-js-time-exact></span>\r\n        </div>\r\n    </div>\r\n    <div class="grid-cell number-grid-cell total-number"><p class="mobile-title">'+r(e.text.launchesHeaders.total)+'</p><a data-js-statistics-total></a></div>\r\n    <div class="grid-cell number-grid-cell"><p class="mobile-title">'+r(e.text.launchesHeaders.passed)+'</p><a data-js-statistics-passed></a></div>\r\n    <div class="grid-cell number-grid-cell"><p class="mobile-title">'+r(e.text.launchesHeaders.failed)+'</p><a data-js-statistics-failed></a></div>\r\n    <div class="grid-cell number-grid-cell last-child"><p class="mobile-title">'+r(e.text.launchesHeaders.skipped)+'</p><a data-js-statistics-skipped></a></div>\r\n    <div class="grid-cell counter-grid-cell"><p class="mobile-title"><i data-js-label-pb></i>'+r(e.text.launchesHeaders.product_bug_super_short)+'</p><div data-js-statistics-product-bug></div></div>\r\n    <div class="grid-cell counter-grid-cell"><p class="mobile-title"><i data-js-label-ab></i>'+r(e.text.launchesHeaders.automation_bug_super_short)+'</p><div data-js-statistics-automation-bug></div></div>\r\n    <div class="grid-cell counter-grid-cell"><p class="mobile-title"><i data-js-label-si></i>'+r(e.text.launchesHeaders.system_issue_super_short)+'</p><div data-js-statistics-system-issue></div></div>\r\n    <div class="grid-cell counter-grid-cell last-child"><p class="mobile-title"><i data-js-label-ti></i>'+r(e.text.launchesHeaders.to_investigate_super_short)+'</p><a class="defect-to-investigate" data-js-statistics-to-investigate></a></div>\r\n    <div class="grid-cell select-grid-cell">\r\n        <div class="table-wrapper">\r\n            <div class="middle-wrapper">\r\n                <label class="rp-checkbox-wrap">\r\n                    <input class="rp-input-checkbox" type="checkbox" data-js-select-item>\r\n                    <span></span>\r\n                </label>\r\n            </div>\r\n        </div>\r\n    </div>\r\n',n},this.JST["tpl-launch-suite-step-items"]=function(e){var t,n="",r=_.escape;return n+='<div class="preloader" data-js-preloader>\r\n    <i class="material-icons loader-animation">refresh</i>\r\n</div>\r\n<div class="no-result-found">\r\n    <i class="rp-icons rp-icons-warning"></i>\r\n    <span>'+((t=e.text.ui.noResultsFound)==null?"":t)+"</span>\r\n</div>\r\n<div data-js-launches-container></div>\r\n<div data-js-paginate-container></div>",n},this.JST["tpl-launch-suite-table"]=function(e){function s(){n+=i.call(arguments,"")}function o(e,t){return'<div class="table-wrapper"><div class="middle-wrapper"><span class="text-overflow"><div class="filter-icon-wrapper"><i class="rp-icons rp-icons-filter"></i></div>&nbsp;<span class="long-size">'+e+"</span>"+'<span class="short-size" title="'+e+'">'+t+"</span>&nbsp;"+'<div class="sort-icon-wrapper">'+'<i class="material-icons">keyboard_arrow_up</i>'+'<i class="material-icons">keyboard_arrow_down</i>'+"</div>"+"</span>"+"</div>"+"</div>"}var t,n="",r=_.escape,i=Array.prototype.join;return n+='\r\n\r\n\r\n\r\n<div class="rp-table-grid suit-grid rp-odd-even rp-table-hover" data-js-table-container>\r\n    <div class="row rp-grid-thead" data-js-fixed-header>\r\n        <div class="grid-cell name-grid-cell rp-grid-th" data-sorter="name" data-filter="name">\r\n            '+((t=o(e.text.launchesHeaders.name,e.text.launchesHeaders.name_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell time-grid-cell rp-grid-th" data-sorter="start_time" data-filter="start_time">\r\n            '+((t=o(e.text.launchesHeaders.start_time,e.text.launchesHeaders.start_time_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell number-grid-cell rp-grid-th" data-sorter="statistics$executions$total" data-filter="statistics$executions$total">\r\n            '+((t=o(e.text.launchesHeaders.total,e.text.launchesHeaders.total_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell number-grid-cell rp-grid-th" data-sorter="statistics$executions$passed" data-filter="statistics$executions$passed">\r\n            '+((t=o(e.text.launchesHeaders.passed,e.text.launchesHeaders.passed_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell number-grid-cell rp-grid-th" data-sorter="statistics$executions$failed" data-filter="statistics$executions$failed">\r\n            '+((t=o(e.text.launchesHeaders.failed,e.text.launchesHeaders.failed_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell number-grid-cell rp-grid-th" data-sorter="statistics$executions$skipped" data-filter="statistics$executions$skipped">\r\n            '+((t=o(e.text.launchesHeaders.skipped,e.text.launchesHeaders.skipped_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell counter-grid-cell rp-grid-th" data-sorter="statistics$defects$product_bug$total" data-filter="statistics$defects$product_bug$total">\r\n            '+((t=o(e.text.launchesHeaders.product_bug,e.text.launchesHeaders.product_bug_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell counter-grid-cell rp-grid-th" data-sorter="statistics$defects$automation_bug$total" data-filter="statistics$defects$automation_bug$total">\r\n            '+((t=o(e.text.launchesHeaders.automation_bug,e.text.launchesHeaders.automation_bug_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell counter-grid-cell rp-grid-th" data-sorter="statistics$defects$system_issue$total" data-filter="statistics$defects$system_issue$total">\r\n            '+((t=o(e.text.launchesHeaders.system_issue,e.text.launchesHeaders.system_issue_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell counter-grid-cell rp-grid-th" data-sorter="statistics$defects$to_investigate$total" data-filter="statistics$defects$to_investigate$total">\r\n            '+((t=o(e.text.launchesHeaders.to_investigate,e.text.launchesHeaders.to_investigate_short))==null?"":t)+'\r\n        </div>\r\n        <div class="grid-cell select-grid-cell rp-grid-th">\r\n            <div class="table-wrapper">\r\n                <div class="middle-wrapper">\r\n                    <label class="rp-checkbox-wrap">\r\n                        <input class="rp-input-checkbox" type="checkbox" data-js-select-all>\r\n                        <span></span>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n',n},this.JST["tpl-launch-history-body"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-history-filters">\r\n    <div class="required filter-wrapper" data-js-depth-filter></div>\r\n</div>\r\n<div data-js-history-table></div>\r\n<div data-js-history-loader class="preloader">\r\n    <i class="material-icons loader-animation">autorenew</i>\r\n</div>\r\n<div class="pr-history-load-more">\r\n    <a href="#" class="btn btn-block rb-btn-settings" data-js-load-more>\r\n        <h3>'+((t=e.text.launches.clickToLoadMore)==null?"":t)+"</h3>\r\n    </a>\r\n</div>\r\n",n},this.JST["tpl-launch-history-control"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-nav rp-nav-right">\r\n    <div class="rp-btn rp-btn-default rp-button-with-icon" data-js-refresh title="'+((t=e.text.ui.refresh)==null?"":t)+'">\r\n        <i class="material-icons">autorenew</i>\r\n        <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.ui.refresh)==null?"":t)+'</span>\r\n    </div>\r\n</div>\r\n\r\n<div class="info-wrapper clearfix" data-js-info-line></div>',n},this.JST["tpl-launch-history-item-cell"]=function(e){var t,n="",r=_.escape;return n+='<div class="history-col-content history-warning-col" data-tooltip-type="warning"\r\n     data-tooltip-content="'+((t=e.text.launches.severalItems)==null?"":t)+'">\r\n    <i class="material-icons">visibility_off</i>\r\n</div>\r\n<div class="history-col-content history-empty-col">\r\n    <i class="material-icons">not_interested</i><br>\r\n    '+((t=e.text.launches.noItemInLaunch)==null?"":t)+'\r\n</div>\r\n<div class="history-col-content empty-item-col">\r\n    <i class="rp-icons rp-icons-warning2"></i><br>\r\n    '+((t=e.text.launches.emptyItem)==null?"":t)+'\r\n</div>\r\n<div class="history-col-content history-statistics" data-js-history-statistics></div>\r\n<div class="history-col-content history-statistics" data-js-history-issue></div>',n},this.JST["tpl-launch-history-item-issue"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="history-defect-badge no-stats '+((t=e.stats.cls)==null?"":t)+'" style="background: '+r(e.stats.issueType.color)+'" data-tooltip-type="issue" data-tooltip-content="'+r(e.stats.issueType.longName)+'">\r\n    <span>'+r(e.stats.issueType.shortName)+"</span>\r\n</div>\r\n",e.stats.comment&&(n+='\r\n<div class="history-comment" data-tooltip-type="comment" data-tooltip-content="'+r(e.stats.comment)+'">\r\n    <span>\r\n        <i class="material-icons">chat</i>\r\n    </span>\r\n</div>\r\n'),n+="\r\n",e.stats.tickets&&(n+='\r\n<div class="history-tickets" data-tooltip-type="tickets" data-tooltip-content="'+((t=e.stats.tickets)==null?"":t)+'">\r\n    <span>\r\n        <i class="rp-icons rp-icons-ticket icon-ticket"></i>\r\n    </span>\r\n</div>\r\n'),n+="\r\n",n},this.JST["tpl-launch-history-item-stats"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return _.each(e.stats,function(e,i){n+='\r\n<div class="history-defect-badge launch-suite-defects '+((t=e.cls)==null?"":t)+'" data-tooltip-type="'+((t=i)==null?"":t)+'" style="background: '+r(e.color)+'">\r\n    <span>'+r(e.shortName)+'</span>\r\n    <div data-js-defect-hover class="defect-hover"></div>\r\n</div>\r\n'}),n},this.JST["tpl-launch-history-item"]=function(e){var t,n="",r=_.escape;return n+='<div class="history-col" style="width: '+((t=e.nameWidth)==null?"":t)+'%;">\r\n    <h5 class="rp-grid-name">\r\n        <a href="" class="" data-js-name></a>\r\n    </h5>\r\n    <ul class="rp-grid-tags" data-js-tags-container>\r\n        <li class="rp-launch-tags">\r\n            <i class="rp-icons rp-icons-ticket"></i>\r\n            <span data-js-tags></span>\r\n        </li>\r\n    </ul>\r\n    <div class="rp-grid-description" data-js-description></div>\r\n</div>\r\n',n},this.JST["tpl-launch-history-table"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="rp-history-grid">\r\n    <div data-js-history-scroll>\r\n        <div class="history-grid-table" data-js-history-content>\r\n            <div class="history-grid-thead">\r\n                <div class="history-col">\r\n                    <div class="history-grid-th">\r\n                        <span class="history-grid-th-name">'+((t=e.text.launchesHeaders.name)==null?"":t)+"</span>\r\n                    </div>\r\n                </div>\r\n                ",_.forEach(e.launches,function(r){n+='\r\n                <div class="history-col ',r.launchStatus=="IN_PROGRESS"&&(n+="in-progress"),n+='">\r\n                    <div class="history-grid-th">\r\n                    <span class="history-grid-th-name">\r\n                        '+((t=e.text.launches.launchHash)==null?"":t)+""+((t=r.launchNumber)==null?"":t)+"\r\n                    </span>\r\n                    </div>\r\n                </div>\r\n                "}),n+="\r\n            </div>\r\n        </div>\r\n        <br>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-launch-log-body"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.context==="userdebug";return n+='\r\n<div class="launch-log-body" data-js-log-item-container>\r\n    <div class="preloader launch-log-preloader">\r\n        <i class="material-icons loader-animation">refresh</i>\r\n    </div>\r\n    <div class="no-result-found launch-log-not-found">\r\n        <i class="rp-icons rp-icons-warning"></i>\r\n        <span>'+((t=e.text.launches.noItemFound)==null?"":t)+"</span>\r\n        <p>"+r(e.text.failMessages.gridData)+'</p>\r\n    </div>\r\n    <div class="item-info-block" data-js-item-info></div>\r\n    <div data-js-item-logs></div>\r\n    ',o||(n+='\r\n        <div class="history-line-block" data-js-history-line></div>\r\n    '),n+="\r\n</div>",n},this.JST["tpl-launch-log-control"]=function(e){var t,n="",r=_.escape;return n+='<div class="control-buttons rp-nav rp-nav-right">\r\n\r\n    <div class="rp-nav arrow-buttons">\r\n        <a class="rp-btn rp-btn-default rp-button-with-icon" data-js-button-prev>\r\n            <i class="material-icons">keyboard_arrow_left</i>\r\n        </a>\r\n        <a class="rp-btn rp-btn-default rp-button-with-icon" data-js-button-next>\r\n            <i class="material-icons">keyboard_arrow_right</i>\r\n        </a>\r\n    </div>\r\n    <div class="rp-nav">\r\n        <div class="rp-btn rp-btn-default rp-button-with-icon" title="'+((t=e.text.ui.refresh)==null?"":t)+'" data-js-button-refresh>\r\n            <i class="material-icons">autorenew</i>\r\n            <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.ui.refresh)==null?"":t)+'</span>\r\n            <span id="changeCounter" class="bounce"></span>\r\n        </div>\r\n    </div>\r\n</div>\r\n',n},this.JST["tpl-launch-log-history-line-item"]=function(e){var t,n="",r=_.escape;return n+='<p class="title-launch"><span>LAUNCH</span> #<span data-js-launch-number></span></p>\r\n<div class="history-item-container" data-js-tooltip-item>\r\n    <div class="active_bg"></div>\r\n    <i class="material-icons many-items" data-js-many-items>visibility_off</i>\r\n    <i class="material-icons not-found-items" data-js-not-found>not_interested</i>\r\n    <span class="issue-type hide" data-js-issue-type></span>\r\n    <i class="material-icons icon-comment" data-js-comment>comment</i>\r\n    <i class="rp-icons rp-icons-ticket icon-ticket" data-js-ticket></i>\r\n</div>\r\n<div class="arrow-bottom"></div>',n},this.JST["tpl-launch-log-history-line"]=function(e){var t,n="",r=_.escape;return n+='<div class="launch-log-history-line" data-js-history-container>\r\n</div>',n},this.JST["tpl-launch-log-item-info-activity-item"]=function(e){var t,n="",r=_.escape;return n+='<div class="grid-cell name-cell separate-right">\r\n    <i class="material-icons">person</i>\r\n    <span data-js-user-name></span>\r\n</div>\r\n<div class="grid-cell action-cell separate-right">\r\n    <span data-js-action-name></span>\r\n</div>\r\n<div class="grid-cell time-cell separate-right">\r\n    <span class="moment-time" data-js-moment-time></span>\r\n    <span class="full-time" data-js-full-time></span>\r\n</div>\r\n<div class="grid-cell mobile-action-cell">\r\n    <span data-js-action-name></span>\r\n</div>\r\n<div class="grid-cell difference-cell" data-js-difference></div>',n},this.JST["tpl-launch-log-item-info-activity"]=function(e){var t,n="",r=_.escape;return n+='<div class="launch-log-info-activity" data-js-activity-wrapper>\r\n    <div class="preloader activity-preloader">\r\n        <i class="material-icons loader-animation">refresh</i>\r\n    </div>\r\n    <div data-js-activity-container></div>\r\n    <div class="no-result-found">\r\n        <i class="rp-icons rp-icons-warning"></i>\r\n        <span>'+((t=e.text.logs.notFoundActivity)==null?"":t)+'</span>\r\n    </div>\r\n    <!--<i class="material-icons close-icon" data-js-close>clear</i>-->\r\n</div>',n},this.JST["tpl-launch-log-item-info-attachments-items"]=function(e){var t,n="",r=_.escape;return n+='<div class="attachment-list" data-js-items-list></div>\r\n<div class="preloader" data-js-preloader-log-item-attachments>\r\n    <i class="material-icons loader-animation">refresh</i>\r\n</div>',n},this.JST["tpl-launch-log-item-info-attachments-main-item"]=function(e){var t,n="",r=_.escape;return n+='<div class="item-content">\r\n    <div class="main-image" data-js-main-image></div>\r\n    <i class="material-icons gallery-image-rotate" data-js-rotate>rotate_90_degrees_ccw</i>\r\n</div>\r\n<div class="preloader" data-js-preloader-log-item-attachments>\r\n    <i class="material-icons loader-animation">refresh</i>\r\n</div>',n},this.JST["tpl-launch-log-item-info-attachments"]=function(e){var t,n="",r=_.escape;return n+='<div class="launch-log-info-attachments" data-js-attachments-container>\r\n    <div class="preloader">\r\n        <i class="material-icons loader-animation">refresh</i>\r\n    </div>\r\n    <div class="no-result-found">\r\n        <i class="rp-icons rp-icons-warning"></i>\r\n        <span>'+((t=e.text.logs.notFoundAttachments)==null?"":t)+'</span>\r\n    </div>\r\n    <div class="gallery-container">\r\n        <div class="gallery-main" data-js-main-gallery></div>\r\n        <div class="gallery-main-head" data-js-gallery-main-head>\r\n            <span data-js-main-gallery-current></span>\r\n            <span>'+((t=e.text.ui.smof)==null?"":t)+'</span>\r\n            <span data-js-main-gallery-size></span>\r\n            <i class="material-icons" data-js-destroy-main-gallery>clear</i>\r\n        </div>\r\n        <div class="gallery-preview" data-js-min-gallery></div>\r\n    </div>\r\n    <!--<i class="material-icons close-icon" data-js-close>clear</i>-->\r\n</div>',n},this.JST["tpl-launch-log-item-info-details"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-table-grid step-grid launch-log-info-details">\r\n    <div class="launch-suite-step-items" data-js-item-detail-container></div>\r\n</div>\r\n<!--<i class="material-icons close-icon" data-ja-close>clear</i>-->',n},this.JST["tpl-launch-log-item-info-stack-trace"]=function(e){var t,n="",r=_.escape;return n+='<div class="launch-log-info-stack-trace" data-js-stack-trace-wrapper>\r\n    <div class="preloader activity-preloader">\r\n        <i class="material-icons loader-animation">refresh</i>\r\n    </div>\r\n    <div data-js-stack-trace-container></div>\r\n    <span class="go-to-log" data-js-go-to-log>\r\n        '+((t=e.text.logs.goToLog)==null?"":t)+'\r\n        <i class="material-icons">keyboard_arrow_right</i>\r\n        <i class="material-icons loader-action loader-animation">refresh</i>\r\n    </span>\r\n    <div class="no-result-found">\r\n        <i class="rp-icons rp-icons-warning"></i>\r\n        <span>'+((t=e.text.logs.notFoundStackTrace)==null?"":t)+'</span>\r\n    </div>\r\n    <!--<i class="material-icons close-icon" data-js-close>clear</i>-->\r\n</div>\r\n',n},this.JST["tpl-launch-log-item-info"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.context==="userdebug";return n+='\r\n<div class="launch-log-item-info">\r\n    <div class="item-info">\r\n        <div data-js-item-info-issue class="launch-log-item-issue row">\r\n            <div class="item-issue-container" data-js-step-issue></div>\r\n            ',o||(n+='\r\n                <div class="button-container">\r\n                    <div class="rp-btn rp-btn-default rp-button-with-icon" title=" '+((t=e.text.launches.postBug)==null?"":t)+'" data-js-post-bug>\r\n                        <i class="material-icons">bug_report</i>\r\n                        <span class="rp-btn-val hidden-sm hidden-xs"> '+((t=e.text.launches.postBug)==null?"":t)+'</span>\r\n                    </div>\r\n\r\n                    <div class="rp-btn rp-btn-default rp-button-with-icon" title="'+((t=e.text.launches.loadBug)==null?"":t)+'" data-js-load-bug>\r\n                        <i class="material-icons">link</i>\r\n                        <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.launches.loadBug)==null?"":t)+'</span>\r\n                    </div>\r\n                    <div class="rp-btn rp-btn-default rp-button-with-icon" title="'+((t=e.text.launches.matchTitle)==null?"":t)+'" data-js-match>\r\n                        <i class="rp-icons rp-icons-magic"></i>\r\n                        <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.launches.matchTitle)==null?"":t)+"</span>\r\n                    </div>\r\n                </div>\r\n            "),n+='\r\n        </div>\r\n    </div>\r\n    <ul class="tabs">\r\n        <li data-js-item-stack-trace-label class="desktop-tab"><i class="material-icons">assignment</i><span>'+((t=e.text.launchLogItem.stackTrace)==null?"":t)+'</span>\r\n        </li>\r\n        <li data-js-item-gallery-label class="desktop-tab"><i class="material-icons">attach_file</i><span>'+((t=e.text.launchLogItem.attachments)==null?"":t)+'</span>\r\n        </li>\r\n        <li data-js-item-details-label class="desktop-tab"><i class="material-icons">info_outline</i><span>'+((t=e.text.launchLogItem.itemDetails)==null?"":t)+'</span>\r\n        </li>\r\n        <li data-js-item-activity-label class="desktop-tab"><i class="material-icons">access_time</i><span>'+((t=e.text.launchLogItem.historyOfActions)==null?"":t)+'</span>\r\n        </li>\r\n    </ul>\r\n    <div data-js-item-stack-trace-label class="mobile-tab">\r\n        <i class="material-icons">assignment</i>\r\n        <span>'+((t=e.text.launchLogItem.stackTrace)==null?"":t)+'</span>\r\n        <i class="arrow-up material-icons">keyboard_arrow_up</i>\r\n        <i class="arrow-down material-icons">keyboard_arrow_down</i>\r\n    </div>\r\n    <div class="tabs-item stack-trace" data-js-item-stack-trace></div>\r\n    <div data-js-item-gallery-label class="mobile-tab">\r\n        <i class="material-icons">attach_file</i>\r\n        <span>'+((t=e.text.launchLogItem.attachments)==null?"":t)+'</span>\r\n        <i class="arrow-up material-icons">keyboard_arrow_up</i>\r\n        <i class="arrow-down material-icons">keyboard_arrow_down</i>\r\n    </div>\r\n    <div class="tabs-item" data-js-item-gallery></div>\r\n    <div data-js-item-details-label class="mobile-tab">\r\n        <i class="material-icons">info_outline</i>\r\n        <span>'+((t=e.text.launchLogItem.itemDetails)==null?"":t)+'</span>\r\n        <i class="arrow-up material-icons">keyboard_arrow_up</i>\r\n        <i class="arrow-down material-icons">keyboard_arrow_down</i>\r\n    </div>\r\n    <div class="tabs-item" data-js-item-details></div>\r\n    <div data-js-item-activity-label class="mobile-tab">\r\n        <i class="material-icons">access_time</i>\r\n        <span>'+((t=e.text.launchLogItem.historyOfActions)==null?"":t)+'</span>\r\n        <i class="arrow-up material-icons">keyboard_arrow_up</i>\r\n        <i class="arrow-down material-icons">keyboard_arrow_down</i>\r\n    </div>\r\n    <div class="tabs-item" data-js-item-activity></div>\r\n</div>',n},this.JST["tpl-launch-log-item-logs-item"]=function(e){var t,n="",r=_.escape;return n+='<div class="grid-cell message-grid-cell">\r\n    <div data-js-message></div>\r\n    <i class="rp-icons rp-icons-expand" data-js-toggle-open></i>\r\n</div>\r\n<div class="grid-cell attachment-grid-cell">\r\n    <img src="" alt="preview" data-js-image>\r\n</div>\r\n<div class="grid-cell time-grid-cell">\r\n    <span data-js-time></span>\r\n</div>\r\n<div class="accordion-block">\r\n    <i class="material-icons" data-js-toggle-open>keyboard_arrow_down</i>\r\n    <i class="material-icons little" data-js-toggle-open>keyboard_arrow_up</i>\r\n</div>\r\n<div class="mobile-block">\r\n    <span data-js-time></span>\r\n    <img src="" alt="preview" data-js-image>\r\n</div>\r\n',n},this.JST["tpl-launch-log-item-logs-table"]=function(e){function s(){n+=i.call(arguments,"")}function o(e,t){return'<div class="table-wrapper"><div class="middle-wrapper"><span class="text-overflow"><span class="long-size">'+e+"</span>"+'<span class="short-size" title="'+e+'">'+t+"</span>&nbsp;"+'<div class="sort-icon-wrapper">'+'<i class="material-icons">keyboard_arrow_up</i>'+'<i class="material-icons">keyboard_arrow_down</i>'+"</div>"+"</span>"+"</div>"+"</div>"}var t,n="",r=_.escape,i=Array.prototype.join;return n+='\r\n\r\n<div class="launch-log-items-wrapper" data-js-logs-wrapper>\r\n    <div class="filters-block">\r\n        <div class="filter-entity-wrapper" data-js-select-filter></div>\r\n        <label class="rp-checkbox-wrap attachments-filter">\r\n            <input class="rp-input-checkbox" type="checkbox" data-js-attachments-filter>\r\n            <span>'+((t=e.text.logs.filterAttachments)==null?"":t)+'</span>\r\n        </label>\r\n        <div class="min-paging" data-js-paginate-min-container></div>\r\n        <div class="rp-nav rp-nav-right" data-js-next-error-container></div>\r\n    </div>\r\n\r\n\r\n    <div class="rp-table-grid log-grid rp-odd-even rp-table-hover">\r\n        <div class="row rp-grid-thead fixed_table_header" data-js-fixed-header>\r\n            <div class="grid-cell message-grid-cell rp-grid-th">\r\n                '+((t=o(e.text.launchesHeaders.message,e.text.launchesHeaders.message_short))==null?"":t)+'\r\n                <div class="filter-name-block">\r\n                    <div data-js-name-filter></div>\r\n                    <i class="material-icons">search</i>\r\n                </div>\r\n            </div>\r\n            <div class="grid-cell attachment-grid-cell rp-grid-th">\r\n                '+((t=o(e.text.launchesHeaders.attachment,e.text.launchesHeaders.attachment_short))==null?"":t)+'\r\n            </div>\r\n            <div class="grid-cell time-grid-cell rp-grid-th" data-sorter="time">\r\n                '+((t=o(e.text.launchesHeaders.time,e.text.launchesHeaders.time_short))==null?"":t)+'\r\n            </div>\r\n        </div>\r\n        <div class="row" data-js-table-container></div>\r\n\r\n    </div>\r\n    <div data-js-paginate-container></div>\r\n    <div class="preloader launch-log-grid-preloader">\r\n        <i class="material-icons loader-animation">refresh</i>\r\n    </div>\r\n    <div class="no-result-found">\r\n        <i class="rp-icons rp-icons-warning"></i>\r\n        <span>'+((t=e.text.ui.noResultsFound)==null?"":t)+"</span>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-launch-log-item-next-error"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-btn rp-btn-default rp-button-with-icon next-error-button hide" data-js-next-error title="'+((t=e.text.logs.nextError)==null?"":t)+'">\r\n    <i class="material-icons">keyboard_arrow_right</i>\r\n    <span class="rp-btn-val hidden-sm hidden-xs">'+((t=e.text.logs.nextError)==null?"":t)+'</span>\r\n    <div class="preloader-wrapper">\r\n        <div class="custom-preloader">\r\n            <div class="custom-preloader-1"></div>\r\n            <div class="custom-preloader-2"></div>\r\n            <div class="custom-preloader-3"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n',n},this.JST["tpl-item-editor-body"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="form-group col-sm-12">\r\n    <div class="col-sm-12">\r\n        <label class="control-label">'+((t=e.text.forms.description)==null?"":t)+"</label>\r\n        ",e.item.max&&(n+='\r\n        <span class="control-label pull-right">(<span class="vsize">'+((t=e.item.description?e.item.description.length:0)==null?"":t)+"</span>/"+((t=e.item.max)==null?"":t)+")</span>\r\n        "),n+='\r\n    </div>\r\n    <div class="col-sm-12">\r\n        <textarea id="editDescription" cols="60" rows="4" class="col-sm-12 form-control" name="edit[description]">'+((t=e.item.description)==null?"":t)+'</textarea>\r\n        <span class="help-inline"></span>\r\n    </div>\r\n</div>\r\n<div class="form-group col-sm-12">\r\n    <label class="col-sm-12 control-label">'+((t=e.text.forms.tags)==null?"":t)+'</label>\r\n    <div class="col-sm-12">\r\n        <input type="text" id="editTags" data-warning="'+((t=e.text.ui.enterChars)==null?"":t)+'" class="filter-control"\r\n               name="edit[tags]" value="'+r(e.item.tags?e.item.tags.join(", "):"")+'" />\r\n    </div>\r\n</div>\r\n',e.type=="updateLaunch"&&(n+='\r\n    <div class="form-group col-sm-12">\r\n        <div class="col-sm-12">\r\n            <div class="well">\r\n                <h3 class="title-no-data text-center">\r\n                    <i class="rp-icons rp-icons-warning"></i>\r\n                    <span class="warning">\r\n                        <small>'+((t=e.text.launches.disclaimerChangeDescription)==null?"":t)+"</small>\r\n                    </span>\r\n                </h3>\r\n            </div>\r\n        </div>\r\n    </div>\r\n"),n+="\r\n",n},this.JST["tpl-item-editor-header"]=function(e){var t,n="",r=_.escape;return n+='<div class="form-group col-sm-12 m-top-15">\r\n    <label class="col-sm-12 control-label no-margin">'+((t=e.text.launches.itemName)==null?"":t)+'</label>\r\n    <div class="col-sm-12">\r\n        <output class="edit-launch-name">'+((t=e.name)==null?"":t)+"</output>\r\n    </div>\r\n</div>",n},this.JST["tpl-launch-editor-header"]=function(e){var t,n="",r=_.escape;return n+='<div class="form-group col-sm-12 m-top-15">\r\n    <label class="col-sm-12 control-label no-margin">'+((t=e.text.launches.launchName)==null?"":t)+'</label>\r\n    <div class="col-sm-12">\r\n        <output class="edit-launch-name">'+((t=e.name)==null?"":t)+'</output>\r\n    </div>\r\n</div>\r\n<div class="form-group col-sm-12">\r\n    <label class="col-sm-12 control-label no-margin">'+((t=e.text.launches.launchNumber)==null?"":t)+'</label>\r\n    <div class="col-sm-12">\r\n        <output class="edit-launch-number">#'+((t=e.number)==null?"":t)+"</output>\r\n    </div>\r\n</div>",n},this.JST["tpl-launch-grid-defect-editor"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="inline-editor">\r\n    <div class="container-fluid">\r\n        <div class="btn-group pull-left">\r\n            <button data-toggle="dropdown" class="btn rp-defect-type-dropdown dropdown-toggle">\r\n                ';var o=e.defectTypes.getDefectType(e.item.issue.issue_type);n+="\r\n                ",o&&(n+='\r\n                    <span title="'+r(o.longName)+'" class="pr-defect-type-badge '+r(o.typeRef)+'" data-id="'+((t=o.locator)==null?"":t)+'">\r\n                        <i style="background: '+r(o.color)+'"></i>\r\n                        <span>'+r(o.longName.setMaxLength(20))+"</span>\r\n                    </span>\r\n                "),n+='\r\n                <span class="caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu rp-defects-menu">\r\n                ',_.each(e.defectsGroup,function(i,s){n+="\r\n                    ";var o=s==0?"12":"3",u=s==0?"12":"6";n+="\r\n                    ";var a=s==1?"visible-md visible-lg":"",f=s%2==0?"":"visible-sm";n+="\r\n                    ",s>0&&(n+='\r\n                        <li role="separator" class="divider '+((t=a)==null?"":t)+'"></li>\r\n                        <li role="separator" class="divider '+((t=f)==null?"":t)+'"></li>\r\n                        <li role="separator" class="divider visible-xs-block"></li>\r\n                    '),n+='\r\n                    <li class="col-md-'+((t=o)==null?"":t)+" col-sm-"+((t=u)==null?"":t)+' col-xs-12">\r\n                        ',_.each(e.subDefects[i],function(i){n+="\r\n                        ";var s=i.locator==e.item.issue.issue_type?!0:!1;n+='\r\n                        <div class="rp-defect-row">\r\n                            <label title="'+r(i.longName)+'" class="'+((t=s?"selected":"")==null?"":t)+'" data-js-event="selectIssueType" data-id="'+((t=i.locator)==null?"":t)+'" data-issue-name="'+r(i.longName)+'" data-issue-color="'+r(i.color)+'">\r\n                                <i style="background: '+r(i.color)+'"></i>'+r(i.longName.setMaxLength(20))+"\r\n                            </label>\r\n                        </div>\r\n                        "}),n+="\r\n                    </li>\r\n                "}),n+='\r\n            </ul>\r\n        </div>\r\n        <div class="pull-right">\r\n            <button title="'+((t=e.text.ui.clickToCancel)==null?"":t)+'" data-js-event="closeEditor" class="rp-btn rp-btn-cancel" type="cancel">\r\n                '+((t=e.text.ui.cancel)==null?"":t)+'\r\n            </button>\r\n            <button title="'+((t=e.text.ui.clickToSubmit)==null?"":t)+'" data-js-event="submitDefect" class="rp-btn rp-btn-submit submit disabled" type="submit">\r\n                '+((t=e.text.ui.submit)==null?"":t)+'\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div class="text-editor">\r\n        <textarea rows="3" id="textile" class="">'+((t=e.item.issue.comment||"")==null?"":t)+"</textarea>\r\n        ";var u=e.selected>1?"block":"none";n+='\r\n        <div class="rp-defect-multiple-edit" style="display: '+((t=u)==null?"":t)+';">\r\n            <span class="rp-defect-editor-counter">\r\n                '+((t=e.text.launches.youAreEditing)==null?"":t)+'<span id="inProgressAmount">'+((t=e.selected)==null?"":t)+"</span>"+((t=e.text.launches.objects)==null?"":t)+'\r\n            </span>\r\n            <label class="control-label replace-comments">\r\n                <input type="checkbox" checked="checked" id="replaceComments"/> '+((t=e.text.launches.replaceComments)==null?"":t)+'\r\n            </label>\r\n        </div>\r\n        <div class="rp-defect-post-issues" tabindex="1">\r\n            ';if(!e.logs&&!e.isDebug){n+="\r\n            ";var a=e.canPost?"":"disabled";n+="\r\n            ";var f=e.canLoad?"":"disabled";n+='\r\n            <button data-js-event="postBug"\r\n            '+((t=a)==null?"":t)+' title="'+((t=!a?e.text.launches.postBug:e.text.launches.configureTBS)==null?"":t)+'"\r\n            class="rp-btn rp-btn-default pr-post-bug-btn '+((t=a)==null?"":t)+'"\r\n            type="button"><i class="material-icons">&#xE868;</i>'+((t=e.text.launches.postBug)==null?"":t)+'</button>\r\n            <button data-js-event="loadBug"\r\n                    title="'+((t=!f?e.text.launches.loadBug:e.text.launches.configureTBSLoad)==null?"":t)+'"\r\n                    class="rp-btn rp-btn-default pr-load-bug-btn '+((t=f)==null?"":t)+'"\r\n            '+((t=f)==null?"":t)+'><i class="material-icons">&#xE157;</i>'+((t=e.text.launches.loadBug)==null?"":t)+"</button>\r\n            "}return n+="\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-launch-grid-defect-ticket"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return e.status==="Error"?n+="\r\n    <strong>"+((t=e.text.logs.ticketNotFound)==null?"":t)+"</strong> "+((t=e.text.logs.ticketStatusProblem)==null?"":t)+"\r\n":(n+="\r\n    <strong>"+((t=e.text.logs.summary)==null?"":t)+"</strong> "+((t=e.summary)==null?"":t)+"<br />\r\n    <strong>"+((t=e.text.logs.status)==null?"":t)+"</strong> ",e.status==="Closed"||e.status==="Resolved"?n+="\r\n                                   <strike>"+((t=e.status)==null?"":t)+"</strike>\r\n                                ":n+="\r\n                                    "+((t=e.status)==null?"":t)+"\r\n                                ",n+="\r\n"),n},this.JST["tpl-launch-grid-defect-type"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o="",u="",a,f;e.launchInProcess&&(o="disabled",u=e.text.launches.forbiddenIsProcessing),n+='\r\n<div class="defect-type '+((t=o)==null?"":t)+'"\r\n    data-id="'+((t=e.item.id)==null?"":t)+'"\r\n    ',u&&(n+='title="'+((t=u)==null?"":t)+'"'),n+='>    <input title="'+((t=u)==null?"":t)+'"\r\n        '+((t=o)==null?"":t)+'\r\n        class="select-test"\r\n        type="checkbox"\r\n        data-id="'+r(e.item.id)+'" />    ',a=e.defectTypes.getDefectType(e.item.issue.issue_type),n+='    <div class="rp-defect-type-edit">\r\n        ',a&&(n+='\r\n            <span class="pr-defect-type-badge '+r(a.typeRef)+'"\r\n                title="'+((t=a.longName)==null?"":t)+'">\r\n                <i style="background: '+r(a.color)+'"></i>\r\n                '+((t=a.longName.setMaxLength(20))==null?"":t)+"\r\n            </span>\r\n        "),n+='\r\n        <a href="#" class="edit-defect"><i class="material-icons">edit</i></a>\r\n    </div>    ',f=e.item.issue.externalSystemIssues,n+="    ";if(f&&f.length){n+='\r\n        <span class="tickets-container" data-id="'+((t=e.item.id)==null?"":t)+'">\r\n            ';var l=_.isArray(f)?f:[f];n+="\r\n            ",_.each(l,function(e){n+='\r\n                <a href="'+((t=e.url)==null?"":t)+'"\r\n                    target="_blank"\r\n                    class="badge external-ticket issue-tracker-link"\r\n                    data-ticket-id="'+((t=e.ticketId)==null?"":t)+'"\r\n                    data-system-id="'+((t=e.systemId)==null?"":t)+'"\r\n                    data-toggle="tooltip" title="<span class=\'loading-indicator\'></span>">\r\n                    <div>\r\n                        #'+((t=e.ticketId)==null?"":t)+'\r\n                    </div>\r\n                    <i data-js-event="removeTicket" class="material-icons">clear</i>\r\n                </a>\r\n            '}),n+="\r\n        </span>\r\n    "}return n+="    ",e.needMatch&&(n+='\r\n        <span class="match-issue label '+((t=e.canMatchIssue?"":"disabled")==null?"":t)+" "+((t=e.launchInProcess?"label-danger autoanalyze":"")==null?"":t)+'"\r\n            title="'+((t=e.canMatchIssue?"":e.text.launches.nothingToMatch)==null?"":t)+'">\r\n            <i class="rp-icons rp-icons-magic margin-right-5"></i>\r\n            '+((t=e.text.launches.matchTitle)==null?"":t)+"\r\n        </span>\r\n    "),n+="    ",e.item.issue.comment&&(n+='\r\n        <div class="defect-desc nicescroll-it">\r\n            '+((t=e.textile(e.item.issue.comment.replace("*IssueDescription:*","<br>*IssueDescription:*")).replaceNewLines().escapeScript())==null?"":t)+"\r\n        </div>\r\n    "),n+="\r\n</div>",n},this.JST["tpl-launch-grid-duration-cell"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;if(e.validator.durationInProgress(e.item))n+="\r\n    ",e.validator.durationStartAndEnd(e.item)?n+='\r\n        <div title="'+((t=e.text.launches.inProcessAndEndedDuration)==null?"":t)+'">\r\n            <!-- <h3 class="title-no-data text-center"> -->\r\n            <i class="rp-icons rp-icons-warning"></i>\r\n                <!-- <span class="warning"></span> -->\r\n            <!-- </h3> -->\r\n        </div>\r\n    ':n+='\r\n        <div title="'+((t=e.text.launches.inProcess)==null?"":t)+'">\r\n            <img alt="'+((t=e.text.launches.inProcess)==null?"":t)+'" src="img/time-in-progress.gif" />\r\n            <span id="approximate-'+((t=e.item.id)==null?"":t)+'" class="text-muted" style="font-size: 12px;"></span>\r\n        </div>\r\n    ',n+="\r\n";else{n+="\r\n    ";var o=e.util.timeFormat(e.item.start_time,e.item.end_time);n+="\r\n    ";var u=e.util.dateFormat(e.item.end_time,!0);n+="\r\n    ",e.validator.durationSkipped(e.item)?n+='\r\n        <span title="'+((t=e.text.launches.skippedDuration)==null?"":t)+""+((t=o)==null?"":t)+'">'+((t=o)==null?"":t)+"</span>\r\n    ":e.validator.durationStartNoEnd(e.item)?n+='\r\n        <span title="'+((t=e.text.launches.notInProcessNotEndedDuration)==null?"":t)+'">\r\n            <!-- <h3 class="title-no-data text-center"> -->\r\n            <i class="rp-icons rp-icons-warning"></i>\r\n                <!-- <span class="warning"></span> -->\r\n            <!-- </h3> -->\r\n        </span>\r\n    ':(n+='\r\n        <span title="'+((t=e.text.launches.prefixDuration)==null?"":t)+""+((t=o)==null?"":t)+""+((t=e.text.launches.finishTime)==null?"":t)+""+((t=u)==null?"":t)+'">\r\n            ',e.validator.durationStopped(e.item)?n+='\r\n                <abbr class="text-danger"\r\n                    title="Run STOPPED after: '+((t=o)==null?"":t)+". Stopped at: "+((t=u)==null?"":t)+'">\r\n                    <strong>'+((t=o)==null?"":t)+"</strong>\r\n                </abbr>\r\n            ":e.validator.durationInterrupted(e.item)?n+='\r\n                <abbr class="text-danger"\r\n                    title="Run INTERRUPTED after: '+((t=o)==null?"":t)+". Stopped at: "+((t=u)==null?"":t)+'">\r\n                    <strong>'+((t=o)==null?"":t)+"</strong>\r\n                </abbr>\r\n            ":n+="\r\n                "+((t=o)==null?"":t)+"\r\n            ",n+="\r\n        </span>\r\n    "),n+="\r\n"}return n+="\r\n",n},this.JST["tpl-launch-grid-sorting-state"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return e.filter.dataIndex===e.currentId&&(n+="\r\n    ",e.filter.direction==="DESC"?n+='\r\n        <i class="material-icons">keyboard_arrow_down</i>\r\n    ':n+='\r\n        <i class="material-icons">keyboard_arrow_up</i>\r\n    ',n+="\r\n"),n+="\r\n",n},this.JST["tpl-launch-grid-statistics-cell"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.type[0],u=e.type[1],a=e.item.statistics[o][u];n+="\r\n";var f=_.isUndefined(a.total)?a:a.total;n+="\r\n";if(o=="executions")n+="\r\n    ",+f!==0?(n+="\r\n        ",e.shifted?n+='\r\n            <span class="cases-view">'+r(f)+"</span>\r\n        ":n+='\r\n            <a href="'+r(e.urlResolver(u,e.item,e.tab))+'" class="cases-view rp-blue-link-undrl"\r\n               data-id="'+r(e.item.id)+'">\r\n                '+r(f)+"\r\n            </a>\r\n        ",n+="\r\n    "):n+='\r\n        <span class="text-muted visible-xs-inline">'+r(f)+"</span>\r\n    ",n+='\r\n    <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders[u])==null?"":t)+"</p>\r\n";else{n+="\r\n    ";if(u=="to_investigate"){n+="\r\n        ";var l=e.getDefectColor(a,u,e.defectTypes);n+="\r\n                ",+f!==0?n+='\r\n                    <a href="'+r(e.urlResolver(u,e.item,e.tab))+'"\r\n                       style="background: '+((t=l)==null?"":t)+"; border-color: "+((t=l)==null?"":t)+'"\r\n                       class="rp-ti-badge" data-id="'+r(e.item.id)+'">\r\n                        '+r(f)+'\r\n                        <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders[u])==null?"":t)+"</p>\r\n                    </a>\r\n                ":n+='\r\n                    <span class="rp-ti-badge visible-xs" style="background: '+((t=l)==null?"":t)+"; border-color: "+((t=l)==null?"":t)+'">'+r(f)+'\r\n                    <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders[u])==null?"":t)+"</p></span>\r\n                ",n+="\r\n    "}else n+="\r\n        ",+f!==0?n+='\r\n        <div class="pr-grid-defect-stats" data-defect-type="'+((t=u)==null?"":t)+'" id="defect-'+((t=e.item.id)==null?"":t)+"-"+((t=u)==null?"":t)+'">\r\n            <a href="'+r(e.urlResolver(u,e.item,e.tab))+'" class="pr-grid-defect-link">\r\n                <svg></svg>\r\n                <span class="pr-grid-defect-total" style="border-color: '+((t=e.getDefectColor(a,u,e.defectTypes))==null?"":t)+'">\r\n                    '+((t=f)==null?"":t)+'\r\n                </span>\r\n            </a>\r\n        </div>\r\n        <span class="visible-xs cases-view ">\r\n            <a href="'+r(e.urlResolver(u,e.item,e.tab))+'" class="rp-blue-link-undrl"\r\n            data-id="'+r(e.item.id)+'">\r\n            '+r(f)+"\r\n            </a>\r\n        </span>\r\n        ":n+='\r\n            <span class="text-muted visible-xs-inline">'+r(f)+"</span>\r\n        ",n+='\r\n        <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders[u])==null?"":t)+"</p>\r\n    ";n+="\r\n"}return n},this.JST["tpl-launch-history-grid"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.launches.length>5?1:e.launches.length<=3?e.launches.length<=2?4:3:2,u=12-o*e.launches.length;return n+='\r\n<div class="container-fluid rp-margin-reset rp-odd-even rp-history-grid">\r\n    <div class="rp-table-full-width">\r\n        <div class="row history-row rp-grid-thead">\r\n            <div class="col-md-'+((t=u)==null?"":t)+' history-col">\r\n                <div class="rp-grid-th">\r\n                    <span class="rp-grid-th-name">'+((t=e.text.launchesHeaders.name)==null?"":t)+"</span>\r\n                </div>\r\n            </div>\r\n            ",_.forEach(e.launches,function(r){n+='\r\n                <div class="col-md-'+((t=o)==null?"":t)+" history-col text-center ",r.launchStatus=="IN_PROGRESS"&&(n+="in-progress progress-striped"),n+='">\r\n                    <div class="rp-grid-th">\r\n                        <span class="rp-grid-th-name">\r\n                            '+((t=e.text.launches.launchHash)==null?"":t)+""+((t=r.launchNumber)==null?"":t)+"\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            "}),n+="\r\n        </div>\r\n        ",_.forEach(e.items,function(i){n+='\r\n        <div class="row history-row">\r\n            <div class="col-md-'+((t=u)==null?"":t)+' history-col">\r\n                <a href="'+((t=e.buildUrl(i))==null?"":t)+'" class="rp-table-title rp-blue-link">'+r(i.name)+"</a>\r\n                ",i.description&&(n+='\r\n                <br/>\r\n                <pre class="shifted">'+r(i.description)+"</pre>\r\n                "),n+="\r\n                ",i.tags&&i.tags.length&&(n+='\r\n                    <div class="pull-right tags">\r\n                        <small class="pull-right">\r\n                            ',_.each(i.tags,function(e){n+='\r\n                                <span class="text-muted tag" data-tag="'+r(e)+'">'+r(e)+"</span>\r\n                            "}),n+="\r\n                        </small>\r\n                    </div>\r\n                "),n+="\r\n            </div>\r\n            ",_.forEach(e.launches,function(s){n+="\r\n            ";var u=i.launches[s.launchNumber];n+="\r\n            ";if(u){n+="\r\n                ";if(u.length>1)n+='\r\n                    <div class="col-md-'+((t=o)==null?"":t)+' history-col rp-warning">\r\n                        <div class="history-col-content" data-tooltip-type="warning" data-tooltip-content="'+((t=e.text.launches.severalItems)==null?"":t)+'">\r\n                            <i class="material-icons">&#xE8F5;</i>\r\n                        </div>\r\n                    </div>\r\n                ';else{n+="\r\n                    ";var a=u[0],f=a.issue;n+="\r\n                    ";var l=e.getIssuesByType(a,e.defectTypes);n+='\r\n                    <div class="col-md-'+((t=o)==null?"":t)+" history-col "+((t=e.getCls(a))==null?"":t)+" ",f&&(n+=" goToItem "),n+='" data-launch-id="'+((t=s.launchId)==null?"":t)+'" data-item-id="'+((t=a.id)==null?"":t)+'">\r\n                        ';if(!f)n+="\r\n                            ",_.each(e.sortedIssueTypes,function(e){n+="\r\n                                ";var i=l[e];n+="\r\n                                ",i&&(n+='\r\n                                <div class="history-defect-badge '+((t=i.cls)==null?"":t)+'" data-tooltip-type="'+((t=e)==null?"":t)+'" style="background: '+r(i.color)+'">\r\n                                    <span>'+r(i.shortName)+"</span>\r\n                                </div>\r\n                                "),n+="\r\n                            "}),n+="\r\n                        ";else if(f){n+="\r\n                            ";if(f.issue_type){n+="\r\n                                ";var c=e.defectTypes.getDefectType(f.issue_type);n+="\r\n                                ";var h=c.typeRef.toLowerCase(),p=e.getDefectCls(h);n+='\r\n                                    <div class="history-defect-badge no-stats '+((t=p)==null?"":t)+'"\r\n                                        style="background: '+r(c.color)+'"\r\n                                        data-tooltip-type="warning"\r\n                                        data-tooltip-content="'+r(c.longName)+'">\r\n                                        <span>'+r(c.shortName)+"</span>\r\n                                    </div>\r\n                            "}n+="\r\n                            ",f.comment&&(n+='\r\n                                        <div class="history-comment"\r\n                                            data-tooltip-type="warning"\r\n                                            data-tooltip-content="'+r(e.getComment(f.comment))+'">\r\n                                            <span>\r\n                                                <!-- <i class="material-icons">&#xE0B7;</i> -->\r\n                                                <i class="material-icons">chat</i>\r\n                                            </span>\r\n                                        </div>\r\n                            '),n+="\r\n                            ",f.externalSystemIssues&&f.externalSystemIssues.length&&(n+='\r\n                                <div class="history-tickets"\r\n                                     data-tooltip-type="warning"\r\n                                     data-tooltip-content="'+((t=e.getTickets(f.externalSystemIssues))==null?"":t)+'">\r\n                                    <span>\r\n                                        <i class="material-icons">&#xE157;</i>\r\n                                    </span>\r\n                                </div>\r\n                            '),n+="\r\n                        "}n+="\r\n                    </div>\r\n                "}n+="\r\n            "}else n+='\r\n                <div class="col-md-'+((t=o)==null?"":t)+' history-col rp-empty">\r\n                    <div class="history-col-content">\r\n                        <i class="material-icons">not_interested</i><br>\r\n                        '+((t=e.text.launches.noItemInLaunch)==null?"":t)+"\r\n                    </div>\r\n                </div>\r\n            ";n+="\r\n            "}),n+="\r\n        </div>\r\n        "}),n+="\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-launch-history-load-more"]=function(e){var t,n="",r=_.escape;return n+='<div class="row p-top-15">\r\n    <div class="col-md-12">\r\n        <div class="panel rb-panel-btn" id="loadMorePanel">\r\n            <a href="#" class="btn btn-block rb-btn-settings">\r\n                <h3>'+((t=e.text.launches.clickToLoadMore)==null?"":t)+'</h3>\r\n            </a>\r\n            <div class="loading-widget loader" style="display:none;">\r\n                <i class="material-icons loader-animation">autorenew</i>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>',n},this.JST["tpl-launch-item-menu"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<ul class="dropdown-menu item-options">\r\n    ';var o=e.canEdit?"":"disabled";n+='\r\n    <li class="'+((t=o)==null?"":t)+'">\r\n        <a href="#" class="edit-item '+((t=o)==null?"":t)+'" data-id="'+((t=e.item.id)==null?"":t)+'">'+((t=e.text.ui.edit)==null?"":t)+"</a>\r\n    </li>\r\n    ";var u=!e.canDeleteLaunch||e.validator.durationInProgress(e.item)||e.isLaunchInProgress?"disabled":"";n+='\r\n    <li class="'+((t=u)==null?"":t)+'">\r\n        <a href="#" class="delete-item '+((t=u)==null?"":t)+'"\r\n           data-id="'+((t=e.item.id)==null?"":t)+'"\r\n           data-name="'+r(e.item.name)+'">'+((t=e.text.ui.delete)==null?"":t)+"</a>\r\n    </li>\r\n    ";if(!_.isUndefined(e.isDebug)){n+="\r\n    ";if(!e.isCustomer){n+="\r\n        ";if(!_.isUndefined(e.item.mode)){n+='\r\n        <li class="'+((t=o)==null?"":t)+'">\r\n            ';var a=e.item.mode==="DEBUG"?e.text.launches.shiftToLaunches:e.text.launches.shiftToDebug;n+='\r\n            <a class="launch-mode-switch '+((t=o)==null?"":t)+'" href="#">'+((t=a)==null?"":t)+"</a>\r\n        </li>\r\n        "}n+="\r\n    "}n+="\r\n    ";var f=e.validator.durationInProgress(e.item)&&e.validator.canStopLaunch(e.item,e.isDebug)?"":"disabled";n+='\r\n    <li class="'+((t=f)==null?"":t)+'">\r\n        <a href="#" class="force-finish '+((t=f)==null?"":t)+'" data-id="'+r(e.item.id)+'" data-name="'+r(e.item.name)+'">\r\n            '+((t=e.text.launches.forceFinish)==null?"":t)+"\r\n        </a>\r\n    </li>\r\n    ";if(!e.isDebug){n+="\r\n        ";var l=e.item.isProcessing?"disabled":"";n+='\r\n        <li class="'+((t=l)==null?"":t)+'">\r\n            <a href="#" class="start-analyze '+((t=l)==null?"":t)+'" data-type="analyze" data-id="'+r(e.item.id)+'">'+((t=e.text.ui.analyze)==null?"":t)+"</a>\r\n        </li>\r\n    "}n+="\r\n    ";if(!e.isDebug){n+="\r\n        ";var c=e.canMatchIssues?"":"disabled";n+='\r\n        <li class="'+((t=c)==null?"":t)+'">\r\n            <a href="#" class="match-issues '+((t=c)==null?"":t)+'" data-id="'+r(e.item.id)+'" data-name="'+r(e.item.name)+'" data-type="match">\r\n                '+((t=e.text.launches.matchTitle)==null?"":t)+"\r\n            </a>\r\n        </li>\r\n    "}n+="\r\n    "}n+="\r\n    ";if(e.exportFormats){n+="\r\n        ";var h=e.validator.durationInProgress(e.item)?"disabled":"";n+='\r\n        <li role="separator" class="divider"></li>\r\n        <li class="rp-export-launch-group">\r\n            <span class="rp-export-label">'+((t=e.text.launches.export)==null?"":t)+':</span>\r\n            <div class="rp-export-btn-group">\r\n                ',_.each(e.exportFormats,function(r){n+='\r\n                    <a href="'+((t=e.util.updateImagePath(e.getExportUrl(e.item.id,r)))==null?"":t)+'" target="_blank" class="rp-btn rp-btn-default '+((t=h)==null?"":t)+'">'+((t=r)==null?"":t)+"</a>\r\n                "}),n+="\r\n            </div>\r\n        </li>\r\n    "}return n+="\r\n</ul>",n},this.JST["tpl-launch-log-grid"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="container-fluid rp-margin-reset rp-odd-even rp-table-hover">\r\n    <!-- tbody -->\r\n    ';if(e.collection.length){n+="\r\n        ";var o=0;n+="\r\n        ",_.each(e.collection,function(i,s){n+='\r\n            <div class="row rp-table-row '+r(i.level)+'" id="'+((t=i.id)==null?"":t)+'">\r\n                <div class="col-xs-8 col-sm-10 text-wrapper">\r\n                    ',i.binary_content?n+='\r\n                        <div class="col-sm-10 nopadding">\r\n                            ':n+='\r\n                                <div class="col-sm-12 nopadding">\r\n                            ',n+="\r\n                            ";var u=e.util.validForCollapsibleMessage(i);n+="\r\n                            ";if(u&&u.length>=2)n+="\r\n                                ",u[2]==="xml"?n+='\r\n                                    <pre class="log-preview">'+r(u[0].replaceNewLines())+'</pre>\r\n                                    <div class="col-sm-12 nopadding collapse"\r\n                                        id="collapseExample'+((t=i.id)==null?"":t)+'">\r\n                                        <pre class="log-preview">'+r(u[1].replaceNewLines())+"</pre>\r\n                                    </div>\r\n                                ":n+='\r\n                                    <span class="pre-view">'+r(u[0].replaceNewLines())+'</span>\r\n                                    <div class="col-sm-12 nopadding collapse collapseLogs"\r\n                                        id="collapseExample'+((t=i.id)==null?"":t)+'">\r\n                                        <span class="pre-view">'+r(u[1].replaceNewLines())+"</span>\r\n                                    </div>\r\n                                ",n+='\r\n                                <button class="btn btn-collapse col-sm-12 collapsed"\r\n                                    type="button"\r\n                                    data-toggle="collapse"\r\n                                    data-target="#collapseExample'+((t=i.id)==null?"":t)+'">\r\n                                    <i class="material-icons keyboard_arrow_up">keyboard_arrow_up</i>\r\n                                    <i class="material-icons keyboard_arrow_down">keyboard_arrow_down</i>\r\n                                </button>\r\n                            ';else{n+="\r\n                            ";var a=e.util.matchForXML(i);n+="\r\n                            ",a?n+='\r\n                                <pre class="log-preview">'+r(a)+"</pre>\r\n                            ":n+='\r\n                                <span class="pre-view">\r\n                                    '+((t=i.message.escapeHtml().replaceNewLines())==null?"":t)+"\r\n                                </span>\r\n                            ",n+="\r\n                        "}n+="\r\n                    </div>\r\n                    ",i.binary_content&&(n+='\r\n                        <div class="col-sm-2">\r\n                            ',i.binary_content.content_type.indexOf("image")===0?(n+='\r\n                                <a href="#" class="table_priview thumbnail image" data-slide-index="'+((t=o)==null?"":t)+'">\r\n                                    <img alt="preview"\r\n                                        class="lazy"\r\n                                        src="'+r(e.util.updateImagePath(e.dataUrl+i.binary_content.thumbnail_id))+'"\r\n                                        data-original="'+r(e.util.updateImagePath(e.dataUrl+i.binary_content.thumbnail_id))+'"\r\n                                        id="'+((t=i.binary_content.id)==null?"":t)+'">\r\n                                </a>\r\n                            ',o+=1,n+="\r\n                            "):n+='\r\n                                <a target="_blank"\r\n                                    href="'+r(e.util.updateImagePath(e.dataUrl+i.binary_content.id))+'"\r\n                                    title="'+((t=e.text.logs.openFile)==null?"":t)+'"\r\n                                    class="table_priview thumbnail">\r\n                                    <span class="binary-file">\r\n                                        <i class="material-icons">insert_drive_file</i>\r\n                                    </span>\r\n                                </a>\r\n                            ',n+="\r\n                        </div>\r\n                    "),n+='\r\n                </div>\r\n                <div class="col-xs-4 col-sm-2">\r\n                    '+((t=e.util.dateFormat(i.time))==null?"":t)+"\r\n                </div>\r\n            </div>\r\n        "}),n+="\r\n    "}else n+='\r\n        <div class="row rp-table-row">\r\n            <div class="col-xs-12">\r\n                <h3 class="title-no-data text-center">\r\n                    <i class="rp-icons rp-icons-warning"></i>\r\n                    <span class="warning">'+((t=e.text.ui.noResultsFound)==null?"":t)+"</span>\r\n                </h3>\r\n            </div>\r\n        </div>\r\n    ";return n+="\r\n    <!-- ./tbody -->\r\n</div>\r\n",n},this.JST["tpl-launch-notfound"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="no-dashboards no-launches">\r\n    <div class="well">\r\n        <h3 class="title-no-data text-center">\r\n            <i class="rp-icons rp-icons-warning"></i>\r\n            <span class="warning">\r\n                ',e.isLaunch?n+="\r\n                    "+((t=e.text.launches.noLaunchFound)==null?"":t)+".\r\n                ":n+="\r\n                    "+((t=e.text.launches.noItemFound)==null?"":t)+".\r\n                ",n+="\r\n            <span>\r\n        </h3>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-launch-suit-grid"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="container-fluid suit-grid rp-margin-reset rp-odd-even rp-table-hover">\r\n    <!-- title -->\r\n    <div class="row rp-grid-thead hidden-xs fixed_table_header">\r\n        <div class="col-md-4 col-sm-2 col-xs-11 ">\r\n            <div class="rp-grid-th sortable" data-sorter="name">\r\n                <span class="sorting-pd rp-grid-th-name">'+((t=e.text.launchesHeaders.name)==null?"":t)+"&nbsp;"+((t=e.renderSorting("name").trim())==null?"":t)+'</span>\r\n            </div>\r\n        </div>\r\n        <div class="col-sm-2 col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-12 col-md-7 col-sm-6">\r\n                    <div class="rp-grid-th sortable" data-sorter="start_time">\r\n                        <span class="sorting-pd rp-grid-th-name">'+((t=e.text.launchesHeaders.start_time)==null?"":t)+"&nbsp;"+((t=e.renderSorting("start_time").trim())==null?"":t)+'</span>\r\n                    </div>\r\n                </div>\r\n                <div class="col-xs-12 col-md-5 col-sm-6">\r\n                    <div class="rp-grid-th">\r\n                        <span class="rp-grid-th-name">'+((t=e.text.launchesHeaders.duration)==null?"":t)+'</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-5 col-sm-7 col-xs-12">\r\n            <div class="row">\r\n                <div class="col-xs-1 sortable extra-space" data-sorter="statistics.executions.total">\r\n                    <div class=" rp-grid-th">\r\n                        <span class="sorting-pd rp-grid-th-name">'+((t=e.text.launchesHeaders.total)==null?"":t)+"&nbsp;"+((t=e.renderSorting("statistics.executions.total").trim())==null?"":t)+'</span>\r\n                    </div>\r\n                </div>\r\n                <div class="row col-xs-10 col-sm-11">\r\n                    <div class="col-xs-4 col-sm-2 sortable" data-sorter="statistics.executions.passed">\r\n                        <div class=" rp-grid-th">\r\n                            <span class="sorting-pd rp-grid-th-name">\r\n                                '+((t=e.text.launchesHeaders.passed)==null?"":t)+"&nbsp;"+((t=e.renderSorting("statistics.executions.passed").trim())==null?"":t)+'\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-xs-4 col-sm-2 sortable" data-sorter="statistics.executions.failed">\r\n                        <div class=" rp-grid-th">\r\n                            <span class="sorting-pd rp-grid-th-name">\r\n                                '+((t=e.text.launchesHeaders.failed)==null?"":t)+"&nbsp;"+((t=e.renderSorting("statistics.executions.failed").trim())==null?"":t)+'\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-xs-4 col-sm-2 sortable" data-sorter="statistics.executions.skipped">\r\n                        <div class=" rp-grid-th">\r\n                            <span class="sorting-pd rp-grid-th-name">\r\n                                '+((t=e.text.launchesHeaders.skipped)==null?"":t)+"&nbsp;"+((t=e.renderSorting("statistics.executions.skipped").trim())==null?"":t)+'\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-xs-4 col-sm-2 sortable" data-sorter="statistics.defects.product_bug">\r\n                        <div class=" rp-grid-th">\r\n                            <span class="sorting-pd rp-grid-th-name">\r\n                                '+((t=e.text.launchesHeaders.product_bug)==null?"":t)+"&nbsp;"+((t=e.renderSorting("statistics.defects.product_bug").trim())==null?"":t)+'\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-xs-4 col-sm-2 sortable" data-sorter="statistics.defects.automation_bug">\r\n                        <div class=" rp-grid-th">\r\n                            <span class="sorting-pd rp-grid-th-name">\r\n                                '+((t=e.text.launchesHeaders.automation_bug)==null?"":t)+"&nbsp;"+((t=e.renderSorting("statistics.defects.automation_bug").trim())==null?"":t)+'\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-xs-4 col-sm-2 sortable margin-col" data-sorter="statistics.defects.system_issue">\r\n                        <div class=" rp-grid-th">\r\n                            <span class="sorting-pd rp-grid-th-name">\r\n                                '+((t=e.text.launchesHeaders.system_issue)==null?"":t)+"&nbsp;"+((t=e.renderSorting("statistics.defects.system_issue").trim())==null?"":t)+'\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="col-xs-1 col-sm-1 last-col">\r\n            <div class="rp-grid-th sortable" data-sorter="statistics.defects.to_investigate">\r\n                    <span class="sorting-pd rp-grid-th-name">\r\n                        '+((t=e.text.launchesHeaders.to_investigate)==null?"":t)+"&nbsp;"+((t=e.renderSorting("statistics.defects.to_investigate").trim())==null?"":t)+"\r\n                    </span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- ./title -->\r\n    <!-- tbody -->\r\n    ",e.collection.length?(n+="\r\n    ",_.each(e.collection,function(i,s){n+='\r\n    <div class="row rp-table-row ',e.validator.statusFailedNoChildren(i)&&(n+="danger"),n+='" id="'+r(i.id)+'" data-id="'+r(i.id)+'">\r\n        <div class="col-md-4 col-sm-2 col-xs-11 name-cell">\r\n            <span ',i.isProcessing||(n+='style="display:none"'),n+=' class="label label-danger autoanalyze">\r\n                '+((t=e.text.ui.analyze)==null?"":t)+"\r\n            </span>\r\n            ";var o=e.validator.stepIsShifter(i)?"shifted":"";n+='\r\n            <h5 class="rp-grid-name '+((t=o)==null?"":t)+'">\r\n                ';var u=e.navigationInfo.isLaunches();n+="\r\n                ";if(u||e.canEdit(i))n+='\r\n                <div class="btn-group">\r\n                    <a class="item-menu" data-toggle="dropdown" data-id="'+((t=i.id)==null?"":t)+'" href="#">\r\n                        <i class="rp-svg-icon svg-icon-menu-size-14"></i>\r\n                    </a>\r\n                </div>\r\n                ';n+='\r\n                <a class="navigateable rp-blue-link-undrl" href="'+r(e.urlResolver("name",i,e.getTabUrl()))+'" data-id="'+r(i.id)+'">'+r(i.name)+"</a>\r\n                ",i.number&&(n+=" #"+((t=i.number)==null?"":t)),n+="\r\n            </h5>\r\n            ",i.description&&(n+='\r\n            <pre class="rp-grid-description nicescroll-it '+((t=o)==null?"":t)+'">'+r(i.description.trim())+"</pre>\r\n            "),n+='\r\n            <div class="rp-grid-tags tags">\r\n                    ',i.owner&&(n+='\r\n                    <span title="Owner" class="rp-launch-owner owner">\r\n                        <i class="material-icons">person</i>\r\n                        <a class="text-muted tag" data-tag="'+r(i.owner)+'" data-tag-type="user" href="#">'+r(i.owner)+'</a>\r\n                    </span>\r\n                    <br class="visible-xs-block">\r\n                    '),n+="\r\n                    ";if(i.tags&&i.tags.length){n+='\r\n                        <span class="rp-launch-tags">\r\n                            <i class="material-icons">local_offer</i>\r\n                            ';var a=e.tagSorter(i.tags);n+="\r\n                            ",_.each(a,function(e){n+='\r\n                                <a class="text-muted tag" data-tag="'+r(e)+'" href="#">\r\n                                    '+r(e.replaceTabs())+"\r\n                                </a>\r\n                            "}),n+="\r\n                        </span>\r\n                    "}n+='\r\n            </div>\r\n        </div>\r\n        <div class="col-xs-12 col-sm-2 border-right-bold rp-mobile-padding">\r\n            <div class="clearfix visible-xs-block">&nbsp;</div>\r\n            <div class="row">\r\n                <div class="col-xs-6 col-md-7 show-time"><span class="hidden-sm hidden-md hidden-lg"><b>'+((t=e.text.launches.prefixStartTime)==null?"":t)+"</b></span>\r\n                    ";var f=e.util.dateFormat(i.start_time);n+='\r\n                    <span class="from-now">'+((t=e.util.fromNowFormat(f))==null?"":t)+'</span>\r\n                    <span class="exact-time">'+((t=f)==null?"":t)+'</span>\r\n                </div>\r\n                <div class="col-xs-6 col-md-5">\r\n                    <span class="visible-xs-inline"><b>'+((t=e.text.launches.prefixDuration)==null?"":t)+"</b></span>\r\n                    "+((t=e.renderDuration(i))==null?"":t)+'\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-5 col-sm-7 col-xs-12  rp-mobile-padding">\r\n            <div class="row">\r\n                <div class="clearfix hidden-sm hidden-md hidden-lg">&nbsp;</div>\r\n                <div class="col-xs-3 col-sm-1 rp-info rp-colors total extra-space">\r\n                    '+((t=e.renderStatics(["executions","total"],i,o))==null?"":t)+'\r\n                </div>\r\n                <div class="row col-xs-9 col-sm-11">\r\n                    <div class="col-xs-4 col-sm-2 rp-info rp-colors passed">\r\n                        '+((t=e.renderStatics(["executions","passed"],i,o))==null?"":t)+'\r\n                    </div>\r\n                    <div class="col-xs-4 col-sm-2 rp-info rp-colors failed">\r\n                        '+((t=e.renderStatics(["executions","failed"],i,o))==null?"":t)+'\r\n                    </div>\r\n                    <div class="col-xs-4 col-sm-2 rp-info rp-colors skipped">\r\n                        '+((t=e.renderStatics(["executions","skipped"],i,o))==null?"":t)+'\r\n                    </div>\r\n                    <div class="col-xs-4 col-sm-2 rp-info rp-colors pb">\r\n                        '+((t=e.renderStatics(["defects","product_bug"],i,o))==null?"":t)+'\r\n                    </div>\r\n                    <div class="col-xs-4 col-sm-2 rp-info rp-colors ab">\r\n                        '+((t=e.renderStatics(["defects","automation_bug"],i,o))==null?"":t)+'\r\n                    </div>\r\n                    <div class="col-xs-4 col-sm-2 rp-info rp-colors si">\r\n                        '+((t=e.renderStatics(["defects","system_issue"],i,o))==null?"":t)+'\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="col-xs-1 to_investigate-table-cell nopadding">\r\n            '+((t=e.renderStatics(["defects","to_investigate"],i,o))==null?"":t)+"\r\n        </div>\r\n    </div>\r\n    "}),n+="\r\n    "):n+='\r\n    <div class="row notfound-launches">\r\n        <div class="col-sm-12">\r\n            <h3 class="title-no-data text-center">\r\n                <i class="rp-icons rp-icons-warning"></i>\r\n                <span class="warning">'+((t=e.text.ui.noResultsFound)==null?"":t)+"</span>\r\n            </h3>\r\n        </div>\r\n    </div>\r\n    ",n+="\r\n    <!-- ./tbody -->\r\n</div>\r\n",n},this.JST["tpl-launch-test-grid"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="container-fluid rp-margin-reset rp-odd-even rp-table-hover">\r\n    <!-- title -->\r\n    <div class="row rp-grid-thead hidden-xs fixed_table_header">\r\n        <div class="col-sm-6">\r\n            <div class="col-sm-3">\r\n                <div class="rp-grid-th sortable" id="add-collapse-method" data-sorter="type">\r\n                    <span class="rp-grid-th-name sorting-pd pr-grid-method-type">'+((t=e.text.launchesHeaders.type)==null?"":t)+""+((t=e.renderSorting("type"))==null?"":t)+'</span>\r\n                </div>\r\n            </div>\r\n            <div class="col-sm-9">\r\n                <div class="rp-grid-th sortable" data-sorter="name"><span class="sorting-pd rp-grid-th-name">'+((t=e.text.launchesHeaders.name)==null?"":t)+""+((t=e.renderSorting("name"))==null?"":t)+'</span></div>\r\n            </div>\r\n        </div>\r\n        <div class="col-sm-6">\r\n            <div class="col-sm-2">\r\n                <div class="rp-grid-th sortable" data-sorter="status"><span class="sorting-pd rp-grid-th-name">'+((t=e.text.launchesHeaders.status)==null?"":t)+""+((t=e.renderSorting("status"))==null?"":t)+'</span></div>\r\n            </div>\r\n            <div class="col-sm-3">\r\n                <div class="rp-grid-th sortable" data-sorter="start_time"><span class="sorting-pd rp-grid-th-name">'+((t=e.text.launchesHeaders.start_time)==null?"":t)+""+((t=e.renderSorting("start_time"))==null?"":t)+'</span></div>\r\n            </div>\r\n            <div class="col-sm-2">\r\n                <div class="rp-grid-th"><span class=" rp-grid-th-name">'+((t=e.text.launchesHeaders.duration)==null?"":t)+'</span></div>\r\n            </div>\r\n            <div class="col-sm-5">\r\n                <div class="rp-grid-th sortable" data-sorter="issue.issue_type">\r\n                    <span class="sorting-pd rp-grid-th-name pr-select-all-issues">\r\n                        '+((t=e.text.launchesHeaders.issue)==null?"":t)+""+((t=e.renderSorting("issue.issue_type"))==null?"":t)+'\r\n                    <input class="select-all pull-right" type="checkbox"></span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- ./title -->\r\n    <!-- tbody -->\r\n    ';if(e.collection.length){var o={};n+="\r\n    ",_.each(e.collection,function(i,s){n+="  <!-- if(index === 0) {console.log(item);} -->    ";if(e.isAllCases){n+="\r\n    ";var u=e.isValidForParent(i,o);n+="\r\n    ";if(u){o=u;var a=_.keys(o);n+='\r\n        <div class="row rp-table-row parents-line">\r\n            <div class="col-sm-12">\r\n                ';var f="";n+="\r\n                ",_.each(o,function(i,s,o){n+="\r\n                    ",f&&(n+="/"),n+="\r\n                    ",f?f+="/"+s+"?"+e.getTabUrl():f=e.getSuitUrl(s),n+='\r\n                    <a href="'+((t=f)==null?"":t)+'" class="rp-blue-link-undrl break-link">'+r(i)+"</a>\r\n                "}),n+="\r\n            </div>\r\n        </div>\r\n    "}n+="\r\n    "}n+="\r\n    \r\n    ",e.validateForPreconditions(i)&&(n+='\r\n    <div class="method-collapsed method-collapsed-'+r(e.statusPreconditions)+'">\r\n        <div class="method-collapsed-toggle">\r\n    '),n+='    <div class="row rp-table-row ',e.validator.statusFailedNoChildren(i)&&(n+="danger"),n+='" id="'+r(i.id)+'">\r\n        <div class="col-sm-6">\r\n            <div class="col-sm-3">\r\n                ',e.validator.typeStep(i)?n+="\r\n                "+((t=e.text.testTableMethodTypes[i.type])==null?"":t)+"\r\n                ":n+='\r\n                <span class="text-muted">'+((t=e.text.testTableMethodTypes[i.type])==null?"":t)+"</span>\r\n                ",n+='\r\n            </div>\r\n            <div class="col-sm-9">\r\n                <h5 class="rp-grid-name">\r\n                ',e.canEdit(i)&&(n+='\r\n                    <div class="btn-group">\r\n                        <a class="item-menu" data-toggle="dropdown" data-id="'+((t=i.id)==null?"":t)+'" href="#">\r\n                            <i class="rp-svg-icon svg-icon-menu-size-14"></i>\r\n                        </a>\r\n                    </div>\r\n                '),n+='\r\n                <a class="navigateable rp-blue-link-undrl break-link" href="'+r(e.urlResolver("name",i))+'" data-id="'+r(i.id)+'">\r\n                    '+r(i.name)+"\r\n                </a>\r\n                </h5>\r\n                ",i.description&&(n+='<pre class="rp-grid-description nicescroll-it">'+r(i.description)+"</pre>\r\n                "),n+='\r\n                <div class="rp-grid-tags tags">\r\n                        ';if(i.tags&&i.tags.length){n+='\r\n                            <span class="rp-launch-tags">\r\n                                <i class="material-icons">local_offer</i>\r\n                            ';var l=e.tagSorter(i.tags);n+="\r\n                            ",_.each(l,function(e){n+='\r\n                                <a class="text-muted tag" data-tag="'+r(e)+'" href="#">\r\n                                    '+r(e.replaceTabs())+"\r\n                                </a>\r\n                            "}),n+="\r\n                            </span>\r\n                        "}n+='\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="col-sm-6">\r\n            <div class="col-sm-2 status-item">'+r(i.status)+'</div>\r\n            <div class="col-sm-3 show-time">\r\n                ';var c=e.util.dateFormat(i.start_time);n+='\r\n                <span class="from-now">'+((t=e.util.fromNowFormat(c))==null?"":t)+'</span>\r\n                <span class="exact-time">'+((t=c)==null?"":t)+'</span>\r\n            </div>\r\n            <div class="col-sm-2">'+((t=e.renderDuration(i))==null?"":t)+'</div>\r\n            <div class="col-sm-5">\r\n                ';if(e.validator.hasIssue(i)){n+="\r\n                ";var h=e.navigationInfo.launchIsProcessing(i)?"disabled":"";n+="\r\n                ";var p=h?e.text.launches.forbiddenIsProcessing:"";n+='\r\n                <div class="col-sm-12 nopadding '+((t=h)==null?"":t)+'" title="'+((t=p)==null?"":t)+'">\r\n                    '+((t=e.renderDefect(i))==null?"":t)+"\r\n                </div>\r\n                "}n+="\r\n            </div>\r\n        </div>\r\n    </div>\r\n    ",e.validateForPreconditions(i)&&(n+="\r\n        </div>\r\n    </div>\r\n    "),n+="\r\n    "}),n+="\r\n    "}else n+='\r\n        <div class="row rp-table-row">\r\n            <div class="col-xs-12">\r\n                <h3 class="title-no-data text-center">\r\n                    <i class="rp-icons rp-icons-warning"></i>\r\n                    <span class="warning">'+((t=e.text.ui.noResultsFound)==null?"":t)+"</span>\r\n                </h3>\r\n            </div>\r\n        </div>\r\n    ";return n+="\r\n    <!-- ./tbody -->\r\n</div>\r\n",n},this.JST["tpl-launch-update-row"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div id="'+r(e.item.id)+'"\r\n    class="row rp-table-row ',e.validator.statusFailedNoChildren(e.item)&&(n+="danger"),n+='">\r\n    <div class="col-xs-11 col-sm-4">\r\n        ';var o;o=e.validator.stepIsShifter(e.item)?"shifted":"",n+='\r\n        <h5 class="name-wrapper '+((t=o)==null?"":t)+'">\r\n            ';if(e.canMove(e.item)){n+="\r\n                ";var u=e.item.mode==="DEBUG"?e.text.launches.shiftToLaunches:e.text.launches.shiftToDebug;n+='\r\n                <span title="'+((t=u)==null?"":t)+'"\r\n                    class="launch-mode-switch"\r\n                    data-id="'+r(e.item.id)+'">\r\n                    <i class="material-icons">open_in_browser</i>\r\n                </span>\r\n            '}n+='\r\n            <strong>\r\n                <a class="navigateable rp-blue-link-undrl"\r\n                    href="'+r(e.urlResolver("name",e.item))+'"\r\n                    data-id="'+r(e.item.id)+'">\r\n                    '+r(e.item.name)+"\r\n                </a>\r\n            </strong>\r\n            ",e.item.number&&(n+="\r\n                #"+((t=e.item.number)==null?"":t)+"\r\n            "),n+="\r\n            ",e.item.description&&(n+='\r\n                <pre class="description-wrapper nicescroll-it">'+r(e.item.description.trim())+"</pre>\r\n            "),n+='\r\n        </h5>\r\n        <div class="pull-right tags rp-padding-bottom">\r\n            <small class="">\r\n                ',e.item.owner&&(n+='\r\n                    <span title="Owner" class="text-muted owner">\r\n                        <i class="material-icons">person</i>\r\n                        <a class="text-muted tag" data-tag="'+r(e.item.owner)+'" href="#">\r\n                            '+r(e.item.owner)+'\r\n                        </a>\r\n                    </span>\r\n                    <br class="visible-xs-block">\r\n                '),n+="\r\n                ";if(e.item.tags&&e.item.tags.length){n+='\r\n                    <span class="text-muted">\r\n                        <i class="material-icons">local_offer</i>\r\n                        ';var a;a=e.tagSorter(e.item.tags),n+="\r\n                        ",_.each(a,function(e){n+='\r\n                            <a class="text-muted tag" data-tag="'+r(e)+'" href="#">\r\n                                '+r(e.replaceTabs())+"\r\n                            </a>\r\n                        "}),n+="\r\n                    </span>\r\n                "}n+='\r\n            </small>\r\n        </div>\r\n    </div>\r\n    <div class="col-xs-12 col-sm-2 border-right-bold rp-mobile-padding">\r\n        <div class="clearfix visible-xs-block">&nbsp;</div>\r\n        <div class="row">\r\n            <div class="col-xs-6 col-md-7 show-time">\r\n                <span class="hidden-sm hidden-md hidden-lg">\r\n                    <b>'+((t=e.text.launches.prefixStartTime)==null?"":t)+"</b>\r\n                </span>\r\n                ";var f=e.util.dateFormat(e.item.start_time);return n+='\r\n                <span class="from-now">'+((t=e.util.fromNowFormat(f))==null?"":t)+'</span>\r\n                <span class="exact-time">'+((t=f)==null?"":t)+'</span>\r\n            </div>\r\n            <div class="col-xs-6 col-md-5">\r\n                <span class="visible-xs-inline">\r\n                    <b>'+((t=e.text.launches.prefixDuration)==null?"":t)+"</b>\r\n                </span>\r\n                "+((t=e.renderDuration(e.item))==null?"":t)+'\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="col-xs-12 col-sm-5 rp-mobile-padding">\r\n        <div class="row text-center">\r\n            <div class="clearfix hidden-sm hidden-md hidden-lg">&nbsp;</div>\r\n            <div class="col-xs-3 col-sm-2 rp-info rp-colors total">\r\n                '+((t=e.renderStatics(["executions","total"],e.item,o))==null?"":t)+'\r\n            </div>\r\n            <div class="row col-xs-9 col-sm-10">\r\n                <div class="col-xs-4 col-sm-2 rp-info rp-colors passed">\r\n                    '+((t=e.renderStatics(["executions","passed"],e.item,o))==null?"":t)+'\r\n                </div>\r\n                <div class="col-xs-4 col-sm-2 rp-info rp-colors failed">\r\n                    '+((t=e.renderStatics(["executions","failed"],e.item,o))==null?"":t)+'\r\n                </div>\r\n                <div class="col-xs-4 col-sm-2 rp-info rp-colors skipped">\r\n                    '+((t=e.renderStatics(["executions","skipped"],e.item,o))==null?"":t)+'\r\n                </div>\r\n                <div class="col-xs-4 col-sm-2 rp-info rp-colors pb">\r\n                    '+((t=e.renderStatics(["defects","product_bugs"],e.item,o))==null?"":t)+'\r\n                </div>\r\n                <div class="col-xs-4 col-sm-2 rp-info rp-colors ab">\r\n                    '+((t=e.renderStatics(["defects","test_bugs"],e.item,o))==null?"":t)+'\r\n                </div>\r\n                <div class="col-xs-4 col-sm-2 rp-info rp-colors si">\r\n                    '+((t=e.renderStatics(["defects","system_issue"],e.item,o))==null?"":t)+'\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="col-xs-1 to_investigate-table-cell text-center">\r\n        ',e.item.statistics.defects.to_investigate!=="0"&&(n+='\r\n            <span class="badge hidden-xs rp-desktop">\r\n                '+((t=e.renderStatics(["defects","to_investigate"],e.item,o))==null?"":t)+'\r\n            </span>\r\n            <div class="visible-xs-inline text-right rp-mobile">\r\n                <span class="badge rp-info ti">\r\n                    '+((t=e.renderStatics(["defects","to_investigate"],e.item,o))==null?"":t)+"\r\n                </span>\r\n            </div>\r\n        "),n+="\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-launches-compare-panel"]=function(e){var t,n="",r=_.escape;return n+='<div class="row">\r\n    <div id="history-inputs" class="col-md-9">\r\n        <div class="history-inputs-row">\r\n            <i class="material-icons">equalizer</i>\r\n            <h5>'+((t=e.text.launches.clickToCompare)==null?"":t)+'</h5>\r\n            <ul class="list-inline history-items"></ul>\r\n        </div>\r\n    </div>\r\n    <div id="history-show-button" class="col-md-3 pull-right">\r\n        <div class="pull-right">\r\n            <button class="rp-btn rp-btn-submit btn-show-compare" style="display:none;">\r\n                '+((t=e.text.launches.Compare)==null?"":t)+'\r\n            </button>\r\n            <button class="rp-btn rp-btn-cancel" id="cancel-history">'+((t=e.text.ui.cancel)==null?"":t)+"</button>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-launches-crumbs-lost"]=function(e){var t,n="",r=_.escape;return n+='<li class="crumb m-top-15 m-left-15">\r\n    '+((t=e.text.launches.originalLaunchLost)==null?"":t)+'\r\n    <button class="btn btn-xs btn-success m-left-15" id="restoreNavigation">'+((t=e.text.ui.restore)==null?"":t)+"</button>\r\n</li>",n},this.JST["tpl-launches-crumbs"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<li class="breadcrumbs-mode-container">\r\n    <div class="breadcrumb-mode '+((t=e.expanded?e.expanded:"")==null?"":t)+'" id="breadcrumbToggle">\r\n        <i class="material-icons breadcrumb-plus">add_box</i>\r\n        <i class="material-icons breadcrumb-minus">indeterminate_check_box</i>\r\n    </div>\r\n</li>\r\n',_.forEach(e.steps,function(i,s,o){var u=e.steps.length-1===s;n+="\r\n";if(i.id&&i.name){n+='\r\n<li class="crumb ',u&&(n+="inactive"),n+='">\r\n    ';var a=i.id.indexOf("all-cases-for")==0?'<i title="List view" class="material-icons mi-list">format_indent_increase</i>':"";n+="\r\n    ",u?(n+='\r\n        <span class="link-as-element ellipse" title="'+r(i.name)+'">\r\n            '+((t=a)==null?"":t)+"\r\n            <span>"+r(i.name!=="history"?i.name:e.text.forms.history)+"</span>\r\n        </span>\r\n        ",s===1&&i.data&&i.data.isProcessing&&(n+='\r\n            <span class="label autoanalyze label-danger">'+((t=e.text.ui.autoAnalyzeShort)==null?"":t)+"</span>\r\n        "),n+="\r\n    "):(n+='\r\n        <a href="'+((t=i.link)==null?"":t)+'" class="ellipse" title="'+r(i.name)+'">\r\n            '+((t=a)==null?"":t)+"\r\n            <span>"+r(i.name)+"</span>\r\n        </a>\r\n        ",s===1&&i.data&&i.data.isProcessing&&(n+='\r\n            <span class="label autoanalyze label-danger">'+((t=e.text.ui.autoAnalyzeShort)==null?"":t)+"</span>\r\n        "),n+='\r\n        <i class="material-icons">keyboard_arrow_right</i>\r\n    '),n+="\r\n</li>\r\n"}n+="\r\n"}),n},this.JST["tpl-launches-header"]=function(e){var t,n="",r=_.escape;return n+='<div id="filterPanel" class="clearfix"></div>\r\n<div id="headerBar" class="fixed_header clearfix">\r\n    <ul class="rp-nav rp-nav-left" id="breadCrumbs"></ul>\r\n    <ul class="rp-nav rp-nav-right">\r\n        <li style="display: none;"\r\n            id="testItemsNav" \r\n            class="rp-launch-btn float-right margin-left-10 rp-item-li-fix-height">\r\n            <a href=""\r\n                class="rp-btn rp-btn-default rp-button-with-icon"\r\n                title="'+((t=e.text.logs.prevTestItem)==null?"":t)+'">\r\n                <i class="material-icons">keyboard_arrow_left</i>\r\n            </a>\r\n            <a href=""\r\n                class="rp-btn rp-btn-default rp-button-with-icon"\r\n                title="'+((t=e.text.logs.nextTestItem)==null?"":t)+'">\r\n                <i class="material-icons">keyboard_arrow_right</i>\r\n            </a>\r\n        </li>\r\n        <li id="gridRefresh"\r\n            class="rp-launch-btn float-right margin-left-10 rp-item-li-fix-height">\r\n            <div class="rp-btn rp-btn-default rp-button-with-icon"\r\n                data-title="'+((t=e.text.ui.refresh)==null?"":t)+'"\r\n                title="'+((t=e.text.ui.refresh)==null?"":t)+'">\r\n                <i class="material-icons">autorenew</i>\r\n                <span class="hidden-md hidden-sm hidden-xs rp-btn-val">\r\n                    '+((t=e.text.ui.refresh)==null?"":t)+'\r\n                </span>\r\n                <span id="changeCounter" class="bounce"></span>\r\n            </div>\r\n        </li>\r\n        <li style="display: none;"\r\n            id="addWidget"\r\n            class="rp-launch-btn float-right margin-left-10 rp-item-li-fix-height"\r\n            data-title="'+((t=e.text.dashboard.saveWidget)==null?"":t)+'"\r\n            title="'+((t=e.text.dashboard.saveWidget)==null?"":t)+'">\r\n            <div class="rp-btn rp-btn-default rp-button-with-icon add-widget-btn"\r\n                data-title="'+((t=e.text.dashboard.addWidget)==null?"":t)+'"\r\n                title="'+((t=e.text.dashboard.addWidget)==null?"":t)+'">\r\n                <i class="material-icons">add_circle</i>\r\n                <span class="hidden-md hidden-sm hidden-xs rp-btn-val">\r\n                    '+((t=e.text.dashboard.addWidget)==null?"":t)+'\r\n                </span>\r\n            </div>\r\n        </li>\r\n        <li style="display: none;"\r\n            id="loadBug"\r\n            class="rp-launch-btn float-right margin-left-10 rp-item-li-fix-height"\r\n            data-tbs="'+((t=e.text.launches.loadBug)==null?"":t)+'"\r\n            data-notbs="'+((t=e.text.launches.configureTBSLoad)==null?"":t)+'"\r\n            data-isprocessing="'+((t=e.text.launches.forbiddenIsProcessing)==null?"":t)+'"\r\n            data-noissues="'+((t=e.text.launches.noIssuesLoad)==null?"":t)+'">\r\n            <div class="rp-btn rp-btn-default rp-button-with-icon">\r\n                <i class="material-icons">link</i>\r\n                <span class="hidden-md hidden-sm hidden-xs rp-btn-val">\r\n                    '+((t=e.text.launches.loadBug)==null?"":t)+'\r\n                </span>\r\n            </div>\r\n        </li>\r\n        <li style="display: none;"\r\n            id="postBug"\r\n            class="rp-launch-btn float-right margin-left-10 rp-item-li-fix-height"\r\n            data-tbs="'+((t=e.text.launches.postBug)==null?"":t)+'"\r\n            data-noissues="'+((t=e.text.launches.noIssues)==null?"":t)+'"\r\n            data-isprocessing="'+((t=e.text.launches.forbiddenIsProcessing)==null?"":t)+'"\r\n            data-notbs="'+((t=e.text.launches.configureTBS)==null?"":t)+'">\r\n            <div class="rp-btn rp-btn-default rp-button-with-icon">\r\n                <i class="material-icons">bug_report</i>\r\n                <span class="hidden-md hidden-sm hidden-xs rp-btn-val">\r\n                    '+((t=e.text.launches.postBug)==null?"":t)+'\r\n                </span>\r\n            </div>\r\n        </li>\r\n        <li style="display: none;"\r\n            id="historyActivator"\r\n            class="rp-launch-btn float-right margin-left-10 rp-item-li-fix-height">\r\n            <div class="rp-btn rp-btn-default rp-button-with-icon"\r\n                data-title="'+((t=e.text.launches.historyView)==null?"":t)+'"\r\n                title="'+((t=e.text.launches.historyView)==null?"":t)+'">\r\n                <i class="material-icons">history</i>\r\n                <span class="hidden-md hidden-sm hidden-xs rp-btn-val">\r\n                    '+((t=e.text.launches.historyView)==null?"":t)+'\r\n                </span>\r\n            </div>\r\n        </li>\r\n        <li style="display: none;"\r\n            id="launchesCompare"\r\n            class="rp-launch-btn float-right margin-left-10 rp-item-li-fix-height">\r\n            <div class="rp-btn rp-btn-default rp-button-with-icon"\r\n                data-title="'+((t=e.text.launches.Compare)==null?"":t)+'"\r\n                title="'+((t=e.text.launches.Compare)==null?"":t)+'">\r\n                <i class="material-icons">equalizer</i>\r\n                <span class="hidden-md hidden-sm hidden-xs rp-btn-val">\r\n                    '+((t=e.text.launches.Compare)==null?"":t)+'\r\n                </span>\r\n            </div>\r\n        </li>\r\n        <li style="display: none;"\r\n            id="mergeLaunches"\r\n            class="rp-launch-btn float-right margin-left-10 rp-item-li-fix-height">\r\n            <div class="rp-btn rp-btn-default rp-button-with-icon"\r\n                data-title="'+((t=e.text.launches.merge)==null?"":t)+'"\r\n                title="'+((t=e.text.launches.merge)==null?"":t)+'">\r\n                <i class="material-icons">call_merge</i>\r\n                <span class="hidden-md hidden-sm hidden-xs rp-btn-val">\r\n                    '+((t=e.text.launches.merge)==null?"":t)+"\r\n                </span>\r\n            </div>\r\n        </li>\r\n    </ul>\r\n</div>",n},this.JST["tpl-launches-info-panel-defect"]=function(e){var t,n="",r=_.escape;return n+='<li>\r\n    <span class="info-section-issue '+((t=e.cls)==null?"":t)+'" data-tooltip-type="'+((t=e.type)==null?"":t)+'">\r\n        <span class="issue-type"><i style="background: '+((t=e.color)==null?"":t)+'"></i>'+((t=e.short)==null?"":t)+'</span>\r\n        <span class="issues" title="'+((t=e.longName)==null?"":t)+'" style="border-color: '+((t=e.color)==null?"":t)+'">\r\n            '+((t=e.total)==null?"":t)+"\r\n        </span>\r\n    </span>\r\n</li>",n},this.JST["tpl-launches-info-panel"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<ul class="info_section clearfix">\r\n    <li>\r\n        <div class="progress" data-tooltip-type="executions">\r\n            <div style="width: '+((t=e.passed)==null?"":t)+"%; background: "+((t=e.getDefaultColor("passed"))==null?"":t)+'" class="progress-bar"></div>\r\n            <div style="width: '+((t=e.failed)==null?"":t)+"%; background: "+((t=e.getDefaultColor("failed"))==null?"":t)+'" class="progress-bar"></div>\r\n            <div style="width: '+((t=e.skipped)==null?"":t)+"%; background: "+((t=e.getDefaultColor("skipped"))==null?"":t)+'" class="progress-bar"></div>\r\n        </div>\r\n    </li>\r\n    <li><span class="info-section-passed">'+((t=e.text.launchesHeaders.passed)==null?"":t)+" "+((t=e.passed)==null?"":t)+'%</span></li>\r\n    <li><span class="info-section-total">'+((t=e.text.launchesHeaders.total)==null?"":t)+" "+((t=e.total)==null?"":t)+'</span></li>\r\n    <li><span data-tooltip-type="duration" class="duration '+((t=e.status)==null?"":t)+'">\r\n        '+((t=e.text.launchesHeaders.duration)==null?"":t)+"\r\n        <span>\r\n            ",e.interrupted?n+='\r\n                <abbr title="'+((t=e.text.launchesHeaders.interruptedAfter)==null?"":t)+" "+((t=e.duration)==null?"":t)+". "+((t=e.text.launchesHeaders.stoppedAt)==null?"":t)+" "+((t=e.finish)==null?"":t)+'" class="text-danger">\r\n                    <strong>'+((t=e.duration)==null?"":t)+"</strong></abbr>\r\n            ":n+="\r\n                <abbr>\r\n                    "+((t=e.duration)==null?"":t)+"\r\n                </abbr>\r\n            ",n+="\r\n            </span>\r\n        </span>\r\n    </li>\r\n    ",_.each(e.sortedIssueTypes,function(r){n+="\r\n        "+((t=e.renderDefect(e.defects[r]))==null?"":t)+"\r\n    "}),n+="\r\n</ul>",n},this.JST["tpl-launches-merge-panel"]=function(e){var t,n="",r=_.escape;return n+='<div class="row">\r\n    <div id="merge-inputs" class="col-md-9">\r\n        <div class="history-inputs-row">\r\n            <i class="material-icons">call_merge</i>\r\n            <h5>'+((t=e.text.launches.clickToMerge)==null?"":t)+'</h5>\r\n            <ul class="list-inline history-items"></ul>\r\n        </div>\r\n    </div>\r\n    <div id="merge-show-button" class="col-md-3 pull-right">\r\n        <div class="pull-right hm-panel-buttons">\r\n            <button class="rp-btn rp-btn-submit" id="merge-launches" data-js-merge-launches style="display:none;">\r\n                '+((t=e.text.launches.mergeLaunches)==null?"":t)+'\r\n            </button>\r\n            <button class="rp-btn rp-btn-cancel" id="cancel-merge">'+((t=e.text.ui.cancel)==null?"":t)+"</button>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-launches-panel-item"]=function(e){var t,n="",r=_.escape;return n+='<li id="panel-item-'+((t=e.id)==null?"":t)+'">\r\n    <span class="label label-default">\r\n        '+((t=e.name)==null?"":t)+""+((t=e.number?" #"+e.number:"")==null?"":t)+'\r\n        <i class="material-icons remove-item" data-id="'+((t=e.id)==null?"":t)+'">cancel</i>\r\n    </span>\r\n</li>\r\n',n},this.JST["tpl-launches-tooltip-defects"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="tooltip defects-tooltip">\r\n    <div class="tooltip-inner">\r\n        <div class="defects-tip-content container-fluid">\r\n            ',e.noSubDefects||(n+='\r\n            <div class="defects-tip-title row">\r\n                <div class="col-sm-12">\r\n                    <div class="col-sm-10">\r\n                        <span class="defects-tip-color" style="background: '+r(e.color)+'"></span>\r\n                        '+((t=e.text.infoLine[e.type])==null?"":t)+'\r\n                    </div>\r\n                    <div class="col-sm-2">\r\n                        <span class="tip-total-bugs">\r\n                            ',e.noTotalLink?n+="\r\n                                "+((t=e.total)==null?"":t)+"\r\n                            ":n+='\r\n                                <a href="'+r(e.url?e.url:_.isFunction(e.urlResolver)?e.urlResolver(e.type,e.item,e.tab):"")+'" class="rp-link">'+((t=e.total)==null?"":t)+"</a>\r\n                            ",n+="\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            "),n+="\r\n            ";if(!_.isEmpty(e.defects)&&e.type!=="to_investigate"||e.noSubDefects)n+='\r\n            <ul class="defects-tip-list ',e.noSubDefects&&(n+="defects-tip-no-defects"),n+='">\r\n                ',_.each(e.defects,function(e){n+='\r\n                <li class="row">\r\n                    <div class="col-sm-12">\r\n                        <div class="col-sm-10">\r\n                            <span class="defects-tip-color" style="background: '+r(e.color)+'"></span>\r\n                            '+r(e.longName)+'\r\n                        </div>\r\n                        <div class="col-sm-2">\r\n                            '+((t=e.val)==null?"":t)+"\r\n                        </div>\r\n                    </div>\r\n                </li>\r\n                "}),n+="\r\n            </ul>\r\n            ";return n+="\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-launches-tooltip-executions"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="tooltip defects-tooltip">\r\n    <div class="tooltip-inner">\r\n        <div class="stats-tip-content container-fluid">\r\n            <ul class="stats-tip-list">\r\n                ',_.each(e.stats,function(i){n+='\r\n                    <li class="row">\r\n                        <div class="col-sm-12">\r\n                            <div class="col-sm-7">\r\n                                <span>'+r(e.text.filterNameByValue[i.name.toUpperCase()])+'</span>\r\n                            </div>\r\n                            <div class="col-sm-5">'+((t=i.value)==null?"":t)+"%</div>\r\n                        </div>\r\n                    </li>\r\n                "}),n+="\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-launches-tooltip"]=function(e){var t,n="",r=_.escape;return n+='<div class="tooltip defects-tooltip">\r\n    <div class="tooltip-inner">\r\n        <div class="defects-tip-duration">'+((t=e.message)==null?"":t)+"</div>\r\n    </div>\r\n</div>",n},this.JST["tpl-load-bug-row"]=function(e){var t,n="",r=_.escape;return n+='<div class="issue-row">\r\n    <div class="col-sm-8 form-group">\r\n        <label class="custom-label visible-xs">'+((t=e.text.bts.linkToIssue)==null?"":t)+'</label>\r\n        <input class="form-control issue-link" type="text" value="" />\r\n        <span class="help-inline"></span>\r\n    </div>\r\n    <div class="col-sm-3 nopadding  form-group">\r\n        <label class="custom-label visible-xs">'+((t=e.text.bts.issueId)==null?"":t)+'</label>\r\n        <input class="form-control issue-id" type="text" value="" />\r\n        <span class="help-inline"></span>\r\n    </div>\r\n    <div class="col-sm-1 col-xs-12 remove-block">\r\n        <span class="remove-row hidden-xs">\r\n            <i class="material-icons">clear</i>\r\n        </span>\r\n        <button class="rp-btn rp-btn-danger remove-row pull-right m-bottom-15 visible-xs">'+((t=e.text.ui.remove)==null?"":t)+'</button>\r\n    </div>\r\n</div>\r\n<div class="clearfix"></div>',n},this.JST["tpl-load-bug"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<h4 class="col-xs-12">'+((t=e.text.launches.addIssueId)==null?"":t)+'</h4>\r\n<div class="clearfix"></div>\r\n',e.systems.length>1&&(n+='\r\n    <div class="col-xs-12 bottom-15">\r\n        <label class="col-sm-12 control-label custom-padding obligatory-field"\r\n            for="targetProject">\r\n            '+((t=e.text.bts.projectNameIn)==null?"":t)+"\r\n            "+((t=e.source)==null?"":t)+'\r\n        </label>\r\n        <div class="col-sm-12 nopadding">\r\n            <div class="rp-btn-group rp-width-100">\r\n                <button type="button"\r\n                    class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                    data-toggle="dropdown"\r\n                    id="targetProject">\r\n                    <span class="select-value">'+((t=e.current.project)==null?"":t)+'</span>\r\n                    <span class="rp-caret"></span>\r\n                </button>\r\n                <ul class="dropdown-menu">\r\n                    ',_.forEach(e.systems,function(r,i){n+='\r\n                        <li class="'+((t=r.id===e.current.id?"active":"")==null?"":t)+'">\r\n                            <a href="#" id="'+((t=r.id)==null?"":t)+'" class="bts-project project-name">\r\n                                '+((t=r.project)==null?"":t)+"\r\n                            </a>\r\n                        </li>\r\n                    "}),n+='\r\n                </ul>\r\n            </div>\r\n            <div class="col-sm-12 nopadding">\r\n                '+((t=e.text.launches.willBeLoadedTo)==null?"":t)+'\r\n                <span id="postToUrl">'+((t=e.current.url)==null?"":t)+"</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n"),n+='\r\n<div class="form-group hidden-xs">\r\n    <div class="col-sm-8">'+((t=e.text.bts.linkToIssue)==null?"":t)+'</div>\r\n    <div class="col-sm-4 nopadding">'+((t=e.text.bts.issueId)==null?"":t)+'</div>\r\n</div>\r\n<div id="rowHolder"></div>\r\n<div class="col-sm-12 p-bottom-15 clearfix">\r\n    <button class="rp-btn rp-btn-submit col-xs-12" id="addRow" type="button">\r\n        '+((t=e.text.bts.addMoreIssues)==null?"":t)+"\r\n    </button>\r\n</div>",n},this.JST["tpl-merge-warning"]=function(e){var t,n="",r=_.escape;return n+='<div class="modal-message">'+((t=e.message)==null?"":t)+"</div>",n},this.JST["tpl-test-collapsed-button"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o,u;return o=e.statusPreconditions==="hide"?"checked":"",u=e.text.launches[e.statusPreconditions+"PreconditionMethods"],n+='\r\n\r\n<div id="collapseMethodBtn" class="collapse-method-btn">\r\n    <label class="rp-switcher" data-toggle-switch title="'+((t=u)==null?"":t)+'">\r\n        <input type="checkbox" '+((t=o)==null?"":t)+' />\r\n        <div class="slider"></div>\r\n    </label>\r\n</div>\r\n\r\n\r\n',n},this.JST["tpl-login-reset"]=function(e){var t,n="",r=_.escape;return n+='<div id="reset-form">\r\n    <div class="login-form-overflow">\r\n        <form  class="block-login-form" autocomplete="off">\r\n            <span class="block-login-title">'+((t=e.text.login.changePassword)==null?"":t)+'</span>\r\n            <div class="rp-form-group">\r\n                <input type="password" placeholder="'+((t=e.text.login.newPassword)==null?"":t)+'" id="new_password" autocomplete="off" class="rp-input-auth">\r\n                <input type="password" autocomplete="off" placeholder="'+((t=e.text.login.confirmNewPassword)==null?"":t)+'" id="new_password_repeat" class="confirm rp-input-auth">\r\n                <div class="form-inline p-top-10 clearfix">\r\n                    <label class="text-muted small pull-left">\r\n                        <input type="checkbox" id="showPass" class="rp-input-checkbox" />\r\n                        <span>'+((t=e.text.login.showPassword)==null?"":t)+'</span>\r\n                    </label>\r\n                </div>\r\n                <span class="help-inline"></span>\r\n            </div>\r\n            <div class="form-inline p-top-10 clearfix">\r\n                <input type="button" id="submit_change" value="'+((t=e.text.login.changePassword)==null?"":t)+'" class="btn-create btn btn-info pull-right disabled btn-restore ">\r\n                <a href="#login" id="backToLogin" class="text-muted small pull-left m-top-10">'+((t=e.text.login.backToLogin)==null?"":t)+"</a>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>",n},this.JST["tpl-login-restore"]=function(e){var t,n="",r=_.escape;return n+='<div id="restore-form">\r\n    <div class="login-form-overflow">\r\n        <form class="block-login-form" autocomplete="off">\r\n            <span class="block-login-title">'+((t=e.text.login.restorePassword)==null?"":t)+'</span>\r\n            <div class="form-group">\r\n                <input type="text" size="30" placeholder="'+((t=e.text.login.emailToBegin)==null?"":t)+'" id="restore_email"\r\n                       class="rp-input-auth" maxlength="128">\r\n                <span class="help-inline"></span>\r\n            </div>\r\n            <div class="form-inline clearfix">\r\n                <button type="button" id="cancel_restore" class="btn-login-cancel">'+((t=e.text.ui.cancel)==null?"":t)+'</button>\r\n                <button type="button" id="submit_restore" class="btn-login-change-pwd" disabled="disabled">'+((t=e.text.login.changePassword)==null?"":t)+"\r\n                </button>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>",n},this.JST["tpl-login"]=function(e){var t,n="",r=_.escape;return n+='<div id="login-form">\r\n    <div class="login-form-overflow">\r\n        <form class="block-login-form" autocomplete="on">\r\n            <div class="form-group">\r\n                <label class="block-login-label">\r\n                    <span>'+((t=e.text.login.loginTitle)==null?"":t)+'</span>\r\n                    <input type="text" class="rp-input-auth" id="user_login" size="30" autofocus="autofocus" maxlength="128" placeholder="'+((t=e.text.login.loginTitle)==null?"":t)+'">\r\n                </label>\r\n            </div>\r\n            <div class="form-group">\r\n                <label class="block-login-label">\r\n                    <span>'+((t=e.text.login.passwordTitle)==null?"":t)+'</span>\r\n                    <input type="password" class="rp-input-auth" id="user_password" size="30" autocomplete="off" maxlength="25" placeholder="'+((t=e.text.login.passwordTitle)==null?"":t)+'">\r\n                </label>\r\n            </div>\r\n            <div class="block-login-error js-loginerror">\r\n                '+((t=e.text.ui.error)==null?"":t)+': <span id="errorText"></span>\r\n            </div>\r\n            <div class="form-group">\r\n                <input type="button" id="submit_user" value="'+((t=e.text.login.signIn)==null?"":t)+'" name="commit" class="rp-input-auth-submit">\r\n            </div>\r\n            <div class="form-group">\r\n                <a class="block-login-frgtpswd" id="forgotPass">'+((t=e.text.login.forgotPassword)==null?"":t)+'</a>\r\n                <div class="external-login" data-js-github-login>\r\n                    <div class="b-login__or">\r\n                        <div class="b-login__or--border"></div>\r\n                        <div class="b-login__or--text">Or</div>\r\n                        <div class="b-login__or--border"></div>\r\n                    </div>\r\n                    <a class="external-auth-link" href="/uat/sso/login/github" data-js-github-login-btn>\r\n                        <svg aria-hidden="true" height="28" version="1.1" viewBox="0 0 16 16" width="28"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"></path></svg>\r\n                        <span>Sign in with GitHub</span>\r\n                    </a>\r\n                </div>\r\n            </div>\r\n            <div class="form-group">\r\n                <p>\r\n                    <a href="http://www.gnu.org/licenses/lgpl-3.0.en.html" target="_blank" style="visibility: hidden">'+((t=e.text.footer.licensing)==null?"":t)+" "+((t=e.text.footer.lgplv3)==null?"":t)+'</a>\r\n                </p>\r\n            </div>\r\n        </form>\r\n    </div>\r\n    <p class="block-login-info build-version" data-js-build-versions>\r\n    </p>\r\n</div>',n},this.JST["tpl-messages-panel"]=function(e){var t,n="",r=_.escape;return n+='<div class="alert alert-danger fade in">\' +\r\n    <button type="button" class="close" data-dismiss="alert">&times;</button>\r\n    <h4>'+((t=e.title)==null?"":t)+" "+((t=e.text.messages.code)==null?"":t)+" "+((t=e.code)==null?"":t)+"</h4>\r\n    "+((t=e.message)==null?"":t)+'\r\n    <a class="stacktrace" data-toggle="collapse" data-target="#div-stacktrace">'+((t=e.text.messages.details)==null?"":t)+'</a>\r\n    <div id="div-stacktrace" class="collapse">\r\n        <div class="col-md-12">\r\n            '+((t=e.details)==null?"":t)+"\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-messages-single"]=function(e){var t,n="",r=_.escape;return n+='<div class="message-fade flash-'+((t=e.clazz)==null?"":t)+'">\r\n    '+((t=e.message)==null?"":t)+"\r\n</div>",n},this.JST["tpl-log-gallery-content"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="container-fluid">\r\n    <!-- gallery slider -->\r\n    <div class="row rp-margin-bottom">\r\n        <div id="slider" class="col-lg-12">\r\n            <div class="rp-bounding-box">\r\n                <div class="carousel slide" id="launchesCarousel">\r\n                    <div class="carousel-inner">\r\n                        ',_.each(e.collection,function(i,s){n+="\r\n                            ";var o=s===0?"active":"";n+='\r\n                            <div data-slide-number="'+((t=s)==null?"":t)+'" class="item '+((t=o)==null?"":t)+'">\r\n                                ';var u=e.dataUrl+i.binary_content.id;n+='\r\n                                <div class="carousel-caption carousel-custom-settings hidden-xs"\r\n                                    title="'+((t=e.text.ui.jumpToMessage)==null?"":t)+'"\r\n                                    data-content-id="'+((t=i.id)==null?"":t)+'">\r\n                                    <span class="rotate-image" title="'+((t=e.text.ui.rotateImage)==null?"":t)+'">\r\n                                        <i class="material-icons">rotate_90_degrees_ccw</i>\r\n                                    </span>\r\n                                    <p>'+r(i.message)+'</p>\r\n                                </div>\r\n                                <a href="'+r(e.updateImagePath(u))+'"\r\n                                    target="_blank">\r\n                                    <img class="img-responsive" src="'+r(e.updateImagePath(u))+'" />\r\n                                </a>\r\n                            </div>\r\n                        '}),n+="\r\n                    </div>\r\n                    <!-- gallery controls -->\r\n                    ",e.collection.length>1&&(n+='\r\n                        <a data-slide="prev"\r\n                            href="#launchesCarousel"\r\n                            class="carousel-control left custom-left-position">\r\n                            <i class="material-icons">keyboard_arrow_left</i>\r\n                        </a>\r\n                        <a data-slide="next"\r\n                            href="#launchesCarousel"\r\n                            class="carousel-control right custom-right-position">\r\n                            <i class="material-icons">keyboard_arrow_right</i>\r\n                        </a>\r\n                    '),n+='\r\n                    <!-- /end gallery controls -->\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /end gallery slider -->\r\n    <!-- slider thumbnails -->\r\n    <div class="row">\r\n        <div class="col-lg-12">\r\n            <div id="slider-thumbs" class="navigation-wrap hidden-sm hidden-xs">\r\n                <div class="navigation-content js-navigation-content">\r\n                    <ul class="navigation-items js-navigation-items" style="">\r\n                        ',_.each(e.collection,function(i,s){n+="\r\n                            ";var o=s===0?"selected":"";n+='\r\n                            <li class="navigation-item js-navigation-item"\r\n                                data-slide-to="'+((t=s)==null?"":t)+'"\r\n                                data-target="#launchesCarousel">\r\n                                <a class="carousel-thumb '+((t=o)==null?"":t)+'"\r\n                                    id="carousel-selector-'+((t=s)==null?"":t)+'">\r\n                                    <img width="88px"\r\n                                        height="66px"\r\n                                        class="img-responsive"\r\n                                        src="'+r(e.updateImagePath(e.dataUrl+i.binary_content.thumbnail_id))+'" />\r\n                                </a>\r\n                            </li>\r\n                        '}),n+="\r\n                    </ul>\r\n                </div>\r\n                ",e.collection.length>1&&(n+='\r\n                    <span class="carousel-control left  nav-left-position  js-navigation-prev">\r\n                        <i class="material-icons">keyboard_arrow_left</i>\r\n                    </span>\r\n                    <span class="carousel-control right nav-right-position js-navigation-next">\r\n                        <i class="material-icons">keyboard_arrow_right</i>\r\n                    </span>\r\n                '),n+="\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- /end slider thumbnails -->\r\n</div>\r\n",n},this.JST["tpl-log-panel"]=function(e){var t,n="",r=_.escape;return n+='<div id="logGallery">\r\n    <div class="panel rp-panel-styles">\r\n        <a href="#imageBlockCollapse"\r\n            class=""\r\n            data-parent="#accordion"\r\n            data-toggle="collapse"\r\n            id="galleryToggler">\r\n            <div class="panel-heading">\r\n                <h6 class="panel-title">\r\n                    <i class="material-icons icon-image">image</i>\r\n                    '+((t=e.text.ui.gallery)==null?"":t)+'\r\n                    <i class="material-icons arrow_down">keyboard_arrow_down</i>\r\n                </h6>\r\n            </div>\r\n        </a>\r\n        <div class="rp-panel-collapse panel-collapse collapse" id="imageBlockCollapse" style="">\r\n            <div class="panel-body" id="galleryContent"></div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div id="logHistory">\r\n    <div id="historyWell"></div>\r\n    <div id="defectWell" class="clearfix"></div>\r\n    <div id="activityWell"></div>\r\n</div>\r\n\r\n<div class="container-fluid rp-margin-reset" style="border: none;">\r\n    <div id="logFilter" class="pull-left"></div>\r\n    <div id="ScreenshotsFilter" class="pull-left"></div>\r\n    <!-- title -->\r\n    <div class="clearfix"></div>\r\n    <div class="row rp-table-thead hidden-xs fixed_table_header">\r\n        <div class="col-sm-10">\r\n            <div class="input-filter form-group" id="messageFilterWrapper">\r\n                <input type="text"\r\n                    class="rp-input-search favorites-name-filter"\r\n                    id="messageFilter"\r\n                    name="messageFilter"\r\n                    placeholder="'+((t=e.text.launchesHeaders.message)==null?"":t)+'"\r\n                    value="'+r(e.messageFilterValue||"")+'" />\r\n                <i class="material-icons">search</i>\r\n                <div class="error-hint help-inline" style="display:none;"></div>\r\n            </div>\r\n        </div>\r\n        <div class="col-sm-2">\r\n            <div id="sortByTime"\r\n                class="rp-table-th ASC"\r\n                data-sorter="time"\r\n                style="padding-left: 0;">\r\n                '+((t=e.text.launchesHeaders.time)==null?"":t)+'\r\n                <i class="material-icons arrow_up">keyboard_arrow_up</i>\r\n                <i class="material-icons arrow_down">keyboard_arrow_down</i>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <!-- ./title -->\r\n</div>\r\n',n},this.JST["tpl-logs-activity-panel"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="panel-group" id="accordion">\r\n    <div class="-panel panel-default panel-activity" ',e.items.length&&(n+='style="cursor: pointer;"'),n+='>\r\n        <div class="panel-heading">\r\n            <div class="row well-list"\r\n                ',e.items.length&&(n+='\r\n                    data-parent="#accordion" data-toggle="collapse" data-target="#collapseOne"\r\n                '),n+=">\r\n                ",e.items.length&&(n+='\r\n                    <span class="activity-list">\r\n                        <i class="material-icons">keyboard_arrow_down</i>\r\n                    </span>\r\n                '),n+='\r\n                <div class="col-xs-4 activity-user">\r\n                    <div class="activity-iconpd">\r\n                        <span class="user-reff">\r\n                            <span class="capitalize">\r\n                                ',e.user==e.last.userRef?n+='\r\n                                    <i class="material-icons you">person</i>\r\n                                    you\r\n                                ':n+='\r\n                                    <i class="material-icons">person</i>\r\n                                    '+r(e.last.fullUserName)+"\r\n                                ",n+="\r\n                            </span>\r\n                            <span>"+r(e.last.actionType)+"</span>\r\n                            <strong>"+r(e.last.field)+'</strong>\r\n                        </span>\r\n                        <span class="hoverFullTime">\r\n                            <span class="timeMoment timeHover">'+r(e.last.momentTime)+'</span>\r\n                            <span class="time-full timeHover hidden">\r\n                                at <span class="small">'+r(e.last.fullTime)+'</span>\r\n                            </span>\r\n                            <span class="time-ms hidden">'+r(e.last.lastModifiedDate)+'</span>\r\n                        </span>\r\n                    </div>\r\n                </div>\r\n                <div class="col-xs-8">\r\n                    ',_.each(e.last.history,function(r,i){n+='\r\n                    <div class="row activity-str">\r\n                        <div class="col-xs-6">\r\n                            <div class="actyvity-val">\r\n                                ';if(e.last.field.indexOf("ticketId")>-1){n+="\r\n                                    ";var s=r.oldValue?r.oldValue.split(","):[],o=s.length;n+="\r\n                                    ",_.each(s,function(r,i){n+="\r\n                                        "+((t=e.renderTicket(r,e.url))==null?"":t)+""+((t=i<o-1?",":"")==null?"":t)+"\r\n                                    "}),n+="\r\n                                "}else n+="\r\n                                    "+((t=e.textile(r.oldValue.replace("*IssueDescription:*","<br>*IssueDescription:*")).escapeScript())==null?"":t)+"\r\n                                ";n+='\r\n                            </div>\r\n                        </div>\r\n                        <div class="col-xs-6">\r\n                            <div class="actyvity-val">\r\n                                ';if(e.last.field.indexOf("ticketId")>-1){n+="\r\n                                    ";var s=r.newValue?r.newValue.split(","):[],o=s.length;n+="\r\n                                    ",_.each(s,function(r,i){n+="\r\n                                        "+((t=e.renderTicket(r,e.url))==null?"":t)+""+((t=i<o-1?",":"")==null?"":t)+"\r\n                                    "}),n+="\r\n                                "}else n+="\r\n                                "+((t=e.textile(r.newValue.replace("*IssueDescription:*","<br>*IssueDescription:*")).escapeScript())==null?"":t)+"\r\n                                ";n+='\r\n                            </div>\r\n                        </div>\r\n                        <i class="material-icons">keyboard_arrow_right</i>\r\n                    </div>\r\n                    '}),n+="\r\n                </div>\r\n            </div>\r\n        </div>\r\n        ",e.items.length&&(n+='\r\n        <div id="collapseOne" class="panel-collapse collapse">\r\n            <ul class="panel-body well-list media-list media-list-hover">\r\n                ',_.each(e.items,function(i){n+='\r\n                <li data-member="default" class="team_member_row row">\r\n                    <div class="col-xs-4">\r\n                        <div class="activity-iconpd">\r\n                                <span class="user-reff">\r\n                                    <span class="capitalize">\r\n                                    ',e.user==i.userRef?n+='\r\n                                        <i class="material-icons you">person</i>\r\n                                        you\r\n                                    ':n+='\r\n                                        <i class="material-icons">person</i>\r\n                                        '+r(i.fullUserName)+"\r\n                                    ",n+="\r\n                                    </span>\r\n                                    <span> "+r(i.actionType)+"</span><strong> "+r(i.field)+'</strong>\r\n                                </span>\r\n                                <span class="hoverFullTime">\r\n                                    <span class="timeMoment timeHover">'+r(i.momentTime)+'</span>\r\n                                    <span class="time-full timeHover hidden">\r\n                                        at <span class="small">'+r(i.fullTime)+'</span>\r\n                                    </span>\r\n                                    <span class="time-ms hidden">'+r(i.lastModifiedDate)+'</span>\r\n                                </span>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-xs-8">\r\n                        ',_.each(i.history,function(r,s){n+='\r\n                        <div class="row activity-str">\r\n                            <div class="col-xs-6">\r\n                                <div class="actyvity-val">\r\n                                    ';if(i.field.indexOf("ticketId")>-1){n+="\r\n                                        ";var o=r.oldValue?r.oldValue.split(","):[],u=o.length;n+="\r\n                                        ",_.each(o,function(r,i){n+="\r\n                                            "+((t=e.renderTicket(r,e.url))==null?"":t)+""+((t=i<u-1?",":"")==null?"":t)+"\r\n                                        "}),n+="\r\n                                    "}else n+="\r\n                                    "+((t=e.textile(r.oldValue.replace("*IssueDescription:*","<br>*IssueDescription:*")).escapeScript())==null?"":t)+"\r\n                                    ";n+='\r\n                                </div>\r\n                            </div>\r\n                            <div class="col-xs-6">\r\n                                <div class="actyvity-val">\r\n                                    ';if(i.field.indexOf("ticketId")>-1){n+="\r\n                                        ";var o=r.newValue?r.newValue.split(","):[],u=o.length;n+="\r\n\r\n                                        ",_.each(o,function(r,i){n+="\r\n                                            "+((t=e.renderTicket(r,e.url))==null?"":t)+""+((t=i<u-1?",":"")==null?"":t)+"\r\n                                        "}),n+="\r\n                                    "}else n+="\r\n                                    "+((t=e.textile(r.newValue.replace("*IssueDescription:*","<br>*IssueDescription:*")).escapeScript())==null?"":t)+"\r\n                                    ";n+='\r\n                                </div>\r\n                            </div>\r\n                            <i class="material-icons">keyboard_arrow_right</i>\r\n                        </div>\r\n                        '}),n+="\r\n                    </div>\r\n                </li>\r\n                "}),n+="\r\n            </ul>\r\n        </div>\r\n        "),n+="\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-logs-defect-control"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="historyLinePanel" id="historyLinePanel">\r\n    <div class="progress">\r\n        <div class="history-cont container-fluid">\r\n            ',_.each(e.items,function(i,s){n+="\r\n                ";var o=_.find(i.items,function(t){return t.id==e.id});n+='\r\n                <div class="progress-bar '+r(e.getCurrentLogTypeCls(i,e.id))+'" data-id="'+r(o?o.id:i.items[0]?i.items[0].id:"")+'" style="width:'+r(i.width)+'%;">\r\n                    '+((t=e.util.templates(e.defectItemTpl,{item:i,defectTypes:e.defectTypes,getIssueType:e.util.getIssueType,step:e.getHistoryLog(i,e.id),logId:e.id,textile:e.textile}))==null?"":t)+"\r\n                </div>\r\n            "}),n+="\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-logs-defect-item"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.step||{},u=o.id===e.logId?!0:e.item.items.length===1;n+='\r\n\r\n<span class="small">#'+r(e.item.launch)+'</span>\r\n<span class="text-center empty">\r\n    <i class="material-icons clear">clear</i>\r\n</span>\r\n';if(!_.isEmpty(o)&&o.issue&&u){n+="\r\n    ";var a=e.defectTypes.getDefectType(o.issue.issue_type);n+="\r\n    ",a&&(n+='\r\n    <span class="step-tooltip"\r\n        data-toggle="tooltip"\r\n        data-placement="top"\r\n        title="<div class=\'text-left\'>\r\n            <span data-launch=\''+r(e.item.launch)+"'\r\n                class='badge pull-center "+r(a.typeRef)+"'\r\n                style='background: "+r(a.color)+"'>\r\n                "+r(a.longName)+"\r\n            </span>\r\n            ",o.issue.comment&&(n+="\r\n                <br>\r\n                "+r(e.textile(o.issue.comment.setMaxLength(100)).escapeScript())+"\r\n            "),n+="\r\n            </div>\">\r\n        <span data-launch='"+r(e.item.launch)+"'\r\n            class='badge pull-center "+r(a.typeRef)+"'\r\n            style='background: "+r(a.color)+"'>\r\n            "+r(a.shortName)+"\r\n        </span>\r\n\r\n        ",o.issue.comment&&(n+='\r\n            <span data-ticket-id="'+r(o.issue.ticketId)+'"\r\n                data-system-id="'+r(o.issue.systemId)+'"\r\n                class="line-icon">\r\n                <i class="material-icons">chat</i>\r\n            </span>\r\n        '),n+="\r\n\r\n        ",o.issue.externalSystemIssues&&o.issue.externalSystemIssues.length&&(n+='\r\n            <span class="line-icon">\r\n                <i class="material-icons">link</i>\r\n            </span>\r\n        '),n+="\r\n    </span>\r\n    "),n+="\r\n"}return n+='\r\n<span class="chevron"></span>\r\n',n},this.JST["tpl-logs-el-content"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="item '+r(e.contentData.cls)+'">\r\n    <a href="'+((t=e.contentData.src)==null?"":t)+'" target="_blank" title="'+((t=e.text.ui.clickOpenNewWindow)==null?"":t)+'">'+((t=e.buffer)==null?"":t)+'</a>\r\n    <div class="carousel-caption" title="'+((t=e.text.ui.jumpToMessage)==null?"":t)+'"\r\n         data-scroll-to="',e.img.thumbnail_id?n+=(t=e.img.thumbnail_id)==null?"":t:n+=(t=e.img.id)==null?"":t,n+='">\r\n        <p>'+r(e.contentData.message)+'</p>\r\n        <span class="arrow"><span class="glyphicon glyphicon-chevron-down icon-white"></span></span>\r\n    </div>\r\n</div>',n},this.JST["tpl-logs-gallery"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="">\r\n    <div id="gallery" class="container collapse">\r\n        <div id="myCarousel" class="carousel slide" data-interval="0">\r\n            <ol class="carousel-indicators">\r\n                ',_.each(e.content,function(e,t,i){n+='\r\n                <li class="'+r(e.cls)+'" data-slide-to="'+r(t)+'" data-target="#myCarousel"></li>\r\n                '}),n+='\r\n            </ol>\r\n            <div class="carousel-inner">\r\n                ',_.each(e.content,function(e){n+="\r\n                "+((t=e.elContent)==null?"":t)+"\r\n                "}),n+='\r\n            </div>\r\n            <a data-slide="prev" href="#myCarousel" class="left carousel-control">\r\n                <span class="glyphicon glyphicon-chevron-left"></span>\r\n            </a>\r\n            <a data-slide="next" href="#myCarousel" class="right carousel-control">\r\n                <span class="glyphicon glyphicon-chevron-right"></span>\r\n            </a>\r\n        </div>\r\n    </div>\r\n    <ul id="gallery-breadcrumb" class="breadcrumb" title="'+((t=e.text.ui.clickToggleGallery)==null?"":t)+'">\r\n        <li>\r\n            <a class="gallery-collapser collapsed" data-toggle="collapse" data-target="#gallery">\r\n                <i class="material-icons">image</i>\r\n                '+((t=e.text.ui.gallery)==null?"":t)+"\r\n            </a>\r\n        </li>\r\n    </ul>\r\n</div>",n},this.JST["tpl-logs-test-nav"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div id="TestItemsNav">\r\n    <nav class="log-testitems-nav row">\r\n        <ul class="pager pull-right">\r\n            <li><a ',e.prev?n+=' title="'+((t=e.text.logs.prevTestItem)==null?"":t)+'" href="'+((t=e.prev)==null?"":t)+'"':n+='class="disabled"',n+=">&laquo;</a></li>\r\n            <li><a ",e.next?n+=' title="'+((t=e.text.logs.nextTestItem)==null?"":t)+'" href="'+((t=e.next)==null?"":t)+'"':n+='class="disabled"',n+=">&raquo;</a></li>\r\n        </ul>\r\n    </nav>\r\n</div>",n},this.JST["tpl-404"]=function(e){var t,n="",r=_.escape;return n+='<div class="notfound-body">\r\n    <div class="notfound-content">\r\n        <h2>'+((t=e.text.notFound.oops)==null?"":t)+"</h2>\r\n        <p>"+((t=e.text.notFound.spelling)==null?"":t)+"</p>\r\n        <p>"+((t=e.text.notFound.or)==null?"":t)+"</p>\r\n        <p>"+((t=e.text.notFound.permission)==null?"":t)+'</p>\r\n        <p><a href="'+((t=e.url)==null?"":t)+'">'+((t=e.text.ui.backHome)==null?"":t)+"</a></p>\r\n    </div>\r\n</div>",n},this.JST["tpl-task-list"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<ul class="main-menu">\r\n    ',_.each(menu,function(e){n+='\r\n    <li class="menu-item"><a href="'+r(e.url)+'">'+r(e.name)+"</a></li>\r\n    "}),n+="\r\n</ul>\r\n<li><strong>"+r(name)+"</strong> - "+r(date)+"</li>",n},this.JST["tpl-members-action-header"]=function(e){var t,n="",r=_.escape;return n+='<div class="col-md-2 rp-custom-col">\r\n    <div class="rp-table-th">'+((t=e.text.project.proposedRole)==null?"":t)+'</div>\r\n</div>\r\n<div class="col-md-3 rp-custom-col">\r\n    <div class="rp-table-th">'+((t=e.text.project.projectRole)==null?"":t)+'</div>\r\n</div>\r\n<div class="col-md-1 rp-custom-col th-title-action">\r\n    <div class="rp-table-th">'+((t=e.text.ui.action)==null?"":t)+"</div>\r\n</div>",n},this.JST["tpl-members-action"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o,u,a,f;o=e.member,u=e.isAdmin,a=o.assigned_projects[e.projectId].projectRole,f=e.canEdit(o,a),n+='\r\n<div class="col-md-2 clearfix">\r\n    <div class="rp-info rp-info-padding">\r\n        '+((t=o.assigned_projects[e.projectId].proposedRole)==null?"":t)+'\r\n    </div>\r\n</div><div class="col-md-3 clearfix">\r\n    ';if(u)n+='\r\n        <div class="col-sm-12 rp-info rp-info-padding admin-role">\r\n            '+((t=e.text.admin.privileges)==null?"":t)+"\r\n        </div>\r\n    ";else{n+='\r\n    <div class="rp-btn-group col-sm-10 to-80-width rp-info rp-info-padding select-role">\r\n        <button data-value="'+((t=a)==null?"":t)+'"\r\n            type="button"\r\n            class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle '+((t=e.getColorClass&&e.getColorClass(o))==null?"":t)+'"\r\n            data-toggle="dropdown"\r\n            '+((t=!f||e.isDefaultProject?disabled="disabled":"")==null?"":t)+'>\r\n            <span class="select-value">'+((t=e.roles[a])==null?"":t)+'</span>\r\n            <span class="rp-caret"></span>\r\n        </button>\r\n        ';if(f&&!e.isDefaultProject){n+='\r\n        <ul class="dropdown-menu">\r\n            ';var l=0;n+="\r\n            ",_.forEach(e.roles,function(r,i){n+="\r\n                ";var s=l>e.projectRoleIndex?"disabled":"";n+='\r\n                    <li class="'+((t=s)==null?"":t)+'">\r\n                        <a href="#"\r\n                            class="project-roles '+((t=a===i?"active":"")==null?"":t)+" "+((t=s)==null?"":t)+'"\r\n                            data-value="'+((t=i)==null?"":t)+'">\r\n                            '+((t=r)==null?"":t)+"\r\n                        </a>\r\n                    </li>\r\n                ",l+=1,n+="\r\n            "}),n+="\r\n        </ul>\r\n        "}n+='\r\n    </div>\r\n    <div class="rp-btn-group col-sm-2 rp-info-padding action-info">\r\n        ',u&&(n+='\r\n            <i class="material-icons" title="'+((t=e.text.ui.lockedTitle)==null?"":t)+'">lock</i>\r\n        '),n+="\r\n        ",!f&&!e.isDefaultProject&&(n+='\r\n            <i class="material-icons" title="'+((t=e.text.members.lockedPermissionsTitle)==null?"":t)+'">lock</i>\r\n        '),n+="\r\n    </div>\r\n    "}return n+='\r\n</div><div class="col-md-1 clearfix">\r\n    <div class="rp-info rp-info-padding memrbers-actions">\r\n        ',!e.unassignedLock(o)&&!e.isOwnerPersonalProject&&(n+="\r\n            ",!e.isDefaultProject&&f&&(n+='\r\n                <button class="rp-btn rp-btn-default rp-button-with-icon member-action" \r\n                    href="#" data-id="'+((t=o.userId)==null?"":t)+'"\r\n                    title="'+((t=e.text.members.unAssignTitle)==null?"":t)+'">\r\n                    <i class="rp-icons rp-icons-unassign"></i>\r\n                    <span class="hidden-xs rp-btn-val">'+((t=e.text.members.unAssign)==null?"":t)+"</span>\r\n                </button>\r\n            "),n+="\r\n        "),n+="\r\n    </div>\r\n</div>",delete e.isOwnerPersonalProject,delete e.member,delete e.isAdmin,n},this.JST["tpl-members-add"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="form-horizontal add-member-form-wrapper">\r\n    <form id="addMemberForm" name="addMemberForm">\r\n        <div class="rp-form-group clearfix">\r\n            <div class="rp-custom-col">\r\n                <h4 class="common-title">\r\n                    ',e.type=="users"?n+="\r\n                    "+((t=e.text.admin.addNewUser)==null?"":t)+"\r\n                    ":n+="\r\n                    "+((t=e.text.members.addMemberToProject)==null?"":t)+"\r\n                    ",n+='\r\n                </h4>\r\n            </div>\r\n        </div>        <div class="rp-form-group clearfix">\r\n            <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col control-label obligatory-field" for="username">\r\n                '+((t=e.text.forms.login)==null?"":t)+'\r\n            </label>\r\n            <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n                <input id="username" name="username" type="text" value="" class="rp-input-default rp-width-100 form-control"/>\r\n                <div class="error-bottom">\r\n                    <div class="help-inline"></div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n        </div>        <div class="rp-form-group clearfix">\r\n            <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col control-label obligatory-field" for="fullName">\r\n                '+((t=e.text.forms.fullName)==null?"":t)+'\r\n            </label>\r\n            <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n                <input id="fullName" name="fullName" type="text" value="" class="rp-input-default rp-width-100 form-control"/>\r\n                <div class="error-bottom">\r\n                    <div class="help-inline"></div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n        </div>        <div class="rp-form-group clearfix">\r\n            <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col control-label obligatory-field" for="email">\r\n                '+((t=e.text.forms.email)==null?"":t)+'\r\n            </label>\r\n            <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n                <input id="email" name="email" type="text" value="" class="rp-input-default rp-width-100 form-control"/>\r\n                <div class="error-bottom">\r\n                    <div class="help-inline"></div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n        </div>        ',e.type=="users"&&(n+='\r\n        <div class="rp-form-group clearfix">\r\n            <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col control-label obligatory-field" for="accountRole">\r\n                '+((t=e.text.forms.accountRole)==null?"":t)+'\r\n            </label>\r\n            <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n                <div class="rp-btn-group rp-width-100 btn-group input-group">\r\n                    <button id="accountRole" name="accountRole"\r\n                        data-value="'+((t=e.defaultAccountRole)==null?"":t)+'"\r\n                        data-defaultvalue="'+((t=e.defaultAccountRole)==null?"":t)+'"\r\n                        type="button"\r\n                        class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                        data-toggle="dropdown">\r\n                        <span class="select-value">'+((t=e.defaultAccountRole)==null?"":t)+'</span>\r\n                        <span class="rp-caret"></span>\r\n                    </button>\r\n                    <ul class="dropdown-menu">\r\n                        ',_.each(e.accountRoles,function(e){n+='\r\n                        <li><a href="#" data-value="'+((t=e)==null?"":t)+'">'+((t=e.split("_").join(" "))==null?"":t)+"</a></li>\r\n                        "}),n+='\r\n                    </ul>\r\n                </div>\r\n                <div class="error-bottom">\r\n                    <div class="help-inline admin-privileges">\r\n                        '+((t=e.text.forms.adminPrivileges)==null?"":t)+'\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n        </div>\r\n        '),n+="        ",e.type=="users"&&(n+='\r\n        <div class="rp-form-group clearfix">\r\n            <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col control-label obligatory-field" for="project">\r\n                '+((t=e.text.forms.project)==null?"":t)+'\r\n            </label>\r\n            <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n                <select id="project" name="project" class="select2-control">\r\n                    <option value="" style="display:none;"></option>\r\n                </select>\r\n                <div class="error-bottom">\r\n                    <div class="help-inline"></div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n        </div>\r\n        '),n+='\r\n        <div class="rp-form-group clearfix">\r\n            <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col control-label obligatory-field" for="projectRole">\r\n                '+((t=e.text.forms.projectRole)==null?"":t)+'\r\n            </label>\r\n            <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n                <div class="rp-btn-group rp-width-100">\r\n                    <button id="projectRole" name="projectRole"\r\n                        '+((t=e.isDefaultProject?disabled="disabled":"")==null?"":t)+'\r\n                        data-value="'+((t=e.defaultProjectRole)==null?"":t)+'"\r\n                        data-defaultvalue="'+((t=e.defaultProjectRole)==null?"":t)+'"\r\n                        type="button"\r\n                        class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                        data-toggle="dropdown">\r\n                        <span class="select-value">'+((t=e.defaultProjectRole)==null?"":t)+'</span>\r\n                        <span class="rp-caret"></span>\r\n                    </button>\r\n                    ',e.isDefaultProject||(n+='\r\n                    <ul class="dropdown-menu">\r\n                        ',_.each(e.roles,function(e){n+='\r\n                        <li><a href="#" data-value="'+((t=e)==null?"":t)+'">'+((t=e.split("_").join(" "))==null?"":t)+"</a></li>\r\n                        "}),n+="\r\n                    </ul>\r\n                    "),n+='\r\n                </div>\r\n            </div>\r\n            <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n        </div>        <div class="rp-form-group clearfix">\r\n            <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col control-label obligatory-field" for="password">\r\n                '+((t=e.text.forms.password)==null?"":t)+'\r\n            </label>\r\n            <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n                <input id="password" name="password" value="" type="text" class="rp-input-default rp-width-100 form-control"/>\r\n                <div class="error-bottom">\r\n                    <div class="help-inline"></div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n        </div>        <div class="rp-form-group clearfix generate_password-row">\r\n            <div class="col-md-3 col-sm-4 col-xs-12 rp-custom-col"></div>\r\n            <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col to-gen-pass">\r\n                <a href="#" class="rp-blue-link-undrl rp-link" id="generate_password">\r\n                    '+((t=e.text.forms.genPassword)==null?"":t)+'\r\n                </a>\r\n            </div>\r\n            <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n        </div>        <div class="rp-form-group alert-block clearfix">\r\n            <div class="col-sm-7 col-md-7">\r\n                <div id="success-message" class="alert alert-success pull-right" role="alert" style="display: none;">\r\n                    '+((t=e.text.members.successAddUser)==null?"":t)+'\r\n                </div>\r\n            </div>\r\n        </div>        <div class="rp-form-group clearfix">\r\n            <div class="col-md-7 col-sm-12 col-xs-12 rp-custom-col">\r\n                <button type="submit" class="rp-btn rp-btn-submit float-right" id="addUserButton">\r\n                    '+((t=e.text.ui.add)==null?"":t)+'\r\n                </button>\r\n                <button style="display: none;" type="button" disabled="disabled" class="rp-btn rp-btn-submit float-right" id="viewEmail">\r\n                    '+((t=e.text.ui.viewEmail)==null?"":t)+'\r\n                </button>\r\n                <button style="display: none;" type="button" disabled="disabled" class="rp-btn rp-btn-cancel float-right" id="cancelForm">\r\n                    '+((t=e.text.ui.backForm)==null?"":t)+'\r\n                </button>\r\n            </div>\r\n            <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n        </div>\r\n    </form>\r\n</div>',n},this.JST["tpl-members-email-modal"]=function(e){var t,n="",r=_.escape;return n+='<div class="form-horizontal members-confirm">\r\n    <div class="confirm-top">\r\n        <span>'+((t=e.text.members.linkTo)==null?"":t)+" "+((t=e.text.ui.toolname)==null?"":t)+' <a href="'+r(e.link)+'" class="rp-blue-link-undrl">'+r(e.link)+'</a></span>\r\n    </div>\r\n    <div class="form-group">\r\n        <label class="col-sm-3 control-label">'+((t=e.text.forms.login)==null?"":t)+':</label>\r\n        <div class="col-sm-3">\r\n            <span class="confirm-line">'+r(e.data.login)+'</span>\r\n        </div>\r\n    </div>    <div class="form-group">\r\n        <label class="col-sm-3 control-label">'+((t=e.text.forms.fullName)==null?"":t)+':</label>\r\n        <div class="col-sm-3">\r\n            <span class="confirm-line">'+r(e.data.full_name)+'</span>\r\n        </div>\r\n    </div>    <div class="form-group">\r\n        <label class="col-sm-3 control-label">'+((t=e.text.forms.email)==null?"":t)+':</label>\r\n        <div class="col-sm-3">\r\n            <span class="confirm-line">'+r(e.data.email)+'</span>\r\n        </div>\r\n    </div>\r\n    \r\n    <div class="form-group">\r\n        <label class="col-sm-3 control-label">'+((t=e.text.forms.password)==null?"":t)+':</label>\r\n        <div class="col-sm-3">\r\n            <span class="confirm-line">'+r(e.data.password)+"</span>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-members-header"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div id="headerBar" class="clearfix">\r\n    <ul class="rp-nav-left">        ',n+='        <li class="title-holder" id="assignedTitle">\r\n            <span class="header-alike">'+((t=e.text.members.assignedMembers)==null?"":t)+'</span>\r\n        </li>\r\n        <li class="title-holder" id="addTitle">\r\n            <span class="header-alike">'+((t=e.text.members.addMember)==null?"":t)+'</span>\r\n        </li>\r\n        <li class="title-holder" id="inviteTitle">\r\n            <span class="header-alike">'+((t=e.text.members.inviteMember)==null?"":t)+'</span>\r\n        </li>\r\n        <li class="title-holder" id="assignTitle">\r\n            <span class="header-alike">'+((t=e.text.members.assignTitle)==null?"":t)+"</span>\r\n        </li>\r\n    </ul>\r\n</div>",n},this.JST["tpl-members-invite"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="form-horizontal">\r\n    <form id="inviteMemberForm" name="inviteMemberForm" class="clearfix">\r\n        <div class="rp-form-group clearfix">\r\n            <div class="rp-custom-col">\r\n                <h4 class="common-title">\r\n                ',e.type=="users"?n+="\r\n                "+((t=e.text.admin.inviteNewUser)==null?"":t)+"\r\n                ":n+="\r\n                "+((t=e.text.members.inviteMemberToProject)==null?"":t)+"\r\n                ",n+='\r\n                </h4>\r\n            </div>\r\n        </div>\r\n        <div id="inviteForm">\r\n            <div class="rp-form-group clearfix">\r\n                <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col control-label obligatory-field" for="email">\r\n                    '+((t=e.text.forms.email)==null?"":t)+'\r\n                </label>\r\n                <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n                    <input id="email" name="email" type="text" value=""\r\n                        class="rp-input-default rp-width-100 form-control" />\r\n                    <div class="error-bottom">\r\n                        <div class="help-inline"></div>\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n            </div>            ',e.type=="users"&&(n+='\r\n                <div class="rp-form-group clearfix">\r\n                    <label for="project"\r\n                        class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col control-label obligatory-field">\r\n                        '+((t=e.text.forms.project)==null?"":t)+'\r\n                    </label>\r\n                    <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n                        <select id="project" name="project" class="select2-control">\r\n                            <option value="" style="display:none;"></option>\r\n                        </select>\r\n                        <div class="error-bottom">\r\n                            <div class="help-inline"></div>\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n                </div>\r\n            '),n+='            <div class="rp-form-group clearfix">\r\n                <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col obligatory-field"\r\n                    for="projectRole">\r\n                    '+((t=e.text.forms.projectRole)==null?"":t)+'\r\n                </label>\r\n                <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n                    <div class="rp-btn-group rp-width-100">\r\n                        <button type="button"\r\n                            id="projectRole"\r\n                            data-defaultvalue="'+((t=e.defaultProjectRole)==null?"":t)+'"\r\n                            data-value="'+((t=e.defaultProjectRole)==null?"":t)+'"\r\n                            '+((t=e.isDefaultProject?disabled="disabled":"")==null?"":t)+'\r\n                            class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                            data-toggle="dropdown">\r\n                            <span class="select-value">'+((t=e.roles[1])==null?"":t)+'</span>\r\n                            <span class="rp-caret"></span>\r\n                        </button>\r\n                        ',e.isDefaultProject||(n+='\r\n                        <ul class="dropdown-menu">\r\n                            ',_.each(e.roles,function(r){n+='\r\n                                <li>\r\n                                    <a href="#" class="'+((t=e.isLead&&r==e.memberOption?"disabled-option":"")==null?"":t)+'" data-value="'+((t=r)==null?"":t)+'">\r\n                                        '+((t=r.split("_").join(" "))==null?"":t)+"\r\n                                    </a>\r\n                                </li>\r\n                            "}),n+="\r\n                        </ul>\r\n                        "),n+='\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n            </div>            <div class="rp-form-group clearfix">\r\n                <div class="col-md-7 col-sm-12 col-xs-12 rp-custom-col">\r\n                    <button type="submit" class="rp-btn rp-btn-submit float-right" id="sendInvite">\r\n                        '+((t=e.text.ui.sendInvite)==null?"":t)+'\r\n                    </button>\r\n                </div>\r\n                <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n            </div>\r\n        </div>        <div id="linkForm" style="display: none;">\r\n            <div class="rp-form-group clearfix">\r\n                <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col">\r\n                    '+((t=e.text.members.invitationSent)==null?"":t)+'\r\n                </label>\r\n                <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n                    <div style="display: block">\r\n                        <span class="rp-invite-email" id="inviteEmail"></span>\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n            </div>            <div class="rp-form-group clearfix">\r\n                <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col" for="email">\r\n                    '+((t=e.text.forms.linkInvitation)==null?"":t)+'\r\n                </label>\r\n                <div class="col-md-9 col-sm-8 col-xs-12 rp-custom-col">\r\n                    <input id="inviteLink"\r\n                        name="inviteLink"\r\n                        readonly="readonly"\r\n                        type="text"\r\n                        class="rp-input-default rp-width-100 form-control"\r\n                        value="" />\r\n                </div>\r\n                <div class="hidden-md hidden-sm hidden-xs rp-custom-col"></div>\r\n            </div>            <div class="rp-form-group clearfix">\r\n                <div class="col-md-3 col-sm-4 hidden-xs rp-custom-col"></div>\r\n                <div class="col-md-9 col-sm-8 col-xs-12 rp-custom-col">\r\n                    <button type="button"\r\n                        id="cancelInvite"\r\n                        style="display: none;"\r\n                        class="rp-link float-left xs-float-right">\r\n                        '+((t=e.text.ui.backForm)==null?"":t)+"\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </form>\r\n</div>",n},this.JST["tpl-members-list"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return _.forEach(e.members,function(r){n+="\r\n    ";var i=e.util.isAdmin(r);n+='\r\n    <div class="row rp-table-row" data-user="'+((t=r.userId)==null?"":t)+'">\r\n        <div class="col-md-4 clearfix">\r\n            <div class="rp-member-wrap">\r\n                <div class="rp-member-img float-left">\r\n                    <img class="rp-member-avatar" src="'+((t=e.util.updateImagePath(e.imageRoot+r.userId))==null?"":t)+'" />\r\n                </div>\r\n                <div class="rp-member-body clearfix">\r\n                    <div class="user-name text-wrapper ">\r\n                        <p class="member-name">\r\n                            ';if(r.full_name){n+="\r\n                                ";var s=e.searchString?e.textWrapper(r.full_name,e.searchString):r.full_name;n+="\r\n                                <span>"+((t=s)==null?"":t)+"</span>\r\n                            "}else{n+="\r\n                                ";var o=e.searchString?e.textWrapper(r.userId,e.searchString):r.userId;n+="\r\n                                <span>"+((t=o)==null?"":t)+"</span>\r\n                            "}n+="\r\n                            ",e.isGrandAdmin?(n+="\r\n                                ",i?(n+="\r\n                                    ",e.util.isYou(r)?n+='\r\n                                        <span class="label-ellipse label-danger label-size-md">\r\n                                            '+((t=e.text.ui.admin)==null?"":t)+"\r\n                                        </span>\r\n                                    ":n+='\r\n                                        <a href="#"\r\n                                            class="label-ellipse label-danger label-size-md change-role"\r\n                                            data-id="'+((t=r.userId)==null?"":t)+'">\r\n                                                '+((t=e.text.ui.admin)==null?"":t)+"\r\n                                        </a>\r\n                                    ",n+="\r\n                                "):n+='\r\n                                    <a href="#"\r\n                                        class="label-ellipse label-grey label-hover label-size-md change-role"\r\n                                        data-id="'+((t=r.userId)==null?"":t)+'">\r\n                                            '+((t=e.text.ui.makeAdmin)==null?"":t)+"\r\n                                    </a>\r\n                                ",n+="\r\n                            "):(n+="\r\n                                ",i&&(n+='\r\n                                    <span class="label-ellipse label-danger label-size-md">\r\n                                        '+((t=e.text.ui.admin)==null?"":t)+"\r\n                                    </span>\r\n                                "),n+="\r\n                            "),n+="\r\n                            ",e.util.isYou(r)&&(n+='\r\n                                <span class="label-ellipse label-green label-success label-size-md">\r\n                                    '+((t=e.text.ui.you)==null?"":t)+"\r\n                                </span>\r\n                            "),n+="\r\n                        </p>\r\n                        ";if(r.full_name){n+='\r\n                        <p class="member-id">\r\n                            ';var o=e.searchString?e.textWrapper(r.userId,e.searchString):r.userId;n+="\r\n                            <span>"+((t=o)==null?"":t)+"</span>\r\n                            ",e.isAdmin&&(n+='\r\n                                <span class="label-ellipse label-danger label-size-md">\r\n                                    '+((t=e.text.ui.admin)==null?"":t)+"\r\n                                </span>\r\n                            "),n+="\r\n                        </p>\r\n                        "}n+="\r\n                        ";if(r.email){n+='\r\n                        <p class="member-email">\r\n                            <a href="mailto:'+((t=r.email)==null?"":t)+'" class="rp-link">\r\n                                ';var u=e.searchString?e.textWrapper(r.email,e.searchString):r.email;n+='\r\n                                <span class="email-link">'+((t=u)==null?"":t)+"</span>\r\n                            </a>\r\n                        </p>\r\n                        "}n+='\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="col-md-2 clearfix">\r\n            <div class="rp-info rp-info-padding show-time">\r\n                ';var a=e.util.dateFormat(r.last_login);n+='\r\n                <span class="from-now">'+((t=e.util.fromNowFormat(a))==null?"":t)+'</span>\r\n                <span class="exact-time">'+((t=a)==null?"":t)+"</span>\r\n            </div>\r\n        </div>\r\n        ",e.isAdmin=i,e.member=r,e.isOwnerPersonalProject=e.isPersonalProjectOwner(r),n+="\r\n        "+((t=e.util.templates(e.actionTpl,e))==null?"":t)+"    </div>\r\n"}),n+="\r\n",e.members.length||(n+='\r\n    <div class="col-sm-12">\r\n        <h3 class="title-no-data text-center">\r\n            <i class="rp-icons rp-icons-warning"></i>\r\n            <span class="warning">'+((t=e.text.infoMessages.noResults)==null?"":t)+"</span>\r\n        </h3>\r\n    </div>\r\n"),n+="\r\n",n},this.JST["tpl-members-navigation"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="container-fluid">\r\n    <div class="row">\r\n        <ul class="nav nav-tabs nav-tabs-custom" role="tablist">\r\n            <li role="presentation"\r\n                class="'+((t=!e.query||e.query==="assigned"?"active":"")==null?"":t)+'">\r\n                <a href="#',e.adminPage&&(n+="administrate/projects/"),n+=((t=e.projectId)==null?"":t)+'/members/assigned"\r\n                    data-target="#assignedMembers"\r\n                    aria-controls="home"\r\n                    role="tab"\r\n                    data-toggle="tab"\r\n                    class="tab"\r\n                    data-query="assigned">\r\n                    '+((t=e.text.admin.assigned)==null?"":t)+"\r\n                </a>\r\n            </li>\r\n            ",e.canManage&&(n+="\r\n                ",e.hideAddBlock!==!0&&(n+='\r\n                <li role="presentation"\r\n                    class="'+((t=e.query==="add"?"active":"")==null?"":t)+'">\r\n                    <a href="#',e.adminPage&&(n+="administrate/projects/"),n+=((t=e.projectId)==null?"":t)+'/members/add"\r\n                        data-target="#addMember"\r\n                        aria-controls="profile"\r\n                        role="tab"\r\n                        data-toggle="tab"\r\n                        class="tab"\r\n                        data-query="add">\r\n                        '+((t=e.text.admin.add)==null?"":t)+"\r\n                    </a>\r\n                </li>\r\n                "),n+='\r\n                <li role="presentation"\r\n                    class="'+((t=e.query==="invite"?"active":"")==null?"":t)+'">\r\n                    <a href="#',e.adminPage&&(n+="administrate/projects/"),n+=((t=e.projectId)==null?"":t)+'/members/invite"\r\n                        data-target="#inviteMember"\r\n                        aria-controls="profile"\r\n                        role="tab"\r\n                        data-toggle="tab"\r\n                        class="tab"\r\n                        data-query="invite">\r\n                        '+((t=e.text.admin.invite)==null?"":t)+'\r\n                    </a>\r\n                </li>\r\n                <li role="presentation"\r\n                    class="'+((t=e.query==="assign"?"active":"")==null?"":t)+'">\r\n                    <a href="#',e.adminPage&&(n+="administrate/projects/"),n+=((t=e.projectId)==null?"":t)+'/members/assign"\r\n                        data-target="#assignMember"\r\n                        aria-controls="profile"\r\n                        role="tab"\r\n                        data-toggle="tab"\r\n                        class="tab"\r\n                        data-query="assign">\r\n                        '+((t=e.text.admin.assign)==null?"":t)+"\r\n                    </a>\r\n                </li>\r\n            "),n+='\r\n        </ul>\r\n        <div class="tab-content">\r\n            <div role="tabpanel" class="tab-pane form-horizontal '+((t=!e.query||e.query==="assigned"?"active":"")==null?"":t)+'" id="assignedMembers"></div>\r\n            ',e.canManage&&(n+='\r\n            <div role="tabpanel" class="tab-pane form-horizontal '+((t=e.query==="add"?"active":"")==null?"":t)+'" id="addMember"></div>\r\n            <div role="tabpanel" class="tab-pane form-horizontal '+((t=e.query==="invite"?"active":"")==null?"":t)+'" id="inviteMember"></div>\r\n            <div role="tabpanel" class="tab-pane form-horizontal '+((t=e.query==="assign"?"active":"")==null?"":t)+'" id="assignMember"></div>\r\n            '),n+="\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-members-shell"]=function(e){var t,n="",r=_.escape;return n+='<div class="all-users">\r\n    <div class="container-fluid rp-margin-reset rp-odd-even rp-members-list rp-table-hover">\r\n        <div class="row">\r\n            <div class="rp-table-thead-search clearfix">\r\n                <div class="col-md-12 col-sm-12 col-xs-12 rp-form-group clearfix">\r\n                    <label class="rp-control-label rp-table-th-title">\r\n                        <span>'+((t=e.text.members.titleAllMembers)==null?"":t)+'</span>\r\n                        (<span class="rp-members-qty">0</span>)\r\n                    </label>\r\n                    <div class="rp-input-search-wrap">\r\n                        <div class="input-filter form-group">\r\n                            <input type="text"\r\n                                class="rp-input-search favorites-name-filter form-control"\r\n                                id="userFilter"\r\n                                name="userFilter"\r\n                                placeholder="'+((t=e.grandAdmin?e.projectId?e.text.members.searchNameLogin:e.text.members.searchNameLoginEmail:e.text.members.searchName)==null?"":t)+'"\r\n                                value="'+r(e.nameFilterValue||"")+'" />\r\n                            <i class="material-icons">search</i>\r\n                            <div class="error-bottom">\r\n                                <div class="help-inline"></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>        <div class="row">\r\n            <div class="rp-table-thead rp-form-group clearfix">\r\n                <div class="col-md-4 col-sm-4 col-xs-4 rp-custom-col">\r\n                    <div class="rp-table-th">'+((t=e.text.members.titleNameLoginEmail)==null?"":t)+'</div>\r\n                </div>\r\n                <div class="col-md-2 col-sm-2 col-xs-2 rp-custom-col">\r\n                    <div class="rp-table-th">'+((t=e.text.admin.lastLogin)==null?"":t)+"</div>\r\n                </div>\r\n                "+((t=e.util.templates(e.actionTpl))==null?"":t)+'\r\n            </div>\r\n        </div>        <div id="membersList" class="clearfix">\r\n            <div id="popupLoader" class="admin-section">\r\n                <i class="material-icons loader-animation">refresh</i>\r\n            </div>\r\n        </div>    </div>\r\n    <div class="col-sm-12 project_list_paginate"></div>\r\n</div>',n},this.JST["tpl-permissions-map"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.id?"":"disabled";return n+='\r\n<ul class="rp-nav-right rp-nav-tabs" role="tablist">\r\n    ',e.btnVisible.btnProjectSettings!=0&&(n+='\r\n    <li role="presentation"\r\n        class="tab-settings float-right margin-left-10 rp-item-li-fix-height '+((t=e.tab==="settings"?"active":"")==null?"":t)+'">\r\n        <a href="#administrate/projects/'+((t=e.id)==null?"":t)+'/settings/general"\r\n           data-target="#projectSettings"\r\n           data-action="settings"\r\n           aria-controls="home"\r\n           role="tab"\r\n           data-toggle="tab"\r\n           class="rp-btn rp-btn-default-revers rp-button-with-icon tab">\r\n            <i class="material-icons">settings</i>\r\n            <span class="hidden-xs rp-btn-val">'+((t=e.text.ui.settings)==null?"":t)+"</span>\r\n        </a>\r\n    </li>\r\n    "),n+=" ",e.btnVisible.btnProjectMembers!=0&&(n+='\r\n    <li role="presentation"\r\n        class="tab-members float-right margin-left-10 rp-item-li-fix-height '+((t=e.tab==="members"?"active":"")==null?"":t)+" "+((t=o)==null?"":t)+'">\r\n        <a href="#administrate/projects/'+((t=e.id)==null?"":t)+'/members/assigned"\r\n           data-target="#projectUsers"\r\n           data-action="members"\r\n           aria-controls="profile"\r\n           role="tab"\r\n           data-toggle="tab"\r\n           class="rp-btn rp-btn-default-revers rp-button-with-icon tab '+((t=o)==null?"":t)+'">\r\n            <i class="rp-icons rp-icons-all-users"></i>\r\n            <span class="hidden-xs rp-btn-val">'+((t=e.text.admin.projectMembers)==null?"":t)+"</span>\r\n        </a>\r\n    </li>\r\n    "),n+="\r\n</ul>\r\n",n},this.JST["tpl-user-send-email"]=function(e){var t,n="",r=_.escape;return n+=((t=e.text.members.registeredOn)==null?"":t)+" "+((t=e.text.ui.toolname)==null?"":t)+".\r\n"+((t="")==null?"":t)+"\r\n"+((t=e.text.members.useInformation)==null?"":t)+"\r\n"+((t="")==null?"":t)+"\r\n"+((t=e.text.members.linkTo)==null?"":t)+" "+((t=e.text.ui.toolname)==null?"":t)+": "+((t=e.link)==null?"":t)+"\r\n"+((t="")==null?"":t)+"\r\n"+((t=e.text.forms.login)==null?"":t)+": "+r(e.data.login)+"\r\n"+((t="")==null?"":t)+"\r\n"+((t=e.text.forms.password)==null?"":t)+": "+r(e.data.password),n},this.JST["tpl-confirm-addmember"]=function(e){var t,n="",r=_.escape;return n+='<div class="modal fade dialog-shell rp-modal-dialog" id="ConfirmModal" tabindex="-1" role="dialog" aria-labelledby="ConfirmModal" aria-hidden="true">\r\n    <div class="modal-dialog">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="col-lg-10 col-md-10 col-sm-10 col-xs-10 break-link">\r\n                    '+((t=e.text.members.viewEmail)==null?"":t)+'\r\n                </h2>\r\n                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 panel-action">\r\n                    <sapn class="close-pop-up" data-dismiss="modal" data-js-close>\r\n                        <i class="material-icons">clear</i>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="modal-body" id="confirmContent">\r\n                \r\n            </div>\r\n            <div class="modal-footer">\r\n                <div class="pull-right">\r\n                    <button type="button" class="btn cancel" data-dismiss="modal">'+((t=e.text.ui.ok)==null?"":t)+'</button>\r\n                    <a href="#" class="btn ok btn-success" id="btn-send-email">'+((t=e.text.ui.sendEmail)==null?"":t)+"</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-delete-dialog"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="modal fade dialog-shell rp-modal-dialog delete-dialog" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">\r\n    <div class="modal-dialog modal-md">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="col-lg-10 col-md-10 col-sm-10 col-xs-10 break-link">\r\n                    '+((t=e.text.dialogHeader[e.message])==null?"":t)+'\r\n                </h2>\r\n                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 panel-action">\r\n                    <span class="close-pop-up" data-js-close data-dismiss="modal">\r\n                        <i class="material-icons">clear</i>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="modal-body">\r\n                <p>\r\n                    ',e.format?n+="\r\n                        "+((t=e.format(e.text.dialog[e.message]))==null?"":t)+"?\r\n                    ":n+="\r\n                        "+((t=e.text.dialog[e.message])==null?"":t)+""+r(e.segment)+"?\r\n                    ",n+='\r\n                </p>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="rp-btn rp-btn-cancel" data-dismiss="modal">\r\n                    '+((t=e.cancelButton||e.text.ui.cancel)==null?"":t)+'\r\n                </button>\r\n                <button type="button" class="rp-btn rp-btn-danger">\r\n                    '+((t=e.okButton||e.text.dialog[e.message+"Btn"]||e.text.ui.del)==null?"":t)+"\r\n                </button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-delete-launch-dialog"]=function(e){var t,n="",r=_.escape;return n+='<div class="modal fade dialog-shell rp-modal-dialog"\r\n    id="editLaunchModal"\r\n    tabindex="-1"\r\n    role="dialog"\r\n    aria-labelledby="editLaunchModal"\r\n    aria-hidden="true">\r\n    <div class="modal-dialog modal-md">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="col-lg-10 col-md-10 col-sm-10 col-xs-10 break-link">\r\n                    '+((t=e.text.ui.warning)==null?"":t)+'!\r\n                </h2>\r\n                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 panel-action">\r\n                    <span class="close-pop-up" data-js-close data-dismiss="modal">\r\n                        <i class="material-icons">clear</i>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="modal-body clearfix">\r\n                <p>\r\n                    '+((t=e.type==="deleteLaunch"?e.text.launches.deleteWarning:e.text.launches.deleteItemWarning)==null?"":t)+' "'+r(e.name)+'"?\r\n                </p>\r\n                <p>\r\n                    <label for="deleteConfirm">\r\n                        <input type="checkbox"\r\n                            class="rp-input-checkbox"\r\n                            name="deleteConfirm"\r\n                            id="deleteConfirm"/>\r\n                            <span>\r\n                                <b>\r\n                                    '+((t=e.type==="deleteLaunch"?e.text.launches.deleteAgree:e.text.launches.deleteItemAgree)==null?"":t)+'\r\n                                </b>\r\n                            </span>\r\n                    </label>\r\n                </p>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <div class="pull-right">\r\n                    <button data-dismiss="modal" class="rp-btn rp-btn-cancel" type="button">\r\n                        '+((t=e.text.ui.cancel)==null?"":t)+'\r\n                    </button>\r\n                    <button class="rp-btn rp-btn-danger" disabled type="submit">\r\n                        '+((t=e.text.ui.delete)==null?"":t)+"\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-dialog-modal"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="modal fade dialog-shell rp-modal-dialog"\r\n    id="updateMyProfile"\r\n    tabindex="-1"\r\n    role="dialog"\r\n    aria-labelledby="updateMyProfile"\r\n    aria-hidden="true">\r\n    <div class="modal-dialog modal-md">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="col-lg-10 col-md-10 col-sm-10 col-xs-10 break-link">\r\n                    '+((t=e.text.ui.warning)==null?"":t)+'!\r\n                </h2>\r\n                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 panel-action">\r\n                    <span class="close-pop-up" data-js-close data-dismiss="modal">\r\n                        <i class="material-icons">clear</i>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="modal-body clearfix" id="contentModal">\r\n                <p>'+((t=e.header)==null?"":t)+"</p>\r\n                <p>"+((t=e.description)==null?"":t)+'</p>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <div class="pull-right" id="buttonsModal">\r\n                    ',_.forEach(e.buttons,function(e){n+='\r\n                        <button type="button"\r\n                            class="rp-btn rp-btn-cancel"\r\n                            data-js-'+((t=e.type)==null?"":t)+">\r\n                            "+((t=e.name)==null?"":t)+"\r\n                        </button>\r\n                    "}),n+="\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-launch-warning-dialog"]=function(e){var t,n="",r=_.escape;return n+='<div class="modal fade dialog-shell rp-modal-dialog"\r\n    id="editLaunchModal"\r\n    tabindex="-1"\r\n    role="dialog"\r\n    aria-labelledby="editLaunchModal"\r\n    aria-hidden="true">\r\n    <div class="modal-dialog modal-md">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="col-lg-10 col-md-10 col-sm-10 col-xs-10 break-link">\r\n                    '+((t=e.text.ui.warning)==null?"":t)+'!\r\n                </h2>\r\n                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 panel-action">\r\n                    <span class="close-pop-up" data-js-close data-dismiss="modal">\r\n                        <i class="material-icons">clear</i>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <div class="modal-body clearfix">\r\n                <p>'+((t=e.text.launches.finishWarning)==null?"":t)+' "'+r(e.name)+'"?</p>\r\n                <label for="deleteConfirm">\r\n                    <input type="checkbox"\r\n                        name="deleteConfirm"\r\n                        id="deleteConfirm"\r\n                        class="rp-input-checkbox" />\r\n                    <span>'+((t=e.text.launches.finishAgree)==null?"":t)+'</span>\r\n                </label>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <div class="pull-right">\r\n                    <button data-dismiss="modal" class="rp-btn rp-btn-cancel" type="button">\r\n                        '+((t=e.text.ui.no)==null?"":t)+'\r\n                    </button>\r\n                    <button class="rp-btn rp-btn-danger" disabled type="submit">\r\n                        '+((t=e.text.ui.yes)==null?"":t)+"\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-modal-with-confirm"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="modal fade dialog-shell rp-modal-dialog '+((t=e.paramModal.additionalClass)==null?"":t)+'"\r\n    id="ConfirmModal"\r\n    tabindex="-1"\r\n    role="dialog"\r\n    aria-labelledby="ConfirmModal"\r\n    aria-hidden="true">\r\n    <div class="modal-dialog modal-'+((t=e.paramModal.sizeModal)==null?"":t)+'">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h2 class="col-lg-10 col-md-10 col-sm-10 col-xs-10 break-link">\r\n                    '+((t=e.dialogHeader.title)==null?"":t)+'\r\n                </h2>\r\n                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 panel-action">\r\n                    <sapn class="close-pop-up"\r\n                        title="'+((t=e.text.uiCommonElements.close)==null?"":t)+'"\r\n                        data-js-close\r\n                        data-dismiss="modal">\r\n                        <i class="material-icons">clear</i>\r\n                    </span>\r\n                </div>\r\n            </div>            <div class="modal-body">\r\n                ',e.paramModal.isFormatText&&(n+="\r\n                    <p>"+((t=e.dialogBody.txtMessageTop)==null?"":t)+"</p>\r\n                "),n+="                ",e.paramModal.withConfirm&&(n+='\r\n                    <p class="no-margin">\r\n                        <label>\r\n                            <input type="checkbox" class="rp-input-checkbox confirm">\r\n                            <span class="font-bold">'+((t=e.dialogBody.txtMessage)==null?"":t)+"</span>\r\n                        </label>\r\n                    </p>\r\n                "),n+="                ",e.paramModal.withConfirm||(n+='\r\n                    <p class="no-margin">\r\n                        <span>'+((t=e.dialogBody.txtMessage)==null?"":t)+"</span>\r\n                    </p>\r\n                "),n+='\r\n            </div>            <div class="modal-footer">\r\n                ',e.dialogFooter.cancelButton&&(n+='\r\n                    <button type="button"\r\n                        class="rp-btn rp-btn-cancel"\r\n                        data-dismiss="modal">\r\n                        '+((t=e.dialogFooter.cancelButton)==null?"":t)+"\r\n                    </button>\r\n                "),n+="\r\n                ",e.dialogFooter.dangerButton&&(n+='\r\n                    <button type="button"\r\n                        class="rp-btn rp-btn-danger"\r\n                        ',e.paramModal.withConfirm&&(n+=' disabled="disabled" '),n+=" >\r\n                        "+((t=e.dialogFooter.dangerButton)==null?"":t)+"\r\n                    </button>\r\n                "),n+="\r\n                ",e.dialogFooter.submitButton&&(n+='\r\n                    <button type="button"\r\n                        class="rp-btn rp-btn-submit">\r\n                        '+((t=e.dialogFooter.submitButton)==null?"":t)+"\r\n                    </button>\r\n                "),n+="                ",e.dialogFooter.customEvents&&(n+="\r\n                    "+((t=e.dialogFooter.customEvents)==null?"":t)+"\r\n                "),n+="\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-permissions-map-modal"]=function(e){var t,n="",r=_.escape;return n+='<div aria-hidden="true"\r\n    aria-labelledby="aboutPermissionsLabel"\r\n    id="aboutPermissions"\r\n    role="dialog"\r\n    tabindex="-1"\r\n    class="modal fade dialog-shell rp-modal-dialog min-padding">\r\n    <div class="modal-dialog modal-lg">\r\n        <div class="modal-content">            <div class="modal-header">\r\n                <h2 class="col-lg-10 col-md-10 col-sm-10 col-xs-10 break-link">\r\n                    '+((t=e.text.project.permissionsMap)==null?"":t)+'\r\n                </h2>\r\n                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 panel-action">\r\n                    <sapn class="close-pop-up" data-js-close data-dismiss="modal">\r\n                        <i class="material-icons">clear</i>\r\n                    </span>\r\n                </div>\r\n            </div>            <div class="modal-body">\r\n                <div class="table-responsive">\r\n                    <table class="table table-hover table-striped table-condensed table_permissions"\r\n                        id="permissionsTable">\r\n                        <thead class="">\r\n                            <tr>\r\n                                <th rowspan="2">'+((t=e.text.permissionMap.actionRole)==null?"":t)+'</th>\r\n                                <th rowspan="2">'+((t=e.text.ui.admin)==null?"":t)+'</th>\r\n                                <th rowspan="2">'+((t=e.text.ui.manager)==null?"":t)+'</th>\r\n                                <th rowspan="2">'+((t=e.text.ui.lead)==null?"":t)+'</th>\r\n                                <th colspan="2">'+((t=e.text.ui.member)==null?"":t)+'</th>\r\n                                <th colspan="2">'+((t=e.text.ui.customer)==null?"":t)+"</th>\r\n                            </tr>\r\n                            <tr>\r\n                                <th>"+((t=e.text.permissionMap.owner)==null?"":t)+"</th>\r\n                                <th>"+((t=e.text.permissionMap.notOwner)==null?"":t)+"</th>\r\n                                <th>"+((t=e.text.permissionMap.owner)==null?"":t)+"</th>\r\n                                <th>"+((t=e.text.permissionMap.notOwner)==null?"":t)+"</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            <tr>\r\n                                <td>"+((t=e.text.permissionMap.accessToManagementSystem)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>'+((t=e.text.permissionMap.createProject)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>'+((t=e.text.permissionMap.deleteProject)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>'+((t=e.text.permissionMap.updateSettings)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>'+((t=e.text.permissionMap.seeSettings)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>\r\n                                    '+((t=e.text.ui.create)==null?"":t)+"\r\n                                    <strong>"+((t=e.text.permissionMap.internal)==null?"":t)+"</strong>\r\n                                    "+((t=e.text.permissionMap.user)==null?"":t)+'\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>\r\n                                    '+((t=e.text.admin.invite)==null?"":t)+"\r\n                                    <strong>"+((t=e.text.permissionMap.internal)==null?"":t)+"\r\n                                    </strong>"+((t=e.text.permissionMap.user)==null?"":t)+'\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                    <span class="to-power">*</span>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                    <span class="to-power">*</span>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>\r\n                                    '+((t=e.text.permissionMap.unSlashAssign)==null?"":t)+"\r\n                                    <strong>"+((t=e.text.permissionMap.internal)==null?"":t)+"</strong>\r\n                                    "+((t=e.text.permissionMap.userToFrom)==null?"":t)+'\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                    <span class="to-power">**</span>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                    <span class="to-power">**</span>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>'+((t=e.text.permissionMap.changeUserRole)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                    <span class="to-power">*</span>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                    <span class="to-power">*</span>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>\r\n                                    '+((t=e.text.ui.del)==null?"":t)+"\r\n                                    <strong>"+((t=e.text.permissionMap.internal)==null?"":t)+"</strong>\r\n                                    "+((t=e.text.permissionMap.user)==null?"":t)+'\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>'+((t=e.text.permissionMap.seeMembers)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>\r\n                                    '+((t=e.text.permissionMap.editOwnAccount1)==null?"":t)+'\r\n                                    <span class="to-power">***</span>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>'+((t=e.text.permissionMap.deleteLaunch)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>'+((t=e.text.permissionMap.forceFinishLaunch)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>'+((t=e.text.permissionMap.startAnalysis)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>'+((t=e.text.permissionMap.deleteTestItem)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>'+((t=e.text.permissionMap.moveToDebug)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>'+((t=e.text.permissionMap.mergeLaunches)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center"></td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>'+((t=e.text.permissionMap.workWithFiltersEtc)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                            </tr>\r\n                            <tr>\r\n                                <td>'+((t=e.text.permissionMap.readData)==null?"":t)+'</td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                                <td class="text-center success">\r\n                                    <i class="rp-icons rp-icons-check"></i>\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                    </table>\r\n                </div>                <div class="col-xs-12 text-left">'+((t=e.text.permissionMap.oneAttention)==null?"":t)+'</div>\r\n                <div class="col-xs-12 text-left">'+((t=e.text.permissionMap.twoAttention)==null?"":t)+'</div>\r\n                <div class="col-xs-12 text-left">'+((t=e.text.permissionMap.threeAttention)==null?"":t)+"</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-widget-wizard-dialog"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="modal fade dialog-shell rp-modal-dialog"\r\n    id="widgetWizardModal"\r\n    tabindex="-1"\r\n    role="dialog"\r\n    aria-labelledby="myLargeModalLabel"\r\n    aria-hidden="true">\r\n    <div class="modal-dialog modal-lg">\r\n        <div class="modal-content" id="widgetEditor">\r\n            <div class="modal-header">\r\n                <h2 class="col-lg-10 col-md-10 col-sm-10 col-xs-10 break-link">\r\n                    '+((t=e.text.wizard.widgetWizard)==null?"":t)+'\r\n                </h2>\r\n                <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2 panel-action">\r\n                    <sapn class="close-pop-up" data-js-close data-dismiss="modal">\r\n                        <i class="material-icons">clear</i>\r\n                    </span>\r\n                </div>\r\n            </div>\r\n            <!--\r\n                <div class="modal-header">\r\n                    <h4 class="modal-title title-inline">'+((t=e.text.wizard.widgetWizard)==null?"":t)+'</h4>\r\n                    <div class="pull-right">\r\n                        <button type="button" class="btn btn-default hide" data-dismiss="modal">\r\n                            '+((t=e.text.ui.cancel)==null?"":t)+'\r\n                        </button>\r\n                        <button type="button" class="btn btn-primary hide">\r\n                            '+((t=e.text.ui.save)==null?"":t)+'\r\n                        </button>\r\n                    </div>\r\n                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n                        <i class="material-icons" aria-hidden="true">clear</i>\r\n                    </button>\r\n                </div>\r\n            -->\r\n            <div class="modal-body clearfix">\r\n                <div role="tabpanel">\r\n                    <ul class="nav nav-tabs top-level row" role="tablist">\r\n                        <li role="presentation" class="active col-xs-4 nopadding">\r\n                            <a href="#widgetType" aria-controls="home" role="tab" data-toggle="tab">\r\n                                <i class="material-icons">check_circle</i>\r\n                                '+((t=e.text.wizard.widgetType)==null?"":t)+'\r\n                                <span class="label label-warning">'+((t=e.text.wizard.incomplete)==null?"":t)+'</span>\r\n                            </a>\r\n                        </li>\r\n                        <li role="presentation" class="col-xs-4 nopadding">\r\n                            <a href="#widgetFilters" aria-controls="profile" role="tab" data-toggle="tab">\r\n                                <i class="material-icons">check_circle</i>\r\n                                '+((t=e.text.topMenu.filters)==null?"":t)+'\r\n                                <span class="label label-warning">'+((t=e.text.wizard.incomplete)==null?"":t)+'</span>\r\n                            </a>\r\n                        </li>\r\n                        <li role="presentation" class="col-xs-4 nopadding">\r\n                            <a href="#widgetData" aria-controls="profile" role="tab" data-toggle="tab">\r\n                                <i class="material-icons">check_circle</i>\r\n                                '+((t=e.text.wizard.nameAndDashboard)==null?"":t)+'\r\n                                <span class="label label-warning">'+((t=e.text.wizard.incomplete)==null?"":t)+'</span>\r\n                            </a>\r\n                        </li>\r\n                    </ul>\r\n                    <div class="tab-content top-level">\r\n                        <div role="tabpanel" class="tab-pane active" id="widgetType">\r\n                        <ul class="nav nav-tabs nav-tabs-custom">\r\n                                <li class="active">\r\n                                    <a data-toggle="tab" href="#widgetTemplates">\r\n                                        '+((t=e.text.wizard.widgetTemplates)==null?"":t)+'\r\n                                    </a>\r\n                                </li>\r\n                                <li class="shared-tab">\r\n                                    <a data-toggle="tab" href="#SharedWidgets">\r\n                                        '+((t=e.text.wizard.sharedWidgets)==null?"":t)+'\r\n                                    </a>\r\n                                </li>\r\n                            </ul>\r\n                            <div class="tab-content">\r\n                                <div id="widgetTemplates" class="tab-pane active"></div>\r\n                                <div id="SharedWidgets" class="tab-pane">\r\n                                    <div class="wizard-loader">\r\n                                        <i class="material-icons loader-animation">refresh</i>\r\n                                    </div>\r\n                                    <div class="container-fluid content-holder" style="display: none;"></div>\r\n                                </div>\r\n                                <div id="templateConfig" class="row">\r\n                                    <div id="templateOptions" class="row nopadding"></div>\r\n                                    <div id="templateValidations" class="row alert alert-danger" role="alert"></div>\r\n                                </div>\r\n                            </div>\r\n                            </div>\r\n                            <div role="tabpanel" class="tab-pane" id="widgetFilters">\r\n                            <ul class="nav nav-tabs nav-tabs-custom">\r\n                                <li class="active">\r\n                                    <a data-toggle="tab" class="own-filters filters-tab" href="#OwnFilters">\r\n                                        '+((t=e.text.wizard.ownFilters)==null?"":t)+'\r\n                                    </a>\r\n                                </li>\r\n                                <li>\r\n                                    <a data-toggle="tab" class="shared-filters filters-tab" href="#SharedFilters">\r\n                                        '+((t=e.text.wizard.sharedFilters)==null?"":t)+'\r\n                                    </a>\r\n                                </li>\r\n                            </ul>\r\n                            <div class="tab-content">\r\n                                <div id="OwnFilters" class="tab-pane active">\r\n                                    <div class="wizard-loader">\r\n                                        <i class="material-icons loader-animation">refresh</i>\r\n                                    </div>\r\n                                    <div class="content-holder" style="display: none;"></div>\r\n                                </div>\r\n                                <div id="SharedFilters" class="tab-pane">\r\n                                    <div class="wizard-loader">\r\n                                        <i class="material-icons loader-animation">refresh</i>\r\n                                    </div>\r\n                                    <div class="content-holder" style="display: none;"></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div role="tabpanel" class="tab-pane" id="widgetData">\r\n                            <div class="form-group col-sm-6">\r\n                                <label class="col-sm-3 control-label wizard-name-label" for="widgetName">'+((t=e.text.filters.name)==null?"":t)+'</label>\r\n                                <div class="col-sm-12" style="padding-right: 5px;">\r\n                                    <input type="text" placeholder="'+((t=e.text.wizard.enterWidgetName)==null?"":t)+'" id="widgetName" class="form-control rp-input-default">\r\n                                    <span class="help-inline"></span>\r\n                                </div>\r\n                            </div>\r\n                            <div class="form-group col-sm-3 col-md-2 col-xs-3">\r\n                                <label class="control-label wizard-shared-label"  for="tabShared">'+((t=e.text.filters.shared)==null?"":t)+'</label>\r\n                                <div class="shared-switcher">\r\n                                    <input id="tabShared" type="checkbox" class="js-switch" ',e.shared&&(n+=' checked="checked" '),n+=' />\r\n                                </div>\r\n                            </div>\r\n                            <div role="tabpanel" class="tab-pane active" id="dashboardSelect">\r\n                                <ul class="nav-tabs-custom clearfix">\r\n                                    <li class="active">\r\n                                        <a data-toggle="tab" href="#OwnDashboards">\r\n                                            '+((t=e.text.wizard.ownDashboards)==null?"":t)+'\r\n                                        </a>\r\n                                    </li>\r\n                                    <li class="">\r\n                                        <a data-toggle="tab" class="" href="#createDashboard">\r\n                                            '+((t=e.text.wizard.createDashboard)==null?"":t)+'\r\n                                        </a>\r\n                                    </li>\r\n                                </ul>\r\n                                <div class="tab-content">\r\n                                    <div id="OwnDashboards" class="tab-pane active">\r\n                                        <div class="wizard-loader">\r\n                                            <i class="material-icons loader-animation">refresh</i>\r\n                                        </div>\r\n                                        <div class="content-holder row" style="display: none;"></div>\r\n                                    </div>\r\n                                    <div id="createDashboard" class="tab-pane row">\r\n                                        <div class="form-group col-md-6 col-sm-6 col-xs-6">\r\n                                            <label class="col-sm-3 control-label wizard-name-label"\r\n                                                for="dashboardName">\r\n                                                '+((t=e.text.filters.name)==null?"":t)+'\r\n                                            </label>\r\n                                            <div class="col-sm-12">\r\n                                                <input type="text" placeholder="'+((t=e.text.wizard.enterDashboardName)==null?"":t)+'" id="dashboardName" class="form-control rp-input-default">\r\n                                                <span class="help-inline"></span>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="form-group col-md-6 col-sm-6 col-xs-6">\r\n                                            <div class="clearfix">\r\n                                                <div class="float-left">\r\n                                                    <label class="control-label wizard-shared-label"\r\n                                                        for="dashboardShared">\r\n                                                        '+((t=e.text.filters.shared)==null?"":t)+'\r\n                                                    </label>\r\n                                                    <div class="shared-switcher">\r\n                                                        <input id="dashboardShared"\r\n                                                            type="checkbox"\r\n                                                            class="js-switch"\r\n                                                            ',e.shared&&(n+=' checked="checked" '),n+=' />\r\n                                                    </div>\r\n                                                </div>\r\n                                                <div class="float-left margin-left-10">\r\n                                                    <div class="form-group clearfix">\r\n                                                        <button type="button"\r\n                                                            class="rp-btn rp-btn-submit float-left"\r\n                                                            style="margin-top: 30px;">\r\n                                                            '+((t=e.text.ui.create)==null?"":t)+'\r\n                                                        </button>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                        <div class="alert alert-warning soft-hidden"\r\n                                            id="newDashboardWarning">\r\n                                            '+((t=e.text.wizard.saveNewDashboard)==null?"":t)+'\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            </div>\r\n                    </div>\r\n                </div>\r\n                <div id="widgetPreview">\r\n                    <div id="previewValidationHolder"\r\n                        data-default="'+((t=e.text.wizard.previewDefault)==null?"":t)+'"\r\n                        data-nofilter="'+((t=e.text.wizard.previewNoFilter)==null?"":t)+'"\r\n                        data-notavailable="'+((t=e.text.wizard.previewNotAvailable)==null?"":t)+'"\r\n                        data-nodata="'+((t=e.text.failMessages.widgetPreviewData)==null?"":t)+'"\r\n                        data-notemplate="'+((t=e.text.wizard.previewNoTemplate)==null?"":t)+'">\r\n                        <h3 class="title-no-data text-center">\r\n                            <i class="rp-icons rp-icons-warning"></i>\r\n                            <span id="previewValidationMessage"></span>\r\n                        </h3>\r\n                    </div>\r\n                    <div id="previewContent"\r\n                        class="panel panel-default widget-content"\r\n                        style="display: none;">\r\n                    </div>\r\n                </div>\r\n                <div id="globalValidation" class="alert alert-danger">\r\n                    '+((t=e.text.validation.selectAllOptionsForWidget)==null?"":t)+'\r\n                </div>\r\n            </div>\r\n            <div class="modal-footer">\r\n                <button type="button" class="rp-btn rp-btn-cancel" data-dismiss="modal">\r\n                    '+((t=e.text.ui.cancel)==null?"":t)+'\r\n                </button>\r\n                <button type="button" class="rp-btn rp-btn-submit" disabled="disabled" id="saveWidget">\r\n                    '+((t=e.text.ui.save)==null?"":t)+'\r\n                </button>\r\n            </div>\r\n            <div id="popupLoader">\r\n                <i class="material-icons loader-animation">refresh</i>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n',n},this.JST["tpl-dashboard-body"]=function(e){var t,n="",r=_.escape;return n+='<div class="preloader" data-js-preloader-launch-body>\r\n    <i class="material-icons loader-animation">refresh</i>\r\n</div>\r\n\r\n<div data-js-dashboard-content></div>',n},this.JST["tpl-dashboard-header-list-item"]=function(e){var t,n="",r=_.escape;return n+="<a data-js-dashboard-name></a>\r\n",n},this.JST["tpl-dashboard-header"]=function(e){var t,n="",r=_.escape;return n+='<div class="breadcrumbs" data-js-main-breadcrumbs></div>\r\n<button class="rp-btn rp-btn-default-revers rp-button-with-icon" data-js-add-dashboard>\r\n    <i class="rp-icons rp-icons-add-dash"></i>\r\n    <span class="rp-btn-val">'+r(e.text.dashboard.addNewDashboard)+'</span>\r\n</button>\r\n<div class="dashboards-overflow-mobile">\r\n    <div class="rp-btn rp-btn-with-dropdown dropdown-toggle" data-toggle="dropdown">\r\n        <div class="select-value" data-js-active-dashboard></div>\r\n        <span class="rp-caret"></span>\r\n    </div>\r\n    <ul class="dropdown-menu" data-js-dashboard-list-mobile>\r\n    </ul>\r\n</div>\r\n',n},this.JST["tpl-dashboard-item"]=function(e){var t,n="",r=_.escape;return n+='<div class="buttons-container clearfix">\r\n    <div class="rp-nav-left">\r\n        <div class="is-not-my-dashbord">\r\n            <i class="material-icons">public</i>\r\n            <span>'+r(e.text.dashboard.sharedBy)+'</span>&nbsp;<span data-js-owner-name></span>\r\n        </div>\r\n        <a href="#" class="rp-btn rp-btn-default rp-button-with-icon is-my-dashbord" data-js-add-widget>\r\n            <i class="material-icons">add_circle</i>\r\n            <span class="hidden-sm hidden-xs rp-btn-val">'+r(e.text.widgets.addNewWidget)+'</span>\r\n        </a>\r\n        <a href="#" class="rp-btn rp-btn-default rp-button-with-icon is-my-dashbord" data-js-add-shared-widget>\r\n            <i class="material-icons">add_circle_outline</i>\r\n            <span class="hidden-sm hidden-xs rp-btn-val">'+r(e.text.widgets.addSharedWidget)+'</span>\r\n        </a>\r\n    </div>\r\n    <div class="rp-nav-right">\r\n        <a href="#" class="rp-btn rp-btn-default rp-button-with-icon is-my-dashbord" data-js-edit>\r\n            <i class="material-icons">edit</i>\r\n            <span class="hidden-sm hidden-xs rp-btn-val">'+r(e.text.ui.edit)+'</span>\r\n        </a>\r\n        <a href="#" class="rp-btn rp-btn-default rp-button-with-icon" data-js-full-screen>\r\n            <i class="material-icons">zoom_out_map</i>\r\n            <span class="hidden-sm hidden-xs rp-btn-val">'+((t=e.text.dashboard.fullscreen)==null?"":t)+'</span>\r\n        </a>\r\n        <a href="#" class="rp-btn rp-btn-default rp-button-with-icon is-my-dashbord" data-js-remove>\r\n            <i class="material-icons">clear</i>\r\n            <span class="hidden-sm hidden-xs rp-btn-val">'+((t=e.text.dashboard.remove)==null?"":t)+'</span>\r\n        </a>\r\n    </div>\r\n</div>\r\n<div class="preloader">\r\n    <i class="material-icons loader-animation">refresh</i>\r\n</div>\r\n<div class="no-result-found">\r\n    <span>'+((t=e.text.dashboard.widgetEmpty)==null?"":t)+'</span>\r\n    <p></p>\r\n</div>\r\n<div class="grid-stack" data-js-grid-stack data-gs-width="12" data-gs-animate="yes"></div>\r\n<div class="fullscreen-overflow">\r\n    <i class="material-icons" data-js-close-fullscreen>close</i>\r\n</div>\r\n<a href="#" class="rp-btn wide-btn-add-widget is-my-dashbord" data-js-add-widget>+ '+((t=e.text.widgets.addNewWidget)==null?"":t)+"</a>",n},this.JST["tpl-dashboard-list-item"]=function(e){var t,n="",r=_.escape;return n+='<div class="dashboard-content">\r\n    <div class="name-wrapper">\r\n        <p data-js-name></p>\r\n        <div class="icons-block">\r\n            <i class="material-icons close-icon" data-js-remove>close</i>\r\n            <i class="material-icons" data-js-edit>settings</i>\r\n        </div>\r\n    </div>\r\n    <div class="description-wrapper">\r\n        <p data-js-description></p>\r\n    </div>\r\n    <div class="icons-wrapper">\r\n        <div data-js-shared-container>\r\n            <i class="material-icons" data-js-share-icon>share</i>\r\n            <i class="material-icons" data-js-global-icon>public</i>\r\n            <span data-js-icon-description></span>\r\n        </div>\r\n    </div>\r\n</div>\r\n',n},this.JST["tpl-dashboard-list"]=function(e){var t,n="",r=_.escape;return n+='<div class="filter-dashboard">\r\n    <div class="input-filter form-group">\r\n        <input type="text" class="rp-input-search rp-input-sm form-control" data-js-filter-name placeholder="Search by Name" value="">\r\n        <i class="material-icons">search</i>\r\n        <div class="validate-hint"></div>\r\n    </div>\r\n</div>\r\n<h1>'+r(e.text.dashboard.myDashboards)+'</h1>\r\n<div class="dashboard-container" data-js-my-dashboards-container></div>\r\n<div class="no-result-found" data-js-dashboard-not-found>\r\n    <div class="no-search-block">\r\n        <div class="empty-dashboard-img"></div>\r\n        <span>'+((t=e.text.dashboard.noDashboard)==null?"":t)+"</span>\r\n        <p>"+r(e.text.dashboard.clickToAdd)+'</p>\r\n        <button class="rp-btn rp-btn-default rp-button-with-icon not-small" data-js-add-dashboard>\r\n            <i class="rp-icons rp-icons-add-dash"></i>\r\n            <span class="rp-btn-val">'+r(e.text.dashboard.addNewDashboard)+'</span>\r\n        </button>\r\n    </div>\r\n    <div class="search-block">\r\n        <span>'+((t=e.text.dashboard.noDashboardSearch)==null?"":t)+" '<span data-js-search-text></span>'</span>\r\n        <p>"+((t=e.text.dashboard.checkQuery)==null?"":t)+"</p>\r\n    </div>\r\n</div>\r\n<h1>"+r(e.text.dashboard.shareDashboards)+'</h1>\r\n<div class="dashboard-container" data-js-shared-dashboards-container></div>\r\n<div class="no-result-found" data-js-shared-dashboard-not-found>\r\n    <div class="no-search-block">\r\n        <div class="empty-shared-dashboard-img"></div>\r\n        <span>'+((t=e.text.dashboard.noSharedDashboard)==null?"":t)+'</span>\r\n    </div>\r\n    <div class="search-block">\r\n        <span>'+((t=e.text.dashboard.noDashboardSearch)==null?"":t)+" '<span data-js-search-text></span>'</span>\r\n        <p>"+((t=e.text.dashboard.checkQuery)==null?"":t)+"</p>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-gadget-unable-load"]=function(e){var t,n="",r=_.escape;return n+='<div class="gadget-no-data-error">\r\n    '+((t=e.message)==null?"":t)+"\r\n</div>",n},this.JST["tpl-gadget-view"]=function(e){var t,n="",r=_.escape;return n+='<div class="gadget-wrapper">\r\n    <div class="gadget-header" data-js-drag-handle>\r\n        <div class="info-block">\r\n            <h2 data-js-name></h2><i class="rp-icons rp-icons-buble comment-icon" data-js-comment=""></i><i class="material-icons"  data-js-shared>share</i><i class="material-icons" data-js-public>public</i>\r\n            <p><span data-js-widget-type></span> <span class="timeline-label" data-js-timeline>'+((t=e.text.widgets.timelineMode)==null?"":t)+'</span></p>\r\n        </div>\r\n        <div class="action-block">\r\n            <i class="material-icons" data-js-gadget-remove>clear</i>\r\n            <i class="material-icons" data-js-gadget-refresh>autorenew</i>\r\n            <i class="material-icons" data-js-gadget-edit>settings</i>\r\n        </div>\r\n    </div>\r\n    <div class="gadget-body" data-js-widget-container></div>\r\n    <div class="preloader">\r\n        <i class="material-icons loader-animation">refresh</i>\r\n    </div>\r\n</div>\r\n',n},this.JST["_tpl-modal-header"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="modal-header">\r\n    <h2>'+((t=e.headerText)==null?"":t)+"</h2>\r\n    ",e.isBeta&&(n+='\r\n        <div class="beta-badge">'+((t=e.text.project.beta)==null?"":t)+"</div>\r\n    "),n+='\r\n    <span class="close-modal"\r\n          title="'+((t=e.text.uiCommonElements.close)==null?"":t)+'"\r\n          data-js-close\r\n          data-dismiss="modal">\r\n            <i class="material-icons">clear</i>\r\n        </span>\r\n</div>',n},this.JST["_tpl-modal"]=function(e){var t,n="",r=_.escape;return n+='<div class="modal fade dialog-shell rp-modal-dialog" tabindex="-1" role="dialog" aria-hidden="true">\r\n    <div class="modal-dialog" data-js-scroll-container>\r\n        <div class="modal-content" data-js-modal-content>\r\n\r\n        </div>\r\n    </div>\r\n    <div class="modal-loading">\r\n        <div class="preloader">\r\n            <i class="material-icons loader-animation">refresh</i>\r\n        </div>\r\n    </div>\r\n</div>',n},this.JST["tpl-modal-add-shared-widget-item"]=function(e){var t,n="",r=_.escape;return n+='<label>\r\n    <input class="rp-input-radio" type="radio" data-js-widget-select>\r\n    <span>\r\n        <span class="filter-name" data-js-widget-name></span>\r\n        <span class="gadget-name" data-js-gadget-name></span>\r\n        <span class="owner-name"><i class="material-icons">person</i><span data-js-owner-name></span></span>\r\n        <span class="widget-description" data-js-description></span>\r\n    </span>\r\n</label>\r\n',n},this.JST["tpl-modal-add-shared-widget"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.widgets.addSharedWidget}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <div class="info-block">\r\n        <div class="preview-block" data-js-preview-block>\r\n            <h2 data-js-active-widget-name></h2>\r\n            <div class="widget-preview" data-js-widget-preview></div>\r\n        </div>\r\n    </div>\r\n    <div class="action-block" data-js-action-block>\r\n        <h1>'+r(e.text.widgets.selectShared)+'</h1>\r\n        <div class="shared-widgets-list-wrapper">\r\n            <div data-js-widgets-list-scroll>\r\n                <div class="shared-widgets-list" data-js-widgets-list></div>\r\n                <div class="shared-widgets-empty hide" data-js-widgets-empty>\r\n                    <span>'+((t=e.text.wizard.noSharedWidgets)==null?"":t)+'</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="preloader">\r\n            <i class="material-icons loader-animation">refresh</i>\r\n        </div>\r\n    </div>\r\n    <div class="buttons-block rp-nav-right">\r\n        <button class="rp-btn rp-btn-cancel" data-js-cancel>'+r(e.text.ui.cancel)+'</button>\r\n        <button class="rp-btn rp-btn-submit" data-js-add-widget>'+r(e.text.ui.add)+"</button>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-modal-add-widget-configure-widget"]=function(e){var t,n="",r=_.escape;return n+='<div data-js-filter-search></div>\r\n<div class="criteria-wrapper" data-js-enter-criteria></div>\r\n',n},this.JST["tpl-modal-add-widget-filter-search-add"]=function(e){var t,n="",r=_.escape;return n+='<div class="filter-edit-header">\r\n    <h1>'+r(e.text.filter.addNew)+'</h1>\r\n</div>\r\n<div class="label-wrapper rp-form">\r\n    <label>\r\n        <span>'+((t=e.text.filter.filterName)==null?"":t)+'</span>\r\n        <input class="rp-input form-control" placeholder="'+((t=e.text.filter.namePlaceholder)==null?"":t)+'" type="text" data-js-name-input>\r\n        <span class="validate-hint"></span>\r\n    </label>\r\n</div>\r\n\r\n<div class="edit-block clearfix">\r\n    <div class="entities-container clearfix" data-js-entities-container></div>\r\n    <div class="sorting-wrapper">\r\n        <span>'+r(e.text.ui.sortBy)+':</span>&nbsp;&nbsp;<span data-js-filter-sorting></span>\r\n    </div>\r\n\r\n    <div class="rp-nav-right">\r\n        <button class="rp-btn rp-btn-cancel" data-js-cancel-edit>'+((t=e.text.ui.cancel)==null?"":t)+'</button>\r\n        <button class="rp-btn rp-btn-submit rp-btn-add" data-js-ok-edit>'+((t=e.text.ui.add)==null?"":t)+"</button>\r\n    </div>\r\n</div>\r\n\r\n",n},this.JST["tpl-modal-add-widget-filter-search-edit"]=function(e){var t,n="",r=_.escape;return n+='<div class="filter-edit-header">\r\n    <h1>'+r(e.text.filter.edit)+'</h1>\r\n</div>\r\n<label class="filter-name-label">\r\n    <input class="rp-input-radio" type="radio" checked="checked" disabled="disabled">\r\n    <span data-js-filter-name></span>\r\n</label>\r\n<div class="edit-block clearfix">\r\n    <div class="entities-container clearfix" data-js-entities-container></div>\r\n    <div class="sorting-wrapper">\r\n        <span>'+r(e.text.ui.sortBy)+':</span>&nbsp;&nbsp;<span data-js-filter-sorting></span>\r\n    </div>\r\n\r\n    <div class="rp-nav-right">\r\n        <button class="rp-btn rp-btn-cancel" data-js-cancel-edit>'+((t=e.text.ui.cancel)==null?"":t)+'</button>\r\n        <button class="rp-btn rp-btn-submit" data-js-ok-edit>'+((t=e.text.ui.submit)==null?"":t)+"</button>\r\n    </div>\r\n</div>\r\n\r\n",n},this.JST["tpl-modal-add-widget-filter-search-item"]=function(e){var t,n="",r=_.escape;return n+='<label>\r\n    <input class="rp-input-radio" type="radio" data-js-filter-select>\r\n    <span>\r\n        <span class="filter-name" data-js-filter-name></span>&nbsp;<i class="material-icons" title="'+r(e.text.filters.sharedDescription)+'" data-js-filter-shared>share</i>&nbsp;<i class="material-icons" data-js-filter-not-my>public</i>\r\n        <span class="filter-options"><span data-js-filter-options></span>&nbsp;<i class="material-icons" data-js-filter-edit>edit</i></span>\r\n    </span>\r\n</label>',n},this.JST["tpl-modal-add-widget-filter-search"]=function(e){var t,n="",r=_.escape;return n+='<div class="filter-search-header clearfix">\r\n    <div class="input-filter form-group">\r\n        <input type="text" class="rp-input-search favorites-name-filter rp-input-sm form-control" data-js-filter-name name="userFilter" placeholder="Search by Name" value="">\r\n        <i class="material-icons">search</i>\r\n        <div class="validate-hint">\r\n        </div>\r\n    </div>\r\n    <a href="#" class="rp-btn rp-btn-default rp-button-with-icon" data-js-add-filter>\r\n        <i class="rp-icons rp-icons-add-filter"></i>\r\n        <span class="rp-btn-val">'+r(e.text.dashboard.addFilter)+'</span>\r\n    </a>\r\n\r\n</div>\r\n<div class="select-filter-wrapper empty-state" data-js-select-filter-block>\r\n    <span class="title">'+r(e.text.widgets.chooseFilter)+'</span>\r\n    <div data-js-select-filter-container></div>\r\n</div>\r\n<div class="filter-list-wrapper">\r\n    <div class="filter-list" data-js-filter-list-scroll>\r\n        <div data-js-filter-list></div>\r\n        <div class="preloader">\r\n            <i class="material-icons loader-animation">refresh</i>\r\n        </div>\r\n        <div data-js-filter-empty class="hide filter-no-data">\r\n            <p class="no-data-warning">\r\n                <i class="rp-icons rp-icons-warning"></i>\r\n                '+((t=e.text.wizard.ownFiltersAbsent)==null?"":t)+' "<span data-js-seach-query></span>"\r\n            </p>\r\n            <p>'+((t=e.text.ui.checkQuery)==null?"":t)+"</p>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<div data-js-filter-edit-container></div>\r\n<div data-js-filter-add-container></div>\r\n",n},this.JST["tpl-modal-add-widget-save-widget"]=function(e){var t,n="",r=_.escape;return n+='<form class="rp-form">\r\n    <label>\r\n        <span>'+((t=e.text.ui.name)==null?"":t)+'</span>\r\n        <input class="rp-input" placeholder="'+((t=e.text.widgets.namePlaceholder)==null?"":t)+'" type="text" data-js-name-input>\r\n        <span class="validate-hint"></span>\r\n    </label>\r\n    <label>\r\n        <span>'+((t=e.text.ui.description)==null?"":t)+'</span>\r\n        <textarea class="rp-input" placeholder="'+((t=e.text.widgets.descriptionPlaceholder)==null?"":t)+'" data-js-description></textarea>\r\n    </label>\r\n    <label>\r\n        <span>'+((t=e.text.filter.share)==null?"":t)+'</span>\r\n        <label class="rp-switcher-big" data-js-shared-control>\r\n            <span class="turn-on">'+((t=e.text.ui.on)==null?"":t)+'</span>\r\n            <span class="turn-off">'+((t=e.text.ui.off)==null?"":t)+'</span>\r\n            <input type="checkbox" data-js-is-shared>\r\n            <div class="slider"></div>\r\n        </label>\r\n    </label>\r\n</form>\r\n<div data-js-dashboards-list></div>\r\n',n},this.JST["tpl-modal-add-widget-select-dashboard-item"]=function(e){var t,n="",r=_.escape;return n+='<span data-js-dashboard-item class="selected-dashboard"><i class="material-icons" data-js-share-icon title="'+((t=e.text.dashboard.dashboardShared)==null?"":t)+'">share</i><span></span></span>',n},this.JST["tpl-modal-add-widget-select-dashboard"]=function(e){var t,n="",r=_.escape;return n+="<h5>"+((t=e.text.widgets.saveWidgetDashboard)==null?"":t)+'</h5>\r\n<div class="preloader">\r\n    <i class="material-icons loader-animation">refresh</i>\r\n</div>\r\n<div data-js-dashboard-items class="select-dashboard-items hide"></div>\r\n<div data-js-auto-created class="select-dashboard-auto hide">'+((t=e.text.dashboard.autoCreated)==null?"":t)+"</div>\r\n",n},this.JST["tpl-modal-add-widget-select-widget"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="widget-list">\r\n    ',_.each(e.widgets,function(e,t){n+="\r\n    ",e.notShowOnWizard||(n+='\r\n    <label>\r\n        <input class="rp-input-radio" type="radio" name="widget-type" value="'+r(t)+'">\r\n        <span>'+r(e.gadget_name)+"</span>\r\n    </label>\r\n    "),n+="\r\n    "}),n+="\r\n</div>\r\n",n},this.JST["tpl-modal-add-widget-selected-filter"]=function(e){var t,n="",r=_.escape;return n+='<div class="preloader">\r\n    <i class="material-icons loader-animation">refresh</i>\r\n</div>\r\n<div data-js-filter-info></div>\r\n<i class="material-icons filter-edit" data-js-filter-edit>edit</i>',n},this.JST["tpl-modal-add-widget"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.widgets.addNewWidget}))==null?"":t)+'\r\n<div class="modal-body">\r\n   <div class="info-block">\r\n       <ul>\r\n           <li data-js-step-1-title><span>1</span><span>'+r(e.text.widgets.selectType)+"</span></li>\r\n           <li data-js-step-2-title><span>2</span><span>"+r(e.text.widgets.configureWidget)+"</span></li>\r\n           <li data-js-step-3-title><span>3</span><span>"+r(e.text.ui.save)+'</span></li>\r\n       </ul>\r\n       <div class="preview-block">\r\n           <h2 data-js-widget-type></h2>\r\n           <p data-js-widget-description></p>\r\n           <div class="widget-preview" data-js-widget-preview></div>\r\n       </div>\r\n   </div>\r\n    <div class="action-block">\r\n        <div data-js-step-1>\r\n            <div class="buttons-block"></div>\r\n        </div>\r\n        <div data-js-step-2></div>\r\n        <div data-js-step-3></div>\r\n    </div>\r\n    <div class="buttons-block rp-nav-right">\r\n        <a class="rp-btn rp-btn-default rp-button-with-icon rp-btn-icon-reverse" data-js-next-second-step>\r\n            <i class="material-icons">keyboard_arrow_right</i>\r\n            <span class="rp-btn-val">'+r(e.text.dashboard.nextStep)+'</span>\r\n        </a>\r\n        <a class="rp-btn rp-btn-default rp-button-with-icon" data-js-previous-first-step>\r\n            <i class="material-icons">keyboard_arrow_left</i>\r\n            <span class="rp-btn-val">'+r(e.text.dashboard.previousStep)+'</span>\r\n        </a>\r\n        <a class="rp-btn rp-btn-default rp-button-with-icon rp-btn-icon-reverse" data-js-next-last-step>\r\n            <i class="material-icons">keyboard_arrow_right</i>\r\n            <span class="rp-btn-val">'+r(e.text.dashboard.nextStep)+'</span>\r\n        </a>\r\n        <a class="rp-btn rp-btn-default rp-button-with-icon" data-js-previous-second-step>\r\n            <i class="material-icons">keyboard_arrow_left</i>\r\n            <span class="rp-btn-val">'+r(e.text.dashboard.previousStep)+'</span>\r\n        </a>\r\n        <a class="rp-btn rp-btn-submit rp-btn-add" data-js-add-widget>\r\n            <span>'+r(e.text.ui.add)+"</span>\r\n        </a>\r\n    </div>\r\n</div>",n},this.JST["tpl-modal-edit-widget"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.widgets.editWidget}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <div class="info-block">\r\n        <div class="preview-block">\r\n            <h2 data-js-widget-type></h2>\r\n            <p data-js-widget-description></p>\r\n            <div class="widget-preview" data-js-widget-preview></div>\r\n        </div>\r\n    </div>\r\n    <div class="action-block">\r\n        <div class="settings-block">\r\n            <div class="clearfix" data-js-widget-filter></div>\r\n            <div class="clearfix" data-js-widget-settings></div>\r\n            <div class="separate"></div>\r\n            <div data-js-widget-save></div>\r\n        </div>\r\n        <div data-js-filter-search></div>\r\n        <div class="edit-filter-buttons rp-nav-right">\r\n            <button class="rp-btn rp-btn-cancel" data-js-cancel-filter>'+r(e.text.ui.cancel)+'</button>\r\n            <button class="rp-btn rp-btn-submit" data-js-save-filter>'+r(e.text.ui.submit)+'</button>\r\n        </div>\r\n    </div>\r\n    <div class="buttons-block rp-nav-right">\r\n        <button class="rp-btn rp-btn-cancel" data-js-cancel>'+r(e.text.ui.cancel)+'</button>\r\n        <button class="rp-btn rp-btn-submit" data-js-save>'+r(e.text.ui.save)+"</button>\r\n    </div>\r\n</div>",n},this.JST["modal-add-widget-setting-action"]=function(e){var t,n="",r=_.escape;return n+="<span>"+r(e.text.wizard.actionTitle)+"</span>\r\n<span data-js-select-action-container></span>",n},this.JST["modal-add-widget-setting-criteria"]=function(e){var t,n="",r=_.escape;return n+="<span>"+r(e.text.widgets.widgetCriteria)+"</span>\r\n<span data-js-select-criteria-container></span>",n},this.JST["modal-add-widget-setting-items"]=function(e){var t,n="",r=_.escape;return n+="<span>"+r(e.name)+'</span>\r\n<div class="form-group">\r\n    <input class="rp-input" type="text" data-js-limit-input>\r\n    <div class="validate-hint"></div>\r\n</div>\r\n',n},this.JST["modal-add-widget-setting-launch"]=function(e){var t,n="",r=_.escape;return n+="<span>"+r(e.text.widgets.typeLaunchName)+'</span>\r\n<div class="select-launch-control rp-field">\r\n    <input data-js-data-launch-input type="text">\r\n    <div class="validate-hint"></div>\r\n</div>\r\n',n},this.JST["modal-add-widget-setting-switch-mode"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<a href="#" ',e.timeline||(n+=' class="active" '),n+=" data-js-launch-mode>"+r(e.text.widgets.launchMode)+'</a>\r\n<a href="#" ',e.timeline&&(n+=' class="active" '),n+=" data-js-timeline-mode>"+r(e.text.widgets.timelineMode)+"</a>\r\n",n},this.JST["modal-add-widget-setting-users"]=function(e){var t,n="",r=_.escape;return n+="<span>"+r(e.text.widgets.typeUserName)+'</span>\r\n<div class="users-container" data-js-user-tags-container></div>',n},this.JST["tpl-modal-add-project"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.admin.addProject}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <div class="rp-add-project-form">\r\n        <h4>'+((t=e.text.admin.addNewProject)==null?"":t)+'</h4>\r\n        <form class="rp-form">\r\n            <label class="rp-field">\r\n                <span class="required">'+((t=e.text.admin.projectName)==null?"":t)+'</span>\r\n                <input type="text" class="rp-input" data-js-project-name>\r\n                <span class="validate-hint"></span>\r\n            </label>\r\n        </form>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.cancel)==null?"":t)+'\r\n    </button>\r\n    <button class="rp-btn rp-btn-submit" type="button" data-js-add>\r\n        '+((t=e.text.ui.add)==null?"":t)+"\r\n    </button>\r\n</div>",n},this.JST["tpl-modal-add-user"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.members.addMember}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <div class="rp-add-user-form">\r\n        <h4>'+((t=e.text.members.addMemberToProject)==null?"":t)+'</h4>\r\n        <form id="addMemberForm" name="addMemberForm" data-js-add-user-form>\r\n            <div class="rp-form-group clearfix" data-js-add-user-form-group>\r\n                <label class="rp-control-label rp-custom-col add-user-label obligatory-field" for="username">\r\n                    '+((t=e.text.forms.login)==null?"":t)+'\r\n                </label>\r\n                <div class="rp-custom-col add-user-field">\r\n                    <input data-js-user-login id="username" name="username" type="text" value=""\r\n                           class="rp-input-default rp-width-100 form-control">\r\n                    <div class="error-bottom">\r\n                        <div class="help-inline" data-js-add-user-form-error></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="rp-form-group clearfix" data-js-add-user-form-group>\r\n                <label class="rp-control-label rp-custom-col add-user-label obligatory-field" for="fullName">\r\n                    '+((t=e.text.forms.fullName)==null?"":t)+'\r\n                </label>\r\n                <div class="rp-custom-col add-user-field">\r\n                    <input data-js-user-full-name id="fullName" name="fullName" type="text" value=""\r\n                           class="rp-input-default rp-width-100 form-control">\r\n                    <div class="error-bottom">\r\n                        <div class="help-inline" data-js-add-user-form-error></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="rp-form-group clearfix" data-js-add-user-form-group>\r\n                <label class="rp-control-label rp-custom-col add-user-label obligatory-field" for="email">\r\n                    '+((t=e.text.forms.email)==null?"":t)+'\r\n                </label>\r\n                <div class="rp-custom-col add-user-field">\r\n                    <input data-js-user-email id="email" name="email" type="text" value=""\r\n                           class="rp-input-default rp-width-100 form-control">\r\n                    <div class="error-bottom">\r\n                        <div class="help-inline" data-js-add-user-form-error></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            ',e.isUsers&&(n+='\r\n            <div class="rp-form-group clearfix" data-js-add-user-form-group>\r\n                <label class="rp-control-label rp-custom-col add-user-label obligatory-field" for="accountRole">\r\n                    '+((t=e.text.forms.accountRole)==null?"":t)+'\r\n                </label>\r\n                <div class="rp-custom-col add-user-field">\r\n                    <div class="rp-btn-group rp-width-100">\r\n                        <button data-js-user-account-role id="accountRole" name="accountRole" type="button"\r\n                                class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                                data-toggle="dropdown" value="">\r\n                            <span class="select-value" data-js-user-account-role-text></span>\r\n                            <span class="rp-caret"></span>\r\n                        </button>\r\n                        <ul class="dropdown-menu" data-js-account-role-dropdown>\r\n                            ',_.each(e.accountRoles,function(e){n+='\r\n                            <li><a href="#" data-value="'+((t=e)==null?"":t)+'">'+((t=e)==null?"":t)+"</a></li>\r\n                            "}),n+='\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="rp-form-group clearfix" data-js-add-user-form-group>\r\n                <label class="rp-control-label rp-custom-col add-user-label obligatory-field" for="project">\r\n                    '+((t=e.text.forms.selectProject)==null?"":t)+'\r\n                </label>\r\n                <div class="rp-custom-col add-user-field">\r\n                    <input data-js-user-project id="project" name="project" type="text" value="" class="rp-input-default">\r\n                    <div class="error-bottom">\r\n                        <div class="help-inline" data-js-add-user-form-error></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            '),n+='\r\n            <div class="rp-form-group clearfix" data-js-add-user-form-group>\r\n                <label class="rp-control-label rp-custom-col add-user-label obligatory-field" for="projectRole">\r\n                    '+((t=e.text.forms.projectRole)==null?"":t)+'\r\n                </label>\r\n                <div class="rp-custom-col add-user-field">\r\n                    <div class="rp-btn-group rp-width-100">\r\n                        <button data-js-user-project-role id="projectRole" name="projectRole" type="button"\r\n                                class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                                data-toggle="dropdown" value="">\r\n                            <span class="select-value" data-js-user-project-role-text></span>\r\n                            <span class="rp-caret"></span>\r\n                        </button>\r\n                        <ul class="dropdown-menu" data-js-select-role-dropdown>\r\n                            ',_.each(e.roles,function(e,r){n+='\r\n                                <li><a href="#" data-value="'+((t=r)==null?"":t)+'">'+((t=e)==null?"":t)+"</a></li>\r\n                            "}),n+='\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="rp-form-group clearfix" data-js-add-user-form-group>\r\n                <label class="rp-control-label rp-custom-col add-user-label obligatory-field" for="password">\r\n                    '+((t=e.text.forms.password)==null?"":t)+'\r\n                </label>\r\n                <div class="rp-custom-col add-user-field">\r\n                    <input data-js-user-password id="password" name="password" value="" type="text" class="rp-input-default rp-width-100 form-control">\r\n                    <div class="error-bottom">\r\n                        <div class="help-inline" data-js-add-user-form-error></div>\r\n                    </div>\r\n                    <div class="to-gen-pass">\r\n                        <a data-js-generate-password href="#" class="rp-blue-link-undrl rp-link" id="generate_password">\r\n                            '+((t=e.text.forms.genPassword)==null?"":t)+'\r\n                        </a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.cancel)==null?"":t)+'\r\n    </button>\r\n    <button class="rp-btn rp-btn-submit" type="button" data-js-load>\r\n        '+((t=e.text.ui.add)==null?"":t)+"\r\n    </button>\r\n</div>",n},this.JST["tpl-modal-change-password"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.dialogHeader.changePassword}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <div class="rp-change-password-from" data-js-change-password>\r\n        <div class="rp-form-group">\r\n            <label class="rp-control-label col-sm-3 col-xs-12">'+((t=e.text.userProfile.oldPass)==null?"":t)+'</label>\r\n            <div class="col-sm-7 col-xs-12">\r\n                <input data-js-origin-password class="form-control rp-input-default" type="password"\r\n                       placeholder="'+((t=e.text.userProfile.enter)==null?"":t)+" "+((t=e.text.userProfile.oldPass)==null?"":t)+'"\r\n                       value="">\r\n                <div class="help-inline">'+((t=e.text.validation.originalPassRegex)==null?"":t)+'</div>\r\n            </div>\r\n        </div>\r\n        <div data-js-confirm-group>\r\n            <div class="rp-form-group">\r\n                <label class="rp-control-label col-sm-3 col-xs-12">'+((t=e.text.userProfile.newPass)==null?"":t)+'</label>\r\n                <div class="col-sm-7 col-xs-12">\r\n                    <input data-js-new-password class="form-control rp-input-default" type="password"\r\n                           placeholder="'+((t=e.text.userProfile.enter)==null?"":t)+" "+((t=e.text.userProfile.newPass)==null?"":t)+'"\r\n                           value="">\r\n                </div>\r\n            </div>\r\n            <div class="rp-form-group">\r\n                <label class="rp-control-label col-sm-3 col-xs-12">'+((t=e.text.userProfile.confirmPass)==null?"":t)+'</label>\r\n                <div class="col-sm-7 col-xs-12">\r\n                    <input data-js-confirm-password class="form-control rp-input-default confirm" type="password"\r\n                           placeholder="'+((t=e.text.userProfile.confirmPass)==null?"":t)+" "+((t=e.text.userProfile.newPass)==null?"":t)+'"\r\n                           value="">\r\n                    <div class="help-inline"></div>\r\n                    <div class="show-password">\r\n                        <label class="rp-checkbox-wrap">\r\n                            <input data-js-show-password class="rp-input-checkbox" type="checkbox">\r\n                            <span>'+((t=e.text.login.showPassword)==null?"":t)+'</span>\r\n                        </label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.cancel)==null?"":t)+'\r\n    </button>\r\n    <button class="rp-btn rp-btn-submit disabled" type="button" data-js-ok>\r\n        '+((t=e.text.ui.submit)==null?"":t)+"\r\n    </button>\r\n</div>\r\n\r\n\r\n\r\n",n},this.JST["tpl-modal-confirm"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.headerText}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <p>'+((t=e.bodyText)==null?"":t)+"</p>\r\n    ",e.confirmText&&(n+='\r\n        <label class="rp-checkbox-wrap confirm-block">\r\n            <input class="rp-input-checkbox" type="checkbox" data-js-select>\r\n            <span>'+((t=e.confirmText)==null?"":t)+"</span>\r\n        </label>\r\n    "),n+='\r\n</div>\r\n<div class="modal-footer">\r\n    ',e.cancelButtonText&&(n+='\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.cancelButtonText)==null?"":t)+"\r\n    </button>\r\n    "),n+="\r\n    ",e.okButtonText&&(n+='\r\n    <button class="rp-btn '+((t=e.confirmText?"disabled":"")==null?"":t)+" "+((t=e.confirmText||e.okButtonDanger?" rp-btn-danger":" rp-btn-submit")==null?"":t)+'" type="button" data-js-ok>\r\n        '+((t=e.okButtonText)==null?"":t)+"\r\n    </button>\r\n    "),n+="\r\n</div>",n},this.JST["tpl-modal-defect-editor"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.dialogHeader.titleEditDefectType}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <div class="inline-editor pr-defect-editor">\r\n        <div class="container-fluid rp-form-group">\r\n            <label class="rp-control-label rp-defect-type-label" for="selectDefectType">'+((t=e.text.dialog.defectType)==null?"":t)+'</label>\r\n            <div class="btn-group rp-defect-type-btn-group">\r\n                ';var o=e.isMultipleEdit?null:e.getDefectType(e.item);return n+='\r\n                <button id="selectDefectType" data-toggle="dropdown" class="btn rp-defect-type-dropdown dropdown-toggle" value="">\r\n                    <span style="',o||(n+="display:none;"),n+='" data-js-issue-title title="'+((t=o?o.longName:"")==null?"":t)+'" class="pr-defect-type-badge">\r\n                        <i data-js-issue-color style="background: '+((t=o?o.color:"")==null?"":t)+'"></i>\r\n                        <span data-js-issue-name>'+((t=o?o.longName:"")==null?"":t)+'</span>\r\n                    </span>\r\n                    <span data-js-noissue-name style="',o&&(n+="display:none;"),n+='">'+((t=e.text.dialog.choseDefectType)==null?"":t)+'</span>\r\n                    <span class="caret"></span>\r\n                </button>\r\n                <ul class="dropdown-menu rp-defects-menu">\r\n                    ',_.each(e.defectsGroup,function(i,s){n+="\r\n                    ";var o=s==0?"12":"3",u=s==0?"12":"6";n+="\r\n                    ";var a=s==1?"visible-md visible-lg":"",f=s%2==0?"":"visible-sm";n+="\r\n                    ",s>0&&(n+='\r\n                    <li role="separator" class="divider '+((t=a)==null?"":t)+'"></li>\r\n                    <li role="separator" class="divider '+((t=f)==null?"":t)+'"></li>\r\n                    <li role="separator" class="divider visible-xs-block"></li>\r\n                    '),n+='\r\n                    <li class="col-md-'+((t=o)==null?"":t)+" col-sm-"+((t=u)==null?"":t)+' col-xs-12">\r\n                        ',_.each(e.subDefects[i],function(i){n+="\r\n                        ";var s=!e.isMultipleEdit&&i.locator==e.getIssueType(e.item)?!0:!1;n+='\r\n                        <div class="rp-defect-row">\r\n                            <label title="'+r(i.longName)+'" class="'+((t=s?"selected":"")==null?"":t)+'"\r\n                                   data-js-select-issue data-locator="'+((t=i.locator)==null?"":t)+'">\r\n                                <i style="background: '+r(i.color)+'"></i>'+r(i.longName.setMaxLength(20))+"\r\n                            </label>\r\n                        </div>\r\n                        "}),n+="\r\n                    </li>\r\n                    "}),n+='\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class="text-editor" data-js-issue-comment></div>\r\n        <div class="rp-defect-editor-bottom">\r\n            ',e.isMultipleEdit&&(n+='\r\n            <label class="rp-checkbox-wrap replace-comments">\r\n                <input class="rp-input-checkbox" type="checkbox" data-js-replace-comment>\r\n                <span>'+((t=e.text.launches.replaceComments)==null?"":t)+"</span>\r\n            </label>\r\n            "),n+='\r\n            <div class="hot-keys-wrapper">\r\n                <span class="hot-keys">'+((t=e.text.ui.escToCancel)==null?"":t)+'</span>\r\n                <span class="hot-keys">'+((t=e.text.ui.ctrlEnterToSubmit)==null?"":t)+'</span>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.cancel)==null?"":t)+'\r\n    </button>\r\n    <button class="rp-btn rp-btn-submit" type="button" data-js-save>\r\n        '+((t=e.text.ui.save)==null?"":t)+"\r\n    </button>\r\n</div>\r\n",n},this.JST["tpl-modal-edit-dashboard"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.mode=="save"?e.text.dialogHeader.addDashboard:e.text.dialogHeader.editDashboard}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <form class="rp-form">\r\n        <label>\r\n            <span>'+((t=e.text.ui.name)==null?"":t)+'</span>\r\n            <input class="rp-input" placeholder="'+((t=e.text.dashboard.namePlaceholder)==null?"":t)+'" type="text"\r\n                   data-js-name-input>\r\n            <span class="validate-hint"></span>\r\n        </label>\r\n        <label>\r\n            <span>'+((t=e.text.ui.description)==null?"":t)+'</span>\r\n            <textarea class="rp-input" placeholder="'+((t=e.text.dashboard.descriptionPlaceholder)==null?"":t)+'" data-js-description></textarea>\r\n        </label>\r\n        <div class="rp-field">\r\n            <span>'+((t=e.text.filter.share)==null?"":t)+'</span>\r\n            <label class="rp-switcher-big">\r\n                <span class="turn-on">'+((t=e.text.ui.on)==null?"":t)+'</span>\r\n                <span class="turn-off">'+((t=e.text.ui.off)==null?"":t)+'</span>\r\n                <input type="checkbox" data-js-is-shared>\r\n                <div class="slider"></div>\r\n            </label>\r\n        </div>\r\n    </form>\r\n\r\n\r\n</div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.cancel)==null?"":t)+'\r\n    </button>\r\n    <button class="rp-btn rp-btn-submit" type="button" data-js-ok>\r\n        '+((t=e.mode=="save"?e.text.ui.add:e.text.ui.update)==null?"":t)+"\r\n    </button>\r\n</div>\r\n\r\n\r\n\r\n",n},this.JST["tpl-modal-edit-user-info"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.dialogHeader.editUserInfo}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <div class="rp-edit-user-info">\r\n        <div class="rp-form-group">\r\n            <label class="rp-control-label col-sm-3 col-xs-12">'+((t=e.text.userProfile.userName)==null?"":t)+'</label>\r\n            <div class="col-sm-7 col-xs-12">\r\n                <input data-js-full-name class="form-control rp-input-default" type="text"\r\n                       placeholder="'+((t=e.text.userProfile.enter)==null?"":t)+" "+((t=e.text.userProfile.userName)==null?"":t)+'"\r\n                       value="">\r\n                <div class="help-inline"></div>\r\n            </div>\r\n        </div>\r\n        <div class="rp-form-group">\r\n            <label class="rp-control-label col-sm-3 col-xs-12">'+((t=e.text.userProfile.email)==null?"":t)+'</label>\r\n            <div class="col-sm-7 col-xs-12">\r\n                <input data-js-user-email class="form-control rp-input-default" type="text"\r\n                       placeholder="'+((t=e.text.userProfile.enter)==null?"":t)+" "+((t=e.text.userProfile.email)==null?"":t)+'"\r\n                       value="">\r\n                <div class="help-inline"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.cancel)==null?"":t)+'\r\n    </button>\r\n    <button class="rp-btn rp-btn-submit disabled" type="button" data-js-ok>\r\n        '+((t=e.text.ui.submit)==null?"":t)+"\r\n    </button>\r\n</div>\r\n\r\n\r\n\r\n",n},this.JST["tpl-modal-filter-edit"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.mode=="save"?e.text.dialog.addFilter:e.text.dialog.editFilter}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <label class="name-label modal-field form-group">\r\n        <span class="field-title">'+((t=e.text.filter.name)==null?"":t)+'</span>\r\n        <input class="rp-input form-control" placeholder="'+((t=e.text.filter.namePlaceholder)==null?"":t)+'" type="text" data-js-name-input>\r\n        <span class="validate-hint"></span>\r\n    </label>\r\n\r\n    <label class="description-label modal-field">\r\n        <span class="field-title">'+((t=e.text.filter.description)==null?"":t)+'</span>\r\n        <textarea class="rp-input form-control" placeholder="'+((t=e.text.filter.descriptionPlaceholder)==null?"":t)+'" data-js-description></textarea>\r\n        <!--<span class="help-inline"></span>-->\r\n    </label>\r\n    <label class="share-label modal-field form-group">\r\n        <span class="field-title">'+((t=e.text.filter.share)==null?"":t)+'</span>\r\n        <label class="rp-switcher-big">\r\n            <span class="turn-on">'+((t=e.text.ui.on)==null?"":t)+'</span>\r\n            <span class="turn-off">'+((t=e.text.ui.off)==null?"":t)+'</span>\r\n            <input type="checkbox" data-js-is-shared>\r\n            <div class="slider"></div>\r\n        </label>\r\n    </label>\r\n\r\n\r\n</div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.cancel)==null?"":t)+'\r\n    </button>\r\n    <button class="rp-btn rp-btn-submit" type="button" data-js-ok>\r\n        '+((t=e.mode=="save"?e.text.ui.add:e.text.ui.update)==null?"":t)+"\r\n    </button>\r\n</div>\r\n\r\n\r\n\r\n",n},this.JST["tpl-modal-force-update"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.userProfile.msgRegenMid}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <p class="warning">\r\n        '+((t=e.text.userProfile.updateUserDataFrom)==null?"":t)+" <span data-js-type></span>:\r\n        "+((t=e.msg)==null?"":t)+"\r\n    </p>\r\n    <p>"+((t=e.text.ui.reloginToApply)==null?"":t)+'</p>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-submit" type="button" data-js-ok>\r\n        '+((t=e.text.ui.relogin)==null?"":t)+"\r\n    </button>\r\n</div>",n},this.JST["tpl-modal-invite-user"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.members.inviteMember}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <div class="rp-invite-user-form">\r\n        <h4>'+((t=e.text.admin.inviteNewUser)==null?"":t)+'</h4>\r\n        <form id="addMemberForm" name="addMemberForm" data-js-invite-user-form>\r\n            <div class="rp-form-group clearfix" data-js-invite-user-form-group>\r\n                <label class="rp-control-label rp-custom-col invite-user-label obligatory-field" for="user">\r\n                    '+((t=e.isUsers?e.text.forms.email:e.text.forms.loginOrEmail)==null?"":t)+'\r\n                </label>\r\n                <div class="rp-custom-col invite-user-field">\r\n                    <input data-js-user id="user" name="user" type="text" value=""\r\n                           class="tst-user">\r\n                    <div class="error-bottom">\r\n                        <div class="help-inline" data-js-invite-user-form-error></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            ',e.isUsers&&(n+='\r\n            <div class="rp-form-group clearfix" data-js-invite-user-form-group>\r\n                <label class="rp-control-label rp-custom-col invite-user-label obligatory-field" for="project">\r\n                    '+((t=e.text.forms.selectProject)==null?"":t)+'\r\n                </label>\r\n                <div class="rp-custom-col invite-user-field">\r\n                    <input data-js-user-project id="project" name="project" type="text" value="" class="rp-input-default">\r\n                    <div class="error-bottom">\r\n                        <div class="help-inline" data-js-invite-user-form-error></div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            '),n+='\r\n            <div class="rp-form-group clearfix" data-js-invite-user-form-group>\r\n                <label class="rp-control-label rp-custom-col invite-user-label obligatory-field" for="projectRole">\r\n                    '+((t=e.text.forms.projectRole)==null?"":t)+'\r\n                </label>\r\n                <div class="rp-custom-col invite-user-field">\r\n                    <div class="rp-btn-group rp-width-100">\r\n                        <button data-js-user-project-role id="projectRole" name="projectRole" type="button"\r\n                                class="rp-btn-group rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                                data-toggle="dropdown">\r\n                            <span class="select-value" data-js-user-project-role-text></span>\r\n                            <span class="rp-caret"></span>\r\n                        </button>\r\n                        <ul class="dropdown-menu" data-js-select-role-dropdown>\r\n                            ',_.each(e.roles,function(r,i){n+="\r\n                            ";var s=e.canSelectRole(i)?"":"disabled-option";n+='\r\n                            <li><a href="#" data-value="'+((t=i)==null?"":t)+'" class="'+((t=s)==null?"":t)+'">'+((t=r)==null?"":t)+"</a></li>\r\n                            "}),n+='\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </form>\r\n        <div data-js-success-from class="hide">\r\n            <div class="rp-form-group clearfix">\r\n                <label class="rp-control-label rp-custom-col invite-user-label">\r\n                    '+((t=e.text.members.invitationSent)==null?"":t)+'\r\n                </label>\r\n                <div class="rp-custom-col invite-user-field">\r\n                    <div class="invite-send-email" data-js-email></div>\r\n                </div>\r\n            </div>\r\n            <div class="rp-form-group clearfix">\r\n                <label class="rp-control-label rp-custom-col invite-user-label" for="link">\r\n                    '+((t=e.text.forms.linkInvitation)==null?"":t)+'\r\n                </label>\r\n                <div class="rp-custom-col invite-user-field">\r\n                    <input data-js-invite-link id="link" name="link" type="text" readonly value=""\r\n                           class="rp-input-default rp-width-100 form-control">\r\n                    <div class="copy-invite-link"><a href="" class="rp-link" data-js-copy-link>'+((t=e.text.forms.copyLink)==null?"":t)+'</a></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.cancel)==null?"":t)+'\r\n    </button>\r\n    <button class="rp-btn rp-btn-submit" type="button" data-js-load>\r\n        '+((t=e.text.admin.invite)==null?"":t)+'\r\n    </button>\r\n    <button class="rp-btn rp-btn-submit hide" type="button" data-js-ok>\r\n        '+((t=e.text.ui.ok)==null?"":t)+"\r\n    </button>\r\n</div>",n},this.JST["tpl-modal-launch-edit"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.isEditLaunch?e.text.dialog.launchEditor:e.text.dialog.itemEditor;return n+="\r\n"+((t=e.includeTemplate("_tpl-modal-header",{headerText:o}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <h4>'+((t=e.isEditLaunch?e.text.dialog.launchDetails:e.text.dialog.testItemDetails)==null?"":t)+'</h4>\r\n    <h2 data-js-launch-name></h2>\r\n    <div class="fields">\r\n        <label class="form-group">\r\n            <span>'+((t=e.text.forms.tags)==null?"":t)+'</span>\r\n            <div class="tags-wrapper">\r\n                <input class="rp-input" type="text" placeholder="'+((t=e.text.dialog.launchTagPlaceholder)==null?"":t)+'" data-js-tags>\r\n            </div>\r\n        </label>\r\n        <label class="form-group">\r\n            <div data-js-markdown-container></div>\r\n        </label>\r\n    </div>\r\n    ',e.isEditLaunch&&(n+='\r\n        <div class="warning-block">\r\n            <div class="warning"><i class="rp-icons rp-icons-warning"></i> Warning!</div>\r\n            <div class="warning-message">'+((t=e.text.launches.disclaimerChangeDescription)==null?"":t)+"</div>\r\n        </div>\r\n    "),n+='\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.cancel)==null?"":t)+'\r\n    </button>\r\n    <button class="rp-btn rp-btn-submit" type="button" data-js-save>\r\n        '+((t=e.text.ui.save)==null?"":t)+"\r\n    </button>\r\n</div>\r\n",n},this.JST["tpl-modal-launches-compare"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.launches.compareLaunches}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <div class="preloader">\r\n        <i class="material-icons loader-animation">refresh</i>\r\n    </div>\r\n    <div class="widget-content" data-js-widget-content></div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.cancel)==null?"":t)+"\r\n    </button>\r\n</div>",n},this.JST["tpl-modal-launches-merge"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.launches.mergeLaunches}))==null?"":t)+'\r\n<div class="modal-body">\r\n\r\n    <h4>'+((t=e.text.launches.mergeLaunchesModalTitle)==null?"":t)+'</h4>\r\n    <div class="fields">\r\n        <div class="rp-form-group name">\r\n            <span class="field-caption">'+((t=e.text.launches.launchName)==null?"":t)+'</span>\r\n            <input type="text" id="mergeName" class="rp-input-default" value="'+r(e.name)+'">\r\n            <span class="help-inline"></span>\r\n        </div>\r\n        <div class="rp-form-group owner">\r\n            <span class="field-caption">'+((t=e.text.forms.owner)==null?"":t)+'</span>\r\n            <input type="text" class="rp-input-default" value="'+r(e.owner)+'" disabled="disabled">\r\n        </div>\r\n        <div class="rp-form-group description">\r\n            <span class="field-caption">'+((t=e.text.forms.description)==null?"":t)+'</span>\r\n            <textarea id="mergeDescription" class="rp-input-default" rows="3" data-js-description>'+((t=e.description)==null?"":t)+'</textarea>\r\n            <span class="help-inline"></span>\r\n        </div>\r\n        <div class="rp-form-group tags">\r\n            <span class="field-caption">'+((t=e.text.forms.tags)==null?"":t)+'</span>\r\n            <input type="text" class="rp-input-default" id="mergeTags" data-warning="'+((t=e.text.ui.enterChars)==null?"":t)+'"\r\n                    placeholder="" value="'+((t=e.tags.join(","))==null?"":t)+'"/>\r\n        </div>\r\n        <div class="rp-form-group start-time">\r\n            <span class="field-caption">'+((t=e.text.forms.startTime)==null?"":t)+'</span>\r\n            <input type="text" class="rp-input-default" value="'+r(e.dateFormat(e.startTime))+'" disabled="disabled">\r\n        </div>\r\n        <div class="rp-form-group end-time">\r\n            <span class="field-caption">'+((t=e.text.forms.endTime)==null?"":t)+'</span>\r\n            <input type="text" class="rp-input-default" value="'+r(e.dateFormat(e.endTime))+'" disabled="disabled">\r\n        </div>\r\n        <div class="rp-form-group extended">\r\n            <label class="rp-checkbox-wrap">\r\n                <input class="rp-input-checkbox" type="checkbox" id="extendWithOriginal" name="extendWithOriginal">\r\n                <span>'+((t=e.text.launches.extendWithOriginal)==null?"":t)+'</span>\r\n            </label>\r\n        </div>\r\n    </div>\r\n    <div class="preloader">\r\n        <i class="material-icons loader-animation">refresh</i>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.cancel)==null?"":t)+'\r\n    </button>\r\n    <button class="rp-btn rp-btn-submit" type="button" data-js-submit>\r\n        '+((t=e.text.ui.merge)==null?"":t)+"\r\n    </button>\r\n</div>",n},this.JST["tpl-modal-load-bug"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.launches.loadBug,isBeta:true}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <h4>'+((t=e.text.launches.addIssueId)==null?"":t)+'</h4>\r\n\r\n    <div class="load-items-container">\r\n        ';if(e.externalSystems.length>1){n+='\r\n        <label class="bts-label">\r\n            <span>'+((t=e.text.forms.projectNameIn)==null?"":t)+'</span>\r\n            <button class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle" data-toggle="dropdown" aria-expanded="false">\r\n                <span class="select-value" data-js-bts-value></span>\r\n                <span class="rp-caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu rp-width-100">\r\n                ';for(var o=0;o<e.externalSystems.length;o++)n+='\r\n                <li>\r\n                    <a href="" data-bts-select-item="'+((t=e.externalSystems[o].id)==null?"":t)+'">\r\n                        <span class="text-ellipsis">'+((t=e.externalSystems[o].project)==null?"":t)+"</span>\r\n                    </a>\r\n                </li>\r\n                ";n+='\r\n            </ul>\r\n        </label>\r\n        <span class="bts-description">'+((t=e.text.forms.bugWillBeLoaded)==null?"":t)+" <span data-js-bts-link></span></span>\r\n        "}return n+='\r\n        <div data-js-load-items-container class="items-container"></div>\r\n    </div>\r\n    <div class="rp-btn rp-btn-default rp-button-with-icon add-button" title="'+((t=e.text.bts.addNewIssues)==null?"":t)+'" data-js-add-ticket>\r\n        <i class="material-icons">add</i>\r\n        <span class="rp-btn-val">'+((t=e.text.bts.addNewIssue)==null?"":t)+'</span>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.cancel)==null?"":t)+'\r\n    </button>\r\n    <button class="rp-btn rp-btn-submit" type="button" data-js-load>\r\n        '+((t=e.text.ui.load)==null?"":t)+"\r\n    </button>\r\n</div>",n},this.JST["tpl-modal-log-attachment-binary"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.dialogHeader.logAttachment}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <div class="preloader">\r\n        <i class="material-icons loader-animation">refresh</i>\r\n    </div>\r\n    <div data-js-binary-holder></div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.close)==null?"":t)+"\r\n    </button>\r\n</div>\r\n\r\n",n},this.JST["tpl-modal-log-attachment-image"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.dialogHeader.logAttachment}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <div class="preloader">\r\n        <i class="material-icons loader-animation">refresh</i>\r\n    </div>\r\n    <div class="image-holder"><img src='+((t=e.imageSrc)==null?"":t)+' alt="" data-js-image></div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.close)==null?"":t)+"\r\n    </button>\r\n</div>\r\n",n},this.JST["tpl-modal-permissions-map"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.project.permissionsMap}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <div class="rp-permissions-map">\r\n        <table class="permissions-map-table">\r\n            <thead>\r\n            <tr>\r\n                <th rowspan="2">'+((t=e.text.permissionMap.actionRole)==null?"":t)+'</th>\r\n                <th rowspan="2">'+((t=e.text.ui.admin)==null?"":t)+'</th>\r\n                <th rowspan="2">'+((t=e.text.ui.manager)==null?"":t)+'</th>\r\n                <th rowspan="2">'+((t=e.text.ui.lead)==null?"":t)+'</th>\r\n                <th colspan="2" class="roles-th">'+((t=e.text.ui.member)==null?"":t)+'</th>\r\n                <th colspan="2" class="roles-th">'+((t=e.text.ui.customer)==null?"":t)+'</th>\r\n            </tr>\r\n            <tr>\r\n                <th class="roles-th">'+((t=e.text.permissionMap.owner)==null?"":t)+'</th>\r\n                <th class="roles-th">'+((t=e.text.permissionMap.notOwner)==null?"":t)+'</th>\r\n                <th class="roles-th">'+((t=e.text.permissionMap.owner)==null?"":t)+'</th>\r\n                <th class="roles-th">'+((t=e.text.permissionMap.notOwner)==null?"":t)+"</th>\r\n            </tr>\r\n            </thead>\r\n            <tbody>\r\n            <tr>\r\n                <td>"+((t=e.text.permissionMap.accessToManagementSystem)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>'+((t=e.text.permissionMap.createProject)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>'+((t=e.text.permissionMap.deleteProject)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>'+((t=e.text.permissionMap.updateSettings)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>'+((t=e.text.permissionMap.seeSettings)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    '+((t=e.text.ui.create)==null?"":t)+"\r\n                    "+((t=e.text.permissionMap.internal)==null?"":t)+"\r\n                    "+((t=e.text.permissionMap.user)==null?"":t)+'\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    '+((t=e.text.admin.invite)==null?"":t)+"\r\n                    "+((t=e.text.permissionMap.internal)==null?"":t)+"\r\n                    "+((t=e.text.permissionMap.user)==null?"":t)+'\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <div class="check-attention">\r\n                        <i class="rp-icons rp-icons-check"></i>\r\n                        <span class="attention">*</span>\r\n                    </div>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <div class="check-attention">\r\n                        <i class="rp-icons rp-icons-check"></i>\r\n                        <span class="attention">*</span>\r\n                    </div>\r\n                </td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    '+((t=e.text.permissionMap.unSlashAssign)==null?"":t)+"\r\n                    "+((t=e.text.permissionMap.internal)==null?"":t)+"\r\n                    "+((t=e.text.permissionMap.userToFrom)==null?"":t)+'\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <div class="check-attention">\r\n                        <i class="rp-icons rp-icons-check"></i>\r\n                        <span class="attention">**</span>\r\n                    </div>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <div class="check-attention">\r\n                        <i class="rp-icons rp-icons-check"></i>\r\n                        <span class="attention">**</span>\r\n                    </div>\r\n                </td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>'+((t=e.text.permissionMap.changeUserRole)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <div class="check-attention">\r\n                        <i class="rp-icons rp-icons-check"></i>\r\n                        <span class="attention">*</span>\r\n                    </div>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <div class="check-attention">\r\n                        <i class="rp-icons rp-icons-check"></i>\r\n                        <span class="attention">*</span>\r\n                    </div>\r\n                </td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    '+((t=e.text.ui.del)==null?"":t)+"\r\n                    "+((t=e.text.permissionMap.internal)==null?"":t)+"\r\n                    "+((t=e.text.permissionMap.user)==null?"":t)+'\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>'+((t=e.text.permissionMap.seeMembers)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>\r\n                    '+((t=e.text.permissionMap.editOwnAccount1)==null?"":t)+'\r\n                    <span class="attention">***</span>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>'+((t=e.text.permissionMap.deleteLaunch)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>'+((t=e.text.permissionMap.forceFinishLaunch)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>'+((t=e.text.permissionMap.startAnalysis)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>'+((t=e.text.permissionMap.deleteTestItem)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>'+((t=e.text.permissionMap.moveToDebug)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n                <td></td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>'+((t=e.text.permissionMap.mergeLaunches)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td></td>\r\n            </tr>\r\n            <tr>\r\n                <td>'+((t=e.text.permissionMap.workWithFiltersEtc)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td>'+((t=e.text.permissionMap.readData)==null?"":t)+'</td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n                <td class="has-permission">\r\n                    <i class="rp-icons rp-icons-check"></i>\r\n                </td>\r\n            </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <div class="permission-attention">\r\n        <span class="attention">*</span>\r\n        <span>'+((t=e.text.permissionMap.oneAttention)==null?"":t)+'</span>\r\n    </div>\r\n    <div class="permission-attention">\r\n        <span class="attention">**</span>\r\n        <span>'+((t=e.text.permissionMap.twoAttention)==null?"":t)+'</span>\r\n    </div>\r\n    <div class="permission-attention">\r\n        <span class="attention">***</span>\r\n        <span>'+((t=e.text.permissionMap.threeAttention)==null?"":t)+"</span>\r\n    </div>\r\n</div>",n},this.JST["tpl-modal-post-bug"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.launches.postBug,isBeta:true}))==null?"":t)+'\r\n<div class="modal-body">\r\n    ',e.systems.length>1&&(n+='\r\n\r\n            <div class="rp-form-group project-selector-field">\r\n                <label class="rp-control-label rp-custom-col obligatory-field"\r\n                    for="targetProject">\r\n                    '+((t=e.text.bts.projectNameIn)==null?"":t)+'\r\n                    <span class="text-uppercase">'+((t=e.source)==null?"":t)+'</span>\r\n                </label>\r\n\r\n                    <div class="btn-group">\r\n                        <button type="button"\r\n                            class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                            data-toggle="dropdown"\r\n                            id="targetProject">\r\n                            <span class="select-value">'+((t=e.current.project)==null?"":t)+'</span>\r\n                            <span class="rp-caret"></span>\r\n                        </button>\r\n                        <ul class="dropdown-menu rp-width-100">\r\n                            ',_.forEach(e.systems,function(r,i){n+='\r\n                                <li class="'+((t=r.id===e.current.id?"active":"")==null?"":t)+'">\r\n                                    <a href="#"\r\n                                        id="'+((t=r.id)==null?"":t)+'"\r\n                                        class="bts-project project-name">\r\n                                        '+((t=r.project)==null?"":t)+"\r\n                                    </a>\r\n                                </li>\r\n                            "}),n+='\r\n                        </ul>\r\n                    </div>\r\n                    <div class="p-top-10 label-post-to">\r\n                        '+((t=e.text.launches.willBePostedTo)==null?"":t)+'\r\n                        <span id="postToUrl">'+((t=e.systems[0].url)==null?"":t)+"</span>\r\n                    </div>\r\n\r\n            </div>\r\n\r\n    "),n+='\r\n    <div id="dynamicContent" class="bts-fields"></div>\r\n    <div id="requiredFields" class="required-fields-error">\r\n        <div class="rp-form-group">\r\n            <div class="help-inline rp-display-block">\r\n                '+((t=e.text.launches.fillAllRequired)==null?"":t)+'\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    <div id="staticContent" class="static-content">\r\n        ',e.isMultiply||(n+='\r\n        <div class="rp-form-group include-data" id="includesBlock">\r\n            <div class="rp-form-title">\r\n                <span>'+((t=e.text.launches.includeData)==null?"":t)+'</span>\r\n            </div>\r\n            <div class="rp-form-group">\r\n                <div class="switch-field">\r\n                    <label class="rp-control-label m-bottom-10">\r\n                        '+((t=e.text.launches.includeScreenshots)==null?"":t)+'\r\n                    </label>\r\n                    <label class="rp-switcher-big" id="include_data">\r\n                        <span class="turn-on">'+((t=e.text.ui.on)==null?"":t)+'</span>\r\n                        <span class="turn-off">'+((t=e.text.ui.off)==null?"":t)+'</span>\r\n                        <input type="checkbox" data-js-is-included>\r\n                        <div class="slider"></div>\r\n                    </label>\r\n                </div>\r\n                <div class="switch-field">\r\n                    <label class="rp-control-label m-bottom-10">\r\n                        '+((t=e.text.launches.includeLogs)==null?"":t)+'\r\n                    </label>\r\n                    <label class="rp-switcher-big" id="include_logs">\r\n                        <span class="turn-on">'+((t=e.text.ui.on)==null?"":t)+'</span>\r\n                        <span class="turn-off">'+((t=e.text.ui.off)==null?"":t)+'</span>\r\n                        <input type="checkbox" data-js-is-included>\r\n                        <div class="slider"></div>\r\n                    </label>\r\n                </div>\r\n                <div class="switch-field">\r\n                    <label class="rp-control-label m-bottom-10">\r\n                        '+((t=e.text.launches.includeComments)==null?"":t)+'\r\n                    </label>\r\n                    <label class="rp-switcher-big" id="include_comments">\r\n                        <span class="turn-on">'+((t=e.text.ui.on)==null?"":t)+'</span>\r\n                        <span class="turn-off">'+((t=e.text.ui.off)==null?"":t)+'</span>\r\n                        <input type="checkbox" data-js-is-included>\r\n                        <div class="slider"></div>\r\n                    </label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        '),n+='\r\n        <div class="rp-form-group panel-group credentials-section" id="accordion" role="tablist"\r\n             aria-multiselectable="true">\r\n            <div class="rp-form-title" role="tab">\r\n                <a data-toggle="collapse" id="credentialsLink"\r\n                    class="'+((t=e.collapse?"collapsed":"")==null?"":t)+'"\r\n                    data-parent="#accordion"\r\n                    href="#collapseCredentials"\r\n                    aria-expanded="true"\r\n                    aria-controls="collapseOne">\r\n                    '+((t=e.text.launches[e.source+"Credentials"])==null?"":t)+'\r\n                </a>\r\n            </div>\r\n            <div class="clearfix"></div>\r\n            <div id="collapseCredentials"\r\n                class="panel-collapse collapse '+((t=e.collapse?"":"in")==null?"":t)+'"\r\n                role="tabpanel"\r\n                aria-labelledby="headingOne">\r\n                <div class="rp-form-group auth-type-selector">\r\n                    <label class="rp-control-label rp-custom-col">\r\n                        '+((t=e.text.bts.authorizationType)==null?"":t)+'\r\n                    </label>\r\n                    <div class="rp-custom-col dropdown">\r\n                        <div class="btn-group input-group to-100-width">\r\n                            <button id="systemAuth"\r\n                                data-toggle="dropdown"\r\n                                class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle">\r\n                                <span class="select-value">\r\n                                    '+((t=e.text.ui[e.systems[0].systemAuth])==null?"":t)+'\r\n                                </span>\r\n                                <span class="rp-caret"></span>\r\n                            </button>\r\n                            <ul class="dropdown-menu rp-width-100">\r\n                                ',_.forEach(e.authorizationTypes,function(r){n+="\r\n                                    ";var i=r.value===e.systems[0].systemAuth?"active":"";n+='\r\n                                    <li id="'+((t=r.value)==null?"":t)+'" class="'+((t=i)==null?"":t)+'">\r\n                                        <a href="#" class="auth-type">'+((t=r.name)==null?"":t)+"</a>\r\n                                    </li>\r\n                                "}),n+='\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div id="authorizationType" class="credentials"></div>\r\n                ',e.showCredentialsSoft&&e.source!="jira"&&(n+='\r\n                    <div id="credentialsSoft">\r\n                            '+((t=e.source==="tfs"?e.text.launches.credentialsSoftTfs:e.text.launches.credentialsSoft)==null?"":t)+"\r\n                    </div>\r\n                "),n+='\r\n            </div>\r\n        </div>\r\n        <div class="rp-form-group rp-display-block credentials-error-block">\r\n            <div class="help-inline rp-display-block">\r\n                <div id="credentialsWrong"\r\n                    data-credentials="'+((t=e.text.bts.errorCredentials)==null?"":t)+'"\r\n                    data-fields="'+((t=e.text.launches.problemInteracting)==null?"":t)+'"\r\n                    data-general="'+((t=e.text.launches.problemGeneral)==null?"":t)+'"\r\n                    data-fill="'+((t=e.text.launches.fillAllRequired)==null?"":t)+'">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.cancel)==null?"":t)+'\r\n    </button>\r\n    <button class="rp-btn rp-btn-submit" type="button" data-js-post>\r\n        '+((t=e.text.ui.post)==null?"":t)+"\r\n    </button>\r\n</div>\r\n",n},this.JST["tpl-modal-regenerate-uuid"]=function(e){var t,n="",r=_.escape;return n+=((t=e.includeTemplate("_tpl-modal-header",{headerText:e.text.dialogHeader.regenerateUUID}))==null?"":t)+'\r\n<div class="modal-body">\r\n    <p class="warning">\r\n        <strong>'+((t=e.text.userProfile.msgRegenMid)==null?"":t)+"</strong>\r\n    </p>\r\n    <p>"+((t=e.text.userProfile.msgRegenFoot)==null?"":t)+'.</p>\r\n\r\n</div>\r\n<div class="modal-footer">\r\n    <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n        '+((t=e.text.ui.cancel)==null?"":t)+'\r\n    </button>\r\n    <button class="rp-btn rp-btn-submit" type="button" data-js-ok>\r\n        '+((t=e.text.ui.ok)==null?"":t)+"\r\n    </button>\r\n</div>",n},this.JST["tpl-model-load-bug-item"]=function(e){var t,n="",r=_.escape;return n+='<label class="link-label form-group">\r\n    <span class="row-title">'+((t=e.text.bts.linkToIssue)==null?"":t)+'</span>\r\n    <input class="rp-input form-control" type="text" placeholder="Enter Link to Issue" data-js-link-input>\r\n    <span class="validate-hint"></span>\r\n</label>\r\n<label class="issue-label form-group">\r\n    <span class="row-title">'+((t=e.text.bts.issueId)==null?"":t)+'</span>\r\n    <input class="rp-input form-control" type="text" placeholder="Issue ID" data-js-issue-input>\r\n    <span class="validate-hint"></span>\r\n</label>\r\n<span class="remove-row" data-js-remove-row>\r\n    <i class="material-icons">clear</i>\r\n</span>\r\n',n},this.JST["tpl-bts-auth-type"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.access?"":'disabled="disabled"';return n+="\r\n",e.systemAuth==="BASIC"||e.systemAuth==="NTLM"?(n+='\r\n<div id="basicBlock">\r\n    <div class="rp-form-group">\r\n        <label class="rp-control-label obligatory-field" for="username">\r\n            '+((t=e.text.bts.userName)==null?"":t)+'\r\n        </label>\r\n        <input type="text" class="rp-input-default form-control bts-property required-value" id="username"\r\n               value="'+r(e.username||"")+'" '+((t=o)==null?"":t)+' />\r\n        <span class="help-inline"></span>\r\n    </div>\r\n    <div class="rp-form-group">\r\n        <label class="rp-control-label obligatory-field" for="password">\r\n            '+((t=e.text.bts.password)==null?"":t)+'\r\n        </label>\r\n        <input type="password" class="rp-input-default form-control bts-property required-value" id="password" '+((t=o)==null?"":t)+'\r\n        value="'+r(e.hasPassword?e.defaultPassword:"")+'" />\r\n        <span class="help-inline"></span>\r\n    </div>\r\n    ',e.systemAuth==="NTLM"&&(n+='\r\n    <div class="rp-form-group">\r\n        <label class="rp-control-label obligatory-field" for="domain">\r\n            '+((t=e.text.bts.domain)==null?"":t)+'\r\n        </label>\r\n        <input type="text" class="rp-input-default bts-property" id="domain"\r\n               value="'+r(e.domain||"")+'" '+((t=o)==null?"":t)+' />\r\n        <span class="help-inline"></span>\r\n    </div>\r\n    '),n+="\r\n</div>\r\n"):e.systemAuth==="APIKEY"?n+='\r\n<div id="accessKeyBlock">\r\n    <div class="rp-form-group">\r\n        <label class="rp-control-label obligatory-field" for="accessKey">\r\n            '+((t=e.text.bts.apiKey)==null?"":t)+'\r\n        </label>\r\n        <textarea type="text" class="rp-input-default bts-property" id="accessKey" '+((t=o)==null?"":t)+" >"+r(e.accessKey||"")+'</textarea>\r\n        <span class="help-inline"></span>\r\n    </div>\r\n</div>\r\n':n+='\r\n<div id="oauthBlock">\r\n    <div class="rp-form-group">\r\n        <label class="rp-control-label obligatory-field" for="accessKey">\r\n            '+((t=e.text.bts.oAuthToken)==null?"":t)+'\r\n        </label>\r\n        <input type="text" class="rp-input-default bts-property" id="accessKey" '+((t=o)==null?"":t)+'\r\n        placeholder="xxxxxxxxx-xxxxxxxxx-xxxxxxx" value="'+r(e.accessKey||"")+'" />\r\n        <span class="help-inline"></span>\r\n    </div>\r\n</div>\r\n',n},this.JST["tpl-bts-instance"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.access?"":'disabled="disabled"';return n+='\r\n<div id="btsBlock" class="bts-block">\r\n    <div id="propertiesWrapper" class="bts-properties">\r\n        <div class="rp-form-group clearfix">\r\n            <label class="rp-control-label obligatory-field" for="url">\r\n                '+((t=e.text.bts.linkTo)==null?"":t)+'\r\n            </label>\r\n            <input type="text" class="rp-input-default bts-property" id="url"\r\n                   value="'+r(e.url||"")+'" '+((t=o)==null?"":t)+'>\r\n            <span class="help-inline"></span>\r\n            ',e.access&&(n+='\r\n            <div class="bts-properties-controls">\r\n                <a href="javascript:void(0);"\r\n                   class="edit-item"\r\n                   id="editBtsProperties"\r\n                   alt="'+((t=e.text.ui.edit)==null?"":t)+'"\r\n                   title="'+((t=e.text.ui.edit)==null?"":t)+'">\r\n                    <i class="material-icons">edit</i>\r\n                </a>\r\n                <a href="javascript:void(0);"\r\n                   class="delete-item"\r\n                   id="deleteInstance"\r\n                   alt="'+((t=e.text.bts.removeProject)==null?"":t)+'"\r\n                   title="'+((t=e.text.bts.removeProject)==null?"":t)+'">\r\n                    <i class="rp-icons rp-icons-cancel"></i>\r\n                </a>\r\n            </div>\r\n            '),n+='\r\n        </div>\r\n        <div class="rp-form-group clearfix">\r\n            <label class="rp-control-label obligatory-field" for="project">\r\n                '+((t=e.text.bts[e.projectType])==null?"":t)+'\r\n            </label>\r\n            <input type="text" class="rp-input-default form-control rp-width-100 bts-property" id="project"\r\n                   value="'+r(e.project||"")+'" '+((t=o)==null?"":t)+' />\r\n            <span class="help-inline"></span>\r\n        </div>\r\n        <div class="rp-form-group clearfix">\r\n            <label class="rp-control-label">\r\n                '+((t=e.text.bts.authorizationType)==null?"":t)+'\r\n            </label>\r\n            <div class="rp-btn-group bts-property input-group">\r\n                <button id="systemAuth"\r\n                '+((t=o)==null?"":t)+' data-toggle="dropdown" class="rp-btn rp-btn-with-dropdown rp-width-100\r\n                dropdown-toggle">\r\n                <span class="select-value">\r\n                            '+((t=e.text.ui[e.systemAuth])==null?"":t)+'\r\n                        </span>\r\n                <span class="rp-caret"></span>\r\n                </button>\r\n                <ul class="dropdown-menu">\r\n                    ',_.each(e.authorizationTypes,function(r){n+="\r\n                    ";var i=r.value===e.systemAuth?"active":"";n+='\r\n                    <li id="'+((t=r.value)==null?"":t)+'" class="'+((t=i)==null?"":t)+'">\r\n                        <a href="#" class="auth-type">'+((t=r.name)==null?"":t)+"</a>\r\n                    </li>\r\n                    "}),n+='\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div id="authorizationType" class="clearfix"></div>\r\n    </div>\r\n    <div class="clearfix">\r\n        <div class="btn-controls rp-form-group">\r\n            <div class="reset-fields-warning" id="resetFieldsWarning">\r\n                <div class="err-hint">'+((t=e.text.bts.fieldsReset)==null?"":t)+'</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="rp-form-group clearfix">\r\n        <div class="submit-properties" id="submitPropertiesBlock">\r\n            <button class="rp-btn rp-btn-submit float-right rp-btn-indent-left"\r\n            '+((t=o)==null?"":t)+'\r\n            id="submitBtsProperties">\r\n            '+((t=e.text.ui.submit)==null?"":t)+'\r\n            </button>\r\n            <button class="rp-btn rp-btn-cancel float-right rp-btn-indent-left"\r\n            '+((t=o)==null?"":t)+'\r\n            id="cancelBtsProperties">\r\n            '+((t=e.text.ui.cancel)==null?"":t)+'\r\n            </button>\r\n        </div>\r\n    </div>\r\n    <div id="externalError" class="alert alert-danger" data-casual="'+((t=e.text.bts.errorInteracting)==null?"":t)+'"\r\n         data-noproject="'+((t=e.text.bts.projectNotFound)==null?"":t)+'"></div>\r\n    <div id="fieldsLoader">\r\n        <div class="loader">\r\n            <i class="material-icons loader-animation">autorenew</i>\r\n        </div>\r\n    </div>\r\n    <div id="fieldsWrapper" class="bts-fields-wrapper">\r\n        <div class="rp-form-group clearfix"><!--DO NOT REMOVE--></div>\r\n        <div class="rp-form-group clearfix title-block-wrapper">\r\n            <h4 class="common-title">'+((t=e.text.bts.defaultProperties)==null?"":t)+'</h4>\r\n        </div>\r\n        <div class="rp-form-group clearfix group-title-block">\r\n            <div class="inputs-caption">\r\n                <span class="title-block">'+((t=e.text.bts.defaultValue)==null?"":t)+'</span>\r\n            </div>\r\n            <div class="checkboxes-caption">\r\n                <span class="title-block">'+((t=e.text.bts.showFields)==null?"":t)+'</span>\r\n            </div>\r\n        </div>\r\n        <div id="dynamicFields" class="bts-fields"></div>\r\n        <div class="rp-form-group clearfix btn-controls fields-controls">\r\n            <button class="rp-btn rp-btn-submit float-right rp-btn-indent-left"\r\n            '+((t=o)==null?"":t)+' id="submitFields">\r\n            '+((t=e.text.ui.submit)==null?"":t)+'\r\n            </button>\r\n            <button class="rp-btn rp-btn-cancel float-right rp-btn-indent-left"\r\n            '+((t=o)==null?"":t)+' id="updateFields">\r\n            '+((t=e.text.ui.update)==null?"":t)+'\r\n            </button>\r\n            <button class="rp-btn rp-btn-cancel float-right rp-btn-indent-left"\r\n            '+((t=o)==null?"":t)+' id="cancelFields">\r\n            '+((t=e.text.ui.cancel)==null?"":t)+'\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="mobile-disabling-cover"></div>\r\n</div>\r\n',n},this.JST["tpl-bts-multi-selector"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="bts-instance-wrapper">\r\n    <ul role="tablist" class="nav-tabs-bts-instances clearfix">\r\n        <li class="bts-instance-title">\r\n                    <span>\r\n                        '+((t=e.text.bts.btsInstances)==null?"":t)+"\r\n                    </span>\r\n        </li>\r\n        ",_.forEach(e.systems,function(r,i){n+='\r\n        <li class="bts-name-project '+((t=i===e.index?"active":"")==null?"":t)+'">\r\n            <a class="tab bts-instance" data-index="'+((t=i)==null?"":t)+'" id="'+((t=r.id||"")==null?"":t)+'" href="#">\r\n                '+((t=r.project)==null?"":t)+"\r\n            </a>\r\n        </li>\r\n        "}),n+="\r\n        ",e.systems.length||(n+='\r\n        <li class="bts-name-project active">\r\n            <a class="tab bts-instance">'+((t=e.text.project.newProject)==null?"":t)+"</a>\r\n        </li>\r\n        "),n+='\r\n        <li class="bts-name-project bts-name-new-project '+((t=!e.systems.length||!e.access?"disabled":"")==null?"":t)+'">\r\n            <a class="tab bts-instance close-add">\r\n                '+((t=e.text.project.newProject)==null?"":t)+'\r\n                <span class="close-add-action">\r\n                            <i class="material-icons">clear</i>\r\n                        </span>\r\n            </a>\r\n        </li>\r\n        <li class="bts-instance-action '+((t=!e.systems.length||!e.access?"disabled":"")==null?"":t)+'">\r\n            <a href="#" class="tab bts-instance add-new rp-link rp-link-with-icon">\r\n                <i class="material-icons">add</i>\r\n                <span>'+((t=e.text.bts.btsAddNewInstance)==null?"":t)+"</span>\r\n            </a>\r\n        </li>\r\n    </ul>\r\n</div>\r\n",n},this.JST["tpl-bts-wrapper"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.access?"":'disabled="disabled"';return n+='\r\n<div class="bts-general-settings">\r\n    <div class="rp-form-group bts-selector">\r\n        <label class="rp-control-label">\r\n            '+((t=e.text.project.bts)==null?"":t)+'\r\n        </label>\r\n        <div class="rp-btn-group">\r\n            <button type="button"\r\n                    class="rp-btn rp-btn-with-dropdown dropdown-toggle"\r\n                    data-toggle="dropdown"\r\n            '+((t=o)==null?"":t)+'\r\n            id="systemType">\r\n            <span class="select-value">'+((t=e.systemType)==null?"":t)+'</span>\r\n            <span class="rp-caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu">\r\n                ',_.forEach(e.settings.btsList,function(e){n+='\r\n                <li>\r\n                    <a href="#" class="bts-option">'+((t=e.name)==null?"":t)+"</a>\r\n                </li>\r\n                "}),n+='\r\n            </ul>\r\n        </div>\r\n        <span class="no-bts-found hide" data-js-no-bts-message>'+r(e.text.bts.btsNotFound)+'</span>\r\n    </div>\r\n    <div class="rp-form-group tbs-change-warning-block">\r\n        <div id="tbsChangeWarning" class="rp-help-block rp-text-danger">\r\n            '+((t=e.text.bts.tbsChangeWarning)==null?"":t)+'\r\n        </div>\r\n    </div>\r\n    <div class="mobile-disabling-cover"></div>\r\n</div>\r\n<div id="btsInstance" class="bts-instance-container">\r\n    <div id="instanceHead" class="clearfix instance-head"></div>\r\n    <div id="instanceBody" class="clearfix instance-body"></div>\r\n</div>\r\n',n},this.JST["tpl-defect-subType"]=function(e){var t,n="",r=_.escape;return n+='<div class="dt-body-item dt-row"  id=\''+((t=e.id)==null?"":t)+"' data-defect-type=\""+((t=e.type)==null?"":t)+'"></div>',n},this.JST["tpl-defect-type-item-edit"]=function(e){var t,n="",r=_.escape;return n+='<div class="col-xs-4 col-sm-4 col-md-4 col-lg-4">\r\n    <input type="text"\r\n        class="rp-input rp-input-long-name"\r\n        data-type="longName"\r\n        placeholder="'+((t=e.text.project.inputValLongName)==null?"":t)+'"\r\n        value="'+r(e.longName)+'" />\r\n</div>\r\n<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2">\r\n    <input type="text"\r\n        class="rp-input rp-input-short-name"\r\n        data-type="shortName"\r\n        placeholder="'+((t=e.text.project.inputValShortName)==null?"":t)+'"\r\n        value="'+r(e.shortName)+'" />\r\n</div>\r\n<div class="col-xs-1 col-sm-1 col-md-1 col-lg-1 holder-color-picker"></div>\r\n<div class="col-xs-5 col-sm-5 col-md-5 col-lg-5 edit-panel">\r\n    <a href="#" class="save-item">\r\n        <i class="rp-icons rp-icons-ok"></i>\r\n    </a>\r\n    <a href="#" class="cancel-item">\r\n        <i class="rp-icons rp-icons-cancel"></i>\r\n    </a>\r\n</div>\r\n',n},this.JST["tpl-defect-type-item"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="col-xs-7 col-sm-4 col-md-4 col-lg-4" data-type="longName">\r\n    <div class="dt-full-name">\r\n        <label class="dt-tag-wrap">\r\n            <span class="dt-tag-point" style="background-color: '+((t=e.model.color)==null?"":t)+';"></span>\r\n            <span class="dt-tag-name">'+((t=e.model.longName)==null?"":t)+'</span>\r\n        </label>\r\n    </div>\r\n</div>\r\n<div class="col-xs-3 col-sm-2 col-md-2 col-lg-2" data-type="shortName">\r\n    <div class="shortening-difect-id">\r\n        '+((t=e.model.shortName)==null?"":t)+'\r\n    </div>\r\n</div>\r\n<div class="col-xs-2 col-sm-1 col-md-1 col-lg-1" data-type="color">\r\n    <div class="dt-point-wrap">\r\n        <span class="dt-tag-point" style="background-color: '+((t=e.model.color)==null?"":t)+';"></span>\r\n    </div>\r\n</div>\r\n<div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 dt-edit-cell">\r\n    ',!e.first&&e.edit&&(n+='\r\n        <a href="#" class="edit-item">\r\n            <i class="material-icons">edit</i>\r\n        </a>\r\n        <a href="#" class="delete-item">\r\n            <i class="rp-icons rp-icons-cancel"></i>\r\n        </a>\r\n    '),n+='\r\n</div>\r\n<div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 dt-diagramm-cell">\r\n    ',e.first&&(n+='\r\n        <div>\r\n            <svg id="diagramm_'+((t=e.model.typeRef.toLowerCase())==null?"":t)+'"></svg>\r\n        </div>\r\n    '),n+="\r\n</div>\r\n",n},this.JST["tpl-defect-type-main-view"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="rp-defect-types form-group">\r\n    <div class="dt-form-group-header">\r\n        <div class="col-xs-4 col-sm-4 col-md-4 col-lg-4 title-defect-name">\r\n            <span>'+((t=e.text.project.nav.defectName)==null?"":t)+'</span>\r\n        </div>\r\n        <div class="col-xs-2 col-sm-2 col-md-2 col-lg-2 title-abbreviation">\r\n            <span>'+((t=e.text.project.nav.abbreviation)==null?"":t)+'</span>\r\n        </div>\r\n        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3">\r\n            <span>'+((t=e.text.project.nav.color)==null?"":t)+'</span>\r\n        </div>\r\n        <div class="col-xs-3 col-sm-3 col-md-3 col-lg-3 title-diagram">\r\n            <span>'+((t=e.text.project.nav.diagram)==null?"":t)+"</span>\r\n        </div>\r\n    </div>    <div class=\"dt-form-group-body\" id='types'>\r\n        ",_.each(e.order,function(r,i){r!=="text"&&(n+='                <div class="dt-content-item-title">\r\n                    ',r=="product_bug"&&(n+="\r\n                        <span>"+((t=e.text.project.titleGroup.titleProductBug)==null?"":t)+"</span>\r\n                    "),n+="                    ",r=="automation_bug"&&(n+="\r\n                        <span>"+((t=e.text.project.titleGroup.titleAutomationBug)==null?"":t)+"</span>\r\n                    "),n+="                    ",r=="system_issue"&&(n+="\r\n                        <span>"+((t=e.text.project.titleGroup.titleSystemIssue)==null?"":t)+"</span>\r\n                    "),n+="                    ",r=="no_defect"&&(n+="\r\n                        <span>"+((t=e.text.project.titleGroup.titleNoDefect)==null?"":t)+"</span>\r\n                    "),n+="                    ",r=="to_investigate"&&(n+="\r\n                        <span>"+((t=e.text.project.titleGroup.titleToInvestigate)==null?"":t)+"</span>\r\n                    "),n+='\r\n                </div>                <div class="dt-content-item-wrap" id="'+((t=r)==null?"":t)+'"></div>\r\n            ')}),n+='        <div id="chart" class="collection-colors">\r\n            <h4>'+((t=e.text.project.ExplChosenColors)==null?"":t)+'</h4>\r\n            <svg></svg>\r\n        </div>        <div class="dt-form-group-footer">\r\n            ',e.edit&&(n+='\r\n                <a href="javascript:void(0);" id="reset-color" class="rp-link float-right" title="">'+((t=e.text.project.LinkResetToDefaultColors)==null?"":t)+"</a>\r\n            "),n+="\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-defect-type"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="controll-panel">\r\n    ',e.edit&&(n+='\r\n        <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">\r\n            <button type="button" class="rp-btn rp-btn-default rp-button-with-icon not-small add-item" data-add-item="'+((t=e.name)==null?"":t)+'">\r\n                <i class="material-icons">add</i>\r\n                <span class="rp-btn-val">'+((t=e.text.project.addSubType)==null?"":t)+'</span>\r\n            </button>\r\n            <p style="',e.addLeft==0&&(n+="display:none"),n+='"><span>'+((t=e.addLeft)==null?"":t)+"</span>"+((t=e.text.project.canBeAdded)==null?"":t)+'</p>\r\n            <p style="',e.addLeft>0&&(n+="display:none"),n+='"> '+((t=e.text.project.limitReached)==null?"":t)+"</p>\r\n        </div>\r\n    "),n+="\r\n</div>",n},this.JST["tpl-dynamic-fields"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.access?"":'disabled="disabled"';return n+="\r\n",_.forEach(e.collection,function(i){n+='\r\n        <div class="rp-form-group">\r\n            ';var s=i.required?"obligatory-field":"";n+='\r\n            <label\r\n                    class="bts-field-label rp-control-label '+((t=s)==null?"":t)+" "+((t=e.update?"custom-style-1":"custom-style-2")==null?"":t)+'" for="'+r(i.id)+'">\r\n                '+r(i.fieldName)+'\r\n            </label>\r\n            <div class="bts-field-input '+((t=e.update?"custom-style-1":"custom-style-2")==null?"":t)+'">\r\n                ';var u=e.disabled.indexOf(i.id)!==-1?'disabled="disabled"':"";n+="\r\n                ";if(i.definedValues&&i.definedValues.length){n+="\r\n                    ";if(i.fieldType==="array")n+='\r\n                            <div class="b-users-typeahead">\r\n                                <input class="rp-input-default rp-width-100 users-typeahead default-value" data-name="'+((t=i.fieldName)==null?"":t)+'" id="'+((t=i.id)==null?"":t)+'" value="'+((t=i.value?i.value.join(","):"")==null?"":t)+'" '+((t=o)==null?"":t)+">\r\n                            </div>\r\n                    ";else{n+="\r\n                        ";if(i.definedValues.length>10){n+="\r\n                            ";var a=i.value?i.value[0]:"";n+='\r\n                            <select id="'+r(i.id)+'" data-id="'+r(i.id.replaceAll(".",""))+'" class="to-100-width">\r\n                                <option value="">'+((t=e.text.ui.selectValue)==null?"":t)+"</option>\r\n                                ",_.forEach(i.definedValues,function(e){n+='\r\n                                    <option value="'+((t=e.valueId)==null?"":t)+'" '+((t=e.valueId===a?"selected":"")==null?"":t)+">"+((t=e.valueName)==null?"":t)+"</option>\r\n                                "}),n+="\r\n                            </select>\r\n                        "}else{n+="\r\n                        ";var f=i.value?i.value[0]:i.definedValues[0].valueName||"";n+='\r\n                        <div class="rp-btn-group rp-width-100">\r\n                            <button '+((t=o)==null?"":t)+' id="'+r(i.id)+'"\r\n                                data-id="'+r(i.id.replaceAll(".",""))+'"\r\n                                data-toggle="dropdown" data-name="'+((t=i.fieldName)==null?"":t)+'"\r\n                                data-type="'+((t=i.fieldType)==null?"":t)+'"\r\n                                class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle default-value '+((t=i.required?"required-value":"")==null?"":t)+'" '+((t=u)==null?"":t)+'>\r\n                                    <span class="select-value dynamic-fields">'+r(f)+'</span>\r\n                                    <span class="rp-caret"></span>\r\n                            </button>\r\n                            <ul class="dropdown-menu">\r\n                                ',_.forEach(i.definedValues,function(e){n+='\r\n                                    <li id="'+((t=e.valueId)==null?"":t)+'" class="'+((t=e.valueName===f?"active":"")==null?"":t)+'">\r\n                                        <a href="#" class="option-selector">'+((t=e.valueName)==null?"":t)+"</a>\r\n                                    </li>\r\n                                "}),n+="\r\n                            </ul>\r\n                        </div>\r\n                        "}n+="\r\n                    "}n+="\r\n                "}else n+="\r\n                    ",i.fieldType==="Html"?n+="\r\n                        <textarea "+((t=o)==null?"":t)+' class="form-control default-value '+((t=i.required?"required-value":"")==null?"":t)+'"\r\n                            data-name="'+((t=i.fieldName)==null?"":t)+'"\r\n                            data-type="'+((t=i.fieldType)==null?"":t)+'"\r\n                            id="'+r(i.id)+'" data-id="'+r(i.id.replaceAll(".",""))+'"\r\n                            '+((t=u)==null?"":t)+" >"+r(i.value?i.value[0]:"")+"</textarea>\r\n                    ":n+='\r\n                        <input type="text" '+((t=o)==null?"":t)+' class="rp-input-default rp-width-100 form-control default-value '+((t=i.required?"required-value":"")==null?"":t)+'"\r\n                                data-name="'+((t=i.fieldName)==null?"":t)+'"\r\n                                data-type="'+((t=i.fieldType)==null?"":t)+'"\r\n                               id="'+r(i.id)+'" data-id="'+r(i.id.replaceAll(".",""))+'" value="'+r(i.value?i.value[0]:"")+'" '+((t=u)==null?"":t)+" />\r\n                    ",n+='\r\n                    <span class="help-inline"></span>\r\n                ';n+="\r\n            </div>\r\n            ";if(e.update){n+='\r\n                <div class="bts-field-checkbox">\r\n                    <label class="rp-checkbox-wrap">\r\n                        ';var l=i.checked||i.required||e.editable?"checked=checked":"";n+="\r\n                        ";var c=i.required?"disabled":"";n+='\r\n                        <input type="checkbox" class="rp-input-checkbox form-control default-selector" data-type="'+((t=i.fieldType)==null?"":t)+'" '+((t=o)==null?"":t)+" "+((t=l)==null?"":t)+" "+((t=c)==null?"":t)+' />\r\n                        <span class="span-empty"></span>\r\n                    </label>\r\n                </div>\r\n            '}n+="\r\n        </div>\r\n"}),n+="\r\n",e.collection||(n+='\r\n    <div class="alert alert-warning custom-position">\r\n        '+((t=e.text.bts.configureFields)==null?"":t)+"\r\n    </div>\r\n"),n},this.JST["tpl-project-general-info"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="container-fluid general-info">\r\n    <div class="row">\r\n        <div class="col-sm-12">\r\n            <span class="data-number">'+((t=e.info.launchesQuantity)==null?"":t)+"</span>\r\n            ",e.info.launchesQuantity==1?n+='\r\n                <span class="data-text">'+((t=e.text.admin.launchesQuantitySingular)==null?"":t)+"</span>\r\n            ":n+='\r\n                <span class="data-text">'+((t=e.text.admin.launchesQuantity)==null?"":t)+"</span>\r\n            ",n+='\r\n        </div>\r\n        <div class="col-sm-12">\r\n            <span class="data-number">'+((t=e.info.launchesPerWeek)==null?"":t)+"</span>\r\n            ",e.info.launchesPerWeek==1?n+='\r\n                <span class="data-text">'+((t=e.text.admin.launchesAverageSingular)==null?"":t)+"</span>\r\n            ":n+='\r\n                <span class="data-text">'+((t=e.text.admin.launchesAverage)==null?"":t)+"</span>\r\n            ",n+='\r\n        </div>\r\n        <div class="col-sm-12">\r\n            <span class="data-number">'+((t=e.info.usersQuantity)==null?"":t)+"</span>\r\n            ",e.info.usersQuantity==1?n+='\r\n                <span class="data-text">'+((t=e.text.admin.usersQuantitySingular)==null?"":t)+"</span>\r\n            ":n+='\r\n                <span class="data-text">'+((t=e.text.admin.usersQuantity)==null?"":t)+"</span>\r\n            ",n+="\r\n        </div>\r\n        ",e.hasValidBtsSystem&&(n+='\r\n        <div class="col-sm-12">\r\n            <span class="data-number">'+((t=e.info.uniqueTickets)==null?"":t)+"</span>\r\n            ",e.info.uniqueTickets>1?n+='\r\n                <span class="data-text">'+((t=e.text.admin.uniqueBugs)==null?"":t)+"</span>\r\n            ":n+='\r\n                <span class="data-text">'+((t=e.text.admin.uniqueBugs)==null?"":t)+"</span>\r\n            ",n+="\r\n        </div>\r\n        "),n+="\r\n    </div>\r\n</div>",n},this.JST["tpl-project-launch-owners"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="col-sm-12 col-xs-12 project-content">\r\n    <!-- <table class="table table-striped"> -->\r\n    <div class="row">\r\n        <table class="table">\r\n            <!-- \r\n                <thead>\r\n                    <tr>\r\n                        <th colspan="2">'+((t=e.text.admin.memberName)==null?"":t)+"</th>\r\n                        <th>"+((t=e.text.admin.numberOfLaunches)==null?"":t)+"</th>\r\n                    </tr>\r\n                </thead>\r\n            -->\r\n            <tbody>\r\n                ",e.launchesPerUser&&e.launchesPerUser.length?(n+="\r\n                    ",_.forEach(e.launchesPerUser,function(e){n+="\r\n                        <tr>\r\n                            <td>"+((t=e.fullName)==null?"":t)+"</td>\r\n                            <td>"+((t=e.count)==null?"":t)+"</td>\r\n                        </tr>\r\n                    "}),n+="\r\n                "):n+='\r\n                    <tr>\r\n                        <td colspan="2">\r\n                            <h3 class="title-no-data text-center">\r\n                                <i class="rp-icons rp-icons-warning m-right-10"></i>\r\n                                <span class="warning">'+((t=e.text.admin.noLaunchesPerformed)==null?"":t)+"</span>\r\n                            </h3>\r\n                        </td>\r\n                    </tr>\r\n                ",n+="\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-project-settings-demo-data"]=function(e){var t,n="",r=_.escape;return n+='<div class="rp-settings-demo-data">\r\n    <div class="rp-form-group demo-data-mobile-title">'+((t=e.text.project.generateDataMobile)==null?"":t)+'</div>\r\n    <div class="rp-form-group demo-data-details">\r\n        <h4>'+((t=e.text.project.generateDemoDataTitle)==null?"":t)+"</h4>\r\n        <ul>\r\n            <li>"+((t=e.text.project.generateDemoDataLaunches)==null?"":t)+"</li>\r\n            <li>"+((t=e.text.project.generateDemoDataDashboard)==null?"":t)+"</li>\r\n            <li>"+((t=e.text.project.generateDemoDataFilter)==null?"":t)+'</li>\r\n        </ul>\r\n    </div>\r\n    <form class="rp-form">\r\n        <div class="demo-data-form" data-js-demo-data-form>\r\n            <label class="rp-field">\r\n                <span>'+((t=e.text.project.postfixLabel)==null?"":t)+'</span>\r\n                <input data-js-demo-data-postfix placeholder="'+((t=e.text.project.postfixPlaceHolder)==null?"":t)+'"\r\n                       name="postfix_name" value="" class="rp-input">\r\n                <span class="validate-hint"></span>\r\n            </label>\r\n        </div>\r\n        <div class="rp-form-group rp-wrap-button">\r\n            <button type="button" class="rp-btn rp-btn-submit" data-js-demo-data-submit>\r\n                '+((t=e.text.project.generateDemoData)==null?"":t)+'\r\n            </button>\r\n            <button type="button" class="rp-btn rp-btn-submit demo-data-submit-mobile" disabled="disabled">\r\n                '+((t=e.text.project.generateDemoData)==null?"":t)+'\r\n            </button>\r\n        </div>\r\n    </form>\r\n    <div class="rp-form-group demo-data-loader" style="display: none;" data-js-demo-data-loader>\r\n        <div class="preloader" data-js-preloader-launch-body>\r\n            <i class="material-icons loader-animation">refresh</i>\r\n        </div>\r\n        <span>'+((t=e.text.project.generationDataInProgress)==null?"":t)+'</span>\r\n    </div>\r\n    <div class="rp-form-group demo-data-warning-block">\r\n        <span class="demo-data-warning">\r\n            <i class="material-icons">warning</i>\r\n            <span>'+((t=e.text.ui.warningSm)==null?"":t)+"!</span>\r\n        </span><br>\r\n        "+((t=e.text.project.removeDemoData)==null?"":t)+"\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-project-settings-general"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.access?"":'disabled="disabled"';n+='<div class="rp-form-group">\r\n    <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col" for="project_name">\r\n        '+((t=e.text.project.name)==null?"":t)+'\r\n    </label>\r\n    <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n        <input id="project_name" value="'+((t=e.currentProject||"")==null?"":t)+'" class="rp-input-default rp-width-100" disabled="disabled">\r\n    </div>\r\n    <div class="col-md-5 col-sm-12 col-xs-12 rp-custom-col rp-text-description"></div>\r\n</div>\r\n<!--\r\n    <div class="form-group">\r\n        <label class="col-sm-3 control-label"\r\n            for="projectSpecific">\r\n            < %= data.text.project.toolset % >\r\n        </label>\r\n        <div class="col-sm-8 col-md-3">\r\n            <div class="btn-group to-100-width">\r\n                <button id="projectSpecific"\r\n                    type="button"\r\n                    class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                    data-toggle="dropdown"\r\n                    < % if (!data.access) { % >disabled="disabled"< % } % >\r\n                    disabled="disabled" >\r\n                    <span class="select-value">< % = data.projectSpecific % ></span>\r\n                    <span class="rp-caret"></span>\r\n                </button>\r\n                <ul class="dropdown-menu rp-width-100">\r\n                    < % _.each(data.settings.projectSpecific, function(item) { % >\r\n                        <li>\r\n                            <a href="#">< % = item.name % ></a>\r\n                        </li>\r\n                    < % }) % >\r\n                </ul>\r\n            </div>\r\n        </div>\r\n        <div class="col-sm-8 col-sm-offset-3 col-md-6 col-md-offset-0">\r\n            <span class="help-block">< % = data.text.project.specificProject % ></span>\r\n        </div>\r\n    </div>\r\n-->\r\n<div class="rp-form-group">\r\n    <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col">\r\n        '+((t=e.text.project.launchTimeout)==null?"":t)+'\r\n    </label>\r\n    <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n        <div class="rp-btn-group rp-width-100">\r\n            <button type="button"\r\n                class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                data-toggle="dropdown"\r\n                '+((t=o)==null?"":t)+'\r\n                id="interruptedJob">\r\n                <span class="select-value">'+((t=e.interruptedJob)==null?"":t)+'</span>\r\n                <span class="rp-caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu rp-width-100">\r\n                ',_.each(e.settings.interruptedJob,function(e){n+='\r\n                    <li>\r\n                        <a href="#">'+((t=e.name)==null?"":t)+"</a>\r\n                    </li>\r\n                "}),n+='\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-5 col-sm-12 col-xs-12 rp-custom-col rp-text-description">\r\n        <span class="rp-help-block">'+((t=e.text.project.scheduleForInterupt)==null?"":t)+'</span>\r\n    </div>\r\n</div>\r\n<div class="rp-form-group">\r\n    <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col">\r\n        '+((t=e.text.project.keepLogs)==null?"":t)+'\r\n    </label>\r\n    <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n        <div class="rp-btn-group rp-width-100">\r\n            <button type="button"\r\n                class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                data-toggle="dropdown"\r\n                '+((t=o)==null?"":t)+'\r\n                id="keepLogs">\r\n                <span class="select-value">'+((t=e.keepLogs)==null?"":t)+'</span>\r\n                <span class="rp-caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu rp-width-100">\r\n                ',_.each(e.settings.keepLogs,function(e){n+='\r\n                    <li>\r\n                        <a href="#">'+((t=e.name)==null?"":t)+"</a>\r\n                    </li>\r\n                "}),n+='\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-5 col-sm-12 col-xs-12 rp-custom-col rp-text-description">\r\n        <span class="rp-help-block">'+((t=e.text.project.howKeepLogs)==null?"":t)+'</span>\r\n    </div>\r\n</div>\r\n<div class="rp-form-group">\r\n    <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col">\r\n        '+((t=e.text.project.keepScreen)==null?"":t)+'\r\n    </label>\r\n    <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n        <div class="rp-btn-group rp-width-100">\r\n            <button type="button"\r\n                class="rp-btn rp-width-100 rp-btn-with-dropdown dropdown-toggle"\r\n                data-toggle="dropdown"\r\n                '+((t=o)==null?"":t)+'\r\n                id="keepScreenshots">\r\n                <span class="select-value">'+((t=e.keepScreenshots)==null?"":t)+'</span>\r\n                <span class="rp-caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu rp-width-100">\r\n                ',_.each(e.settings.keepScreenshots,function(e){n+='\r\n                    <li>\r\n                        <a href="#">'+((t=e.name)==null?"":t)+"</a>\r\n                    </li>\r\n                "}),n+='\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-5 col-sm-12 col-xs-12 rp-custom-col rp-text-description">\r\n        <span class="rp-help-block">'+((t=e.text.project.howKeepScreen)==null?"":t)+'</span>\r\n    </div>\r\n</div><div class="rp-form-group">\r\n    <label class="col-md-3 col-sm-4 col-xs-12 rp-control-label rp-custom-col">\r\n        '+((t=e.text.project.autoAnalysis)==null?"":t)+'\r\n    </label>\r\n    <div class="col-md-4 col-sm-8 col-xs-12 rp-custom-col">\r\n        <div class="rp-btn-group rp-width-100">\r\n            ';var u=e.isAutoAnalyzerEnabled?e.text.ui.on:e.text.ui.off;return n+='\r\n            <button data-value="'+((t=u)==null?"":t)+'"\r\n                type="button"\r\n                class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                data-toggle="dropdown"\r\n                '+((t=o)==null?"":t)+'\r\n                id="isAutoAnalyzerEnabled">\r\n                <span class="select-value">'+((t=u)==null?"":t)+'</span>\r\n                <span class="rp-caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu rp-width-100">\r\n                <li><a href="#">'+((t=e.text.ui.on)==null?"":t)+'</a></li>\r\n                <li><a href="#">'+((t=e.text.ui.off)==null?"":t)+'</a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-5 col-sm-12 col-xs-12 rp-custom-col rp-text-description">\r\n        <div class="rp-help-block">'+((t=e.text.project.autoAnalysisOnOff)==null?"":t)+'</div>\r\n    </div>\r\n</div>\r\n<div class="rp-form-group rp-wrap-button">\r\n    <div class="col-md-7 col-sm-12 col-xs-12 rp-custom-col">\r\n        <button type="submit" class="rp-btn rp-btn-submit rp-btn-right" id="submit-settings" '+((t=o)==null?"":t)+">"+((t=e.text.ui.submit)==null?"":t)+'</button>\r\n    </div>\r\n    <div class="col-md-5 rp-custom-col hidden-xs hidden-sm"></div>\r\n</div>\r\n<div class="mobile-disabling-cover"></div>\r\n',n},this.JST["tpl-project-settings-header"]=function(e){var t,n="",r=_.escape;return n+='<div id="headerBar" class="clearfix">\r\n    <ul class="rp-nav-left">\r\n        <li class="title-holder">\r\n            <span class="header-alike">\r\n                '+((t=e.text.project.settings)==null?"":t)+"\r\n            </span>\r\n        </li>\r\n    </ul>\r\n</div>",n},this.JST["tpl-project-settings-notifications-item"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.access?"":'disabled="disabled"';n+="\r\n";if(e.addRule){n+='\r\n    <div class="email-case-item local-item" data-email-case-id='+((t=e.newCase.id||e.caseId)==null?"":t)+'>        <div class="rp-form-group notification-rule">\r\n            <div class="col-md-3 col-sm-3 col-xs-12 rp-custom-col">\r\n                <div class="email-case-title">\r\n                    <div class="remove-email-item-label">\r\n                        <div class="remove-email-item" ',e.access||(n+='style="display: none"'),n+='>\r\n                            <i class="rp-btn-custom rp-btn-close"></i>\r\n                        </div>\r\n                        '+((t=e.text.project.rule)==null?"":t)+" "+((t=e.emailCases.length)==null?"":t)+'\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-9 col-sm-9 col-xs-12 rp-custom-col">\r\n                <div class="duplicate-error">'+((t=e.text.project.duplicateEmailCase)==null?"":t)+'</div>\r\n            </div>\r\n        </div>        <div class="rp-form-group recipients-wrap">\r\n            <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col">\r\n                '+((t=e.text.project.emailRecipients)==null?"":t)+'\r\n            </label>\r\n            <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n                <div class="b-users-typeahead">\r\n                    <input placeholder="'+((t=e.text.project.enterRecipients)==null?"":t)+'" class="users-typeahead recipients" '+((t=o)==null?"":t)+'>\r\n                </div>\r\n                <div class="error-block help-inline-pos-right"></div><!-- dell class - help-inline -->\r\n            </div>\r\n            <div class="col-md-5 hidden-sm hidden-xs"></div>\r\n        </div>        <div class="rp-form-group checkbox-launch-owner-wrap">\r\n            <div class="col-md-3 col-sm-3 hidden-xs"></div>\r\n            <div class="col-md-9 col-sm-9 col-xs-12 rp-custom-col">\r\n                <div class="checkbox-launch-owner">\r\n                    ';var u=_.find(e.newCase.recipients,function(e){return e==="OWNER"});n+='\r\n                    <label class="rp-checkbox-wrap">\r\n                        <input '+((t=o)==null?"":t)+' class="launchOwner rp-input-checkbox" type="checkbox" ',u&&e.emailEnabled&&(n+='checked="checked"'),n+=' value="OWNER">\r\n                        <span>'+((t=e.text.project.launchOwnerDescription)==null?"":t)+'</span>\r\n                    </label>\r\n                    <div class="error-block"></div><!-- dell class - help-inline -->\r\n                </div>\r\n            </div>\r\n        </div>        <div class="rp-form-group">\r\n            <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col">\r\n                '+((t=e.text.project.emailInCase)==null?"":t)+'\r\n            </label>\r\n            <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n                <div class="rp-btn-group rp-width-100">\r\n                    <button type="button" class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle" data-toggle="dropdown"\r\n                    ';var a=e.settings.emailInCase[0];n+=" "+((t=o)==null?"":t)+' data-value="'+((t="")==null?"":t)+'"class="sendCase">\r\n                        <span class="select-value">\r\n                            ',e.emailEnabled?n+="\r\n                                "+((t=a.name)==null?"":t)+"\r\n                            ":n+="\r\n                                "+((t=e.settings.emailInCase[0].name)==null?"":t)+"\r\n                            ",n+='\r\n                        </span>\r\n                        <span class="rp-caret"></span>\r\n                    </button>\r\n                    <ul class="dropdown-menu">\r\n                        ',_.each(e.settings.emailInCase,function(e){n+='\r\n                            <li>\r\n                                <a href="#" data-value="'+((t=e.value)==null?"":t)+'">'+((t=e.name)==null?"":t)+"</a>\r\n                            </li>\r\n                        "}),n+='\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n            <div class="col-md-5 hidden-xs hidden-sm"></div>\r\n        </div>        <div class="rp-form-group rp-note-and">\r\n            <div class="col-md-3 col-sm-3 hidden-xs"></div>\r\n            <div class="col-md-9 col-sm-9 col-xs-12 rp-custom-col">\r\n                <span>'+((t=e.text.comparators.andb)==null?"":t)+'</span>\r\n            </div>\r\n        </div>        <div class="rp-form-group">\r\n            <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col">\r\n                <span class="mobile-note-and">'+((t=e.text.comparators.andb)==null?"":t)+"</span>\r\n                "+((t=e.text.project.launchesNames)==null?"":t)+'\r\n            </label>\r\n            <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n                <div class="b-users-typeahead">\r\n                    <input placeholder="'+((t=e.text.project.selectLaunchNames)==null?"":t)+'" class="users-typeahead launches launchNames" '+((t=o)==null?"":t)+'>\r\n                </div>\r\n                <div class="error-block"></div><!-- dell class - help-inline -->\r\n            </div>\r\n            <div class="col-md-5 col-sm-9 col-xs-12 rp-custom-col rp-comment-block">\r\n                <span class="rp-help-block">\r\n                    '+((t=e.text.project.sendLaunchNames)==null?"":t)+'\r\n                </span><!-- dell class - help-inline -->\r\n            </div>\r\n        </div>        <div class="rp-form-group rp-note-and">\r\n            <div class="col-md-3 col-sm-3 hidden-xs"></div>\r\n            <div class="col-md-9 col-sm-9 col-xs-12 rp-custom-col">\r\n                <span>'+((t=e.text.comparators.andb)==null?"":t)+'</span>\r\n            </div>\r\n        </div>        <div class="rp-form-group">\r\n            <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col">\r\n                <span class="mobile-note-and">'+((t=e.text.comparators.andb)==null?"":t)+"</span>\r\n                "+((t=e.text.forms.tags)==null?"":t)+'\r\n            </label>\r\n            <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n                <div class="b-users-typeahead">\r\n                    <input placeholder="'+((t=e.text.project.selectTags)==null?"":t)+'" class="users-typeahead tags" '+((t=o)==null?"":t)+'>\r\n                </div>\r\n                <div class="error-block"></div><!-- dell class - help-inline -->\r\n            </div>\r\n            <div class="col-md-5 col-sm-9 col-xs-12 rp-custom-col rp-comment-block">\r\n                <span class="rp-help-block">\r\n                    '+((t=e.text.project.sendTags)==null?"":t)+'\r\n                </span>\r\n            </div>\r\n        </div>        <div class="rp-form-group rp-wrap-underline">\r\n            <div class="rp-underline"></div>\r\n        </div>\r\n    </div>\r\n'}else n+="\r\n    ",_.forEach(e.emailCases,function(r){n+='\r\n        <div class="email-case-item" data-email-case-id='+((t=r.id)==null?"":t)+'>            <div class="rp-form-group notification-rule">\r\n                <div class="col-md-3 col-sm-3 col-xs-12 rp-custom-col">\r\n                    <div class="email-case-title">\r\n                        <div class="checkbox">\r\n                            <label class="email-case-label '+((t=o?"disabled":"")==null?"":t)+'">\r\n                                <input '+((t=o)==null?"":t)+' name="remove-email-case" class="remove-email-case rp-input-checkbox" value="'+((t=r.id)==null?"":t)+'" type="checkbox"/>\r\n                                <span class="ruleName title-block">\r\n                                    '+((t=e.text.project.rule)==null?"":t)+" "+((t=+r.id+1)==null?"":t)+'\r\n                                </span>\r\n                            </label>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-9 col-sm-9 col-xs-12 rp-custom-col">\r\n                    <div class="duplicate-error">'+((t=e.text.project.duplicateEmailCase)==null?"":t)+'</div>\r\n                </div>\r\n            </div>            <div class="rp-form-group recipients-wrap">\r\n                <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col">\r\n                    '+((t=e.text.project.emailRecipients)==null?"":t)+'\r\n                </label>\r\n                <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n                    <div class="b-users-typeahead">\r\n                        <input placeholder="'+((t=e.text.project.enterRecipients)==null?"":t)+'" class="users-typeahead recipients" '+((t=o)==null?"":t)+'>\r\n                        <div class="error-block help-inline-pos-right"></div><!-- dell class - help-inline -->\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-5 hidden-sm hidden-xs"></div>\r\n            </div>            <div class="rp-form-group checkbox-launch-owner-wrap">\r\n                <div class="col-md-3 col-sm-3 hidden-xs"></div>\r\n                <div class="col-md-9 col-sm-9 col-xs-12 rp-custom-col">\r\n                    <div class="checkbox-launch-owner">\r\n                        ';var i=_.find(r.recipients,function(e){return e==="OWNER"});n+='\r\n                        <label class="rp-checkbox-wrap">\r\n                            <input '+((t=o)==null?"":t)+' class="launchOwner rp-input-checkbox" type="checkbox" ',i&&(n+='checked="checked"'),n+=' value="OWNER">\r\n                            <span>'+((t=e.text.project.launchOwnerDescription)==null?"":t)+'</span>\r\n                        </label>\r\n                        <div class="error-block help-inline-pos-right"></div><!-- dell class - help-inline -->\r\n                    </div>\r\n                </div>\r\n            </div>            <div class="rp-form-group">\r\n                <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col">\r\n                    '+((t=e.text.project.emailInCase)==null?"":t)+'\r\n                </label>\r\n                <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n                    <div class="rp-btn-group rp-width-100">\r\n                        <button type="button" class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle" data-toggle="dropdown" ';var s=r.sendCase?_.find(e.settings.emailInCase,function(e){return e.value===r.sendCase}):e.settings.emailInCase[0];n+="\r\n                            "+((t=o)==null?"":t)+' data-value="'+((t=r.sendCase)==null?"":t)+'" class="sendCase">\r\n                            <span class="select-value">\r\n                                ',e.emailEnabled?n+="\r\n                                    "+((t=s.name)==null?"":t)+"\r\n                                ":n+="\r\n                                    "+((t=e.settings.emailInCase[0].name)==null?"":t)+"\r\n                                ",n+='\r\n                            </span>\r\n                            <span class="rp-caret"></span>\r\n                        </button>\r\n                        <ul class="dropdown-menu">\r\n                            ',_.each(e.settings.emailInCase,function(e){n+='\r\n                                <li>\r\n                                    <a href="#" data-value="'+((t=e.value)==null?"":t)+'">'+((t=e.name)==null?"":t)+"</a>\r\n                                </li>\r\n                            "}),n+='\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n                <div class="col-md-5 hidden-xs hidden-sm"></div>\r\n            </div>            <div class="rp-form-group rp-note-and">\r\n                <div class="col-md-3 col-sm-3 hidden-xs"></div>\r\n                <div class="col-md-9 col-sm-9 col-xs-12 rp-custom-col">\r\n                    <span>'+((t=e.text.comparators.andb)==null?"":t)+'</span>\r\n                </div>\r\n            </div>            <div class="rp-form-group">\r\n                <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col">\r\n                    <span class="mobile-note-and">'+((t=e.text.comparators.andb)==null?"":t)+"</span>\r\n                    "+((t=e.text.project.launchesNames)==null?"":t)+'\r\n                </label>\r\n                <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n                    <div class="b-users-typeahead">\r\n                        <input placeholder="'+((t=e.text.project.selectLaunchNames)==null?"":t)+'" class="users-typeahead launches launchNames" '+((t=o)==null?"":t)+'>\r\n                    </div>\r\n                    <div class="error-block"></div><!-- dell class - help-inline -->\r\n                </div>\r\n                <div class="col-md-5 col-sm-9 col-xs-12 rp-custom-col rp-comment-block">\r\n                    <span class="rp-help-block">\r\n                        '+((t=e.text.project.sendLaunchNames)==null?"":t)+'\r\n                    </span><!-- dell class - help-inline -->\r\n                </div>\r\n            </div>            <div class="rp-form-group rp-note-and">\r\n                <div class="col-md-3 col-sm-3 hidden-xs"></div>\r\n                <div class="col-md-9 col-sm-9 col-xs-12 rp-custom-col">\r\n                    <span>'+((t=e.text.comparators.andb)==null?"":t)+'</span>\r\n                </div>\r\n            </div>            <div class="rp-form-group">\r\n                <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col">\r\n                    <span class="mobile-note-and">'+((t=e.text.comparators.andb)==null?"":t)+"</span>\r\n                    "+((t=e.text.forms.tags)==null?"":t)+'\r\n                </label>\r\n                <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n                    <div class="b-users-typeahead">\r\n                        <input placeholder="'+((t=e.text.project.selectTags)==null?"":t)+'" class="users-typeahead tags" '+((t=o)==null?"":t)+'>\r\n                    </div>\r\n                    <div class="error-block"></div><!-- dell class - help-inline -->\r\n                </div>\r\n                <div class="col-md-5 col-sm-9 col-xs-12 rp-custom-col rp-comment-block">\r\n                    <span class="rp-help-block">\r\n                        '+((t=e.text.project.sendTags)==null?"":t)+'\r\n                    </span><!-- dell class - help-inline -->\r\n                </div>\r\n            </div>            <div class="rp-form-group rp-wrap-underline">\r\n                <div class="rp-underline"></div>\r\n            </div>\r\n        </div>    '}),n+="\r\n";return n+="\r\n",n},this.JST["tpl-project-settings-notifications"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.access?"":'disabled="disabled"';n+='\r\n<div class="rp-form-group clearfix">\r\n    <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col">\r\n        '+((t=e.text.project.emailNotifications)==null?"":t)+'\r\n    </label>\r\n    <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n        <div class="rp-btn-group rp-width-100">\r\n            ';var u=e.emailEnabled?e.text.ui.on:e.text.ui.off;return n+='\r\n            <button type="button" class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle" data-toggle="dropdown" '+((t=o)==null?"":t)+' data-value="'+((t=u)==null?"":t)+'" id="emailEnabled" >\r\n                <span class="select-value">'+((t=u)==null?"":t)+'</span>\r\n                <span class="rp-caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu">\r\n                <li><a href="#">'+((t=e.text.ui.on)==null?"":t)+'</a></li>\r\n                <li><a href="#">'+((t=e.text.ui.off)==null?"":t)+'</a></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n    <div class="col-md-5 col-sm-9 col-xs-12 rp-custom-col rp-comment-block">\r\n        <span class="rp-help-block">'+((t=e.text.project.sendNotification)==null?"":t)+'</span>\r\n    </div>\r\n</div><div id="emailNotificationsSettings" ',e.isEmailEnabled||(n+='style="display: none"'),n+='>\r\n    <div class="rp-form-group clearfix">\r\n        <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col rp-point-required obligatory-field" for="from">\r\n            '+((t=e.text.project.from)==null?"":t)+'\r\n        </label>\r\n        <div class="col-md-4 col-sm-9 col-xs-12 rp-custom-col">\r\n            <input type="text" class="rp-input bts-property" id="from" value="'+r(e.fromAddress||"")+'" '+((t=o)==null?"":t)+' />\r\n            <span class="help-inline"></span>\r\n        </div>\r\n        <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n    </div>    <div class="rp-form-group clearfix rp-wrap-underline">\r\n        <div class="rp-underline"></div>\r\n    </div>    <div id="notificationArray"></div>    <div class="rp-form-group clearfix notification-add-block" ',e.access||(n+='style="display: none"'),n+='>\r\n        <label class="col-md-3 col-sm-3 col-xs-12 rp-control-label rp-custom-col"></label>\r\n        <div class="col-md-3 col-sm-9 rp-custom-col">\r\n            <button type="button" class="rp-btn rp-btn-default rp-button-with-icon not-small add-item" id="add-notification-rule" '+((t=o)==null?"":t)+'>\r\n                <i class="material-icons">add</i>\r\n                <span class="rp-btn-val">'+((t=e.text.project.addRule)==null?"":t)+'</span>\r\n            </button>\r\n        </div>\r\n        <div class="col-md-6 hidden-sm hidden-xs rp-custom-col"></div>\r\n    </div>\r\n</div><div class="rp-form-group clearfix notification-submit-block">\r\n    <div class="col-md-7 col-sm-12 col-xs-12 rp-custom-col">\r\n        <button type="submit" class="rp-btn rp-btn-submit float-right" id="submit-notifications" '+((t=o)==null?"":t)+">"+((t=e.text.ui.submit)==null?"":t)+'</button>\r\n    </div>\r\n    <div class="col-md-5 hidden-sm hidden-xs rp-custom-col"></div>\r\n</div>\r\n<div class="mobile-disabling-cover"></div>',n},this.JST["tpl-project-settings-shell"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<ul class="nav-tabs-custom clearfix" role="tablist">\r\n    <li role="presentation" class="'+((t=e.tab==="general"?"active":"")==null?"":t)+'">\r\n        <a href="#',e.adminPage&&(n+="administrate/project-details/"),n+=((t=e.projectId)==null?"":t)+'/settings/general"\r\n           data-target="#generalSettings" aria-controls="home" role="tab" data-toggle="tab" class="tab settings" data-action="general">\r\n            '+((t=e.text.project.generalTab)==null?"":t)+'\r\n        </a>\r\n    </li>\r\n    <li role="presentation" class="'+((t=e.tab==="notifications"?"active":"")==null?"":t)+'">\r\n        <a href="#',e.adminPage&&(n+="administrate/project-details/"),n+=((t=e.projectId)==null?"":t)+'/settings/notifications" data-target="#notificationsSettings" aria-controls="home" role="tab" data-toggle="tab" class="tab settings" data-action="notifications">\r\n            '+((t=e.text.project.notificationsTab)==null?"":t)+'\r\n        </a>\r\n    </li>\r\n    <li role="presentation" class="'+((t=e.tab==="bts"?"active":"")==null?"":t)+'">\r\n        <a href="#',e.adminPage&&(n+="administrate/project-details/"),n+=((t=e.projectId)==null?"":t)+'/settings/bts" data-target="#btsSettings" aria-controls="profile" role="tab" data-toggle="tab" class="tab settings" data-action="bts">\r\n            '+((t=e.text.project.btsTab)==null?"":t)+'\r\n            <span class="label label-above label-success">'+((t=e.text.project.beta)==null?"":t)+'</span>\r\n        </a>\r\n    </li>\r\n    <li role="presentation" class="'+((t=e.tab==="defect"?"active":"")==null?"":t)+'">\r\n        <a href="#',e.adminPage&&(n+="administrate/project-details/"),n+=((t=e.projectId)==null?"":t)+'/settings/defect" data-target="#defectTypes" aria-controls="profile" role="tab" data-toggle="tab" class="tab settings" data-action="defect">\r\n            '+((t=e.text.project.defectTypes)==null?"":t)+"\r\n        </a>\r\n    </li>\r\n    ",e.generateDemoDataAccess&&(n+='\r\n    <li role="presentation" class="'+((t=e.tab==="demoData"?"active":"")==null?"":t)+'">\r\n        <a href="#',e.adminPage&&(n+="administrate/project-details/"),n+=((t=e.projectId)==null?"":t)+'/settings/demoData" data-target="#DemoDataSettings" aria-controls="profile" role="tab" data-toggle="tab" class="tab settings" data-action="demoData">\r\n            '+((t=e.text.project.demoDataSettings)==null?"":t)+"\r\n        </a>\r\n    </li>\r\n    "),n+='\r\n</ul>\r\n<div class="tab-content setting-content-wrapper">\r\n    <div role="tabpanel" class="tab-pane '+((t=e.tab==="general"?"active":"")==null?"":t)+'" id="generalSettings"></div>\r\n    <div role="tabpanel" class="tab-pane '+((t=e.tab==="notifications"?"active":"")==null?"":t)+'" id="notificationsSettings"></div>\r\n    <div role="tabpanel" class="tab-pane bts-settings '+((t=e.tab==="bts"?"active":"")==null?"":t)+'" id="btsSettings"></div>\r\n    <div role="tabpanel" class="tab-pane '+((t=e.tab==="defect"?"active":"")==null?"":t)+'" id="defectTypes"></div>\r\n    ',e.generateDemoDataAccess&&(n+='\r\n    <div role="tabpanel" data-js-demo-data class="tab-pane '+((t=e.tab==="demoData"?"active":"")==null?"":t)+'" id="DemoDataSettings"></div>\r\n    '),n+="\r\n</div>\r\n",n},this.JST["tpl-project-widget-unable-load"]=function(e){var t,n="",r=_.escape;return n+='<div class="no-data-error">\r\n    '+((t=e.text.project.unableLoadData)==null?"":t)+"\r\n</div>",n},this.JST["tpl-projectinfo-header"]=function(e){var t,n="",r=_.escape;return n+='<div id="headerBar" class="clearfix">\r\n    <ul class="rp-nav-left">\r\n        <li class="title-holder">\r\n            <span class="header-alike">'+r(e.projectId)+"</span>\r\n        </li>\r\n    </ul>\r\n</div>",n},this.JST["tpl-projectinfo-page"]=function(e){var t,n="",r=_.escape;return n+='<div class="container-fluid" id="ProjectInfo">\r\n    <div class="row">\r\n        <div class="col-sm-12 col-md-9">\r\n            <div class="row row-custom">\r\n                <div class="col-sm-12 col-md-4 item-col-custom">\r\n                    <div class="project-widget">\r\n                        <h4 class="project-item-info-title">'+((t=e.text.widgets.generalInfo)==null?"":t)+'</h4>\r\n                        <div id="general_info" class="widget-content">\r\n                            <div class="widget-body widget-chart">\r\n                                <div class="loading-widget loader" style="display: block;">\r\n                                    <i class="material-icons loader-animation">autorenew</i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col-sm-12 col-md-4 item-col-custom">\r\n                    <div class="project-widget">\r\n                        <h4 class="project-item-info-title">'+((t=e.text.widgets.launchesOwners)==null?"":t)+'</h4>\r\n                        <div id="launches_owners" class="widget-content">\r\n                            <div class="widget-body widget-chart">\r\n                                <div class="loading-widget loader" style="display: block;">\r\n                                    <i class="material-icons loader-animation">autorenew</i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col-sm-12 col-md-4 item-col-custom">\r\n                    <div class="project-widget">\r\n                        <h4 class="project-item-info-title">'+((t=e.text.widgets.lastLaunchStats)==null?"":t)+'</h4>\r\n                        <div id="last_launch" class="widget-content">\r\n                            <div class="widget-body widget-chart">\r\n                                <div class="loading-widget loader" style="display: block;">\r\n                                    <i class="material-icons loader-animation">autorenew</i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-sm-12 col-md-4 item-col-custom">\r\n                    <div class="project-widget">\r\n                        <h4 class="project-item-info-title">'+((t=e.text.widgets.numberLaunches)==null?"":t)+'</h4>\r\n                        <div id="launches_quantity" class="widget-content">\r\n                            <div class="widget-body widget-chart">\r\n                                <div class="loading-widget loader" style="display: block;">\r\n                                    <i class="material-icons loader-animation">autorenew</i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col-sm-12 col-md-4 item-col-custom">\r\n                    <div class="project-widget">\r\n                        <h4 class="project-item-info-title">'+((t=e.text.widgets.launchStats)==null?"":t)+'</h4>\r\n                        <div id="issues_chart" class="widget-content">\r\n                            <div class="widget-body widget-chart">\r\n                                <div class="loading-widget loader" style="display: block;">\r\n                                    <i class="material-icons loader-animation">autorenew</i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>                </div>\r\n                <div class="col-sm-12 col-md-4 item-col-custom">\r\n                    <div class="project-widget">\r\n                        <h4 class="project-item-info-title">'+((t=e.text.widgets.percentageOfInvestigationsChart)==null?"":t)+'</h4>\r\n                        <div id="investigated" class="widget-content">\r\n                            <div class="widget-body widget-chart">\r\n                                <div class="loading-widget loader" style="display: block;">\r\n                                    <i class="material-icons loader-animation">autorenew</i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div class="row">\r\n                <div class="col-sm-12 col-md-4 item-col-custom">\r\n                    <div class="project-widget">\r\n                        <h4 class="project-item-info-title">'+((t=e.text.widgets.percentageOfProductBugs)==null?"":t)+'</h4>\r\n                        <div id="total-widget-bugs_percentage" class="average-percent"></div>\r\n                        <div id="bugs_percentage" class="widget-content">\r\n                            <div class="widget-body widget-chart">\r\n                                <div class="loading-widget loader" style="display: block;">\r\n                                    <i class="material-icons loader-animation">autorenew</i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col-sm-12 col-md-4 item-col-custom">\r\n                    <div class="project-widget">\r\n                        <h4 class="project-item-info-title">'+((t=e.text.widgets.percentageOfSystemIssues)==null?"":t)+'</h4>\r\n                        <div id="total-widget-system_issues_percentage" class="average-percent"></div>\r\n                        <div id="system_issues_percentage" class="widget-content">\r\n                            <div class="widget-body widget-chart">\r\n                                <div class="loading-widget loader" style="display: block;">\r\n                                    <i class="material-icons loader-animation">autorenew</i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class="col-sm-12 col-md-4 item-col-custom">\r\n                    <div class="project-widget">\r\n                        <h4 class="project-item-info-title">'+((t=e.text.widgets.percentageOfAutoBugs)==null?"":t)+'</h4>\r\n                        <div id="total-widget-auto_bugs_percentage" class="average-percent"></div>\r\n                        <div id="auto_bugs_percentage" class="widget-content">\r\n                            <div class="widget-body widget-chart">\r\n                                <div class="loading-widget loader" style="display: block;">\r\n                                    <i class="material-icons loader-animation">autorenew</i>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="col-sm-12 col-md-3">\r\n            <div class="project-widget">\r\n                <h4 class="project-item-info-title">'+((t=e.text.widgets.projectActivityPanel)==null?"":t)+'</h4>\r\n                <div id="activities" class="widget-content" style="height: 1030px;">\r\n                    <div class="widget-body widget-chart" style="max-height: none;">\r\n                        <div class="loading-widget loader" style="display: block;">\r\n                            <i class="material-icons loader-animation">autorenew</i>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n',n},this.JST["tpl-project-members-empty"]=function(e){var t,n="",r=_.escape;return n+='<div class="project-empty-members">\r\n    <h3 class="title-no-data text-center">\r\n        <i class="rp-icons rp-icons-warning"></i>\r\n        <span class="warning">'+((t=e.text.infoMessages.noResults)==null?"":t)+"</span>\r\n    </h3>\r\n    <div></div>\r\n</div>",n},this.JST["tpl-project-members-header"]=function(e){var t,n="",r=_.escape;return n+='<div id="headerBar" class="clearfix">\r\n    <ul class="rp-nav-left">\r\n        <li class="title-holder">\r\n            <span class="header-alike">\r\n                '+((t=e.text.members.projectMembers)==null?"":t)+"\r\n            </span>\r\n        </li>\r\n    </ul>\r\n</div>",n},this.JST["tpl-project-members-item"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="grid-cell name-grid-cell">\r\n    <div class="member-wrap">\r\n        <div class="member-avatar">\r\n            <img data-js-member-avatar src=""/>\r\n        </div>\r\n        <div class="member-info">\r\n            <div class="member-info-wrap">\r\n                <p class="member-name" data-js-member-name></p>\r\n                <p class="member-you" data-js-member-you>'+((t=e.text.ui.you)==null?"":t)+'</p>\r\n                <p class="member-admin" data-js-member-admin>'+((t=e.text.ui.admin)==null?"":t)+'</p>\r\n                <br>\r\n                <p class="member-login" data-js-member-login></p>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n<div class="grid-cell login-grid-cell">\r\n    <div class="member-title-mobile">'+((t=e.text.admin.lastLogin)==null?"":t)+':</div>\r\n    <div class="login-time show-time" data-js-login-time>\r\n        <span class="from-now" data-js-time-from-now></span>\r\n        <span class="exact-time" data-js-time-exact></span>\r\n    </div>\r\n</div>\r\n<div class="grid-cell role-grid-cell">\r\n    <div class="member-select-role" data-js-select-roles>\r\n        <button data-value="" type="button"\r\n                class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                data-toggle="dropdown" data-js-button-roles>\r\n            <span class="select-value" data-js-selected-role></span>\r\n            <span class="rp-caret"></span>\r\n        </button>\r\n        <ul class="dropdown-menu" data-js-dropdown-roles>\r\n            ',_.forEach(e.roles,function(e,r){n+='\r\n            <li class="">\r\n                <a href="#" class="project-roles"\r\n                   data-value="'+((t=r)==null?"":t)+'">\r\n                    '+((t=e)==null?"":t)+"\r\n                </a>\r\n            </li>\r\n            "}),n+='\r\n        </ul>\r\n        <div class="member-role-mobile">\r\n            <div class="member-title-mobile">'+((t=e.text.project.projectRole)==null?"":t)+':</div>\r\n            <span data-js-member-role-mobile></span>\r\n        </div>\r\n    </div>\r\n    <div data-js-admin-role class="admin-role">\r\n        '+((t=e.text.admin.privileges)==null?"":t)+'\r\n    </div>\r\n</div>\r\n<div class="grid-cell action-grid-cell">\r\n    <div class="members-actions">\r\n        <button data-js-member-unassign class="rp-btn rp-btn-default rp-button-with-icon" href="#"\r\n                title="'+((t=e.text.members.unAssignTitle)==null?"":t)+'">\r\n            <i class="rp-icons rp-icons-unassign"></i>\r\n            <span class="hidden-xs rp-btn-val">'+((t=e.text.members.unAssign)==null?"":t)+"</span>\r\n        </button>\r\n    </div>\r\n</div>",n},this.JST["tpl-project-members-shell"]=function(e){var t,n="",r=_.escape;return n+='<div class="project-members-actions">\r\n    <div class="project-members-filter">\r\n        <div class="rp-input-search-wrap">\r\n            <div class="input-filter form-group">\r\n                <input type="text" class="rp-input-search form-control" id="membersFilter" name="membersFilter" placeholder="" data-js-members-search>\r\n                <i class="material-icons">search</i>\r\n                <div class="error-bottom">\r\n                    <div class="help-inline"></div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="project-members-buttons">\r\n        <button type="button" class="rp-btn rp-btn-default rp-button-with-icon not-small" data-js-add-user>\r\n            <i class="rp-icons rp-icons-add-user"></i>\r\n            <span class="rp-btn-val">'+r(e.text.members.addMember)+'</span>\r\n        </button>\r\n        <button type="button" class="rp-btn rp-btn-default rp-button-with-icon not-small" data-js-invite-user>\r\n            <i class="rp-icons rp-icons-invite-user"></i>\r\n            <span class="rp-btn-val">'+r(e.text.members.inviteMember)+'</span>\r\n        </button>\r\n        <button type="button" class="rp-btn rp-btn-default rp-button-with-icon not-small" data-js-permissions>\r\n            <i class="material-icons">lock_open</i>\r\n            <span class="rp-btn-val">'+r(e.text.members.permissionsMap)+'</span>\r\n        </button>\r\n    </div>\r\n</div>\r\n<div class="project-members-table rp-table-grid show-from-now" data-js-members-table>\r\n    <div class="row rp-grid-thead">\r\n        <div class="rp-grid-th grid-cell name-grid-cell">\r\n            <div class="table-wrapper">\r\n                <div class="middle-wrapper">\r\n                    <span class="rp-grid-th-name">'+((t=e.text.members.titleNameLogin)==null?"":t)+'</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="rp-grid-th grid-cell login-grid-cell">\r\n            <div class="table-wrapper">\r\n                <div class="middle-wrapper">\r\n                    <span class="rp-grid-th-name">'+((t=e.text.admin.lastLogin)==null?"":t)+'</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="rp-grid-th grid-cell role-grid-cell">\r\n            <div class="table-wrapper">\r\n                <div class="middle-wrapper">\r\n                    <span class="rp-grid-th-name">'+((t=e.text.project.projectRole)==null?"":t)+'</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="rp-grid-th grid-cell action-grid-cell">\r\n            <div class="table-wrapper">\r\n                <div class="middle-wrapper action-right">\r\n                    <span class="rp-grid-th-name">'+((t=e.text.ui.action)==null?"":t)+"</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div data-js-members-list></div>\r\n</div>\r\n<div data-js-members-paginate></div>\r\n",n},this.JST["tpl-project-members"]=function(e){var t,n="",r=_.escape;return n+="<div data-js-members></div>",n},this.JST["tpl-user-search-result"]=function(e){var t,n="",r=_.escape;return n+='<div class="user-search-result-wrap" title="'+((t=e.user.disabled?e.text.members.alredyAdded:"")==null?"":t)+'">\r\n    <div class="user-avatar">\r\n        <img src="'+((t=e.imagePath)==null?"":t)+'">\r\n        <i class="material-icons">mail_outline</i>\r\n    </div>\r\n    <div class="user-search-info">\r\n        <p class="user-search-name">'+((t=e.user.name)==null?"":t)+'</p>\r\n        <p class="user-search-login"><span class="invite-pref">'+((t=e.text.members.invitePref)==null?"":t)+"</span>"+((t=e.user.id)==null?"":t)+'</p>\r\n        <p class="user-search-send-email">'+((t=e.text.members.sendInvite)==null?"":t)+'</p>\r\n        <i class="material-icons user-add">add</i>\r\n        <i class="material-icons user-added">done</i>\r\n    </div>\r\n</div>',n},this.JST["tpl-register-messages"]=function(e){var t,n="",r=_.escape;return n+='<div class="invitation-fail"></div>\r\n',n},this.JST["tpl-register"]=function(e){var t,n="",r=_.escape;return n+='<div class="left-block">\r\n</div>\r\n<div class="right-block">\r\n    <span class="welcome-msg">'+((t=e.text.registration.welcomeMsg)==null?"":t)+'</span>\r\n    <div class="header-mobile"></div>\r\n    <form class="registration-form rp-form">\r\n        <label class="rp-field">\r\n            <div class="icon-wrapper"><i class="material-icons">person_outline</i></div>\r\n            <input type="text" class="rp-input" placeholder="Login" data-js-login>\r\n            <span class="validate-hint"></span>\r\n            <span class="hint">'+((t=e.text.registration.loginHint)==null?"":t)+'</span>\r\n        </label>\r\n        <label class="rp-field">\r\n            <div class="icon-wrapper"><i class="material-icons">person</i></div>\r\n            <input type="text" class="rp-input" placeholder="Full name" data-js-name>\r\n            <span class="validate-hint"></span>\r\n            <span class="hint">'+((t=e.text.registration.nameHint)==null?"":t)+'</span>\r\n        </label>\r\n        <label class="rp-field email-field">\r\n            <div class="icon-wrapper"><i class="material-icons">email</i></div>\r\n            <input type="text" class="rp-input" data-js-email disabled>\r\n            <span class="validate-hint"></span>\r\n        </label>\r\n        <label class="rp-field">\r\n            <div class="icon-wrapper"><i class="material-icons">lock_outline</i></div>\r\n            <input type="password" class="rp-input" placeholder="Password" data-js-password>\r\n            <span class="validate-hint"></span>\r\n            <span class="hint">'+((t=e.text.registration.passwordHint)==null?"":t)+'</span>\r\n        </label>\r\n        <label class="rp-field confirm-pass-field">\r\n            <div class="icon-wrapper"><i class="material-icons">lock_outline</i></div>\r\n            <input type="password" class="rp-input" placeholder="Confirm password" data-js-password-confirm>\r\n            <span class="validate-hint"></span>\r\n        </label>\r\n        <label class="rp-checkbox-wrap">\r\n            <input class="rp-input-checkbox" type="checkbox" data-js-show-password>\r\n            <span>'+((t=e.text.forms.showPassword)==null?"":t)+'</span>\r\n        </label>\r\n        <div class="buttons">\r\n            <button class="rp-btn rp-btn-cancel" type="button" data-js-cancel>\r\n                '+((t=e.text.ui.cancel)==null?"":t)+'\r\n            </button>\r\n            <button class="rp-btn disabled rp-btn-danger" type="button" data-js-register>\r\n                '+((t=e.text.ui.register)==null?"":t)+"\r\n            </button>\r\n        </div>\r\n    </form>\r\n</div>\r\n\r\n",n},this.JST["tpl-container"]=function(e){var t,n="",r=_.escape;return n+='<div class="panel rp-main-panel">\r\n    <div id="contentHeader" class="panel-heading rp-panel-heading clearfix"></div>\r\n    <div id="dynamic-content" class="panel-body"></div>\r\n<!--    <button type="button"\r\n        title="'+((t=e.text.dashboard.exitFullscreen)==null?"":t)+'"\r\n        class="close fullscreen-close">\r\n        <i class="material-icons">clear</i>\r\n    </button>-->\r\n</div>',n},this.JST["tpl-footer"]=function(e){var t,n="",r=_.escape;return n+='<div class="back-to-top">\r\n    <a title="'+((t=e.text.ui.backToTop)==null?"":t)+'" global-back-top>\r\n        <i class="material-icons">arrow_upward</i>\r\n        <span>'+((t=e.text.ui.backToTop)==null?"":t)+'</span>\r\n    </a>\r\n</div>\r\n\r\n<ul class="breadcrumbs">\r\n    <li>\r\n        <a href="https://github.com/reportportal/reportportal" target="_blank">\r\n            '+((t=e.text.footer.forkUs)==null?"":t)+'\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a href="https://reportportal-slack-auto.herokuapp.com/" target="_blank">\r\n            '+((t=e.text.footer.chatSlack)==null?"":t)+'\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a href="mailto:SupportEPMC-TSTReportPortal@epam.com?subject=Report%20Portal%20Support">\r\n            '+((t=e.text.footer.contactUs)==null?"":t)+'\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a href="http://www.epam.com" target="_blank">\r\n            '+((t=e.text.footer.epam)==null?"":t)+'\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a href="#documentation" target="_blank">\r\n            '+((t=e.text.footer.docs)==null?"":t)+'\r\n        </a>\r\n    </li>\r\n    <li>\r\n        <a href="swagger-ui.html" target="_blank">\r\n            '+((t=e.text.footer.api)==null?"":t)+'\r\n        </a>\r\n    </li>\r\n</ul>\r\n<div class="pull-left">\r\n    '+((t=e.text.ui.build)==null?"":t)+': <span id="buildVersion">XXXXXXX</span>\r\n</div>\r\n<div class="copyright pull-left">\r\n    &copy; <span class="footer-copy">'+((t=e.text.topMenu.reportPortal)==null?"":t)+"</span>\r\n    2017 &nbsp; &nbsp;"+((t=e.text.ui.allRights)==null?"":t)+"\r\n</div>\r\n",n},this.JST["tpl-header"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<nav class="navbar rp-navbar-header" role="navigation">\r\n    <!-- Brand and toggle get grouped for better mobile display -->\r\n    <div class="navbar-header visible-xs mobile-main-header">\r\n        <div class="button-menu-open" data-js-toogle-menu>\r\n            <div class="menu-icon-part"></div>\r\n            <div class="menu-icon-part"></div>\r\n            <div class="menu-icon-part"></div>\r\n        </div>\r\n        <div class="rp-logo"></div>\r\n    </div>\r\n    <!-- Collect the nav links, forms, and other content for toggling -->\r\n    <div class="navbar-collapse" id="navbar-header-collapse">\r\n        <ul class="nav navbar-nav navbar-right rp-navbar-right rp-header-nav hidden-xs">\r\n            <li class="dropdown">\r\n                <a href="#" class="dropdown-toggle hidden-xs rp-user-navigator" data-toggle="dropdown" data-js-user-dropdown>\r\n                    <div class="user-login-wrap float-left">\r\n                        ',e.isAdmin&&(n+='\r\n                            <div class="user-status">\r\n                                <span class="user-status-text">'+((t=e.text.topMenu.admin)==null?"":t)+"</span>\r\n                            </div>\r\n                        "),n+='\r\n                        <div class="user-name name2 text-uppercase custom-width2">\r\n                            '+r(e.user.user_login)+'\r\n                        </div>\r\n                    </div>\r\n                    <div class="user-avatar-wrap float-left">\r\n                        <img class="avatar"\r\n                            id="profileImage"\r\n                            src="'+((t=e.util.updateImagePath(e.user.image))==null?"":t)+'"\r\n                            alt="'+((t=e.text.ui.avatar)==null?"":t)+'" />\r\n                    </div>\r\n                    <i class="material-icons arrow_drop_down">arrow_drop_down</i>\r\n                </a>\r\n                <ul class="dropdown-menu rp-mobile-position clearfix" role="menu" id="userNavigator">\r\n                    <li class="col-xs-6 col-sm-12">\r\n                        <a href="#user-profile" class="mem-set user-id" data-js-profile-page-link>\r\n                            <span class="custom-padding">'+((t=e.text.topMenu.profile)==null?"":t)+"</span>\r\n                        </a>\r\n                    </li>\r\n                    ",e.isAdmin&&(n+='\r\n                        <li class="col-xs-6 col-sm-12">\r\n                            <a href="#administrate" id="administrate" class="admin-section" data-js-administrate-page-link>\r\n                                <span class="custom-padding">'+((t=e.text.topMenu.administrate)==null?"":t)+"</span>\r\n                            </a>\r\n                        </li>\r\n                    "),n+='\r\n                    <li class="col-xs-6 col-sm-12">\r\n                        <a href="#login" id="logout">\r\n                            <span class="custom-padding">'+((t=e.text.topMenu.logout)==null?"":t)+'</span>\r\n                        </a>\r\n                    </li>\r\n                </ul>\r\n            </li>\r\n        </ul>\r\n        <ul class="nav navbar-nav rp-navbar-left rp-header-nav rp-projects-block">\r\n            <li class="dropdown clearfix" id="projectSelector">\r\n                <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-js-project-dropdown>\r\n                    <span class="selected-project" title="'+((t=e.text.topMenu.activeProjTitle)==null?"":t)+'">\r\n                        '+r(e.project.projectId)+'\r\n                    </span>\r\n                    <i class="material-icons">keyboard_arrow_down</i>\r\n                </a>\r\n                <ul class="dropdown-menu user-projects rp-mobile-position clearfix" role="menu">\r\n                    ',_.each(e.projects,function(r){n+="\r\n                        ";var i=r===e.project.projectId?"active":"";n+='\r\n                        <li class="col-xs-12 col-sm-12 text-uppercase"\r\n                            id="project-'+((t=r)==null?"":t)+'">\r\n                            <a class=" rp-desktop"\r\n                                href="#"\r\n                                data-href="'+((t=r)==null?"":t)+'">\r\n                                '+((t=r)==null?"":t)+"\r\n                            </a>\r\n                        </li>\r\n                    "}),n+="\r\n                </ul>\r\n            </li>\r\n            ",e.canDebug&&(n+='\r\n                <li id="members"\r\n                    data-id="members"\r\n                    title="'+((t=e.text.topMenu.members)==null?"":t)+'"\r\n                    class="members">\r\n                    <a href="#'+r(e.project.projectId)+'/members" class="mem-set" data-js-members-icon>\r\n                        <i class="rp-icons rp-icons-all-users"></i>\r\n                    </a>\r\n                </li>\r\n            '),n+='\r\n            <li id="settings"\r\n                data-id="settings"\r\n                title="'+((t=e.text.topMenu.settings)==null?"":t)+'"\r\n                class="settings">\r\n                <a href="#'+r(e.project.projectId)+'/settings" class="mem-set" data-js-settings-icon>\r\n                    <i class="material-icons">settings</i>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <!-- /.navbar-collapse -->\r\n</nav>\r\n',n},this.JST["tpl-sidebar"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="sidebar-close" data-js-sidebar-close></div>\r\n<a href="#'+((t=e.projectUrl)==null?"":t)+'" class="logo">\r\n    <i class="sprite sprite-logo"></i>\r\n    <!-- <span>< % = data.text.topMenu.reportPortal % ></span> -->\r\n</a>\r\n<nav data-js-scroll-container ',e.isAdmin||(n+=' class="for-common-user" '),n+=' >\r\n\r\n        <ul class="main-menu">\r\n            ',n+='\r\n            <li>\r\n                <a href="#'+r(e.projectUrl)+'/dashboard" id="dashboard">\r\n                    <i class="rp-icons rp-icons-dashboard fsize-18"></i>\r\n                    <span>'+((t=e.text.topMenu.dashboard)==null?"":t)+"</span>\r\n                </a>\r\n            </li>\r\n            <li>\r\n                ";var o="#"+e.projectUrl+"/launches/all";return n+='\r\n                <a href="'+r(o)+'" id="launches">\r\n                    <i class="rp-icons rp-icons-launches fsize-23"></i>\r\n                    <span>'+((t=e.text.topMenu.launches)==null?"":t)+'</span>\r\n                </a>\r\n            </li>\r\n            <li>\r\n                <a href="#'+r(e.projectUrl)+'/filters" id="filters">\r\n                    <i class="rp-icons rp-icons-filter fsize-20"></i>\r\n                    <span>'+((t=e.text.topMenu.filters)==null?"":t)+"</span>\r\n                </a>\r\n            </li>\r\n            ",e.canDebug&&(n+='\r\n            <li>\r\n                <a href="#'+r(e.projectUrl)+'/userdebug/all" id="userdebug">\r\n                    <i class="rp-icons rp-icons-eye fsize-17"></i>\r\n                    <span>'+((t=e.text.topMenu.debug)==null?"":t)+"</span>\r\n                </a>\r\n            </li>\r\n            "),n+='\r\n        </ul>\r\n        <ul class="user-menu">\r\n            <li class="col-xs-6 col-sm-12">\r\n                <a href="#user-profile" class="mem-set user-id">\r\n                    <i class="material-icons">person</i>\r\n                    <span class="custom-padding">'+((t=e.text.topMenu.profile)==null?"":t)+"</span>\r\n                </a>\r\n            </li>\r\n            ",e.isAdmin&&(n+='\r\n            <li class="col-xs-6 col-sm-12">\r\n                <a href="#administrate" id="administrate" class="admin-section" data-js-administrate-page-link>\r\n                    <i class="material-icons">tune</i>\r\n                    <span class="custom-padding">'+((t=e.text.topMenu.administrate)==null?"":t)+"</span>\r\n                </a>\r\n            </li>\r\n            "),n+='\r\n            <li class="col-xs-6 col-sm-12">\r\n                <a href="" data-js-logout>\r\n                    <i class="rp-icons rp-icons-logout fsize-23"></i>\r\n                    <span class="custom-padding">'+((t=e.text.topMenu.logout)==null?"":t)+'</span>\r\n                </a>\r\n            </li>\r\n        </ul>\r\n\r\n</nav>\r\n<a id="back-top" class="hidden-xs" title="'+((t=e.text.ui.backToTop)==null?"":t)+'" style="display: none;" global-back-top>\r\n    <nobr>\r\n        <span id="btt-span">'+((t=e.text.ui.backToTop)==null?"":t)+"</span>\r\n    </nobr>\r\n</a>\r\n",n},this.JST["tpl-launch-message-tooltip"]=function(e){var t,n="",r=_.escape;return n+='<div class="message-tooltip">'+((t=e.message)==null?"":t)+"</div>\r\n",n},this.JST["tpl-launch-suite-duration-tooltip"]=function(e){var t,n="",r=_.escape;return n+='<div class="duration-tooltip">\r\n        <span>'+((t=e.message)==null?"":t)+"</span>\r\n</div>",n},this.JST["tpl-launch-suite-executions-tooltip"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="executions-tooltip">\r\n    <ul class="stats-tip-list">\r\n        ',_.each(e.stats,function(e,r){n+='\r\n        <li class="stats-tip">\r\n            <span class="status">'+((t=r)==null?"":t)+'</span>\r\n            <span class="percents">'+((t=e)==null?"":t)+"%</span>\r\n        </li>\r\n        "}),n+="\r\n    </ul>\r\n</div>\r\n",n},this.JST["tpl-profile-regenerate-uuid"]=function(e){var t,n="",r=_.escape;return n+='<div class="regenerate-uuid-tooltip">\r\n    '+((t=e.text.userProfile.msgRegenTop)==null?"":t)+'\r\n    <br>\r\n    <span class="uuid-warning">'+((t=e.text.userProfile.msgRegenMid)==null?"":t)+"</span>\r\n    <br>\r\n    "+((t=e.text.userProfile.msgRegenFoot)==null?"":t)+"\r\n</div>",n},this.JST["tpl-user-change-pass"]=function(e){var t,n="",r=_.escape;return n+='<div id="changePass" class="row">\r\n    <h3 class="page-title text-capitalize col-xs-12">\r\n        <span class="profile_name">'+((t=e.user_login)==null?"":t)+'</span>\r\n    </h3>\r\n    <span class="form-group col-sm-12">\r\n        <input id="originalPass" class="form-control" type="password" placeholder="'+((t=e.text.userProfile.oldPass)==null?"":t)+'" value="">\r\n        <span class="help-inline">'+((t=e.text.validation.originalPassRegex)==null?"":t)+'</span>\r\n    </span>\r\n    <span class="form-group col-sm-12" id="confirmGroup">\r\n        <input id="newPass" class="form-control m-bottom-15" type="password"  placeholder="'+((t=e.text.login.newPassword)==null?"":t)+'" value="">\r\n        <input id="newPassComfirm" class="form-control confirm" type="password" placeholder="'+((t=e.text.login.confirmNewPassword)==null?"":t)+'" value="">\r\n        <div class="form-inline p-top-10 clearfix">\r\n            <label class="text-muted small pull-left"><input type="checkbox" id="showPass" class="" /> '+((t=e.text.login.showPassword)==null?"":t)+'</label>\r\n        </div>\r\n        <span class="help-inline"></span>\r\n    </span>\r\n    <div class="form-inline col-sm-12 p-top-10 p-bottom-10 clearfix">\r\n        <input type="button" id="submit_change" value="'+((t=e.text.login.changePassword)==null?"":t)+'" class="btn-create btn btn-info pull-right disabled">\r\n        <input type="button" id="cancel_change" value="'+((t=e.text.ui.cancel)==null?"":t)+'" class="btn btn-default m-right-10 pull-right">\r\n    </div>\r\n</div>',n},this.JST["tpl-user-edit-info"]=function(e){var t,n="",r=_.escape;return n+='<div id="infoEditor" class="row">\r\n    <h3 class="page-title text-capitalize col-xs-12">\r\n        <span class="profile_name">'+((t=e.user_login)==null?"":t)+'</span>\r\n    </h3>\r\n    <span class="form-group col-sm-12">\r\n        <input id="fullName" class="form-control" type="text" value="'+((t=e.fullName)==null?"":t)+'">\r\n        <span class="help-inline"></span>\r\n    </span>\r\n    <span class="form-group col-sm-12">\r\n        <input id="email" class="form-control" type="text" maxlength="128" value="'+((t=e.email)==null?"":t)+'">\r\n        <span class="help-inline"></span>\r\n    </span>\r\n    <div class="form-inline col-sm-12 p-top-10 p-bottom-10 clearfix">\r\n        <input type="button" id="submit_info" value="'+((t=e.text.ui.save)==null?"":t)+'" class="btn-create btn btn-info pull-right disabled">\r\n        <input type="button" id="cancel_info" value="'+((t=e.text.ui.cancel)==null?"":t)+'" class="btn btn-default m-right-10 pull-right">\r\n    </div>\r\n</div>',n},this.JST["tpl-user-page-header"]=function(e){var t,n="",r=_.escape;return n+='<div id="headerBar" class="clearfix">\r\n    <ul class="rp-nav-left">\r\n        <li class="title-holder">\r\n            <span class="header-alike link-as-element">'+((t=e.text.userProfile.userProfile)==null?"":t)+"</span>\r\n        </li>\r\n    </ul>\r\n</div>",n},this.JST["tpl-user-page-view"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="content pr-user-profile row">\r\n    <div class="col-xs-12 col-md-6">\r\n        <div class="media">\r\n            <div class="media_wrapper col-sm-12">\r\n                <div class="row">\r\n                    <div class="media_image col-sm-3">\r\n                        <div id="avatarWrapper" class="'+((t=e.photo_loaded?"active":"")==null?"":t)+'">\r\n                            <div id="remove-image" class="remove-image">\r\n                                <div class="remove-image-wrap">\r\n                                    <i class="material-icons mi-close">close</i>\r\n                                </div>\r\n                            </div>\r\n                            <img class="img-thumbnail avatar"\r\n                                id="userProfileAvatar"\r\n                                data-original="'+((t=e.image)==null?"":t)+'"\r\n                                src="'+((t=e.image)==null?"":t)+'"\r\n                                alt="'+((t=e.text.ui.avatar)==null?"":t)+'" />\r\n                        </div>\r\n                        ',e.account_type==="INTERNAL"&&(n+='\r\n                        <form id="fileUploadForm">\r\n                            <span class="btn btn-file btn-salad-bg m-top-10">\r\n                                '+((t=e.text.userProfile.selectPhoto)==null?"":t)+'\r\n                                <input type="file"\r\n                                    id="imgSelector"\r\n                                    name="file"\r\n                                    accept="image/gif, image/jpeg, image/png"\r\n                                    title="'+((t=e.text.userProfile.selectPhoto)==null?"":t)+'" />\r\n                            </span>\r\n                            <input type="submit"\r\n                                class="btn btn-salad-bg m-top-10"\r\n                                id="submitPhoto"\r\n                                value="'+((t=e.text.userProfile.savePhoto)==null?"":t)+'"\r\n                                title="'+((t=e.text.userProfile.savePhoto)==null?"":t)+'" />\r\n                        </form>\r\n                        <span id="wrongImageMessage"\r\n                            class="alert alert-danger col-sm-12 m-top-10">\r\n                            '+((t=e.text.validation.wrongImage)==null?"":t)+"\r\n                        </span>\r\n                        "),n+='\r\n                    </div>\r\n                    <div class="col-sm-9">\r\n                        ',e.account_type==="INTERNAL"&&(n+='\r\n                        <div class="col-sm-12 text-right" id="updateButtons">\r\n                            <button class="btn btn-salad-bg m-top-10 m-right-15" id="editInfo">\r\n                                '+((t=e.text.userProfile.editInfo)==null?"":t)+'\r\n                            </button>\r\n                            <button class="btn btn-salad-bg m-top-10" id="changePassword">\r\n                                '+((t=e.text.login.changePassword)==null?"":t)+"\r\n                            </button>\r\n                        </div>\r\n                        "),n+='\r\n                        <div class="row" id="staticInfo">\r\n                            <h3 class="page-title text-capitalize col-xs-12">\r\n                                <span class="profile_name text-wrapper">'+((t=e.user_login)==null?"":t)+'</span>\r\n                                <small class="profile_full_name multiple-spaces text-wrapper p-bottom-10">'+((t=e.fullName)==null?"":t)+'</small>\r\n                                <small class="profile_mail text-lowercase">'+((t=e.email)==null?"":t)+'</small>\r\n                            </h3>\r\n                            <div class="profile_form form-group container-fluid row">\r\n                                <label for="user_uuid" class="col-sm-1 control-label">'+((t=e.text.userProfile.UUID)==null?"":t)+'</label>\r\n                                <div class="col-sm-11" id="keyHolder">\r\n                                    <div class="col-xs-10 col-sm-10" data-js-block-is-token>\r\n                                        <div class="row">\r\n                                            <input type="text" value="'+((t=e.label)==null?"":t)+'" size="40" readonly="readonly" name="user[uuid]" id="user_uuid" class="form-control col-sm-12" data-js-input-token>\r\n                                            <div class="row">\r\n                                                <span class="help-block col-sm-12">\r\n                                                    '+((t=e.text.userProfile.msgUUIDTop)==null?"":t)+'\r\n                                                </span>\r\n                                            </div>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="col-xs-2 col-sm-2">\r\n                                        <span class="help-block b-update-uudi postooltip">\r\n                                            <button id="update-uuid"\r\n                                                type="button"\r\n                                                name="update-uuid"\r\n                                                class="btn btn-default btn-save"\r\n                                                data-toggle="tooltip"\r\n                                                title="'+((t=e.text.userProfile.msgRegenTop)==null?"":t)+"\r\n                                                    <br>\r\n                                                    <br>\r\n                                                    <span style='color: red;'>\r\n                                                        "+((t=e.text.userProfile.msgRegenMid)==null?"":t)+"\r\n                                                    </span>\r\n                                                    <br>\r\n                                                    "+((t=e.text.userProfile.msgRegenFoot)==null?"":t)+'\r\n                                                ">\r\n                                                <i class="material-icons mi-autorenew">autorenew</i>\r\n                                            </button>\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="profile_project_list row">\r\n            <div id="project-list" class="container-fluid col-sm-12">\r\n                <div class="project_list_wrapper">\r\n                    <div class="project_list_header row">\r\n                        <div class="project_roles col-sm-7">\r\n                            '+((t=e.text.userProfile.projectAndRoles)==null?"":t)+':\r\n                        </div>\r\n                        <div class="col-sm-5">\r\n                            <small class="pull-right">\r\n                                '+((t=_.size(e.projects))==null?"":t)+""+((t=e.text.userProfile.ofThem)==null?"":t)+'\r\n                            </small>\r\n                        </div>\r\n                    </div>\r\n                    <div class="padded">\r\n                        <div id="projects" class="list-group">\r\n                            ',_.each(e.projects,function(i,s){n+='\r\n                                <div class="project project-row list-group-item ',s==e.defaultProject&&(n+="active default_project"),n+='">\r\n                                    <h5 class="list-group-item-heading uppercase col-sm-7">\r\n                                        <strong class="break-link">'+r(s)+'</strong>\r\n                                    </h5>\r\n                                    <p class="list-group-item-text col-sm-5">'+((t=i.projectRole)==null?"":t)+"</p>\r\n                                </div>\r\n                            "}),n+='\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div id="actionsUserProfile" class="actions form-group row text-right"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="code_editor form-group col-xs-12 col-md-6 pull-right"\r\n        data-js-block-is-token\r\n        style="position: static;">\r\n        <ul class="nav nav-pills nav-justified config-pills">\r\n            <li class="active">\r\n                <a href="#testng">'+((t=e.text.userProfile.testNG)==null?"":t)+'</a>\r\n            </li>\r\n            <li>\r\n                <a href="#ruby">'+((t=e.text.userProfile.ruby)==null?"":t)+'</a>\r\n            </li>\r\n            <li>\r\n                <a href="#soap">'+((t=e.text.userProfile.soapUI)==null?"":t)+'</a>\r\n            </li>\r\n            <li>\r\n                <a href="#.net">'+((t=e.text.userProfile.donNet)==null?"":t)+'</a>\r\n            </li>\r\n        </ul>\r\n        <div class="">\r\n            <div class="config-container">\r\n                <div id="user-config"></div>\r\n            </div>\r\n        </div>\r\n        <a href="'+((t=e.certificateUrl)==null?"":t)+'"\r\n            class="rp-blue-link"\r\n            ',n+='\r\n            download\r\n            target="_blank"\r\n            id="certificate">\r\n            '+((t=e.text.userProfile.downloadCertificate)==null?"":t)+"\r\n        </a>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-user-profile-header"]=function(e){var t,n="",r=_.escape;return n+='<div id="headerBar" class="clearfix">\r\n    <ul class="rp-nav-left">\r\n        <li class="title-holder">\r\n            <span class="header-alike link-as-element">'+((t=e.text.userProfile.userProfile)==null?"":t)+"</span>\r\n        </li>\r\n    </ul>\r\n</div>",n},this.JST["tpl-user-profile-view"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.account_type==="INTERNAL";return n+='\r\n<div class="content rp-user-profile row">\r\n    <div class="col-xs-12 col-md-6">\r\n        <h2 class="user-profile-title">'+((t=e.text.userProfile.personalInfo)==null?"":t)+'</h2>\r\n        <div class="user-profile-info">\r\n            <div class="user-profile-photo '+((t=e.photo_loaded?"active":"")==null?"":t)+'">\r\n                <img class="user-avatar" data-js-user-img data-original="'+((t=e.image)==null?"":t)+'" src="'+((t=e.image)==null?"":t)+'" alt="'+((t=e.text.ui.avatar)==null?"":t)+'" />\r\n            </div>\r\n            ',o?n+='\r\n            <div class="user-change-password">\r\n                <button type="button" class="rp-btn rp-btn-default" data-js-change-password>\r\n                    '+((t=e.text.login.changePassword)==null?"":t)+"\r\n                </button>\r\n            </div>\r\n            ":n+='\r\n            <div class="user-change-password" id="updateButtons">\r\n                <button type="button" class="rp-btn rp-btn-default" data-js-force-update>\r\n                    '+((t=e.text.userProfile.forceUpdate)==null?"":t)+"\r\n                </button>\r\n            </div>\r\n            ",n+='\r\n            <div class="user-info-content">\r\n                <div class="user-info-id"><span data-js-user-login></span></div>\r\n                <div class="user-info-name">\r\n                    <span class="user-edit">\r\n                        <span data-js-user-name>'+((t=e.fullName)==null?"":t)+"</span>\r\n                        ",o&&(n+='\r\n                            <i title="'+((t=e.text.userProfile.editInfo)==null?"":t)+'" data-js-edit-info class="material-icons">edit</i>\r\n                        '),n+='\r\n                    </span>\r\n                </div>\r\n                <div class="user-info-mail">\r\n                    <span class="user-edit">\r\n                        <span data-js-user-email class="user-mail"></span>\r\n                        ',o&&(n+='\r\n                            <i title="'+((t=e.text.userProfile.editInfo)==null?"":t)+'" data-js-edit-info class="material-icons">edit</i>\r\n                        '),n+="\r\n                    </span>\r\n                </div>\r\n                ",o&&(n+='\r\n                <div class="user-edit-photo">\r\n                    <form  data-js-upload-photo-form>\r\n                        <div class="" data-js-edit-photo>\r\n                            <span class="rp-btn rp-btn-default user-upload-photo-btn">\r\n                                '+((t=e.text.userProfile.uploadPhoto)==null?"":t)+'\r\n                                <input data-js-select-photo type="file" name="file" accept="image/gif, image/jpeg, image/png" title="'+((t=e.text.userProfile.selectPhoto)==null?"":t)+'" />\r\n                            </span>\r\n                            <span class="user-remove-photo '+((t=e.photo_loaded?"active":"")==null?"":t)+'" data-js-remove-photo>'+((t=e.text.userProfile.removePhoto)==null?"":t)+'</span>\r\n                        </div>\r\n                        <div class="upload-photo-form" data-js-upload-block>\r\n                            <button data-js-submit-photo type="submit" class="rp-btn rp-btn-default">\r\n                                '+((t=e.text.userProfile.savePhoto)==null?"":t)+'\r\n                            </button>\r\n                        </div>\r\n                        <div data-js-photo-error class="photo-error-message">'+((t=e.text.validation.wrongImage)==null?"":t)+"</div>\r\n                    </form>\r\n                </div>\r\n                "),n+='\r\n            </div>\r\n        </div>\r\n        <div class="user-projects-list">\r\n            <div class="user-projects-throw">\r\n                <div class="col-sm-8 col-xs-12">\r\n                    <h2>'+((t=e.text.userProfile.projectAndRoles)==null?"":t)+" ("+((t=_.size(e.projects))==null?"":t)+')</h2>\r\n                </div>\r\n                <div class="col-sm-4 user-projects-roles">'+((t=e.text.userProfile.projectRole)==null?"":t)+"</div>\r\n            </div>\r\n            ",_.each(e.projects,function(e,i){n+='\r\n                <div class="user-projects-row">\r\n                    <div class="col-sm-8 col-xs-12"><span class="project-name">'+r(i)+'</span></div>\r\n                    <div class="col-sm-4 col-xs-12">'+((t=e.projectRole)==null?"":t)+"</div>\r\n                </div>\r\n            "}),n+='\r\n        </div>\r\n    </div>\r\n    <div class="col-xs-12 col-md-6" data-js-block-is-token>\r\n        <h2 class="user-profile-title">'+((t=e.text.userProfile.uuidTitle)==null?"":t)+'</h2>\r\n        <div class="user-uuid-form">\r\n            <label for="user_uuid" class="control-label user-uuid-label">'+((t=e.text.userProfile.UUID)==null?"":t)+'</label>\r\n            <div class="user-uuid-button">\r\n                <button data-js-update-token type="button" class="rp-btn rp-btn-default">\r\n                    '+((t=e.text.userProfile.regenerateBtn)==null?"":t)+'\r\n                </button>\r\n            </div>\r\n            <div class="user-uuid-field" data-js-block-is-token>\r\n                <input type="text" value="'+((t=e.apiToken)==null?"":t)+'" size="40" readonly="readonly" name="user_uuid" id="user_uuid" class="form-control" data-js-input-token>\r\n            </div>\r\n            <div class="user-uuid-help-block">\r\n                '+((t=e.text.userProfile.msgUUIDTop)==null?"":t)+'\r\n            </div>\r\n        </div>\r\n        <div class="user-config-editor">\r\n            <h2 class="user-profile-title">'+((t=e.text.userProfile.configExamples)==null?"":t)+'</h2>\r\n            <ul class="config-pills" data-js-config-tab>\r\n                <li class="active">\r\n                    <a href="#testng">'+((t=e.text.userProfile.testNG)==null?"":t)+'</a>\r\n                </li>\r\n                <li>\r\n                    <a href="#ruby">'+((t=e.text.userProfile.ruby)==null?"":t)+'</a>\r\n                </li>\r\n                <li>\r\n                    <a href="#soap">'+((t=e.text.userProfile.soapUI)==null?"":t)+'</a>\r\n                </li>\r\n                <li>\r\n                    <a href="#.net">'+((t=e.text.userProfile.donNet)==null?"":t)+'</a>\r\n                </li>\r\n            </ul>\r\n            <div class="user-config-container">\r\n                <div data-js-editor class="config-container"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n',n},this.JST["tpl-pie-grid"]=function(e){var t,n="",r=_.escape;return n+='<div class="combo-pie-widget">\r\n    <div class="combo-pie-part">\r\n        <svg id="'+((t=e.id)==null?"":t)+'-svg1" style="height: 100%"></svg>\r\n    </div>\r\n    <div class="combo-pie-part">\r\n        <svg id="'+((t=e.id)==null?"":t)+'-svg2" style="height: 100%"></svg>\r\n    </div>\r\n</div>\r\n',n},this.JST["tpl-widget-activity-stream"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="project-activity-panel">\r\n    ',_.isEmpty(e.dates)?n+='\r\n        <div class="no-data-error">'+((t=e.text.widgets.noData)==null?"":t)+"</div>\r\n    ":(n+="\r\n    ",_.each(e.dates,function(i){n+='\r\n    <div class="activity-date-header">\r\n        '+((t=i.dayTitle)==null?"":t)+"\r\n    </div>\r\n    ",_.each(i.items,function(i){n+='\r\n    <div class="activity-item">\r\n        ',i.actionType!=="create_user"&&(n+='\r\n        <div class="activity-avatar">\r\n            <img src="'+((t=e.methodUpdateImagePath(e.imageRoot()+i.userRef.split(" ").join("_")))==null?"":t)+'" class="avatar" alt="'+((t=i.userRef)==null?"":t)+'" />\r\n        </div>\r\n        '),n+='\r\n        <div class="activity-item-summary-wrap">\r\n        <div class="activity-item-summary">\r\n            ',i.actionType=="create_user"&&i.objectType=="user"&&(n+="\r\n                <strong>"+r(i.loggedObjectRef)+'</strong>,\r\n                <span style="text-transform: lowercase;">'+((t=e.text.members.welcomeTo)==null?"":t)+"</span>\r\n                "+((t=e.text.ui.toolname)==null?"":t)+"!\r\n            "),n+="\r\n            ",i.actionType!=="create_user"&&(n+='\r\n                <strong class="activity-item-user">'+((t=i.userRef)==null?"":t)+"</strong>\r\n            "),n+="\r\n            ",i.objectType=="launch"&&(n+="\r\n                "+((t=e.text.widgets[i.actionType+"Launch"])==null?"":t)+"\r\n                ",i.actionType!=="delete"&&!_.isEmpty(i.name)?n+='\r\n                    <a class="rp-blue-link-undrl" target="_blank"\r\n                       href="#'+((t=e.properties.projectUrl)==null?"":t)+"/launches/all/"+((t=i.loggedObjectRef)==null?"":t)+'">\r\n                       '+r(i.name)+"</a>.\r\n                ":n+="\r\n                    "+r(i.name)+".\r\n                ",n+="\r\n            "),n+="\r\n            ";if(i.objectType=="widget"||i.objectType=="dashboard")n+="\r\n                "+((t=e.text.widgets[i.actionType+i.objectType.capitalize()])==null?"":t)+"\r\n                <strong>"+r(i.name)+"</strong>.\r\n            ";n+="\r\n            ",i.objectType=="defect_type"&&(n+="\r\n                "+((t=e.text.widgets[i.actionType])==null?"":t)+"\r\n                ",i.actionType=="delete_defect"?n+="\r\n                    "+((t=e.text.widgets.defectType)==null?"":t)+'\r\n                    <a class="rp-blue-link-undrl"\r\n                        target="_blank"\r\n                        href="#'+((t=e.properties.projectUrl)==null?"":t)+'/settings/defect">\r\n                        '+((t=i.name)==null?"":t)+"\r\n                    </a>\r\n                ":n+='\r\n                    <a class="rp-blue-link-undrl"\r\n                        target="_blank"\r\n                        href="#'+((t=e.properties.projectUrl)==null?"":t)+'/settings/defect">\r\n                        '+((t=e.text.widgets.defectTypes)==null?"":t)+"\r\n                    </a>\r\n                ",n+="            "),n+="\r\n            ";if(i.objectType=="externalSystem"){n+="\r\n                ";var s=e.getBts(i.name),o=s.type,u=s.name;n+="\r\n                "+((t=e.text.widgets[i.actionType])==null?"":t)+"\r\n                "+((t=o)==null?"":t)+"\r\n                ",i.actionType=="update_bts"&&(n+="\r\n                    "+r(u)+'\r\n                    <a class="rp-blue-link-undrl" target="_blank" href="#'+((t=e.properties.projectUrl)==null?"":t)+'/settings/bts">\r\n                        '+((t=e.text.widgets.properties)==null?"":t)+"</a>.\r\n                "),n+="\r\n                ",i.actionType=="delete_bts"&&(n+="\r\n                    ",u&&(n+='\r\n                    <a class="rp-blue-link-undrl"\r\n                        target="_blank"\r\n                        href="#'+((t=e.properties.projectUrl)==null?"":t)+'/settings/bts">\r\n                        '+r(u)+"\r\n                    </a>\r\n                    "),n+="\r\n                    "+((t=e.text.ui.from)==null?"":t)+"\r\n                    "+((t=e.text.widgets.project)==null?"":t)+".\r\n                "),n+="\r\n                ",i.actionType=="create_bts"&&(n+='\r\n                    <a class="rp-blue-link-undrl"\r\n                        target="_blank"\r\n                        href="#'+((t=e.properties.projectUrl)==null?"":t)+'/settings/bts">\r\n                        '+r(u)+"\r\n                    </a>.\r\n                "),n+="\r\n            "}n+="\r\n            ";if(i.objectType=="testItem"&&i.actionType.indexOf("issue")>0){n+="\r\n                "+((t=e.text.widgets[i.actionType])==null?"":t)+"\r\n                ";var a=e.getTickets(i);n+="\r\n                ",_.each(a,function(r,i){n+="\r\n                    ";var s=e.getTicketUrlId(r),o=s.id,u=s.url,f=a.length,l=f>1&&i<f-1?",":"";n+="\r\n                    ",u?n+='\r\n                    <a class="rp-blue-link-undrl"\r\n                        target="_blank"\r\n                        href="'+((t=u)==null?"":t)+'">\r\n                        '+((t=o)==null?"":t)+"\r\n                    </a>\r\n                    "+((t=l)==null?"":t)+"\r\n                    ":n+="\r\n                        "+((t=o)==null?"":t)+"\r\n                        "+((t=l)==null?"":t)+"\r\n                    ",n+="\r\n                "}),n+="\r\n                "+((t=e.text.ui.to)==null?"":t)+"\r\n                "+((t=e.text.widgets.testItem)==null?"":t)+'\r\n                <span id="itemId-'+((t=i.loggedObjectRef)==null?"":t)+'">\r\n                    <span class="loading-indicator"></span>\r\n                </span>.\r\n            '}n+="\r\n            ",i.objectType=="email"&&(n+="\r\n                "+((t=e.text.widgets[i.actionType])==null?"":t)+'\r\n                <a class="rp-blue-link-undrl"\r\n                    target="_blank"\r\n                    href="#'+((t=e.properties.projectUrl)==null?"":t)+'/settings/notifications">\r\n                    '+((t=e.text.widgets.emailNotifications)==null?"":t)+"</a>.\r\n            "),n+="\r\n            ";if(i.objectType=="project"){n+="\r\n                <span>\r\n                    "+((t=e.text.widgets[i.actionType])==null?"":t)+'\r\n                    <a class="rp-blue-link-undrl"\r\n                        target="_blank"\r\n                        href="#'+((t=e.properties.projectUrl)==null?"":t)+'/settings">\r\n                        '+((t=e.text.widgets.propertiesProj)==null?"":t)+"</a>:\r\n                </span>\r\n                ";var f=_.size(i.history),l=0;n+="\r\n                ",_.each(i.history,function(i,s){n+="\r\n                    ",l++,n+="\r\n                    ",i.newValue&&i.oldValue?n+="\r\n                        "+((t=e.text.activity[s])==null?"":t)+"\r\n                        "+((t=e.text.ui.from)==null?"":t)+"\r\n                        "+r(e.parseOnOff(i.oldValue))+"\r\n                        "+((t=e.text.ui.to)==null?"":t)+"\r\n                        "+r(e.parseOnOff(i.newValue))+""+((t=l<f?",":".")==null?"":t)+"\r\n                    ":n+="\r\n                        "+((t=e.text.activity[s])==null?"":t)+""+((t=l<f?",":"")==null?"":t)+".\r\n                    ",n+="\r\n                "}),n+="\r\n            "}n+='\r\n        </div>\r\n        <div class="activity-item-info">\r\n            <span class="hoverFullTime">\r\n                <span class="timeMoment timeHover">'+((t=i.momentTime)==null?"":t)+'</span>\r\n                <span class="time-full timeHover hidden">\r\n                    at '+((t=i.fullTime)==null?"":t)+'\r\n                </span>\r\n                <span class="time-ms hidden">'+((t=i.last_modified)==null?"":t)+"</span>\r\n            </span>\r\n        </div>\r\n        </div>\r\n    </div>\r\n    "}),n+="\r\n    "}),n+="\r\n    "),n+='\r\n    <div class="mobile-disabling-cover"></div>\r\n</div>\r\n',n},this.JST["tpl-widget-add-container"]=function(e){var t,n="",r=_.escape;return n+='<div tabindex="1" class="absolute-buttons widget-buttons">\r\n    <button class="aui-button delete" title="'+((t=e.text.widgets.clickDelete)==null?"":t)+'">\r\n        <i class="material-icons">clear</i>\r\n    </button>\r\n</div>\r\n',n},this.JST["tpl-widget-bug-table-item"]=function(e){var t,n="",r=_.escape;return n+='\r\n<div class="bug-item"\r\n     data-item-id="'+((t=e.testItemId)==null?"":t)+'"><span class="loading-indicator"></span></div>',n},this.JST["tpl-widget-bug-table-list"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="uniq-bugs-row">\r\n    <div class="uniq-bugs-id">\r\n        <strong id="bugId-'+((t=e.item.bugId)==null?"":t)+'" class="bugs-id">'+((t=e.item.bugId)==null?"":t)+'</strong>\r\n    </div>\r\n    <div class="uniq-bugs-item" data-js-bugs-item> </div>\r\n    <div class="uniq-bugs-date">\r\n        ';var o=e.item.time?new Date(e.item.time):null;return n+="\r\n        ",o&&(n+='\r\n            <div class="hoverFullTime">\r\n                <span class="timeMoment timeHover">\r\n                    '+((t=e.moment(e.dateFormat(o)).fromNow())==null?"":t)+'\r\n                </span>\r\n                <div class="time-full timeHover hidden">\r\n                    <span>'+((t=e.dateFormat(o))==null?"":t)+'</span>\r\n                </div>\r\n                <span class="time-ms hidden">'+((t=o)==null?"":t)+"</span>\r\n            </div>\r\n        "),n+='\r\n    </div>\r\n    <div class="uniq-bugs-user">\r\n        ',e.item.name&&(n+='\r\n            <div class="bugs-avatar">\r\n                <img src="'+((t=e.methodUpdateImagePath(e.imageRoot()+e.item.name))==null?"":t)+'"\r\n                    class="avatar"\r\n                    alt="'+((t=e.item.name)==null?"":t)+'"/>\r\n            </div>\r\n            <strong class="owner-name">'+r(e.item.name.split("_").join(" ").capitalize())+"</strong>\r\n        "),n+="\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-widget-bug-table"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return e.items&&!_.isEmpty(e.items)?n+='\r\n<div class="uniq-bugs-table rp-table-hover">\r\n    <div class="uniq-bugs-head">\r\n        <div class="uniq-bugs-id uniq-bugs-th">\r\n            <span class="uniq-bugs-th-name">'+((t=e.text.widgets.bugId)==null?"":t)+'</span>\r\n        </div>\r\n        <div class="uniq-bugs-item uniq-bugs-th">\r\n            <span class="uniq-bugs-th-name">'+((t=e.text.widgets.foundIn)==null?"":t)+'</span>\r\n        </div>\r\n        <div class="uniq-bugs-date uniq-bugs-th">\r\n            <span class="uniq-bugs-th-name">'+((t=e.text.widgets.submitDate)==null?"":t)+'</span>\r\n        </div>\r\n        <div class="uniq-bugs-user uniq-bugs-th">\r\n            <span class="uniq-bugs-th-name">'+((t=e.text.widgets.submitter)==null?"":t)+'</span>\r\n        </div>\r\n    </div>\r\n    <div class="uniq-bugs-list"></div>\r\n    <div class="mobile-disabling-cover"></div>\r\n</div>\r\n':n+='\r\n<div class="no-data-error">'+((t=e.text.widgets.noData)==null?"":t)+"</div>\r\n",n+="\r\n</div>\r\n",n},this.JST["tpl-widget-cases-uniq-launches"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="cases-uniq-launches">\r\n    ',e.items&&!_.isEmpty(e.items)?(n+='\r\n    <div class="container-fluid rp-margin-reset rp-odd-even rp-table-hover">\r\n        <div class="row rp-table-thead hidden-xs">\r\n            <div class="col-xs-11 col-sm-6 ubp-title">\r\n                <div>'+((t=e.text.launches.launchName)==null?"":t)+'</div>\r\n            </div>\r\n            <div class="col-xs-11 col-sm-2 ubp-title">\r\n                <div>'+((t=e.text.ui.max)==null?"":t)+'</div>\r\n            </div>\r\n            <div class="col-xs-11 col-sm-2 ubp-title">\r\n                <div>'+((t=e.text.ui.avg)==null?"":t)+'</div>\r\n            </div>\r\n            <div class="col-xs-11 col-sm-2 ubp-title">\r\n                <div>'+((t=e.text.ui.min)==null?"":t)+"</div>\r\n            </div>\r\n        </div>\r\n        ",_.each(e.items,function(e){n+='\r\n        <div class="row rp-table-row">\r\n            <div class="col-xs-11 col-sm-6">\r\n                <div class="cases-name">'+r(e.name)+'</div>\r\n            </div>\r\n            <div class="col-xs-11 col-sm-2">\r\n                <div>'+((t=e.max)==null?"":t)+'</div>\r\n            </div>\r\n            <div class="col-xs-11 col-sm-2">\r\n                <div>'+((t=e.avg)==null?"":t)+'</div>\r\n            </div>\r\n            <div class="col-xs-11 col-sm-2">\r\n                <div>'+((t=e.min)==null?"":t)+"</div>\r\n            </div>\r\n        </div>\r\n        "}),n+='\r\n        <div class="row rp-table-footer">\r\n            <div class="col-xs-11 col-sm-8">\r\n                <div>'+r(e.text.widgets.medianValueUniqLaunches)+'</div>\r\n            </div>\r\n            <div class="col-xs-11 col-sm-4">\r\n                <div>'+((t=e.median.toFixed(1))==null?"":t)+"</div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    "):n+='\r\n    <div class="no-data-error">'+((t=e.text.widgets.noData)==null?"":t)+"</div>\r\n    ",n+="\r\n</div>\r\n",n},this.JST["tpl-widget-container"]=function(e){var t,n="",r=_.escape;return n+='<div class="loading-widget loader" style="display:none;">\r\n    <i class="material-icons loader-animation">autorenew</i>\r\n</div>\r\n<div class="panel panel-default widget-content grid-stack-item-content"></div>',n},this.JST["tpl-widget-content"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="panel-heading clearfix ',e.dashOwner==e.user.name&&(n+="drag-handle"),n+='">\r\n    <strong class="multiple-spaces">'+r(e.name)+"</strong>\r\n    ",e.shared&&(n+='\r\n        <span class="badge badge-info">\r\n            ',e.owner!==e.user.name?n+='\r\n                <i class="material-icons"\r\n                    title="'+((t=e.text.widgets.widgetSharedBy)==null?"":t)+" "+((t=e.owner.capitalizeName())==null?"":t)+'">\r\n                    public</i>\r\n                <span class="shared-text">\r\n                    '+((t=e.text.widgets.sharedBy)==null?"":t)+"\r\n                    "+((t=e.owner.capitalizeName())==null?"":t)+"\r\n                </span>\r\n            ":n+='\r\n                <i class="material-icons"\r\n                    title="'+((t=e.text.widgets.widgetSharedBy)==null?"":t)+" "+((t=e.text.ui.you)==null?"":t)+'">\r\n                    share</i>\r\n                <span class="shared-text">\r\n                    '+((t=e.text.widgets.sharedBy)==null?"":t)+'\r\n                    <span class="label label-success">'+((t=e.text.ui.you)==null?"":t)+"</span>\r\n                </span>\r\n            ",n+="\r\n        </span>\r\n    "),n+='\r\n    <ul class="nav rp-top-links navbar-right">\r\n        ',n+="\r\n        ",e.canEdit&&(n+='\r\n            <li>\r\n                <a href="#"\r\n                    title="'+((t=e.text.widgets.editWidget)==null?"":t)+'"\r\n                    class="settings">\r\n                    <i class="material-icons">settings</i>\r\n                </a>\r\n            </li>\r\n        '),n+='\r\n        <li>\r\n            <a href="#"\r\n                title="'+((t=e.text.widgets.refreshWidget)==null?"":t)+'"\r\n                class="refresh">\r\n                <i class="material-icons">autorenew</i>\r\n            </a>\r\n        </li>\r\n        ',e.dashOwner==e.user.name&&(n+='\r\n            <li>\r\n                <a href="#"\r\n                    title="'+((t=e.text.widgets.deleteWidget)==null?"":t)+'"\r\n                    class="remove">\r\n                    <i class="material-icons">clear</i>\r\n                </a>\r\n            </li>\r\n        '),n+='\r\n    </ul>\r\n    <div class="widget-type-name">\r\n        '+((t=e.widgetType)==null?"":t)+"\r\n        "+((t=e.isTimeline?"- "+e.text.widgets.timelineModeTitle:"")==null?"":t)+"\r\n    </div>\r\n</div>",n},this.JST["tpl-widget-filters-table"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="launches-table-panel">\r\n    ',e.items&&!_.isEmpty(e.items)?(n+='\r\n    <div class="container-fluid">\r\n        <div class="row rp-grid-thead hidden-xs">\r\n            <div class="col-xs-12 col-sm-5 nopadding">\r\n                <div class="col-xs-12 col-sm-6">\r\n                    <div class="rp-grid-th">\r\n                        <span class="rp-grid-th-name">'+((t=e.text.launchesHeaders.name)==null?"":t)+'</span>\r\n                    </div>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-2 ftp-cols">\r\n                    ',e.criteria.status&&(n+='\r\n                        <div class="rp-grid-th"><span class="rp-grid-th-name">'+((t=e.text.filterNameById.status)==null?"":t)+"</span></div>\r\n                    "),n+='\r\n                </div>\r\n                <div class="col-xs-6 col-sm-2 ftp-cols">\r\n                    ',e.criteria.start_time&&(n+='\r\n                        <div class="rp-grid-th"><span class="rp-grid-th-name">'+((t=e.text.launchesHeaders.start_time)==null?"":t)+"</span></div>\r\n                    "),n+='\r\n                </div>\r\n                <div class="col-xs-6 col-sm-2 ftp-cols">\r\n                    ',e.criteria.end_time&&(n+='\r\n                        <div class="rp-grid-th"><span class="rp-grid-th-name">'+((t=e.text.launchesHeaders.end_time)==null?"":t)+"</span></div>\r\n                    "),n+='\r\n                </div>\r\n            </div>\r\n            <div class="col-xs-12 col-sm-7 nopadding">\r\n                <div class="col-xs-12 col-sm-6 nopadding">\r\n                    ',e.criteria.total&&(n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols">\r\n                        <div class="rp-grid-th"><span class="rp-grid-th-name">'+((t=e.text.launchesHeaders.total)==null?"":t)+"</span></div>\r\n                    </div>\r\n                    "),n+="\r\n                    ",e.criteria.passed&&(n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols">\r\n                        <div class="rp-grid-th"><span class="rp-grid-th-name">'+((t=e.text.launchesHeaders.passed)==null?"":t)+"</span></div>\r\n                    </div>\r\n                    "),n+="\r\n                    ",e.criteria.failed&&(n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols">\r\n                        <div class="rp-grid-th"><span class="rp-grid-th-name">'+((t=e.text.launchesHeaders.failed)==null?"":t)+"</span></div>\r\n                    </div>\r\n                    "),n+="\r\n                    ",e.criteria.skipped&&(n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols">\r\n                        <div class="rp-grid-th"><span class="rp-grid-th-name">'+((t=e.text.launchesHeaders.skipped)==null?"":t)+"</span></div>\r\n                    </div>\r\n                    "),n+='\r\n                </div>\r\n                <div class="col-xs-12 col-sm-6 nopadding">\r\n                    ',e.criteria.product_bug&&(n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols">\r\n                        <div class="rp-grid-th"><span class="rp-grid-th-name">'+((t=e.text.launchesHeaders.product_bug)==null?"":t)+"</span></div>\r\n                    </div>\r\n                    "),n+="\r\n                    ",e.criteria.automation_bug&&(n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols">\r\n                        <div class="rp-grid-th"><span class="rp-grid-th-name">'+((t=e.text.launchesHeaders.automation_bug)==null?"":t)+"</span></div>\r\n                    </div>\r\n                    "),n+="\r\n                    ",e.criteria.system_issue&&(n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols">\r\n                        <div class="rp-grid-th"><span class="rp-grid-th-name">'+((t=e.text.launchesHeaders.system_issue)==null?"":t)+"</span></div>\r\n                    </div>\r\n                    "),n+="\r\n                    ",e.criteria.to_investigate&&(n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols" style="overflow: hidden;">\r\n                        <div class="rp-grid-th"><span class="rp-grid-th-name">'+((t=e.text.launchesHeaders.to_investigate)==null?"":t)+"</span></div>\r\n                    </div>\r\n                    "),n+="\r\n                </div>\r\n            </div>\r\n        </div>\r\n        ",_.each(e.items,function(i){n+="\r\n        ";var s=i.id,o=e.project.projectId;n+='\r\n        <div class="row rp-table-row" id="'+((t=s)==null?"":t)+'">\r\n            <div class="col-xs-12 col-sm-5 nopadding">\r\n                <div class="col-xs-12 col-sm-6">\r\n                    <h5 class="rp-grid-name">\r\n                        <a class="navigateable rp-blue-link-undrl" href="#'+r(o)+"/launches/all/"+((t=s)==null?"":t)+'">\r\n                            '+r(i.name)+"\r\n                            "+r(i.number?"#"+i.number:"")+"\r\n                        </a>\r\n                    </h5>\r\n                    ",i.description&&(n+='\r\n                    <div class="rp-grid-description nicescroll-it">'+r(i.description)+"</div>\r\n                    "),n+='\r\n                    <ul class="rp-grid-tags">\r\n                        ',i.userRef&&(n+='\r\n                        <li title="Owner" class="rp-launch-owner owner">\r\n                            <i class="material-icons">person</i>\r\n                            <a href="#'+r(o)+"/launches/all?page.page=1&amp;page.sort=start_time,DESC&amp;page.size=50&filter.in.user="+r(i.userRef)+'" data-js-user-tag data-tag="'+r(i.userRef)+'">'+r(i.userRef)+"</a>\r\n                        </li>\r\n                        "),n+="\r\n                        ";var u=i.tags;n+="\r\n                        ",u&&(n+='\r\n                        <li class="rp-launch-tags" data-js-tags-container>\r\n                            <i class="rp-icons rp-icons-ticket"></i>\r\n                            ',_.each(u.split(","),function(e){n+='\r\n                            <a href="#'+r(o)+"/launches/all?page.page=1&amp;page.sort=start_time,DESC&amp;page.size=50&filter.has.tags="+r(e)+'" data-js-tag data-tag="'+r(e)+'" class="text-muted tag">'+r(e)+"</a>\r\n                            "}),n+="\r\n                        </li>\r\n                        "),n+='\r\n                    </ul>\r\n                </div>\r\n                <div class="col-xs-12 col-sm-2 ftp-cols">\r\n                    ',i.status&&(n+='\r\n                    <div class="rp-table-td">\r\n                        <span class="visible-xs-inline showTimeTip"><b>'+((t=e.text.launches.prefixStatus)==null?"":t)+"</b></span>\r\n                        "+((t=e.text.launchStatus[i.status])==null?"":t)+"\r\n                    </div>\r\n                    "),n+='\r\n                </div>\r\n                <div class="col-xs-6 col-sm-2 show-time ftp-cols">\r\n                    ';if(e.criteria.start_time){n+="\r\n                        ";if(i.startTime){n+="\r\n                        ";var a=parseInt(i.startTime),f=e.dateFormat(a);n+='\r\n                        <div class="hoverFullTime">\r\n                            <span class="visible-xs-inline showTimeTip"><b>'+((t=e.text.launches.prefixStartTime)==null?"":t)+'</b></span>\r\n                            <span class="timeMoment timeHover">'+((t=e.moment(f).fromNow())==null?"":t)+'</span>\r\n                            <span class="time-full timeHover hidden">'+((t=f)==null?"":t)+'</span>\r\n                            <span class="time-ms hidden">'+((t=a)==null?"":t)+"</span>\r\n                        </div>\r\n                        "}n+="\r\n                    "}n+='                </div>\r\n                <div class="col-xs-6 col-sm-2 ftp-cols">\r\n                    ';if(e.criteria.end_time){n+="\r\n                        ";if(i.end_time){n+="\r\n                        ";var a=parseInt(i.end_time),f=e.dateFormat(a);n+='\r\n                        <div class="hoverFullTime">\r\n                            <span class="visible-xs-inline showTimeTip"><b>'+((t=e.text.launches.finishTime)==null?"":t)+'</b></span>\r\n                            <span class="timeMoment timeHover">'+((t=e.moment(f).fromNow())==null?"":t)+'</span>\r\n                            <span class="time-full timeHover hidden">'+((t=f)==null?"":t)+'</span>\r\n                            <span class="time-ms hidden">'+((t=a)==null?"":t)+"</span>\r\n                        </div>\r\n                        "}else i.status=="IN_PROGRESS"&&(n+='\r\n                        <img alt="'+((t=e.text.launches.inProgress)==null?"":t)+'" src="img/time-in-progress.gif" title="'+((t=e.text.launches.inProgress)==null?"":t)+'">\r\n                        ');n+="\r\n                    "}n+='\r\n                </div>\r\n            </div>\r\n            <div class="col-xs-12 col-sm-7 nopadding rp-mobile-padding">\r\n                <div class="col-xs-12 col-sm-6 nopadding">\r\n                    ';if(e.criteria.total){n+="\r\n                    ";var l=i.statistics$executionCounter$total;n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols rp-info rp-colors total">\r\n                        <div class="filter-tb-td">\r\n                        ',l&&l!=="0"?n+='\r\n                        <a class="cases-view rp-blue-link-undrl" href="'+r(e.linkToRedirectService("total",s))+'">'+((t=l)==null?"":t)+'</a>\r\n                        <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.total)==null?"":t)+"</p>\r\n                        ":n+='\r\n                        <span class="text-muted visible-xs-inline">0</span>\r\n                        <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.total)==null?"":t)+"</p>\r\n                        ",n+="\r\n                        </div>\r\n                    </div>\r\n                    "}n+="\r\n                    ";if(e.criteria.passed){n+="\r\n                    ";var c=i.statistics$executionCounter$passed;n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols rp-info rp-colors passed">\r\n                        <div class="filter-tb-td">\r\n                        ',c&&c!=="0"?n+='\r\n                        <a class="cases-view rp-blue-link-undrl" href="'+r(e.linkToRedirectService("passed",s))+'">'+((t=c)==null?"":t)+'</a>\r\n                        <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.passed)==null?"":t)+"</p>\r\n                        ":n+='\r\n                        <span class="text-muted visible-xs-inline">0</span>\r\n                        <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.passed)==null?"":t)+"</p>\r\n                        ",n+="\r\n                        </div>\r\n                    </div>\r\n                    "}n+="\r\n                    ";if(e.criteria.failed){n+="\r\n                    ";var h=i.statistics$executionCounter$failed;n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols rp-info rp-colors failed">\r\n                        <div class="filter-tb-td">\r\n                        ',h&&h!=="0"?n+='\r\n                        <a class="cases-view rp-blue-link-undrl" href="'+r(e.linkToRedirectService("failed",s))+'">'+((t=h)==null?"":t)+'</a>\r\n                        <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.failed)==null?"":t)+"</p>\r\n                        ":n+='\r\n                        <span class="text-muted visible-xs-inline">0</span>\r\n                        <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.failed)==null?"":t)+"</p>\r\n                        ",n+="\r\n                        </div>\r\n                    </div>\r\n                    "}n+="\r\n                    ";if(e.criteria.skipped){n+="\r\n                    ";var p=i.statistics$executionCounter$skipped;n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols rp-info rp-colors skipped">\r\n                        <div class="filter-tb-td">\r\n                        ',p&&p!=="0"?n+='\r\n                        <a class="cases-view rp-blue-link-undrl" href="'+r(e.linkToRedirectService("skipped",s))+'">'+((t=p)==null?"":t)+'</a>\r\n                        <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.skipped)==null?"":t)+"</p>\r\n                        ":n+='\r\n                        <span class="text-muted visible-xs-inline">0</span>\r\n                        <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.skipped)==null?"":t)+"</p>\r\n                        ",n+="\r\n                        </div>\r\n                    </div>\r\n                    "}n+='\r\n                </div>\r\n                <div class="col-xs-12 col-sm-6 nopadding">\r\n                    ';if(e.criteria.product_bug){n+="\r\n                    ";var d=i.statistics$issueCounter$productBug;n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols rp-info rp-colors pb">\r\n                        <div class="filter-tb-td">\r\n                        ';if(d&&d.total){n+="\r\n                            ";var l=d.total,v="product_bug",m=e.linkToRedirectService("productBug",s),g=d;n+='\r\n                            <div class="launch-suite-defects" data-js-launch-defect data-defect-type="'+((t=v)==null?"":t)+'" id="'+((t=e.widgetId)==null?"":t)+"-defect-"+((t=s)==null?"":t)+"-"+((t=v)==null?"":t)+'">\r\n                                <a href="'+r(m)+'" class="chart-overflow">\r\n                                    <svg data-js-chart></svg>\r\n                                    <div class="total-overflow">\r\n                                        <span class="pr-grid-defect-total" style="border-color: '+((t=e.getDefectColor(g,v,e.defectTypes))==null?"":t)+'">\r\n                                            '+((t=l)==null?"":t)+'\r\n                                        </span>\r\n                                    </div>\r\n                                </a>\r\n                            </div>\r\n                            <span class="visible-xs cases-view ">\r\n                                <a href="'+r(m)+'" class="rp-blue-link-undrl"\r\n                                   data-id="'+r(s)+'">\r\n                                    '+r(l)+'\r\n                                </a>\r\n                            </span>\r\n                            <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.product_bug)==null?"":t)+"</p>\r\n                        "}else n+='\r\n                            <span class="text-muted visible-xs-inline">0</span>\r\n                            <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.product_bug)==null?"":t)+"</p>\r\n                        ";n+="\r\n                        </div>\r\n                    </div>\r\n                    "}n+="\r\n                    ";if(e.criteria.automation_bug){n+="\r\n                    ";var y=i.statistics$issueCounter$automationBug;n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols rp-info rp-colors ab">\r\n                        <div class="filter-tb-td">\r\n                        ';if(y&&y.total){n+="\r\n                            ";var l=y.total,v="automation_bug",m=e.linkToRedirectService("automationBug",s),g=y;n+='\r\n                            <div class="launch-suite-defects" data-js-launch-defect data-defect-type="'+((t=v)==null?"":t)+'" id="'+((t=e.widgetId)==null?"":t)+"-defect-"+((t=s)==null?"":t)+"-"+((t=v)==null?"":t)+'">\r\n                                <a href="'+r(m)+'" class="chart-overflow">\r\n                                    <svg data-js-chart></svg>\r\n                                    <div class="total-overflow">\r\n                                        <span class="pr-grid-defect-total" style="border-color: '+((t=e.getDefectColor(g,v,e.defectTypes))==null?"":t)+'">\r\n                                            '+((t=l)==null?"":t)+'\r\n                                        </span>\r\n                                    </div>\r\n                                </a>\r\n                            </div>\r\n                            <span class="visible-xs cases-view ">\r\n                                <a href="'+r(m)+'" class="rp-blue-link-undrl"\r\n                                   data-id="'+r(s)+'">\r\n                                    '+r(l)+'\r\n                                </a>\r\n                            </span>\r\n                            <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.automation_bug)==null?"":t)+"</p>\r\n                        "}else n+='\r\n                            <span class="text-muted visible-xs-inline">0</span>\r\n                            <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.automation_bug)==null?"":t)+"</p>\r\n                        ";n+="\r\n                        </div>\r\n                    </div>\r\n                    "}n+="\r\n                    ";if(e.criteria.system_issue){n+="\r\n                    ";var b=i.statistics$issueCounter$systemIssue;n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols rp-info rp-colors si">\r\n                        <div class="filter-tb-td">\r\n                        ';if(b&&b.total){n+="\r\n                            ";var l=b.total,v="system_issue",m=e.linkToRedirectService("systemIssue",s),g=b;n+='\r\n                            <div class="launch-suite-defects" data-js-launch-defect data-defect-type="'+((t=v)==null?"":t)+'" id="'+((t=e.widgetId)==null?"":t)+"-defect-"+((t=s)==null?"":t)+"-"+((t=v)==null?"":t)+'">\r\n                                <a href="'+r(m)+'" class="chart-overflow">\r\n                                    <svg data-js-chart></svg>\r\n                                    <div class="total-overflow">\r\n                                        <span style="border-color: '+((t=e.getDefectColor(g,v,e.defectTypes))==null?"":t)+'">\r\n                                            '+((t=l)==null?"":t)+'\r\n                                        </span>\r\n                                    </div>\r\n                                </a>\r\n                            </div>\r\n                            <span class="visible-xs cases-view ">\r\n                                <a href="'+r(m)+'" class="rp-blue-link-undrl"\r\n                                   data-id="'+r(s)+'">\r\n                                    '+r(l)+'\r\n                                </a>\r\n                            </span>\r\n                            <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.system_issue)==null?"":t)+"</p>\r\n                        "}else n+='\r\n                            <span class="text-muted visible-xs-inline">0</span>\r\n                            <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.system_issue)==null?"":t)+"</p>\r\n                        ";n+="\r\n                        </div>\r\n                    </div>\r\n                    "}n+="\r\n                    ";if(e.criteria.to_investigate){n+='\r\n                    <div class="col-xs-3 col-sm-3 ftp-cols rp-info rp-colors ti">\r\n                        <div class="filter-tb-td">\r\n                        ';var w=i.statistics$issueCounter$toInvestigate;n+="\r\n                        ";if(w&&w.total){n+="\r\n                            ";var l=w.total,v="to_investigate",m=e.linkToRedirectService("toInvestigate",s),g=w,E=e.getDefectColor(g,v,e.defectTypes);n+='\r\n                            <a href="'+r(m)+'"\r\n                               style="background: '+((t=E)==null?"":t)+"; border-color: "+((t=E)==null?"":t)+'"\r\n                               class="rp-ti-badge hidden-xs-inline" data-id="'+r(s)+'">\r\n                                '+r(l)+'\r\n                            </a>\r\n                            <a class="cases-view rp-blue-link-undrl visible-xs-inline"\r\n                               href="'+r(m)+'">\r\n                                '+((t=l)==null?"":t)+'\r\n                            </a>\r\n                            <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.to_investigate)==null?"":t)+"</p>\r\n                        "}else n+='\r\n                            <span class="text-muted visible-xs-inline">0</span>\r\n                            <p class="visible-xs cell-name">'+((t=e.text.launchesHeaders.to_investigate)==null?"":t)+"</p>\r\n                        ";n+="\r\n                        </div>\r\n                    </div>\r\n                    "}n+="\r\n                </div>\r\n            </div>\r\n        </div>\r\n        "}),n+="\r\n    </div>\r\n    "):n+='\r\n        <div class="no-data-error">'+((t=e.text.widgets.noData)==null?"":t)+"</div>\r\n    ",n+='\r\n\r\n    <div class="mobile-disabling-cover"></div>\r\n</div>\r\n',n},this.JST["tpl-widget-form-ctiteria"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="form-group">\r\n    <label class="col-sm-3 control-label"\r\n        for="widget_crit_'+((t=e.id)==null?"":t)+'">\r\n        '+((t=e.title)==null?"":t)+':\r\n    </label>\r\n    <div class="col-sm-4">\r\n        <div class="input">\r\n            <div class="btn-group">\r\n                <button class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle"\r\n                    id="widget_crit_'+((t=e.id)==null?"":t)+'"\r\n                    data-toggle="dropdown">\r\n                    <i class="material-icons" style="margin:-1px 3px 0 -3px;">add</i>\r\n                    <span class="select-value">'+((t=e.select_title)==null?"":t)+'</span>\r\n                    <span class="rp-caret"></span>\r\n                </button>\r\n                <ul class="dropdown-menu '+((t=e.cls)==null?"":t)+' rp-width-100"\r\n                    id="criteria_select_'+((t=e.id)==null?"":t)+'">\r\n                    <li>\r\n                        <a href="" class="check-all">\r\n                            '+((t=e.text.ui.selectAll)==null?"":t)+"\r\n                        </a>\r\n                    </li>\r\n                    ",_.each(e.criteria,function(r,i){n+='\r\n                        <li>\r\n                            <a>\r\n                                <label class="checkbox">\r\n                                    <input type="checkbox"\r\n                                        ',_.contains(e.criteria_fields,i)&&(n+='\r\n                                            checked="checked" \r\n                                        '),n+='\r\n                                        class="'+((t=r.replace(" ","."))==null?"":t)+'"\r\n                                        value="'+((t=i)==null?"":t)+'" />\r\n                                        '+((t=r)==null?"":t)+"\r\n                                </label>\r\n                            </a>\r\n                        </li>\r\n                    "}),n+='\r\n                </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="help-inline pad-formhelp col-sm-5" style="display:none;"></div>\r\n</div>\r\n',n},this.JST["tpl-widget-form-limit"]=function(e){var t,n="",r=_.escape;return n+='<div class="form-group">\r\n    <label class="col-sm-3 control-label" for="limit_'+((t=e.id)==null?"":t)+'">\r\n        '+((t=e.text.widgets.limit)==null?"":t)+':\r\n    </label>\r\n    <div class="col-sm-4">\r\n        <div class="input">\r\n            <div class="input-group">\r\n                <span class="input-group-addon">\r\n                    <i class="material-icons">star_border</i>\r\n                </span>\r\n                <input class="form-control input-sm" style="width:62px;" id="limit_'+((t=e.id)==null?"":t)+'" placeholder="'+((t=e.min)==null?"":t)+"-"+((t=e.max)==null?"":t)+'" type="text" value=\''+r(e.limit)+'\' />\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="help-inline pad-formhelp col-sm-5" style="display:none;"></div>\r\n</div>\r\n',n},this.JST["tpl-widget-form-shared-empty"]=function(e){var t,n="",r=_.escape;return n+='<div class="well no-shared-widgets">\r\n    <h3 class="title-no-data text-center">\r\n        <i class="rp-icons rp-icons-warning"></i>\r\n        <span class="warning">'+((t=e.text.widgets.emptyShared)==null?"":t)+"</span>\r\n    </h3>\r\n</div>\r\n",n},this.JST["tpl-widget-form-shared-list"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="container-fluid">\r\n    <div class="row">\r\n        <div class="borderWidget shared-dashboards-list">\r\n            ',_.each(e.items,function(i){n+='\r\n            <div class="columnWidget">\r\n                <ul>\r\n                    <li class="title">by '+r(i.name)+"</li>\r\n                    ",_.each(i.widgets,function(i){n+='\r\n                    <li>\r\n                        <a class="shared-dashboard\r\n                                ',i.dublicate?n+='disabled-link" title="'+((t=e.text.widgets.widgetExists)==null?"":t)+'"':n+='"',n+=' href="#'+((t=i.widgetId)==null?"":t)+'" data-widget-id="'+((t=i.widgetId)==null?"":t)+'">\r\n                        '+r(i.name)+"\r\n                        </a>\r\n                    </li>\r\n                    "}),n+="\r\n                </ul>\r\n            </div>\r\n            "}),n+="\r\n        </div>\r\n    </div>\r\n</div>",n},this.JST["tpl-widget-form-shared"]=function(e){var t,n="",r=_.escape;return n+='<div class="shared-hr">\r\n    <hr />\r\n    <h5>'+((t=e.text.dashboard.or)==null?"":t)+'</h5>\r\n</div>\r\n<div class="widget-select-shared b-shareddash-list">\r\n    <h4>'+((t=e.text.widgets.selectShared)==null?"":t)+'</h4>\r\n    <div class="shared-loader">\r\n        <i class="material-icons loader-animation">autorenew</i>\r\n    </div>\r\n    <div class="b-sharedwidget-list"></div>\r\n</div>',n},this.JST["tpl-widget-form-users"]=function(e){var t,n="",r=_.escape;return n+='<div class="form-group">\r\n    <label class="col-sm-3 control-label" for="widget_users_'+((t=e.id)==null?"":t)+'">\r\n        '+((t=e.text.widgets.typeUserName)==null?"":t)+':\r\n    </label>\r\n    <div class="col-sm-4">\r\n        <div class="input">\r\n            <div class="input-group b-users-typeahead">\r\n                <span class="input-group-addon">\r\n                    <i class="material-icons">star_border</i>\r\n                </span>\r\n                <select style="width:100%;"\r\n                    placeholder="'+((t=e.text.widgets.allMembers)==null?"":t)+'"\r\n                    size="1"\r\n                    multiple="multiple"\r\n                    class="users-typeahead"\r\n                    id="widget_users_'+((t=e.id)==null?"":t)+'"\r\n                    type="text">\r\n                </select>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    <div class="help-inline pad-formhelp col-sm-5" style="display:none;"></div>\r\n</div>\r\n',n},this.JST["tpl-widget-form"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="modal fade dialog-shell rp-popup-settings"\r\n    tabindex="-1"\r\n    role="dialog"\r\n    aria-labelledby="myLargeModalLabel"\r\n    aria-hidden="true">\r\n    <div class="modal-dialog modal-lg">\r\n        <div class="modal-content">\r\n            <div class="modal-header">\r\n                <h4 class="modal-title">\r\n                    ',e.type=="edit"?n+="\r\n                        "+((t=e.text.ui.edit)==null?"":t)+" "+r(e.title)+" "+((t=e.text.ui.widgetSm)==null?"":t)+"\r\n                    ":n+="\r\n                        "+((t=e.text.widgets.addNewWidget)==null?"":t)+"\r\n                    ",n+='\r\n                </h4>\r\n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n                    <i class="material-icons" aria-hidden="true">clear</i>\r\n                </button>\r\n            </div>\r\n            <div class="modal-body clearfix">\r\n                <div class="params wizard">\r\n                    <form id="add_widget_'+((t=e.id)==null?"":t)+'" class="form-horizontal">\r\n                        <div class="form-group" id="widget-filters" ',e.gadget&&e.defaults.gadget[e.gadget].noFilters&&(n+='style="display:none"'),n+='>\r\n                             <label class="control-label col-sm-3">'+((t=e.text.widgets.dataFilter)==null?"":t)+':</label>\r\n                            <div class="col-sm-5">\r\n                                <div class="row">\r\n                                    <div class="col-sm-6">\r\n                                        <label for="data_filter_'+((t=e.id)==null?"":t)+'">'+((t=e.text.widgets.fromMyFilters)==null?"":t)+':</label>\r\n                                        <div class="widget-filter">\r\n                                            <select placeholder="'+((t=e.text.widgets.selectFilter)==null?"":t)+'" id="data_filter_'+((t=e.id)==null?"":t)+'" class="filter-control">\r\n                                                <option></option>\r\n                                            </select>\r\n                                            <i class="ico-loading" style="display:block;"></i>\r\n                                        </div>\r\n                                    </div>\r\n                                    <div class="col-sm-6">\r\n                                        <label for="data_shared_filter_'+((t=e.id)==null?"":t)+'">'+((t=e.text.widgets.fromShared)==null?"":t)+':</label>\r\n                                        <div class="widget-filter">\r\n                                            <select placeholder="'+((t=e.text.widgets.selectFilter)==null?"":t)+'"\r\n                                                id="data_shared_filter_'+((t=e.id)==null?"":t)+'"\r\n                                                class="filter-control">\r\n                                                <option></option>\r\n                                            </select>\r\n                                            <i class="ico-loading" style="display:block;"></i>\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div class="help-inline pad-formhelp col-sm-4" style="display:none;"></div>\r\n                        </div>\r\n                        <div class="form-group">\r\n                            <label class="control-label col-sm-3" for="widget_name_'+((t=e.id)==null?"":t)+'">'+((t=e.text.widgets.widgetName)==null?"":t)+':</label>\r\n                            <div class="col-sm-4">\r\n                                <div class="input-group">\r\n                                    <span class="input-group-addon">\r\n                                        <i class="material-icons">star_border</i>\r\n                                    </span>\r\n                                    ';var o=e.name.replace(/'/g,'"');return n+='\r\n                                    <input class="form-control input-sm" id="widget_name_'+((t=e.id)==null?"":t)+'" type="text" value=\''+r(o)+'\' />\r\n                                </div>\r\n                            </div>\r\n                            <div class="help-inline pad-formhelp col-sm-5" style="display:none;"></div>\r\n                        </div>\r\n                        ',e.limit_results&&(n+='\r\n                        <div class="form-group">\r\n                            <label class="control-label col-sm-3" for="limit_results_'+((t=e.id)==null?"":t)+'">'+((t=e.text.widgets.limitResults)==null?"":t)+':</label>\r\n                            <div class="col-sm-4">\r\n                                <div class="input-group">\r\n                                    <span class="input-group-addon">\r\n                                        <i class="material-icons">star_border</i>\r\n                                    </span>\r\n                                    <input class="form-control input-sm" id="limit_results_'+((t=e.id)==null?"":t)+'" type="text" value="'+((t=e.limit_results)==null?"":t)+'" />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        '),n+="\r\n                        ",e.defaults.size&&(n+='\r\n                        <div class="form-group" style="display:none;">\r\n                            <label class="control-label col-sm-3" for="widget_size_'+((t=e.id)==null?"":t)+'">'+((t=e.text.widgets.widgetSize)==null?"":t)+':</label>\r\n                            <div class="col-sm-4">\r\n                                <div class="input-group">\r\n                                    <span class="input-group-addon">\r\n                                        <i class="material-icons">star_border</i>\r\n                                    </span>\r\n                                    <select class="form-control input-sm" id="widget_size_'+((t=e.id)==null?"":t)+'">\r\n                                        <option value="12">12/12</option>\r\n                                        <option value="1">1/12</option>\r\n                                        <option value="2">2/12</option>\r\n                                        <option value="3">3/12</option>\r\n                                        <option value="4">4/12</option>\r\n                                        <option value="5">5/12</option>\r\n                                        <option value="6">6/12</option>\r\n                                        <option value="7">7/12</option>\r\n                                        <option value="8">8/12</option>\r\n                                        <option value="9">9/12</option>\r\n                                        <option value="10">10/12</option>\r\n                                        <option value="11">11/12</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        '),n+="\r\n                        ",e.defaults.gadget&&(n+='\r\n                        <div class="form-group">\r\n                            <label class="control-label col-sm-3" for="gadget_'+((t=e.id)==null?"":t)+'">'+((t=e.text.widgets.widgetType)==null?"":t)+':</label>\r\n                            <div class="col-sm-4">\r\n                                <div class="input-group">\r\n                                    <span class="input-group-addon">\r\n                                        <i class="material-icons">star_border</i>\r\n                                    </span>\r\n                                    <select placeholder="'+((t=e.text.widgets.selectType)==null?"":t)+'" class="gadget-type" id="gadget_'+((t=e.id)==null?"":t)+'">\r\n                                        <option></option>\r\n                                        ',_.each(e.defaults.gadget,function(r,i){n+="\r\n                                        <option ",e.gadget==i&&(n+=' selected="selected" '),n+=' value="'+((t=i)==null?"":t)+","+((t=r.widget_type)==null?"":t)+'">'+((t=r.gadget_name)==null?"":t)+"</option>\r\n                                        "}),n+='\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n                            <div class="help-inline pad-formhelp col-sm-5" style="display:none;"></div>\r\n                        </div>\r\n                        '),n+='\r\n                        <div class="form-group">\r\n                            <label class="control-label col-sm-3" for="widget_shared_'+((t=e.id)==null?"":t)+'">'+((t=e.text.dashboard.shared)==null?"":t)+'</label>\r\n                            <div class="col-sm-4">\r\n                                <div class="input-group">\r\n                                    <input type="checkbox" class="js-switch" ',e.shared&&(n+=' checked="checked" '),n+=' />\r\n                                           <strong class="widget-project">'+((t=e.text.dashboard.project)==null?"":t)+" </strong> "+((t=e.projectName)==null?"":t)+'\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="wizard-settings"></div>\r\n                        ',e.type=="new"&&(n+='\r\n                        <div class="form-group wizard-buttons">\r\n                            <div class="col-sm-12">\r\n                                <div class="pull-right">\r\n                                    <button type="button" class="btn cancel btn-default" data-dismiss="modal">'+((t=e.text.ui.cancel)==null?"":t)+'</button>\r\n                                    <button type="submit" class="btn ok btn-primary">'+((t=e.text.ui.submit)==null?"":t)+"</button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        "),n+="\r\n                    </form>\r\n                </div>\r\n            </div>\r\n            ",e.type=="edit"&&(n+='\r\n            <div class="modal-footer wizard-buttons">\r\n                <button type="button" class="btn cancel btn-default" data-dismiss="modal">\r\n                    '+((t=e.text.ui.cancel)==null?"":t)+'\r\n                </button>\r\n                <button type="button" class="btn ok btn-primary">\r\n                    '+((t=e.text.ui.submit)==null?"":t)+"\r\n                </button>\r\n            </div>\r\n            "),n+="\r\n        </div>\r\n    </div>\r\n",n},this.JST["tpl-widget-invalid-data"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="widget-invalid-data">\r\n    <div class="widget-invalid-text">\r\n        '+((t=e.text.widgets.haveInvalidCriteria.replace("%%%",e.qty?e.qty:"").replace("$$$",e.text.widgets[e.qty>1?"criteria":"criterion"]))==null?"":t)+"\r\n    </div>\r\n    ",e.canEdit&&(n+="\r\n    <div>"+((t=e.text.widgets.pleaseUpdateWidget)==null?"":t)+"</div>\r\n    "),n+="\r\n</div>",n},this.JST["tpl-widget-most-failed-table"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="most-failed-launches">\r\n    ',e.items&&!_.isEmpty(e.items)?(n+='\r\n    <div class="most-failed-launches-table">\r\n        <div class="most-failed-launch">\r\n            '+((t=e.text.widgets.typeLaunchName)==null?"":t)+": "+r(e.lastLaunch.name)+'\r\n        </div>\r\n        <div class="most-failed-head">\r\n            <div class="most-failed-name-col">\r\n                <span class="most-failed-th-name">'+((t=e.text.widgets.testCase)==null?"":t)+'</span>\r\n            </div>\r\n            <div class="most-failed-stats-col">\r\n                <span class="most-failed-th-name">'+((t=e.text.widgets.failed)==null?"":t)+'</span>\r\n            </div>\r\n            <div class="most-failed-date-col">\r\n                <span class="most-failed-th-name">'+((t=e.text.widgets.lastFailure)==null?"":t)+"</span>\r\n            </div>\r\n        </div>\r\n        ",_.each(e.items,function(i){n+='\r\n        <div class="most-failed-row">\r\n            <div class="most-failed-name-col">\r\n                <strong title="'+r(i.name)+'" class="over-name">'+r(i.name)+'</strong>\r\n                <a target="_blank" class="found-in-last rp-blue-link-undrl"\r\n                   href="'+((t=e.lastLaunch.link)==null?"":t)+"&filter.eq.name="+r(encodeURIComponent(i.name))+'">\r\n                    '+((t=e.text.widgets.findLastLaunch)==null?"":t)+'\r\n                </a>\r\n            </div>\r\n            <div class="most-failed-stats-col">\r\n                <strong>'+((t=i.failed)==null?"":t)+"</strong> "+((t=e.text.widgets.failsOf)==null?"":t)+" <strong>"+((t=i.runs)==null?"":t)+"</strong> "+((t=e.text.widgets.testCaseExe)==null?"":t)+" <strong>"+((t=i.affected)==null?"":t)+"%</strong> "+((t=e.text.widgets.failure)==null?"":t)+'\r\n            </div>\r\n            <div class="most-failed-date-col">\r\n                ';var s=i.lastDate?new Date(parseFloat(i.lastDate)):null;n+="\r\n                ",s&&(n+='\r\n                <div class="hoverFullTime">\r\n                    <span class="timeMoment timeHover">'+((t=e.moment(e.dateFormat(s)).fromNow())==null?"":t)+'</span>\r\n                    <div class="time-full timeHover hidden"><span>'+((t=e.dateFormat(s))==null?"":t)+'</span></div>\r\n                    <span class="time-ms hidden">'+((t=s)==null?"":t)+"</span>\r\n                </div>\r\n                "),n+="\r\n            </div>\r\n        </div>\r\n        "}),n+='\r\n    </div>\r\n    <div class="mobile-disabling-cover"></div>\r\n</div>\r\n'):n+='\r\n<div class="no-data-error">'+((t=e.text.widgets.noData)==null?"":t)+"</div>\r\n",n+="\r\n</div>\r\n",n},this.JST["tpl-widget-statistics-panel"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="container-fluid">\r\n    <div class="statistics-panel ',e.invalid&&(n+="widget-invalid"),n+='">\r\n        ',e.invalid&&(n+="\r\n        "+((t=e.invalidDataMessage)==null?"":t)+"\r\n        "),n+="\r\n        ",e.statistics&&!_.isEmpty(e.statistics)&&(!_.isEmpty(e.statistics.defects)||!_.isEmpty(e.statistics.executions))?(n+="\r\n            ",_.isEmpty(e.statistics.executions)||(n+='\r\n            <div class="row">\r\n                ',_.each(e.statistics.executions,function(e){n+='\r\n                <div class="col-md-3 col-xs-6">\r\n                    <div class="statictic-block" style="border-left-color: '+((t=e.color)==null?"":t)+'">\r\n                        <h2>'+((t=e.value)==null?"":t)+"</h2>\r\n                        <p>"+((t=e.key)==null?"":t)+"</p>\r\n                    </div>\r\n                </div>\r\n                "}),n+="\r\n            </div>\r\n            "),n+="\r\n            ",_.isEmpty(e.statistics.defects)||(n+='\r\n            <div class="row">\r\n                ',_.each(e.statistics.defects,function(e){n+='\r\n                <div class="col-md-3 col-xs-6">\r\n                    <div class="statictic-block" style="border-left-color: '+r(e.color)+"; ",e.seriesId=="invalid"&&(n+="color: "+r(e.color)),n+='">\r\n                        <h2>'+((t=e.value)==null?"":t)+"</h2>\r\n                        <p>"+((t=e.key)==null?"":t)+"</p>\r\n                    </div>\r\n                </div>\r\n                "}),n+="\r\n            </div>\r\n            "),n+='\r\n        <div class="mobile-disabling-cover"></div>\r\n        '):n+='\r\n        <div class="no-data-error">'+((t=e.text.widgets.noData)==null?"":t)+"</div>\r\n        ",n+="\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-widget-tooltip"]=function(e){var t,n="",r=_.escape;return n+='<div class="d3tooltip">\r\n	<strong>'+((t=e.tooltipName)==null?"":t)+": </strong>"+((t=e.tooltipContent)==null?"":t)+"\r\n</div>",n},this.JST["tpl-widget-unable-load"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="panel panel-default widget-content grid-stack-item-content">\r\n    <div class="panel-body">\r\n        <div class="no-data-error">\r\n            ',e.notFound?n+="\r\n                "+((t=e.text.widgets.widgetNotFound)==null?"":t)+"\r\n            ":e.unShared?n+="\r\n                "+((t=e.text.widgets.unsharedWidget)==null?"":t)+"\r\n            ":n+="\r\n                "+((t=e.text.widgets.unableLoadData)==null?"":t)+"\r\n            ",n+='\r\n        </div>\r\n    </div>\r\n    <div class="panel-heading clearfix drag-handle">\r\n        ',e.name&&(n+='\r\n            <strong class="multiple-spaces">'+r(e.name)+"</strong>\r\n        "),n+='\r\n        <ul class="nav rp-top-links navbar-right">\r\n            <li>\r\n                <a href="#"\r\n                    title="'+((t=e.text.widgets.refreshWidget)==null?"":t)+'"\r\n                    class="refresh">\r\n                    <i class="material-icons">autorenew</i>\r\n                </a>\r\n            </li>\r\n            ',e.isSharedDashboard||(n+='\r\n                <li>\r\n                    <a href="#" class="remove">\r\n                        <i class="material-icons">clear</i>\r\n                    </a>\r\n                </li>\r\n            '),n+="\r\n        </ul>\r\n    </div>\r\n</div>",n},this.JST["tpl-widget-unshared"]=function(e){var t,n="",r=_.escape;return n+='<div class="widget-content">\r\n    <h4 class="title">'+r(e.name)+'</h4>\r\n    <div class="no-filter-error">'+((t=e.text.widgets.widgetUnShared)==null?"":t)+" "+((t=e.owner.split("_").join(" ").capitalize())==null?"":t)+"!</div>\r\n</div>",n},this.JST["tpl-widget-buttons"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="col-sm-4 col-xs-12">\r\n    <div class="btn-group rp-btn-group btn-group-justified padding-top-30"\r\n        role="group"\r\n        id="'+((t=e.type)==null?"":t)+'Selector"\r\n        data-type="'+((t=e.type)==null?"":t)+'">\r\n        ',_.each(e.criteria,function(r,i){n+="\r\n            ";var s="rp-btn rp-btn-default btn-justified"+(i==e.defautlCriteria?" active":"");n+='\r\n            <a href="#" class="'+((t=s)==null?"":t)+'" role="button" data-value="'+((t=i)==null?"":t)+'">\r\n                <span class="rp-btn-val">'+((t=r)==null?"":t)+"</span>\r\n            </a>\r\n        "}),n+="\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-widget-dashboards-own"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="dashboard-selector-wrapper clearfix">\r\n    ',e.collection.length?(n+="\r\n        ",_.forEach(e.collection,function(i,s){n+='\r\n            <div class="col-sm-3 margin-bottom-5">\r\n                <!--remove this validation when move widget to other dash will be implemented-->\r\n                ';if(e.inEdit)n+='\r\n                <a href="#"\r\n                    class="dashboard-selector dashboard-project-link clearfix disabled"\r\n                    title="'+((t=i.name)==null?"":t)+'">\r\n                    <span class="dashboard-project-name">'+r(i.name)+"</span>\r\n                    ",i.isShared&&(n+='\r\n                        <i class="material-icons mi-share">reply</i>\r\n                    '),n+="\r\n                </a>\r\n                ";else{n+="\r\n                ";var o=e.validateForMaxWidgts(i)?'class="dashboard-selector dashboard-project-link clearfix disabled" title="'+e.text.dashboard.maxWidgetsAdded+'" ':'class="dashboard-selector dashboard-project-link clearfix '+(e.model.dashboard_id===i.id?"active":"")+'"';n+='\r\n                <a href="#" '+((t=o)==null?"":t)+' id="'+((t=i.id)==null?"":t)+'">\r\n                    <span class="dashboard-project-name">'+r(i.name)+"</span>\r\n                    ",i.isShared&&(n+='\r\n                        <i class="material-icons mi-share">reply</i>\r\n                    '),n+="\r\n                </a>\r\n                "}n+="\r\n            </div>\r\n            ",++s%4===0&&(n+='\r\n                <div class="clearfix"></div>\r\n            '),n+="\r\n        "}),n+="\r\n    "):n+='\r\n        <div class="alert alert-info">'+((t=e.text.wizard.noOwnDashboards)==null?"":t)+"</div>\r\n    ",n+="\r\n</div>",n},this.JST["tpl-widget-drop-down"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="col-sm-4 col-xs-12">\r\n    <label class="name-label" for="'+((t=e.type)==null?"":t)+'Selector">\r\n        '+((t=e.text.wizard[e.type+"Title"])==null?"":t)+':\r\n    </label>\r\n    <div class="criteria-holder-dropdown">\r\n        <div class="rp-btn-group">\r\n            <button id="'+((t=e.type)==null?"":t)+'Selector"\r\n                class="rp-btn rp-btn-with-dropdown rp-width-100 dropdown-toggle custom-selector"\r\n                data-toggle="dropdown">\r\n                <i class="material-icons mi-add">add</i>\r\n                '+((t=e.text.wizard[e.type+"SelectTitle"])==null?"":t)+'\r\n                <span class="rp-caret"></span>\r\n            </button>\r\n            <ul class="dropdown-menu" id="'+((t=e.type)==null?"":t)+'Options">\r\n                ',e.selectType||(n+='\r\n                    <li>\r\n                        <a href="#" class="check-all '+((t=e.checkAll?"checked":"")==null?"":t)+'">\r\n                            <strong>'+((t=e.text.ui.selectAll)==null?"":t)+"</strong>\r\n                        </a>\r\n                    </li>\r\n                "),n+="\r\n                ";var o=e.selectType||"checkbox";return n+="\r\n                ",_.forEach(e.criteria,function(r,i){n+='\r\n                    <li>\r\n                        <label class="'+((t=o)==null?"":t)+" rp-"+((t=o)==null?"":t)+'-wrap">\r\n                            ';var s=_.isArray(e.criteria)?r.name:_.isObject(r)?r.text:r,u=_.isArray(e.criteria)?r.keys.join(","):i;n+='\r\n                            <input class="selectable rp-input-'+((t=o)==null?"":t)+'"\r\n                                name="criteria_'+((t=o)==null?"":t)+'"\r\n                                type="'+((t=o)==null?"":t)+'"\r\n                                value="'+((t=u)==null?"":t)+'"\r\n                                '+((t=e.isChecked(e,u)?'checked="checked"':"")==null?"":t)+' />\r\n                            <span class="radio-label">\r\n                                '+((t=s)==null?"":t)+"\r\n                            </span>\r\n                        </label>\r\n                    </li>\r\n                "}),n+="\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-widget-launches"]=function(e){var t,n="",r=_.escape;return n+='<div class="col-sm-5 col-xs-12">\r\n    <label class="name-label" for="launchesSelector">\r\n        '+((t=e.text.widgets.typeLaunchName)==null?"":t)+':\r\n    </label>\r\n    <div class="">\r\n        <div class="input-group b-users-typeahead">\r\n            <span class="input-group-addon">\r\n                <i class="material-icons">star_border</i>\r\n            </span>\r\n            <input type="text"\r\n                class="filter-control users-typeahead"\r\n                id="launchesSelector"\r\n                name="launchesSelector"\r\n                size="30"\r\n                placeholder=""\r\n                value="'+((t=e.selected.join(", "))==null?"":t)+'" />\r\n        </div>\r\n    </div>\r\n</div>\r\n',n},this.JST["tpl-widget-min-max"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return n+='<div class="col-sm-',e.gadget=="unique_bug_table"?n+="6":n+="3",n+=' col-xs-12 min-max-wrapper">\r\n    <label class="name-label" for="limitSelector">\r\n        '+((t=e.limit.name||e.text.widgets.limit)==null?"":t)+':\r\n    </label>\r\n    <div class="min-max-holder">\r\n        <div class="input-group">\r\n            <span class="input-group-addon">\r\n                <i class="material-icons">star_border</i>\r\n            </span>\r\n            <input class="form-control input-sm"\r\n                data-min="'+((t=e.limit.min)==null?"":t)+'"\r\n                data-max="'+((t=e.limit.max)==null?"":t)+'"\r\n                id="limitSelector"\r\n                placeholder="'+((t=e.limit.min)==null?"":t)+"-"+((t=e.limit.max)==null?"":t)+'"\r\n                type="text"\r\n                value=\''+r(e.value||e.limit.def)+"' />\r\n        </div>\r\n    </div>\r\n</div>\r\n",n},this.JST["tpl-widget-users"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="col-sm-5 col-xs-12">\r\n    <label class="name-label" for="userSelector">'+((t=e.text.widgets.typeUserName)==null?"":t)+':</label>\r\n    <div class="">\r\n        <div class="input-group b-users-typeahead">\r\n            <span class="input-group-addon">\r\n                <i class="material-icons">star_border</i>\r\n            </span>\r\n            ';var o=e.id!="tags"?e.text.ui.minPrefix+" "+e.startSearch+" "+e.text.ui.minSufixAuto:e.text.ui.enterChars;return n+='\r\n            <input style="width:100%;"\r\n                placeholder="'+((t=e.text.widgets.allMembers)==null?"":t)+'"\r\n                class="users-typeahead"\r\n                id="userSelector"\r\n                type="text"\r\n                value="'+((t=e.selected.join(", "))==null?"":t)+'"\r\n                data-warning="'+((t=o)==null?"":t)+'" />\r\n        </div>\r\n        <!--<div class="help-inline pad-formhelp col-sm-5" style="display:none;"></div>-->\r\n    </div>\r\n</div>\r\n',n},this.JST["tpl-widget-wizard-filters"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join,o=e.shared?"col-md-5":"col-md-8";n+='\r\n<div class="container-fluid rp-margin-reset rp-table-hover">\r\n    <div class="row rp-table-thead">\r\n        <div class="col-md-4 visible-md visible-lg visible-xs visible-sm">\r\n            ';var u=e.shared?"Shared":"";n+='\r\n            <div class="input-filter message-filter-wrapper form-group">\r\n                <input type="text"\r\n                    class="rp-input-search"\r\n                    id="nameFilter'+((t=u)==null?"":t)+'"\r\n                    name="nameFilter"\r\n                    placeholder="'+((t=e.text.favorites.fName)==null?"":t)+'"\r\n                    value="'+r(e.nameFilterValue||"")+'" />\r\n                <i class="material-icons">search</i>\r\n                <span class="help-inline">'+((t=e.text.validation.filterNameMax)==null?"":t)+'</span>\r\n            </div>\r\n        </div>\r\n        <div class="'+((t=o)==null?"":t)+' visible-md visible-lg">\r\n            <div class="rp-table-th">'+((t=e.text.favorites.fOptions)==null?"":t)+"</div>\r\n        </div>\r\n        ",e.shared&&(n+='\r\n            <div class="col-md-3"><div class="rp-table-th">'+((t=e.text.favorites.fOwner)==null?"":t)+"</div></div>\r\n        "),n+="\r\n    </div>\r\n    ";if(e.collection.length)n+="\r\n        ",_.each(e.collection,function(i){n+='\r\n            <div id="'+((t=i.id)==null?"":t)+'"\r\n                class="row rp-table-row filter-row '+((t=e.shared?"shared":"")==null?"":t)+" "+((t=e.model.filter_id===i.id?"active":"")==null?"":t)+'">\r\n                <div class="col-md-4 clearfix">\r\n                    <i class="material-icons radio_button_unchecked">radio_button_unchecked</i>\r\n                    <i class="material-icons check_circle">check_circle</i>\r\n                    <span class="filter-name">\r\n                        '+r(i.name)+'\r\n                    </span>\r\n                </div>\r\n                <div class="'+((t=o)==null?"":t)+' clearfix">\r\n                    <div class="col-xs-5 visible-xs visible-sm">\r\n                        <h5>'+((t=e.text.favorites.fOptions)==null?"":t)+'</h5>\r\n                    </div>\r\n                    <div class="col-xs-6 col-md-12">\r\n                        <div class="rp-info">\r\n                            <div class="filter-adv">\r\n                                <small class="text-muted">\r\n                                    ';var s=e.getFilterOptions(i.entities,e.text.comparators);n+="\r\n                                    ",s&&(n+="\r\n                                        ("+((t=s)==null?"":t)+")\r\n                                    "),n+="\r\n                                    ";var u=i.selection_parameters&&e.getLastKey(i.selection_parameters.sorting_column);n+="\r\n                                    ",u&&(n+="\r\n                                        "+((t=e.text.favorites.sortedBy)==null?"":t)+""+((t=e.text.launchesHeaders[u])==null?"":t)+"\r\n                                    "),n+="\r\n                                </small>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                ",e.shared&&(n+='\r\n                    <div class="col-md-3 clearfix">\r\n                        <div class="col-xs-5 visible-xs visible-sm">\r\n                            <h5>'+((t=e.text.favorites.fOwner)==null?"":t)+'</h5>\r\n                        </div>\r\n                        <div class="col-xs-7 col-md-12">\r\n                            <div class="rp-info info-break">'+r(i.owner)+"</div>\r\n                        </div>\r\n                    </div>\r\n                "),n+="\r\n            </div>\r\n        "}),n+="\r\n    ";else{n+='\r\n        <div class="row">\r\n            <div class="col-md-12">\r\n                <span class="rp-table-title info-message">\r\n                    ';var a=e.shared?"sharedFiltersAbsent":"ownFiltersAbsent";n+='\r\n                    <h3 class="title-no-data text-center">\r\n                        <i class="rp-icons rp-icons-warning"></i>\r\n                        <span class="warning">'+((t=e.text.wizard[a])==null?"":t)+"</span>\r\n                    </h3>\r\n                </span>\r\n            </div>\r\n        </div>\r\n    "}return n+="\r\n</div>\r\n",n},this.JST["tpl-widget-wizard-shared-widget"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;return _.isEmpty(e.collection)?n+='\r\n    <div class="alert alert-info">'+((t=e.text.wizard.noSharedWidgets)==null?"":t)+"</div>\r\n":(n+="\r\n    ",_.forEach(e.collection,function(i,s){n+="\r\n        <h4 class='shared_widget_owner'>"+r(s.replace("_"," "))+'</h4>\r\n        <div class="row">\r\n            ',_.forEach(i,function(i){n+="\r\n                ";var s=i.content_parameters.gadget,o=e.validateAddSharedWidget(e.dash,i.id)||e.isCustomer&&s==="activity_stream",u=e.isCustomer&&s==="activity_stream"?e.text.wizard.sharedWidgetCantBeAdded:e.text.wizard.sharedWidgetAdded;n+='\r\n                <div class="col-sm-6 col-xs-12 shared_widget_block '+((t=o?"disabled":"")==null?"":t)+'"\r\n                    id="'+((t=i.id)==null?"":t)+'"\r\n                    title="'+((t=o?u:"")==null?"":t)+'"\r\n                    data-gadget="'+((t=s)==null?"":t)+'">\r\n                    <div class="widget_shared_wrapper">\r\n                        <i class="material-icons radio_button_unchecked">radio_button_unchecked</i>\r\n                        <i class="material-icons check_circle">check_circle</i>\r\n                        <div class="col-xs-4 nopadding">\r\n                            <img class="img-responsive"\r\n                                src="img/popup/'+((t=e.widgetsConfig.widgetTypes[s].img)==null?"":t)+'" />\r\n                        </div>\r\n                        <div class="col-xs-8 widget_name">\r\n                            <h5>'+r(i.name)+"</h5>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            "}),n+="\r\n        </div>\r\n    "}),n+="\r\n"),n+="\r\n",n},this.JST["tpl-widget-wizard-widget-types"]=function(e){function s(){n+=i.call(arguments,"")}var t,n="",r=_.escape,i=Array.prototype.join;n+='<div class="borderWidget smallOverflow row">\r\n    ';var o=1;return n+="\r\n    ",_.forEach(e.widgetTypes,function(r,i){n+="\r\n        ",r.notShowOnWizard||(n+='\r\n            <div id="'+((t=i)==null?"":t)+'"\r\n                class="widget_type col-sm-6 col-xs-12 '+((t=e.isCustomer&&i==="activity_stream"?"disabled":"")==null?"":t)+'">\r\n                <div class="widget_type_wrapper">\r\n                    <i class="material-icons radio_button_unchecked">radio_button_unchecked</i>\r\n                    <i class="material-icons check_circle">check_circle</i>\r\n                    <div class="col-xs-4 nopadding">\r\n                        <img alt="'+((t=r.gadget_name)==null?"":t)+'"\r\n                            src="img/popup/'+((t=r.img)==null?"":t)+'"\r\n                            class="img-responsive" />\r\n                    </div>\r\n                    <div class="col-xs-8">\r\n                        <h5>'+((t=r.gadget_name)==null?"":t)+"</h5>\r\n                        <p>"+((t=r.description)==null?"":t)+"</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            ",o%2===0&&(n+='\r\n                <div class="clearfix"></div>\r\n            '),n+="\r\n            ",o+=1,n+="\r\n        "),n+="\r\n    "}),n+="\r\n</div>\r\n",n},this.JST}),define("app",["require","exports","module","underscore","localization"],function(e,t,n){"use strict";var r=e("underscore"),i=e("localization"),s=function(){return{secureContext:!1,projectsDropDownVisible:8,dynamicDropDownVisible:10,objectsOnFavorites:50,objectsOnPage:50,objectsOnPageLogs:250,userInputDelay:500,userFilterDelay:500,scrollTrackerDelay:100,scrollTrackerTrashHold:250,objectsOnUsers:50,membersAtATime:20,defaultProject:null,apiVersion:"../api/v1/",userUrl:"../api/v1/user/",user:null,fullUser:null,loginView:null,router:null,deletingLaunches:[],cacheDelays:{getMembers:3e5,getAssignableMembers:3e5},projectUrl:"/api/v1/project/",project:{},projectId:null,defaultProjectsSettings:{listView:"list",sorting:"name",sortingDirection:"asc",search:""},currentProjectsSettings:{listView:"",sorting:"",sortingDirection:"",search:""},projectRoles:["CUSTOMER","MEMBER","LEAD","PROJECT_MANAGER"],defaultProjectRole:"MEMBER",projectRolesEnum:{customer:"CUSTOMER",member:"MEMBER",lead:"LEAD",project_manager:"PROJECT_MANAGER"},accountRoles:["USER","ADMINISTRATOR"],defaultAccountRole:"USER",accountRolesEnum:{user:"USER",administrator:"ADMINISTRATOR"},accountTypesEnum:{internal:"INTERNAL"},btsEnum:{jira:"JIRA",tfs:"TFS",rally:"RALLY"},demoProjectName:"",breadcrumbMode:{expanded:"expanded"},commentAnchor:"",dashboardNameSize:{min:3,max:128},maxDashboards:50,maxWidgetsOnDashboard:20,defaultWidgetWidth:12,minWidgetWidth:4,defaultWidgetHeight:7,minWidgetHeight:4,widgetGridCellHeight:60,widgetGridVerticalMargin:15,itemsAutoRefresh:6e4,inProgressAutoRefresh:15e3,historyItemsToLoad:30,defaultHistoryDepth:10,defaultTabId:"allCases",autocompletePageSize:10,contextName:null,preferences:null,dateTimeFormat:"yy-mm-dd",dateRangeFullFormat:"HH:mm MM/DD/YY",dateRangeFormat:"MM/DD/YY",widgetTimeFormat:"YYYY-MM-DD",session:{},forms:{nameRange:[1,128],fullNameRange:[3,256],passwordRange:[4,25],itemDescriptionMax:1024,tagsMin:3,tagsMax:1024,triggerMin:3,filterName:[3,128],filterUser:3,projectNameRange:[3,256]},launchVerifyDelay:3e3,launchStatus:{inProgress:"IN_PROGRESS",stopped:"STOPPED",interrupted:"INTERRUPTED",reseted:"RESETED",skipped:"SKIPPED"},defectsGroupSorted:["TO_INVESTIGATE","PRODUCT_BUG","AUTOMATION_BUG","SYSTEM_ISSUE","NO_DEFECT"],defaultColors:{total:"#489BEB",passed:"#87b77b",failed:"#f36c4a",skipped:"#bdc7cc",automationBug:"#f7d63e",noDefect:"#777777",productBug:"#ec3900",systemIssue:"#0274d1",toInvestigate:"#ffb743",investigated:"#87b87f",duration:"#507fd5",interrupted:"#a94442",notPassed:"#CD1B00",negative:"#e52e2e",zero:"#486192",positive:"#63c93b",invalid:"#ff3222",numberLaunches:"#0F55FF"},patterns:{email:/^[a-z0-9._-]+@[a-z0-9_-]+?\.[a-z0-9]{2,}$/i,emailInternal:"^((?!(@epam.com)).)*$",emailWrong:/wrong email/i,login:/^[0-9a-zA-Z-_]{1,128}$/,fullName:/^[a-z0-9._-\s\u0400-\u04FF]{3,255}$/i,originalPass:/^(.){4,25}$/,onlyIntegers:/^\d+$/,doubles:/^[0-9]+(\.[0-9]+)?$/,inputLink:/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,urlT:/(http|https):\/\/[a-z0-9\-_]+(\.[a-z0-9\-_]+)+([a-z0-9\-\.,@\?^=%&;:/~\+#]*[a-z0-9\-@\?^=%&;/~\+#])?/i,htmlError:/<\/body>/i,getBodyContent:/<body[^>]*>((.|[\n\r])*)<\/body>/im,replaceBodyTag:/<\/?body[^>]*>/gi,hostandIP:/((^\s*((([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5]))\s*$)|(^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$))|(^\s*((?=.{1,255}$)(?=.*[A-Za-z].*)[0-9A-Za-z](?:(?:[0-9A-Za-z]|\b-){0,61}[0-9A-Za-z])?(?:\.[0-9A-Za-z](?:(?:[0-9A-Za-z]|\b-){0,61}[0-9A-Za-z])?)*)\s*$)/,defectsLocator:/AB001|PB001|SI001|ND001|TI001/,symbolsLogin:/^[0-9a-zA-Z-_]+$/,symbolsFullName:/^[0-9a-zA-Zа-яА-Я-_. ]+$/},restorationStamp:"?reset=",commentsSeparator:"\n==============================\n",forSettings:{defaultPassword:"11111111",projectNotFoundPattern:"No project could be found",projectSpecific:[{name:"DEFAULT",value:"DEFAULT"},{name:"BDD",value:"BDD"}],interruptedJob:[{name:"1 hour",value:"1 hour"},{name:"3 hours",value:"3 hours"},{name:"6 hours",value:"6 hours"},{name:"12 hours",value:"12 hours"},{name:"1 day",value:"1 day"}],keepLogs:[{name:"2 weeks",value:"2 weeks"},{name:"1 month",value:"1 month"},{name:"3 months",value:"3 months"},{name:"6 months",value:"6 months"}],keepScreenshots:[{name:"1 week",value:"1 week"},{name:"2 weeks",value:"2 weeks"},{name:"3 weeks",value:"3 weeks"},{name:"1 month",value:"1 month"},{name:"3 months",value:"3 months"}],btsList:[{name:"JIRA",value:"JIRA"},{name:"RALLY",value:"RALLY"}],btsJIRA:{multiple:!0,disabledForEdit:["issuetype"],credentialsErrorPattern:"Unauthorized (401)",logsAmount:50,authorizationType:[{name:i.ui.BASIC,value:"BASIC"}],ticketType:[{name:"STORY",value:"STORY"},{name:"BUG",value:"BUG"},{name:"IMPROVEMENT",value:"IMPROVEMENT"}],defaultSeverity:[{name:"BLOCKER",value:"BLOCKER"},{name:"CRITICAL",value:"CRITICAL"},{name:"MAJOR",value:"MAJOR"},{name:"MINOR",value:"MINOR"},{name:"TRIVIAL",value:"TRIVIAL"}],canUseRPAuthorization:!0},btsTFS:{credentialsErrorPattern:"Access denied connecting to TFS",authorizationType:[{name:i.ui.NTLM,value:"NTLM"}],ticketType:[{name:"BUG",value:"BUG"}],disabledForEdit:[],canUseRPAuthorization:!0},btsRALLY:{authorizationType:[{name:i.ui.APIKEY,value:"APIKEY"}],ticketType:[{name:"BUG",value:"BUG"}],disabledForEdit:[],canUseRPAuthorization:!1},emailInCase:[{value:"ALWAYS",name:"Always"},{value:"TO_INVESTIGATE",name:'Launch has "To Investigate" items'},{value:"FAILED",name:"Launch has issues"},{value:"MORE_10",name:"> 10% of items have issues"},{value:"MORE_20",name:"> 20% of items have issues"},{value:"MORE_50",name:"> 50% of items have issues"}]},forAdminSettings:{protocol:[{value:"smtp",name:"SMTP"}],defaultProtocol:"smtp"},widgetCriteria:{launch_statistics_exec:["Passed","Failed","Skipped","Total"],launch_statistics_issue:["Product.Bug","Automation.Bug","System.Issue","Total"],investigated_trend:["Product.Bug","Automation.Bug","System.Issue","To.Investigate"]},minNameLength:3,maxNameLength:55}},o=null,u=function(){return o||(o=s()),o},a=function(){o=null};return{getInstance:u,clear:a}}),define("dataUrlResolver",["app"],function(e){"use strict";var t=e.getInstance(),n=function(){return"/uat/sso/me/apitoken"},r=function(){return"/uat/sso/me"},i=function(e){return"/uat/sso/oauth/token?grant_type=password&username="+e.login+"&password="+e.password},s=function(){return"/composite/info"},o=function(){return t.apiVersion+t.project.projectId||t.userModel.get("defaultProject")},u=function(){return t.apiVersion+"project/"+(t.project.projectId||t.userModel.get("defaultProject"))},a=function(){var e=new Date;return t.apiVersion+"data/userphoto?v="+e.getTime()+"&id="},f=function(e){var t=e.join(",");return o()+"/filter/filters?ids="+t},l=function(e){return e?o()+"/filter"+e:o()+"/filter"},c=function(e){return l()+"/"+e},h=function(){return l()+"/names"},p=function(){return h()+"?is_shared=true"},d=function(){return l()+"/own"},v=function(){return l()+"/shared"},m=function(){return o()+"/widget/names/shared"},g=function(){return o()+"/widget/shared"},y=function(e){return l()+"/"+e},b=function(){return"#"+t.project.projectId+"/filters"},w=function(){var e=t.userModel.toJSON();return t.apiVersion+"project/"+(t.project.projectId||e.defaultProject)+"/preference/"+e.name},E=function(e){return t.projectUrl+(e||t.project.projectId||t.userModel.get("defaultProject"))},S=function(){return"#"+t.project.projectId+"/launches"},x=function(){return"#"+t.project.projectId+"/userdebug"},T=function(e){return S()+"/all?"+e},N=function(){return o()+"/launch"},C=function(){return N()+"/merge"},k=function(){return N()+"/update"},L=function(){return N()+"/stop"},A=function(e){return o()+"/launch/tags?filter.cnt.tags="+encodeURIComponent(e)},O=function(e){return o()+"/launch/names?filter.cnt.name="+encodeURIComponent(e)},M=function(e,t){return o()+"/launch/owners?filter.cnt.user="+encodeURI(e)+(t?"&mode="+t:"")},_=function(e){return t.apiVersion+"project/"+t.project.projectId+"/usernames?filter.cnt.users="+encodeURI(e)},D=function(e,t){return o()+"/item/tags?launch="+t.replace("all-cases-for-","")+"&filter.cnt.tags="+encodeURI(e)},P=function(e){return o()+"/launch/"+e+"/update"},H=function(e){return o()+"/launch/"+e},B=function(e){return o()+"/item/"+e+"/update"},j=function(e){return o()+"/item/"+e},F=function(e){return o()+"/launch/"+e+"/analyze/history"},I=function(e){return o()+"/launch/"+e+"/analyze/single"},q=function(e){return o()+"/launch/"+e+"/stop"},R=function(e){return e=e||t.project.projectId,t.apiVersion+"project/"+e},U=function(e){return e=e||t.project.projectId,t.apiVersion+"project/"+e+"/emailconfig"},z=function(){return o()+"/external-system"},W=function(e){return o()+"/external-system/"+e},X=function(){return o()+"/external-system/clear"},V=function(e){return R()+"/users"+(e?"?page.page=1&page.size=50&page.sort=login,ASC&filter.cnt.name="+e:"")},$=function(e){return R()+"/users"+(e?"?page.page=1&page.size=50&page.sort=login,ASC&filter.cnt.email="+e:"")},J=function(e){return R(e)+"/unassign"},K=function(e){return R(e)+"/assign"},Q=function(){return o()+"/widget"},G=function(){return u()+"/widget"},Y=function(e){return Q()+"/"+e},Z=function(e){return G()+"/"+e},et=function(){return o()+"/widget/names/all"},tt=function(e){return o()+"/item/"+e},nt=function(e){return o()+"/item/items?ids="+e.join(",")},rt=function(e){return o()+"/item/history/?ids="+e+"&history_depth=10"},it=function(e){return o()+"/activity/item/"+e},st=function(){return o()+"/dashboard"},ot=function(e){return st()+"/"+e},ut=function(){return st()+"/shared"},at=function(e){return"#"+t.project.projectId+"/dashboard"+(e?"/"+e:"")},ft=function(){return o()+"/favorites"},lt=function(e){return ft()+"?resource_id="+e+"&resource_type=DASHBOARD"},ct=function(e){return o()+"/launch/compare?ids="+e},ht=function(e){return o()+"/external-system/"+e+"/fields-set?issuetype=BUG"},pt=function(e){return o()+"/external-system/"+e+"/ticket"},dt=function(){return mt()+"/issue/add"},vt=function(e,t){return o()+"/external-system/"+t+"/ticket/"+e},mt=function(){return o()+"/item"},gt=function(e,t){return mt()+"/history?ids="+e.toString()+"&history_depth="+t},yt=function(e,t){return window.location.hash+"/history?ids="+e.join(",")+"&history_depth="+t},bt=function(){return t.apiVersion+"project"},wt=function(e){return bt()+"/"+e},Et=function(e){return t.apiVersion+"settings/"+e},St=function(e){return t.apiVersion+"settings/"+e+"/email"},xt=function(e){return t.apiVersion+"settings/"+e+"/email"},Tt=function(){return"/uat/settings/default/oauth/github"},Nt=function(e){return bt()+"/list"+(e?e:"")},Ct=function(e){return Nt()+"/"+e},kt=function(){return t.apiVersion+"user"},Lt=function(){return kt()+"/"+t.userModel.get("name")},At=function(){return t.apiVersion+"user/bid"},Ot=function(e){return t.apiVersion+"user/registration?uuid="+e},Mt=function(e){return t.apiVersion+"user/registration?uuid="+e},_t=function(e){return e?t.apiVersion+"user/all?"+e:t.apiVersion+"user/all"},Dt=function(e){var e=e;e||(e={}),e.page||(e.page=1),e.size||(e.size=10);var n=t.apiVersion+"user/",r="";return e.search?(n+="search/"+e.search,r="&page.sort=login,ASC"):(n+="all",r="&page.sort=login,ASC"),n+"?page.page="+e.page+"&page.size="+e.size+r},Pt=function(e){return t.apiVersion+"user/"+e},Ht=function(){return t.apiVersion+"user/registration/info"},Bt=function(){return bt()+"/names"},jt=function(e,t){return R(e)+"/users"+t},Ft=function(e,t){return R(e)+"/assignable"+t},It=function(e){return"#"+t.project.projectId+"/members/"+e},qt=function(e){return o()+"/launch/status?ids="+e},Rt=function(e,t){return"#administrate/project-details/"+e+"?interval="+t},Ut=function(e,t){return Ct(e)+"?interval="+t+"M"},zt=function(){return t.apiVersion+"user/password/restore"},Wt=function(e){return e=e?"/"+e:"",t.apiVersion+"user/password/reset"+e},Xt=function(){return t.apiVersion+"user/password/change"},Vt=function(e,t,n){return wt(e)+"/widget/"+t+"?interval="+n+"M"},$t=function(){return"/launches/all/all-cases-for-"},Jt=function(){return"?page.page=1&page.sort=start_time,ASC&filter.eq.has_childs=false&"},Kt=function(){return"?page.page=1&page.sort=start_time,ASC&"},Qt=function(){return o()+"/data/"},Gt=function(e){var n=t.userModel.get("token"),r="";return n&&(r="?access_token="+n.split(" ")[1]),o()+"/data/"+e+r},Yt=function(){return t.apiVersion+"data/photo"},Zt=function(){return t.apiVersion+"user/uuid"},en=function(){return"/uat/sso/me/github/synchronize"},tn=function(e,n){return t.apiVersion+t.project.projectId+"/launch/"+e+"/report?view="+(n||"xls")},nn=function(e){return t.apiVersion+e+"/settings/"},rn=function(e){return t.apiVersion+e+"/settings/sub-type/"},sn=function(){return"/composite/extensions"},on=function(e,t){switch(e){case"suit":case"test":e="item";break;case"launch":e=t?e+"/mode":e;break;default:}return o()+"/"+e},un=function(){return o()+"/log"},an=function(e,t){return on(e)+"/"+t},fn=function(){return t.apiVersion+"demo/"+t.project.projectId};return{getApiToken:n,userLogout:r,userLogin:i,getRegistryInfo:s,getAvatar:a,getProjectBase:o,getChartProjectBase:u,getFilters:f,saveFilter:l,filterNames:h,filterNamesShared:p,widgetNamesShared:m,ownFilters:d,sharedFilters:v,widgetsShared:g,getPreferences:w,getProject:E,updateFilter:y,filtersBase:b,launchesBase:S,getLaunchStop:L,userDebugBade:x,updateLaunchUrl:P,deleteLaunchUrl:H,updateTestItemUrl:B,deleteTestItemUrl:j,launchAnalyzeUrl:F,launchMatchUrl:I,launchFinishUrl:q,tabUrl:T,getLaunchBase:N,getMerge:C,getLaunchUpdate:k,queryByTags:A,queryByLaunchName:O,userAutoCompleteUrl:M,autocompleteUserUrl:_,tagsLaunchAutoCompleteUrl:D,updateProject:R,updateEmailProjectSettings:U,createExternalSystem:z,updateExternalSystem:W,clearExternalSystem:X,projectUsers:V,getBtsTicket:vt,updateProjectUnassign:J,updateProjectAssign:K,widget:Q,chart:G,widgetById:Y,chartById:Z,widgetNames:et,itemByKey:tt,itemsByKeys:nt,loadHistory:rt,loadActivityItems:it,dashboard:st,dashboardById:ot,dashboardShared:ut,redirectToDashboard:at,favorites:ft,favoritesByResourceId:lt,compareByIds:ct,btsFields:ht,postBug:pt,loadBugs:dt,itemBase:mt,historyGrid:gt,historyGridUrl:yt,adminProjectRoot:bt,adminProjectRootId:wt,adminProjects:Nt,adminProject:Ct,getAdminSettings:Et,setAdminSettings:St,deleteEmailSettings:xt,projectDetailsWidgets:Vt,addMemberUrl:kt,userUrl:Lt,sendInviteUrl:At,validateRegisterBidUrl:Mt,registerUserUrl:Ot,filterById:c,userInfoValidation:Ht,allUsersUrl:_t,searchUsersUrl:Dt,modifyUserUrl:Pt,getProjectNames:Bt,getMembers:jt,getAssignableMembers:Ft,getMembersTab:It,checkStatusUpdate:qt,detailsInterval:Rt,detailsIntervalCall:Ut,initPassChange:zt,submitPassReset:Wt,submitPassChange:Xt,uploadPhoto:Yt,getFile:Qt,getFileById:Gt,generateUUID:Zt,updateGitHubProfile:en,exportLaunchUrl:tn,getDefectTypes:nn,postDefectTypes:rn,getGridUrl:on,getLogsUrl:un,getLaunchItemUrl:an,userByEmail:$,postDemoDataUrl:fn,getExternalSystems:sn,adminAuthSettings:Tt}}),define("callService",["require","exports","module","jquery","util"],function(e,t,n){"use strict";var r=e("jquery"),i=function(t,n,i,s,o){var u=e("util"),i=s?i:i?JSON.stringify(i):{},a={type:t,url:n,data:i};return o&&(a.beforeSend=function(e){e.persistant=!0,u.ajaxBeforeSend(e)}),r.ajax(a)};return{call:i}}),define("validators",["require","exports","module","localization","dataUrlResolver","callService"],function(e,t,n){"use strict";var r=e("localization"),i=e("dataUrlResolver"),s=e("callService"),o={},u=function(e,t){var n;t.isCaseSensitive?n=t.source.indexOf(e)!==-1:n=t.source.indexOf(e.toLowerCase())!==-1;if(n)return r.validation[t.type+"Duplication"]},a=function(e,t){var n=e.length;return n===0?r.validation[t.type+"Required"]||r.validation.requiredDefault:null},f=function(e,t){return o[t.type]||(o[t.type]=t.pattern instanceof RegExp?t.pattern:new RegExp(t.pattern,t.arg)),o[t.type].test(""+e)?null:t.message||r.validation[t.type]},l=function(e,t,n){var i=e.length;return i===0||v(i,t)?n.replaceTemplate(r.validation[t.type+"Length"],t.min,t.max):null},c=function(e,t,n){var i=e.length;return m(i,t)?n.replaceTemplate(r.validation[t.type+"MaxLength"],t.max):null},h=function(e,t,n){var i=p(e),s=parseInt(e);return!e.length||!i||s<t.min||s>t.max?n.replaceTemplate(r.validation[t.type+"Length"],t.min,t.max):null},p=function(e){return Number(e)==e&&e%1===0},d=function(e,t,n){var i=e.length;return i===0?null:v(i,t)?n.replaceTemplate(r.validation[t.type+"Length"],t.min,t.max):null},v=function(e,t){return e<t.min||e>t.max},m=function(e,t){return e>t.max},g=function(e,t){var n=$.Deferred();return s.call("GET",i.userInfoValidation()+"?email="+e).done(function(e){var t={valid:!e.is};n.resolve(t)}).fail(function(e){n.resolve({valid:!1})}),n.promise()};return{minMaxNumberRequired:h,noDuplications:u,required:a,matchRegex:f,minMaxRequired:l,minMaxNotRequired:d,remoteEmail:g}}),define("coreService",["jquery","dataUrlResolver","callService"],function(e,t,n){"use strict";var r=n.call,i=function(){return r("GET",t.getApiToken())},s=function(){return r("POST",t.getApiToken())},o=function(){return r("DELETE",t.userLogout())},u=function(e){return r("POST",t.userLogin(e))},a=function(){return r("GET",t.getRegistryInfo())},f=function(){return r("GET",t.getPreferences())},l=function(e){return r("GET",e)},c=function(){return r("GET",t.getProject())},h=function(e){return r("GET",t.autocompleteUserUrl(e))},p=function(e){return r("GET",t.userByEmail(e))},d=function(e){return r("GET",t.dashboardById(e))},v=function(){return r("GET",t.dashboard())},m=function(e){return r("POST",t.dashboard(),e)},g=function(e,n){var i=t.dashboardById(e);return r("DELETE",i)},y=function(e){return r("DELETE",t.favoritesByResourceId(e))},b=function(e,n){return r("PUT",t.dashboardById(e),n)},w=function(){return r("GET",t.dashboardShared())},E=function(e){return r("POST",t.dashboard(),e)},S=function(e){return r("POST",t.favorites(),{resource_id:e,resource_type:"DASHBOARD"})},x=function(e){return r("POST",t.widget(),e)},T=function(e,n){return r("PUT",t.widgetById(n),e)},N=function(e,n){return r("PUT",t.dashboardById(n),{addWidget:e})},C=function(e,n){return r("PUT",t.dashboardById(n),{updateWidgets:e})},k=function(e,n){return r("GET",t.getBtsTicket(e,n))},L=function(e){return r("PUT",t.itemBase(),e)},A=function(e){return r("GET",t.compareByIds(e))},O=function(){return r("GET",t.widgetsShared())},M=function(e){return r("GET",t.widgetById(e))},_=function(e){return r("GET",t.saveFilter(e))},D=function(){return r("GET",t.ownFilters())},P=function(){return r("GET",t.filterNames())},H=function(){return r("GET",t.sharedFilters())},B=function(e){return r("GET",t.getFilters(e))},j=function(){return r("GET",t.widgetNames())},F=function(e,n){return r("GET",t.getProjectBase()+"/"+e+"?"+n)},I=function(e){return r("GET",e)},q=function(e){return r("GET",t.getProjectBase()+"/widget/"+e)},R=function(e){return r("PUT",t.userUrl(),{default_project:e},null,!0)},U=function(e){return r("GET",t.addMemberUrl()+"/"+e)},z=function(){return r("GET",t.addMemberUrl())},W=function(e){return r("GET",t.addMemberUrl()+"/"+e+"/projects")},X=function(e){return r("PUT",t.updateProject(),e)},V=function(e){return r("PUT",t.updateEmailProjectSettings(),e)},$=function(e){return delete e.id,r("POST",t.createExternalSystem(),e)},J=function(e){var n=e.id;return delete e.id,r("PUT",t.updateExternalSystem(n),e)},K=function(e){return r("DELETE",t.updateExternalSystem(e))},Q=function(){return r("DELETE",t.clearExternalSystem())},G=function(e){return r("GET",t.btsFields(e))},Y=function(e,n){return r("POST",t.postBug(n),e)},Z=function(e){return r("PUT",t.loadBugs(),e)},et=function(e,n){return r("PUT",t.updateLaunchUrl(n),e)},tt=function(e,n){return r("PUT",t.updateTestItemUrl(n),e)},nt=function(e){return r("POST",t.launchAnalyzeUrl(e),null,null,!0)},rt=function(e){return r("POST",t.launchMatchUrl(e),null,null,!0)},it=function(e){return r("POST",t.getMerge(),e)},st=function(e){return r("PUT",t.launchFinishUrl(e),{end_time:(new Date).getTime()})},ot=function(e){return r("PUT",t.itemBase(),e)},ut=function(e,n,i){return n=n||"queryByTags",r("GET",t[n](e.term,i))},at=function(e,n){return r("GET",t.historyGrid(e,n))},ft=function(e){return r("GET",t.itemByKey(e))},lt=function(e){return r("GET",t.loadHistory(e))},ct=function(e){return r("GET",t.loadActivityItems(e))},ht=function(e){return r("GET",t.checkStatusUpdate(e))},pt=function(e){return r("POST",t.initPassChange(),{email:e})},dt=function(e,n){return r("POST",t.submitPassReset(),{password:e,uuid:n})},vt=function(e){return r("POST",t.submitPassChange(),e)},mt=function(e){return r("GET",t.submitPassReset(e))},gt=function(e){return r("PUT",t.userUrl(),e)},yt=function(){return r("DELETE",t.uploadPhoto())},bt=function(){return r("PUT",t.generateUUID())},wt=function(e){return r("POST",t.updateGitHubProfile())},Et=function(e){return r("GET",t.queryByLaunchName(e.term))},St=function(e){return r("GET",t.itemByKey(e))},xt=function(e){return r("GET",t.itemsByKeys(e))},Tt=function(e,n){return r("GET",t.getLaunchItemUrl(e,n))},Nt=function(e){return r("DELETE",t.deleteLaunchUrl(e),null,null,!0)},Ct=function(e){return r("DELETE",t.deleteTestItemUrl(e),null,null,!0)},kt=function(e){return r("GET",t.getDefectTypes(e))},Lt=function(e,n){return r("POST",t.postDefectTypes(e),n)},At=function(e,n){return r("PUT",t.postDefectTypes(e),n)},Ot=function(e,n){return r("DELETE",t.postDefectTypes(e)+n)},Mt=function(e){return r("POST",t.postDemoDataUrl(),e)};return{getApiToken:i,generateApiToken:s,userLogout:o,userLogin:u,getRegistryInfo:a,getPreferences:f,getProfileImage:l,getProject:c,getProjectUsersById:h,getProjectDashboard:d,getProjectDashboards:v,getSharedWidgets:O,getSharedWidgetData:M,getOwnFilters:D,getSharedFilters:H,getFilterNames:P,getFilterData:B,createDashboard:m,deleteDashboard:g,deleteDeletedByOwnerDashboard:y,updateDashboard:b,getSharedDashboards:w,addOwnDashboard:E,addSharedDashboard:S,getBtsTicket:k,updateDefect:L,getCompare:A,updateLaunch:et,updateTestItem:tt,startLaunchAnalyze:nt,startLaunchMatch:rt,mergeLaunches:it,finishLaunch:st,removeTicket:ot,searchTags:ut,searchLaunches:Et,getHistoryData:at,getDefectItem:ft,loadHistory:lt,loadActivityItems:ct,saveFilter:_,saveWidget:x,updateWidget:T,addWidgetToDashboard:N,updateWidgetsOnDashboard:C,getWidgetNames:j,getWidgetData:F,loadWidget:I,getTestItemInfo:St,getTestItemsInfo:xt,getLaunchItem:Tt,loadDashboardWidget:q,updateProject:X,updateEmailProjectSettings:V,updateDefaultProject:R,getUserInfo:U,getCurrentUser:z,getUserAssignedProjects:W,createExternalSystem:$,updateExternalSystem:J,deleteExternalSystem:K,clearExternalSystem:Q,getBtsFields:G,postBugToBts:Y,loadBugs:Z,checkForStatusUpdate:ht,initializePassChange:pt,submitPassReset:dt,submitProfileInfo:gt,submitPassChange:vt,validateRestorationKey:mt,deletePhoto:yt,generateUUID:bt,gitHubForceUpdate:wt,deleteLaunch:Nt,deleteTestItem:Ct,getDefectTypes:kt,postDefectTypes:Lt,putDefectType:At,deleteDefectType:Ot,getUserByEmail:p,generateDemoData:Mt}}),function(e,t){"undefined"!=typeof exports?module.exports=t(require("underscore"),require("backbone")):"function"==typeof define&&define.amd?define("backbone-epoxy",["underscore","backbone"],t):t(e._,e.Backbone)}(this,function(e,t){function n(e,t,n){return e._super.prototype[t].apply(e,n)}function r(t,n,i,s){for(var o in n)if(n.hasOwnProperty(o)){var u=n[o];if(t.hasComputed(o)){if(s.length&&e.contains(s,o))throw"Recursive setter: "+s.join(" > ");u=t.c()[o].set(u),u&&E(u)&&(i=r(t,u,i,s.concat(o)))}else i[o]=u}return i}function i(t,n,r,i){r=r||{},r.get&&w(r.get)&&(r._get=r.get),r.set&&w(r.set)&&(r._set=r.set),delete r.get,delete r.set,e.extend(this,r),this.model=t,this.name=n,this.deps=this.deps||[],i||this.init()}function s(t){return w(t)?t():(E(t)&&(t=e.clone(t),e.each(t,function(e,n){t[n]=s(e)})),t)}function o(e){return w(e)?{set:e}:e}function u(t){return function(){var n=arguments,r=w(t)?t:t.get,i=t.set;return function(t){return b(t)?r.apply(this,e.map(n,s)):n[0]((i?i:r).call(this,t))}}}function a(t,n,r,i,s){return(t=e.result(t,i))?(x(t)?(s=s?s+"_":"",n["$"+i]=function(){return D&&D.push([t,"change"]),t},e.each(t.toJSON({computed:!0}),function(e,i){n[s+i]=function(e){return f(t,i,e,r)}})):T(t)&&(n["$"+i]=function(){return D&&D.push([t,"reset add remove sort update"]),t}),t):void 0}function f(t,n,r,i){if(D&&D.push([t,"change:"+n]),!b(r)){if(!E(r)||S(r)||e.isDate(r)){var s=r;r={},r[n]=s}return i&&i.save?t.save(r,i):t.set(r,i)}return t.get(n)}function l(e,t){if(":el"===t||":scope"===t)return e.$el;var n=e.$(t);return e.$el.is(t)&&(n=n.add(e.$el)),n}function c(t,n,r,i,s,o){try{var u=A[r]||(A[r]=Function("$f","$c","with($f){with($c){return{"+r+"}}}")),a=u(o,i)}catch(f){throw'Error parsing bindings: "'+r+'"\n>> '+f}var l=e.map(e.union(a.events||[],["change"]),function(e){return e+".epoxy"}).join(" ");e.each(a,function(e,r){if(s.hasOwnProperty(r))t.b().push(new v(t,n,s[r],e,l,i,a));else if(!_.hasOwnProperty(r))throw'binding handler "'+r+'" is not defined.'})}function h(e,t,n){return e&&e.hasOwnProperty(t)?b(n)?s(e[t]):e[t](n):void 0}function p(e,t){var n=[];if(t&&e)for(var r=0,i=t.length;i>r;r++)n.push(t[r]in e?e[t[r]]():null);return n}function d(e){var t=[];for(var n in e){var r=e[n];E(r)&&(r="{"+d(r)+"}"),H.test(n)||B.test(n)||(n='"'+n+'"'),t.push(n+":"+r)}return t.join(",")}function v(t,n,r,i,o,u,a){var f=this,l=n[0].tagName.toLowerCase(),c="input"==l||"select"==l||"textarea"==l||"true"==n.prop("contenteditable"),h=[],p=function(e){f.$el&&f.set(f.$el,s(i),e)};if(f.view=t,f.$el=n,f.evt=o,e.extend(f,r),i=f.init(f.$el,s(i),u,a)||i,D=h,p(),D=null,c&&r.get&&w(i)&&f.$el.on(o,function(e){i(f.get(f.$el,s(i),e))}),h.length)for(var d=0,v=h.length;v>d;d++)f.listenTo(h[d][0],h[d][1],p)}var m,g=t.Epoxy={},y=Array.prototype,b=e.isUndefined,w=e.isFunction,E=e.isObject,S=e.isArray,x=function(e){return e instanceof t.Model},T=function(e){return e instanceof t.Collection},N=function(){},C={mixin:function(e){e=e||{};for(var t in this.prototype)"bindings"===t&&e.bindings||this.prototype.hasOwnProperty(t)&&"constructor"!==t&&(e[t]=this.prototype[t]);return e}},k=["computeds"];g.Model=t.Model.extend({_super:t.Model,constructor:function(t,r){e.extend(this,e.pick(r||{},k)),n(this,"constructor",arguments),this.initComputeds(this.attributes,r)},getCopy:function(t){return e.clone(this.get(t))},get:function(e){return m&&m.push(["change:"+e,this]),this.hasComputed(e)?this.c()[e].get():n(this,"get",arguments)},set:function(t,i,s){var o=t;o&&!E(o)?(o={},o[t]=i):s=i,s=s||{};var u=this._setting=[];s.unset||(o=r(this,o,{},[])),delete this._setting;var a=n(this,"set",[o,s]);return s.silent||(!this.hasChanged()&&u.length&&this.trigger("change",this),e.each(u,function(e){this.trigger.apply(this,e)},this)),a},toJSON:function(t){var r=n(this,"toJSON",arguments);return t&&t.computed&&e.each(this.c(),function(e,t){r[t]=e.value}),r},destroy:function(){return this.clearComputeds(),n(this,"destroy",arguments)},c:function(){return this._c||(this._c={})},initComputeds:function(t){this.clearComputeds();var n=e.result(this,"computeds")||{};n=e.extend(n,e.pick(t||{},e.keys(n))),e.each(n,function(e,t){e._init=1,this.addComputed(t,e)},this),e.invoke(this.c(),"init")},addComputed:function(e,t,n){this.removeComputed(e);var r=t,s=r._init;if(w(t)){var o=2;r={},r._get=t,w(n)&&(r._set=n,o++),r.deps=y.slice.call(arguments,o)}return this.c()[e]=new i(this,e,r,s),this},hasComputed:function(e){return this.c().hasOwnProperty(e)},removeComputed:function(e){return this.hasComputed(e)&&(this.c()[e].dispose(),delete this.c()[e]),this},clearComputeds:function(){for(var e in this.c())this.removeComputed(e);return this},modifyArray:function(e,t,n){var r=this.get(e);if(S(r)&&w(y[t])){var i=y.slice.call(arguments,2),s=y[t].apply(r,i);return n=n||{},n.silent||this.trigger("change:"+e+" change",this,y,n),s}return null},modifyObject:function(e,t,n,r){var i=this.get(e),s=!1;return E(i)?(r=r||{},b(n)&&i.hasOwnProperty(t)?(delete i[t],s=!0):i[t]!==n&&(i[t]=n,s=!0),s&&!r.silent&&this.trigger("change:"+e+" change",this,i,r),i):null}},C),e.extend(i.prototype,t.Events,{init:function(){var t={},n=m=[];this.get(!0),m=null,n.length&&(e.each(n,function(n){var r=n[0],i=n[1];t[r]?e.contains(t[r],i)||t[r].push(i):t[r]=[i]}),e.each(t,function(t,n){for(var r=0,i=t.length;i>r;r++)this.listenTo(t[r],n,e.bind(this.get,this,!0))},this))},val:function(e){return this.model.get(e)},get:function(t){if(t===!0&&this._get){var n=this._get.apply(this.model,e.map(this.deps,this.val,this));this.change(n)}return this.value},set:function(e){if(this._get){if(this._set)return this._set.apply(this.model,arguments);throw"Cannot set read-only computed attribute."}return this.change(e),null},change:function(t){if(!e.isEqual(t,this.value)){this.value=t;var n=["change:"+this.name,this.model,t];this.model._setting?this.model._setting.push(n):(n[0]+=" change",this.model.trigger.apply(this.model,n))}},dispose:function(){this.stopListening(),this.off(),this.model=this.value=null}});var L={optionText:"label",optionValue:"value"},A={},O={attr:o(function(e,t){e.attr(t)}),checked:o({get:function(t,n,r){t.length>1&&(t=t.filter(r.target));var i=!!t.prop("checked"),s=t.val();if(this.isRadio(t))return s;if(S(n)){n=n.slice();var o=e.indexOf(n,s);return i&&0>o?n.push(s):!i&&o>-1&&n.splice(o,1),n}return i},set:function(t,n){t.length>1&&(t=t.filter('[value="'+n+'"]'));var r=!!n;this.isRadio(t)?r=n==t.val():S(n)&&(r=e.contains(n,t.val())),t.prop("checked",r)},isRadio:function(e){return"radio"===e.attr("type").toLowerCase()}}),classes:o(function(t,n){e.each(n,function(e,n){t.toggleClass(n,!!e)})}),collection:o({init:function(e,t,n,r){if(this.i=r.itemView?this.view[r.itemView]:this.view.itemView,!T(t))throw'Binding "collection" requires a Collection.';if(!w(this.i))throw'Binding "collection" requires an itemView.';this.v={}},set:function(t,n,r){var i,s=this.v,o=this.i,u=n.models,a=D;if(D=null,r=r||n,x(r))if(s.hasOwnProperty(r.cid))s[r.cid].remove(),delete s[r.cid];else{s[r.cid]=i=new o({model:r,collectionView:this.view});var f=e.indexOf(u,r),l=t.children();l.length>f?l.eq(f).before(i.$el):t.append(i.$el)}else if(T(r)){var c=u.length===e.size(s)&&n.every(function(e){return s.hasOwnProperty(e.cid)});t.children().detach();var h=document.createDocumentFragment();c?n.each(function(e){h.appendChild(s[e.cid].el)}):(this.clean(),n.each(function(e){s[e.cid]=i=new o({model:e,collectionView:this.view}),h.appendChild(i.el)},this)),t.append(h)}D=a},clean:function(){for(var e in this.v)this.v.hasOwnProperty(e)&&(this.v[e].remove(),delete this.v[e])}}),css:o(function(e,t){e.css(t)}),disabled:o(function(e,t){e.prop("disabled",!!t)}),enabled:o(function(e,t){e.prop("disabled",!t)}),html:o(function(e,t){e.html(t)}),options:o({init:function(e,t,n,r){this.e=r.optionsEmpty,this.d=r.optionsDefault,this.v=r.value},set:function(t,n){var r=this,i=s(r.e),o=s(r.d),u=s(r.v),a=T(n)?n.models:n,f=a.length,l=!0,c="";f||o||!i?(o&&(a=[o].concat(a)),e.each(a,function(e){c+=r.opt(e,f)})):(c+=r.opt(i,f),l=!1),t.html(c).prop("disabled",!l).val(u),0>t[0].selectedIndex&&t.children().length&&(t[0].selectedIndex=0);var h=t.val();r.v&&!e.isEqual(u,h)&&r.v(h)},opt:function(e){var t=e,n=e,r=L.optionText,i=L.optionValue;return E(e)&&(t=x(e)?e.get(r):e[r],n=x(e)?e.get(i):e[i]),['<option value="',n,'">',t,"</option>"].join("")},clean:function(){this.d=this.e=this.v=0}}),template:o({init:function(t,n,r){var i=t.find("script,template");return this.t=e.template(i.length?i.html():t.html()),S(n)?e.pick(r,n):void 0},set:function(e,t){t=x(t)?t.toJSON({computed:!0}):t,e.html(this.t(t))},clean:function(){this.t=null}}),text:o({get:function(e){return e.text()},set:function(e,t){e.text(t)}}),toggle:o(function(e,t){e.toggle(!!t)}),value:o({get:function(e){return e.val()},set:function(e,t){try{e.val()+""!=t+""&&e.val(t)}catch(n){}}})},M={all:u(function(){for(var e=arguments,t=0,n=e.length;n>t;t++)if(!e[t])return!1;return!0}),any:u(function(){for(var e=arguments,t=0,n=e.length;n>t;t++)if(e[t])return!0;return!1}),length:u(function(e){return e.length||0}),none:u(function(){for(var e=arguments,t=0,n=e.length;n>t;t++)if(e[t])return!1;return!0}),not:u(function(e){return!e}),format:u(function(e){for(var t=arguments,n=1,r=t.length;r>n;n++)e=e.replace(RegExp("\\$"+n,"g"),t[n]);return e}),select:u(function(e,t,n){return e?t:n}),csv:u({get:function(e){return e+="",e?e.split(","):[]},set:function(e){return S(e)?e.join(","):e}}),integer:u(function(e){return e?parseInt(e,10):0}),decimal:u(function(e){return e?parseFloat(e):0})},_={events:1,itemView:1,optionsDefault:1,optionsEmpty:1};g.binding={allowedParams:_,addHandler:function(e,t){O[e]=o(t)},addFilter:function(e,t){M[e]=u(t)},config:function(t){e.extend(L,t)},emptyCache:function(){A={}}};var D,P=["viewModel","bindings","bindingFilters","bindingHandlers","bindingSources","computeds"];g.View=t.View.extend({_super:t.View,constructor:function(t){e.extend(this,e.pick(t||{},P)),n(this,"constructor",arguments),this.applyBindings()},b:function(){return this._b||(this._b=[])},bindings:"data-bind",setterOptions:null,applyBindings:function(){this.removeBindings();var n=this,r=e.clone(e.result(n,"bindingSources")),i=n.bindings,s=n.setterOptions,f=e.clone(O),h=e.clone(M),v=n._c={};e.each(e.result(n,"bindingHandlers")||{},function(e,t){f[t]=o(e)}),e.each(e.result(n,"bindingFilters")||{},function(e,t){h[t]=u(e)}),n.model=a(n,v,s,"model"),n.viewModel=a(n,v,s,"viewModel"),n.collection=a(n,v,s,"collection"),n.collection&&n.collection.view&&(n.itemView=n.collection.view),r&&(e.each(r,function(e,t){r[t]=a(r,v,s,t,t)}),n.bindingSources=r),e.each(e.result(n,"computeds")||{},function(e,t){var r=w(e)?e:e.get,i=e.set,s=e.deps;v[t]=function(e){return!b(e)&&i?i.call(n,e):r.apply(n,p(n._c,s))}}),E(i)?e.each(i,function(e,t){var r=l(n,t);E(e)&&(e=d(e)),r.length&&c(n,r,e,v,f,h)}):l(n,"["+i+"]").each(function(){var e=t.$(this);c(n,e,e.attr(i),v,f,h)})},getBinding:function(e){return h(this._c,e)},setBinding:function(e,t){return h(this._c,e,t)},removeBindings:function(){if(this._c=null,this._b)for(;this._b.length;)this._b.pop().dispose()},remove:function(){this.removeBindings(),n(this,"remove",arguments)}},C);var H=/^[a-z_$][a-z0-9_$]*$/i,B=/^\s*(["']).*\1\s*$/;return e.extend(v.prototype,t.Events,{init:N,get:N,set:N,clean:N,dispose:function(){this.clean(),this.stopListening(),this.$el.off(this.evt),this.$el=this.view=null}}),g}),define("defectType/DefectTypeModel",["require","exports","module","backbone-epoxy"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=r.Model.extend({defaults:{color:"",locator:"",longName:"",shortName:"",typeRef:"",mainType:!1},computeds:{reverseColor:{deps:["lightColor"],get:function(e){return e<50?"#fff":"#464547"}},lightColor:{deps:["color"],get:function(e){var t=/^#?([a-f\d]{1,2})([a-f\d]{1,2})([a-f\d]{1,2})$/i.exec(e),n=t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null;return n?(n.r*.8+n.g+n.b*.2)/510*100:0}}},validate:function(e,t){var n=[];_.each(e,function(e,t){var r={key:t,valid:!0,reason:[]};if(t==="links"||t==="locator"||t==="mainType")return;if(!e.length){r.valid=!1,r.reason.push("fieldRequired"),n.push(r);return}t==="longName"&&(e.length<3||e.length>55)&&(r.valid=!1,r.reason.push("defectName")),t==="shortName"&&e.length>4&&(r.valid=!1,r.reason.push("defectShortName")),r.valid||n.push(r)},this);if(n.length)return n},toUpdateItem:function(){var e=this.toJSON();return delete e.links,delete e.mainType,e.locator!=="newItem"&&(e.id=e.locator),delete e.locator,e}});return i}),define("model/AppModel",["require","exports","module","backbone-epoxy"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=r.Model.extend({defaults:{projectId:null,type:"",externalSystem:"[]"},computeds:{isBtsAdded:{deps:["externalSystem"],get:function(){var e=this.getArr("externalSystem");return e&&!e.length?!1:!0}},isBtsConfigure:{deps:["isBtsAdded","externalSystem"],get:function(e){if(!e)return!1;var t=this.getArr("externalSystem");return _.any(t,function(e){return e.fields&&e.fields.length})?!0:!1}}},initialize:function(){},isPersonalProject:function(){return this.get("configuration")?this.get("configuration").entryType==="PERSONAL":null},isInternalProject:function(){return this.get("configuration")?this.get("configuration").entryType==="INTERNAL":null},parse:function(e){e.externalSystem="",e.configuration&&e.configuration.externalSystem&&(e.externalSystem=JSON.stringify(e.configuration.externalSystem)),this.set(e)},getArr:function(e){var t=this.get(e);try{return JSON.parse(t)}catch(n){return[]}},setArr:function(e,t){this.set(e,JSON.stringify(t))}});return i}),define("model/SingletonAppModel",["require","exports","module","model/AppModel"],function(e,t,n){"use strict";var r=null,i=e("model/AppModel"),s=function(){return r||(r=new i),r};return s}),define("defectType/DefectTypeCollection",["require","exports","module","backbone","jquery","underscore","coreService","defectType/DefectTypeModel","model/SingletonAppModel","app","util"],function(e,t,n){"use strict";var r=e("backbone"),i=e("jquery"),s=e("underscore"),o=e("coreService"),u=e("defectType/DefectTypeModel"),a=e("model/SingletonAppModel"),f=e("app"),l=f.getInstance(),c=r.Collection.extend({model:u,initialize:function(){this.Util=e("util"),this.appModel=new a,this.ready=i.Deferred(),this.listenTo(this.appModel,"change:projectId",this.update),this.appModel.get("projectId")&&this.update(),this.on("add",this.onAdd),this.on("remove",this.onRemove),this.on("change",this.onChange),this.on("resetColors",this.onResetColors)},update:function(){var e=this;return o.getDefectTypes(this.appModel.get("projectId")).done(function(t){e.reset(e.parse(t)),e.ready.resolve()})},getDefectType:function(e){var t=null,n=this.toJSON();return s.isEmpty(n)||(t=s.find(n,function(t){return t.locator===e})),t},getDefectByLocator:function(e){var t=this.where({locator:e});return t.length>=1?t[0]:null},getMainColorByType:function(e){var t=this.findWhere({typeRef:e.toUpperCase(),mainType:!0});return t?t.get("color"):this.Util.getDefaultColor(e)},checkForSubDefects:function(){return this.length>5},parse:function(e){var t=[];if(!e.subTypes)return t;for(var n in e.subTypes)s.each(e.subTypes[n],function(e,n){n==0&&(e.mainType=!0),t.push(e)});return t},onAdd:function(e){var t=e.toUpdateItem(),n=this;o.postDefectTypes(this.appModel.get("projectId"),t).done(function(r){var i=t.typeRef.toLowerCase()+":added";e.set({locator:r.id}),n.trigger(i,r),n.Util.ajaxSuccessMessenger(r.msg)}).error(function(e){n.update(),n.Util.ajaxFailMessenger(e)})},onRemove:function(e){o.deleteDefectType(this.appModel.get("projectId"),e.get("locator"))},onResetColors:function(){var e={},t=this,n=l.patterns.defectsLocator,r=[];s.each(this.models,function(t,i){var s=t.toUpdateItem();if(n.test(s.id)){e[s.typeRef.toLowerCase()]=s.color;return}if(s.color===e[s.typeRef.toLowerCase()])return;s.color=e[s.typeRef.toLowerCase()],r.push(s)},this),s.isEmpty(r)||i.when(this.updateDefectTypes(r)).done(function(){t.update()})},onChange:function(e){e.changed.locator||this.updateDefectTypes([e.toUpdateItem()])},updateDefectTypes:function(e){var t=this,n=i.Deferred();return o.putDefectType(this.appModel.get("projectId"),{ids:e}).done(function(e){t.Util.ajaxSuccessMessenger(e.msg)}).error(function(e){t.update(),t.Util.ajaxFailMessenger(e)}).always(function(){n.resolve()}),n}});return c}),define("defectType/SingletonDefectTypeCollection",["require","exports","module","defectType/DefectTypeCollection"],function(e,t,n){"use strict";var r=e("defectType/DefectTypeCollection"),i,s=function(){return i||(i=new r),i};return s}),function(e){typeof define=="function"&&define.amd?define("baron",["jquery"],e):typeof exports=="object"?e(require("jquery")):e(jQuery)}(function(e){(function(t,n){"use strict";function v(e){var r,i,s=!!e,o={$:t.jQuery,direction:"v",barOnCls:"_scrollbar",resizeDebounce:0,event:function(t,n,r,i){e.$(t)[i||"on"](n,r)},cssGuru:!1,impact:"scroller",position:"static"};e=e||{};for(var u in o)e[u]===n&&(e[u]=o[u]);e.$||h("error",["no jQuery nor params.$ detected","https://github.com/Diokuz/baron/blob/master/docs/logs/no-jquery-detected.md"].join(", "),e),e.position=="absolute"&&e.impact=="clipper"&&h("error",["Simultaneous use of `absolute` position and `clipper` impact values detected.","Those values cannot be used together.","See more https://github.com/Diokuz/baron/issues/138"].join(" "),e),r=e.$&&this instanceof e.$,e._chain?i=e.root:r?e.root=i=this:e.$?i=e.$(e.root||e.scroller):i=[];var a=new v.fn.constructor(i,e,s);return a.autoUpdate&&a.autoUpdate(),a}function m(e,r){var i=0;if(e.length===n||e===t)e=[e];while(e[i])r.call(this,e[i],i),i++}function g(){return(new Date).getTime()}function y(n,r,i){n._eventHandlers=n._eventHandlers||[{element:n.scroller,handler:function(e){n.scroll(e)},type:"scroll"},{element:n.root,handler:function(){n.update()},type:"transitionend animationend"},{element:n.scroller,handler:function(){n.update()},type:"keyup"},{element:n.bar,handler:function(t){t.preventDefault(),n.selection(),n.drag.now=1,n.draggingCls&&e(n.root).addClass(n.draggingCls)},type:"touchstart mousedown"},{element:document,handler:function(){n.selection(1),n.drag.now=0,n.draggingCls&&e(n.root).removeClass(n.draggingCls)},type:"mouseup blur touchend"},{element:document,handler:function(e){e.button!=2&&n._pos0(e)},type:"touchstart mousedown"},{element:document,handler:function(e){n.drag.now&&n.drag(e)},type:"mousemove touchmove"},{element:t,handler:function(){n.update()},type:"resize"},{element:n.root,handler:function(){n.update()},type:"sizeChange"},{element:n.clipper,handler:function(){n.clipperOnScroll()},type:"scroll"}],m(n._eventHandlers,function(e){e.element&&r(e.element,e.type,e.handler,i)})}function b(e,t,n,r){var i="data-baron-"+t+"-id";if(n=="on")e.setAttribute(i,r);else{if(n!="off")return e.getAttribute(i);e.removeAttribute(i)}}function w(e){var t=new T.prototype.constructor(e);return y(t,e.event,"on"),b(t.root,e.direction,"on",o.length),o.push(t),p++,p>100&&!d.liveTooMany&&(h("warn",["You have too many live baron instances on page ("+p+")!","Are you forget to dispose some of them?","All baron instances can be found in baron._instances:"].join(" "),o),d.liveTooMany=!0),o.length>1e3&&!d.allTooMany&&(h("warn",["You have too many inited baron instances on page ("+o.length+")!","Some of them are disposed, and thats good news.","but baron.init was call too many times, and thats is bad news.","All baron instances can be found in baron._instances:"].join(" "),o),d.allTooMany=!0),t.update(),t}function E(e){var t={};e=e||{};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function S(e){var t=E(e);return t.event=function(t,n,r,i){m(t,function(t){e.event(t,n,r,i)})},t}function x(e){if(this.events&&this.events[e])for(var t=0;t<this.events[e].length;t++){var n=Array.prototype.slice.call(arguments,1);this.events[e][t].apply(this,n)}}var r=typeof window!="undefined",i=v,s=["left","top","right","bottom","width","height"],o=[],u={v:{x:"Y",pos:s[1],oppos:s[3],crossPos:s[0],crossOpPos:s[2],size:s[5],crossSize:s[4],crossMinSize:"min-"+s[4],crossMaxSize:"max-"+s[4],client:"clientHeight",crossClient:"clientWidth",scrollEdge:"scrollLeft",offset:"offsetHeight",crossOffset:"offsetWidth",offsetPos:"offsetTop",scroll:"scrollTop",scrollSize:"scrollHeight"},h:{x:"X",pos:s[0],oppos:s[2],crossPos:s[1],crossOpPos:s[3],size:s[4],crossSize:s[5],crossMinSize:"min-"+s[5],crossMaxSize:"max-"+s[5],client:"clientWidth",crossClient:"clientHeight",scrollEdge:"scrollTop",offset:"offsetWidth",crossOffset:"offsetHeight",offsetPos:"offsetLeft",scroll:"scrollLeft",scrollSize:"scrollWidth"}},a=17,f=15,l=/[\s\S]*Macintosh[\s\S]*\) Gecko[\s\S]*/,c=l.test(t.navigator&&t.navigator.userAgent),h=function(){v.fn.log.apply(this,arguments)},p=0,d={liveTooMany:!1,allTooMany:!1};v._instances=o,v.fn={constructor:function(e,t,n){var r=E(t);r.event=function(e,n,r,i){m(e,function(e){t.event(e,n,r,i)})},this.length=0,m.call(this,e,function(e,i){var s=b(e,r.direction),u=+s;if(u==u&&s!==null&&o[u])n&&h("error",["repeated initialization for html-node detected","https://github.com/Diokuz/baron/blob/master/docs/logs/repeated.md"].join(", "),t.root),this[i]=o[u];else{var a=E(r);if(r.root&&r.scroller){a.scroller=r.$(r.scroller,e);if(!a.scroller.length){console.log("Scroller not found!",e,r.scroller);return}}else a.scroller=e;a.root=e,this[i]=w(a)}this.length=i+1}),this.params=r},dispose:function(){var e=this.params;m(this,function(t,n){t.dispose(e),o[n]=null}),this.params=null},update:function(){var e=arguments;m(this,function(t,n){t.update.apply(t,e)})},baron:function(e){return e.root=[],this.params.root&&(e.scroller=this.params.scroller),m.call(this,this,function(t){e.root.push(t.root)}),e.direction=this.params.direction=="v"?"h":"v",e._chain=!0,v(e)}};var T={};T.prototype={_debounce:function(e,t){var n=this,r,i,s=function(){if(n._disposed){clearTimeout(r),r=n=null;return}var o=g()-i;o<t&&o>=0?r=setTimeout(s,t-o):(r=null,e())};return function(){i=g(),r||(r=setTimeout(s,t))}},constructor:function(e){function m(e,t){return r(e,t)[0]}function y(e){var t=this.barMinSize||20;e>0&&e<t&&(e=t),this.bar&&r(this.bar).css(this.origin.size,parseInt(e,10)+"px")}function b(e){if(this.bar){var t=r(this.bar).css(this.origin.pos),n=+e+"px";n&&n!=t&&r(this.bar).css(this.origin.pos,n)}}function w(){return o[this.origin.client]-this.barTopLimit-this.bar[this.origin.offset]}function E(e){return e*w.call(this)+this.barTopLimit}function S(e){return(e-this.barTopLimit)/w.call(this)}function T(){return!1}var r,i,s,o,l,h,p,d,v;d=p=g(),r=this.$=e.$,this.event=e.event,this.events={},this.root=e.root,this.scroller=m(e.scroller),this.bar=m(e.bar,this.root),o=this.track=m(e.track,this.root),!this.track&&this.bar&&(o=this.bar.parentNode),this.clipper=this.scroller.parentNode,this.direction=e.direction,this.rtl=e.rtl,this.origin=u[this.direction],this.barOnCls=e.barOnCls,this.scrollingCls=e.scrollingCls,this.draggingCls=e.draggingCls,this.impact=e.impact,this.position=e.position,this.rtl=e.rtl,this.barTopLimit=0,this.resizeDebounce=e.resizeDebounce,this.cursor=function(e){return e["client"+this.origin.x]||(((e.originalEvent||e).touches||{})[0]||{})["page"+this.origin.x]},this.pos=function(e){var t="page"+this.origin.x+"Offset",r=this.scroller[t]?t:this.origin.scroll;return e!==n&&(this.scroller[r]=e),this.scroller[r]},this.rpos=function(e){var t=this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client],n;return e?n=this.pos(e*t):n=this.pos(),n/(t||1)},this.barOn=function(e){this.barOnCls&&(e||this.scroller[this.origin.client]>=this.scroller[this.origin.scrollSize]?r(this.root).hasClass(this.barOnCls)&&r(this.root).removeClass(this.barOnCls):r(this.root).hasClass(this.barOnCls)||r(this.root).addClass(this.barOnCls))},this._pos0=function(e){s=this.cursor(e)-i},this.drag=function(e){var t=S.call(this,this.cursor(e)-s),n=this.scroller[this.origin.scrollSize]-this.scroller[this.origin.client];this.scroller[this.origin.scroll]=t*n},this.selection=function(e){this.event(document,"selectpos selectstart",T,e?"off":"on")},this.resize=function(){function s(){var t=e.scroller[e.origin.crossOffset],n=e.scroller[e.origin.crossClient],i=0;c?i=f:n>0&&t===0&&(t=n+a);if(t){e.barOn();if(e.impact=="scroller"){var s=t-n+i;if(e.position=="static"){var o=e.$(e.scroller).css(e.origin.crossSize),u=e.clipper[e.origin.crossClient]+s+"px";o!=u&&e._setCrossSizes(e.scroller,u)}else{var l={},h=e.rtl?"Left":"Right";e.direction=="h"&&(h="Bottom"),l["padding"+h]=s+"px",e.$(e.scroller).css(l)}}else{var o=r(e.clipper).css(e.origin.crossSize),u=n+"px";o!=u&&e._setCrossSizes(e.clipper,u)}}Array.prototype.unshift.call(arguments,"resize"),x.apply(e,arguments),d=g()}var e=this,t=e.resizeDebounce===n?300:e.resizeDebounce,i=0;g()-d<t&&(clearTimeout(l),i=t),i?l=setTimeout(s,i):s()},this.updatePositions=function(){var e,t=this;t.bar&&(e=(o[t.origin.client]-t.barTopLimit)*t.scroller[t.origin.client]/t.scroller[t.origin.scrollSize],parseInt(v,10)!=parseInt(e,10)&&(y.call(t,e),v=e),i=E.call(t,t.rpos()),b.call(t,i)),Array.prototype.unshift.call(arguments,"scroll"),x.apply(t,arguments),p=g()},this.scroll=function(){var e=this;e.updatePositions(),e.scrollingCls&&(h||e.$(e.root).addClass(e.scrollingCls),clearTimeout(h),h=setTimeout(function(){e.$(e.root).removeClass(e.scrollingCls),h=n},300))},this.clipperOnScroll=function(){this.rtl?this.clipper[this.origin.scrollEdge]=this.clipper[this.origin.scrollSize]:this.clipper[this.origin.scrollEdge]=0},this._setCrossSizes=function(e,t){var n={};n[this.origin.crossSize]=t,n[this.origin.crossMinSize]=t,n[this.origin.crossMaxSize]=t},this._dumbCss=function(t){if(e.cssGuru)return;var n=t?"hidden":null,r=t?"none":null;this.$(this.clipper).css({overflow:n,msOverflowStyle:r,position:this.position=="static"?"":"relative"});var i=t?"scroll":null,s=this.direction=="v"?"y":"x",o={};o["overflow-"+s]=i,o["box-sizing"]="border-box",o.margin="0",o.border="0",this.position=="absolute"&&(o.position="absolute",o.top="0",this.direction=="h"?o.left=o.right="0":(o.bottom="0",o.right=this.rtl?"0":"",o.left=this.rtl?"":"0")),this.$(this.scroller).css(o)},this._dumbCss(!0);if(c){var N="paddingRight",C={},k=t.getComputedStyle(this.scroller)[[N]],L=this.scroller[this.origin.crossOffset]-this.scroller[this.origin.crossClient];e.direction=="h"?N="paddingBottom":e.rtl&&(N="paddingLeft");var A=parseInt(k,10);A!=A&&(A=0),C[N]=f+A+"px",r(this.scroller).css(C)}return this},update:function(e){return this._disposed&&h("error",["Update on disposed baron instance detected.","You should clear your stored baron value for this instance:",this].join(" "),e),x.call(this,"upd",e),this.resize(1),this.updatePositions(),this},dispose:function(e){this._disposed&&h("error",["Already disposed:",this].join(" "),e),y(this,this.event,"off"),b(this.root,e.direction,"off"),e.direction=="v"?this._setCrossSizes(this.scroller,""):this._setCrossSizes(this.clipper,""),this._dumbCss(!1),this.barOn(!0),x.call(this,"dispose"),this._disposed=!0},on:function(e,t,n){var r=e.split(" ");for(var i=0;i<r.length;i++)r[i]=="init"?t.call(this,n):(this.events[r[i]]=this.events[r[i]]||[],this.events[r[i]].push(function(e){t.call(this,e||n)}))}},v.fn.constructor.prototype=v.fn,T.prototype.constructor.prototype=T.prototype,v.noConflict=function(){return t.baron=i,v},v.version="2.2.4",typeof module!="undefined"?(module.exports=v,require("./fix"),require("./pull"),require("./controls"),require("./autoUpdate")):(window.baron=v,e&&e.fn&&(e.fn.baron=v))})(this),function(e,t){var n;typeof module!="undefined"?n=require("./core.js"):n=e.baron;var r=function(){n.fn.log.apply(this,arguments)},s=function(e){function d(e,r,i){var u=i==1?"pos":"oppos";s<(o.minView||0)&&(r=t),this.$(n[e]).css(this.origin.pos,"").css(this.origin.oppos,"").removeClass(o.outside),r!==t&&(r+="px",this.$(n[e]).css(this.origin[u],r).addClass(o.outside))}function v(e){try{i=document.createEvent("WheelEvent"),i.initWebKitWheelEvent(e.originalEvent.wheelDeltaX,e.originalEvent.wheelDeltaY),l.dispatchEvent(i),e.preventDefault()}catch(e){}}function m(e){var t;for(var r in e)o[r]=e[r];n=this.$(o.elements,this.scroller);if(n){s=this.scroller[this.origin.client];for(var i=0;i<n.length;i++){t={},t[this.origin.size]=n[i][this.origin.offset],n[i].parentNode!==this.scroller&&this.$(n[i].parentNode).css(t),t={},t[this.origin.crossSize]=n[i].parentNode[this.origin.crossClient],this.$(n[i]).css(t),s-=n[i][this.origin.offset],f[i]=n[i].parentNode[this.origin.offsetPos],u[i]=u[i-1]||0,a[i]=a[i-1]||Math.min(f[i],0),n[i-1]&&(u[i]+=n[i-1][this.origin.offset],a[i]+=n[i-1][this.origin.offset]);if(i!=0||f[i]!=0)this.event(n[i],"mousewheel",v,"off"),this.event(n[i],"mousewheel",v)}o.limiter&&n[0]&&(this.track&&this.track!=this.scroller?(t={},t[this.origin.pos]=n[0].parentNode[this.origin.offset],this.$(this.track).css(t)):this.barTopLimit=n[0].parentNode[this.origin.offset],this.scroll()),o.limiter===!1&&(this.barTopLimit=0)}var l={element:n,handler:function(){var e=h(this)[0].parentNode,t=e.offsetTop,r;for(var i=0;i<n.length;i++)n[i]===this&&(r=i);var s=t-u[r];o.scroll?o.scroll({x1:p.scroller.scrollTop,x2:s}):p.scroller.scrollTop=s},type:"click"};o.clickable&&(this._eventHandlers.push(l),c(l.element,l.type,l.handler,"on"))}var n,s,o={outside:"",inside:"",before:"",after:"",past:"",future:"",radius:0,minView:0},u=[],a=[],f=[],l=this.scroller,c=this.event,h=this.$,p=this;this.position!="static"&&r("error",["Fix plugin cannot work properly in non-static baron position.","See more https://github.com/Diokuz/baron/issues/135"].join(" "),this.params),this.on("init",m,e);var g=[],y=[];this.on("init scroll",function(){var e,r,i;if(n){var l;for(var c=0;c<n.length;c++){e=0,f[c]-this.pos()<a[c]+o.radius?(e=1,r=u[c]):f[c]-this.pos()>a[c]+s-o.radius?(e=2,r=this.scroller[this.origin.client]-n[c][this.origin.offset]-u[c]-s):(e=3,r=t),i=!1;if(f[c]-this.pos()<a[c]||f[c]-this.pos()>a[c]+s)i=!0;if(e!=g[c]||i!=y[c])d.call(this,c,r,e),g[c]=e,y[c]=i,l=!0}if(l)for(c=0;c<n.length;c++)g[c]==1&&o.past&&this.$(n[c]).addClass(o.past).removeClass(o.future),g[c]==2&&o.future&&this.$(n[c]).addClass(o.future).removeClass(o.past),g[c]==3?((o.future||o.past)&&this.$(n[c]).removeClass(o.past).removeClass(o.future),o.inside&&this.$(n[c]).addClass(o.inside)):o.inside&&this.$(n[c]).removeClass(o.inside),g[c]!=g[c+1]&&g[c]==1&&o.before?this.$(n[c]).addClass(o.before).removeClass(o.after):g[c]!=g[c-1]&&g[c]==2&&o.after?this.$(n[c]).addClass(o.after).removeClass(o.before):this.$(n[c]).removeClass(o.before).removeClass(o.after),o.grad&&(y[c]?this.$(n[c]).addClass(o.grad):this.$(n[c]).removeClass(o.grad))}}),this.on("resize upd",function(e){m.call(this,e&&e.fix)})};n.fn.fix=function(e){var t=0;while(this[t])s.call(this[t],e),t++;return this}}(this),function(e){var t;typeof module!="undefined"?t=require("./core"):t=e.baron;var n=e.MutationObserver||e.WebKitMutationObserver||e.MozMutationObserver||null,r=function(){function r(){e.root[e.origin.offset]?s():i()}function i(){if(t)return;t=setInterval(function(){e.root[e.origin.offset]&&(s(),e.update())},300)}function s(){clearInterval(t),t=null}var e=this,t;if(this._au)return;var o=e._debounce(function(){e.update()},300);this._observer=new n(function(){r(),e.update(),o()}),this.on("init",function(){e._observer.observe(e.root,{childList:!0,subtree:!0,characterData:!0}),r()}),this.on("dispose",function(){e._observer.disconnect(),s(),delete e._observer}),this._au=!0};t.fn.autoUpdate=function(e){if(!n)return this;var t=0;while(this[t])r.call(this[t],e),t++;return this}}(this),function(e,t){var n;typeof module!="undefined"?n=require("./core"):n=e.baron;var r=function(e){var t,n,r,i,s=this,o;i=e.screen||.9,e.forward&&(t=this.$(e.forward,this.clipper),o={element:t,handler:function(){var t=s.pos()+(e.delta||30);s.pos(t)},type:"click"},this._eventHandlers.push(o),this.event(o.element,o.type,o.handler,"on")),e.backward&&(n=this.$(e.backward,this.clipper),o={element:n,handler:function(){var t=s.pos()-(e.delta||30);s.pos(t)},type:"click"},this._eventHandlers.push(o),this.event(o.element,o.type,o.handler,"on")),e.track&&(e.track===!0?r=this.track:r=this.$(e.track,this.clipper)[0],r&&(o={element:r,handler:function(e){if(e.target!=r)return;var t=e["offset"+s.origin.x],n=s.bar[s.origin.offsetPos],o=0;t<n?o=-1:t>n+s.bar[s.origin.offset]&&(o=1);var u=s.pos()+o*i*s.scroller[s.origin.client];s.pos(u)},type:"mousedown"},this._eventHandlers.push(o),this.event(o.element,o.type,o.handler,"on")))};n.fn.controls=function(e){var t=0;while(this[t])r.call(this[t],e),t++;return this}}(this)}),function(e){typeof define=="function"&&define.amd?define("cookie",["jquery"],e):typeof exports=="object"?e(require("jquery")):e(jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function r(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function s(e){e.indexOf('"')===0&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),u.json?JSON.parse(e):e}catch(n){}}function o(t,n){var r=u.raw?t:s(t);return e.isFunction(n)?n(r):r}var t=/\+/g,u=e.cookie=function(t,s,a){if(s!==undefined&&!e.isFunction(s)){a=e.extend({},u.defaults,a);if(typeof a.expires=="number"){var f=a.expires,l=a.expires=new Date;l.setTime(+l+f*864e5)}return document.cookie=[n(t),"=",i(s),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}var c=t?undefined:{},h=document.cookie?document.cookie.split("; "):[];for(var p=0,d=h.length;p<d;p++){var v=h[p].split("="),m=r(v.shift()),g=v.join("=");if(t&&t===m){c=o(g,s);break}!t&&(g=o(g))!==undefined&&(c[m]=g)}return c};u.defaults={},e.removeCookie=function(t,n){return e.cookie(t)===undefined?!1:(e.cookie(t,"",e.extend({},n,{expires:-1})),!e.cookie(t))}}),function(e){typeof define=="function"&&define.amd?define("jqueryUI",["jquery"],e):e(jQuery)}(function(e){function T(e){var t,n;while(e.length&&e[0]!==document){t=e.css("position");if(t==="absolute"||t==="relative"||t==="fixed"){n=parseInt(e.css("zIndex"),10);if(!isNaN(n)&&n!==0)return n}e=e.parent()}return 0}function N(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=C(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function C(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",n,function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",n,k)}function k(){e.datepicker._isDisabledDatepicker(x.inline?x.dpDiv.parent()[0]:x.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))}function L(t,n){e.extend(t,n);for(var r in n)n[r]==null&&(t[r]=n[r]);return t}e.ui=e.ui||{};var t=e.ui.version="1.12.1",n=0,r=Array.prototype.slice;e.cleanData=function(t){return function(n){var r,i,s;for(s=0;(i=n[s])!=null;s++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,s,o,u={},a=t.split(".")[0];t=t.split(".")[1];var f=a+"-"+t;return r||(r=n,n=e.Widget),e.isArray(r)&&(r=e.extend.apply(null,[{}].concat(r))),e.expr[":"][f.toLowerCase()]=function(t){return!!e.data(t,f)},e[a]=e[a]||{},i=e[a][t],s=e[a][t]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},e.extend(s,i,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),o=new n,o.options=e.widget.extend({},o.options),e.each(r,function(t,r){if(!e.isFunction(r)){u[t]=r;return}u[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function i(e){return n.prototype[t].apply(this,e)}return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),s.prototype=e.widget.extend(o,{widgetEventPrefix:i?o.widgetEventPrefix||t:t},u,{constructor:s,namespace:a,widgetName:t,widgetFullName:f}),i?(e.each(i._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,s,n._proto)}),delete i._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){var n=r.call(arguments,1),i=0,s=n.length,o,u;for(;i<s;i++)for(o in n[i])u=n[i][o],n[i].hasOwnProperty(o)&&u!==undefined&&(e.isPlainObject(u)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],u):e.widget.extend({},u):t[o]=u);return t},e.widget.bridge=function(t,n){var i=n.prototype.widgetFullName||t;e.fn[t]=function(s){var o=typeof s=="string",u=r.call(arguments,1),a=this;return o?!this.length&&s==="instance"?a=undefined:this.each(function(){var n,r=e.data(this,i);if(s==="instance")return a=r,!1;if(!r)return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+s+"'");if(!e.isFunction(r[s])||s.charAt(0)==="_")return e.error("no such method '"+s+"' for "+t+" widget instance");n=r[s].apply(r,u);if(n!==r&&n!==undefined)return a=n&&n.jquery?a.pushStack(n.get()):n,!1}):(u.length&&(s=e.widget.extend.apply(null,[s].concat(u))),this.each(function(){var t=e.data(this,i);t?(t.option(s||{}),t._init&&t._init()):e.data(this,i,new n(s,this))})),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r=t,i,s,o;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof t=="string"){r={},i=t.split("."),t=i.shift();if(i.length){s=r[t]=e.widget.extend({},this.options[t]);for(o=0;o<i.length-1;o++)s[i[o]]=s[i[o]]||{},s=s[i[o]];t=i.pop();if(arguments.length===1)return s[t]===undefined?null:s[t];s[t]=n}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];r[t]=n}}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return e==="classes"&&this._setOptionClasses(t),this.options[e]=t,e==="disabled"&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,r,i;for(n in t){i=this.classesElementLookup[n];if(t[n]===this.options.classes[n]||!i||!i.length)continue;r=e(i.get()),this._removeClass(i,n),r.addClass(this._classes({element:r,keys:n,classes:t,add:!0}))}},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function i(i,s){var o,u;for(u=0;u<i.length;u++)o=r.classesElementLookup[i[u]]||e(),t.add?o=e(e.unique(o.get().concat(t.element.get()))):o=e(o.not(t.element).get()),r.classesElementLookup[i[u]]=o,n.push(i[u]),s&&t.classes[i[u]]&&n.push(t.classes[i[u]])}var n=[],r=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&i(t.keys.match(/\S+/g)||[],!0),t.extra&&i(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(r,i){e.inArray(t.target,i)!==-1&&(n.classesElementLookup[r]=e(i.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,r){r=typeof r=="boolean"?r:n;var i=typeof e=="string"||e===null,s={extra:i?t:n,keys:i?e:t,element:i?this.element:e,add:r};return s.element.toggleClass(this._classes(s),r),this},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^([\w:-]*)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.on(f,l,u):n.on(f,u)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}});var i=e.widget;(function(){function l(e,t,n){return[parseFloat(e[0])*(a.test(e[0])?t/100:1),parseFloat(e[1])*(a.test(e[1])?n/100:1)]}function c(t,n){return parseInt(e.css(t,n),10)||0}function h(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var t,n=Math.max,r=Math.abs,i=/left|center|right/,s=/top|center|bottom/,o=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,a=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(t!==undefined)return t;var n,r,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=i.children()[0];return e("body").append(i),n=s.offsetWidth,i.css("overflow","scroll"),r=s.offsetWidth,n===r&&(r=i[0].clientWidth),i.remove(),t=n-r},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]),i=!!n[0]&&n[0].nodeType===9,s=!r&&!i;return{element:n,isWindow:r,isDocument:i,offset:s?e(t).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var a,p,d,v,m,g,y=e(t.of),b=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(b),E=(t.collision||"flip").split(" "),S={};return g=h(y),y[0].preventDefault&&(t.at="left top"),p=g.width,d=g.height,v=g.offset,m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=i.test(e[0])?e.concat(["center"]):s.test(e[0])?["center"].concat(e):["center","center"]),e[0]=i.test(e[0])?e[0]:"center",e[1]=s.test(e[1])?e[1]:"center",n=o.exec(e[0]),r=o.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[u.exec(e[0])[0],u.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=p:t.at[0]==="center"&&(m.left+=p/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),a=l(S.at,p,d),m.left+=a[0],m.top+=a[1],this.each(function(){var i,s,o=e(this),u=o.outerWidth(),f=o.outerHeight(),h=c(this,"marginLeft"),g=c(this,"marginTop"),x=u+h+c(this,"marginRight")+w.width,T=f+g+c(this,"marginBottom")+w.height,N=e.extend({},m),C=l(S.my,o.outerWidth(),o.outerHeight());t.my[0]==="right"?N.left-=u:t.my[0]==="center"&&(N.left-=u/2),t.my[1]==="bottom"?N.top-=f:t.my[1]==="center"&&(N.top-=f/2),N.left+=C[0],N.top+=C[1],i={marginLeft:h,marginTop:g},e.each(["left","top"],function(n,r){e.ui.position[E[n]]&&e.ui.position[E[n]][r](N,{targetWidth:p,targetHeight:d,elemWidth:u,elemHeight:f,collisionPosition:i,collisionWidth:x,collisionHeight:T,offset:[a[0]+C[0],a[1]+C[1]],my:t.my,at:t.at,within:b,elem:o})}),t.using&&(s=function(e){var i=v.left-N.left,s=i+p-u,a=v.top-N.top,l=a+d-f,c={target:{element:y,left:v.left,top:v.top,width:p,height:d},element:{element:o,left:N.left,top:N.top,width:u,height:f},horizontal:s<0?"left":i>0?"right":"center",vertical:l<0?"top":a>0?"bottom":"middle"};p<u&&r(i+s)<p&&(c.horizontal="center"),d<f&&r(a+l)<d&&(c.vertical="middle"),n(r(i),r(s))>n(r(a),r(l))?c.important="horizontal":c.important="vertical",t.using.call(this,e,c)}),o.offset(e.extend(N,{using:s}))})},e.ui.position={fit:{left:function(e,t){var r=t.within,i=r.isWindow?r.scrollLeft:r.offset.left,s=r.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=n(e.left-o,e.left)},top:function(e,t){var r=t.within,i=r.isWindow?r.scrollTop:r.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=n(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,i=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-i;if(p<0||p<r(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||r(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,i=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;if(a<0){v=e.top+c+h+p+t.collisionHeight-s-i;if(v<0||v<r(a))e.top+=c+h+p}else if(f>0){d=e.top-t.collisionPosition.marginTop+c+h+p-o;if(d>0||r(d)<f)e.top+=c+h+p}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}})();var s=e.ui.position,o=e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])}}),u=e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}}),a=e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},f=e.fn.scrollParent=function(t){var n=this.css("position"),r=n==="absolute",i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return r&&t.css("position")==="static"?!1:i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return n==="fixed"||!s.length?e(this[0].ownerDocument||document):s},l=e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}}),c=e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),h=!1;e(document).on("mouseup",function(){h=!1});var p=e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(h)return;this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var n=this,r=t.which===1,i=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!r||i||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),h=!0,!0},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}if(t.which||t.button)this._mouseMoved=!0;return this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,h=!1,t.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),d=e.ui.plugin={add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,s=e.plugins[t];if(!s)return;if(!r&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11))return;for(i=0;i<s.length;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}},v=e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t},m=e.ui.safeBlur=function(t){t&&t.nodeName.toLowerCase()!=="body"&&e(t).trigger("blur")};e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),e==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=!0;return}this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blurActiveElement(t),this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]),r=e(t.target);if(r.closest(n).length)return;e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return e(this).css("position")==="fixed"}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!r||this.options.revert==="valid"&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper),i=r?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]!==this.element[0]&&!/(fixed|absolute)/.test(i.css("position"))&&i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options,s=this.document[0];this.relativeContainer=null;if(!i.containment){this.containment=null;return}if(i.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment==="document"){this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment.constructor===Array){this.containment=i.containment;return}i.containment==="parent"&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0];if(!r)return;t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n},_convertPositionTo:function(e,t){t||(t=this.position);var n=e==="absolute"?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-(this.cssPosition==="fixed"?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-(this.cssPosition==="fixed"?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,r,i,s,o=this.options,u=this._isRootNode(this.scrollParent[0]),a=e.pageX,f=e.pageY;if(!u||!this.offset.scroll)this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()};return t&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(f=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(f=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,f=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,a=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s),o.axis==="y"&&(a=this.originalPageX),o.axis==="x"&&(f=this.originalPageY)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:u?0:this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:u?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,r){var i=e.extend({},n,{item:r.element});r.sortables=[],e(r.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(r.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,i))})},stop:function(t,n,r){var i=e.extend({},n,{item:r.element});r.cancelHelperRemoval=!1,e.each(r.sortables,function(){var e=this;e.isOver?(e.isOver=0,r.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(t,n,r){e.each(r.sortables,function(){var i=!1,s=this;s.positionAbs=r.positionAbs,s.helperProportions=r.helperProportions,s.offset.click=r.offset.click,s._intersectsWith(s.containerCache)&&(i=!0,e.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(i=!1),i})),i?(s.isOver||(s.isOver=1,r._parent=n.helper.parent(),s.currentItem=n.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return n.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=r.offset.click.top,s.offset.click.left=r.offset.click.left,s.offset.parent.left-=r.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=r.offset.parent.top-s.offset.parent.top,r._trigger("toSortable",t),r.dropped=s.element,e.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,s.fromOutside=r),s.currentItem&&(s._mouseDrag(t),n.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),n.helper.appendTo(r._parent),r._refreshOffsets(t),n.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,e.each(r.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,r){var i=e("body"),s=r.options;i.css("cursor")&&(s._cursor=i.css("cursor")),i.css("cursor",s.cursor)},stop:function(t,n,r){var i=r.options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("opacity")&&(s._opacity=i.css("opacity")),i.css("opacity",s.opacity)},stop:function(t,n,r){var i=r.options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&n.scrollParentNotHidden[0].tagName!=="HTML"&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,r){var i=r.options,s=!1,o=r.scrollParentNotHidden[0],u=r.document[0];if(o!==u&&o.tagName!=="HTML"){if(!i.axis||i.axis!=="x")r.overflowOffset.top+o.offsetHeight-t.pageY<i.scrollSensitivity?o.scrollTop=s=o.scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-i.scrollSpeed);if(!i.axis||i.axis!=="y")r.overflowOffset.left+o.offsetWidth-t.pageX<i.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!=="x")t.pageY-e(u).scrollTop()<i.scrollSensitivity?s=e(u).scrollTop(e(u).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(u).scrollTop())<i.scrollSensitivity&&(s=e(u).scrollTop(e(u).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!=="y")t.pageX-e(u).scrollLeft()<i.scrollSensitivity?s=e(u).scrollLeft(e(u).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(u).scrollLeft())<i.scrollSensitivity&&(s=e(u).scrollLeft(e(u).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,r){var i=r.options;r.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,r){var i,s,o,u,a,f,l,c,h,p,d=r.options,v=d.snapTolerance,m=n.offset.left,g=m+r.helperProportions.width,y=n.offset.top,b=y+r.helperProportions.height;for(h=r.snapElements.length-1;h>=0;h--){a=r.snapElements[h].left-r.margins.left,f=a+r.snapElements[h].width,l=r.snapElements[h].top-r.margins.top,c=l+r.snapElements[h].height;if(g<a-v||m>f+v||b<l-v||y>c+v||!e.contains(r.snapElements[h].item.ownerDocument,r.snapElements[h].item)){r.snapElements[h].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=!1;continue}d.snapMode!=="inner"&&(i=Math.abs(l-b)<=v,s=Math.abs(c-y)<=v,o=Math.abs(a-g)<=v,u=Math.abs(f-m)<=v,i&&(n.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f}).left)),p=i||s||o||u,d.snapMode!=="outer"&&(i=Math.abs(l-y)<=v,s=Math.abs(c-b)<=v,o=Math.abs(a-m)<=v,u=Math.abs(f-g)<=v,i&&(n.position.top=r._convertPositionTo("relative",{top:l,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c-r.helperProportions.height,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f-r.helperProportions.width}).left)),!r.snapElements[h].snapping&&(i||s||o||u||p)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=i||s||o||u||p}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,r){var i,s=r.options,o=e.makeArray(e(s.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!o.length)return;i=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",i+t)}),this.css("zIndex",i+o.length)}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("zIndex")&&(s._zIndex=i.css("zIndex")),i.css("zIndex",s.zIndex)},stop:function(t,n,r){var i=r.options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}});var g=e.ui.draggable;e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,r=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(r)?r:function(e){return e.is(r)},this.proportions=function(){if(!arguments.length)return t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};t=arguments[0]},this._addToManager(n.scope),n.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){var t=0;for(;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,n){if(t==="accept")this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if(t==="scope"){var r=e.ui.ddmanager.droppables[this.options.scope];this._splice(r),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this._addActiveClass(),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this._removeActiveClass(),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=e(this).droppable("instance");if(n.options.greedy&&!n.options.disabled&&n.options.scope===r.options.scope&&n.accept.call(n.element[0],r.currentItem||r.element)&&y(r,e.extend(n,{offset:n.element.offset()}),n.options.tolerance,t))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var y=e.ui.intersect=function(){function e(e,t,n){return e>=t&&e<t+n}return function(t,n,r,i){if(!n.offset)return!1;var s=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,u=s+t.helperProportions.width,a=o+t.helperProportions.height,f=n.offset.left,l=n.offset.top,c=f+n.proportions().width,h=l+n.proportions().height;switch(r){case"fit":return f<=s&&u<=c&&l<=o&&a<=h;case"intersect":return f<s+t.helperProportions.width/2&&u-t.helperProportions.width/2<c&&l<o+t.helperProportions.height/2&&a-t.helperProportions.height/2<h;case"pointer":return e(i.pageY,l,n.proportions().height)&&e(i.pageX,f,n.proportions().width);case"touch":return(o>=l&&o<=h||a>=l&&a<=h||o<l&&a>h)&&(s>=f&&s<=c||u>=f&&u<=c||s<f&&u>c);default:return!1}}}();e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions().height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions({width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight})}},drop:function(t,n){var r=!1;return e.each((e.ui.ddmanager.droppables[t.options.scope]||[]).slice(),function(){if(!this.options)return;!this.options.disabled&&this.visible&&y(t,this,this.options.tolerance,n)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r,i,s,o=y(t,this,this.options.tolerance,n),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!u)return;this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===i}),s.length&&(r=e(s[0]).droppable("instance"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,n),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,n))})},dragStop:function(t,n){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}},e.uiBackCompat!==!1&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}});var b=e.ui.droppable;e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},_create:function(){var t,n=this.options,r=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",function(){if(n.disabled)return;r._removeClass("ui-resizable-autohide"),r._handles.show()}).on("mouseleave",function(){if(n.disabled)return;r.resizing||(r._addClass("ui-resizable-autohide"),r._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){this._super(e,t);switch(e){case"handles":this._removeHandles(),this._setupHandles();break;default:}},_setupHandles:function(){var t=this.options,n,r,i,s,o,u=this;this.handles=t.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e();if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={};for(r=0;r<i.length;r++)n=e.trim(i[r]),s="ui-resizable-"+n,o=e("<div>"),this._addClass(o,"ui-resizable-handle "+s),o.css({zIndex:t.zIndex}),this.handles[n]=".ui-resizable-"+n,this.element.append(o)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){if(this.handles[n].constructor===String)this.handles[n]=this.element.children(this.handles[n]).first().show();else if(this.handles[n].jquery||this.handles[n].nodeType)this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:u._mouseDown});this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])}},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){u.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),u.axis=o&&o[1]?o[1]:"se")}),t.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var n,r,i,s=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),r=this._num(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,r+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:n,top:r},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof s.aspectRatio=="number"?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",i==="auto"?this.axis+"-resize":i),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r,i=this.originalMousePosition,s=this.axis,o=t.pageX-i.left||0,u=t.pageY-i.top||0,a=this._change[s];this._updatePrevProperties();if(!a)return!1;n=a.apply(this,[t,o,u]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&this._hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseFloat(l.element.css("left"))+(l.position.left-l.originalPosition.left)||null,a=parseFloat(l.element.css("top"))+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,r,i,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||e)t=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,i=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),r>s.minHeight&&(s.minHeight=r),n<s.maxWidth&&(s.maxWidth=n),i<s.maxHeight&&(s.maxHeight=i);this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),r==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),r==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,u=this.originalPosition.left+this.originalSize.width,a=this.originalPosition.top+this.originalSize.height,f=/sw|nw|w/.test(n),l=/nw|ne|n/.test(n);return s&&(e.width=t.minWidth),o&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),s&&f&&(e.left=u-t.minWidth),r&&f&&(e.left=u-t.maxWidth),o&&l&&(e.top=a-t.minHeight),i&&l&&(e.top=a-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_getPaddingPlusBorderDimensions:function(e){var t=0,n=[],r=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];for(;t<4;t++)n[t]=parseFloat(r[t])||0,n[t]+=parseFloat(i[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t=0,n=this.helper||this.element;for(;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,l=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,i,s,o,u,a=e(this).resizable("instance"),f=a.options,l=a.element,c=f.containment,h=c instanceof e?c.get(0):/parent/.test(c)?l.parent().get(0):c;if(!h)return;a.containerElement=e(h),/document/.test(c)||c===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=a._num(t.css("padding"+r))}),a.containerOffset=t.offset(),a.containerPosition=t.position(),a.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=a.containerOffset,i=a.containerSize.height,s=a.containerSize.width,o=a._hasScroll(h,"left")?h.scrollWidth:s,u=a._hasScroll(h)?h.scrollHeight:i,a.parentData={element:h,left:r.left,top:r.top,width:o,height:u})},resize:function(t){var n,r,i,s,o=e(this).resizable("instance"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?a.top:0),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),n=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-c.left:o.offset.left-a.left)),r=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-c.top:o.offset.top-a.top)),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var r=e(this).resizable("instance"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0};e(i.alsoResize).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),i={},s=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var n=(r[t]||0)+(u[t]||0);n&&n>=0&&(i[t]=n||null)}),t.css(i)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),e.uiBackCompat!==!1&&typeof t.options.ghost=="string"&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),r=n.options,i=n.size,s=n.originalSize,o=n.originalPosition,u=n.axis,a=typeof r.grid=="number"?[r.grid,r.grid]:r.grid,f=a[0]||1,l=a[1]||1,c=Math.round((i.width-s.width)/f)*f,h=Math.round((i.height-s.height)/l)*l,p=s.width+c,d=s.height+h,v=r.maxWidth&&r.maxWidth<p,m=r.maxHeight&&r.maxHeight<d,g=r.minWidth&&r.minWidth>p,y=r.minHeight&&r.minHeight>d;r.grid=a,g&&(p+=f),y&&(d+=l),v&&(p-=f),m&&(d-=l);if(/^(se|s|e)$/.test(u))n.size.width=p,n.size.height=d;else if(/^(ne)$/.test(u))n.size.width=p,n.size.height=d,n.position.top=o.top-h;else if(/^(sw)$/.test(u))n.size.width=p,n.size.height=d,n.position.left=o.left-c;else{if(d-l<=0||p-f<=0)t=n._getPaddingPlusBorderDimensions(this);d-l>0?(n.size.height=d,n.position.top=o.top-h):(d=l-t.height,n.size.height=d,n.position.top=o.top+s.height-d),p-f>0?(n.size.width=p,n.position.left=o.left-c):(p=f-t.width,n.size.width=p,n.position.left=o.left+s.width-p)}}});var w=e.ui.resizable,E=e.widget("ui.selectable",e.ui.mouse,{version:"1.12.1",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t=this;this._addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t.elementPos=e(t.element[0]).offset(),t.selectees=e(t.options.filter,t.element[0]),t._addClass(t.selectees,"ui-selectee"),t.selectees.each(function(){var n=e(this),r=n.offset(),i={left:r.left-t.elementPos.left,top:r.top-t.elementPos.top};e.data(this,"selectable-item",{element:this,$element:n,left:i.left,top:i.top,right:i.left+n.outerWidth(),bottom:i.top+n.outerHeight(),startselected:!1,selected:n.hasClass("ui-selected"),selecting:n.hasClass("ui-selecting"),unselecting:n.hasClass("ui-unselecting")})})},this.refresh(),this._mouseInit(),this.helper=e("<div>"),this._addClass(this.helper,"ui-selectable-helper")},_destroy:function(){this.selectees.removeData("selectable-item"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY],this.elementPos=e(this.element[0]).offset();if(this.options.disabled)return;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(n._removeClass(r.$element,"ui-selected"),r.selected=!1,n._addClass(r.$element,"ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");if(i)return r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),n._removeClass(i.$element,r?"ui-unselecting":"ui-selected")._addClass(i.$element,r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1})},_mouseDrag:function(t){this.dragged=!0;if(this.options.disabled)return;var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1,l={};if(!n||n.element===r.element[0])return;l.left=n.left+r.elementPos.left,l.right=n.right+r.elementPos.left,l.top=n.top+r.elementPos.top,l.bottom=n.bottom+r.elementPos.top,i.tolerance==="touch"?f=!(l.left>u||l.right<s||l.top>a||l.bottom<o):i.tolerance==="fit"&&(f=l.left>s&&l.right<u&&l.top>o&&l.bottom<a),f?(n.selected&&(r._removeClass(n.$element,"ui-selected"),n.selected=!1),n.unselecting&&(r._removeClass(n.$element,"ui-unselecting"),n.unselecting=!1),n.selecting||(r._addClass(n.$element,"ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(r._removeClass(n.$element,"ui-selecting"),n.selecting=!1,r._addClass(n.$element,"ui-selected"),n.selected=!0):(r._removeClass(n.$element,"ui-selecting"),n.selecting=!1,n.startselected&&(r._addClass(n.$element,"ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected&&(r._removeClass(n.$element,"ui-selected"),n.selected=!1,r._addClass(n.$element,"ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))}),!1},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");n._removeClass(r.$element,"ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");n._removeClass(r.$element,"ui-selecting")._addClass(r.$element,"ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),S=e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,n){return e>=t&&e<t+n},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),e==="handle"&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,n){var r=null,i=!1,s=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return r=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)});if(!i)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i,s,o=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,o.cursorAt&&this._adjustOffsetFromHelper(o.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),o.containment&&this._setContainment(),o.cursor&&o.cursor!=="auto"&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",o.cursor),this.storedStylesheet=e("<style>*{ cursor: "+o.cursor+" !important; }</style>").appendTo(s)),o.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",o.opacity)),o.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",o.zIndex)),this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-this.document.scrollTop()<o.scrollSensitivity?u=this.document.scrollTop(this.document.scrollTop()-o.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<o.scrollSensitivity&&(u=this.document.scrollTop(this.document.scrollTop()+o.scrollSpeed)),t.pageX-this.document.scrollLeft()<o.scrollSensitivity?u=this.document.scrollLeft(this.document.scrollLeft()-o.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<o.scrollSensitivity&&(u=this.document.scrollLeft(this.document.scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(n=this.items.length-1;n>=0;n--){r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r);if(!s)continue;if(r.instance!==this.currentContainer)continue;if(i!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],i):!0)){this.direction=s===1?"down":"up";if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset(),s=this.options.axis,o={};if(!s||s==="x")o.left=i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft);if(!s||s==="y")o.top=i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop);this.reverting=!0,e(this.helper).animate(o,parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),this.options.helper==="original"?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=this.options.axis==="x"||r+f>u&&r+f<a,h=this.options.axis==="y"||t+l>s&&t+l<o,p=c&&h;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t,n,r=this.options.axis==="x"||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),i=this.options.axis==="y"||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),s=r&&i;return s?(t=this._getDragVerticalDirection(),n=this._getDragHorizontalDirection(),this.floating?n==="right"||t==="down"?2:1:t&&(t==="down"?2:1)):!1},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),r=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection();return this.floating&&i?i==="right"&&n||i==="left"&&!n:r&&(r==="down"&&t||r==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){function f(){o.push(this)}var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--){i=e(a[n],this.document[0]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=u.length-1;n>=0;n--)u[n][0].each(f);return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--){i=e(h[n],this.document[0]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s))}for(n=c.length-1;n>=0;n--){o=c[n][1],u=c[n][0];for(r=0,f=u.length;r<f;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.floating=this.items.length?this.options.axis==="x"||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--){r=this.items[n];if(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])continue;i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String)n=r.placeholder,r.placeholder={element:function(){var r=t.currentItem[0].nodeName.toLowerCase(),i=e("<"+r+">",t.document[0]);return t._addClass(i,"ui-sortable-placeholder",n||t.currentItem[0].className)._removeClass(i,"ui-sortable-helper"),r==="tbody"?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(i)):r==="tr"?t._createTrPlaceholder(t.currentItem,i):r==="img"&&i.attr("src",t.currentItem.attr("src")),n||i.css("visibility","hidden"),i},update:function(e,i){if(n&&!r.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}};t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,n){var r=this;t.children().each(function(){e("<td>&#160;</td>",r.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c,h=null,p=null;for(n=this.containers.length-1;n>=0;n--){if(e.contains(this.currentItem[0],this.containers[n].element[0]))continue;if(this._intersectsWith(this.containers[n].containerCache)){if(h&&e.contains(this.containers[n].element[0],h.element[0]))continue;h=this.containers[n],p=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0)}if(!h)return;if(this.containers.length===1)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{i=1e4,s=null,l=h.floating||this._isFloating(this.currentItem),o=l?"left":"top",u=l?"width":"height",c=l?"pageX":"pageY";for(r=this.items.length-1;r>=0;r--){if(!e.contains(this.containers[p].element[0],this.items[r].item[0]))continue;if(this.items[r].item[0]===this.currentItem[0])continue;a=this.items[r].item.offset()[o],f=!1,t[c]-a>this.items[r][u]/2&&(f=!0),Math.abs(t[c]-a)<i&&(i=Math.abs(t[c]-a),s=this.items[r],this.direction=f?"up":"down")}if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p]){this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1);return}s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,i.containment==="document"?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,(i.containment==="document"?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==this.document[0]&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==this.document[0]&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return this.cssPosition==="relative"&&(this.scrollParent[0]===this.document[0]||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(e,t){function i(e,t,n){return function(r){n._trigger(e,r,t._uiHash(t))}}this.reverting=!1;var n,r=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(n in this._storedCSS)if(this._storedCSS[n]==="auto"||this._storedCSS[n]==="static")this._storedCSS[n]="";this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!t&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!t&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(n=this.containers.length-1;n>=0;n--)t||r.push(i("deactivate",this,this.containers[n])),this.containers[n].containerCache.over&&(r.push(i("out",this,this.containers[n])),this.containers[n].containerCache.over=0);this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null);if(!t){for(n=0;n<r.length;n++)r[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}});e.extend(e.ui,{datepicker:{version:"1.12.1"}});var x;e.extend(N.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return L(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i=r==="div"||r==="span",t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),r==="input"?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?C(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,n){var r=e(t);n.append=e([]),n.trigger=e([]);if(r.hasClass(this.markerClassName))return;this._attachments(r,n),r.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(n),e.data(t,"datepicker",n),n.settings.disabled&&this._disableDatepicker(t)},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.off("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),(r==="focus"||r==="both")&&t.on("focus",this._showDatepicker);if(r==="button"||r==="both")i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.on("click",function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){n=0,r=0;for(i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,n){var r=e(t);if(r.hasClass(this.markerClassName))return;r.addClass(this.markerClassName).append(n.dpDiv),e.data(t,"datepicker",n),this._setDate(n,this._getDefaultDate(n),!0),this._updateDatepicker(n),this._updateAlternate(n),n.settings.disabled&&this._disableDatepicker(t),n.dpDiv.css("display","block")},_dialogDatepicker:function(t,n,r,i,s){var o,u,a,f,l,c=this._dialogInst;return c||(this.uuid+=1,o="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+o+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),e("body").append(this._dialogInput),c=this._dialogInst=this._newInst(this._dialogInput,!1),c.settings={},e.data(this._dialogInput[0],"datepicker",c)),L(c.settings,i||{}),n=n&&n.constructor===Date?this._formatDate(c,n):n,this._dialogInput.val(n),this._pos=s?s.length?s:[s.pageX,s.pageY]:null,this._pos||(u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[u/2-100+f,a/2-150+l]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),c.settings.onSelect=r,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",c),this},_destroyDatepicker:function(t){var n,r=e(t),i=e.data(t,"datepicker");if(!r.hasClass(this.markerClassName))return;n=t.nodeName.toLowerCase(),e.removeData(t,"datepicker"),n==="input"?(i.append.remove(),i.trigger.remove(),r.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):(n==="div"||n==="span")&&r.removeClass(this.markerClassName).empty(),x===i&&(x=null)},_enableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,"datepicker");if(!i.hasClass(this.markerClassName))return;n=t.nodeName.toLowerCase();if(n==="input")t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(n==="div"||n==="span")r=i.children("."+this._inlineClass),r.children().removeClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var n,r,i=e(t),s=e.data(t,"datepicker");if(!i.hasClass(this.markerClassName))return;n=t.nodeName.toLowerCase();if(n==="input")t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(n==="div"||n==="span")r=i.children("."+this._inlineClass),r.children().addClass("ui-state-disabled"),r.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(n){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,n,r){var i,s,o,u,a=this._getInst(t);if(arguments.length===2&&typeof n=="string")return n==="defaults"?e.extend({},e.datepicker._defaults):a?n==="all"?e.extend({},a.settings):this._get(a,n):null;i=n||{},typeof n=="string"&&(i={},i[n]=r),a&&(this._curInst===a&&this._hideDatepicker(),s=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(a,"min"),u=this._getMinMaxDate(a,"max"),L(a.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(a.settings.minDate=this._formatDate(a,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(a.settings.maxDate=this._formatDate(a,u)),"disabled"in i&&(i.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),a),this._autoSize(a),this._setDate(a,s),this._updateAlternate(a),this._updateDatepicker(a))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");s._keyEvent=!0;if(e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else t.keyCode===36&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);if(e.datepicker._get(i,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!n||n.indexOf(r)>-1},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=e("input",t.parentNode)[0]);if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)return;var n,r,i,s,o,u,a;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),i=r?r.apply(t,[t,n]):{};if(i===!1)return;L(n.settings,i),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|=e(this).css("position")==="fixed",!s}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),o=e.datepicker._checkOffset(n,o,s),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),n.inline||(u=e.datepicker._get(n,"showAnim"),a=e.datepicker._get(n,"duration"),n.dpDiv.css("z-index",T(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[u]?n.dpDiv.show(u,e.datepicker._get(n,"showOptions"),a):n.dpDiv[u||"show"](u?a:null),e.datepicker._shouldFocusInput(n)&&n.input.trigger("focus"),e.datepicker._curInst=n)},_updateDatepicker:function(t){this.maxRows=4,x=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var n,r=this._getNumberOfMonths(t),i=r[1],s=17,o=t.dpDiv.find("."+this._dayOverClass+" a");o.length>0&&k.apply(o.get(0)),t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&t.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),t.dpDiv[(r[0]!==1||r[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(t)&&t.input.trigger("focus"),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){var n,r=this._getInst(t),i=this._get(r,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t)))t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var n,r,i,s,o=this._curInst;if(!o||t&&o!==e.data(t,"datepicker"))return;this._datepickerShowing&&(n=this._get(o,"showAnim"),r=this._get(o,"duration"),i=function(){e.datepicker._tidyDialog(o)},e.effects&&(e.effects.effect[n]||e.effects[n])?o.dpDiv.hide(n,e.datepicker._get(o,"showOptions"),r,i):o.dpDiv[n==="slideDown"?"slideUp":n==="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1,s=this._get(o,"onClose"),s&&s.apply(o.input?o.input[0]:null,[o.input?o.input.val():"",o]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst)return;var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&n.parents("#"+e.datepicker._mainDivId).length===0&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);if(this._isDisabledDatepicker(i[0]))return;this._adjustInstDate(s,n+(r==="M"?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s)},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+(r==="M"?"Month":"Year")]=s["draw"+(r==="M"?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);if(e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))return;s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=n!=null?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],typeof s.input[0]!="object"&&s.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).val(i))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(t==null||n==null)throw"Invalid arguments";n=typeof n=="object"?n.toString():n+"";if(n==="")return null;var i,s,o,u=0,a=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=typeof a!="string"?a:(new Date).getFullYear()%100+parseInt(a,10),l=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,c=(r?r.dayNames:null)||this._defaults.dayNames,h=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,p=(r?r.monthNames:null)||this._defaults.monthNames,d=-1,v=-1,m=-1,g=-1,y=!1,b,w=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,i=e==="y"?r:1,s=new RegExp("^\\d{"+i+","+r+"}"),o=n.substring(u).match(s);if(!o)throw"Missing number at position "+u;return u+=o[0].length,parseInt(o[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(o,function(e,t){var r=t[1];if(n.substr(u,r.length).toLowerCase()===r.toLowerCase())return s=t[0],u+=r.length,!1});if(s!==-1)return s+1;throw"Unknown name at position "+u},x=function(){if(n.charAt(u)!==t.charAt(i))throw"Unexpected literal at position "+u;u++};for(i=0;i<t.length;i++)if(y)t.charAt(i)==="'"&&!w("'")?y=!1:x();else switch(t.charAt(i)){case"d":m=E("d");break;case"D":S("D",l,c);break;case"o":g=E("o");break;case"m":v=E("m");break;case"M":v=S("M",h,p);break;case"y":d=E("y");break;case"@":b=new Date(E("@")),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"!":b=new Date((E("!")-this._ticksTo1970)/1e4),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"'":w("'")?x():y=!0;break;default:x()}if(u<n.length){o=n.substr(u);if(!/^\s+/.test(o))throw"Extra/unparsed characters found in date: "+o}d===-1?d=(new Date).getFullYear():d<100&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=f?0:-100));if(g>-1){v=1,m=g;do{s=this._getDaysInMonth(d,v-1);if(m<=s)break;v++,m-=s}while(!0)}b=this._daylightSavingAdjust(new Date(d,v-1,m));if(b.getFullYear()!==d||b.getMonth()+1!==v||b.getDate()!==m)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))while(r.length<n)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;r<e.length;r++)if(h)e.charAt(r)==="'"&&!a("'")?h=!1:c+=e.charAt(r);else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=t.getTime()*1e4+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=t+1<e.length&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;t<e.length;t++)if(r)e.charAt(t)==="'"&&!i("'")?r=!1:n+=e.charAt(t);else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);while(f){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=parseInt(f[1],10)*7;break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=n==null||n===""?r:typeof n=="string"?s(n):typeof n=="number"?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&o.toString()==="Invalid Date"?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!==e.selectedMonth||s!==e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),r="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(r,-n,"M")},next:function(){e.datepicker._adjustDate(r,+n,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(r)},selectDay:function(){return e.datepicker._selectDay(r,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(r,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(r,this,"Y"),!1}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=V[0]!==1||V[1]!==1,Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;Z<0&&(Z+=12,et--);if(Y){t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&t<G?G:t;while(this._daylightSavingAdjust(new Date(et,Z,1))>t)Z--,Z<0&&(Z=11,et--)}e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="";for(S=0;S<V[0];S++){x="",this.maxRows=4;for(T=0;T<V[1];T++){N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="";if(K){k+="<div class='ui-datepicker-group";if(V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&S===0?U?s:r:"")+(/all|right/.test(C)&&S===0?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(E=0;E<7;E++)A=(E+l)%7,L+="<th scope='col'"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M));for(H=0;H<D;H++){k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"";for(E=0;E<7;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&P<G||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+((!F||g)&&j[2]?" title='"+j[2].replace(/'/g,"&#39;")+"'":"")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(l=0;l<12;l++)(!a||l>=r.getMonth())&&(!f||l<=i.getMonth())&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}y||(b+=w+(s||!m||!g?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;d<=v;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}}return b+=this._get(e,"yearSuffix"),y&&(b+=(s||!m||!g?"&#xa0;":"")+w),b+="</div>",b},_adjustInstDate:function(e,t,n){var r=e.selectedYear+(n==="Y"?t:0),i=e.selectedMonth+(n==="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n==="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n==="M"||n==="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10),u=parseInt(n[1],10),n[0].match(/[+\-].*/)&&(o+=r),n[1].match(/[+\-].*/)&&(u+=r)),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).on("mousedown",e.datepicker._checkExternalClick),e.datepicker.initialized=!0),e("#"+e.datepicker._mainDivId).length===0&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return typeof t!="string"||t!=="isDisabled"&&t!=="getDate"&&t!=="widget"?t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){typeof t=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new N,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.12.1";var A=e.datepicker;e.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))},_removeDescribedBy:function(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=e([])},_setOption:function(t,n){var r=this;this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t.element)})},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r.element[0],t.close(i,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=e(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=e([])},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);if(!r.length||r.data("ui-tooltip-id"))return;r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&t.type==="mouseover"&&r.parents().each(function(){var t=e(this),r;t.data("ui-tooltip-open")&&(r=e.Event("blur"),r.target=r.currentTarget=this,n.close(r,!0)),t.attr("title")&&(t.uniqueId(),n.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._registerCloseHandlers(t,r),this._updateContent(r,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;if(typeof r=="string"||r.nodeType||r.jquery)return this._open(t,e,r);n=r.call(e[0],function(n){i._delay(function(){if(!e.data("ui-tooltip-open"))return;t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,n,r){function f(e){a.of=e;if(s.is(":hidden"))return;s.position(a)}var i,s,o,u,a=e.extend({},this.options.position);if(!r)return;i=this._find(n);if(i){i.tooltip.find(".ui-tooltip-content").html(r);return}n.is("[title]")&&(t&&t.type==="mouseover"?n.attr("title",""):n.removeAttr("title")),i=this._tooltip(n),s=i.tooltip,this._addDescribedBy(n,s.attr("id")),s.find(".ui-tooltip-content").html(r),this.liveRegion.children().hide(),u=e("<div>").html(s.find(".ui-tooltip-content").html()),u.removeAttr("name").find("[name]").removeAttr("name"),u.removeAttr("id").find("[id]").removeAttr("id"),u.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:n},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(o))},e.fx.interval)),this._trigger("open",t,{tooltip:s})},_registerCloseHandlers:function(t,n){var r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var r=e.Event(t);r.currentTarget=n[0],this.close(r,!0)}}};n[0]!==this.element[0]&&(r.remove=function(){this._removeTooltip(this._find(n).tooltip)});if(!t||t.type==="mouseover")r.mouseleave="close";if(!t||t.type==="focusin")r.focusout="close";this._on(!0,n,r)},close:function(t){var n,r=this,i=e(t?t.currentTarget:this.element),s=this._find(i);if(!s){i.removeData("ui-tooltip-open");return}n=s.tooltip;if(s.closing)return;clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),s.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,function(){r._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete r.parents[t]}),s.closing=!0,this._trigger("close",t,{tooltip:n}),s.hiding||(s.closing=!1)},_tooltip:function(t){var n=e("<div>").attr("role","tooltip"),r=e("<div>").appendTo(n),i=n.uniqueId().attr("id");return this._addClass(r,"ui-tooltip-content"),this._addClass(n,"ui-tooltip","ui-widget ui-widget-content"),n.appendTo(this._appendTo(t)),this.tooltips[i]={element:t,tooltip:n}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");return t.length||(t=this.document[0].body),t},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur"),s=r.element;i.target=i.currentTarget=s[0],t.close(i,!0),e("#"+n).remove(),s.data("ui-tooltip-title")&&(s.attr("title")||s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),e.uiBackCompat!==!1&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}});var O=e.ui.tooltip,M="ui-effects-",_="ui-effects-style",D="ui-effects-animated",P=e;e.effects={effect:{}},function(e,t){function h(e,t,n){var r=u[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function p(t){var n=s(),r=n._rgba=[];return t=t.toLowerCase(),c(i,function(e,i){var s,u=i.re.exec(t),a=u&&i.parse(u),f=i.space||"rgba";if(a)return s=n[f](a),n[o[f].cache]=s[o[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&e.extend(r,l.transparent),n):l[t]}function d(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=s.support={},f=e("<p>")[0],l,c=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=f.style.backgroundColor.indexOf("rgba")>-1,c(o,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),s.fn=e.extend(s.prototype,{parse:function(n,r,i,u){if(n===t)return this._rgba=[null,null,null,null],this;if(n.jquery||n.nodeType)n=e(n).css(r),r=t;var a=this,f=e.type(n),d=this._rgba=[];r!==t&&(n=[n,r,i,u],f="array");if(f==="string")return this.parse(p(n)||l._default);if(f==="array")return c(o.rgba.props,function(e,t){d[t.idx]=h(n[t.idx],t)}),this;if(f==="object")return n instanceof s?c(o,function(e,t){n[t.cache]&&(a[t.cache]=n[t.cache].slice())}):c(o,function(t,r){var i=r.cache;c(r.props,function(e,t){if(!a[i]&&r.to){if(e==="alpha"||n[e]==null)return;a[i]=r.to(a._rgba)}a[i][t.idx]=h(n[e],t,!0)}),a[i]&&e.inArray(null,a[i].slice(0,3))<0&&(a[i][3]=1,r.from&&(a._rgba=r.from(a[i])))}),this},is:function(e){var t=s(e),n=!0,r=this;return c(o,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],c(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return c(o,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=s(e),r=n._space(),i=o[r],a=this.alpha()===0?s("transparent"):this,f=a[i.cache]||i.to(a._rgba),l=f.slice();return n=n[i.cache],c(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],a=u[r.type]||{};if(o===null)return;s===null?l[i]=o:(a.mod&&(o-s>a.mod/2?s+=a.mod:s-o>a.mod/2&&(s-=a.mod)),l[i]=h((o-s)*t+s,r))}),this[r](l)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=s(t)._rgba;return s(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,o.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,u===0?c=0:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},o.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(d(o,s,t+1/3)*255),Math.round(d(o,s,t)*255),Math.round(d(o,s,t-1/3)*255),i]},c(o,function(n,i){var o=i.props,u=i.cache,a=i.to,f=i.from;s.fn[n]=function(n){a&&!this[u]&&(this[u]=a(this._rgba));if(n===t)return this[u].slice();var r,i=e.type(n),l=i==="array"||i==="object"?n:arguments,p=this[u].slice();return c(o,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=p[t.idx]),p[t.idx]=h(n,t)}),f?(r=s(f(p)),r[u]=p,r):s(p)},c(o,function(t,i){if(s.fn[t])return;s.fn[t]=function(s){var o=e.type(s),u=t==="alpha"?this._hsla?"hsla":"rgba":n,a=this[u](),f=a[i.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=e.type(s)),s==null&&i.empty?this:(o==="string"&&(l=r.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[i.idx]=s,this[u](a)))}})}),s.hook=function(t){var n=t.split(" ");c(n,function(t,n){e.cssHooks[n]={set:function(t,r){var i,o,u="";if(r!=="transparent"&&(e.type(r)!=="string"||(i=p(r)))){r=s(i||r);if(!a.rgba&&r._rgba[3]!==1){o=n==="backgroundColor"?t.parentNode:t;while((u===""||u==="transparent")&&o&&o.style)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(f){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(f){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=s(t.elem,n),t.end=s(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},s.hook(n),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},l=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(P),function(){function r(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]]){r=i.length;while(r--)n=i[r],typeof i[n]=="string"&&(s[e.camelCase(n)]=i[n])}else for(n in i)typeof i[n]=="string"&&(s[n]=i[n]);return s}function i(t,r){var i={},s,o;for(s in r)o=r[s],t[s]!==o&&!n[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var t=["add","remove","toggle"],n={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)P.style(e.elem,n,e.end),e.setAttr=!0}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(n,s,o,u){var a=e.speed(s,o,u);return this.queue(function(){var s=e(this),o=s.attr("class")||"",u,f=a.children?s.find("*").addBack():s;f=f.map(function(){var t=e(this);return{el:t,start:r(this)}}),u=function(){e.each(t,function(e,t){n[t]&&s[t+"Class"](n[t])})},u(),f=f.map(function(){return this.end=r(this.el[0]),this.diff=i(this.start,this.end),this}),s.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(s[0])})})},e.fn.extend({addClass:function(t){return function(n,r,i,s){return r?e.effects.animateClass.call(this,{add:n},r,i,s):t.apply(this,arguments)}}(e.fn.addClass),removeClass:function(t){return function(n,r,i,s){return arguments.length>1?e.effects.animateClass.call(this,{remove:n},r,i,s):t.apply(this,arguments)}}(e.fn.removeClass),toggleClass:function(t){return function(n,r,i,s,o){return typeof r=="boolean"||r===undefined?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):t.apply(this,arguments):e.effects.animateClass.call(this,{toggle:n},r,i,s)}}(e.fn.toggleClass),switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function t(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function n(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]?!0:e.isFunction(t)?!0:typeof t=="object"&&!t.effect?!0:!1}function r(e,t){var n=t.outerWidth(),r=t.outerHeight(),i=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,s=i.exec(e)||["",0,n,r,0];return{top:parseFloat(s[1])||0,right:s[2]==="auto"?n:parseFloat(s[2]),bottom:s[3]==="auto"?r:parseFloat(s[3]),left:parseFloat(s[4])||0}}e.expr&&e.expr.filters&&e.expr.filters.animated&&(e.expr.filters.animated=function(t){return function(n){return!!e(n).data(D)||t(n)}}(e.expr.filters.animated)),e.uiBackCompat!==!1&&e.extend(e.effects,{save:function(e,t){var n=0,r=t.length;for(;n<r;n++)t[n]!==null&&e.data(M+t[n],e[0].style[t[n]])},restore:function(e,t){var n,r=0,i=t.length;for(;r<i;r++)t[r]!==null&&(n=e.data(M+t[r]),e.css(t[r],n))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).trigger("focus"),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).trigger("focus")),t}}),e.extend(e.effects,{version:"1.12.1",define:function(t,n,r){return r||(r=n,n="effect"),e.effects.effect[t]=r,e.effects.effect[t].mode=n,r},scaledDimensions:function(e,t,n){if(t===0)return{height:0,width:0,outerHeight:0,outerWidth:0};var r=n!=="horizontal"?(t||100)/100:1,i=n!=="vertical"?(t||100)/100:1;return{height:e.height()*i,width:e.width()*r,outerHeight:e.outerHeight()*i,outerWidth:e.outerWidth()*r}},clipToBox:function(e){return{width:e.clip.right-e.clip.left,height:e.clip.bottom-e.clip.top,left:e.clip.left,top:e.clip.top}},unshift:function(e,t,n){var r=e.queue();t>1&&r.splice.apply(r,[1,0].concat(r.splice(t,n))),e.dequeue()},saveStyle:function(e){e.data(_,e[0].style.cssText)},restoreStyle:function(e){e[0].style.cssText=e.data(_)||"",e.removeData(_)},mode:function(e,t){var n=e.is(":hidden");t==="toggle"&&(t=n?"show":"hide");if(n?t==="hide":t==="show")t="none";return t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createPlaceholder:function(t){var n,r=t.css("position"),i=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(r)&&(r="absolute",n=e("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),"float":t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(M+"placeholder",n)),t.css({position:r,left:i.left,top:i.top}),n},removePlaceholder:function(e){var t=M+"placeholder",n=e.data(t);n&&(n.remove(),e.removeData(t))},cleanUp:function(t){e.effects.restoreStyle(t),e.effects.removePlaceholder(t)},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function c(t){function o(){s.removeData(D),e.effects.cleanUp(s),n.mode==="hide"&&s.hide(),l()}function l(){e.isFunction(u)&&u.call(s[0]),e.isFunction(t)&&t()}var s=e(this);n.mode=f.shift(),e.uiBackCompat!==!1&&!i?(s.is(":hidden")?a==="hide":a==="show")?(s[a](),l()):r.call(s[0],n,l):n.mode==="none"?(s[a](),l()):r.call(s[0],n,o)}var n=t.apply(this,arguments),r=e.effects.effect[n.effect],i=r.mode,s=n.queue,o=s||"fx",u=n.complete,a=n.mode,f=[],l=function(t){var n=e(this),r=e.effects.mode(n,a)||i;n.data(D,!0),f.push(r),i&&(r==="show"||r===i&&r==="hide")&&n.show(),(!i||r!=="none")&&e.effects.saveStyle(n),e.isFunction(t)&&t()};return e.fx.off||!r?a?this[a](n.duration,u):this.each(function(){u&&u.call(this)}):s===!1?this.each(l).each(c):this.queue(o,l).queue(o,c)},show:function(e){return function(r){if(n(r))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="show",this.effect.call(this,i)}}(e.fn.show),hide:function(e){return function(r){if(n(r))return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="hide",this.effect.call(this,i)}}(e.fn.hide),toggle:function(e){return function(r){if(n(r)||typeof r=="boolean")return e.apply(this,arguments);var i=t.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)}}(e.fn.toggle),cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r},cssClip:function(e){return e?this.css("clip","rect("+e.top+"px "+e.right+"px "+e.bottom+"px "+e.left+"px)"):r(this.css("clip"),this)},transfer:function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),e.isFunction(n)&&n()})}}),e.fx.step.clip=function(t){t.clipInit||(t.start=e(t.elem).cssClip(),typeof t.end=="string"&&(t.end=r(t.end,t.elem)),t.clipInit=!0),e(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})}}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}();var H=e.effects,B=e.effects.define("blind","hide",function(t,n){var r={up:["bottom","top"],vertical:["bottom","top"],down:["top","bottom"],left:["right","left"],horizontal:["right","left"],right:["left","right"]},i=e(this),s=t.direction||"up",o=i.cssClip(),u={clip:e.extend({},o)},a=e.effects.createPlaceholder(i);u.clip[r[s][0]]=u.clip[r[s][1]],t.mode==="show"&&(i.cssClip(u.clip),a&&a.css(e.effects.clipToBox(u)),u.clip=o),a&&a.animate(e.effects.clipToBox(u),t.duration,t.easing),i.animate(u,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),j=e.effects.define("clip","hide",function(t,n){var r,i={},s=e(this),o=t.direction||"vertical",u=o==="both",a=u||o==="horizontal",f=u||o==="vertical";r=s.cssClip(),i.clip={top:f?(r.bottom-r.top)/2:r.top,right:a?(r.right-r.left)/2:r.right,bottom:f?(r.bottom-r.top)/2:r.bottom,left:a?(r.right-r.left)/2:r.left},e.effects.createPlaceholder(s),t.mode==="show"&&(s.cssClip(i.clip),i.clip=r),s.animate(i,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),F=e.effects.define("drop","hide",function(t,n){var r,i=e(this),s=t.mode,o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"-=":"+=",l=f==="+="?"-=":"+=",c={opacity:0};e.effects.createPlaceholder(i),r=t.distance||i[a==="top"?"outerHeight":"outerWidth"](!0)/2,c[a]=f+r,o&&(i.css(c),c[a]=l+r,c.opacity=1),i.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),I=e.effects.define("fade","toggle",function(t,n){var r=t.mode==="show";e(this).css("opacity",r?0:1).animate({opacity:r?1:0},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),q=e.effects.define("highlight","show",function(t,n){var r=e(this),i={backgroundColor:r.css("backgroundColor")};t.mode==="hide"&&(i.opacity=0),e.effects.saveStyle(r),r.css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(i,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),R=e.effects.define("size",function(t,n){var r,i,s,o=e(this),u=["fontSize"],a=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],f=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],l=t.mode,c=l!=="effect",h=t.scale||"both",p=t.origin||["middle","center"],d=o.css("position"),v=o.position(),m=e.effects.scaledDimensions(o),g=t.from||m,y=t.to||e.effects.scaledDimensions(o,0);e.effects.createPlaceholder(o),l==="show"&&(s=g,g=y,y=s),i={from:{y:g.height/m.height,x:g.width/m.width},to:{y:y.height/m.height,x:y.width/m.width}};if(h==="box"||h==="both")i.from.y!==i.to.y&&(g=e.effects.setTransition(o,a,i.from.y,g),y=e.effects.setTransition(o,a,i.to.y,y)),i.from.x!==i.to.x&&(g=e.effects.setTransition(o,f,i.from.x,g),y=e.effects.setTransition(o,f,i.to.x,y));(h==="content"||h==="both")&&i.from.y!==i.to.y&&(g=e.effects.setTransition(o,u,i.from.y,g),y=e.effects.setTransition(o,u,i.to.y,y)),p&&(r=e.effects.getBaseline(p,m),g.top=(m.outerHeight-g.outerHeight)*r.y+v.top,g.left=(m.outerWidth-g.outerWidth)*r.x+v.left,y.top=(m.outerHeight-y.outerHeight)*r.y+v.top,y.left=(m.outerWidth-y.outerWidth)*r.x+v.left),o.css(g);if(h==="content"||h==="both")a=a.concat(["marginTop","marginBottom"]).concat(u),f=f.concat(["marginLeft","marginRight"]),o.find("*[width]").each(function(){var n=e(this),r=e.effects.scaledDimensions(n),s={height:r.height*i.from.y,width:r.width*i.from.x,outerHeight:r.outerHeight*i.from.y,outerWidth:r.outerWidth*i.from.x},o={height:r.height*i.to.y,width:r.width*i.to.x,outerHeight:r.height*i.to.y,outerWidth:r.width*i.to.x};i.from.y!==i.to.y&&(s=e.effects.setTransition(n,a,i.from.y,s),o=e.effects.setTransition(n,a,i.to.y,o)),i.from.x!==i.to.x&&(s=e.effects.setTransition(n,f,i.from.x,s),o=e.effects.setTransition(n,f,i.to.x,o)),c&&e.effects.saveStyle(n),n.css(s),n.animate(o,t.duration,t.easing,function(){c&&e.effects.restoreStyle(n)})});o.animate(y,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){var t=o.offset();y.opacity===0&&o.css("opacity",g.opacity),c||(o.css("position",d==="static"?"relative":d).offset(t),e.effects.saveStyle(o)),n()}})}),U=e.effects.define("scale",function(t,n){var r=e(this),i=t.mode,s=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:i!=="effect"?0:100),o=e.extend(!0,{from:e.effects.scaledDimensions(r),to:e.effects.scaledDimensions(r,s,t.direction||"both"),origin:t.origin||["middle","center"]},t);t.fade&&(o.from.opacity=1,o.to.opacity=0),e.effects.effect.size.call(this,o,n)}),z=e.effects.define("slide","show",function(t,n){var r,i,s=e(this),o={up:["bottom","top"],down:["top","bottom"],left:["right","left"],right:["left","right"]},u=t.mode,a=t.direction||"left",f=a==="up"||a==="down"?"top":"left",l=a==="up"||a==="left",c=t.distance||s[f==="top"?"outerHeight":"outerWidth"](!0),h={};e.effects.createPlaceholder(s),r=s.cssClip(),i=s.position()[f],h[f]=(l?-1:1)*c+i,h.clip=s.cssClip(),h.clip[o[a][1]]=h.clip[o[a][0]],u==="show"&&(s.cssClip(h.clip),s.css(f,h[f]),h.clip=r,h[f]=i),s.animate(h,{queue:!1,duration:t.duration,easing:t.easing,complete:n})}),H;e.uiBackCompat!==!1&&(H=e.effects.define("transfer",function(t,n){e(this).transfer(t,n)}));var W=H});if("undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,r=this;e(this).one("bsTransitionEnd",function(){n=!0});var i=function(){n||e(r).trigger(e.support.transition.end)};return setTimeout(i,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),i=n.data("bs.alert");i||n.data("bs.alert",i=new r(this)),"string"==typeof t&&i[t].call(n)})}var n='[data-dismiss="alert"]',r=function(t){e(t).on("click",n,this.close)};r.VERSION="3.3.5",r.TRANSITION_DURATION=150,r.prototype.close=function(t){function n(){o.detach().trigger("closed.bs.alert").remove()}var i=e(this),s=i.attr("data-target");s||(s=i.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var o=e(s);t&&t.preventDefault(),o.length||(o=i.closest(".alert")),o.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(r.TRANSITION_DURATION):n())};var i=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=r,e.fn.alert.noConflict=function(){return e.fn.alert=i,this},e(document).on("click.bs.alert.data-api",n,r.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.button"),s="object"==typeof t&&t;i||r.data("bs.button",i=new n(this,s)),"toggle"==t?i.toggle():t&&i.setState(t)})}var n=function(t,r){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,r),this.isLoading=!1};n.VERSION="3.3.5",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",r=this.$element,i=r.is("input")?"val":"html",s=r.data();t+="Text",null==s.resetText&&r.data("resetText",r[i]()),setTimeout(e.proxy(function(){r[i](null==s[t]?this.options[t]:s[t]),"loadingText"==t?(this.isLoading=!0,r.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,r.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var r=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=r,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var r=e(n.target);r.hasClass("btn")||(r=r.closest(".btn")),t.call(r,"toggle"),e(n.target).is('input[type="radio"]')||e(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.carousel"),s=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t),o="string"==typeof t?t:s.slide;i||r.data("bs.carousel",i=new n(this,s)),"number"==typeof t?i.to(t):o?i[o]():s.interval&&i.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),r="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(r&&!this.options.wrap)return t;var i="prev"==e?-1:1,s=(n+i)%this.$items.length;return this.$items.eq(s)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,r){var i=this.$element.find(".item.active"),s=r||this.getItemForDirection(t,i),o=this.interval,u="next"==t?"left":"right",f=this;if(s.hasClass("active"))return this.sliding=!1;var l=s[0],h=e.Event("slide.bs.carousel",{relatedTarget:l,direction:u});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var p=e(this.$indicators.children()[this.getItemIndex(s)]);p&&p.addClass("active")}var d=e.Event("slid.bs.carousel",{relatedTarget:l,direction:u});return e.support.transition&&this.$element.hasClass("slide")?(s.addClass(t),s[0].offsetWidth,i.addClass(u),s.addClass(u),i.one("bsTransitionEnd",function(){s.removeClass([t,u].join(" ")).addClass("active"),i.removeClass(["active",u].join(" ")),f.sliding=!1,setTimeout(function(){f.$element.trigger(d)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(i.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(d)),o&&this.cycle(),this}};var r=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=r,this};var i=function(n){var r,i=e(this),s=e(i.attr("data-target")||(r=i.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,""));if(s.hasClass("carousel")){var o=e.extend({},s.data(),i.data()),u=i.attr("data-slide-to");u&&(o.interval=!1),t.call(s,o),u&&s.data("bs.carousel").to(u),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",i).on("click.bs.carousel.data-api","[data-slide-to]",i),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,r=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(r)}function n(t){return this.each(function(){var n=e(this),i=n.data("bs.collapse"),s=e.extend({},r.DEFAULTS,n.data(),"object"==typeof t&&t);!i&&s.toggle&&/show|hide/.test(t)&&(s.toggle=!1),i||n.data("bs.collapse",i=new r(this,s)),"string"==typeof t&&i[t]()})}var r=function(t,n){this.$element=e(t),this.options=e.extend({},r.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};r.VERSION="3.3.5",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,i=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(i&&i.length&&(t=i.data("bs.collapse"),t&&t.transitioning))){var s=e.Event("show.bs.collapse");if(this.$element.trigger(s),!s.isDefaultPrevented()){i&&i.length&&(n.call(i,"hide"),t||i.data("bs.collapse",null));var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var u=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return u.call(this);var f=e.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",e.proxy(u,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[o](this.$element[0][f])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION):i.call(this)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,r){var i=e(r);this.addAriaAndCollapsedClass(t(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var i=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=r,e.fn.collapse.noConflict=function(){return e.fn.collapse=i,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(r){var i=e(this);i.attr("data-target")||r.preventDefault();var s=t(i),o=s.data("bs.collapse"),u=o?"toggle":i.data();n.call(s,u)})}(jQuery),+function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function n(n){n&&3===n.which||(e(i).remove(),e(s).each(function(){var r=e(this),i=t(r),s={relatedTarget:this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(i[0],n.target)||(i.trigger(n=e.Event("hide.bs.dropdown",s)),n.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger("hidden.bs.dropdown",s))))}))}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new o(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",s='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.5",o.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var s=t(i),o=s.hasClass("open");if(n(),!o){"ontouchstart"in document.documentElement&&!s.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var u={relatedTarget:this};if(s.trigger(r=e.Event("show.bs.dropdown",u)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),s.toggleClass("open").trigger("shown.bs.dropdown",u)}return!1}},o.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var r=e(this);if(n.preventDefault(),n.stopPropagation(),!r.is(".disabled, :disabled")){var i=t(r),o=i.hasClass("open");if(!o&&27!=n.which||o&&27==n.which)return 27==n.which&&i.find(s).trigger("focus"),r.trigger("click");var u=" li:not(.disabled):visible a",l=i.find(".dropdown-menu"+u);if(l.length){var c=l.index(n.target);38==n.which&&c>0&&c--,40==n.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var u=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=u,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",s,o.prototype.toggle).on("keydown.bs.dropdown.data-api",s,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,r){return this.each(function(){var i=e(this),s=i.data("bs.modal"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t);s||i.data("bs.modal",s=new n(this,o)),"string"==typeof t?s[t](r):o.show&&s.show(r)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.5",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var r=this,i=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=e.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in"),r.enforceFocus();var s=e.Event("shown.bs.modal",{relatedTarget:t});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(s)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=e.support.transition&&i;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void (this.ignoreBackdropClick=!1):void (e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;s?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){r.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):o()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var r=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=r,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=e(this),i=r.attr("href"),s=e(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),o=s.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(i)&&i},s.data(),r.data());r.is("a")&&n.preventDefault(),s.one("show.bs.modal",function(e){e.isDefaultPrevented()||s.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),t.call(s,o,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tooltip"),s="object"==typeof t&&t;(i||!/destroy|hide/.test(t))&&(i||r.data("bs.tooltip",i=new n(this,s)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,r){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(r),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var i=this.options.trigger.split(" "),s=i.length;s--;){var o=i[s];if("click"==o)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=o){var u="hover"==o?"mouseenter":"focusin",f="hover"==o?"mouseleave":"focusout";this.$element.on(u+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(f+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,r){n[e]!=r&&(t[e]=r)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void (n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void (n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void (n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var r=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!r)return;var i=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var u="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,l=f.test(u);l&&(u=u.replace(f,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(u).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var h=this.getPosition(),p=s[0].offsetWidth,d=s[0].offsetHeight;if(l){var v=u,m=this.getPosition(this.$viewport);u="bottom"==u&&h.bottom+d>m.bottom?"top":"top"==u&&h.top-d<m.top?"bottom":"right"==u&&h.right+p>m.width?"left":"left"==u&&h.left-p<m.left?"right":u,s.removeClass(v).addClass(u)}var g=this.getCalculatedOffset(u,h,p,d);this.applyPlacement(g,u);var y=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};e.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",y).emulateTransitionEnd(n.TRANSITION_DURATION):y()}},n.prototype.applyPlacement=function(t,n){var r=this.tip(),i=r[0].offsetWidth,s=r[0].offsetHeight,o=parseInt(r.css("margin-top"),10),u=parseInt(r.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(u)&&(u=0),t.top+=o,t.left+=u,e.offset.setOffset(r[0],e.extend({using:function(e){r.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),r.addClass("in");var f=r[0].offsetWidth,l=r[0].offsetHeight;"top"==n&&l!=s&&(t.top=t.top+s-l);var c=this.getViewportAdjustedDelta(n,t,f,l);c.left?t.left+=c.left:t.top+=c.top;var h=/top|bottom/.test(n),p=h?2*c.left-i+f:2*c.top-s+l,d=h?"offsetWidth":"offsetHeight";r.offset(t),this.replaceArrow(p,r[0][d],h)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function r(){"in"!=i.hoverState&&s.detach(),i.$element.removeAttr("aria-describedby").trigger("hidden.bs."+i.type),t&&t()}var i=this,s=e(this.$tip),o=e.Event("hide.bs."+this.type);return this.$element.trigger(o),o.isDefaultPrevented()?void 0:(s.removeClass("in"),e.support.transition&&s.hasClass("fade")?s.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],r="BODY"==n.tagName,i=n.getBoundingClientRect();null==i.width&&(i=e.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var s=r?{top:0,left:0}:t.offset(),o={scroll:r?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},u=r?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},i,o,u,s)},n.prototype.getCalculatedOffset=function(e,t,n,r){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-r,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-r/2,left:t.left-n}:{top:t.top+t.height/2-r/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,r){var i={top:0,left:0};if(!this.$viewport)return i;var s=this.options.viewport&&this.options.viewport.padding||0,o=this.getPosition(this.$viewport);if(/right|left/.test(e)){var u=t.top-s-o.scroll,a=t.top+s-o.scroll+r;u<o.top?i.top=o.top-u:a>o.top+o.height&&(i.top=o.top+o.height-a)}else{var f=t.left-s,l=t.left+s+n;f<o.left?i.left=o.left-f:l>o.right&&(i.left=o.left+o.width-l)}return i},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var r=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=r,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.popover"),s="object"==typeof t&&t;(i||!/destroy|hide/.test(t))&&(i||r.data("bs.popover",i=new n(this,s)),"string"==typeof t&&i[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.5",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var r=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=r,this}}(jQuery),+function(e){"use strict";function t(n,r){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,r),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var r=e(this),i=r.data("bs.scrollspy"),s="object"==typeof n&&n;i||r.data("bs.scrollspy",i=new t(this,s)),"string"==typeof n&&i[n]()})}t.VERSION="3.3.5",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",r=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",r=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),i=t.data("target")||t.attr("href"),s=/^#./.test(i)&&e(i);return s&&s.length&&s.is(":visible")&&[[s[n]().top+r,i]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),r=this.options.offset+n-this.$scrollElement.height(),i=this.offsets,s=this.targets,o=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=r)return o!=(e=s[s.length-1])&&this.activate(e);if(o&&t<i[0])return this.activeTarget=null,this.clear();for(e=i.length;e--;)o!=s[e]&&t>=i[e]&&(void 0===i[e+1]||t<i[e+1])&&this.activate(s[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',r=e(n).parents("li").addClass("active");r.parent(".dropdown-menu").length&&(r=r.closest("li.dropdown").addClass("active")),r.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var r=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=r,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.tab");i||r.data("bs.tab",i=new n(this)),"string"==typeof t&&i[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.5",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),r=t.data("target");if(r||(r=t.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var i=n.find(".active:last a"),s=e.Event("hide.bs.tab",{relatedTarget:t[0]}),o=e.Event("show.bs.tab",{relatedTarget:i[0]});if(i.trigger(s),t.trigger(o),!o.isDefaultPrevented()&&!s.isDefaultPrevented()){var u=e(r);this.activate(t.closest("li"),n),this.activate(u,u.parent(),function(){i.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:i[0]})})}}},n.prototype.activate=function(t,r,i){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),u?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}var o=r.find("> .active"),u=i&&e.support.transition&&(o.length&&o.hasClass("fade")||!!r.find("> .fade").length);o.length&&u?o.one("bsTransitionEnd",s).emulateTransitionEnd(n.TRANSITION_DURATION):s(),o.removeClass("in")};var r=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=r,this};var i=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var r=e(this),i=r.data("bs.affix"),s="object"==typeof t&&t;i||r.data("bs.affix",i=new n(this,s)),"string"==typeof t&&i[t]()})}var n=function(t,r){this.options=e.extend({},n.DEFAULTS,r),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.5",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,r){var i=this.$target.scrollTop(),s=this.$element.offset(),o=this.$target.height();if(null!=n&&"top"==this.affixed)return n>i?"top":!1;if("bottom"==this.affixed)return null!=n?i+this.unpin<=s.top?!1:"bottom":e-r>=i+o?!1:"bottom";var u=null==this.affixed,a=u?i:s.top,f=u?o:t;return null!=n&&n>=i?"top":null!=r&&a+f>=e-r?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),r=this.options.offset,i=r.top,s=r.bottom,o=Math.max(e(document).height(),e(document.body).height());"object"!=typeof r&&(s=i=r),"function"==typeof i&&(i=r.top(this.$element)),"function"==typeof s&&(s=r.bottom(this.$element));var u=this.getState(o,t,i,s);if(this.affixed!=u){null!=this.unpin&&this.$element.css("top","");var f="affix"+(u?"-"+u:""),l=e.Event(f+".bs.affix");if(this.$element.trigger(l),l.isDefaultPrevented())return;this.affixed=u,this.unpin="bottom"==u?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(f).trigger(f.replace("affix","affixed")+".bs.affix")}"bottom"==u&&this.$element.offset({top:o-t-s})}};var r=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=r,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),r=n.data();r.offset=r.offset||{},null!=r.offsetBottom&&(r.offset.bottom=r.offsetBottom),null!=r.offsetTop&&(r.offset.top=r.offsetTop),t.call(n,r)})})}(jQuery),define("bootstrap",["jqueryUI"],function(){}),function(){var e=[].slice;!function(n,r){"use strict";var i;return i=function(){function e(e,t){null==t&&(t={}),this.$element=n(e),this.options=n.extend({},n.fn.bootstrapSwitch.defaults,t,{state:this.$element.is(":checked"),size:this.$element.data("size"),animate:this.$element.data("animate"),disabled:this.$element.is(":disabled"),readonly:this.$element.is("[readonly]"),indeterminate:this.$element.data("indeterminate"),onColor:this.$element.data("on-color"),offColor:this.$element.data("off-color"),onText:this.$element.data("on-text"),offText:this.$element.data("off-text"),labelText:this.$element.data("label-text"),baseClass:this.$element.data("base-class"),wrapperClass:this.$element.data("wrapper-class")}),this.$wrapper=n("<div>",{"class":function(e){return function(){var t;return t=[""+e.options.baseClass].concat(e._getClasses(e.options.wrapperClass)),t.push(e.options.state?""+e.options.baseClass+"-on":""+e.options.baseClass+"-off"),null!=e.options.size&&t.push(""+e.options.baseClass+"-"+e.options.size),e.options.animate&&t.push(""+e.options.baseClass+"-animate"),e.options.disabled&&t.push(""+e.options.baseClass+"-disabled"),e.options.readonly&&t.push(""+e.options.baseClass+"-readonly"),e.options.indeterminate&&t.push(""+e.options.baseClass+"-indeterminate"),e.$element.attr("id")&&t.push(""+e.options.baseClass+"-id-"+e.$element.attr("id")),t.join(" ")}}(this)()}),this.$container=n("<div>",{"class":""+this.options.baseClass+"-container"}),this.$on=n("<span>",{html:this.options.onText,"class":""+this.options.baseClass+"-handle-on "+this.options.baseClass+"-"+this.options.onColor}),this.$off=n("<span>",{html:this.options.offText,"class":""+this.options.baseClass+"-handle-off "+this.options.baseClass+"-"+this.options.offColor}),this.$label=n("<label>",{"for":this.$element.attr("id"),html:this.options.labelText,"class":""+this.options.baseClass+"-label"}),this.options.indeterminate&&this.$element.prop("indeterminate",!0),this.$element.on("init.bootstrapSwitch",function(t){return function(){return t.options.onInit.apply(e,arguments)}}(this)),this.$element.on("switchChange.bootstrapSwitch",function(t){return function(){return t.options.onSwitchChange.apply(e,arguments)}}(this)),this.$container=this.$element.wrap(this.$container).parent(),this.$wrapper=this.$container.wrap(this.$wrapper).parent(),this.$element.before(this.$on).before(this.$label).before(this.$off).trigger("init.bootstrapSwitch"),this._elementHandlers(),this._handleHandlers(),this._labelHandlers(),this._formHandler()}return e.prototype._constructor=e,e.prototype.state=function(e,t){return"undefined"==typeof e?this.options.state:this.options.disabled||this.options.readonly||this.options.indeterminate?this.$element:(e=!!e,this.$element.prop("checked",e).trigger("change.bootstrapSwitch",t),this.$element)},e.prototype.toggleState=function(e){return this.options.disabled||this.options.readonly||this.options.indeterminate?this.$element:this.$element.prop("checked",!this.options.state).trigger("change.bootstrapSwitch",e)},e.prototype.size=function(e){return"undefined"==typeof e?this.options.size:(null!=this.options.size&&this.$wrapper.removeClass(""+this.options.baseClass+"-"+this.options.size),e&&this.$wrapper.addClass(""+this.options.baseClass+"-"+e),this.options.size=e,this.$element)},e.prototype.animate=function(e){return"undefined"==typeof e?this.options.animate:(e=!!e,this.$wrapper[e?"addClass":"removeClass"](""+this.options.baseClass+"-animate"),this.options.animate=e,this.$element)},e.prototype.disabled=function(e){return"undefined"==typeof e?this.options.disabled:(e=!!e,this.$wrapper[e?"addClass":"removeClass"](""+this.options.baseClass+"-disabled"),this.$element.prop("disabled",e),this.options.disabled=e,this.$element)},e.prototype.toggleDisabled=function(){return this.$element.prop("disabled",!this.options.disabled),this.$wrapper.toggleClass(""+this.options.baseClass+"-disabled"),this.options.disabled=!this.options.disabled,this.$element},e.prototype.readonly=function(e){return"undefined"==typeof e?this.options.readonly:(e=!!e,this.$wrapper[e?"addClass":"removeClass"](""+this.options.baseClass+"-readonly"),this.$element.prop("readonly",e),this.options.readonly=e,this.$element)},e.prototype.toggleReadonly=function(){return this.$element.prop("readonly",!this.options.readonly),this.$wrapper.toggleClass(""+this.options.baseClass+"-readonly"),this.options.readonly=!this.options.readonly,this.$element},e.prototype.indeterminate=function(e){return"undefined"==typeof e?this.options.indeterminate:(e=!!e,this.$wrapper[e?"addClass":"removeClass"](""+this.options.baseClass+"-indeterminate"),this.$element.prop("indeterminate",e),this.options.indeterminate=e,this.$element)},e.prototype.toggleIndeterminate=function(){return this.$element.prop("indeterminate",!this.options.indeterminate),this.$wrapper.toggleClass(""+this.options.baseClass+"-indeterminate"),this.options.indeterminate=!this.options.indeterminate,this.$element},e.prototype.onColor=function(e){var t;return t=this.options.onColor,"undefined"==typeof e?t:(null!=t&&this.$on.removeClass(""+this.options.baseClass+"-"+t),this.$on.addClass(""+this.options.baseClass+"-"+e),this.options.onColor=e,this.$element)},e.prototype.offColor=function(e){var t;return t=this.options.offColor,"undefined"==typeof e?t:(null!=t&&this.$off.removeClass(""+this.options.baseClass+"-"+t),this.$off.addClass(""+this.options.baseClass+"-"+e),this.options.offColor=e,this.$element)},e.prototype.onText=function(e){return"undefined"==typeof e?this.options.onText:(this.$on.html(e),this.options.onText=e,this.$element)},e.prototype.offText=function(e){return"undefined"==typeof e?this.options.offText:(this.$off.html(e),this.options.offText=e,this.$element)},e.prototype.labelText=function(e){return"undefined"==typeof e?this.options.labelText:(this.$label.html(e),this.options.labelText=e,this.$element)},e.prototype.baseClass=function(){return this.options.baseClass},e.prototype.wrapperClass=function(e){return"undefined"==typeof e?this.options.wrapperClass:(e||(e=n.fn.bootstrapSwitch.defaults.wrapperClass),this.$wrapper.removeClass(this._getClasses(this.options.wrapperClass).join(" ")),this.$wrapper.addClass(this._getClasses(e).join(" ")),this.options.wrapperClass=e,this.$element)},e.prototype.onInit=function(e){return"undefined"==typeof e?this.options.onInit:(e||(e=n.fn.bootstrapSwitch.defaults.onInit),this.options.onInit=e,this.$element)},e.prototype.onSwitchChange=function(e){return"undefined"==typeof e?this.options.onSwitchChange:(e||(e=n.fn.bootstrapSwitch.defaults.onSwitchChange),this.options.onSwitchChange=e,this.$element)},e.prototype.destroy=function(){var e;return e=this.$element.closest("form"),e.length&&e.off("reset.bootstrapSwitch").removeData("bootstrap-switch"),this.$container.children().not(this.$element).remove(),this.$element.unwrap().unwrap().off(".bootstrapSwitch").removeData("bootstrap-switch"),this.$element},e.prototype._elementHandlers=function(){return this.$element.on({"change.bootstrapSwitch":function(e){return function(r,i){var s;return r.preventDefault(),r.stopPropagation(),r.stopImmediatePropagation(),s=e.$element.is(":checked"),s!==e.options.state?(e.options.state=s,e.$wrapper.removeClass(s?""+e.options.baseClass+"-off":""+e.options.baseClass+"-on").addClass(s?""+e.options.baseClass+"-on":""+e.options.baseClass+"-off"),i?void 0:(e.$element.is(":radio")&&n("[name='"+e.$element.attr("name")+"']").not(e.$element).prop("checked",!1).trigger("change.bootstrapSwitch",!0),e.$element.trigger("switchChange.bootstrapSwitch",[s]))):void 0}}(this),"focus.bootstrapSwitch":function(e){return function(n){return n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),e.$wrapper.addClass(""+e.options.baseClass+"-focused")}}(this),"blur.bootstrapSwitch":function(e){return function(n){return n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),e.$wrapper.removeClass(""+e.options.baseClass+"-focused")}}(this),"keydown.bootstrapSwitch":function(e){return function(n){if(n.which&&!e.options.disabled&&!e.options.readonly&&!e.options.indeterminate)switch(n.which){case 32:return n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),e.toggleState();case 37:return n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),e.state(!1);case 39:return n.preventDefault(),n.stopPropagation(),n.stopImmediatePropagation(),e.state(!0)}}}(this)})},e.prototype._handleHandlers=function(){return this.$on.on("click.bootstrapSwitch",function(e){return function(){return e.state(!1),e.$element.trigger("focus.bootstrapSwitch")}}(this)),this.$off.on("click.bootstrapSwitch",function(e){return function(){return e.state(!0),e.$element.trigger("focus.bootstrapSwitch")}}(this))},e.prototype._labelHandlers=function(){return this.$label.on({"mousemove.bootstrapSwitch touchmove.bootstrapSwitch":function(e){return function(n){var r,i,s,o;if(e.drag)return n.preventDefault(),i=n.pageX||n.originalEvent.touches[0].pageX,s=(i-e.$wrapper.offset().left)/e.$wrapper.width()*100,r=25,o=75,r>s?s=r:s>o&&(s=o),e.$container.css("margin-left",""+(s-o)+"%"),e.$element.trigger("focus.bootstrapSwitch")}}(this),"mousedown.bootstrapSwitch touchstart.bootstrapSwitch":function(e){return function(n){return e.drag||e.options.disabled||e.options.readonly||e.options.indeterminate?void 0:(n.preventDefault(),e.drag=!0,e.options.animate&&e.$wrapper.removeClass(""+e.options.baseClass+"-animate"),e.$element.trigger("focus.bootstrapSwitch"))}}(this),"mouseup.bootstrapSwitch touchend.bootstrapSwitch":function(e){return function(n){return e.drag?(n.preventDefault(),e.drag=!1,e.$element.prop("checked",parseInt(e.$container.css("margin-left"),10)>-(e.$container.width()/6)).trigger("change.bootstrapSwitch"),e.$container.css("margin-left",""),e.options.animate?e.$wrapper.addClass(""+e.options.baseClass+"-animate"):void 0):void 0}}(this),"mouseleave.bootstrapSwitch":function(e){return function(){return e.$label.trigger("mouseup.bootstrapSwitch")}}(this),"click.bootstrapSwitch":function(e){return function(){return e.toggleState(),e.$element.trigger("focus.bootstrapSwitch")}}(this)})},e.prototype._formHandler=function(){var e;return e=this.$element.closest("form"),e.data("bootstrap-switch")?void 0:e.on("reset.bootstrapSwitch",function(){return r.setTimeout(function(){return e.find("input").filter(function(){return n(this).data("bootstrap-switch")}).each(function(){return n(this).bootstrapSwitch("state",this.checked)})},1)}).data("bootstrap-switch",!0)},e.prototype._getClasses=function(e){var t,r,i,s;if(!n.isArray(e))return[""+this.options.baseClass+"-"+e];for(r=[],i=0,s=e.length;s>i;i++)t=e[i],r.push(""+this.options.baseClass+"-"+t);return r},e}(),n.fn.bootstrapSwitch=function(){var r,s,u;return s=arguments[0],r=2<=arguments.length?e.call(arguments,1):[],u=this,this.each(function(){var e,t;return e=n(this),t=e.data("bootstrap-switch"),t||e.data("bootstrap-switch",t=new i(this,s)),"string"==typeof s?u=t[s].apply(t,r):void 0}),u},n.fn.bootstrapSwitch.Constructor=i,n.fn.bootstrapSwitch.defaults={state:!0,size:null,animate:!0,disabled:!1,readonly:!1,indeterminate:!1,onColor:"primary",offColor:"default",onText:"ON",offText:"OFF",labelText:"&nbsp;",baseClass:"bootstrap-switch",wrapperClass:"wrapper",onInit:function(){},onSwitchChange:function(){}}}(window.jQuery,window)}.call(this),define("bootswitch",["jquery","bootstrap"],function(){}),function(e,t){function r(n,r){n=e(n);var i=n.is("body"),o=n.data("LoadingOverlayCount");o===t&&(o=0);if(o==0){var u=e("<div>",{"class":"loadingoverlay",css:{"background-color":r.color,display:"flex","flex-direction":"column","align-items":"center","justify-content":"center"}});r.image&&u.css({"background-image":"url("+r.image+")","background-position":"center center","background-repeat":"no-repeat"}),r.fontawesome&&e("<div>",{"class":"loadingoverlay_fontawesome "+r.fontawesome}).appendTo(u),r.custom&&e(r.custom).appendTo(u),i?u.css({position:"fixed",top:0,left:0,width:"100%",height:"100%"}):(u.css({position:"absolute",top:0,left:0}),n.css("position")=="static"&&u.css({top:n.position().top+parseInt(n.css("margin-top"))+parseInt(n.css("border-top-width")),left:n.position().left+parseInt(n.css("margin-left"))+parseInt(n.css("border-left-width"))})),s(n,u,r,i);if(r.resizeInterval>0){var a=setInterval(function(){s(n,u,r,i)},r.resizeInterval);n.data("LoadingOverlayResizeIntervalId",a)}u.appendTo(n)}o++,n.data("LoadingOverlayCount",o)}function i(n,r){n=e(n);var i=n.data("LoadingOverlayCount");if(i===t)return;i--;if(r||i<=0){var s=n.data("LoadingOverlayResizeIntervalId");s&&clearInterval(s),n.removeData("LoadingOverlayCount").removeData("LoadingOverlayResizeIntervalId"),n.children(".loadingoverlay").remove()}else n.data("LoadingOverlayCount",i)}function s(t,n,r,i){i||n.css({width:t.innerWidth(),height:t.innerHeight()});var s="auto";if(r.size&&r.size!="auto"){var o=i?e(window):t;s=Math.min(o.innerWidth(),o.innerHeight())*parseFloat(r.size)/100,r.maxSize&&s>parseInt(r.maxSize)&&(s=parseInt(r.maxSize)+"px"),r.minSize&&s<parseInt(r.minSize)&&(s=parseInt(r.minSize)+"px")}n.css("background-size",s),n.children(".loadingoverlay_fontawesome").css("font-size",s)}var n={color:"rgba(255, 255, 255, 0.8)",custom:"",fontawesome:"",image:"loading.gif",maxSize:"100px",minSize:"20px",resizeInterval:0,size:"50%"};e.LoadingOverlaySetup=function(t){e.extend(!0,n,t)},e.LoadingOverlay=function(t,s){switch(t.toLowerCase()){case"show":var o=e.extend(!0,{},n,s);r("body",o);break;case"hide":i("body",s)}},e.fn.LoadingOverlay=function(t,s){switch(t.toLowerCase()){case"show":var o=e.extend(!0,{},n,s);return this.each(function(){r(this,o)});case"hide":return this.each(function(){i(this,s)})}}}(jQuery),define("isLoading",["jquery"],function(){}),function(e){typeof e.fn.each2=="undefined"&&e.extend(e.fn,{each2:function(t){var n=e([0]),r=-1,i=this.length;while(++r<i&&(n.context=n[0]=this[r])&&t.call(n[0],r,n)!==!1);return this}})}(jQuery),function(e,t){"use strict";function p(t){var n=e(document.createTextNode(""));t.before(n),n.before(t),n.remove()}function d(e){function t(e){return h[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function v(e,t){var n=0,r=t.length;for(;n<r;n+=1)if(g(e,t[n]))return n;return-1}function m(){var t=e(c);t.appendTo("body");var n={width:t.width()-t[0].clientWidth,height:t.height()-t[0].clientHeight};return t.remove(),n}function g(e,n){return e===n?!0:e===t||n===t?!1:e===null||n===null?!1:e.constructor===String?e+""==n+"":n.constructor===String?n+""==e+"":!1}function y(t,n){var r,i,s;if(t===null||t.length<1)return[];r=t.split(n);for(i=0,s=r.length;i<s;i+=1)r[i]=e.trim(r[i]);return r}function b(e){return e.outerWidth(!1)-e.width()}function w(n){var r="keyup-change-value";n.on("keydown",function(){e.data(n,r)===t&&e.data(n,r,n.val())}),n.on("keyup",function(){var i=e.data(n,r);i!==t&&n.val()!==i&&(e.removeData(n,r),n.trigger("keyup-change"))})}function E(n){n.on("mousemove",function(n){var r=a;(r===t||r.x!==n.pageX||r.y!==n.pageY)&&e(n.target).trigger("mousemove-filtered",n)})}function S(e,n,r){r=r||t;var i;return function(){var t=arguments;window.clearTimeout(i),i=window.setTimeout(function(){n.apply(r,t)},e)}}function x(e,t){var n=S(e,function(e){t.trigger("scroll-debounced",e)});t.on("scroll",function(e){v(e.target,t.get())>=0&&n(e)})}function T(e){if(e[0]===document.activeElement)return;window.setTimeout(function(){var t=e[0],n=e.val().length,r;e.focus();var i=t.offsetWidth>0||t.offsetHeight>0;i&&t===document.activeElement&&(t.setSelectionRange?t.setSelectionRange(n,n):t.createTextRange&&(r=t.createTextRange(),r.collapse(!1),r.select()))},0)}function N(t){t=e(t)[0];var n=0,r=0;if("selectionStart"in t)n=t.selectionStart,r=t.selectionEnd-n;else if("selection"in document){t.focus();var i=document.selection.createRange();r=document.selection.createRange().text.length,i.moveStart("character",-t.value.length),n=i.text.length-r}return{offset:n,length:r}}function C(e){e.preventDefault(),e.stopPropagation()}function k(e){e.preventDefault(),e.stopImmediatePropagation()}function L(t){if(!u){var n=t[0].currentStyle||window.getComputedStyle(t[0],null);u=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:n.fontSize,fontFamily:n.fontFamily,fontStyle:n.fontStyle,fontWeight:n.fontWeight,letterSpacing:n.letterSpacing,textTransform:n.textTransform,whiteSpace:"nowrap"}),u.attr("class","select2-sizer"),e("body").append(u)}return u.text(t.val()),u.width()}function A(t,n,r){var i,s=[],o;i=e.trim(t.attr("class")),i&&(i=""+i,e(i.split(/\s+/)).each2(function(){this.indexOf("select2-")===0&&s.push(this)})),i=e.trim(n.attr("class")),i&&(i=""+i,e(i.split(/\s+/)).each2(function(){this.indexOf("select2-")!==0&&(o=r(this),o&&s.push(o))})),t.attr("class",s.join(" "))}function O(e,t,n,r){var i=d(e.toUpperCase()).indexOf(d(t.toUpperCase())),s=t.length;if(i<0){n.push(r(e));return}n.push(r(e.substring(0,i))),n.push("<span class='select2-match'>"),n.push(r(e.substring(i,i+s))),n.push("</span>"),n.push(r(e.substring(i+s,e.length)))}function M(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})}function _(n){var r,i=null,s=n.quietMillis||100,o=n.url,u=this;return function(a){window.clearTimeout(r),r=window.setTimeout(function(){var r=n.data,s=o,f=n.transport||e.fn.select2.ajaxDefaults.transport,l={type:n.type||"GET",cache:n.cache||!1,jsonpCallback:n.jsonpCallback||t,dataType:n.dataType||"json"},c=e.extend({},e.fn.select2.ajaxDefaults.params,l);r=r?r.call(u,a.term,a.page,a.context):null,s=typeof s=="function"?s.call(u,a.term,a.page,a.context):s,i&&typeof i.abort=="function"&&i.abort(),n.params&&(e.isFunction(n.params)?e.extend(c,n.params.call(u)):e.extend(c,n.params)),e.extend(c,{url:s,dataType:n.dataType,data:r,success:function(e){var t=n.results(e,a.page,a);a.callback(t)},error:function(e,t,n){var r={hasError:!0,jqXHR:e,textStatus:t,errorThrown:n};a.callback(r)}}),i=f.call(u,c)},s)}}function D(t){var n=t,r,i,s=function(e){return""+e.text};e.isArray(n)&&(i=n,n={results:i}),e.isFunction(n)===!1&&(i=n,n=function(){return i});var o=n();return o.text&&(s=o.text,e.isFunction(s)||(r=o.text,s=function(e){return e[r]})),function(t){var r=t.term,i={results:[]},o;if(r===""){t.callback(n());return}o=function(n,i){var u,a;n=n[0];if(n.children){u={};for(a in n)n.hasOwnProperty(a)&&(u[a]=n[a]);u.children=[],e(n.children).each2(function(e,t){o(t,u.children)}),(u.children.length||t.matcher(r,s(u),n))&&i.push(u)}else t.matcher(r,s(n),n)&&i.push(n)},e(n().results).each2(function(e,t){o(t,i.results)}),t.callback(i)}}function P(n){var r=e.isFunction(n);return function(i){var s=i.term,o={results:[]},u=r?n(i):n;e.isArray(u)&&(e(u).each(function(){var e=this.text!==t,n=e?this.text:this;(s===""||i.matcher(s,n))&&o.results.push(e?this:{id:this,text:this})}),i.callback(o))}}function H(t,n){if(e.isFunction(t))return!0;if(!t)return!1;if(typeof t=="string")return!0;throw new Error(n+" must be a string, function, or falsy value")}function B(t,n){if(e.isFunction(t)){var r=Array.prototype.slice.call(arguments,2);return t.apply(n,r)}return t}function j(t){var n=0;return e.each(t,function(e,t){t.children?n+=j(t.children):n++}),n}function F(e,n,r,i){var s=e,o=!1,u,a,f,l,c;if(!i.createSearchChoice||!i.tokenSeparators||i.tokenSeparators.length<1)return t;for(;;){a=-1;for(f=0,l=i.tokenSeparators.length;f<l;f++){c=i.tokenSeparators[f],a=e.indexOf(c);if(a>=0)break}if(a<0)break;u=e.substring(0,a),e=e.substring(a+c.length);if(u.length>0){u=i.createSearchChoice.call(this,u,n);if(u!==t&&u!==null&&i.id(u)!==t&&i.id(u)!==null){o=!1;for(f=0,l=n.length;f<l;f++)if(g(i.id(u),i.id(n[f]))){o=!0;break}o||r(u)}}}if(s!==e)return e}function I(){var t=this;e.each(arguments,function(e,n){t[n].remove(),t[n]=null})}function q(t,n){var r=function(){};return r.prototype=new t,r.prototype.constructor=r,r.prototype.parent=t.prototype,r.prototype=e.extend(r.prototype,n),r}if(window.Select2!==t)return;var n,r,i,s,o,u,a={x:0,y:0},f,l,n={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(e){e=e.which?e.which:e;switch(e){case n.LEFT:case n.RIGHT:case n.UP:case n.DOWN:return!0}return!1},isControl:function(e){var t=e.which;switch(t){case n.SHIFT:case n.CTRL:case n.ALT:return!0}return e.metaKey?!0:!1},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&e<=123}},c="<div class='select2-measure-scrollbar'></div>",h={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};f=e(document),o=function(){var e=1;return function(){return e++}}(),r=q(Object,{bind:function(e){var t=this;return function(){e.apply(t,arguments)}},init:function(n){var r,i,s=".select2-results";this.opts=n=this.prepareOpts(n),this.id=n.id,n.element.data("select2")!==t&&n.element.data("select2")!==null&&n.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(n.element.attr("id")||"autogen"+o()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",n.element.attr("title")),this.body=e("body"),A(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",n.element.attr("style")),this.container.css(B(n.containerCss,this.opts.element)),this.container.addClass(B(n.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",C),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),A(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(B(n.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",C),this.results=r=this.container.find(s),this.search=i=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",C),E(this.results),this.dropdown.on("mousemove-filtered",s,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",s,this.bind(function(e){this._touchEvent=!0,this.highlightUnderEvent(e)})),this.dropdown.on("touchmove",s,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",s,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(e){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),x(80,this.results),this.dropdown.on("scroll-debounced",s,this.bind(this.loadMoreIfNeeded)),e(this.container).on("change",".select2-input",function(e){e.stopPropagation()}),e(this.dropdown).on("change",".select2-input",function(e){e.stopPropagation()}),e.fn.mousewheel&&r.mousewheel(function(e,t,n,i){var s=r.scrollTop();i>0&&s-i<=0?(r.scrollTop(0),C(e)):i<0&&r.get(0).scrollHeight-r.scrollTop()+i<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),C(e))}),w(i),i.on("keyup-change input paste",this.bind(this.updateResults)),i.on("focus",function(){i.addClass("select2-focused")}),i.on("blur",function(){i.removeClass("select2-focused")}),this.dropdown.on("mouseup",s,this.bind(function(t){e(t.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(t),this.selectHighlighted(t))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(e){e.stopPropagation()}),this.nextSearchTerm=t,e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),n.maximumInputLength!==null&&this.search.attr("maxlength",n.maximumInputLength);var u=n.element.prop("disabled");u===t&&(u=!1),this.enable(!u);var a=n.element.prop("readonly");a===t&&(a=!1),this.readonly(a),l=l||m(),this.autofocus=n.element.prop("autofocus"),n.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",n.searchInputPlaceholder)},destroy:function(){u=null;var e=this.opts.element,n=e.data("select2"),r=this;this.close(),e.length&&e[0].detachEvent&&e.each(function(){this.detachEvent("onpropertychange",r._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,n!==t&&(n.container.remove(),n.liveRegion.remove(),n.dropdown.remove(),e.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?e.attr({tabindex:this.elementTabIndex}):e.removeAttr("tabindex"),e.show()),I.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(e){if(e.is("option"))return{id:e.prop("value"),text:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:g(e.attr("locked"),"locked")||g(e.data("locked"),!0)};if(e.is("optgroup"))return{text:e.attr("label"),children:[],element:e.get(),css:e.attr("class")}},prepareOpts:function(n){var r,i,s,u,a=this;r=n.element,r.get(0).tagName.toLowerCase()==="select"&&(this.select=i=n.element),i&&e.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in n)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),n=e.extend({},{populateResults:function(r,i,s){var u,f=this.opts.id,l=this.liveRegion;u=function(r,i,c){var h,p,d,v,m,g,y,b,w,E;r=n.sortResults(r,i,s);var S=[];for(h=0,p=r.length;h<p;h+=1)d=r[h],m=d.disabled===!0,v=!m&&f(d)!==t,g=d.children&&d.children.length>0,y=e("<li></li>"),y.addClass("select2-results-dept-"+c),y.addClass("select2-result"),y.addClass(v?"select2-result-selectable":"select2-result-unselectable"),m&&y.addClass("select2-disabled"),g&&y.addClass("select2-result-with-children"),y.addClass(a.opts.formatResultCssClass(d)),y.attr("role","presentation"),b=e(document.createElement("div")),b.addClass("select2-result-label"),b.attr("id","select2-result-label-"+o()),b.attr("role","option"),E=n.formatResult(d,b,s,a.opts.escapeMarkup),E!==t&&(b.html(E),y.append(b)),g&&(w=e("<ul></ul>"),w.addClass("select2-result-sub"),u(d.children,w,c+1),y.append(w)),y.data("select2-data",d),S.push(y[0]);i.append(S),l.text(n.formatMatches(r.length))},u(i,r,0)}},e.fn.select2.defaults,n),typeof n.id!="function"&&(s=n.id,n.id=function(e){return e[s]});if(e.isArray(n.element.data("select2Tags"))){if("tags"in n)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+n.element.attr("id");n.tags=n.element.data("select2Tags")}i?(n.query=this.bind(function(e){var n={results:[],more:!1},i=e.term,s,o,u;u=function(t,n){var r;t.is("option")?e.matcher(i,t.text(),t)&&n.push(a.optionToData(t)):t.is("optgroup")&&(r=a.optionToData(t),t.children().each2(function(e,t){u(t,r.children)}),r.children.length>0&&n.push(r))},s=r.children(),this.getPlaceholder()!==t&&s.length>0&&(o=this.getPlaceholderOption(),o&&(s=s.not(o))),s.each2(function(e,t){u(t,n.results)}),e.callback(n)}),n.id=function(e){return e.id}):"query"in n||("ajax"in n?(u=n.element.data("ajax-url"),u&&u.length>0&&(n.ajax.url=u),n.query=_.call(n.element,n.ajax)):"data"in n?n.query=D(n.data):"tags"in n&&(n.query=P(n.tags),n.createSearchChoice===t&&(n.createSearchChoice=function(t){return{id:e.trim(t),text:e.trim(t)}}),n.initSelection===t&&(n.initSelection=function(t,r){var i=[];e(y(t.val(),n.separator)).each(function(){var t={id:this,text:this},r=n.tags;e.isFunction(r)&&(r=r()),e(r).each(function(){if(g(this.id,t.id))return t=this,!1}),i.push(t)}),r(i)})));if(typeof n.query!="function")throw"query function not defined for Select2 "+n.element.attr("id");if(n.createSearchChoicePosition==="top")n.createSearchChoicePosition=function(e,t){e.unshift(t)};else if(n.createSearchChoicePosition==="bottom")n.createSearchChoicePosition=function(e,t){e.push(t)};else if(typeof n.createSearchChoicePosition!="function")throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return n},monitorSource:function(){var n=this.opts.element,r,i=this;n.on("change.select2",this.bind(function(e){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var e=n.prop("disabled");e===t&&(e=!1),this.enable(!e);var r=n.prop("readonly");r===t&&(r=!1),this.readonly(r),A(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(B(this.opts.containerCssClass,this.opts.element)),A(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(B(this.opts.dropdownCssClass,this.opts.element))}),n.length&&n[0].attachEvent&&n.each(function(){this.attachEvent("onpropertychange",i._sync)}),r=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,r!==t&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new r(function(t){e.each(t,i._sync)}),this.propertyObserver.observe(n.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(t){var n=e.Event("select2-selecting",{val:this.id(t),object:t,choice:t});return this.opts.element.trigger(n),!n.isDefaultPrevented()},triggerChange:function(t){t=t||{},t=e.extend({},t,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(t),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},setScrollContainer:function(e){this.scrollResult=e},enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",t),this.close(),this.enabledInterface=e,!0)},enable:function(e){e===t&&(e=!0);if(this._enabled===e)return;this._enabled=e,this.opts.element.prop("disabled",!e),this.enableInterface()},disable:function(){this.enable(!1)},readonly:function(e){e===t&&(e=!1);if(this._readonly===e)return;this._readonly=e,this.opts.element.prop("readonly",e),this.enableInterface()},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t=this.dropdown,n=this.container.offset(),r=this.container.outerHeight(!1),i=this.container.outerWidth(!1),s=t.outerHeight(!1),o=e(window),u=o.width(),a=o.height(),f=o.scrollLeft()+u,c=o.scrollTop()+a,h=n.top+r,p=n.left,d=h+s<=c,v=n.top-s>=o.scrollTop(),m=t.outerWidth(!1),g=p+m<=f,y=t.hasClass("select2-drop-above"),b,w,E,S,x;y?(w=!0,!v&&d&&(E=!0,w=!1)):(w=!1,!d&&v&&(E=!0,w=!0)),E&&(t.hide(),n=this.container.offset(),r=this.container.outerHeight(!1),i=this.container.outerWidth(!1),s=t.outerHeight(!1),f=o.scrollLeft()+u,c=o.scrollTop()+a,h=n.top+r,p=n.left,m=t.outerWidth(!1),g=p+m<=f,t.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(x=e(".select2-results",t)[0],t.addClass("select2-drop-auto-width"),t.css("width",""),m=t.outerWidth(!1)+(x.scrollHeight===x.clientHeight?0:l.width),m>i?i=m:m=i,s=t.outerHeight(!1),g=p+m<=f):this.container.removeClass("select2-drop-auto-width"),this.body.css("position")!=="static"&&(b=this.body.offset(),h-=b.top,p-=b.left),g||(p=n.left+this.container.outerWidth(!1)-m),S={left:p,width:i},w?(S.top=n.top-s,S.bottom="auto",this.container.addClass("select2-drop-above"),t.addClass("select2-drop-above")):(S.top=h,S.bottom="auto",this.container.removeClass("select2-drop-above"),t.removeClass("select2-drop-above")),S=e.extend(S,B(this.opts.dropdownCss,this.opts.element)),t.css(S)},shouldOpen:function(){var t;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(t=e.Event("select2-opening"),this.opts.element.trigger(t),!t.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),f.on("mousemove.select2Event",function(e){a.x=e.pageX,a.y=e.pageY}),!0):!1},opening:function(){var t=this.containerEventName,n="scroll."+t,r="resize."+t,i="orientationchange."+t,s;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),s=e("#select2-drop-mask"),s.length==0&&(s=e(document.createElement("div")),s.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),s.hide(),s.appendTo(this.body),s.on("mousedown touchstart click",function(t){p(s);var n=e("#select2-drop"),r;n.length>0&&(r=n.data("select2"),r.opts.selectOnBlur&&r.selectHighlighted({noFocus:!0}),r.close(),t.preventDefault(),t.stopPropagation())})),this.dropdown.prev()[0]!==s[0]&&this.dropdown.before(s),e("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),s.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var o=this;this.container.parents().add(window).each(function(){e(this).on(r+" "+n+" "+i,function(e){o.opened()&&o.positionDropdown()})})},close:function(){if(!this.opened())return;var t=this.containerEventName,n="scroll."+t,r="resize."+t,i="orientationchange."+t;this.container.parents().add(window).each(function(){e(this).off(n).off(r).off(i)}),this.clearDropdownAlignmentPreference(),e("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),f.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(e.Event("select2-close"))},externalSearch:function(e){this.open(),this.search.val(e),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return B(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var t=this.scrollResult||this.results,n,r,i,s,o,u,a,f;r=this.highlight();if(r<0)return;if(r==0){t.scrollTop(0);return}n=this.findHighlightableChoices().find(".select2-result-label"),i=e(n[r]),f=(i.offset()||{}).top||0,s=f+i.outerHeight(!0),r===n.length-1&&(a=t.find("li.select2-more-results"),a.length>0&&(s=a.offset().top+a.outerHeight(!0))),o=t.offset().top+t.outerHeight(!0),s>o&&t.scrollTop(t.scrollTop()+(s-o)),u=f-t.offset().top,u<0&&i.css("display")!="none"&&t.scrollTop(t.scrollTop()+u)},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(t){var n=this.findHighlightableChoices(),r=this.highlight();while(r>-1&&r<n.length){r+=t;var i=e(n[r]);if(i.hasClass("select2-result-selectable")&&!i.hasClass("select2-disabled")&&!i.hasClass("select2-selected")){this.highlight(r);break}}},highlight:function(t){var n=this.findHighlightableChoices(),r,i;if(arguments.length===0)return v(n.filter(".select2-highlighted")[0],n.get());t>=n.length&&(t=n.length-1),t<0&&(t=0),this.removeHighlight(),r=e(n[t]),r.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",r.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(r.text()),i=r.data("select2-data"),i&&this.opts.element.trigger({type:"select2-highlight",val:this.id(i),choice:i})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(t){var n=e(t.target).closest(".select2-result-selectable");if(n.length>0&&!n.is(".select2-highlighted")){var r=this.findHighlightableChoices();this.highlight(r.index(n))}else n.length==0&&this.removeHighlight()},loadMoreIfNeeded:function(){var e=this.results,t=e.find("li.select2-more-results"),n,r=this.resultsPage+1,i=this,s=this.search.val(),o=this.context;if(t.length===0)return;n=t.offset().top-e.offset().top-e.height(),n<=this.opts.loadMorePadding&&(t.addClass("select2-active"),this.opts.query({element:this.opts.element,term:s,page:r,context:o,matcher:this.opts.matcher,callback:this.bind(function(n){if(!i.opened())return;i.opts.populateResults.call(this,e,n.results,{term:s,page:r,context:o}),i.postprocessResults(n,!1,!1),n.more===!0?(t.detach().appendTo(e).text(B(i.opts.formatLoadMore,i.opts.element,r+1)),window.setTimeout(function(){i.loadMoreIfNeeded()},10)):t.remove(),i.positionDropdown(),i.resultsPage=r,i.context=n.context,this.opts.element.trigger({type:"select2-loaded",items:n})})}))},tokenize:function(){},updateResults:function(n){function h(){r.removeClass("select2-active"),u.positionDropdown(),i.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?u.liveRegion.text(i.text()):u.liveRegion.text(u.opts.formatMatches(i.find(".select2-result-selectable").length))}function p(e){i.html(e),h()}var r=this.search,i=this.results,s=this.opts,o,u=this,a,f=e.trim(r.val()),l=e.data(this.container,"select2-last-term"),c;if(n!==!0&&l&&g(f,l))return;e.data(this.container,"select2-last-term",f);if(n!==!0&&(this.showSearchInput===!1||!this.opened()))return;c=++this.queryCount;var d=this.getMaximumSelectionSize();if(d>=1){o=this.data();if(e.isArray(o)&&o.length>=d&&H(s.formatSelectionTooBig,"formatSelectionTooBig")){p("<li class='select2-selection-limit'>"+B(s.formatSelectionTooBig,s.element,d)+"</li>");return}}if(f.length<s.minimumInputLength){H(s.formatInputTooShort,"formatInputTooShort")?p("<li class='select2-no-results'>"+B(s.formatInputTooShort,s.element,f,s.minimumInputLength)+"</li>"):p(""),n&&this.showSearch&&this.showSearch(!0);return}if(s.maximumInputLength&&f.length>s.maximumInputLength){H(s.formatInputTooLong,"formatInputTooLong")?p("<li class='select2-no-results'>"+B(s.formatInputTooLong,s.element,f,s.maximumInputLength)+"</li>"):p("");return}s.formatSearching&&this.findHighlightableChoices().length===0&&p("<li class='select2-searching'>"+B(s.formatSearching,s.element)+"</li>"),r.addClass("select2-active"),this.removeHighlight(),a=this.tokenize(),a!=t&&a!=null&&r.val(a),this.resultsPage=1,s.query({element:s.element,term:f,page:this.resultsPage,context:null,matcher:s.matcher,callback:this.bind(function(o){var a;if(c!=this.queryCount)return;if(!this.opened()){this.search.removeClass("select2-active");return}if(o.hasError!==t&&H(s.formatAjaxError,"formatAjaxError")){p("<li class='select2-ajax-error'>"+B(s.formatAjaxError,s.element,o.jqXHR,o.textStatus,o.errorThrown)+"</li>");return}this.context=o.context===t?null:o.context,this.opts.createSearchChoice&&r.val()!==""&&(a=this.opts.createSearchChoice.call(u,r.val(),o.results),a!==t&&a!==null&&u.id(a)!==t&&u.id(a)!==null&&e(o.results).filter(function(){return g(u.id(this),u.id(a))}).length===0&&this.opts.createSearchChoicePosition(o.results,a));if(o.results.length===0&&H(s.formatNoMatches,"formatNoMatches")){p("<li class='select2-no-results'>"+B(s.formatNoMatches,s.element,r.val())+"</li>");return}i.empty(),u.opts.populateResults.call(this,i,o.results,{term:f,page:this.resultsPage,context:null}),o.more===!0&&H(s.formatLoadMore,"formatLoadMore")&&(i.append("<li class='select2-more-results'>"+s.escapeMarkup(B(s.formatLoadMore,s.element,this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(o,n),h(),this.opts.element.trigger({type:"select2-loaded",items:o})})})},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){T(this.search)},selectHighlighted:function(e){if(this._touchMoved){this.clearTouchMoved();return}var t=this.highlight(),n=this.results.find(".select2-highlighted"),r=n.closest(".select2-result").data("select2-data");r?(this.highlight(t),this.onSelect(r,e)):e&&e.noFocus&&this.close()},getPlaceholder:function(){var e;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((e=this.getPlaceholderOption())!==t?e.text():t)},getPlaceholderOption:function(){if(this.select){var n=this.select.children("option").first();if(this.opts.placeholderOption!==t)return this.opts.placeholderOption==="first"&&n||typeof this.opts.placeholderOption=="function"&&this.opts.placeholderOption(this.select);if(e.trim(n.text())===""&&n.val()==="")return n}},initContainerWidth:function(){function n(){var n,r,i,s,o,u;if(this.opts.width==="off")return null;if(this.opts.width==="element")return this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px";if(this.opts.width==="copy"||this.opts.width==="resolve"){n=this.opts.element.attr("style");if(n!==t){r=n.split(";");for(s=0,o=r.length;s<o;s+=1){u=r[s].replace(/\s/g,""),i=u.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i);if(i!==null&&i.length>=1)return i[1]}}return this.opts.width==="resolve"?(n=this.opts.element.css("width"),n.indexOf("%")>0?n:this.opts.element.outerWidth(!1)===0?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}var r=n.call(this);r!==null&&this.container.css("width",r)}}),i=q(r,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return t},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var n,r,i;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),n=this.search.get(0),n.createTextRange?(r=n.createTextRange(),r.collapse(!1),r.select()):n.setSelectionRange&&(i=this.search.val().length,n.setSelectionRange(i,i))),this.search.val()===""&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(e.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"selection","focusser")},initContainer:function(){var t,r=this.container,i=this.dropdown,s=o(),u;this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=t=r.find(".select2-choice"),this.focusser=r.find(".select2-focusser"),t.find(".select2-chosen").attr("id","select2-chosen-"+s),this.focusser.attr("aria-labelledby","select2-chosen-"+s),this.results.attr("id","select2-results-"+s),this.search.attr("aria-owns","select2-results-"+s),this.focusser.attr("id","s2id_autogen"+s),u=e("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(u.text()).attr("for",this.focusser.attr("id"));var a=this.opts.element.attr("title");this.opts.element.attr("title",a||u.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(e("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(229==e.keyCode)return;if(e.which===n.PAGE_UP||e.which===n.PAGE_DOWN){C(e);return}switch(e.which){case n.UP:case n.DOWN:this.moveHighlight(e.which===n.UP?-1:1),C(e);return;case n.ENTER:this.selectHighlighted(),C(e);return;case n.TAB:this.selectHighlighted({noFocus:!0});return;case n.ESC:this.cancel(e),C(e);return}})),this.search.on("blur",this.bind(function(e){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;if(e.which===n.TAB||n.isControl(e)||n.isFunctionKey(e)||e.which===n.ESC)return;if(this.opts.openOnEnter===!1&&e.which===n.ENTER){C(e);return}if(e.which==n.DOWN||e.which==n.UP||e.which==n.ENTER&&this.opts.openOnEnter){if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return;this.open(),C(e);return}if(e.which==n.DELETE||e.which==n.BACKSPACE){this.opts.allowClear&&this.clear(),C(e);return}})),w(this.focusser),this.focusser.on("keyup-change input",this.bind(function(e){if(this.opts.minimumResultsForSearch>=0){e.stopPropagation();if(this.opened())return;this.open()}})),t.on("mousedown touchstart","abbr",this.bind(function(e){if(!this.isInterfaceEnabled())return;this.clear(),k(e),this.close(),this.selection.focus()})),t.on("mousedown touchstart",this.bind(function(n){p(t),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),C(n)})),i.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),t.on("focus",this.bind(function(e){C(e)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(e.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(t){var n=this.selection.data("select2-data");if(n){var r=e.Event("select2-clearing");this.opts.element.trigger(r);if(r.isDefaultPrevented())return;var i=this.getPlaceholderOption();this.opts.element.val(i?i.val():""),this.selection.find(".select2-chosen").removeAttr("title").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),t!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(n),choice:n}),this.triggerChange({removed:n}))}},initSelection:function(){var e;if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var n=this;this.opts.initSelection.call(null,this.opts.element,function(e){e!==t&&e!==null&&(n.updateSelection(e),n.close(),n.setPlaceholder(),n.nextSearchTerm=n.opts.nextSearchTerm(e,n.search.val()))})}},isPlaceholderOptionSelected:function(){var e;return this.getPlaceholder()===t?!1:(e=this.getPlaceholderOption())!==t&&e.prop("selected")||this.opts.element.val()===""||this.opts.element.val()===t||this.opts.element.val()===null},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(e,t){var r=e.find("option").filter(function(){return this.selected&&!this.disabled});t(n.optionToData(r))}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=n.val(),s=null;t.query({matcher:function(e,n,r){var o=g(i,t.id(r));return o&&(s=r),o},callback:e.isFunction(r)?function(){r(s)}:e.noop})}),t},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===t?t:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var e=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&e!==t){if(this.select&&this.getPlaceholderOption()===t)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(e)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(e,t,n){var r=0,i=this,s=!0;this.findHighlightableChoices().each2(function(e,t){if(g(i.id(t.data("select2-data")),i.opts.element.val()))return r=e,!1}),n!==!1&&(t===!0&&r>=0?this.highlight(r):this.highlight(0));if(t===!0){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(j(e.results)>=o)}},showSearch:function(t){if(this.showSearchInput===t)return;this.showSearchInput=t,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!t),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!t),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",t)},onSelect:function(e,t){if(!this.triggerSelect(e))return;var n=this.opts.element.val(),r=this.data();this.opts.element.val(this.id(e)),this.updateSelection(e),this.opts.element.trigger({type:"select2-selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.close(),(!t||!t.noFocus)&&this.opts.shouldFocusInput(this)&&this.focusser.focus(),g(n,this.id(e))||this.triggerChange({added:e,removed:r})},updateSelection:function(e){var n=this.selection.find(".select2-chosen"),r,i;this.selection.data("select2-data",e),n.empty(),e!==null&&(r=this.opts.formatSelection(e,n,this.opts.escapeMarkup)),r!==t&&n.attr("title",r).append(r),i=this.opts.formatSelectionCssClass(e,n),i!==t&&n.addClass(i),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==t&&this.container.addClass("select2-allowclear")},val:function(){var e,n=!1,r=null,i=this,s=this.data();if(arguments.length===0)return this.opts.element.val();e=arguments[0],arguments.length>1&&(n=arguments[1]);if(this.select)this.select.val(e).find("option").filter(function(){return this.selected}).each2(function(e,t){return r=i.optionToData(t),!1}),this.updateSelection(r),this.setPlaceholder(),n&&this.triggerChange({added:r,removed:s});else{if(!e&&e!==0){this.clear(n);return}if(this.opts.initSelection===t)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(e),this.opts.initSelection(this.opts.element,function(e){i.opts.element.val(e?i.id(e):""),i.updateSelection(e),i.setPlaceholder(),n&&i.triggerChange({added:e,removed:s})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(e){var n,r=!1;if(arguments.length===0)return n=this.selection.data("select2-data"),n==t&&(n=null),n;arguments.length>1&&(r=arguments[1]),e?(n=this.data(),this.opts.element.val(e?this.id(e):""),this.updateSelection(e),r&&this.triggerChange({added:e,removed:n})):this.clear(r)}}),s=q(r,{createContainer:function(){var t=e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return t},prepareOpts:function(){var t=this.parent.prepareOpts.apply(this,arguments),n=this;return t.element.get(0).tagName.toLowerCase()==="select"?t.initSelection=function(e,t){var r=[];e.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(e,t){r.push(n.optionToData(t))}),t(r)}:"data"in t&&(t.initSelection=t.initSelection||function(n,r){var i=y(n.val(),t.separator),s=[];t.query({matcher:function(n,r,o){var u=e.grep(i,function(e){return g(e,t.id(o))}).length;return u&&s.push(o),u},callback:e.isFunction(r)?function(){var e=[];for(var n=0;n<i.length;n++){var o=i[n];for(var u=0;u<s.length;u++){var a=s[u];if(g(o,t.id(a))){e.push(a),s.splice(u,1);break}}}r(e)}:e.noop})}),t},selectChoice:function(e){var t=this.container.find(".select2-search-choice-focus");if(!t.length||!e||e[0]!=t[0])t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("select2-search-choice-focus"),e&&e.length&&(this.close(),e.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",e))},destroy:function(){e("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),I.call(this,"searchContainer","selection")},initContainer:function(){var t=".select2-choices",r;this.searchContainer=this.container.find(".select2-search-field"),this.selection=r=this.container.find(t);var i=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(t){i.search[0].focus(),i.selectChoice(e(this))}),this.search.attr("id","s2id_autogen"+o()),this.search.prev().text(e("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){if(this.search.attr("placeholder")&&this.search.val().length==0)return;if(!this.isInterfaceEnabled())return;this.opened()||this.open()})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(e){if(!this.isInterfaceEnabled())return;++this.keydowns;var t=r.find(".select2-search-choice-focus"),i=t.prev(".select2-search-choice:not(.select2-locked)"),s=t.next(".select2-search-choice:not(.select2-locked)"),o=N(this.search);if(!(!t.length||e.which!=n.LEFT&&e.which!=n.RIGHT&&e.which!=n.BACKSPACE&&e.which!=n.DELETE&&e.which!=n.ENTER)){var u=t;e.which==n.LEFT&&i.length?u=i:e.which==n.RIGHT?u=s.length?s:null:e.which===n.BACKSPACE?this.unselect(t.first())&&(this.search.width(10),u=i.length?i:s):e.which==n.DELETE?this.unselect(t.first())&&(this.search.width(10),u=s.length?s:null):e.which==n.ENTER&&(u=null),this.selectChoice(u),C(e),(!u||!u.length)&&this.open();return}if((e.which===n.BACKSPACE&&this.keydowns==1||e.which==n.LEFT)&&o.offset==0&&!o.length){this.selectChoice(r.find(".select2-search-choice:not(.select2-locked)").last()),C(e);return}this.selectChoice(null);if(this.opened())switch(e.which){case n.UP:case n.DOWN:this.moveHighlight(e.which===n.UP?-1:1),C(e);return;case n.ENTER:this.selectHighlighted(),C(e);return;case n.TAB:this.selectHighlighted({noFocus:!0}),this.close();return;case n.ESC:this.cancel(e),C(e);return}if(e.which===n.TAB||n.isControl(e)||n.isFunctionKey(e)||e.which===n.BACKSPACE||e.which===n.ESC)return;if(e.which===n.ENTER){if(this.opts.openOnEnter===!1)return;if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey)return}this.open(),(e.which===n.PAGE_UP||e.which===n.PAGE_DOWN)&&C(e),e.which===n.ENTER&&C(e)})),this.search.on("keyup",this.bind(function(e){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(t){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),t.stopImmediatePropagation(),this.opts.element.trigger(e.Event("select2-blur"))})),this.container.on("click",t,this.bind(function(t){if(!this.isInterfaceEnabled())return;if(e(t.target).closest(".select2-search-choice").length>0)return;this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),this.focusSearch(),t.preventDefault()})),this.container.on("focus",t,this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder()})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){var e;this.opts.element.val()===""&&this.opts.element.text()===""&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||this.opts.element.val()!==""){var n=this;this.opts.initSelection.call(null,this.opts.element,function(e){e!==t&&e!==null&&(n.updateSelection(e),n.close(),n.clearSearch())})}},clearSearch:function(){var e=this.getPlaceholder(),n=this.getMaxSearchWidth();e!==t&&this.getVal().length===0&&this.search.hasClass("select2-focused")===!1?(this.search.val(e).addClass("select2-default"),this.search.width(n>0?n:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),this.search.val()===""&&this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(e.Event("select2-open"))},close:function(){if(!this.opened())return;this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(t){var n=[],r=[],i=this;e(t).each(function(){v(i.id(this),n)<0&&(n.push(i.id(this)),r.push(this))}),t=r,this.selection.find(".select2-search-choice").remove(),e(t).each(function(){i.addSelectedChoice(this)}),i.postprocessResults()},tokenize:function(){var e=this.search.val();e=this.opts.tokenizer.call(this,e,this.data(),this.bind(this.onSelect),this.opts),e!=null&&e!=t&&(this.search.val(e),e.length>0&&this.open())},onSelect:function(e,n){if(!this.triggerSelect(e)||e.text==="")return;this.addSelectedChoice(e),this.opts.element.trigger({type:"selected",val:this.id(e),choice:e}),this.nextSearchTerm=this.opts.nextSearchTerm(e,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=t&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:e}),(!n||!n.noFocus)&&this.focusSearch()},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(n){var r=!n.locked,i=e("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),s=e("<li class='select2-search-choice select2-locked'><div></div></li>"),o=r?i:s,u=this.id(n),a=this.getVal(),f,l;f=this.opts.formatSelection(n,o.find("div"),this.opts.escapeMarkup),f!=t&&o.find("div").replaceWith("<div>"+f+"</div>"),l=this.opts.formatSelectionCssClass(n,o.find("div")),l!=t&&o.addClass(l),r&&o.find(".select2-search-choice-close").on("mousedown",C).on("click dblclick",this.bind(function(t){if(!this.isInterfaceEnabled())return;this.unselect(e(t.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),C(t),this.close(),this.focusSearch()})).on("focus",this.bind(function(){if(!this.isInterfaceEnabled())return;this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active")})),o.data("select2-data",n),o.insertBefore(this.searchContainer),a.push(u),this.setVal(a)},unselect:function(t){var n=this.getVal(),r,i;t=t.closest(".select2-search-choice");if(t.length===0)throw"Invalid argument: "+t+". Must be .select2-search-choice";r=t.data("select2-data");if(!r)return;var s=e.Event("select2-removing");s.val=this.id(r),s.choice=r,this.opts.element.trigger(s);if(s.isDefaultPrevented())return!1;while((i=v(this.id(r),n))>=0)n.splice(i,1),this.setVal(n),this.select&&this.postprocessResults();return t.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(r),choice:r}),this.triggerChange({removed:r}),!0},postprocessResults:function(e,t,n){var r=this.getVal(),i=this.results.find(".select2-result"),s=this.results.find(".select2-result-with-children"),o=this;i.each2(function(e,t){var n=o.id(t.data("select2-data"));v(n,r)>=0&&(t.addClass("select2-selected"),t.find(".select2-result-selectable").addClass("select2-selected"))}),s.each2(function(e,t){!t.is(".select2-result-selectable")&&t.find(".select2-result-selectable:not(.select2-selected)").length===0&&t.addClass("select2-selected")}),this.highlight()==-1&&n!==!1&&o.highlight(0),!this.opts.createSearchChoice&&!i.filter(".select2-result:not(.select2-selected)").length>0&&(!e||e&&!e.more&&this.results.find(".select2-no-results").length===0)&&H(o.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+B(o.opts.formatNoMatches,o.opts.element,o.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-b(this.search)},resizeSearch:function(){var e,t,n,r,i,s=b(this.search);e=L(this.search)+10,t=this.search.offset().left,n=this.selection.width(),r=this.selection.offset().left,i=n-(t-r)-s,this.opts.noResizeSearch?i=e:(i<e&&(i=n-s),i<40&&(i=n-s),i<=0&&(i=e)),this.search.width(Math.floor(i))},getVal:function(){var e;return this.select?(e=this.select.val(),e===null?[]:e):(e=this.opts.element.val(),y(e,this.opts.separator))},setVal:function(t){var n;this.select?this.select.val(t):(n=[],e(t).each(function(){v(this,n)<0&&n.push(this)}),this.opts.element.val(n.length===0?"":n.join(this.opts.separator)))},buildChangeDetails:function(e,t){var t=t.slice(0),e=e.slice(0);for(var n=0;n<t.length;n++)for(var r=0;r<e.length;r++)g(this.opts.id(t[n]),this.opts.id(e[r]))&&(t.splice(n,1),n>0&&n--,e.splice(r,1),r--);return{added:t,removed:e}},val:function(n,r){var i,s=this;if(arguments.length===0)return this.getVal();i=this.data(),i.length||(i=[]);if(!n&&n!==0){this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),r&&this.triggerChange({added:this.data(),removed:i});return}this.setVal(n);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),r&&this.triggerChange(this.buildChangeDetails(i,this.data()));else{if(this.opts.initSelection===t)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(t){var n=e.map(t,s.id);s.setVal(n),s.updateSelection(t),s.clearSearch(),r&&s.triggerChange(s.buildChangeDetails(i,s.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var t=[],n=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){t.push(n.opts.id(e(this).data("select2-data")))}),this.setVal(t),this.triggerChange()},data:function(t,n){var r=this,i,s;if(arguments.length===0)return this.selection.children(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();s=this.data(),t||(t=[]),i=e.map(t,function(e){return r.opts.id(e)}),this.setVal(i),this.updateSelection(t),this.clearSearch(),n&&this.triggerChange(this.buildChangeDetails(s,this.data()))}}),e.fn.select2=function(){var n=Array.prototype.slice.call(arguments,0),r,i,s,o,u,a=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search","setScrollContainer"],f=["opened","isFocused","container","dropdown"],l=["val","data"],c={search:"externalSearch"};return this.each(function(){if(n.length===0||typeof n[0]=="object")r=n.length===0?{}:e.extend({},n[0]),r.element=e(this),r.element.get(0).tagName.toLowerCase()==="select"?u=r.element.prop("multiple"):(u=r.multiple||!1,"tags"in r&&(r.multiple=u=!0)),i=u?new window.Select2["class"].multi:new window.Select2["class"].single,i.init(r);else{if(typeof n[0]!="string")throw"Invalid arguments to select2 plugin: "+n;if(v(n[0],a)<0)throw"Unknown method: "+n[0];o=t,i=e(this).data("select2");if(i===t)return;s=n[0],s==="container"?o=i.container:s==="dropdown"?o=i.dropdown:(c[s]&&(s=c[s]),o=i[s].apply(i,n.slice(1)));if(v(n[0],f)>=0||v(n[0],l)>=0&&n.length==1)return!1}}),o===t?this:o},e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(e,t,n,r){var i=[];return O(e.text,n.term,i,r),i.join("")},formatSelection:function(e,n,r){return e?r(e.text):t},sortResults:function(e,t,n){return e},formatResultCssClass:function(e){return e.css},formatSelectionCssClass:function(e,n){return t},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(e){return e==t?null:e.id},matcher:function(e,t){return d(""+t).toUpperCase().indexOf(d(""+e).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:F,escapeMarkup:M,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(e){return e},adaptDropdownCssClass:function(e){return null},nextSearchTerm:function(e,n){return t},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(e){var t="ontouchstart"in window||navigator.msMaxTouchPoints>0;return t?e.opts.minimumResultsForSearch<0?!1:!0:!0}},e.fn.select2.locales=[],e.fn.select2.locales.en={formatMatches:function(e){return e===1?"One result is available, press enter to select it.":e+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(e,t,n){return"Loading failed"},formatInputTooShort:function(e,t){var n=t-e.length;return"Please enter "+n+" or more character"+(n==1?"":"s")},formatInputTooLong:function(e,t){var n=e.length-t;return"Please delete "+n+" character"+(n==1?"":"s")},formatSelectionTooBig:function(e){return"You can only select "+e+" item"+(e==1?"":"s")},formatLoadMore:function(e){return"Loading more results…"},formatSearching:function(){return"Searching…"}},e.extend(e.fn.select2.defaults,e.fn.select2.locales.en),e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:_,local:D,tags:P},util:{debounce:S,markMatch:O,escapeMarkup:M,stripDiacritics:d},"class":{"abstract":r,single:i,multi:s}}}(jQuery),define("select2",["jquery"],function(){}),define("util",["require","exports","module","jquery","backbone","nprogress","localization","moment","templates","app","validators","coreService","defectType/SingletonDefectTypeCollection","baron","cookie","bootswitch","isLoading","select2"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("nprogress"),o=e("localization"),u=e("moment"),a=e("templates"),f=e("app"),l=e("validators"),c=e("coreService"),h=e("defectType/SingletonDefectTypeCollection");e("baron"),e("cookie"),e("bootswitch"),e("isLoading"),e("select2");var p=f.getInstance(),d=!1,v=!1,m,g=[],y={};return _.extend(y,{templates:function(e,t){var t=t||{};t.text=o,t.includeTemplate=y.templates;var n=a[e];if(n){var r=a[e](t);return r}return""},getDocumentationHtml:function(){var e=r.Deferred();return r.ajax({method:"GET",dataType:"html",url:"/documentation/documentation.html?n="+Math.round(1e3+Math.random()*1e3),success:function(t){e.resolve(r(t))},error:function(){e.reject()}}),e.promise()},checkWidthScroll:function(){var e=document.createElement("div");e.style.overflowY="scroll",e.style.width="50px",e.style.height="50px",e.style.visibility="hidden",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth;document.body.removeChild(e),t!=0&&r("body").addClass("no-zero-scroll")},isMobileNavigator:function(){return v||(v=navigator.userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i)!==null),v},extendStings:function(){if(d)return;String.prototype.replaceAll=function(e,t){return this.split(e).join(t)},String.prototype.stringToHexColor=function(){for(var e=0,t=0;e<this.length;t=this.charCodeAt(e++)+((t<<5)-t));for(var e=0,n="#";e<3;n+=("00"+(t>>e++*8&255).toString(16)).slice(-2));return n},String.prototype.escapeHtml=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},String.prototype.escapeScript=function(){return this.replace(/<script[^>]*>/gi," <!-- ").replace(/<\/script>/gi," --> ")},String.prototype.replaceNewLines=function(){return this.replace(/\\r\\n/g,"<br>")},String.prototype.replaceTabs=function(){return this.replace(/\t/g,"").replace(/&#9;/g,"").replace(/&#x09;/g,"")},String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")},String.prototype.ltrim=function(){return this.replace(/^\s+/,"")},String.prototype.rtrim=function(){return this.replace(/\s+$/,"")},String.prototype.fulltrim=function(){return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g,"").replace(/\s+/g," ")},String.prototype.capitalize=function(){return this.toLowerCase().replace(/(?:^|\s)\S/g,function(e){return e.toUpperCase()})},String.prototype.capitalizeName=function(){return this.replace("_"," ").toLowerCase().replace(/(?:_|\b)(\w)/g,function(e,t){return t.toUpperCase()})},String.prototype.getCapitalizedOnly=function(){return this.replace(/[^A-Z]/g,"")},String.prototype.escapeLessDirection=function(){return this.replace("filter.lte.","filter.gte.")},String.prototype.escapeNaN=function(){return this.toUpperCase()==="NAN"?"0":this},String.prototype.setMaxLength=function(e){return this.length>e?this.slice(0,e-3)+"...":this},String.prototype.escapeRE=function(e){return this.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},d=!0},extendArrays:function(){Array.prototype.equals&&console.warn("Overriding existing Array.prototype.equals. Possible causes: New API defines the method, there's a framework conflict or you've got double inclusions in your code."),Array.prototype.equals=function(e){if(!e)return!1;if(this.length!=e.length)return!1;for(var t=0,n=this.length;t<n;t++)if(this[t]instanceof Array&&e[t]instanceof Array){if(!this[t].equals(e[t]))return!1}else if(this[t]!=e[t])return!1;return!0},Object.defineProperty(Array.prototype,"equals",{enumerable:!1})},appendTooltip:function(e,t,n,i){t.uitooltip({position:{my:"left top",at:"left bottom+5",of:n,collision:"fit"},show:{effect:"none",delay:500,duration:0},hide:{effect:"none",duration:0},items:":not([disabled])",content:e,open:function(e,t){setTimeout(function(){r(e.currentTarget).attr("aria-describedby")&&i&&i()},500)}}),r(".ui-helper-hidden-accessible").remove()},textWrapper:function(e,t){if(!e)return"";var n=new RegExp(t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),"ig");return e.replace(n,"<mark>$&</mark>")},replaceOccurrences:function(e){return function(t){var n=t.trim();for(var r=0;r<e.length;r++)n=n.replace("%%%",_.escape(e[r]));return n}},replaceTemplate:function(e){var t=e;for(var n=1;n<arguments.length;n++)t=t.replace("%%%",arguments[n]);return t},shimBind:function(){Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r?this:e||window,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i})},ajaxBeforeSend:function(e){e.setRequestHeader("Authorization",p.userModel.get("token")),e.setRequestHeader("X-XSRF-TOKEN",r.cookie("XSRF-TOKEN")),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),this.addXhrToPool(e)},trackAjaxCalls:function(){var e=this;r.ajaxSetup({dataType:"json",contentType:"application/json;charset=UTF-8",beforeSend:this.ajaxBeforeSend.bind(this),complete:function(t){e.removeXhrFromPool(t)}}),r(window.document).ajaxStart(function(){s.start()}).ajaxComplete(function(){s.done()}).ajaxError(function(e,t,n,r){if(y.validateForLogOut(t))return!1}),window.isActive=!0,r(window).focus(function(){this.isActive=!0}),r(window).blur(function(){this.isActive=!1})},validateForLogOut:function(e){return e.status===401?(p.userModel.get("auth")&&this.addMessage({clazz:"alert",message:o.failMessages.sessionExpired}),p.userModel&&p.userModel.clearSession(),r(".modal").modal("hide"),!0):!1},updateImagePath:function(e){var t=p.userModel.get("token");if(!t)return e;var n=t.split(" ")[1];return n?(~e.indexOf("?")?e+="&":e+="?",e+"access_token="+n):e},clearXhrPool:function(){var e=_.clone(g);_.forEach(e,function(e,t){e&&!e.persistant&&e.abort()})},addXhrToPool:function(e){g.push(e)},removeXhrFromPool:function(e){var t=g.indexOf(e);t>-1&&g.splice(t,1)},setupMessagesTracker:function(e){var t=this;t.messages=e},addMessage:function(e){var t=this;if(!this.messages)return;e.message=e.message.indexOf("\n<html>\n")>-1?e.message.substr(0,e.message.indexOf("\n<html>\n")):e.message,this.messages.collection&&this.messages.collection.add(new i.Model({clazz:e.clazz,message:r.trim(e.message.replaceAll("] ["," ")).replace(/^\[|\]$/g,"")})),_.delay(function(){t.clearMessage()},1e4)},clearMessage:function(){this.messages&&this.messages.close()},showOverlay:function(e,t){r(e).LoadingOverlay("show",{image:"img/graph_loader.gif"})},hideOverlay:function(e){r(e).LoadingOverlay("hide")},hideMessagePanel:function(){var e=this;r('.cancel, [type="cancel"]').on("click",function(){e.hideMessage()})},hideMessage:function(){r(".message-fade",this.messages.$el).is(":visible")&&this.messages.close()},setupBaronScroll:function(e,t){var n='<div class="baron baron__root baron__clipper"><div class="baron_scroller"></div></div>',i=null;t?(e.wrapInner(n),i=e.children(".baron_scroller").children(".baron__root")):(e.wrap(n),i=e.parent(".baron_scroller").parent(".baron__root"));var s=null;i&&r("body").hasClass("no-zero-scroll")&&(i.append('<div class="baron__track"><div class="baron__control baron__up">▲</div><div class="baron__free"><div class="baron__bar"></div></div><div class="baron__control baron__down">▼</div></div>'),s=i.baron({cssGuru:!0,root:".baron",scroller:".baron_scroller",bar:".baron__bar",scrollingCls:"_scrolling",draggingCls:"_dragging"}));var o=e.parent(".baron_scroller");return o.length&&(o.get(0).baron=s),o},setupBaronScrollSize:function(e,t){var n=e.children(),r=e.parent(".baron__root");n.css({maxHeight:"none"});var i=n.height();i<25&&(i=25),t&&i>t.maxHeight&&(i=t.maxHeight,r.addClass("_scrollbar")),r.height(i),t&&t.changeWidth&&r.width(n.width());var s=e.get(0).baron;s&&s.update()},setupSelect2WhithScroll:function(e,t){return e.one("select2-open",function(e){r("#select2-drop input.select2-input").on("input",function(t){r(this).val().trim().length<3&&y.setupBaronScrollSize(e.currentTarget.$scrollEl,{maxHeight:200})})}),e.on("select2-open select2-loaded",function(t){t.currentTarget.$scrollEl||(t.currentTarget.$scrollEl=y.setupBaronScroll(r("ul.select2-results").last()),e.select2("setScrollContainer",t.currentTarget.$scrollEl)),y.setupBaronScrollSize(t.currentTarget.$scrollEl,{maxHeight:200})}),e.select2(t)},setEqualHeightRow:function(e){r(e).responsiveEqualHeightGrid()},scrollToHighlight:function(e,t){e=p.commentAnchor||e;if(!e)return;t&&(e=e.replace("log-for-","").replace("all-cases-for-",""));var n=r("#"+e),i=0;n.length&&(i=n.get(0).offsetTop,n.addClass("reset-transition"),n.effect("highlight",{},3e3)),p.mainScrollElement.animate({scrollTop:i-r(window).height()/2.5},200),setTimeout(function(){n.removeClass("reset-transition")},3500),p.commentAnchor=""},setupBackTop:function(){r("body").on("click","[global-back-top]",function(){return p.mainScrollElement.animate({scrollTop:0},100),!1}),r.subscribe("scroll:greater:than:100",function(){var e=r("[global-back-top]");e.length&&!e.is(":visible")&&e.show()}),r.subscribe("scroll:less:than:100",function(){var e=r("[global-back-top]");e.length&&e.is(":visible")&&e.fadeOut()})},setupWindowEvents:function(){p.mainScrollElement.on("scroll",function(e){var t={top:e.currentTarget.scrollTop,height:r(window).height()};r.publish("scroll:change",t),e.currentTarget.scrollTop>100?r.publish("scroll:greater:than:100",t):r.publish("scroll:less:than:100",t)}),r(window).on("resize",function(){r.publish("window:resize",{height:r(window).height(),width:r(window).width()})}),r(document).on("click","a",function(e){r(e.currentTarget).is(":disabled")&&e.preventDefault()})},switcheryInitialize:function(e){e&&r(".js-switch",e).bootstrapSwitch({onText:o.ui.on,offText:o.ui.off})},dropDownHandler:function(e){e.preventDefault();var t=r(e.currentTarget),n=t.text();t.closest(".btn-group, .rp-btn-group").find(".select-value:first").text(t.text()),t.closest("ul").find(".active").removeClass("active"),t.parent().addClass("active")},attachSelectAllFlipper:function(e){r("label",e).click(function(e){e.stopPropagation(),r(e.currentTarget).closest(".dropdown-menu").find(".check-all").removeClass("checked")}),r(".check-all",e).click(function(e){e.preventDefault();var t=r(e.currentTarget),n=!t.hasClass("checked"),i=n?"add":"remove";t.closest(".dropdown-menu").find(".selectable").prop("checked",n),t[i+"Class"]("checked")})},hoverFullTime:function(e){r(".hoverFullTime",e).parent().hover(function(){r(this).find(".time-full").toggleClass("hidden"),r(this).find(".timeMoment").toggleClass("hidden")},function(){r(this).find(".time-full").toggleClass("hidden"),r(this).find(".timeMoment").toggleClass("hidden")}),r(".hoverFullTime .timeHover",e).mouseup(function(){r(".timeHover").toggleClass("hidden")})},timeFormat:function(e,t){var n=parseInt((t-e)/1e3,10),r=Math.floor(n/86400),i=Math.floor((n-r*86400)/3600),s=Math.floor((n-r*86400-i*3600)/60),o=n-r*86400-i*3600-s*60,u="";return r>0&&(u=u+r+"d "),i>0&&(u=u+i+"h "),s>0&&(u=u+s+"m"),u===""&&o>0?u=o+"s":u===""&&o===0&&(u=Math.round((t-e)/10)/100+"s"),u},dateFormat:function(e,t){var n=new Date(e),r=n.getMonth()+1,i=n.getDate(),s=n.getHours(),o=n.getMinutes(),u=n.getSeconds(),a=n.getTimezoneOffset()/60*-1;a.toString().indexOf("-")===-1?a="UTC+"+a:a="UTC"+a;var f=function(e){return String(e).length<2?"0"+e:e};return n.getFullYear()+"-"+f(r)+"-"+f(i)+" "+f(s)+":"+f(o)+":"+f(u)+(t?" "+a:"")},fromNowFormat:function(e){return u(e).fromNow()},daysFromNow:function(e){return this.fromNowFormat(this.dateFormat(e))},daysBetween:function(e,t){var n=864e5,r=e.getTime(),i=t.getTime(),s=Math.abs(r-i);return Math.round(s/n)},replaceLink:function(e){var t=e.match(/(((ftp|https?):\/\/)[\-\w@:%_\+.~#?,&\/\/=]+)/g);return _.each(t,function(t){e=e.replace(new RegExp(t,"g"),'<a target="_blank" href="'+t+'">'+t+"</a>")}),e},make:function(e,t,n){n=n||"append";var i=_.uniqueId();return t[n]("<"+e+' id="'+i+'"></'+e+">"),r("#"+i)},ajaxFailMessenger:function(e,t,n){if(e&&e.statusText==="abort")return;if(e&&e.status===401)return;var r="",i=n||"";if(e){try{r=JSON.parse(e.responseText)}catch(s){console.log(s),t&&(i=o.failMessages[t])}e.status===409||e.status===422?i=r.message.split(".")[0]||o.failMessages.duplicatedRecourse:t?r&&r.message&&(i=o.failMessages[t]+" : "+r.message.split(".")[0]):r&&r.message&&(i=r.message.replace("{}",""))}else i=(o.failMessages[t]||o.failMessages.defaults)+(i?" : "+i:"");this.addMessage({clazz:"alert",message:i||o.failMessages.defaults})},ajaxSuccessMessenger:function(e,t){var n=o.successMessages[e]||o.successMessages.defaults;t&&(n=n.replace("%%%",t)),this.addMessage({clazz:"success",message:n})},ajaxInfoMessenger:function(e){this.addMessage({clazz:"notice",message:o.infoMessages[e]||o.infoMessages.defaults})},getDialog:function(e){r(".rp-modal-dialog").remove(),console.log("Modal "+e.name);var t=r("<div>"+this.templates(e.name,e.data)+"</div>").find(".dialog-shell").unwrap().appendTo("body"),n=r(".modal-dialog",t);return this.setupBaronScroll(n),r(".baron_scroller",t).attr("data-js-close",!0),t.click(function(e){var n=r(e.target);n.is("[data-js-close]")&&t.modal("hide")}),t},showAnswerDialog:function(e){var t=r.Deferred(),n=y.getDialog({name:"tpl-dialog-modal",data:e});return n.modal("show"),n.on("hidden.bs.modal",function(){n.remove(),n=null}),r("[data-js-submit]",n).click(function(){t.resolve()}),r("[data-js-cancel]",n).click(function(){t.reject()}),t.always(function(){n.modal("hide")}),t.promise()},confirmDeletionDialog:function(e){var t=this;this.deleteDialog||(this.deleteDialog=y.getDialog({name:"tpl-delete-dialog",data:{message:e.message,okButton:e.okButton,cancelButton:e.cancelButton,format:e.format?y.replaceOccurrences.call(null,e.format):null}}),this.deleteDialog.on("click",".rp-btn-danger",function(){e.callback(),t.deleteDialog.modal("hide")}).on("click",".rp-btn-cancel",function(){e.cancelCallback&&e.cancelCallback()}).on("hidden.bs.modal",function(){r(this).data("modal",null),t.deleteDialog.off().remove(),t.deleteDialog=null,e=null})),this.deleteDialog.modal("show")},getExternalSystem:function(e){var t=p.project.configuration.externalSystem[0].systemType||"";return e?t.toLocaleLowerCase():t},hasValidBtsSystem:function(){return p.project&&p.project.configuration&&p.project.configuration.externalSystem.length},canPostToJira:function(){return y.hasValidBtsSystem()&&_.any(p.project.configuration.externalSystem,function(e){return e.fields&&e.fields.length})},mapContentTypeToIcon:function(e){var t="";switch(e){case"text/plain":t="fa-file-text";break;case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":t="fa-file-excel-o";break;case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":t="fa-file-word-o";break;case"video/mp4":t="fa-file-movie-o";break;default:t="fa-file"}return t},getLocalSharedIcon:function(){return'<span class="share-icon-wrapper"><i class="material-icons" title="'+o.launches.filterIsShared+'">share</i>'+"</span>"},updateLaunchesHref:function(e){e=e||"#"+p.project.projectId+"/launches/all",r("#launches").attr("href",e)},updateDebugHref:function(e){var t=r("#userdebug"),n=t.attr("href"),i="&filter.in.user=";if(e){var s=n.split(i);s[1]=e,t.attr("href",s.join(i))}else{var o=n.indexOf(i);o>=0&&t.attr("href",n.slice(0,o))}},getValidationMessage:function(e){return o.validation[e]},getCopyName:function(e){return o.ui.copy+" "+e},isAdmin:function(e){return e=e||p.userModel.toJSON(),e.userRole===p.accountRolesEnum.administrator},isCustomer:function(){return p.userModel.get("projects")[p.project.projectId]&&p.userModel.get("projects")[p.project.projectId].projectRole===p.projectRolesEnum.customer},mergeByProperty:function(e,t,n){return _.each(t,function(t){var r=_.find(e,function(e){return e[n]===t[n]});r?_.extend(r,t):e.push(t)}),e},isInPrivilegedGroup:function(){if(y.isAdmin())return!0;var e=p.userModel.get("projects")[p.project.projectId]&&p.userModel.get("projects")[p.project.projectId].projectRole;return e===p.projectRolesEnum.project_manager||e===p.projectRolesEnum.lead},hasExternalSystem:function(){return p.project.configuration.externalSystem.length},canStartMatchIssues:function(e){return e?e.status!=="IN_PROGRESS"&&e.statistics&&e.statistics.defects&&+e.statistics.defects.to_investigate.total>0&&!e.isProcessing:!1},isUnassignedLock:function(e,t){return!e},isDeleteLock:function(e){return e.projectId.toLowerCase()===p.demoProjectName},canManageMembers:function(){var e=!1;if(this.isAdmin(p.userModel.toJSON()))e=!0;else{var t=p.userModel.get("projects")[p.project.projectId].projectRole,n=_.indexOf(p.projectRoles,t);e=n>1}return e},isYou:function(e){return e.userId===p.userModel.get("name")},getRolesMap:function(){var e={};return _.forEach(p.projectRoles,function(t){e[t]=t.split("_").join(" ")}),e},validForCollapsibleMessage:function(e){var t=e.level==="TRACE"||e.level==="DEBUG"||e.level==="ERROR",n=null;if(t){var r=e.message.match(/(>)\s*(<)(\/*)/g);if(r&&r.length>8)console.log("matchXML"),n=y.beautifyText(e.message).split("<!--!>"),n.push("xml");else{var i=e.message.split(/\n/g);i&&i.length>5&&(n=[i.slice(0,5).join("<br>"),i.slice(5).join("<br>")])}}return n},matchForXML:function(e){var t=e.message.match(/<.*?>/g);return t&&t.length>8?this.beautifyText(e.message).replace("<!--!>",""):!1},beautifyText:function(e){function t(e){var t="",n=/(>)(<)(\/*)/g;e=e.replace(n,"$1\r\n$2$3");var r=0;return _.forEach(e.split("\r\n"),function(e,n){var i=0;e.match(/.+<\/\w[^>]*>$/)?i=0:e.match(/^<\/\w/)?r!=0&&(r-=1):e.match(/^<\w[^>]*[^\/]>.*$/)?i=1:i=0;var s="";for(var o=0;o<r;o++)s+="  ";t+=s+e+"\r\n",r+=i,n===4&&(t+="<!--!>")}),t}return t(e)},flipActiveLi:function(e){e.closest(".btn-group, .rp-btn-group").find(".select-value:first").text(e.text()),e.closest("ul").find(".active").removeClass("active"),e.addClass("active")},hintValidator:function(e,t){var n=e.closest(".form-group, .rp-form-group, label, .rp-field"),i=r("> .validate-hint",n),s=[];_.isArray(t)||(t=[t]),_.each(t,function(t){t.max&&e.attr("maxLength",t.max),l[t.validator]&&s.push({validate:l[t.validator],options:t})});var o=function(){var t="";return _.each(s,function(n){var r=n.options.noTrim?e.val():e.val().trim(),i=n.validate(r,n.options,y);i&&(t=t?t:i+"</br>")}),t?n.addClass("validate-error"):(f(),n.removeClass("validate-error")),e.data("validate-error",t),t},u=function(e){e&&i.html(e).addClass("show-hint")},a=function(){i.removeClass("show-hint")},f=_.debounce(function(){e.trigger("validation:success")},500);e.on("keyup",function(e){if(!(!e.keyCode||e.keyCode!==9&&e.keyCode!==37&&e.keyCode!==38&&e.keyCode!==39&&e.keyCode!==40))return;var t=o();t?u(t):a()}).on("paste",function(){r(this).trigger("keyup")}).on("focus",function(){r(this).trigger("keyup")}).on("validate",function(){o()}).on("blur",function(){a()})},bootValidator:function(e,t,n){e.data("valid",!0).data("was",e.val());var i=e.closest(".form-group, .rp-form-group");t&&t.max&&e.attr("maxLength",t.max);var s=r(".help-inline:first",i),o=s.hasClass("error-hint"),u=[],a=null,f,c;f=function(t){t?(i.addClass("has-error"),s.html(t),o&&s.fadeIn(100),e.data("valid",!1)):(i.removeClass("has-error"),e.data("valid",!0),o&&s.fadeOut(100))},c=function(){var t="";_.forEach(u,function(n){var i=n.options.noTrim?e.val():e.val().trim();if(n.options.remote)r.when(n.type(i,n.options)).done(function(r){if(!r.valid){var i=n.options.message;t+=i+"</br>"}f(t),e.trigger("validation::change")});else{var s=n.type(i,n.options,y);s&&(t=t?t:s+"</br>"),f(t)}})},_.isArray(t)||(t=[t]),_.forEach(t,function(e){typeof e=="function"?u.push(e):typeof e=="object"&&l[e.validator]&&u.push({type:l[e.validator],options:e})}),e.on("validate",function(){c()}).on("keydown",function(t){t.keyCode===13&&(i.hasClass("has-error")||e.trigger("validation::submit::success")),t.keyCode===27&&e.trigger("validation::escape")}).on("keyup",function(t){if(!(!t.keyCode||t.keyCode!==9&&t.keyCode!==37&&t.keyCode!==38&&t.keyCode!==39&&t.keyCode!==40))return;clearTimeout(a),a=setTimeout(function(){c();var t=i.hasClass("has-error"),n=e.val().trim();e.trigger("validation::change",{valid:!t,value:n,dirty:e.data("was")!=n}),!t&&e.data("was",n),a=null},_.isEmpty(n)?p.userFilterDelay:n.userFilterDelay)}).on("change",function(){}).on("paste",function(){r(this).trigger("keyup")}).on("focus",function(){o&&!e.data("valid")&&s.fadeIn(100)}).on("blur",function(){r(this).trigger("keyup"),o&&s.fadeOut(100)}).on("remove",function(){clearTimeout(a),t=null,e=null,i=null,s=null,o=null,u=null,a=null})},configRegexValidation:function(e,t){e.on("keyup",function(){var n=!1;p.patterns[t].test(e.val())?(e.parent().removeClass("has-error"),e.next().hide(),n=!0):(e.parent().addClass("has-error"),e.next().show()),e.data("valid",n),e.trigger("validation::change",{valid:n})}).on("remove",function(){e=null})},confirmValidator:function(e){var t=r(".help-inline:first",e.holder),n=r("input:first",e.holder),i=r(".confirm",e.holder),s,u,a,f=function(){u={valid:n.val()===i.val()},s=o.validation.confirmMatch},l=function(){u={valid:a.length>=e.min&&a.length<=e.max},s=o.validation.confirmMinMax};e.holder.on("keyup","input[type=password], input[type=text]",function(o){var c=r(this);a=c.val(),c.hasClass("confirm")?e.firstCheckLength?(l(),u.valid&&f()):(f(),u.valid&&l()):e.firstCheckLength?(l(),u.valid&&i.val()!=""&&f()):(l(),u.valid&&f()),u.valid?(u.value=a,e.holder.removeClass("has-error")):(e.holder.addClass("has-error"),t.text(s));if(!n.val()||!i.val())u.valid=!1;e.holder.trigger("validation::change",u)}).on("remove",function(){e.holder=null,e=null,t=null,n=null,i=null,s=null,u=null,a=null})},attachCounter:function(e,t){var n=e.closest(".form-group, .rp-form-group").find(t.selector+":first");n.length&&e.on("keyup",function(t){n.text(e.val().length)}).on("remove",function(){t=null,n=null,e=null})},validateEmail:function(e){var t=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,})+$/;return t.test(e)},getRoot:function(){return this.root||(this.root=window.location.href.split("#")[0]),this.root},addSymbolsValidation:function(){var e=this;r.validator.addMethod("symbols",function(e,t,n){return n.test(e)}),r.validator.addMethod("email",function(t,n,r){return e.validateEmail(t)})},setProfileUrl:function(){p.userModel.set("image",y.updateImagePath(p.apiVersion+"data/photo?"+p.userModel.get("name")+"?at="+Date.now()))},clearLaunchesActiveFilter:function(){p.preferences.active="",r("#launches").attr("href","#"+p.project.projectId+"/launches/all")},getTicketUrlId:function(e){var t=p.patterns.urlT,n=e.search(t),r={id:e,url:null};return n>=0&&(r={id:e.slice(0,n-1),url:e.slice(n)}),r},getIssueTypes:function(){return["product_bug","automation_bug","system_issue","no_defect","to_investigate"]},getDefaultColor:function(e){var t,n=_.map(e.split("_"),function(e,t){return t?e.capitalize():e});return e=n.join(""),t=p.defaultColors[e],t||(t="#"+(Math.random()*16777215<<0).toString(16)),t},sortSubDefects:function(e,t){var n=p.patterns.defectsLocator;return n.test(e.locator)?-1:n.test(t.locator)?1:e.longName<t.longName?-1:e.longName>t.longName?1:0},getSubDefectsLocators:function(e,t){var n=[];return _.each(t,function(t){t.typeRef==e.toUpperCase()&&n.push(t.locator)}),n},getDefectCls:function(e){var t="",n=e.split("_");return t=n.length==1?n[0].slice(0,1):n.length==2?n[0][0]+n[1][0]:"",t},setupSelect2Tags:function(e,t){t=t||{};var n=e.data("warning"),i=[],s=null;this.setupSelect2WhithScroll(e,{formatInputTooShort:function(e,t){return n},tags:!0,multiple:!0,noResizeSearch:t.noResizeSearch?t.noResizeSearch:!1,dropdownCssClass:t.dropdownCssClass||"",minimumInputLength:t.min||1,formatResultCssClass:function(e){if((i.length==0||_.indexOf(i,e.text)<0)&&r(".select2-input.select2-active").val()==e.text)return"exact-match"},initSelection:function(e,t){var n=e.val().split(","),r=_.map(n,function(e){return e=e.trim(),{id:e,text:e}});t(r)},createSearchChoice:function(e,n){return!t.noCreateNew&&_.filter(n,function(t){return t.text.localeCompare(e)===0}).length===0?{id:e,text:e}:null},query:function(e){if(e.term==="?")return;var n={results:[]};t.startSearch&&e.term.length<t.startSearch?(i=[],n.results.push({id:e.term,text:e.term}),e.callback(n)):(clearTimeout(s),s=setTimeout(function(){c.searchTags(e,t.type,t.mode).done(function(t){var r=_.isObject(t)&&t.content?"user":"default",t=r=="default"?t:t.content,i=[];_.forEach(t,function(e){r=="user"?(n.results.push({id:e.userId,text:e.full_name}),e=e.full_name):n.results.push({id:e,text:e}),i.push(e)}),e.callback(n)}).fail(function(e){this.ajaxFailMessenger(e)})},p.userFilterDelay))}}),e.on("remove",function(){n=null,e=null,t=null,s&&(clearTimeout(s),s=null)})},getDefaultRequestParams:function(){var e={launch:function(){return{"page.page":1,"page.size":p.objectsOnPage,"page.sort":"start_time,DESC"}},suit:function(){return{"page.page":1,"page.size":p.objectsOnPage,"page.sort":"start_time,ASC","filter.eq.launch":null,"filter.size.path":0}},test:function(){return{"page.page":1,"page.size":p.objectsOnPage,"page.sort":"start_time,ASC"}},log:function(){return{"filter.eq.item":null,"page.page":1,"page.size":p.objectsOnPageLogs,"page.sort":"time,ASC"}},allcases:function(e,t,n){var r={"filter.eq.has_childs":!1,"page.page":1,"page.size":p.objectsOnPage,"page.sort":"start_time,ASC"};return n>2?r["filter.in.path"]=t:r["filter.eq.launch"]=t,e&&(r["filter.in.type"]="STEP"),r},history:function(){return!1}};return e}}),y}),define("storageService",["require","exports","module","jquery","app"],function(e,t,n){"use strict";var r=e("jquery"),i=e("app"),s=i.getInstance(),o=window.localStorage||{},u=window.sessionStorage||{},a=function(){var e=s.project.projectId,t={};return t[e]={activeDashboard:{}},o.setItem(s.userModel.get("name"),JSON.stringify(t)),t},f=function(){var e=JSON.parse(o.getItem(s.userModel.get("name")));return e||(e=a()),e},l=function(e){o.setItem(s.userModel.get("name"),JSON.stringify(e))},c=function(){var e=f();return e[s.project.projectId]?e[s.project.projectId].activeDashboard:{}},h=function(e){var t=f();return t[s.project.projectId]?t[s.project.projectId][e]:null},p=function(e,t){var n=f();if(!n[s.project.projectId]){var r={};r[e]=50,n[s.project.projectId]=r}n[s.project.projectId][e]=t,l(n)},d=function(e){var t=f();t[s.project.projectId]||(t[s.project.projectId]={}),t[s.project.projectId].startTimeMode=e,l(t)},v=function(){var e=f();return e[s.project.projectId]?e[s.project.projectId].startTimeMode:null},m=function(e){var t=f();t[s.project.projectId]||(t[s.project.projectId]={activeDashboard:{}}),t[s.project.projectId].activeDashboard=e,l(t)},g=function(e){o.setItem("directLinkDash",e)},y=function(){return o.getItem("directLinkDash")},b=function(e){var t=f();t[s.project.projectId]||(t[s.project.projectId]={debugUser:{}}),t[s.project.projectId].debugUser=e,l(t)},w=function(){var e=f();return e[s.project.projectId]?e[s.project.projectId].debugUser:null},E=function(){return o.getItem("current_login")},S=function(e){e&&o.setItem("current_login",e)},x=function(){return o.getItem("breadcrumb_mode")},T=function(e){e?o.setItem("breadcrumb_mode",e):o.removeItem("breadcrumb_mode")},N=function(){var e=f(),t=s.project.projectId;return e[t]?e[t].bts:{}},C=function(e){var t=f(),n=s.project.projectId;t[n]||(t[n]={}),t[n].bts||(t[n].bts={}),t[n].bts[e.id]=e,l(t)},k=function(e){var t=f(),n=s.project.projectId;t[n]||(t[n]={}),t[n].preconditionMethodsStatus=e,l(t)},L=function(){var e=f(),t=s.project.projectId;return e[t]?e[t].preconditionMethodsStatus||"show":"show"},A=function(){var e=s.project.projectId,t=JSON.parse(u.getItem(e));return t||(t={},t[e]={}),t},O=function(e){var t=s.project.projectId;u.setItem(t,JSON.stringify(e))},M=function(e,t){var n=D(),r=s.project.projectId,i=A();t=="add"?n.push(e):n=_.without(n,e),i[r].deletingLaunches||(i[r].deletingLaunches=[]),i[r].deletingLaunches=n,O(i)},D=function(){var e=A(),t=s.project.projectId,n=e[t]&&e[t].deletingLaunches?e[t].deletingLaunches:[];return n};return{getActiveDashboard:c,setActiveDashboard:m,setDebugUser:b,getDebugUser:w,getCurrentLogin:E,setCurrentLogin:S,getBreadcrumbMode:x,setBreadcrumbMode:T,getItemsCount:h,setItemsCount:p,getBtsCredentials:N,setBtsCredentials:C,getDirectLinkDashboard:y,setDirectLinkDashboard:g,setPreconditionMethodsStatus:k,getPreconditionMethodsStatus:L,updateDeletingLaunches:M,getDeletingLaunches:D,setStartTimeMode:d,getStartTimeMode:v}}),define("model/URLParamsModel",["require","exports","module","backbone","app"],function(e,t,n){var r=e("backbone"),i=e("app"),s=i.getInstance(),o=r.Model.extend({"default":{},initialize:function(){this.listenTo(this,"change",this.onChange),this.parseURL()},parseURL:function(){try{var e=decodeURI(window.location.hash).split("?");this.mainHash=e[0];var t=e[1];if(!t)return this.clear({silent:!0}),!1;var n=this,r=t.split("&");r.forEach(function(e){var t=e.split("=");n.set(t[0],t[1],{silent:!0})})}catch(i){}},delaySet:function(e){var t=this;setTimeout(function(){t.set(e)},0)},_getQueryString:function(){var e=[],t=this.toJSON();for(var n in t)t[n]!=null&&e.push(n+"="+encodeURIComponent(t[n]));return e.join("&")},onChange:function(e,t){if(this.mainHash!=window.location.hash.split("?")[0]){console.log("URLParamsModel: error, main hash it was changed");return}var n=this._getQueryString();if(!s.router)return;s.router.navigate(this.mainHash+"?"+n,{trigger:!1})}});return o}),define("model/SingletonURLParamsModel",["require","exports","module","model/URLParamsModel"],function(e,t,n){"use strict";var r=null,i=e("model/URLParamsModel"),s=function(){return r?r.parseURL():r=new i,r};return s});var Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=Base64._utf8_encode(e);while(f<e.length)n=e.charCodeAt(f++),r=e.charCodeAt(f++),i=e.charCodeAt(f++),s=n>>2,o=(n&3)<<4|r>>4,u=(r&15)<<2|i>>6,a=i&63,isNaN(r)?u=a=64:isNaN(i)&&(a=64),t=t+this._keyStr.charAt(s)+this._keyStr.charAt(o)+this._keyStr.charAt(u)+this._keyStr.charAt(a);return t},decode:function(e){var t="",n,r,i,s,o,u,a,f=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length)s=this._keyStr.indexOf(e.charAt(f++)),o=this._keyStr.indexOf(e.charAt(f++)),u=this._keyStr.indexOf(e.charAt(f++)),a=this._keyStr.indexOf(e.charAt(f++)),n=s<<2|o>>4,r=(o&15)<<4|u>>2,i=(u&3)<<6|a,t+=String.fromCharCode(n),u!=64&&(t+=String.fromCharCode(r)),a!=64&&(t+=String.fromCharCode(i));return t=Base64._utf8_decode(t),t},_utf8_encode:function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},_utf8_decode:function(e){var t="",n=0,r=c1=c2=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t}};define("base64",function(e){return function(){var t,n;return t||e.Base64}}(this)),define("model/UserModel",["require","exports","module","jquery","backbone-epoxy","util","app","coreService","storageService","model/SingletonURLParamsModel","model/SingletonAppModel","cookie","base64"],function(e,t,n){var r=e("jquery"),i=e("backbone-epoxy"),s=e("util"),o=e("app"),u=e("coreService"),a=e("storageService"),f=e("model/SingletonURLParamsModel"),l=e("model/SingletonAppModel");e("cookie"),e("base64");var c=o.getInstance(),h=null,p=function(){return h||(h=new d),h},d=i.Model.extend({defaults:{auth:!1,user_login:null,access_token:null,redirectUrl:null,projects:null,defaultProject:null,roles:null,label:null,name:"anonymous",email:null,account_type:null,userRole:null,image:null,photo_loaded:!1,lastInsideHash:null,token:"Basic dWk6dWltYW4="},computeds:{isAdmin:{deps:["userRole"],get:function(e){return e===c.accountRolesEnum.administrator}}},initialize:function(){this.ready=r.Deferred(),this.listenTo(this,"change:lastInsideHash",this.onChangeLastInsideHash),this.set({token:this.getToken()}),this.listenTo(this,"change:token",this.onChangeToken),this.appModel=new l},checkAuthUrl:function(){var e=new f;e.get("access_token")&&e.get("token_type")&&(this.set({token:e.get("token_type")+" "+e.get("access_token")}),this.loginSuccess())},isAuth:function(){var e=this,t=r.Deferred();return this.ready.done(function(){e.get("auth")?t.resolve():t.reject()}),t.promise()},onChangeToken:function(e,t){window.localStorage&&t&&window.localStorage.setItem("session_token",t)},getToken:function(){return window.localStorage?window.localStorage.getItem("session_token"):this.defaults.token},onChangeLastInsideHash:function(e,t){window.localStorage&&t&&window.localStorage.setItem(this.get("name")+"_lastInsideHash",t)},clearLastInsidePage:function(){this.set({lastInsideHash:null}),window.localStorage&&window.localStorage.removeItem(this.get("name")+"_lastInsideHash")},getLastInsideHashStorage:function(){if(!window.localStorage)return!1;var e=window.localStorage.getItem(this.get("name")+"_lastInsideHash");return e=="null"?!1:e},getAnonymousHash:function(){if(!window.localStorage)return!1;var e=window.localStorage.getItem("anonymous_lastInsideHash");return window.localStorage.removeItem("anonymous_lastInsideHash"),e=="null"?!1:e},isValidNotEmptyJSON:function(e){if(!e.length)return!1;var t=e;return t=t.replace(/\\["\\\/bfnrtu]/g,"@"),t=t.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]"),t=t.replace(/(?:^|:|,)(?:\s*\[)+/g,""),/^[\],:{}\s]*$/.test(t)},load:function(){var e=this;this.updateInfo().done(function(t,n,r){e.isValidNotEmptyJSON(r.responseText)?e.updateProjects().done(function(){e.set({lastInsideHash:e.getAnonymousHash()||e.getLastInsideHashStorage()||e.getDefaultProjectHash()}),e.set({auth:!0}),e.ready.resolve()}).fail(function(){e.set(e.defaults),e.ready.resolve()}):(e.clearSession(),s.ajaxFailMessenger(null,"defaults"))}).fail(function(t){!e.isValidNotEmptyJSON(t.responseText)&&e.getToken()!=="Basic dWk6dWltYW4="&&(e.clearSession(),s.ajaxFailMessenger(null,"defaults")),e.set(e.defaults),setTimeout(function(){e.ready.resolve()})})},parse:function(e){return{defaultProject:e.default_project,label:e.uuid,name:e.userId,fullName:e.full_name,email:e.email,account_type:e.account_type,userRole:e.userRole,photo_loaded:e.photo_loaded,image:c.apiVersion+"data/photo?"+e.userId+"?at="+Date.now(),user_login:e.userId}},updateInfo:function(){var e=this;return u.getCurrentUser().done(function(t){e.set(e.parse(t))})},updateProjects:function(){var e=r.Deferred(),t=this;return this.get("name")?(u.getUserAssignedProjects(this.get("name")).done(function(n){t.set({projects:n}),e.resolve(n)}).fail(function(){e.reject()}),e.promise()):(e.reject(),e.promise())},getDefaultProjectHash:function(){return"#"+this.get("defaultProject")},clearSession:function(){this.set(this.defaults)},updateDefaultProject:function(e,t){var n=this;c.project={projectId:e},u.updateDefaultProject(e).done(function(){n.set("defaultProject",e),t&&_.isFunction(t)&&t()}).fail(function(e){s.ajaxFailMessenger(e,"updateDefaultProject")})},login:function(e,t){e=e.toLowerCase();var n=this;return this.trigger("login::loader::show"),u.userLogin({login:e,password:t}).done(function(e){n.set({token:e.token_type+" "+e.access_token}),n.loginSuccess()}).fail(function(e){n.clearSession(),s.ajaxFailMessenger(e,"defaults")})},loginSuccess:function(){this.set("redirectUrl",null),s.ajaxSuccessMessenger("signedIn"),this.load()},clearLocalSession:function(){},hasPermissions:function(e){var t=this.get("projects")[this.appModel.get("projectId")];if(s.isAdmin(c.userModel.toJSON()))return!0;if(!t)return!1;var n=t.projectRole;e=e||n;var r=_.indexOf(c.projectRoles,n),i=_.indexOf(c.projectRoles,e),o=!1;return r>1&&(o=r>=i),o},getRoleForCurrentProject:function(){var e=this.get("projects")[this.appModel.get("projectId")],t="";return e&&(t=e.projectRole),t},logout:function(){u.userLogout(),s.clearXhrPool(),c.project={},this.clearSession()}});return p}),define("message",["backbone","util"],function(e,t){"use strict";var n=e.View.extend({tpl:"tpl-messages-panel",initialize:function(){this.collection=new e.Collection,this.collection.on("add",this.render,this)},render:function(){this.$el.empty();if(this.collection.length!==0){var e=this.collection.pop(),n=t.templates(this.tpl,e.toJSON());this.$el.append(n)}},events:{"click: button.close":"close"},close:function(e){this.$el.empty()}}),r=n.extend({tpl:"tpl-messages-single",initialize:function(){this.collection=new e.Collection,this.collection.on("add",this.render,this)},render:function(){this.$el.empty();if(this.collection.length!==0){var e=this.collection.pop(),n=t.templates(this.tpl,e.toJSON());this.$el.html(n),e.get("clazz")!=="alert"&&setTimeout(function(){$(".message-fade",this.$el).fadeOut(500)},5e3)}},events:{click:"close"},close:function(e){this.$el.find(".message-fade").fadeOut(500)}});return{MessagePanel:n,Success:r}}),define("model/RegistryInfoModel",["require","exports","module","backbone","jquery","underscore","coreService"],function(e,t,n){var r=e("backbone"),i=e("jquery"),s=e("underscore"),o=e("coreService"),u=r.Model.extend({defaults:{uiBuildVersion:"",fullServicesHtml:"",authExtensions:[]},initialize:function(){this.ready=i.Deferred();var e=this;e.ready.resolve()}});return u}),define("model/SingletonRegistryInfoModel",["require","exports","module","model/RegistryInfoModel"],function(e,t,n){"use strict";var r=null,i=e("model/RegistryInfoModel"),s=function(){return r||(r=new i),r};return s}),define("storage/Storage",["require","exports","module","backbone"],function(e,t,n){"use strict";var r=e("backbone"),i=r.Model.extend({storage:window.localStorage,getItem:function(e){return this.storage?this.storage.getItem(e):!1},setItem:function(e,t){if(!this.storage)return!1;this.storage.setItem(e,t)}});return i}),define("storage/UserStorage",["require","exports","module","storage/Storage","jquery","model/UserModel"],function(e,t,n){"use strict";var r=e("storage/Storage"),i=e("jquery"),s=e("model/UserModel"),o=r.extend({initialize:function(){this.user=new s,this.saveKey="",this.listenTo(this,"change",this.onChangeSettings);var e=this;this.ready=i.Deferred(),this.user.ready.done(function(){e.onChangeUserState(e.user,e.user.get("auth")),e.listenTo(e.user,"change:auth",e.onChangeUserState.bind(e)),e.ready.resolve()})},onChangeUserState:function(e,t){if(!t)return this.clear({silent:!0}),this.saveKey="",!1;this.saveKey=this.user.get("name")+"_settings";var n=this.getItem(this.saveKey);try{var r=JSON.parse(n);this.set(r,{silent:!0})}catch(i){console.log("UserStorage: failed parse JSON"),console.log(i.message)}},onChangeSettings:function(){var e=this;this.user.isAuth().done(function(){e.setItem(e.saveKey,JSON.stringify(e.toJSON()))})}});return o}),define("storage/SingletonUserStorage",["require","exports","module","storage/UserStorage"],function(e,t,n){"use strict";var r=null,i=e("storage/UserStorage"),s=function(){return r?r:new i};return s}),define("sections/header",["require","exports","module","jquery","backbone","util","model/UserModel","storage/SingletonUserStorage","model/SingletonAppModel","app","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("model/UserModel"),u=e("storage/SingletonUserStorage"),a=e("model/SingletonAppModel"),f=e("app"),l=e("localization"),c=f.getInstance(),h=i.View.extend({el:"#topHeader",events:{"click .user-projects a":"changeProject","click #logout":"onClickLogout","click [data-js-toogle-menu]":"onClickMenuOpen","click [data-js-administrate-page-link]":"onClickAdminLink","click [data-js-members-icon]":"onClickMembersIcon","click [data-js-settings-icon]":"onClickSettingsIcon","click [data-js-user-dropdown]":"onClickUserDropdown","click [data-js-profile-page-link]":"onClickProfileLink","click [data-js-project-dropdown]":"onClickProjectDropdown"},initialize:function(e){this.tpl=e.tpl,this.lastURL=e.lastURL,this.currentPage=e.currentPage,this.isAdminPage=e.isAdminPage,this.appModel=new a,this.project=this.appModel.attributes,this.canDebug=s.isAdmin()||!s.isCustomer(),this.userModel=new o,this.userStorage=new u,this.listenTo(c.router,"route",this.updateActiveLink)},update:function(e){if(this.currentPage!==e.contextName){if(e.contextName==="project-details"){this.$el.find("[data-js-admin-header-crumb]").html(" / "+this.getCrumbPart("projects"));return}this.$el.find("[data-js-admin-header-crumb]").html(" / "+this.getCrumbPart(e.contextName)),this.currentPage=e.contextName}},getCrumbPart:function(e){switch(e){case"projects":return l.admin.titleAllProjects;case"users":return l.admin.users;case"settings":return l.admin.serverSettings}},render:function(){var e=this,t=this.userModel.toJSON();return this.$el.html(s.templates(this.tpl,{lastURL:this.lastURL,project:this.project,currentPage:this.currentPage,projects:_.keys(this.userModel.get("projects")).sort(),user:t,isAdmin:s.isAdmin(t),canDebug:this.canDebug,util:s})).show(),this.contentProjects=r(".user-projects",this.$el),this.scrollerProjects=s.setupBaronScroll(this.contentProjects),this.blockHeightProjects=this.scrollerProjects.parent(".baron__root"),this.$el.find('#projectSelector a[data-href="'+this.project.projectId+'"]').parent().addClass("active"),this.updateActiveLink(),r("#projectSelector",e.$el).on("shown.bs.dropdown",function(){var t=e.contentProjects.height();t>607&&(t=607,e.blockHeightProjects.addClass("_scrollbar")),e.blockHeightProjects.height(t).width(e.contentProjects.width()).addClass("open"),e.scrollerProjects.addClass("open");var n=r("#project-"+e.project.projectId);n.length&&e.scrollerProjects.scrollTop(n.position().top-40)}),r("#projectSelector",e.$el).on("hide.bs.dropdown",function(){e.scrollerProjects.removeClass("open"),e.blockHeightProjects.removeClass("open").height(0)}),this.isAdminPage&&(this.currentPage==="project-details"?this.$el.find("[data-js-admin-header-crumb]").html(" / "+this.getCrumbPart("projects")):this.$el.find("[data-js-admin-header-crumb]").html(" / "+this.getCrumbPart(this.currentPage))),this},setLastActivePage:function(){var e=i.history.getFragment();e=="user-profile"?this.userStorage.set("lastActiveURL",this.project.projectId):this.userStorage.set("lastActiveURL",e)},onClickLogout:function(e){c.trackingDispatcher.trackEventNumber(9),e.preventDefault(),e.stopPropagation(),this.userModel.logout()},onClickMembersIcon:function(){c.trackingDispatcher.trackEventNumber(4)},onClickSettingsIcon:function(){c.trackingDispatcher.trackEventNumber(5)},onClickUserDropdown:function(){c.trackingDispatcher.trackEventNumber(6)},onClickProfileLink:function(){c.trackingDispatcher.trackEventNumber(7)},onClickAdminLink:function(){c.trackingDispatcher.trackEventNumber(8),this.setLastActivePage()},onClickProjectDropdown:function(){c.trackingDispatcher.trackEventNumber(10)},updateActiveLink:function(){this.clearActives(),this.currentHash="#"+i.history.getFragment().split("?")[0].split("/",2).join("/"),this.currentHash==="#"+this.project.projectId&&(this.currentHash+="/dashboard"),this.currentHash==="#"+this.project.projectId+"/"&&(this.currentHash+="dashboard"),this.currentHash==="#administrate"&&(this.currentHash+="/projects"),this.$el.find('a[href^="'+this.currentHash+'"]',this.$el).addClass("active"),this.$el.find('#projectSelector a[data-href="'+this.project.projectId+'"]').parent().addClass("active")},clearActives:function(){r("a.active",this.$el).removeClass("active")},openTopMenuItem:function(e){e.preventDefault();var t=r(e.currentTarget);c.router.navigate(t.attr("href"),{trigger:!0})},changeProject:function(e){e.preventDefault();var t=r(e.currentTarget),n=t.attr("data-href");if(t.parent().hasClass("active"))return;c.userModel.updateDefaultProject(n),c.userModel.set("bts",null),c.trackingDispatcher.trackEventNumber(11),c.router.navigate(t.attr("data-href"),{trigger:!0})},onClickMenuOpen:function(){r("body").toggleClass("menu-open")},destroy:function(){this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return h}),define("core/components",["require","exports","module","jquery","backbone","util","app","storageService","model/SingletonURLParamsModel","storage/SingletonUserStorage","backbone-epoxy"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("app"),u=e("storageService"),a=e("model/SingletonURLParamsModel"),f=e("storage/SingletonUserStorage"),l=e("backbone-epoxy"),c=o.getInstance(),h=function(e){e.stopListening(),e.unbind(),e.model&&(e.model.unbind("change",e.render,e),e.model=null),e.collection&&(e.collection.reset(),e.collection=null),e.vent&&(e.vent.off(),e.vent=null),e.$tags&&(e.$tags.select2("destroy"),e.$tags=null,r("body > #select2-drop-mask, body > .select2-sizer").remove())},p=l.View.extend({destroy:function(){h(this),this.$el&&this.$el.off().empty(),this.$el=null,delete this}}),d=i.View.extend({destroy:function(){h(this),this.$el&&this.$el.off().empty(),this.remove()}}),v=i.Collection.extend({parse:function(e){return this.page=e.page,e.content?e.content:e}}),m=i.Model.extend({initialize:function(e){this.objectsType=e&&e.objectsType?e.objectsType:"objectsOnPage",this.clear()},loadObjectsCount:function(e){var t=u.getItemsCount(e);t&&(c[e]=t)},setTab:function(e){e&&(this.get("tab")["tab.id"]=e)},getTab:function(){return this.get("tab")["tab.id"]},setPage:function(e){this.get("paging")["page.page"]=e},getPage:function(){return this.get("paging")["page.page"]},setPageSize:function(e){this.get("pageSize")["page.size"]=parseInt(e)},getPageSize:function(){return this.get("pageSize")["page.size"]},setSortInfo:function(e,t){this.set("sorting",{dataIndex:e.replace(/\$/g,"."),direction:t}),this.get("sortingParam")["page.sort"]=e.replace(/\./g,"$")+","+t},getSortInfo:function(){return this.get("sorting")},setFilters:function(e){this.set("filters",e)},getFilters:function(){return this.get("filters")},hasDifference:function(e){if(e.length!==this.get("filters"))return!0;for(var t=0;t<e.length;t++){var n=this.get("filters")[t];if(n.id!==e[t].id||n.value!==e[t].value)return!0}return!1},toJSON:function(e){e=e||{};var t=_.extend({},this.get("paging"),this.get("sortingParam"),this.get("pageSize"),this.get("tab"),e);return _.each(this.get("filters"),function(e){var n=e.id.indexOf("tags")>-1?e.value.split(", ").join(","):e.value;t[e.id]=n}),t},toURLSting:function(){if(_.isEmpty(this.attributes))return"";var e=[];_.each([this.get("paging"),this.get("sortingParam"),this.get("pageSize"),this.get("tab")],function(t){for(var n in t)(_.has(t,n)||t[n])&&e.push(n+"="+t[n])}),_.forEach(this.get("filters"),function(t){if(t){var n=t.id.indexOf("tags")>-1?t.value.split(", ").join(","):t.value;e.push(t.id+"="+encodeURIComponent(n))}});var t="";return _.each(e,function(e,n,r){t+=e,n!=r.length-1&&(t+="&")}),t},hasFiltersWithValue:function(){var e=!1;return _.forEach(this.get("filters"),function(t){if(t.value&&t.value!=="Any")return e=!0,!1}),e},clear:function(e){e&&(this.objectsType=e),this.set("tab",{"tab.id":"allCases"}),this.set("paging",{"page.page":1}),this.set("pageSize",{"page.size":c[this.objectsType]}),this.set("sorting",{}),this.set("sortingParam",{}),this.set("filters",[])},apply:function(e){var t=e.split("&");this.clear(),_.each(t,function(e){var t=e.split("=");t[0]=="page.size"?this.setPageSize(t[1]):t[0]=="page.page"?this.setPage(t[1]):t[0]=="page.sort"?this.setSortInfo(t[1].split(",")[0],t[1].split(",")[1]):t[0]=="tab.id"?this.setTab(t[1]):this.get("filters").push({id:t[0],value:decodeURIComponent(t[1])})},this)}}),g=d.extend({initialize:function(e){this.model=e.model,this.minPaging=e.minMode||!1,this.showPageCount=0,r(window).on("resize."+this.cid,this.onResizeWindow.bind(this)),this.onResizeWindow()},tpl:"tpl-components-paging",render:function(){var e=this.model.get("totalPages"),t=this.model.get("number"),n=this.model.get("totalElements"),i=this.model.get("size"),o={from:n===0?0:(t-1)*i+1,to:e===t?n:i*t,totalElements:n,totalPages:e,active:t,objectsOnPage:i,minPaging:this.minPaging},u=parseInt(this.showPageCount/2);if(e>1){var a;e<=this.showPageCount?a=_.range(1,e+1):t<=u?a=_.range(1,this.showPageCount+1):t>=e-u?a=_.range(e-(this.showPageCount-1),e+1):a=_.range(t-(u-1),t+u+1),o=_.extend({showControls:!0,pages:a,hasNext:t!==e,hasPrevious:t!==1},o)}else o=_.extend({showControls:!1,pages:[],hasNext:!1,hasPrevious:!1},o);return this.$el.html(s.templates(this.tpl,o)),this.pageSize=r("[data-js-per-page-input]",this.$el),this.pageSizeStatic=r("[data-js-per-page]",this.$el),this},onResizeWindow:function(){var e=10;r(window).width()<930&&(e=5),e!=this.showPageCount&&(this.showPageCount?(this.showPageCount=e,this.render()):this.showPageCount=e)},first:function(e){e.preventDefault(),this.model.get("number")!==1&&this.trigger("page",1)},last:function(e){e.preventDefault(),this.model.get("number")!==this.model.get("totalPages")&&this.trigger("page",this.model.get("totalPages"))},previous:function(e){e.preventDefault(),this.model.get("number")!==1&&this.trigger("page",this.model.get("number")-1)},next:function(e){e.preventDefault(),this.model.get("number")!==this.model.get("totalPages")&&this.trigger("page",this.model.get("number")+1)},page:function(e){e.preventDefault();var t=Number(r(e.currentTarget).text());this.model.get("number")!==t&&this.trigger("page",t)},events:{"click .first":"first","click .previous":"previous","click .next":"next","click .last":"last","click .page":"page","click [data-js-per-page]":"showItemsPerPageControl","keyup [data-js-per-page-input]":"onKeyUpPageSize","change [data-js-per-page-input]":"hideItemsPerPageControl"},scrollToTop:function(e){c.mainScrollElement.animate({scrollTop:0},100)},showItemsPerPageControl:function(e){r(e.currentTarget).hide(),this.pageSize.val("").show().focus()},hideItemsPerPageControl:function(e){this.pageSize.hide(),this.pageSizeStatic.show(),this.applyPaging(!0)},onKeyUpPageSize:function(e){var t=this.pageSize.val(),n=/[^0-9]/g,r=t.replace(n,"");this.pageSize.val(r),this.trigger("keyUpPageSize",r),e.keyCode===13&&this.pageSize.change()},applyPaging:function(e){var t=parseInt(this.pageSize.val());t&&t!==this.model.get("size")&&(this.pageSizeStatic.text(t),e&&this.trigger("count",t)),this.pageSize.val("")},destroy:function(){r(window).off("resize."+this.cid),d.prototype.destroy.call(this)}}),y=g.extend({initialize:function(e){this.ready=r.Deferred(),g.prototype.initialize.call(this,e);if(!e.pageType){console.log("PagingToolbarSaveLocal: page type is not defined");return}this.pageType=e.pageType,this.urlModel=new a,this.userSettings=new f;var t=this;this.userSettings.ready.done(function(){t.setSettings(),t.ready.resolve()}),this.listenTo(this,"page",this.onChangePage),this.listenTo(this,"count",this.onChangeSize)},onChangePage:function(e){this.model.set({number:e}),this.pagingToSettings(),this.scrollToTop()},onChangeSize:function(e){e>300&&(e=300),this.model.set({number:1,size:e}),this.pagingToSettings(),this.scrollToTop()},setSettings:function(){if(this.urlModel.get("page.page")&&this.urlModel.get("page.size")){this.userSettings.set(this.pageType,{"page.size":this.urlModel.get("page.size")}),this.model.set({number:this.urlModel.get("page.page"),size:this.urlModel.get("page.size")});return}var e=this.getSettingsStorageData();if(e){this.urlModel.delaySet(e),this.model.set({number:e["page.page"]||1,size:e["page.size"]});return}var t={"page.page":1,"page.size":50};this.model.get("size")||this.model.set("size",t["page.size"]),this.model.get("number")||this.model.set("number",t["page.page"])},getSettingsStorageData:function(){return this.userSettings.get(this.pageType)},pagingToSettings:function(){this.urlModel.set({"page.page":this.model.get("number"),"page.size":this.model.get("size")}),this.userSettings.set(this.pageType,{"page.size":this.urlModel.get("page.size")})}}),b=g.extend({initialize:function(e){g.prototype.initialize.call(this,e),this.pageType=e.pageType,this.listenTo(this,"keyUpPageSize",this.onUserTypes),this.listenTo(this,"count",this.onChangeCount)},onUserTypes:function(e){if(e&&this.pageType=="objectsOnPage"){var t=c.preferences.filters,n=c.preferences.active;if(n){var r=n.split("?"),i=r[1],o=i.split("&"),u=_.findIndex(o,function(e){return e.indexOf("page.size")>=0}),a=o[u].split("="),f;a[1]=e,o[u]=a.join("="),r[1]=o.join("&"),f=r.join("?"),s.updateLaunchesHref(f)}}},onChangeCount:function(e){c[this.pageType]=e,u.setItemsCount(this.pageType,e)},applyPaging:function(e){var t=parseInt(this.pageSize.val());t&&t!==this.model.get("size")&&(this.pageSizeStatic.text(t),this.trigger("page",1,t),e&&this.trigger("count",t)),this.pageSize.val("")},onKeyUpPageSize:function(e){var t=this.pageSize.val(),n=/[^0-9]/g,r=t.replace(n,"");this.pageSize.val(r),this.trigger("keyUpPageSize",r),e.keyCode===13&&this.applyPaging(!0)}}),w=d.extend({tpl:"tpl-dialog-shell",btnTpl:"tpl-dialog-buttons",initialize:function(e){this.size=e.size||"md",this.headerTxt=e.headerTxt||"launchEditor",this.actionTxt=e.actionTxt||"",this.dismissTxt=e.dismissTxt||"",this.inSubmit=!1,this.hideDismiss=_.isUndefined(e.hideDismiss)?!1:e.hideDismiss,this.actionStatus=_.isUndefined(e.actionStatus)?!1:e.actionStatus,e.btnTpl&&(this.btnTpl=e.btnTpl),e.contentTpl&&(this.contentTpl=e.contentTpl)},render:function(e){var t=e||{};return this.$el=s.getDialog({name:this.tpl,data:{size:this.size,headerTxt:this.headerTxt,isBeta:t.isBeta}}),r("#buttonsModal",this.$el).html(s.templates(this.btnTpl,{dismissTxt:this.dismissTxt,actionTxt:this.actionTxt,hideDismiss:this.hideDismiss,actionStatus:this.actionStatus})),this.$actionBtn=r("#actionBtnDialog",this.$el),this.$content=r("#contentModal",this.$el),this.$loader=r("#dialogShellLoader",this.$el),this.$el.modal("show"),this},events:{"hidden.bs.modal":"destroy","shown.bs.modal":"shown","click #actionBtnDialog:not(.disabled)":"submit","keydown input":"trackForEnter"},shown:function(){},done:function(){this.$el.modal("hide")},trackForEnter:function(e){e.keyCode===13&&!this.$actionBtn.hasClass("disabled")&&!this.inSubmit&&this.submit()},destroy:function(){this.$el.data("modal",null),d.prototype.destroy.call(this)}}),E=w.extend({initialize:function(e){w.prototype.initialize.call(this,e),this.contentTpl=e.contentTpl,this.data=e.data,this.callback=e.callback,this.afterRenderCallback=e.afterRenderCallback,this.destroyCallback=e.destroyCallback,this.shownCallback=e.shownCallback},render:function(){return w.prototype.render.call(this),this.$content.html(s.templates(this.contentTpl,this.data)),_.isFunction(this.afterRenderCallback)&&this.afterRenderCallback(),this.delegateEvents(),this},submit:function(){this.callback(this.done.bind(this))},shown:function(){_.isFunction(this.shownCallback)&&this.shownCallback()},destroy:function(){_.isFunction(this.destroyCallback)&&(this.destroyCallback(),this.destroyCallback=null),this.afterRenderCallback&&(this.afterRenderCallback=null),this.shownCallback&&(this.shownCallback=null),this.callback=null,this.data=null,w.prototype.destroy.call(this)}});return{GridsStore:v,RequestParameters:m,PagingToolbar:g,PagingToolbarSaveUser:y,PagingToolbarConfigSave:b,BaseView:p,RemovableView:d,DialogShell:w,DialogWithCallBack:E}}),!function(){function e(e){return e&&(e.ownerDocument||e.document||e).documentElement}function t(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function n(e,t){return t>e?-1:e>t?1:e>=t?0:0/0}function r(e){return null===e?0/0:+e}function i(e){return!isNaN(e)}function s(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);i>r;){var s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}function o(e){return e.length}function u(e){for(var t=1;e*t%1;)t*=10;return t}function a(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function f(){this._=Object.create(null)}function l(e){return(e+="")===vu||e[0]===mu?mu+e:e}function c(e){return(e+="")[0]===mu?e.slice(1):e}function h(e){return l(e)in this._}function p(e){return(e=l(e))in this._&&delete this._[e]}function d(){var e=[];for(var t in this._)e.push(c(t));return e}function v(){var e=0;for(var t in this._)++e;return e}function m(){for(var e in this._)return!1;return!0}function g(){this._=Object.create(null)}function y(e){return e}function b(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function w(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=gu.length;r>n;++n){var i=gu[n]+t;if(i in e)return i}}function E(){}function S(){}function x(e){function t(){for(var t,r=n,i=-1,s=r.length;++i<s;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new f;return t.on=function(t,i){var s,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,s=n.indexOf(o)).concat(n.slice(s+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function T(){nu.event.preventDefault()}function N(){for(var e,t=nu.event;e=t.sourceEvent;)t=e;return t}function C(e){for(var t=new S,n=0,r=arguments.length;++n<r;)t[arguments[n]]=x(t);return t.of=function(n,r){return function(i){try{var s=i.sourceEvent=nu.event;i.target=e,nu.event=i,t[i.type].apply(n,r)}finally{nu.event=s}}},t}function k(e){return bu(e,xu),e}function L(e){return"function"==typeof e?e:function(){return wu(e,this)}}function A(e){return"function"==typeof e?e:function(){return Eu(e,this)}}function O(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function s(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function u(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=nu.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?u:o:e.local?s:i}function M(e){return e.trim().replace(/\s+/g," ")}function _(e){return new RegExp("(?:^|\\s+)"+nu.requote(e)+"(?:\\s+|$)","g")}function D(e){return(e+"").trim().split(/^|\s+/)}function P(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=D(e).map(H);var i=e.length;return"function"==typeof t?r:n}function H(e){var t=_(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",M(i+" "+e))):n.setAttribute("class",M(i.replace(t," ")))}}function B(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function s(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?s:i}function j(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function F(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n?t.createElementNS(n,e):t.createElement(e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=nu.ns.qualify(e)).local?n:t}function I(){var e=this.parentNode;e&&e.removeChild(this)}function q(e){return{__data__:e}}function R(e){return function(){return Su(this,e)}}function U(e){return arguments.length||(e=n),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function z(e,t){for(var n=0,r=e.length;r>n;n++)for(var i,s=e[n],o=0,u=s.length;u>o;o++)(i=s[o])&&t(i,o,n);return e}function W(e){return bu(e,Nu),e}function X(e){var t,n;return function(r,i,s){var o,u=e[s].update,a=u.length;for(s!=n&&(n=s,t=0),i>=t&&(t=i+1);!(o=u[t])&&++t<a;);return o}}function V(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=a(t,iu(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function s(){var t,n=new RegExp("^__on([^.]+)"+nu.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,u=e.indexOf("."),a=$;u>0&&(e=e.slice(0,u));var f=Cu.get(e);return f&&(e=f,a=J),u?t?i:r:t?E:s}function $(e,t){return function(n){var r=nu.event;nu.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{nu.event=r}}}function J(e,t){var n=$(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function K(n){var r=".dragsuppress-"+ ++Lu,i="click"+r,s=nu.select(t(n)).on("touchmove"+r,T).on("dragstart"+r,T).on("selectstart"+r,T);if(null==ku&&(ku="onselectstart"in n?!1:w(n.style,"userSelect")),ku){var o=e(n).style,u=o[ku];o[ku]="none"}return function(e){if(s.on(r,null),ku&&(o[ku]=u),e){var t=function(){s.on(i,null)};s.on(i,function(){T(),t()},!0),setTimeout(t,0)}}}function Q(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(0>Au){var s=t(e);if(s.scrollX||s.scrollY){r=nu.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();Au=!o.f&&!o.e,r.remove()}}return Au?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var u=e.getBoundingClientRect();return[n.clientX-u.left-e.clientLeft,n.clientY-u.top-e.clientTop]}function G(){return nu.event.changedTouches[0].identifier}function Y(e){return e>0?1:0>e?-1:0}function Z(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function et(e){return e>1?0:-1>e?_u:Math.acos(e)}function tt(e){return e>1?Hu:-1>e?-Hu:Math.asin(e)}function nt(e){return((e=Math.exp(e))-1/e)/2}function rt(e){return((e=Math.exp(e))+1/e)/2}function it(e){return((e=Math.exp(2*e))-1)/(e+1)}function st(e){return(e=Math.sin(e/2))*e}function ot(){}function ut(e,t,n){return this instanceof ut?(this.h=+e,this.s=+t,void (this.l=+n)):arguments.length<2?e instanceof ut?new ut(e.h,e.s,e.l):Et(""+e,St,ut):new ut(e,t,n)}function at(e,t,n){function r(e){return e>360?e-=360:0>e&&(e+=360),60>e?s+(o-s)*e/60:180>e?o:240>e?s+(o-s)*(240-e)/60:s}function i(e){return Math.round(255*r(e))}var s,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:0>t?0:t>1?1:t,n=0>n?0:n>1?1:n,o=.5>=n?n*(1+t):n+t-n*t,s=2*n-o,new gt(i(e+120),i(e),i(e-120))}function ft(e,t,n){return this instanceof ft?(this.h=+e,this.c=+t,void (this.l=+n)):arguments.length<2?e instanceof ft?new ft(e.h,e.c,e.l):e instanceof ct?pt(e.l,e.a,e.b):pt((e=xt((e=nu.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new ft(e,t,n)}function lt(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new ct(n,Math.cos(e*=Bu)*t,Math.sin(e)*t)}function ct(e,t,n){return this instanceof ct?(this.l=+e,this.a=+t,void (this.b=+n)):arguments.length<2?e instanceof ct?new ct(e.l,e.a,e.b):e instanceof ft?lt(e.h,e.c,e.l):xt((e=gt(e)).r,e.g,e.b):new ct(e,t,n)}function ht(e,t,n){var r=(e+16)/116,i=r+t/500,s=r-n/200;return i=dt(i)*$u,r=dt(r)*Ju,s=dt(s)*Ku,new gt(mt(3.2404542*i-1.5371385*r-.4985314*s),mt(-0.969266*i+1.8760108*r+.041556*s),mt(.0556434*i-.2040259*r+1.0572252*s))}function pt(e,t,n){return e>0?new ft(Math.atan2(n,t)*ju,Math.sqrt(t*t+n*n),e):new ft(0/0,0/0,e)}function dt(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function vt(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function mt(e){return Math.round(255*(.00304>=e?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function gt(e,t,n){return this instanceof gt?(this.r=~~e,this.g=~~t,void (this.b=~~n)):arguments.length<2?e instanceof gt?new gt(e.r,e.g,e.b):Et(""+e,gt,at):new gt(e,t,n)}function yt(e){return new gt(e>>16,e>>8&255,255&e)}function bt(e){return yt(e)+""}function wt(e){return 16>e?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function Et(e,t,n){var r,i,s,o=0,u=0,a=0;if(r=/([a-z]+)\((.*)\)/i.exec(e))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Nt(i[0]),Nt(i[1]),Nt(i[2]))}return(s=Yu.get(e.toLowerCase()))?t(s.r,s.g,s.b):(null==e||"#"!==e.charAt(0)||isNaN(s=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&s)>>4,o=o>>4|o,u=240&s,u=u>>4|u,a=15&s,a=a<<4|a):7===e.length&&(o=(16711680&s)>>16,u=(65280&s)>>8,a=255&s)),t(o,u,a))}function St(e,t,n){var r,i,s=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),u=o-s,a=(o+s)/2;return u?(i=.5>a?u/(o+s):u/(2-o-s),r=e==o?(t-n)/u+(n>t?6:0):t==o?(n-e)/u+2:(e-t)/u+4,r*=60):(r=0/0,i=a>0&&1>a?0:r),new ut(r,i,a)}function xt(e,t,n){e=Tt(e),t=Tt(t),n=Tt(n);var r=vt((.4124564*e+.3575761*t+.1804375*n)/$u),i=vt((.2126729*e+.7151522*t+.072175*n)/Ju),s=vt((.0193339*e+.119192*t+.9503041*n)/Ku);return ct(116*i-16,500*(r-i),200*(i-s))}function Tt(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Nt(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Ct(e){return"function"==typeof e?e:function(){return e}}function kt(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Lt(t,n,e,r)}}function Lt(e,t,n,r){function i(){var e,t=a.status;if(!t&&Ot(a)||t>=200&&300>t||304===t){try{e=n.call(s,a)}catch(r){return void o.error.call(s,r)}o.load.call(s,e)}else o.error.call(s,a)}var s={},o=nu.dispatch("beforesend","progress","load","error"),u={},a=new XMLHttpRequest,f=null;return!this.XDomainRequest||"withCredentials"in a||!/^(http(s)?:)?\/\//.test(e)||(a=new XDomainRequest),"onload"in a?a.onload=a.onerror=i:a.onreadystatechange=function(){a.readyState>3&&i()},a.onprogress=function(e){var t=nu.event;nu.event=e;try{o.progress.call(s,a)}finally{nu.event=t}},s.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?u[e]:(null==t?delete u[e]:u[e]=t+"",s)},s.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",s):t},s.responseType=function(e){return arguments.length?(f=e,s):f},s.response=function(e){return n=e,s},["get","post"].forEach(function(e){s[e]=function(){return s.send.apply(s,[e].concat(iu(arguments)))}}),s.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),a.open(n,e,!0),null==t||"accept"in u||(u.accept=t+",*/*"),a.setRequestHeader)for(var l in u)a.setRequestHeader(l,u[l]);return null!=t&&a.overrideMimeType&&a.overrideMimeType(t),null!=f&&(a.responseType=f),null!=i&&s.on("error",i).on("load",function(e){i(null,e)}),o.beforesend.call(s,a),a.send(null==r?null:r),s},s.abort=function(){return a.abort(),s},nu.rebind(s,o,"on"),null==r?s:s.get(At(r))}function At(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Ot(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Mt(){var e=_t(),t=Dt()-e;t>24?(isFinite(t)&&(clearTimeout(na),na=setTimeout(Mt,t)),ta=0):(ta=1,ia(Mt))}function _t(){var e=Date.now();for(ra=Zu;ra;)e>=ra.t&&(ra.f=ra.c(e-ra.t)),ra=ra.n;return e}function Dt(){for(var e,t=Zu,n=1/0;t;)t.f?t=e?e.n=t.n:Zu=t.n:(t.t<n&&(n=t.t),t=(e=t).n);return ea=e,n}function Pt(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Ht(e,t){var n=Math.pow(10,3*du(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Bt(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,s=r&&n?function(e,t){for(var i=e.length,s=[],o=0,u=r[0],a=0;i>0&&u>0&&(a+u+1>t&&(u=Math.max(1,t-a)),s.push(e.substring(i-=u,i+u)),!((a+=u+1)>t));)u=r[o=(o+1)%r.length];return s.reverse().join(n)}:y;return function(e){var n=oa.exec(e),r=n[1]||" ",o=n[2]||">",u=n[3]||"-",a=n[4]||"",f=n[5],l=+n[6],c=n[7],h=n[8],p=n[9],d=1,v="",m="",g=!1,y=!0;switch(h&&(h=+h.substring(1)),(f||"0"===r&&"="===o)&&(f=r="0",o="="),p){case"n":c=!0,p="g";break;case"%":d=100,m="%",p="f";break;case"p":d=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===a&&(v="0"+p.toLowerCase());case"c":y=!1;case"d":g=!0,h=0;break;case"s":d=-1,p="r"}"$"===a&&(v=i[0],m=i[1]),"r"!=p||h||(p="g"),null!=h&&("g"==p?h=Math.max(1,Math.min(21,h)):("e"==p||"f"==p)&&(h=Math.max(0,Math.min(20,h)))),p=ua.get(p)||jt;var b=f&&c;return function(e){var n=m;if(g&&e%1)return"";var i=0>e||0===e&&0>1/e?(e=-e,"-"):"-"===u?"":u;if(0>d){var a=nu.formatPrefix(e,h);e=a.scale(e),n=a.symbol+m}else e*=d;e=p(e,h);var w,E,S=e.lastIndexOf(".");if(0>S){var x=y?e.lastIndexOf("e"):-1;0>x?(w=e,E=""):(w=e.substring(0,x),E=e.substring(x))}else w=e.substring(0,S),E=t+e.substring(S+1);!f&&c&&(w=s(w,1/0));var T=v.length+w.length+E.length+(b?0:i.length),N=l>T?(new Array(T=l-T+1)).join(r):"";return b&&(w=s(N+w,N.length?l-E.length:1/0)),i+=v,e=w+E,("<"===o?i+e+N:">"===o?N+i+e:"^"===o?N.substring(0,T>>=1)+i+e+N.substring(T):i+(b?e:N+e))+n}}}function jt(e){return e+""}function Ft(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function It(e,t,n){function r(t){var n=e(t),r=s(n,1);return r-t>t-n?n:r}function i(n){return t(n=e(new fa(n-1)),1),n}function s(e,n){return t(e=new fa(+e),n),e}function o(e,r,s){var o=i(e),u=[];if(s>1)for(;r>o;)n(o)%s||u.push(new Date(+o)),t(o,1);else for(;r>o;)u.push(new Date(+o)),t(o,1);return u}function u(e,t,n){try{fa=Ft;var r=new Ft;return r._=e,o(r,t,n)}finally{fa=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=s,e.range=o;var a=e.utc=qt(e);return a.floor=a,a.round=qt(r),a.ceil=qt(i),a.offset=qt(s),a.range=u,e}function qt(e){return function(t,n){try{fa=Ft;var r=new Ft;return r._=t,e(r,n)._}finally{fa=Date}}}function Rt(e){function t(e){function t(t){for(var n,i,s,o=[],u=-1,a=0;++u<r;)37===e.charCodeAt(u)&&(o.push(e.slice(a,u)),null!=(i=ca[n=e.charAt(++u)])&&(n=e.charAt(++u)),(s=L[n])&&(n=s(t,null==i?"e"===n?" ":"0":i)),o.push(n),a=u+1);return o.push(e.slice(a,u)),o.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=n(r,e,t,0);if(i!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var s=null!=r.Z&&fa!==Ft,o=new(s?Ft:fa);return"j"in r?o.setFullYear(r.y,0,r.j):"w"in r&&("W"in r||"U"in r)?(o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),s?o._:o},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,s,o,u=0,a=t.length,f=n.length;a>u;){if(r>=f)return-1;if(i=t.charCodeAt(u++),37===i){if(o=t.charAt(u++),s=A[o in ca?t.charAt(u++):o],!s||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){S.lastIndex=0;var r=S.exec(t.slice(n));return r?(e.w=x.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){w.lastIndex=0;var r=w.exec(t.slice(n));return r?(e.w=E.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,n){C.lastIndex=0;var r=C.exec(t.slice(n));return r?(e.m=k.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){T.lastIndex=0;var r=T.exec(t.slice(n));return r?(e.m=N.get(r[0].toLowerCase()),n+r[0].length):-1}function u(e,t,r){return n(e,L.c.toString(),t,r)}function a(e,t,r){return n(e,L.x.toString(),t,r)}function f(e,t,r){return n(e,L.X.toString(),t,r)}function l(e,t,n){var r=b.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var c=e.dateTime,h=e.date,p=e.time,d=e.periods,v=e.days,m=e.shortDays,g=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{fa=Ft;var t=new fa;return t._=e,r(t)}finally{fa=Date}}var r=t(e);return n.parse=function(e){try{fa=Ft;var t=r.parse(e);return t&&t._}finally{fa=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=an;var b=nu.map(),w=zt(v),E=Wt(v),S=zt(m),x=Wt(m),T=zt(g),N=Wt(g),C=zt(y),k=Wt(y);d.forEach(function(e,t){b.set(e.toLowerCase(),t)});var L={a:function(e){return m[e.getDay()]},A:function(e){return v[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return g[e.getMonth()]},c:t(c),d:function(e,t){return Ut(e.getDate(),t,2)},e:function(e,t){return Ut(e.getDate(),t,2)},H:function(e,t){return Ut(e.getHours(),t,2)},I:function(e,t){return Ut(e.getHours()%12||12,t,2)},j:function(e,t){return Ut(1+aa.dayOfYear(e),t,3)},L:function(e,t){return Ut(e.getMilliseconds(),t,3)},m:function(e,t){return Ut(e.getMonth()+1,t,2)},M:function(e,t){return Ut(e.getMinutes(),t,2)},p:function(e){return d[+(e.getHours()>=12)]},S:function(e,t){return Ut(e.getSeconds(),t,2)},U:function(e,t){return Ut(aa.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ut(aa.mondayOfYear(e),t,2)},x:t(h),X:t(p),y:function(e,t){return Ut(e.getFullYear()%100,t,2)},Y:function(e,t){return Ut(e.getFullYear()%1e4,t,4)},Z:on,"%":function(){return"%"}},A={a:r,A:i,b:s,B:o,c:u,d:Zt,e:Zt,H:tn,I:tn,j:en,L:sn,m:Yt,M:nn,p:l,S:rn,U:Vt,w:Xt,W:$t,x:a,X:f,y:Kt,Y:Jt,Z:Qt,"%":un};return t}function Ut(e,t,n){var r=0>e?"-":"",i=(r?-e:e)+"",s=i.length;return r+(n>s?(new Array(n-s+1)).join(t)+i:i)}function zt(e){return new RegExp("^(?:"+e.map(nu.requote).join("|")+")","i")}function Wt(e){for(var t=new f,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Xt(e,t,n){ha.lastIndex=0;var r=ha.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Vt(e,t,n){ha.lastIndex=0;var r=ha.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function $t(e,t,n){ha.lastIndex=0;var r=ha.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Jt(e,t,n){ha.lastIndex=0;var r=ha.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Kt(e,t,n){ha.lastIndex=0;var r=ha.exec(t.slice(n,n+2));return r?(e.y=Gt(+r[0]),n+r[0].length):-1}function Qt(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Gt(e){return e+(e>68?1900:2e3)}function Yt(e,t,n){ha.lastIndex=0;var r=ha.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Zt(e,t,n){ha.lastIndex=0;var r=ha.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function en(e,t,n){ha.lastIndex=0;var r=ha.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function tn(e,t,n){ha.lastIndex=0;var r=ha.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function nn(e,t,n){ha.lastIndex=0;var r=ha.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function rn(e,t,n){ha.lastIndex=0;var r=ha.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function sn(e,t,n){ha.lastIndex=0;var r=ha.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function on(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=du(t)/60|0,i=du(t)%60;return n+Ut(r,"0",2)+Ut(i,"0",2)}function un(e,t,n){pa.lastIndex=0;var r=pa.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function an(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function fn(){}function ln(e,t,n){var r=n.s=e+t,i=r-e,s=r-i;n.t=e-s+(t-i)}function cn(e,t){e&&ga.hasOwnProperty(e.type)&&ga[e.type](e,t)}function hn(e,t,n){var r,i=-1,s=e.length-n;for(t.lineStart();++i<s;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function pn(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)hn(e[n],t,1);t.polygonEnd()}function dn(){function e(e,t){e*=Bu,t=t*Bu/2+_u/4;var n=e-r,o=n>=0?1:-1,u=o*n,a=Math.cos(t),f=Math.sin(t),l=s*f,c=i*a+l*Math.cos(u),h=l*o*Math.sin(u);ba.add(Math.atan2(h,c)),r=e,i=a,s=f}var t,n,r,i,s;wa.point=function(o,u){wa.point=e,r=(t=o)*Bu,i=Math.cos(u=(n=u)*Bu/2+_u/4),s=Math.sin(u)},wa.lineEnd=function(){e(t,n)}}function vn(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function mn(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function gn(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function yn(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function bn(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function wn(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function En(e){return[Math.atan2(e[1],e[0]),tt(e[2])]}function Sn(e,t){return du(e[0]-t[0])<Ou&&du(e[1]-t[1])<Ou}function xn(e,t){e*=Bu;var n=Math.cos(t*=Bu);Tn(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Tn(e,t,n){++Ea,xa+=(e-xa)/Ea,Ta+=(t-Ta)/Ea,Na+=(n-Na)/Ea}function Nn(){function e(e,i){e*=Bu;var s=Math.cos(i*=Bu),o=s*Math.cos(e),u=s*Math.sin(e),a=Math.sin(i),f=Math.atan2(Math.sqrt((f=n*a-r*u)*f+(f=r*o-t*a)*f+(f=t*u-n*o)*f),t*o+n*u+r*a);Sa+=f,Ca+=f*(t+(t=o)),ka+=f*(n+(n=u)),La+=f*(r+(r=a)),Tn(t,n,r)}var t,n,r;_a.point=function(i,s){i*=Bu;var o=Math.cos(s*=Bu);t=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(s),_a.point=e,Tn(t,n,r)}}function Cn(){_a.point=xn}function kn(){function e(e,t){e*=Bu;var n=Math.cos(t*=Bu),o=n*Math.cos(e),u=n*Math.sin(e),a=Math.sin(t),f=i*a-s*u,l=s*o-r*a,c=r*u-i*o,h=Math.sqrt(f*f+l*l+c*c),p=r*o+i*u+s*a,d=h&&-et(p)/h,v=Math.atan2(h,p);Aa+=d*f,Oa+=d*l,Ma+=d*c,Sa+=v,Ca+=v*(r+(r=o)),ka+=v*(i+(i=u)),La+=v*(s+(s=a)),Tn(r,i,s)}var t,n,r,i,s;_a.point=function(o,u){t=o,n=u,_a.point=e,o*=Bu;var a=Math.cos(u*=Bu);r=a*Math.cos(o),i=a*Math.sin(o),s=Math.sin(u),Tn(r,i,s)},_a.lineEnd=function(){e(t,n),_a.lineEnd=Cn,_a.point=xn}}function Ln(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return n=t.invert(n,r),n&&e.invert(n[0],n[1])}),n}function An(){return!0}function On(e,t,n,r,i){var s=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(Sn(n,r)){i.lineStart();for(var u=0;t>u;++u)i.point((n=e[u])[0],n[1]);return void i.lineEnd()}var a=new _n(n,e,null,!0),f=new _n(n,null,a,!1);a.o=f,s.push(a),o.push(f),a=new _n(r,e,null,!1),f=new _n(r,null,a,!0),a.o=f,s.push(a),o.push(f)}}),o.sort(t),Mn(s),Mn(o),s.length){for(var u=0,a=n,f=o.length;f>u;++u)o[u].e=a=!a;for(var l,c,h=s[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;l=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(var u=0,f=l.length;f>u;++u)i.point((c=l[u])[0],c[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(d){l=p.p.z;for(var u=l.length-1;u>=0;--u)i.point((c=l[u])[0],c[1])}else r(p.x,p.p.x,-1,i);p=p.p}p=p.o,l=p.z,d=!d}while(!p.v);i.lineEnd()}}}function Mn(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function _n(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Dn(e,t,n,r){return function(i,s){function o(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&s.point(t,n)}function u(e,t){var n=i(e,t);m.point(n[0],n[1])}function a(){y.point=u,m.lineStart()}function f(){y.point=o,m.lineEnd()}function l(e,t){v.push([e,t]);var n=i(e,t);w.point(n[0],n[1])}function c(){w.lineStart(),v=[]}function h(){l(v[0][0],v[0][1]),w.lineEnd();var e,t=w.clean(),n=b.buffer(),r=n.length;if(v.pop(),d.push(v),v=null,r)if(1&t){e=n[0];var i,r=e.length-1,o=-1;if(r>0){for(E||(s.polygonStart(),E=!0),s.lineStart();++o<r;)s.point((i=e[o])[0],i[1]);s.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Pn))}var p,d,v,m=t(s),g=i.invert(r[0],r[1]),y={point:o,lineStart:a,lineEnd:f,polygonStart:function(){y.point=l,y.lineStart=c,y.lineEnd=h,p=[],d=[]},polygonEnd:function(){y.point=o,y.lineStart=a,y.lineEnd=f,p=nu.merge(p);var e=qn(g,d);p.length?(E||(s.polygonStart(),E=!0),On(p,Bn,e,n,s)):e&&(E||(s.polygonStart(),E=!0),s.lineStart(),n(null,null,1,s),s.lineEnd()),E&&(s.polygonEnd(),E=!1),p=d=null},sphere:function(){s.polygonStart(),s.lineStart(),n(null,null,1,s),s.lineEnd(),s.polygonEnd()}},b=Hn(),w=t(b),E=!1;return y}}function Pn(e){return e.length>1}function Hn(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:E,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Bn(e,t){return((e=e.x)[0]<0?e[1]-Hu-Ou:Hu-e[1])-((t=t.x)[0]<0?t[1]-Hu-Ou:Hu-t[1])}function jn(e){var t,n=0/0,r=0/0,i=0/0;return{lineStart:function(){e.lineStart(),t=1},point:function(s,o){var u=s>0?_u:-_u,a=du(s-n);du(a-_u)<Ou?(e.point(n,r=(r+o)/2>0?Hu:-Hu),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(s,r),t=0):i!==u&&a>=_u&&(du(n-i)<Ou&&(n-=i*Ou),du(s-u)<Ou&&(s-=u*Ou),r=Fn(n,r,s,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=s,r=o),i=u},lineEnd:function(){e.lineEnd(),n=r=0/0},clean:function(){return 2-t}}}function Fn(e,t,n,r){var i,s,o=Math.sin(e-n);return du(o)>Ou?Math.atan((Math.sin(t)*(s=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*s*o)):(t+r)/2}function In(e,t,n,r){var i;if(null==e)i=n*Hu,r.point(-_u,i),r.point(0,i),r.point(_u,i),r.point(_u,0),r.point(_u,-i),r.point(0,-i),r.point(-_u,-i),r.point(-_u,0),r.point(-_u,i);else if(du(e[0]-t[0])>Ou){var s=e[0]<t[0]?_u:-_u;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function qn(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],s=0,o=0;ba.reset();for(var u=0,a=t.length;a>u;++u){var f=t[u],l=f.length;if(l)for(var c=f[0],h=c[0],p=c[1]/2+_u/4,d=Math.sin(p),v=Math.cos(p),m=1;;){m===l&&(m=0),e=f[m];var g=e[0],y=e[1]/2+_u/4,b=Math.sin(y),w=Math.cos(y),E=g-h,S=E>=0?1:-1,x=S*E,T=x>_u,N=d*b;if(ba.add(Math.atan2(N*S*Math.sin(x),v*w+N*Math.cos(x))),s+=T?E+S*Du:E,T^h>=n^g>=n){var C=gn(vn(c),vn(e));wn(C);var k=gn(i,C);wn(k);var L=(T^E>=0?-1:1)*tt(k[2]);(r>L||r===L&&(C[0]||C[1]))&&(o+=T^E>=0?1:-1)}if(!(m++))break;h=g,d=b,v=w,c=e}}return(-Ou>s||Ou>s&&0>ba)^1&o}function Rn(e){function t(e,t){return Math.cos(e)*Math.cos(t)>s}function n(e){var n,s,a,f,l;return{lineStart:function(){f=a=!1,l=1},point:function(c,h){var p,d=[c,h],v=t(c,h),m=o?v?0:i(c,h):v?i(c+(0>c?_u:-_u),h):0;if(!n&&(f=a=v)&&e.lineStart(),v!==a&&(p=r(n,d),(Sn(n,p)||Sn(d,p))&&(d[0]+=Ou,d[1]+=Ou,v=t(d[0],d[1]))),v!==a)l=0,v?(e.lineStart(),p=r(d,n),e.point(p[0],p[1])):(p=r(n,d),e.point(p[0],p[1]),e.lineEnd()),n=p;else if(u&&n&&o^v){var g;m&s||!(g=r(d,n,!0))||(l=0,o?(e.lineStart(),e.point(g[0][0],g[0][1]),e.point(g[1][0],g[1][1]),e.lineEnd()):(e.point(g[1][0],g[1][1]),e.lineEnd(),e.lineStart(),e.point(g[0][0],g[0][1])))}!v||n&&Sn(n,d)||e.point(d[0],d[1]),n=d,a=v,s=m},lineEnd:function(){a&&e.lineEnd(),n=null},clean:function(){return l|(f&&a)<<1}}}function r(e,t,n){var r=vn(e),i=vn(t),o=[1,0,0],u=gn(r,i),a=mn(u,u),f=u[0],l=a-f*f;if(!l)return!n&&e;var c=s*a/l,h=-s*f/l,p=gn(o,u),d=bn(o,c),v=bn(u,h);yn(d,v);var m=p,g=mn(d,m),y=mn(m,m),b=g*g-y*(mn(d,d)-1);if(!(0>b)){var w=Math.sqrt(b),E=bn(m,(-g-w)/y);if(yn(E,d),E=En(E),!n)return E;var S,x=e[0],T=t[0],N=e[1],C=t[1];x>T&&(S=x,x=T,T=S);var k=T-x,L=du(k-_u)<Ou,A=L||Ou>k;if(!L&&N>C&&(S=N,N=C,C=S),A?L?N+C>0^E[1]<(du(E[0]-x)<Ou?N:C):N<=E[1]&&E[1]<=C:k>_u^(x<=E[0]&&E[0]<=T)){var O=bn(m,(-g+w)/y);return yn(O,d),[E,En(O)]}}}function i(t,n){var r=o?e:_u-e,i=0;return-r>t?i|=1:t>r&&(i|=2),-r>n?i|=4:n>r&&(i|=8),i}var s=Math.cos(e),o=s>0,u=du(s)>Ou,a=dr(e,6*Bu);return Dn(t,n,a,o?[0,-e]:[-_u,e-_u])}function Un(e,t,n,r){return function(i){var s,o=i.a,u=i.b,a=o.x,f=o.y,l=u.x,c=u.y,h=0,p=1,d=l-a,v=c-f;if(s=e-a,d||!(s>0)){if(s/=d,0>d){if(h>s)return;p>s&&(p=s)}else if(d>0){if(s>p)return;s>h&&(h=s)}if(s=n-a,d||!(0>s)){if(s/=d,0>d){if(s>p)return;s>h&&(h=s)}else if(d>0){if(h>s)return;p>s&&(p=s)}if(s=t-f,v||!(s>0)){if(s/=v,0>v){if(h>s)return;p>s&&(p=s)}else if(v>0){if(s>p)return;s>h&&(h=s)}if(s=r-f,v||!(0>s)){if(s/=v,0>v){if(s>p)return;s>h&&(h=s)}else if(v>0){if(h>s)return;p>s&&(p=s)}return h>0&&(i.a={x:a+h*d,y:f+h*v}),1>p&&(i.b={x:a+p*d,y:f+p*v}),i}}}}}}function zn(e,t,n,r){function i(r,i){return du(r[0]-e)<Ou?i>0?0:3:du(r[0]-n)<Ou?i>0?2:1:du(r[1]-t)<Ou?i>0?1:0:i>0?3:2}function s(e,t){return o(e.x,t.x)}function o(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(u){function a(e){for(var t=0,n=m.length,r=e[1],i=0;n>i;++i)for(var s,o=1,u=m[i],a=u.length,f=u[0];a>o;++o)s=u[o],f[1]<=r?s[1]>r&&Z(f,s,e)>0&&++t:s[1]<=r&&Z(f,s,e)<0&&--t,f=s;return 0!==t}function f(s,u,a,f){var l=0,c=0;if(null==s||(l=i(s,a))!==(c=i(u,a))||o(s,u)<0^a>0){do f.point(0===l||3===l?e:n,l>1?r:t);while((l=(l+a+4)%4)!==c)}else f.point(u[0],u[1])}function l(i,s){return i>=e&&n>=i&&s>=t&&r>=s}function c(e,t){l(e,t)&&u.point(e,t)}function h(){A.point=d,m&&m.push(g=[]),T=!0,x=!1,E=S=0/0}function p(){v&&(d(y,b),w&&x&&k.rejoin(),v.push(k.buffer())),A.point=c,x&&u.lineEnd()}function d(e,t){e=Math.max(-Pa,Math.min(Pa,e)),t=Math.max(-Pa,Math.min(Pa,t));var n=l(e,t);if(m&&g.push([e,t]),T)y=e,b=t,w=n,T=!1,n&&(u.lineStart(),u.point(e,t));else if(n&&x)u.point(e,t);else{var r={a:{x:E,y:S},b:{x:e,y:t}};L(r)?(x||(u.lineStart(),u.point(r.a.x,r.a.y)),u.point(r.b.x,r.b.y),n||u.lineEnd(),N=!1):n&&(u.lineStart(),u.point(e,t),N=!1)}E=e,S=t,x=n}var v,m,g,y,b,w,E,S,x,T,N,C=u,k=Hn(),L=Un(e,t,n,r),A={point:c,lineStart:h,lineEnd:p,polygonStart:function(){u=k,v=[],m=[],N=!0},polygonEnd:function(){u=C,v=nu.merge(v);var t=a([e,r]),n=N&&t,i=v.length;(n||i)&&(u.polygonStart(),n&&(u.lineStart(),f(null,null,1,u),u.lineEnd()),i&&On(v,s,t,f,u),u.polygonEnd()),v=m=g=null}};return A}}function Wn(e){var t=0,n=_u/3,r=or(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*_u/180,n=e[1]*_u/180):[t/_u*180,n/_u*180]},i}function Xn(e,t){function n(e,t){var n=Math.sqrt(s-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),o-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,s=1+r*(2*i-r),o=Math.sqrt(s)/i;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,tt((s-(e*e+n*n)*i*i)/(2*i))]},n}function Vn(){function e(e,t){Ba+=i*e-r*t,r=e,i=t}var t,n,r,i;Ra.point=function(s,o){Ra.point=e,t=r=s,n=i=o},Ra.lineEnd=function(){e(t,n)}}function $n(e,t){ja>e&&(ja=e),e>Ia&&(Ia=e),Fa>t&&(Fa=t),t>qa&&(qa=t)}function Jn(){function e(e,t){o.push("M",e,",",t,s)}function t(e,t){o.push("M",e,",",t),u.point=n}function n(e,t){o.push("L",e,",",t)}function r(){u.point=e}function i(){o.push("Z")}var s=Kn(4.5),o=[],u={point:e,lineStart:function(){u.point=t},lineEnd:r,polygonStart:function(){u.lineEnd=i},polygonEnd:function(){u.lineEnd=r,u.point=e},pointRadius:function(e){return s=Kn(e),u},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return u}function Kn(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+ -2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Qn(e,t){xa+=e,Ta+=t,++Na}function Gn(){function e(e,r){var i=e-t,s=r-n,o=Math.sqrt(i*i+s*s);Ca+=o*(t+e)/2,ka+=o*(n+r)/2,La+=o,Qn(t=e,n=r)}var t,n;za.point=function(r,i){za.point=e,Qn(t=r,n=i)}}function Yn(){za.point=Qn}function Zn(){function e(e,t){var n=e-r,s=t-i,o=Math.sqrt(n*n+s*s);Ca+=o*(r+e)/2,ka+=o*(i+t)/2,La+=o,o=i*e-r*t,Aa+=o*(r+e),Oa+=o*(i+t),Ma+=3*o,Qn(r=e,i=t)}var t,n,r,i;za.point=function(s,o){za.point=e,Qn(t=r=s,n=i=o)},za.lineEnd=function(){e(t,n)}}function er(e){function t(t,n){e.moveTo(t+o,n),e.arc(t,n,o,0,Du)}function n(t,n){e.moveTo(t,n),u.point=r}function r(t,n){e.lineTo(t,n)}function i(){u.point=t}function s(){e.closePath()}var o=4.5,u={point:t,lineStart:function(){u.point=n},lineEnd:i,polygonStart:function(){u.lineEnd=s},polygonEnd:function(){u.lineEnd=i,u.point=t},pointRadius:function(e){return o=e,u},result:E};return u}function tr(e){function t(e){return(u?r:n)(e)}function n(t){return ir(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){b=0/0,T.point=s,t.lineStart()}function s(n,r){var s=vn([n,r]),o=e(n,r);i(b,w,y,E,S,x,b=o[0],w=o[1],y=n,E=s[0],S=s[1],x=s[2],u,t),t.point(b,w)}function o(){T.point=n,t.lineEnd()}function a(){r(),T.point=f,T.lineEnd=l}function f(e,t){s(c=e,h=t),p=b,d=w,v=E,m=S,g=x,T.point=s}function l(){i(b,w,y,E,S,x,p,d,c,v,m,g,u,t),T.lineEnd=o,o()}var c,h,p,d,v,m,g,y,b,w,E,S,x,T={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),T.lineStart=a},polygonEnd:function(){t.polygonEnd(),T.lineStart=r}};return T}function i(t,n,r,u,a,f,l,c,h,p,d,v,m,g){var y=l-t,b=c-n,w=y*y+b*b;if(w>4*s&&m--){var E=u+p,S=a+d,x=f+v,T=Math.sqrt(E*E+S*S+x*x),N=Math.asin(x/=T),C=du(du(x)-1)<Ou||du(r-h)<Ou?(r+h)/2:Math.atan2(S,E),k=e(C,N),L=k[0],A=k[1],O=L-t,M=A-n,_=b*O-y*M;(_*_/w>s||du((y*O+b*M)/w-.5)>.3||o>u*p+a*d+f*v)&&(i(t,n,r,u,a,f,L,A,C,E/=T,S/=T,x,m,g),g.point(L,A),i(L,A,C,E,S,x,l,c,h,p,d,v,m,g))}}var s=.5,o=Math.cos(30*Bu),u=16;return t.precision=function(e){return arguments.length?(u=(s=e*e)>0&&16,t):Math.sqrt(s)},t}function nr(e){var t=tr(function(t,n){return e([t*ju,n*ju])});return function(e){return ur(t(e))}}function rr(e){this.stream=e}function ir(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function sr(e){return or(function(){return e})()}function or(e){function t(e){return e=u(e[0]*Bu,e[1]*Bu),[e[0]*h+a,f-e[1]*h]}function n(e){return e=u.invert((e[0]-a)/h,(f-e[1])/h),e&&[e[0]*ju,e[1]*ju]}function r(){u=Ln(o=lr(g,b,w),s);var e=s(v,m);return a=p-e[0]*h,f=d+e[1]*h,i()}function i(){return l&&(l.valid=!1,l=null),t}var s,o,u,a,f,l,c=tr(function(e,t){return e=s(e,t),[e[0]*h+a,f-e[1]*h]}),h=150,p=480,d=250,v=0,m=0,g=0,b=0,w=0,E=Da,S=y,x=null,T=null;return t.stream=function(e){return l&&(l.valid=!1),l=ur(E(o,c(S(e)))),l.valid=!0,l},t.clipAngle=function(e){return arguments.length?(E=null==e?(x=e,Da):Rn((x=+e)*Bu),i()):x},t.clipExtent=function(e){return arguments.length?(T=e,S=e?zn(e[0][0],e[0][1],e[1][0],e[1][1]):y,i()):T},t.scale=function(e){return arguments.length?(h=+e,r()):h},t.translate=function(e){return arguments.length?(p=+e[0],d=+e[1],r()):[p,d]},t.center=function(e){return arguments.length?(v=e[0]%360*Bu,m=e[1]%360*Bu,r()):[v*ju,m*ju]},t.rotate=function(e){return arguments.length?(g=e[0]%360*Bu,b=e[1]%360*Bu,w=e.length>2?e[2]%360*Bu:0,r()):[g*ju,b*ju,w*ju]},nu.rebind(t,c,"precision"),function(){return s=e.apply(this,arguments),t.invert=s.invert&&n,r()}}function ur(e){return ir(e,function(t,n){e.point(t*Bu,n*Bu)})}function ar(e,t){return[e,t]}function fr(e,t){return[e>_u?e-Du:-_u>e?e+Du:e,t]}function lr(e,t,n){return e?t||n?Ln(hr(e),pr(t,n)):hr(e):t||n?pr(t,n):fr}function cr(e){return function(t,n){return t+=e,[t>_u?t-Du:-_u>t?t+Du:t,n]}}function hr(e){var t=cr(e);return t.invert=cr(-e),t}function pr(e,t){function n(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*r+u*i;return[Math.atan2(a*s-l*o,u*r-f*i),tt(l*s+a*o)]}var r=Math.cos(e),i=Math.sin(e),s=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),u=Math.cos(e)*n,a=Math.sin(e)*n,f=Math.sin(t),l=f*s-a*o;return[Math.atan2(a*s+f*o,u*r+l*i),tt(l*r-u*i)]},n}function dr(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,s,o,u){var a=o*t;null!=i?(i=vr(n,i),s=vr(n,s),(o>0?s>i:i>s)&&(i+=o*Du)):(i=e+o*Du,s=e-.5*a);for(var f,l=i;o>0?l>s:s>l;l-=a)u.point((f=En([n,-r*Math.cos(l),-r*Math.sin(l)]))[0],f[1])}}function vr(e,t){var n=vn(t);n[0]-=e,wn(n);var r=et(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ou)%(2*Math.PI)}function mr(e,t,n){var r=nu.range(e,t-Ou,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function gr(e,t,n){var r=nu.range(e,t-Ou,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function yr(e){return e.source}function br(e){return e.target}function wr(e,t,n,r){var i=Math.cos(t),s=Math.sin(t),o=Math.cos(r),u=Math.sin(r),a=i*Math.cos(e),f=i*Math.sin(e),l=o*Math.cos(n),c=o*Math.sin(n),h=2*Math.asin(Math.sqrt(st(r-t)+i*o*st(n-e))),p=1/Math.sin(h),d=h?function(e){var t=Math.sin(e*=h)*p,n=Math.sin(h-e)*p,r=n*a+t*l,i=n*f+t*c,o=n*s+t*u;return[Math.atan2(i,r)*ju,Math.atan2(o,Math.sqrt(r*r+i*i))*ju]}:function(){return[e*ju,t*ju]};return d.distance=h,d}function Er(){function e(e,i){var s=Math.sin(i*=Bu),o=Math.cos(i),u=du((e*=Bu)-t),a=Math.cos(u);Wa+=Math.atan2(Math.sqrt((u=o*Math.sin(u))*u+(u=r*s-n*o*a)*u),n*s+r*o*a),t=e,n=s,r=o}var t,n,r;Xa.point=function(i,s){t=i*Bu,n=Math.sin(s*=Bu),r=Math.cos(s),Xa.point=e},Xa.lineEnd=function(){Xa.point=Xa.lineEnd=E}}function Sr(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),s=e(r*i);return[s*i*Math.sin(t),s*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),s=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*s,r*o),Math.asin(r&&n*s/r)]},n}function xr(e,t){function n(e,t){o>0?-Hu+Ou>t&&(t=-Hu+Ou):t>Hu-Ou&&(t=Hu-Ou);var n=o/Math.pow(i(t),s);return[n*Math.sin(s*e),o-n*Math.cos(s*e)]}var r=Math.cos(e),i=function(e){return Math.tan(_u/4+e/2)},s=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),o=r*Math.pow(i(e),s)/s;return s?(n.invert=function(e,t){var n=o-t,r=Y(s)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/s,2*Math.atan(Math.pow(o/r,1/s))-Hu]},n):Nr}function Tr(e,t){function n(e,t){var n=s-t;return[n*Math.sin(i*e),s-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),s=r/i+e;return du(i)<Ou?ar:(n.invert=function(e,t){var n=s-t;return[Math.atan2(e,n)/i,s-Y(i)*Math.sqrt(e*e+n*n)]},n)}function Nr(e,t){return[e,Math.log(Math.tan(_u/4+t/2))]}function Cr(e){var t,n=sr(e),r=n.scale,i=n.translate,s=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=s.apply(n,arguments);if(o===n){if(t=null==e){var u=_u*r(),a=i();s([[a[0]-u,a[1]-u],[a[0]+u,a[1]+u]])}}else t&&(o=null);return o},n.clipExtent(null)}function kr(e,t){return[Math.log(Math.tan(_u/4+t/2)),-e]}function Lr(e){return e[0]}function Ar(e){return e[1]}function Or(e){for(var t=e.length,n=[0,1],r=2,i=2;t>i;i++){for(;r>1&&Z(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Mr(e,t){return e[0]-t[0]||e[1]-t[1]}function _r(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Dr(e,t,n,r){var i=e[0],s=n[0],o=t[0]-i,u=r[0]-s,a=e[1],f=n[1],l=t[1]-a,c=r[1]-f,h=(u*(a-f)-c*(i-s))/(c*o-u*l);return[i+h*o,a+h*l]}function Pr(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Hr(){ni(this),this.edge=this.site=this.circle=null}function Br(e){var t=rf.pop()||new Hr;return t.site=e,t}function jr(e){$r(e),ef.remove(e),rf.push(e),ni(e)}function Fr(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},s=e.P,o=e.N,u=[e];jr(e);for(var a=s;a.circle&&du(n-a.circle.x)<Ou&&du(r-a.circle.cy)<Ou;)s=a.P,u.unshift(a),jr(a),a=s;u.unshift(a),$r(a);for(var f=o;f.circle&&du(n-f.circle.x)<Ou&&du(r-f.circle.cy)<Ou;)o=f.N,u.push(f),jr(f),f=o;u.push(f),$r(f);var l,c=u.length;for(l=1;c>l;++l)f=u[l],a=u[l-1],Zr(f.edge,a.site,f.site,i);a=u[0],f=u[c-1],f.edge=Gr(a.site,f.site,null,i),Vr(a),Vr(f)}function Ir(e){for(var t,n,r,i,s=e.x,o=e.y,u=ef._;u;)if(r=qr(u,o)-s,r>Ou)u=u.L;else{if(i=s-Rr(u,o),!(i>Ou)){r>-Ou?(t=u.P,n=u):i>-Ou?(t=u,n=u.N):t=n=u;break}if(!u.R){t=u;break}u=u.R}var a=Br(e);if(ef.insert(t,a),t||n){if(t===n)return $r(t),n=Br(t.site),ef.insert(a,n),a.edge=n.edge=Gr(t.site,a.site),Vr(t),void Vr(n);if(!n)return void (a.edge=Gr(t.site,a.site));$r(t),$r(n);var f=t.site,l=f.x,c=f.y,h=e.x-l,p=e.y-c,d=n.site,v=d.x-l,m=d.y-c,g=2*(h*m-p*v),y=h*h+p*p,b=v*v+m*m,w={x:(m*y-p*b)/g+l,y:(h*b-v*y)/g+c};Zr(n.edge,f,d,w),a.edge=Gr(f,e,null,w),n.edge=Gr(e,d,null,w),Vr(t),Vr(n)}}function qr(e,t){var n=e.site,r=n.x,i=n.y,s=i-t;if(!s)return r;var o=e.P;if(!o)return-1/0;n=o.site;var u=n.x,a=n.y,f=a-t;if(!f)return u;var l=u-r,c=1/s-1/f,h=l/f;return c?(-h+Math.sqrt(h*h-2*c*(l*l/(-2*f)-a+f/2+i-s/2)))/c+r:(r+u)/2}function Rr(e,t){var n=e.N;if(n)return qr(n,t);var r=e.site;return r.y===t?r.x:1/0}function Ur(e){this.site=e,this.edges=[]}function zr(e){for(var t,n,r,i,s,o,u,a,f,l,c=e[0][0],h=e[1][0],p=e[0][1],d=e[1][1],v=Za,m=v.length;m--;)if(s=v[m],s&&s.prepare())for(u=s.edges,a=u.length,o=0;a>o;)l=u[o].end(),r=l.x,i=l.y,f=u[++o%a].start(),t=f.x,n=f.y,(du(r-t)>Ou||du(i-n)>Ou)&&(u.splice(o,0,new ei(Yr(s.site,l,du(r-c)<Ou&&d-i>Ou?{x:c,y:du(t-c)<Ou?n:d}:du(i-d)<Ou&&h-r>Ou?{x:du(n-d)<Ou?t:h,y:d}:du(r-h)<Ou&&i-p>Ou?{x:h,y:du(t-h)<Ou?n:p}:du(i-p)<Ou&&r-c>Ou?{x:du(n-p)<Ou?t:c,y:p}:null),s.site,null)),++a)}function Wr(e,t){return t.angle-e.angle}function Xr(){ni(this),this.x=this.y=this.arc=this.site=this.cy=null}function Vr(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,s=n.site;if(r!==s){var o=i.x,u=i.y,a=r.x-o,f=r.y-u,l=s.x-o,c=s.y-u,h=2*(a*c-f*l);if(!(h>=-Mu)){var p=a*a+f*f,d=l*l+c*c,v=(c*p-f*d)/h,m=(a*d-l*p)/h,c=m+u,g=sf.pop()||new Xr;g.arc=e,g.site=i,g.x=v+o,g.y=c+Math.sqrt(v*v+m*m),g.cy=c,e.circle=g;for(var y=null,b=nf._;b;)if(g.y<b.y||g.y===b.y&&g.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}nf.insert(y,g),y||(tf=g)}}}}function $r(e){var t=e.circle;t&&(t.P||(tf=t.N),nf.remove(t),sf.push(t),ni(t),e.circle=null)}function Jr(e){for(var t,n=Ya,r=Un(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!Kr(t,e)||!r(t)||du(t.a.x-t.b.x)<Ou&&du(t.a.y-t.b.y)<Ou)&&(t.a=t.b=null,n.splice(i,1))}function Kr(e,t){var n=e.b;if(n)return!0;var r,i,s=e.a,o=t[0][0],u=t[1][0],a=t[0][1],f=t[1][1],l=e.l,c=e.r,h=l.x,p=l.y,d=c.x,v=c.y,m=(h+d)/2,g=(p+v)/2;if(v===p){if(o>m||m>=u)return;if(h>d){if(s){if(s.y>=f)return}else s={x:m,y:a};n={x:m,y:f}}else{if(s){if(s.y<a)return}else s={x:m,y:f};n={x:m,y:a}}}else if(r=(h-d)/(v-p),i=g-r*m,-1>r||r>1)if(h>d){if(s){if(s.y>=f)return}else s={x:(a-i)/r,y:a};n={x:(f-i)/r,y:f}}else{if(s){if(s.y<a)return}else s={x:(f-i)/r,y:f};n={x:(a-i)/r,y:a}}else if(v>p){if(s){if(s.x>=u)return}else s={x:o,y:r*o+i};n={x:u,y:r*u+i}}else{if(s){if(s.x<o)return}else s={x:u,y:r*u+i};n={x:o,y:r*o+i}}return e.a=s,e.b=n,!0}function Qr(e,t){this.l=e,this.r=t,this.a=this.b=null}function Gr(e,t,n,r){var i=new Qr(e,t);return Ya.push(i),n&&Zr(i,e,t,n),r&&Zr(i,t,e,r),Za[e.i].edges.push(new ei(i,e,t)),Za[t.i].edges.push(new ei(i,t,e)),i}function Yr(e,t,n){var r=new Qr(e,null);return r.a=t,r.b=n,Ya.push(r),r}function Zr(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function ei(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function ti(){this._=null}function ni(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ri(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ii(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function si(e){for(;e.L;)e=e.L;return e}function oi(e,t){var n,r,i,s=e.sort(ui).pop();for(Ya=[],Za=new Array(e.length),ef=new ti,nf=new ti;;)if(i=tf,s&&(!i||s.y<i.y||s.y===i.y&&s.x<i.x))(s.x!==n||s.y!==r)&&(Za[s.i]=new Ur(s),Ir(s),n=s.x,r=s.y),s=e.pop();else{if(!i)break;Fr(i.arc)}t&&(Jr(t),zr(t));var o={cells:Za,edges:Ya};return ef=nf=Ya=Za=null,o}function ui(e,t){return t.y-e.y||t.x-e.x}function ai(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function fi(e){return e.x}function li(e){return e.y}function ci(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hi(e,t,n,r,i,s){if(!e(t,n,r,i,s)){var o=.5*(n+i),u=.5*(r+s),a=t.nodes;a[0]&&hi(e,a[0],n,r,o,u),a[1]&&hi(e,a[1],o,r,i,u),a[2]&&hi(e,a[2],n,u,o,s),a[3]&&hi(e,a[3],o,u,i,s)}}function pi(e,t,n,r,i,s,o){var u,a=1/0;return function f(e,l,c,h,p){if(!(l>s||c>o||r>h||i>p)){if(d=e.point){var d,v=t-e.x,m=n-e.y,g=v*v+m*m;if(a>g){var y=Math.sqrt(a=g);r=t-y,i=n-y,s=t+y,o=n+y,u=d}}for(var b=e.nodes,w=.5*(l+h),E=.5*(c+p),S=t>=w,x=n>=E,T=x<<1|S,N=T+4;N>T;++T)if(e=b[3&T])switch(3&T){case 0:f(e,l,c,w,E);break;case 1:f(e,w,c,h,E);break;case 2:f(e,l,E,w,p);break;case 3:f(e,w,E,h,p)}}}(e,r,i,s,o),u}function di(e,t){e=nu.rgb(e),t=nu.rgb(t);var n=e.r,r=e.g,i=e.b,s=t.r-n,o=t.g-r,u=t.b-i;return function(e){return"#"+wt(Math.round(n+s*e))+wt(Math.round(r+o*e))+wt(Math.round(i+u*e))}}function vi(e,t){var n,r={},i={};for(n in e)n in t?r[n]=yi(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function mi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function gi(e,t){var n,r,i,s=uf.lastIndex=af.lastIndex=0,o=-1,u=[],a=[];for(e+="",t+="";(n=uf.exec(e))&&(r=af.exec(t));)(i=r.index)>s&&(i=t.slice(s,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,a.push({i:o,x:mi(n,r)})),s=af.lastIndex;return s<t.length&&(i=t.slice(s),u[o]?u[o]+=i:u[++o]=i),u.length<2?a[0]?(t=a[0].x,function(e){return t(e)+""}):function(){return t}:(t=a.length,function(e){for(var n,r=0;t>r;++r)u[(n=a[r]).i]=n.x(e);return u.join("")})}function yi(e,t){for(var n,r=nu.interpolators.length;--r>=0&&!(n=nu.interpolators[r](e,t)););return n}function bi(e,t){var n,r=[],i=[],s=e.length,o=t.length,u=Math.min(e.length,t.length);for(n=0;u>n;++n)r.push(yi(e[n],t[n]));for(;s>n;++n)i[n]=e[n];for(;o>n;++n)i[n]=t[n];return function(e){for(n=0;u>n;++n)i[n]=r[n](e);return i}}function wi(e){return function(t){return 0>=t?0:t>=1?1:e(t)}}function Ei(e){return function(t){return 1-e(1-t)}}function Si(e){return function(t){return.5*(.5>t?e(2*t):2-e(2-2*t))}}function xi(e){return e*e}function Ti(e){return e*e*e}function Ni(e){if(0>=e)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(.5>e?n:3*(e-t)+n-.75)}function Ci(e){return function(t){return Math.pow(t,e)}}function ki(e){return 1-Math.cos(e*Hu)}function Li(e){return Math.pow(2,10*(e-1))}function Ai(e){return 1-Math.sqrt(1-e*e)}function Oi(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Du*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Du/t)}}function Mi(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function _i(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Di(e,t){e=nu.hcl(e),t=nu.hcl(t);var n=e.h,r=e.c,i=e.l,s=t.h-n,o=t.c-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return lt(n+s*e,r+o*e,i+u*e)+""}}function Pi(e,t){e=nu.hsl(e),t=nu.hsl(t);var n=e.h,r=e.s,i=e.l,s=t.h-n,o=t.s-r,u=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(s)?(s=0,n=isNaN(n)?t.h:n):s>180?s-=360:-180>s&&(s+=360),function(e){return at(n+s*e,r+o*e,i+u*e)+""}}function Hi(e,t){e=nu.lab(e),t=nu.lab(t);var n=e.l,r=e.a,i=e.b,s=t.l-n,o=t.a-r,u=t.b-i;return function(e){return ht(n+s*e,r+o*e,i+u*e)+""}}function Bi(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function ji(e){var t=[e.a,e.b],n=[e.c,e.d],r=Ii(t),i=Fi(t,n),s=Ii(qi(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*ju,this.translate=[e.e,e.f],this.scale=[r,s],this.skew=s?Math.atan2(i,s)*ju:0}function Fi(e,t){return e[0]*t[0]+e[1]*t[1]}function Ii(e){var t=Math.sqrt(Fi(e,e));return t&&(e[0]/=t,e[1]/=t),t}function qi(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Ri(e,t){var n,r=[],i=[],s=nu.transform(e),o=nu.transform(t),u=s.translate,a=o.translate,f=s.rotate,l=o.rotate,c=s.skew,h=o.skew,p=s.scale,d=o.scale;return u[0]!=a[0]||u[1]!=a[1]?(r.push("translate(",null,",",null,")"),i.push({i:1,x:mi(u[0],a[0])},{i:3,x:mi(u[1],a[1])})):r.push(a[0]||a[1]?"translate("+a+")":""),f!=l?(f-l>180?l+=360:l-f>180&&(f+=360),i.push({i:r.push(r.pop()+"rotate(",null,")")-2,x:mi(f,l)})):l&&r.push(r.pop()+"rotate("+l+")"),c!=h?i.push({i:r.push(r.pop()+"skewX(",null,")")-2,x:mi(c,h)}):h&&r.push(r.pop()+"skewX("+h+")"),p[0]!=d[0]||p[1]!=d[1]?(n=r.push(r.pop()+"scale(",null,",",null,")"),i.push({i:n-4,x:mi(p[0],d[0])},{i:n-2,x:mi(p[1],d[1])})):(1!=d[0]||1!=d[1])&&r.push(r.pop()+"scale("+d+")"),n=i.length,function(e){for(var t,s=-1;++s<n;)r[(t=i[s]).i]=t.x(e);return r.join("")}}function Ui(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function zi(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Wi(e){for(var t=e.source,n=e.target,r=Vi(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var s=i.length;n!==r;)i.splice(s,0,n),n=n.parent;return i}function Xi(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Vi(e,t){if(e===t)return e;for(var n=Xi(e),r=Xi(t),i=n.pop(),s=r.pop(),o=null;i===s;)o=i,i=n.pop(),s=r.pop();return o}function $i(e){e.fixed|=2}function Ji(e){e.fixed&=-7}function Ki(e){e.fixed|=4,e.px=e.x,e.py=e.y}function Qi(e){e.fixed&=-5}function Gi(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var s,o=e.nodes,u=o.length,a=-1;++a<u;)s=o[a],null!=s&&(Gi(s,t,n),e.charge+=s.charge,r+=s.charge*s.cx,i+=s.charge*s.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var f=t*n[e.point.index];e.charge+=e.pointCharge=f,r+=f*e.point.x,i+=f*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function Yi(e,t){return nu.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=is,e}function Zi(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function es(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(s=e.children)&&(i=s.length))for(var i,s,o=-1;++o<i;)n.push(s[o]);for(;null!=(e=r.pop());)t(e)}function ts(e){return e.children}function ns(e){return e.value}function rs(e,t){return t.value-e.value}function is(e){return nu.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function ss(e){return e.x}function os(e){return e.y}function us(e,t,n){e.y0=t,e.y=n}function as(e){return nu.range(e.length)}function fs(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function ls(e){for(var t,n=1,r=0,i=e[0][1],s=e.length;s>n;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function cs(e){return e.reduce(hs,0)}function hs(e,t){return e+t[1]}function ps(e,t){return ds(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function ds(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,s=[];++n<=t;)s[n]=i*n+r;return s}function vs(e){return[nu.min(e),nu.max(e)]}function ms(e,t){return e.value-t.value}function gs(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function ys(e,t){e._pack_next=t,t._pack_prev=e}function bs(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function ws(e){function t(e){l=Math.min(e.x-e.r,l),c=Math.max(e.x+e.r,c),h=Math.min(e.y-e.r,h),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(f=n.length)){var n,r,i,s,o,u,a,f,l=1/0,c=-1/0,h=1/0,p=-1/0;if(n.forEach(Es),r=n[0],r.x=-r.r,r.y=0,t(r),f>1&&(i=n[1],i.x=i.r,i.y=0,t(i),f>2))for(s=n[2],Ts(r,i,s),t(s),gs(r,s),r._pack_prev=s,gs(s,i),i=r._pack_next,o=3;f>o;o++){Ts(r,i,s=n[o]);var d=0,v=1,m=1;for(u=i._pack_next;u!==i;u=u._pack_next,v++)if(bs(u,s)){d=1;break}if(1==d)for(a=r._pack_prev;a!==u._pack_prev&&!bs(a,s);a=a._pack_prev,m++);d?(m>v||v==m&&i.r<r.r?ys(r,i=u):ys(r=a,i),o--):(gs(r,s),i=s,t(s))}var g=(l+c)/2,y=(h+p)/2,b=0;for(o=0;f>o;o++)s=n[o],s.x-=g,s.y-=y,b=Math.max(b,s.r+Math.sqrt(s.x*s.x+s.y*s.y));e.r=b,n.forEach(Ss)}}function Es(e){e._pack_next=e._pack_prev=e}function Ss(e){delete e._pack_next,delete e._pack_prev}function xs(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var s=-1,o=i.length;++s<o;)xs(i[s],t,n,r)}function Ts(e,t,n){var r=e.r+n.r,i=t.x-e.x,s=t.y-e.y;if(r&&(i||s)){var o=t.r+n.r,u=i*i+s*s;o*=o,r*=r;var a=.5+(r-o)/(2*u),f=Math.sqrt(Math.max(0,2*o*(r+u)-(r-=u)*r-o*o))/(2*u);n.x=e.x+a*i+f*s,n.y=e.y+a*s-f*i}else n.x=e.x+r,n.y=e.y}function Ns(e,t){return e.parent==t.parent?1:2}function Cs(e){var t=e.children;return t.length?t[0]:e.t}function ks(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Ls(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function As(e){for(var t,n=0,r=0,i=e.children,s=i.length;--s>=0;)t=i[s],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Os(e,t,n){return e.a.parent===t.parent?e.a:n}function Ms(e){return 1+nu.max(e,function(e){return e.y})}function _s(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Ds(e){var t=e.children;return t&&t.length?Ds(t[0]):e}function Ps(e){var t,n=e.children;return n&&(t=n.length)?Ps(n[t-1]):e}function Hs(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Bs(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],s=e.dy-t[0]-t[2];return 0>i&&(n+=i/2,i=0),0>s&&(r+=s/2,s=0),{x:n,y:r,dx:i,dy:s}}function js(e){var t=e[0],n=e[e.length-1];return n>t?[t,n]:[n,t]}function Fs(e){return e.rangeExtent?e.rangeExtent():js(e.range())}function Is(e,t,n,r){var i=n(e[0],e[1]),s=r(t[0],t[1]);return function(e){return s(i(e))}}function qs(e,t){var n,r=0,i=e.length-1,s=e[r],o=e[i];return s>o&&(n=r,r=i,i=n,n=s,s=o,o=n),e[r]=t.floor(s),e[i]=t.ceil(o),e}function Rs(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:bf}function Us(e,t,n,r){var i=[],s=[],o=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=u;)i.push(n(e[o-1],e[o])),s.push(r(t[o-1],t[o]));return function(t){var n=nu.bisect(e,t,1,u)-1;return s[n](i[n](t))}}function zs(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?Us:Is,a=r?zi:Ui;return o=i(e,t,a,n),u=i(t,e,a,yi),s}function s(e){return o(e)}var o,u;return s.invert=function(e){return u(e)},s.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},s.range=function(e){return arguments.length?(t=e,i()):t},s.rangeRound=function(e){return s.range(e).interpolate(Bi)},s.clamp=function(e){return arguments.length?(r=e,i()):r},s.interpolate=function(e){return arguments.length?(n=e,i()):n},s.ticks=function(t){return $s(e,t)},s.tickFormat=function(t,n){return Js(e,t,n)},s.nice=function(t){return Xs(e,t),i()},s.copy=function(){return zs(e,t,n,r)},i()}function Ws(e,t){return nu.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Xs(e,t){return qs(e,Rs(Vs(e,t)[2]))}function Vs(e,t){null==t&&(t=10);var n=js(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),s=t/r*i;return.15>=s?i*=10:.35>=s?i*=5:.75>=s&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function $s(e,t){return nu.range.apply(nu,Vs(e,t))}function Js(e,t,n){var r=Vs(e,t);if(n){var i=oa.exec(n);if(i.shift(),"s"===i[8]){var s=nu.formatPrefix(Math.max(du(r[0]),du(r[1])));return i[7]||(i[7]="."+Ks(s.scale(r[2]))),i[8]="f",n=nu.format(i.join("")),function(e){return n(s.scale(e))+s.symbol}}i[7]||(i[7]="."+Qs(i[8],r)),n=i.join("")}else n=",."+Ks(r[2])+"f";return nu.format(n)}function Ks(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function Qs(e,t){var n=Ks(t[2]);return e in wf?Math.abs(n-Ks(Math.max(du(t[0]),du(t[1]))))+ +("e"!==e):n-2*("%"===e)}function Gs(e,t,n,r){function i(e){return(n?Math.log(0>e?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function s(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return s(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=qs(r.map(i),n?Math:Sf);return e.domain(t),r=t.map(s),o},o.ticks=function(){var e=js(r),o=[],u=e[0],a=e[1],f=Math.floor(i(u)),l=Math.ceil(i(a)),c=t%1?2:t;if(isFinite(l-f)){if(n){for(;l>f;f++)for(var h=1;c>h;h++)o.push(s(f)*h);o.push(s(f))}else for(o.push(s(f));f++<l;)for(var h=c-1;h>0;h--)o.push(s(f)*h);for(f=0;o[f]<u;f++);for(l=o.length;o[l-1]>a;l--);o=o.slice(f,l)}return o},o.tickFormat=function(e,t){if(!arguments.length)return Ef;arguments.length<2?t=Ef:"function"!=typeof t&&(t=nu.format(t));var r,u=Math.max(.1,e/o.ticks().length),a=n?(r=1e-12,Math.ceil):(r=-1e-12,Math.floor);return function(e){return e/s(a(i(e)+r))<=u?t(e):""}},o.copy=function(){return Gs(e.copy(),t,n,r)},Ws(o,e)}function Ys(e,t,n){function r(t){return e(i(t))}var i=Zs(t),s=Zs(1/t);return r.invert=function(t){return s(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return $s(n,e)},r.tickFormat=function(e,t){return Js(n,e,t)},r.nice=function(e){return r.domain(Xs(n,e))},r.exponent=function(o){return arguments.length?(i=Zs(t=o),s=Zs(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return Ys(e.copy(),t,n)},Ws(r,e)}function Zs(e){return function(t){return 0>t?-Math.pow(-t,e):Math.pow(t,e)}}function eo(e,t){function n(n){return s[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):0/0))-1)%s.length]}function r(t,n){return nu.range(e.length).map(function(e){return t+n*e})}var i,s,o;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new f;for(var s,o=-1,u=r.length;++o<u;)i.has(s=r[o])||i.set(s,e.push(s));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(s=e,o=0,t={t:"range",a:arguments},n):s},n.rangePoints=function(i,u){arguments.length<2&&(u=0);var a=i[0],f=i[1],l=e.length<2?(a=(a+f)/2,0):(f-a)/(e.length-1+u);return s=r(a+l*u/2,l),o=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,u){arguments.length<2&&(u=0);var a=i[0],f=i[1],l=e.length<2?(a=f=Math.round((a+f)/2),0):(f-a)/(e.length-1+u)|0;return s=r(a+Math.round(l*u/2+(f-a-(e.length-1+u)*l)/2),l),o=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,u,a){arguments.length<2&&(u=0),arguments.length<3&&(a=u);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=(c-l)/(e.length-u+2*a);return s=r(l+h*a,h),f&&s.reverse(),o=h*(1-u),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,u,a){arguments.length<2&&(u=0),arguments.length<3&&(a=u);var f=i[1]<i[0],l=i[f-0],c=i[1-f],h=Math.floor((c-l)/(e.length-u+2*a));return s=r(l+Math.round((c-l-(e.length-u)*h)/2),h),f&&s.reverse(),o=Math.round(h*(1-u)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return js(t.a[0])},n.copy=function(){return eo(e,t)},n.domain(e)}function to(e,t){function s(){var n=0,r=t.length;for(u=[];++n<r;)u[n-1]=nu.quantile(e,n/r);return o}function o(e){return isNaN(e=+e)?void 0:t[nu.bisect(u,e)]}var u;return o.domain=function(t){return arguments.length?(e=t.map(r).filter(i).sort(n),s()):e},o.range=function(e){return arguments.length?(t=e,s()):t},o.quantiles=function(){return u},o.invertExtent=function(n){return n=t.indexOf(n),0>n?[0/0,0/0]:[n>0?u[n-1]:e[0],n<u.length?u[n]:e[e.length-1]]},o.copy=function(){return to(e,t)},s()}function no(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(s*(t-e))))]}function i(){return s=n.length/(t-e),o=n.length-1,r}var s,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=0>t?0/0:t/s+e,[t,t+1/s]},r.copy=function(){return no(e,t,n)},i()}function ro(e,t){function n(n){return n>=n?t[nu.bisect(e,n)]:void 0}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return ro(e,t)},n}function io(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return $s(e,t)},t.tickFormat=function(t,n){return Js(e,t,n)},t.copy=function(){return io(e)},t}function so(){return 0}function oo(e){return e.innerRadius}function uo(e){return e.outerRadius}function ao(e){return e.startAngle}function fo(e){return e.endAngle}function lo(e){return e&&e.padAngle}function co(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function ho(e,t,n,r,i){var s=e[0]-t[0],o=e[1]-t[1],u=(i?r:-r)/Math.sqrt(s*s+o*o),a=u*o,f=-u*s,l=e[0]+a,c=e[1]+f,h=t[0]+a,p=t[1]+f,d=(l+h)/2,v=(c+p)/2,m=h-l,g=p-c,y=m*m+g*g,b=n-r,w=l*p-h*c,E=(0>g?-1:1)*Math.sqrt(b*b*y-w*w),S=(w*g-m*E)/y,x=(-w*m-g*E)/y,T=(w*g+m*E)/y,N=(-w*m+g*E)/y,C=S-d,k=x-v,L=T-d,A=N-v;return C*C+k*k>L*L+A*A&&(S=T,x=N),[[S-a,x-f],[S*n/b,x*n/b]]}function po(e){function t(t){function o(){f.push("M",s(e(l),u))}for(var a,f=[],l=[],c=-1,h=t.length,p=Ct(n),d=Ct(r);++c<h;)i.call(this,a=t[c],c)?l.push([+p.call(this,a,c),+d.call(this,a,c)]):l.length&&(o(),l=[]);return l.length&&o(),f.length?f.join(""):null}var n=Lr,r=Ar,i=An,s=vo,o=s.key,u=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"==typeof e?s=e:(s=Lf.get(e)||vo).key,t):o},t.tension=function(e){return arguments.length?(u=e,t):u},t}function vo(e){return e.join("L")}function mo(e){return vo(e)+"Z"}function go(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function yo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function bo(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function wo(e,t){return e.length<4?vo(e):e[1]+xo(e.slice(1,-1),To(e,t))}function Eo(e,t){return e.length<3?vo(e):e[0]+xo((e.push(e[0]),e),To([e[e.length-2]].concat(e,[e[1]]),t))}function So(e,t){return e.length<3?vo(e):e[0]+xo(e,To(e,t))}function xo(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return vo(e);var n=e.length!=t.length,r="",i=e[0],s=e[1],o=t[0],u=o,a=1;if(n&&(r+="Q"+(s[0]-2*o[0]/3)+","+(s[1]-2*o[1]/3)+","+s[0]+","+s[1],i=e[1],a=2),t.length>1){u=t[1],s=e[a],a++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1];for(var f=2;f<t.length;f++,a++)s=e[a],u=t[f],r+="S"+(s[0]-u[0])+","+(s[1]-u[1])+","+s[0]+","+s[1]}if(n){var l=e[a];r+="Q"+(s[0]+2*u[0]/3)+","+(s[1]+2*u[1]/3)+","+l[0]+","+l[1]}return r}function To(e,t){for(var n,r=[],i=(1-t)/2,s=e[0],o=e[1],u=1,a=e.length;++u<a;)n=s,s=o,o=e[u],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function No(e){if(e.length<3)return vo(e);var t=1,n=e.length,r=e[0],i=r[0],s=r[1],o=[i,i,i,(r=e[1])[0]],u=[s,s,s,r[1]],a=[i,",",s,"L",Ao(Mf,o),",",Ao(Mf,u)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),u.shift(),u.push(r[1]),Oo(a,o,u);return e.pop(),a.push("L",r),a.join("")}function Co(e){if(e.length<4)return vo(e);for(var t,n=[],r=-1,i=e.length,s=[0],o=[0];++r<3;)t=e[r],s.push(t[0]),o.push(t[1]);for(n.push(Ao(Mf,s)+","+Ao(Mf,o)),--r;++r<i;)t=e[r],s.shift(),s.push(t[0]),o.shift(),o.push(t[1]),Oo(n,s,o);return n.join("")}function ko(e){for(var t,n,r=-1,i=e.length,s=i+4,o=[],u=[];++r<4;)n=e[r%i],o.push(n[0]),u.push(n[1]);for(t=[Ao(Mf,o),",",Ao(Mf,u)],--r;++r<s;)n=e[r%i],o.shift(),o.push(n[0]),u.shift(),u.push(n[1]),Oo(t,o,u);return t.join("")}function Lo(e,t){var n=e.length-1;if(n)for(var r,i,s=e[0][0],o=e[0][1],u=e[n][0]-s,a=e[n][1]-o,f=-1;++f<=n;)r=e[f],i=f/n,r[0]=t*r[0]+(1-t)*(s+i*u),r[1]=t*r[1]+(1-t)*(o+i*a);return No(e)}function Ao(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Oo(e,t,n){e.push("C",Ao(Af,t),",",Ao(Af,n),",",Ao(Of,t),",",Ao(Of,n),",",Ao(Mf,t),",",Ao(Mf,n))}function Mo(e,t){return(t[1]-e[1])/(t[0]-e[0])}function _o(e){for(var t=0,n=e.length-1,r=[],i=e[0],s=e[1],o=r[0]=Mo(i,s);++t<n;)r[t]=(o+(o=Mo(i=s,s=e[t+1])))/2;return r[t]=o,r}function Do(e){for(var t,n,r,i,s=[],o=_o(e),u=-1,a=e.length-1;++u<a;)t=Mo(e[u],e[u+1]),du(t)<Ou?o[u]=o[u+1]=0:(n=o[u]/t,r=o[u+1]/t,i=n*n+r*r,i>9&&(i=3*t/Math.sqrt(i),o[u]=i*n,o[u+1]=i*r));for(u=-1;++u<=a;)i=(e[Math.min(a,u+1)][0]-e[Math.max(0,u-1)][0])/(6*(1+o[u]*o[u])),s.push([i||0,o[u]*i||0]);return s}function Po(e){return e.length<3?vo(e):e[0]+xo(e,Do(e))}function Ho(e){for(var t,n,r,i=-1,s=e.length;++i<s;)t=e[i],n=t[0],r=t[1]-Hu,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Bo(e){function t(t){function a(){v.push("M",u(e(g),c),l,f(e(m.reverse()),c),"Z")}for(var h,p,d,v=[],m=[],g=[],y=-1,b=t.length,w=Ct(n),E=Ct(i),S=n===r?function(){return p}:Ct(r),x=i===s?function(){return d}:Ct(s);++y<b;)o.call(this,h=t[y],y)?(m.push([p=+w.call(this,h,y),d=+E.call(this,h,y)]),g.push([+S.call(this,h,y),+x.call(this,h,y)])):m.length&&(a(),m=[],g=[]);return m.length&&a(),v.length?v.join(""):null}var n=Lr,r=Lr,i=0,s=Ar,o=An,u=vo,a=u.key,f=u,l="L",c=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=s=e,t):s},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(s=e,t):s},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?u=e:(u=Lf.get(e)||vo).key,f=u.reverse||u,l=u.closed?"M":"L",t):a},t.tension=function(e){return arguments.length?(c=e,t):c},t}function jo(e){return e.radius}function Fo(e){return[e.x,e.y]}function Io(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Hu;return[n*Math.cos(r),n*Math.sin(r)]}}function qo(){return 64}function Ro(){return"circle"}function Uo(e){var t=Math.sqrt(e/_u);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+ -t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function zo(e){return function(){var t,n;(t=this[e])&&(n=t[t.active])&&(--t.count?delete t[t.active]:delete this[e],t.active+=.5,n.event&&n.event.interrupt.call(this,this.__data__,n.index))}}function Wo(e,t,n){return bu(e,Ff),e.namespace=t,e.id=n,e}function Xo(e,t,n,r){var i=e.id,s=e.namespace;return z(e,"function"==typeof n?function(e,o,u){e[s][i].tween.set(t,r(n.call(e,e.__data__,o,u)))}:(n=r(n),function(e){e[s][i].tween.set(t,n)}))}function Vo(e){return null==e&&(e=""),function(){this.textContent=e}}function $o(e){return null==e?"__transition__":"__transition_"+e+"__"}function Jo(e,t,n,r,i){var s=e[n]||(e[n]={active:0,count:0}),o=s[r];if(!o){var u=i.time;o=s[r]={tween:new f,time:u,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++s.count,nu.timer(function(i){function a(n){if(s.active>r)return l();var i=s[s.active];i&&(--s.count,delete s[s.active],i.event&&i.event.interrupt.call(e,e.__data__,i.index)),s.active=r,o.event&&o.event.start.call(e,e.__data__,t),o.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&v.push(r)}),h=o.ease,c=o.duration,nu.timer(function(){return d.c=f(n||1)?An:f,1},0,u)}function f(n){if(s.active!==r)return 1;for(var i=n/c,u=h(i),a=v.length;a>0;)v[--a].call(e,u);return i>=1?(o.event&&o.event.end.call(e,e.__data__,t),l()):void 0}function l(){return--s.count?delete s[r]:delete e[n],1}var c,h,p=o.delay,d=ra,v=[];return d.t=p+u,i>=p?a(i-p):void (d.c=a)},0,u)}}function Ko(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function Qo(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function Go(e){return e.toISOString()}function Yo(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,s=nu.bisect($f,i);return s==$f.length?[t.year,Vs(e.map(function(e){return e/31536e6}),n)[2]]:s?t[i/$f[s-1]<$f[s]/i?s-1:s]:[Qf,Vs(e,n)[2]]}return r.invert=function(t){return Zo(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(Zo)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,Zo(+n+1),t).length}var s=r.domain(),o=js(s),u=null==e?i(o,10):"number"==typeof e&&i(o,e);return u&&(e=u[0],t=u[1]),r.domain(qs(s,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=Zo(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=Zo(+t+1);return t}}:e))},r.ticks=function(e,t){var n=js(r.domain()),s=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return s&&(e=s[0],t=s[1]),e.range(n[0],Zo(+n[1]+1),1>t?1:t)},r.tickFormat=function(){return n},r.copy=function(){return Yo(e.copy(),t,n)},Ws(r,e)}function Zo(e){return new Date(e)}function eu(e){return JSON.parse(e.responseText)}function tu(e){var t=su.createRange();return t.selectNode(su.body),t.createContextualFragment(e.responseText)}var nu={version:"3.5.5"},ru=[].slice,iu=function(e){return ru.call(e)},su=this.document;if(su)try{iu(su.documentElement.childNodes)[0].nodeType}catch(ou){iu=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+(new Date)}),su)try{su.createElement("DIV").style.setProperty("opacity",0,"")}catch(uu){var au=this.Element.prototype,fu=au.setAttribute,lu=au.setAttributeNS,cu=this.CSSStyleDeclaration.prototype,hu=cu.setProperty;au.setAttribute=function(e,t){fu.call(this,e,t+"")},au.setAttributeNS=function(e,t,n){lu.call(this,e,t,n+"")},cu.setProperty=function(e,t,n){hu.call(this,e,t+"",n)}}nu.ascending=n,nu.descending=function(e,t){return e>t?-1:t>e?1:t>=e?0:0/0},nu.min=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<s;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<s;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<s;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},nu.max=function(e,t){var n,r,i=-1,s=e.length;if(1===arguments.length){for(;++i<s;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<s;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<s;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<s;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},nu.extent=function(e,t){var n,r,i,s=-1,o=e.length;if(1===arguments.length){for(;++s<o;)if(null!=(r=e[s])&&r>=r){n=i=r;break}for(;++s<o;)null!=(r=e[s])&&(n>r&&(n=r),r>i&&(i=r))}else{for(;++s<o;)if(null!=(r=t.call(e,e[s],s))&&r>=r){n=i=r;break}for(;++s<o;)null!=(r=t.call(e,e[s],s))&&(n>r&&(n=r),r>i&&(i=r))}return[n,i]},nu.sum=function(e,t){var n,r=0,s=e.length,o=-1;if(1===arguments.length)for(;++o<s;)i(n=+e[o])&&(r+=n);else for(;++o<s;)i(n=+t.call(e,e[o],o))&&(r+=n);return r},nu.mean=function(e,t){var n,s=0,o=e.length,u=-1,a=o;if(1===arguments.length)for(;++u<o;)i(n=r(e[u]))?s+=n:--a;else for(;++u<o;)i(n=r(t.call(e,e[u],u)))?s+=n:--a;return a?s/a:void 0},nu.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],s=n-r;return s?i+s*(e[r]-i):i},nu.median=function(e,t){var s,o=[],u=e.length,a=-1;if(1===arguments.length)for(;++a<u;)i(s=r(e[a]))&&o.push(s);else for(;++a<u;)i(s=r(t.call(e,e[a],a)))&&o.push(s);return o.length?nu.quantile(o.sort(n),.5):void 0},nu.variance=function(e,t){var n,s,o=e.length,u=0,a=0,f=-1,l=0;if(1===arguments.length)for(;++f<o;)i(n=r(e[f]))&&(s=n-u,u+=s/++l,a+=s*(n-u));else for(;++f<o;)i(n=r(t.call(e,e[f],f)))&&(s=n-u,u+=s/++l,a+=s*(n-u));return l>1?a/(l-1):void 0},nu.deviation=function(){var e=nu.variance.apply(this,arguments);return e?Math.sqrt(e):e};var pu=s(n);nu.bisectLeft=pu.left,nu.bisect=nu.bisectRight=pu.right,nu.bisector=function(e){return s(1===e.length?function(t,r){return n(e(t),r)}:e)},nu.shuffle=function(e,t,n){(s=arguments.length)<3&&(n=e.length,2>s&&(t=0));for(var r,i,s=n-t;s;)i=Math.random()*s--|0,r=e[s+t],e[s+t]=e[i+t],e[i+t]=r;return e},nu.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},nu.pairs=function(e){for(var t,n=0,r=e.length-1,i=e[0],s=new Array(0>r?0:r);r>n;)s[n]=[t=i,i=e[++n]];return s},nu.zip=function(){if(!(r=arguments.length))return[];for(var e=-1,t=nu.min(arguments,o),n=new Array(t);++e<t;)for(var r,i=-1,s=n[e]=new Array(r);++i<r;)s[i]=arguments[i][e];return n},nu.transpose=function(e){return nu.zip.apply(nu,e)},nu.keys=function(e){var t=[];for(var n in e)t.push(n);return t},nu.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},nu.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},nu.merge=function(e){for(var t,n,r,i=e.length,s=-1,o=0;++s<i;)o+=e[s].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n};var du=Math.abs;nu.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,i=[],s=u(du(n)),o=-1;if(e*=s,t*=s,n*=s,0>n)for(;(r=e+n*++o)>t;)i.push(r/s);else for(;(r=e+n*++o)<t;)i.push(r/s);return i},nu.map=function(e,t){var n=new f;if(e instanceof f)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,s=e.length;if(1===arguments.length)for(;++i<s;)n.set(i,e[i]);else for(;++i<s;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n};var vu="__proto__",mu="\0";a(f,{has:h,get:function(e){return this._[l(e)]},set:function(e,t){return this._[l(e)]=t},remove:p,keys:d,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:c(t),value:this._[t]});return e},size:v,empty:m,forEach:function(e){for(var t in this._)e.call(this,c(t),this._[t])}}),nu.nest=function(){function e(t,o,u){if(u>=s.length)return r?r.call(i,o):n?o.sort(n):o;for(var a,l,c,h,p=-1,d=o.length,v=s[u++],m=new f;++p<d;)(h=m.get(a=v(l=o[p])))?h.push(l):m.set(a,[l]);return t?(l=t(),c=function(n,r){l.set(n,e(t,r,u))}):(l={},c=function(n,r){l[n]=e(t,r,u)}),m.forEach(c),l}function t(e,n){if(n>=s.length)return e;var r=[],i=o[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},s=[],o=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(nu.map,n,0),0)},i.key=function(e){return s.push(e),i},i.sortKeys=function(e){return o[s.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},nu.set=function(e){var t=new g;if(e)for(var n=0,r=e.length;r>n;++n)t.add(e[n]);return t},a(g,{has:h,add:function(e){return this._[l(e+="")]=!0,e},remove:p,values:d,size:v,empty:m,forEach:function(e){for(var t in this._)e.call(this,c(t))}}),nu.behavior={},nu.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=b(e,t,t[n]);return e};var gu=["webkit","ms","moz","Moz","o","O"];nu.dispatch=function(){for(var e=new S,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=x(e);return e},S.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},nu.event=null,nu.requote=function(e){return e.replace(yu,"\\$&")};var yu=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,bu={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},wu=function(e,t){return t.querySelector(e)},Eu=function(e,t){return t.querySelectorAll(e)},Su=function(e,t){var n=e.matches||e[w(e,"matchesSelector")];return(Su=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(wu=function(e,t){return Sizzle(e,t)[0]||null},Eu=Sizzle,Su=Sizzle.matchesSelector),nu.selection=function(){return nu.select(su.documentElement)};var xu=nu.selection.prototype=[];xu.select=function(e){var t,n,r,i,s=[];e=L(e);for(var o=-1,u=this.length;++o<u;){s.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var a=-1,f=r.length;++a<f;)(i=r[a])?(t.push(n=e.call(i,i.__data__,a,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return k(s)},xu.selectAll=function(e){var t,n,r=[];e=A(e);for(var i=-1,s=this.length;++i<s;)for(var o=this[i],u=-1,a=o.length;++u<a;)(n=o[u])&&(r.push(t=iu(e.call(n,n.__data__,u,i))),t.parentNode=n);return k(r)};var Tu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};nu.ns={prefix:Tu,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&(n=e.slice(0,t),e=e.slice(t+1)),Tu.hasOwnProperty(n)?{space:Tu[n],local:e}:e}},xu.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=nu.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(O(t,e[t]));return this}return this.each(O(e,t))},xu.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=D(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!_(e[i]).test(t))return!1;return!0}for(t in e)this.each(P(t,e[t]));return this}return this.each(P(e,t))},xu.style=function(e,n,r){var i=arguments.length;if(3>i){if("string"!=typeof e){2>i&&(n="");for(r in e)this.each(B(r,e[r],n));return this}if(2>i){var s=this.node();return t(s).getComputedStyle(s,null).getPropertyValue(e)}r=""}return this.each(B(e,n,r))},xu.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(j(t,e[t]));return this}return this.each(j(e,t))},xu.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},xu.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},xu.append=function(e){return e=F(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},xu.insert=function(e,t){return e=F(e),t=L(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},xu.remove=function(){return this.each(I)},xu.data=function(e,t){function n(e,n){var r,i,s,o=e.length,c=n.length,h=Math.min(o,c),p=new Array(c),d=new Array(c),v=new Array(o);if(t){var m,g=new f,y=new Array(o);for(r=-1;++r<o;)g.has(m=t.call(i=e[r],i.__data__,r))?v[r]=i:g.set(m,i),y[r]=m;for(r=-1;++r<c;)(i=g.get(m=t.call(n,s=n[r],r)))?i!==!0&&(p[r]=i,i.__data__=s):d[r]=q(s),g.set(m,!0);for(r=-1;++r<o;)g.get(y[r])!==!0&&(v[r]=e[r])}else{for(r=-1;++r<h;)i=e[r],s=n[r],i?(i.__data__=s,p[r]=i):d[r]=q(s);for(;c>r;++r)d[r]=q(n[r]);for(;o>r;++r)v[r]=e[r]}d.update=p,d.parentNode=p.parentNode=v.parentNode=e.parentNode,u.push(d),a.push(p),l.push(v)}var r,i,s=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(r=this[0]).length);++s<o;)(i=r[s])&&(e[s]=i.__data__);return e}var u=W([]),a=k([]),l=k([]);if("function"==typeof e)for(;++s<o;)n(r=this[s],e.call(r,r.parentNode.__data__,s));else for(;++s<o;)n(r=this[s],e);return a.enter=function(){return u},a.exit=function(){return l},a},xu.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},xu.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=R(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]),t.parentNode=(n=this[s]).parentNode;for(var u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return k(i)},xu.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,s=r[i];--i>=0;)(n=r[i])&&(s&&s!==n.nextSibling&&s.parentNode.insertBefore(n,s),s=n);return this},xu.sort=function(e){e=U.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},xu.each=function(e){return z(this,function(t,n,r){e.call(t,t.__data__,n,r)})},xu.call=function(e){var t=iu(arguments);return e.apply(t[0]=this,t),this},xu.empty=function(){return!this.node()},xu.node=function(){for(var e=0,t=this.length;t>e;e++)for(var n=this[e],r=0,i=n.length;i>r;r++){var s=n[r];if(s)return s}return null},xu.size=function(){var e=0;return z(this,function(){++e}),e};var Nu=[];nu.selection.enter=W,nu.selection.enter.prototype=Nu,Nu.append=xu.append,Nu.empty=xu.empty,Nu.node=xu.node,Nu.call=xu.call,Nu.size=xu.size,Nu.select=function(e){for(var t,n,r,i,s,o=[],u=-1,a=this.length;++u<a;){r=(i=this[u]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var f=-1,l=i.length;++f<l;)(s=i[f])?(t.push(r[f]=n=e.call(i.parentNode,s.__data__,f,u)),n.__data__=s.__data__):t.push(null)}return k(o)},Nu.insert=function(e,t){return arguments.length<2&&(t=X(this)),xu.insert.call(this,e,t)},nu.select=function(t){var n;return"string"==typeof t?(n=[wu(t,su)],n.parentNode=su.documentElement):(n=[t],n.parentNode=e(t)),k([n])},nu.selectAll=function(e){var t;return"string"==typeof e?(t=iu(Eu(e,su)),t.parentNode=su.documentElement):(t=e,t.parentNode=null),k([t])},xu.on=function(e,t,n){var r=arguments.length;if(3>r){if("string"!=typeof e){2>r&&(t=!1);for(n in e)this.each(V(n,e[n],t));return this}if(2>r)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(V(e,t,n))};var Cu=nu.map({mouseenter:"mouseover",mouseleave:"mouseout"});su&&Cu.forEach(function(e){"on"+e in su&&Cu.remove(e)});var ku,Lu=0;nu.mouse=function(e){return Q(e,N())};var Au=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;nu.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=N().changedTouches),t)for(var r,i=0,s=t.length;s>i;++i)if((r=t[i]).identifier===n)return Q(e,r)},nu.behavior.drag=function(){function e(){this.on("mousedown.drag",s).on("touchstart.drag",o)}function n(e,t,n,s,o){return function(){function u(){var e,n,r=t(h,v);r&&(e=r[0]-b[0],n=r[1]-b[1],d|=e|n,b=r,p({type:"drag",x:r[0]+f[0],y:r[1]+f[1],dx:e,dy:n}))}function a(){t(h,v)&&(g.on(s+m,null).on(o+m,null),y(d&&nu.event.target===c),p({type:"dragend"}))}var f,l=this,c=nu.event.target,h=l.parentNode,p=r.of(l,arguments),d=0,v=e(),m=".drag"+(null==v?"":"-"+v),g=nu.select(n(c)).on(s+m,u).on(o+m,a),y=K(c),b=t(h,v);i?(f=i.apply(l,arguments),f=[f.x-b[0],f.y-b[1]]):f=[0,0],p({type:"dragstart"})}}var r=C(e,"drag","dragstart","dragend"),i=null,s=n(E,nu.mouse,t,"mousemove","mouseup"),o=n(G,nu.touch,y,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},nu.rebind(e,r,"on")},nu.touches=function(e,t){return arguments.length<2&&(t=N().touches),t?iu(t).map(function(t){var n=Q(e,t);return n.identifier=t.identifier,n}):[]};var Ou=1e-6,Mu=Ou*Ou,_u=Math.PI,Du=2*_u,Pu=Du-Ou,Hu=_u/2,Bu=_u/180,ju=180/_u,Fu=Math.SQRT2,Iu=2,qu=4;nu.interpolateZoom=function(e,t){function n(e){var t=e*y;if(g){var n=rt(v),o=s/(Iu*h)*(n*it(Fu*t+v)-nt(v));return[r+o*f,i+o*l,s*n/rt(Fu*t+v)]}return[r+e*f,i+e*l,s*Math.exp(Fu*t)]}var r=e[0],i=e[1],s=e[2],o=t[0],u=t[1],a=t[2],f=o-r,l=u-i,c=f*f+l*l,h=Math.sqrt(c),p=(a*a-s*s+qu*c)/(2*s*Iu*h),d=(a*a-s*s-qu*c)/(2*a*Iu*h),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(d*d+1)-d),g=m-v,y=(g||Math.log(a/s))/Fu;return n.duration=1e3*y,n},nu.behavior.zoom=function(){function e(e){e.on(M,c).on(Uu+".zoom",p).on("dblclick.zoom",d).on(P,h)}function n(e){return[(e[0]-N.x)/N.k,(e[1]-N.y)/N.k]}function r(e){return[e[0]*N.k+N.x,e[1]*N.k+N.y]}function i(e){N.k=Math.max(L[0],Math.min(L[1],e))}function s(e,t){t=r(t),N.x+=e[0]-t[0],N.y+=e[1]-t[1]}function o(t,n,r,o){t.__chart__={x:N.x,y:N.y,k:N.k},i(Math.pow(2,o)),s(m=n,r),t=nu.select(t),A>0&&(t=t.transition().duration(A)),t.call(e.event)}function u(){E&&E.domain(w.range().map(function(e){return(e-N.x)/N.k}).map(w.invert)),x&&x.domain(S.range().map(function(e){return(e-N.y)/N.k}).map(S.invert))}function a(e){O++||e({type:"zoomstart"})}function f(e){u(),e({type:"zoom",scale:N.k,translate:[N.x,N.y]})}function l(e){--O||e({type:"zoomend"}),m=null}function c(){function e(){c=1,s(nu.mouse(i),p),f(u)}function r(){h.on(_,null).on(D,null),d(c&&nu.event.target===o),l(u)}var i=this,o=nu.event.target,u=H.of(i,arguments),c=0,h=nu.select(t(i)).on(_,e).on(D,r),p=n(nu.mouse(i)),d=K(i);jf.call(i),a(u)}function h(){function e(){var e=nu.touches(d);return p=N.k,e.forEach(function(e){e.identifier in m&&(m[e.identifier]=n(e))}),e}function t(){var t=nu.event.target;nu.select(t).on(w,r).on(E,u),S.push(t);for(var n=nu.event.changedTouches,i=0,s=n.length;s>i;++i)m[n[i].identifier]=null;var a=e(),f=Date.now();if(1===a.length){if(500>f-b){var l=a[0];o(d,l,m[l.identifier],Math.floor(Math.log(N.k)/Math.LN2)+1),T()}b=f}else if(a.length>1){var l=a[0],c=a[1],h=l[0]-c[0],p=l[1]-c[1];g=h*h+p*p}}function r(){var e,t,n,r,o=nu.touches(d);jf.call(d);for(var u=0,a=o.length;a>u;++u,r=null)if(n=o[u],r=m[n.identifier]){if(t)break;e=n,t=r}if(r){var l=(l=n[0]-e[0])*l+(l=n[1]-e[1])*l,c=g&&Math.sqrt(l/g);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],i(c*p)}b=null,s(e,t),f(v)}function u(){if(nu.event.touches.length){for(var t=nu.event.changedTouches,n=0,r=t.length;r>n;++n)delete m[t[n].identifier];for(var i in m)return void e()}nu.selectAll(S).on(y,null),x.on(M,c).on(P,h),C(),l(v)}var p,d=this,v=H.of(d,arguments),m={},g=0,y=".zoom-"+nu.event.changedTouches[0].identifier,w="touchmove"+y,E="touchend"+y,S=[],x=nu.select(d),C=K(d);t(),a(v),x.on(M,null).on(P,t)}function p(){var e=H.of(this,arguments);y?clearTimeout(y):(v=n(m=g||nu.mouse(this)),jf.call(this),a(e)),y=setTimeout(function(){y=null,l(e)},50),T(),i(Math.pow(2,.002*Ru())*N.k),s(m,v),f(e)}function d(){var e=nu.mouse(this),t=Math.log(N.k)/Math.LN2;o(this,e,n(e),nu.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var v,m,g,y,b,w,E,S,x,N={x:0,y:0,k:1},k=[960,500],L=zu,A=250,O=0,M="mousedown.zoom",_="mousemove.zoom",D="mouseup.zoom",P="touchstart.zoom",H=C(e,"zoomstart","zoom","zoomend");return Uu||(Uu="onwheel"in su?(Ru=function(){return-nu.event.deltaY*(nu.event.deltaMode?120:1)},"wheel"):"onmousewheel"in su?(Ru=function(){return nu.event.wheelDelta},"mousewheel"):(Ru=function(){return-nu.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=H.of(this,arguments),t=N;Hf?nu.select(this).transition().each("start.zoom",function(){N=this.__chart__||{x:0,y:0,k:1},a(e)}).tween("zoom:zoom",function(){var n=k[0],r=k[1],i=m?m[0]:n/2,s=m?m[1]:r/2,o=nu.interpolateZoom([(i-N.x)/N.k,(s-N.y)/N.k,n/N.k],[(i-t.x)/t.k,(s-t.y)/t.k,n/t.k]);return function(t){var r=o(t),u=n/r[2];this.__chart__=N={x:i-r[0]*u,y:s-r[1]*u,k:u},f(e)}}).each("interrupt.zoom",function(){l(e)}).each("end.zoom",function(){l(e)}):(this.__chart__=N,a(e),f(e),l(e))})},e.translate=function(t){return arguments.length?(N={x:+t[0],y:+t[1],k:N.k},u(),e):[N.x,N.y]},e.scale=function(t){return arguments.length?(N={x:N.x,y:N.y,k:+t},u(),e):N.k},e.scaleExtent=function(t){return arguments.length?(L=null==t?zu:[+t[0],+t[1]],e):L},e.center=function(t){return arguments.length?(g=t&&[+t[0],+t[1]],e):g},e.size=function(t){return arguments.length?(k=t&&[+t[0],+t[1]],e):k},e.duration=function(t){return arguments.length?(A=+t,e):A},e.x=function(t){return arguments.length?(E=t,w=t.copy(),N={x:0,y:0,k:1},e):E},e.y=function(t){return arguments.length?(x=t,S=t.copy(),N={x:0,y:0,k:1},e):x},nu.rebind(e,H,"on")};var Ru,Uu,zu=[0,1/0];nu.color=ot,ot.prototype.toString=function(){return this.rgb()+""},nu.hsl=ut;var Wu=ut.prototype=new ot;Wu.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new ut(this.h,this.s,this.l/e)},Wu.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new ut(this.h,this.s,e*this.l)},Wu.rgb=function(){return at(this.h,this.s,this.l)},nu.hcl=ft;var Xu=ft.prototype=new ot;Xu.brighter=function(e){return new ft(this.h,this.c,Math.min(100,this.l+Vu*(arguments.length?e:1)))},Xu.darker=function(e){return new ft(this.h,this.c,Math.max(0,this.l-Vu*(arguments.length?e:1)))},Xu.rgb=function(){return lt(this.h,this.c,this.l).rgb()},nu.lab=ct;var Vu=18,$u=.95047,Ju=1,Ku=1.08883,Qu=ct.prototype=new ot;Qu.brighter=function(e){return new ct(Math.min(100,this.l+Vu*(arguments.length?e:1)),this.a,this.b)},Qu.darker=function(e){return new ct(Math.max(0,this.l-Vu*(arguments.length?e:1)),this.a,this.b)},Qu.rgb=function(){return ht(this.l,this.a,this.b)},nu.rgb=gt;var Gu=gt.prototype=new ot;Gu.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&i>t&&(t=i),n&&i>n&&(n=i),r&&i>r&&(r=i),new gt(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new gt(i,i,i)},Gu.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new gt(e*this.r,e*this.g,e*this.b)},Gu.hsl=function(){return St(this.r,this.g,this.b)},Gu.toString=function(){return"#"+wt(this.r)+wt(this.g)+wt(this.b)};var Yu=nu.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});Yu.forEach(function(e,t){Yu.set(e,yt(t))}),nu.functor=Ct,nu.xhr=kt(y),nu.dsv=function(e,t){function n(e,n,s){arguments.length<3&&(s=n,n=null);var o=Lt(e,t,null==n?r:i(n),s);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function s(t){return t.map(o).join(e)}function o(e){return u.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var u=new RegExp('["'+e+"\n]"),a=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(l>=f)return o;if(i)return i=!1,s;var t=l;if(34===e.charCodeAt(t)){for(var n=t;n++<f;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}l=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++l):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;f>l;){var r=e.charCodeAt(l++),u=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(l)&&(++l,++u);else if(r!==a)continue;return e.slice(t,l-u)}return e.slice(t)}for(var r,i,s={},o={},u=[],f=e.length,l=0,c=0;(r=n())!==o;){for(var h=[];r!==s&&r!==o;)h.push(r),r=n();t&&null==(h=t(h,c++))||u.push(h)}return u},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new g,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(o).join(e)].concat(t.map(function(t){return i.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(s).join("\n")},n},nu.csv=nu.dsv(",","text/csv"),nu.tsv=nu.dsv("	","text/tab-separated-values");var Zu,ea,ta,na,ra,ia=this[w(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};nu.timer=function(e,t,n){var r=arguments.length;2>r&&(t=0),3>r&&(n=Date.now());var i=n+t,s={c:e,t:i,f:!1,n:null};ea?ea.n=s:Zu=s,ea=s,ta||(na=clearTimeout(na),ta=1,ia(Mt))},nu.timer.flush=function(){_t(),Dt()},nu.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var sa=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Ht);nu.formatPrefix=function(e,t){var n=0;return e&&(0>e&&(e*=-1),t&&(e=nu.round(e,Pt(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),sa[8+n/3]};var oa=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ua=nu.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=nu.round(e,Pt(e,t))).toFixed(Math.max(0,Math.min(20,Pt(e*(1+1e-15),t))))}}),aa=nu.time={},fa=Date;Ft.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){la.setUTCDate.apply(this._,arguments)},setDay:function(){la.setUTCDay.apply(this._,arguments)},setFullYear:function(){la.setUTCFullYear.apply(this._,arguments)},setHours:function(){la.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){la.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){la.setUTCMinutes.apply(this._,arguments)},setMonth:function(){la.setUTCMonth.apply(this._,arguments)},setSeconds:function(){la.setUTCSeconds.apply(this._,arguments)},setTime:function(){la.setTime.apply(this._,arguments)}};var la=Date.prototype;aa.year=It(function(e){return e=aa.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),aa.years=aa.year.range,aa.years.utc=aa.year.utc.range,aa.day=It(function(e){var t=new fa(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),aa.days=aa.day.range,aa.days.utc=aa.day.utc.range,aa.dayOfYear=function(e){var t=aa.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=aa[e]=It(function(e){return(e=aa.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=aa.year(e).getDay();return Math.floor((aa.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});aa[e+"s"]=n.range,aa[e+"s"].utc=n.utc.range,aa[e+"OfYear"]=function(e){var n=aa.year(e).getDay();return Math.floor((aa.dayOfYear(e)+(n+t)%7)/7)}}),aa.week=aa.sunday,aa.weeks=aa.sunday.range,aa.weeks.utc=aa.sunday.utc.range,aa.weekOfYear=aa.sundayOfYear;var ca={"-":"",_:" ",0:"0"},ha=/^\s*\d+/,pa=/^%/;nu.locale=function(e){return{numberFormat:Bt(e),timeFormat:Rt(e)}};var da=nu.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});nu.format=da.numberFormat,nu.geo={},fn.prototype={s:0,t:0,add:function(e){ln(e,this.t,va),ln(va.s,this.s,this),this.s?this.t+=va.t:this.s=va.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var va=new fn;nu.geo.stream=function(e,t){e&&ma.hasOwnProperty(e.type)?ma[e.type](e,t):cn(e,t)};var ma={Feature:function(e,t){cn(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)cn(n[r].geometry,t)}},ga={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){hn(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)hn(n[r],t,0)},Polygon:function(e,t){pn(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)pn(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)cn(n[r],t)}};nu.geo.area=function(e){return ya=0,nu.geo.stream(e,wa),ya};var ya,ba=new fn,wa={sphere:function(){ya+=4*_u},point:E,lineStart:E,lineEnd:E,polygonStart:function(){ba.reset(),wa.lineStart=dn},polygonEnd:function(){var e=2*ba;ya+=0>e?4*_u+e:e,wa.lineStart=wa.lineEnd=wa.point=E}};nu.geo.bounds=function(){function e(e,t){b.push(w=[l=e,h=e]),c>t&&(c=t),t>p&&(p=t)}function t(t,n){var r=vn([t*Bu,n*Bu]);if(g){var i=gn(g,r),s=[i[1],-i[0],0],o=gn(s,i);wn(o),o=En(o);var a=t-d,f=a>0?1:-1,v=o[0]*ju*f,m=du(a)>180;if(m^(v>f*d&&f*t>v)){var y=o[1]*ju;y>p&&(p=y)}else if(v=(v+360)%360-180,m^(v>f*d&&f*t>v)){var y=-o[1]*ju;c>y&&(c=y)}else c>n&&(c=n),n>p&&(p=n);m?d>t?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t):h>=l?(l>t&&(l=t),t>h&&(h=t)):t>d?u(l,t)>u(l,h)&&(h=t):u(t,h)>u(l,h)&&(l=t)}else e(t,n);g=r,d=t}function n(){E.point=t}function r(){w[0]=l,w[1]=h,E.point=e,g=null}function i(e,n){if(g){var r=e-d;y+=du(r)>180?r+(r>0?360:-360):r}else v=e,m=n;wa.point(e,n),t(e,n)}function s(){wa.lineStart()}function o(){i(v,m),wa.lineEnd(),du(y)>Ou&&(l=-(h=180)),w[0]=l,w[1]=h,g=null}function u(e,t){return(t-=e)<0?t+360:t}function a(e,t){return e[0]-t[0]}function f(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var l,c,h,p,d,v,m,g,y,b,w,E={point:e,lineStart:n,lineEnd:r,polygonStart:function(){E.point=i,E.lineStart=s,E.lineEnd=o,y=0,wa.polygonStart()},polygonEnd:function(){wa.polygonEnd(),E.point=e,E.lineStart=n,E.lineEnd=r,0>ba?(l=-(h=180),c=-(p=90)):y>Ou?p=90:-Ou>y&&(c=-90),w[0]=l,w[1]=h}};return function(e){p=h=-(l=c=1/0),b=[],nu.geo.stream(e,E);var t=b.length;if(t){b.sort(a);for(var n,r=1,i=b[0],s=[i];t>r;++r)n=b[r],f(n[0],i)||f(n[1],i)?(u(i[0],n[1])>u(i[0],i[1])&&(i[1]=n[1]),u(n[0],i[1])>u(i[0],i[1])&&(i[0]=n[0])):s.push(i=n);for(var o,n,d=-1/0,t=s.length-1,r=0,i=s[t];t>=r;i=n,++r)n=s[r],(o=u(i[1],n[0]))>d&&(d=o,l=n[0],h=i[1])}return b=w=null,1/0===l||1/0===c?[[0/0,0/0],[0/0,0/0]]:[[l,c],[h,p]]}}(),nu.geo.centroid=function(e){Ea=Sa=xa=Ta=Na=Ca=ka=La=Aa=Oa=Ma=0,nu.geo.stream(e,_a);var t=Aa,n=Oa,r=Ma,i=t*t+n*n+r*r;return Mu>i&&(t=Ca,n=ka,r=La,Ou>Sa&&(t=xa,n=Ta,r=Na),i=t*t+n*n+r*r,Mu>i)?[0/0,0/0]:[Math.atan2(n,t)*ju,tt(r/Math.sqrt(i))*ju]};var Ea,Sa,xa,Ta,Na,Ca,ka,La,Aa,Oa,Ma,_a={sphere:E,point:xn,lineStart:Nn,lineEnd:Cn,polygonStart:function(){_a.lineStart=kn},polygonEnd:function(){_a.lineStart=Nn}},Da=Dn(An,jn,In,[-_u,-_u/2]),Pa=1e9;nu.geo.clipExtent=function(){var e,t,n,r,i,s,o={stream:function(e){return i&&(i.valid=!1),i=s(e),i.valid=!0,i},extent:function(u){return arguments.length?(s=zn(e=+u[0][0],t=+u[0][1],n=+u[1][0],r=+u[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(nu.geo.conicEqualArea=function(){return Wn(Xn)}).raw=Xn,nu.geo.albers=function(){return nu.geo.conicEqualArea().rotate([96,0]).center([-0.6,38.7]).parallels([29.5,45.5]).scale(1070)},nu.geo.albersUsa=function(){function e(e){var s=e[0],o=e[1];return t=null,n(s,o),t||(r(s,o),t)||i(s,o),t}var t,n,r,i,s=nu.geo.albers(),o=nu.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),u=nu.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=s.scale(),n=s.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&.234>i&&r>=-0.425&&-0.214>r?o:i>=.166&&.234>i&&r>=-0.214&&-0.115>r?u:s).invert(e)},e.stream=function(e){var t=s.stream(e),n=o.stream(e),r=u.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(s.precision(t),o.precision(t),u.precision(t),e):s.precision()},e.scale=function(t){return arguments.length?(s.scale(t),o.scale(.35*t),u.scale(t),e.translate(s.translate())):s.scale()},e.translate=function(t){if(!arguments.length)return s.translate();var f=s.scale(),l=+t[0],c=+t[1];return n=s.translate(t).clipExtent([[l-.455*f,c-.238*f],[l+.455*f,c+.238*f]]).stream(a).point,r=o.translate([l-.307*f,c+.201*f]).clipExtent([[l-.425*f+Ou,c+.12*f+Ou],[l-.214*f-Ou,c+.234*f-Ou]]).stream(a).point,i=u.translate([l-.205*f,c+.212*f]).clipExtent([[l-.214*f+Ou,c+.166*f+Ou],[l-.115*f-Ou,c+.234*f-Ou]]).stream(a).point,e},e.scale(1070)};var Ha,Ba,ja,Fa,Ia,qa,Ra={point:E,lineStart:E,lineEnd:E,polygonStart:function(){Ba=0,Ra.lineStart=Vn},polygonEnd:function(){Ra.lineStart=Ra.lineEnd=Ra.point=E,Ha+=du(Ba/2)}},Ua={point:$n,lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E},za={point:Qn,lineStart:Gn,lineEnd:Yn,polygonStart:function(){za.lineStart=Zn},polygonEnd:function(){za.point=Qn,za.lineStart=Gn,za.lineEnd=Yn}};nu.geo.path=function(){function e(e){return e&&("function"==typeof u&&s.pointRadius(+u.apply(this,arguments)),o&&o.valid||(o=i(s)),nu.geo.stream(e,o)),s.result()}function t(){return o=null,e}var n,r,i,s,o,u=4.5;return e.area=function(e){return Ha=0,nu.geo.stream(e,i(Ra)),Ha},e.centroid=function(e){return xa=Ta=Na=Ca=ka=La=Aa=Oa=Ma=0,nu.geo.stream(e,i(za)),Ma?[Aa/Ma,Oa/Ma]:La?[Ca/La,ka/La]:Na?[xa/Na,Ta/Na]:[0/0,0/0]},e.bounds=function(e){return Ia=qa=-(ja=Fa=1/0),nu.geo.stream(e,i(Ua)),[[ja,Fa],[Ia,qa]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||nr(e):y,t()):n},e.context=function(e){return arguments.length?(s=null==(r=e)?new Jn:new er(e),"function"!=typeof u&&s.pointRadius(u),t()):r},e.pointRadius=function(t){return arguments.length?(u="function"==typeof t?t:(s.pointRadius(+t),+t),e):u},e.projection(nu.geo.albersUsa()).context(null)},nu.geo.transform=function(e){return{stream:function(t){var n=new rr(t);for(var r in e)n[r]=e[r];return n}}},rr.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},nu.geo.projection=sr,nu.geo.projectionMutator=or,(nu.geo.equirectangular=function(){return sr(ar)}).raw=ar.invert=ar,nu.geo.rotation=function(e){function t(t){return t=e(t[0]*Bu,t[1]*Bu),t[0]*=ju,t[1]*=ju,t}return e=lr(e[0]%360*Bu,e[1]*Bu,e.length>2?e[2]*Bu:0),t.invert=function(t){return t=e.invert(t[0]*Bu,t[1]*Bu),t[0]*=ju,t[1]*=ju,t},t},fr.invert=ar,nu.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=lr(-e[0]*Bu,-e[1]*Bu,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=ju,e[1]*=ju}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=dr((t=+r)*Bu,i*Bu),e):t},e.precision=function(r){return arguments.length?(n=dr(t*Bu,(i=+r)*Bu),e):i},e.angle(90)},nu.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Bu,i=e[1]*Bu,s=t[1]*Bu,o=Math.sin(r),u=Math.cos(r),a=Math.sin(i),f=Math.cos(i),l=Math.sin(s),c=Math.cos(s);return Math.atan2(Math.sqrt((n=c*o)*n+(n=f*l-a*c*u)*n),a*l+f*c*u)},nu.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return nu.range(Math.ceil(s/m)*m,i,m).map(h).concat(nu.range(Math.ceil(f/g)*g,a,g).map(p)).concat(nu.range(Math.ceil(r/d)*d,n,d).filter(function(e){return du(e%m)>Ou}).map(l)).concat(nu.range(Math.ceil(u/v)*v,o,v).filter(function(e){return du(e%g)>Ou}).map(c))}var n,r,i,s,o,u,a,f,l,c,h,p,d=10,v=d,m=90,g=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[h(s).concat(p(a).slice(1),h(i).reverse().slice(1),p(f).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(s=+t[0][0],i=+t[1][0],f=+t[0][1],a=+t[1][1],s>i&&(t=s,s=i,i=t),f>a&&(t=f,f=a,a=t),e.precision(y)):[[s,f],[i,a]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],u=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),u>o&&(t=u,u=o,o=t),e.precision(y)):[[r,u],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],g=+t[1],e):[m,g]},e.minorStep=function(t){return arguments.length?(d=+t[0],v=+t[1],e):[d,v]},e.precision=function(t){return arguments.length?(y=+t,l=mr(u,o,90),c=gr(r,n,y),h=mr(f,a,90),p=gr(s,i,y),e):y},e.majorExtent([[-180,-90+Ou],[180,90-Ou]]).minorExtent([[-180,-80-Ou],[180,80+Ou]])},nu.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=yr,i=br;return e.distance=function(){return nu.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},nu.geo.interpolate=function(e,t){return wr(e[0]*Bu,e[1]*Bu,t[0]*Bu,t[1]*Bu)},nu.geo.length=function(e){return Wa=0,nu.geo.stream(e,Xa),Wa};var Wa,Xa={sphere:E,point:E,lineStart:Er,lineEnd:E,polygonStart:E,polygonEnd:E},Va=Sr(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(nu.geo.azimuthalEqualArea=function(){return sr(Va)}).raw=Va;var $a=Sr(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},y);(nu.geo.azimuthalEquidistant=function(){return sr($a)}).raw=$a,(nu.geo.conicConformal=function(){return Wn(xr)}).raw=xr,(nu.geo.conicEquidistant=function(){return Wn(Tr)}).raw=Tr;var Ja=Sr(function(e){return 1/e},Math.atan);(nu.geo.gnomonic=function(){return sr(Ja)}).raw=Ja,Nr.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Hu]},(nu.geo.mercator=function(){return Cr(Nr)}).raw=Nr;var Ka=Sr(function(){return 1},Math.asin);(nu.geo.orthographic=function(){return sr(Ka)}).raw=Ka;var Qa=Sr(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(nu.geo.stereographic=function(){return sr(Qa)}).raw=Qa,kr.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Hu]},(nu.geo.transverseMercator=function(){var e=Cr(kr),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=kr,nu.geom={},nu.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=Ct(n),s=Ct(r),o=e.length,u=[],a=[];for(t=0;o>t;t++)u.push([+i.call(this,e[t],t),+s.call(this,e[t],t),t]);for(u.sort(Mr),t=0;o>t;t++)a.push([u[t][0],-u[t][1]]);var f=Or(u),l=Or(a),c=l[0]===f[0],h=l[l.length-1]===f[f.length-1],p=[];for(t=f.length-1;t>=0;--t)p.push(e[u[f[t]][2]]);for(t=+c;t<l.length-h;++t)p.push(e[u[l[t]][2]]);return p}var n=Lr,r=Ar;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},nu.geom.polygon=function(e){return bu(e,Ga),e};var Ga=nu.geom.polygon.prototype=[];Ga.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},Ga.centroid=function(e){var t,n,r=-1,i=this.length,s=0,o=0,u=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=u,u=this[r],n=t[0]*u[1]-u[0]*t[1],s+=(t[0]+u[0])*n,o+=(t[1]+u[1])*n;return[s*e,o*e]},Ga.clip=function(e){for(var t,n,r,i,s,o,u=Pr(e),a=-1,f=this.length-Pr(this),l=this[f-1];++a<f;){for(t=e.slice(),e.length=0,i=this[a],s=t[(r=t.length-u)-1],n=-1;++n<r;)o=t[n],_r(o,l,i)?(_r(s,l,i)||e.push(Dr(s,o,l,i)),e.push(o)):_r(s,l,i)&&e.push(Dr(s,o,l,i)),s=o;u&&e.push(e[0]),l=i}return e};var Ya,Za,ef,tf,nf,rf=[],sf=[];Ur.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(Wr),t.length},ei.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ti.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=si(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(ri(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ii(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ii(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ri(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,s=e.L,o=e.R;if(n=s?o?si(o):s:o,i?i.L===e?i.L=n:i.R=n:this._=n,s&&o?(r=n.C,n.C=e.C,n.L=s,s.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void (e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,ri(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ii(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ri(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ii(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ri(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ii(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},nu.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=u[0][0],i=u[0][1],s=u[1][0],o=u[1][1];return oi(n(e),u).cells.forEach(function(n,u){var a=n.edges,f=n.site,l=t[u]=a.length?a.map(function(e){var t=e.start();return[t.x,t.y]}):f.x>=r&&f.x<=s&&f.y>=i&&f.y<=o?[[r,o],[s,o],[s,i],[r,i]]:[];l.point=e[u]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(s(e,t)/Ou)*Ou,y:Math.round(o(e,t)/Ou)*Ou,i:t}})}var r=Lr,i=Ar,s=r,o=i,u=of;return e?t(e):(t.links=function(e){return oi(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return oi(n(e)).cells.forEach(function(n,r){for(var i,s,o=n.site,u=n.edges.sort(Wr),a=-1,f=u.length,l=u[f-1].edge,c=l.l===o?l.r:l.l;++a<f;)i=l,s=c,l=u[a].edge,c=l.l===o?l.r:l.l,r<s.i&&r<c.i&&ai(o,s,c)<0&&t.push([e[r],e[s.i],e[c.i]])}),t},t.x=function(e){return arguments.length?(s=Ct(r=e),t):r},t.y=function(e){return arguments.length?(o=Ct(i=e),t):i},t.clipExtent=function(e){return arguments.length?(u=null==e?of:e,t):u===of?null:u},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):u===of?null:u&&u[1]},t)};var of=[[-1e6,-1e6],[1e6,1e6]];nu.geom.delaunay=function(e){return nu.geom.voronoi().triangles(e)},nu.geom.quadtree=function(e,t,n,r,i){function s(e){function s(e,t,n,r,i,s,o,u){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var a=e.x,l=e.y;if(null!=a)if(du(a-n)+du(l-r)<.01)f(e,t,n,r,i,s,o,u);else{var c=e.point;e.x=e.y=e.point=null,f(e,c,a,l,i,s,o,u),f(e,t,n,r,i,s,o,u)}else e.x=n,e.y=r,e.point=t}else f(e,t,n,r,i,s,o,u)}function f(e,t,n,r,i,o,u,a){var f=.5*(i+u),l=.5*(o+a),c=n>=f,h=r>=l,p=h<<1|c;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]=ci()),c?i=f:u=f,h?o=l:a=l,s(e,t,n,r,i,o,u,a)}var l,c,h,p,d,v,m,g,y,b=Ct(u),w=Ct(a);if(null!=t)v=t,m=n,g=r,y=i;else if(g=y=-(v=m=1/0),c=[],h=[],d=e.length,o)for(p=0;d>p;++p)l=e[p],l.x<v&&(v=l.x),l.y<m&&(m=l.y),l.x>g&&(g=l.x),l.y>y&&(y=l.y),c.push(l.x),h.push(l.y);else for(p=0;d>p;++p){var E=+b(l=e[p],p),S=+w(l,p);v>E&&(v=E),m>S&&(m=S),E>g&&(g=E),S>y&&(y=S),c.push(E),h.push(S)}var x=g-v,T=y-m;x>T?y=m+x:g=v+T;var N=ci();if(N.add=function(e){s(N,e,+b(e,++p),+w(e,p),v,m,g,y)},N.visit=function(e){hi(e,N,v,m,g,y)},N.find=function(e){return pi(N,e[0],e[1],v,m,g,y)},p=-1,null==t){for(;++p<d;)s(N,e[p],c[p],h[p],v,m,g,y);--p}else e.forEach(N.add);return c=h=e=l=null,N}var o,u=Lr,a=Ar;return(o=arguments.length)?(u=fi,a=li,3===o&&(i=n,r=t,n=t=0),s(e)):(s.x=function(e){return arguments.length?(u=e,s):u},s.y=function(e){return arguments.length?(a=e,s):a},s.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),s):null==t?null:[[t,n],[r,i]]},s.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),s):null==t?null:[r-t,i-n]},s)},nu.interpolateRgb=di,nu.interpolateObject=vi,nu.interpolateNumber=mi,nu.interpolateString=gi;var uf=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,af=new RegExp(uf.source,"g");nu.interpolate=yi,nu.interpolators=[function(e,t){var n=typeof t;return("string"===n?Yu.has(t)||/^(#|rgb\(|hsl\()/.test(t)?di:gi:t instanceof ot?di:Array.isArray(t)?bi:"object"===n&&isNaN(t)?vi:mi)(e,t)}],nu.interpolateArray=bi;var ff=function(){return y},lf=nu.map({linear:ff,poly:Ci,quad:function(){return xi},cubic:function(){return Ti},sin:function(){return ki},exp:function(){return Li},circle:function(){return Ai},elastic:Oi,back:Mi,bounce:function(){return _i}}),cf=nu.map({"in":y,out:Ei,"in-out":Si,"out-in":function(e){return Si(Ei(e))}});nu.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=lf.get(n)||ff,r=cf.get(r)||y,wi(r(n.apply(null,ru.call(arguments,1))))},nu.interpolateHcl=Di,nu.interpolateHsl=Pi,nu.interpolateLab=Hi,nu.interpolateRound=Bi,nu.transform=function(e){var t=su.createElementNS(nu.ns.prefix.svg,"g");return(nu.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new ji(n?n.matrix:hf)})(e)},ji.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var hf={a:1,b:0,c:0,d:1,e:0,f:0};nu.interpolateTransform=Ri,nu.layout={},nu.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Wi(e[n]));return t}},nu.layout.chord=function(){function e(){var e,f,c,h,p,d={},v=[],m=nu.range(s),g=[];for(n=[],r=[],e=0,h=-1;++h<s;){for(f=0,p=-1;++p<s;)f+=i[h][p];v.push(f),g.push(nu.range(s)),e+=f}for(o&&m.sort(function(e,t){return o(v[e],v[t])}),u&&g.forEach(function(e,t){e.sort(function(e,n){return u(i[t][e],i[t][n])})}),e=(Du-l*s)/e,f=0,h=-1;++h<s;){for(c=f,p=-1;++p<s;){var y=m[h],b=g[y][p],w=i[y][b],E=f,S=f+=w*e;d[y+"-"+b]={index:y,subindex:b,startAngle:E,endAngle:S,value:w}}r[y]={index:y,startAngle:c,endAngle:f,value:(f-c)/e},f+=l}for(h=-1;++h<s;)for(p=h-1;++p<s;){var x=d[h+"-"+p],T=d[p+"-"+h];(x.value||T.value)&&n.push(x.value<T.value?{source:T,target:x}:{source:x,target:T})}a&&t()}function t(){n.sort(function(e,t){return a((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,s,o,u,a,f={},l=0;return f.matrix=function(e){return arguments.length?(s=(i=e)&&i.length,n=r=null,f):i},f.padding=function(e){return arguments.length?(l=e,n=r=null,f):l},f.sortGroups=function(e){return arguments.length?(o=e,n=r=null,f):o},f.sortSubgroups=function(e){return arguments.length?(u=e,n=null,f):u},f.sortChords=function(e){return arguments.length?(a=e,n&&t(),f):a},f.chords=function(){return n||e(),n},f.groups=function(){return r||e(),r},f},nu.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var s=t.cx-e.x,o=t.cy-e.y,u=i-n,a=s*s+o*o;if(a>u*u/m){if(d>a){var f=t.charge/a;e.px-=s*f,e.py-=o*f}return!0}if(t.point&&a&&d>a){var f=t.pointCharge/a;e.px-=s*f,e.py-=o*f}}return!t.charge}}function t(e){e.px=nu.event.x,e.py=nu.event.y,u.resume()}var n,r,i,s,o,u={},a=nu.dispatch("start","tick","end"),f=[1,1],l=.9,c=pf,h=df,p=-30,d=vf,v=.1,m=.64,g=[],b=[];return u.tick=function(){if((r*=.99)<.005)return a.end({type:"end",alpha:r=0}),!0;var t,n,u,c,h,d,m,y,w,E=g.length,S=b.length;for(n=0;S>n;++n)u=b[n],c=u.source,h=u.target,y=h.x-c.x,w=h.y-c.y,(d=y*y+w*w)&&(d=r*s[n]*((d=Math.sqrt(d))-i[n])/d,y*=d,w*=d,h.x-=y*(m=c.weight/(h.weight+c.weight)),h.y-=w*m,c.x+=y*(m=1-m),c.y+=w*m);if((m=r*v)&&(y=f[0]/2,w=f[1]/2,n=-1,m))for(;++n<E;)u=g[n],u.x+=(y-u.x)*m,u.y+=(w-u.y)*m;if(p)for(Gi(t=nu.geom.quadtree(g),r,o),n=-1;++n<E;)(u=g[n]).fixed||t.visit(e(u));for(n=-1;++n<E;)u=g[n],u.fixed?(u.x=u.px,u.y=u.py):(u.x-=(u.px-(u.px=u.x))*l,u.y-=(u.py-(u.py=u.y))*l);a.tick({type:"tick",alpha:r})},u.nodes=function(e){return arguments.length?(g=e,u):g},u.links=function(e){return arguments.length?(b=e,u):b},u.size=function(e){return arguments.length?(f=e,u):f},u.linkDistance=function(e){return arguments.length?(c="function"==typeof e?e:+e,u):c},u.distance=u.linkDistance,u.linkStrength=function(e){return arguments.length?(h="function"==typeof e?e:+e,u):h},u.friction=function(e){return arguments.length?(l=+e,u):l},u.charge=function(e){return arguments.length?(p="function"==typeof e?e:+e,u):p},u.chargeDistance=function(e){return arguments.length?(d=e*e,u):Math.sqrt(d)},u.gravity=function(e){return arguments.length?(v=+e,u):v},u.theta=function(e){return arguments.length?(m=e*e,u):Math.sqrt(m)},u.alpha=function(e){return arguments.length?(e=+e,r?r=e>0?e:0:e>0&&(a.start({type:"start",alpha:r=e}),nu.timer(u.tick)),u):r},u.start=function(){function e(e,r){if(!n){for(n=new Array(a),u=0;a>u;++u)n[u]=[];for(u=0;l>u;++u){var i=b[u];n[i.source.index].push(i.target),n[i.target.index].push(i.source)}}for(var s,o=n[t],u=-1,f=o.length;++u<f;)if(!isNaN(s=o[u][e]))return s;return Math.random()*r}var t,n,r,a=g.length,l=b.length,d=f[0],v=f[1];for(t=0;a>t;++t)(r=g[t]).index=t,r.weight=0;for(t=0;l>t;++t)r=b[t],"number"==typeof r.source&&(r.source=g[r.source]),"number"==typeof r.target&&(r.target=g[r.target]),++r.source.weight,++r.target.weight;for(t=0;a>t;++t)r=g[t],isNaN(r.x)&&(r.x=e("x",d)),isNaN(r.y)&&(r.y=e("y",v)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(i=[],"function"==typeof c)for(t=0;l>t;++t)i[t]=+c.call(this,b[t],t);else for(t=0;l>t;++t)i[t]=c;if(s=[],"function"==typeof h)for(t=0;l>t;++t)s[t]=+h.call(this,b[t],t);else for(t=0;l>t;++t)s[t]=h;if(o=[],"function"==typeof p)for(t=0;a>t;++t)o[t]=+p.call(this,g[t],t);else for(t=0;a>t;++t)o[t]=p;return u.resume()},u.resume=function(){return u.alpha(.1)},u.stop=function(){return u.alpha(0)},u.drag=function(){return n||(n=nu.behavior.drag().origin(y).on("dragstart.force",$i).on("drag.force",t).on("dragend.force",Ji)),arguments.length?void this.on("mouseover.force",Ki).on("mouseout.force",Qi).call(n):n},nu.rebind(u,a,"on")};var pf=20,df=1,vf=1/0;nu.layout.hierarchy=function(){function e(i){var s,o=[i],u=[];for(i.depth=0;null!=(s=o.pop());)if(u.push(s),(f=n.call(e,s,s.depth))&&(a=f.length)){for(var a,f,l;--a>=0;)o.push(l=f[a]),l.parent=s,l.depth=s.depth+1;r&&(s.value=0),s.children=f}else r&&(s.value=+r.call(e,s,s.depth)||0),delete s.children;return es(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),u}var t=rs,n=ts,r=ns;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(Zi(t,function(e){e.children&&(e.value=0)}),es(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},nu.layout.partition=function(){function e(t,n,r,i){var s=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,s&&(o=s.length)){var o,u,a,f=-1;for(r=t.value?r/t.value:0;++f<o;)e(u=s[f],n,a=u.value*r,i),n+=a}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,s=-1;++s<i;)r=Math.max(r,t(n[s]));return 1+r}function n(n,s){var o=r.call(this,n,s);return e(o[0],0,i[0],i[1]/t(o[0])),o}var r=nu.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},Yi(n,r)},nu.layout.pie=function(){function e(o){var u,a=o.length,f=o.map(function(n,r){return+t.call(e,n,r)}),l=+("function"==typeof r?r.apply(this,arguments):r),c=("function"==typeof i?i.apply(this,arguments):i)-l,h=Math.min(Math.abs(c)/a,+("function"==typeof s?s.apply(this,arguments):s)),p=h*(0>c?-1:1),d=(c-a*p)/nu.sum(f),v=nu.range(a),m=[];return null!=n&&v.sort(n===mf?function(e,t){return f[t]-f[e]}:function(e,t){return n(o[e],o[t])}),v.forEach(function(e){m[e]={data:o[e],value:u=f[e],startAngle:l,endAngle:l+=u*d+p,padAngle:h}}),m}var t=Number,n=mf,r=0,i=Du,s=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(s=t,e):s},e};var mf={};nu.layout.stack=function(){function e(u,a){if(!(h=u.length))return u;var f=u.map(function(n,r){return t.call(e,n,r)}),l=f.map(function(t){return t.map(function(t,n){return[s.call(e,t,n),o.call(e,t,n)]})}),c=n.call(e,l,a);f=nu.permute(f,c),l=nu.permute(l,c);var h,p,d,v,m=r.call(e,l,a),g=f[0].length;for(d=0;g>d;++d)for(i.call(e,f[0][d],v=m[d],l[0][d][1]),p=1;h>p;++p)i.call(e,f[p][d],v+=l[p-1][d][1],l[p][d][1]);return u}var t=y,n=as,r=fs,i=us,s=ss,o=os;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:gf.get(t)||as,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:yf.get(t)||fs,e):r},e.x=function(t){return arguments.length?(s=t,e):s},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var gf=nu.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(ls),s=e.map(cs),o=nu.range(r).sort(function(e,t){return i[e]-i[t]}),u=0,a=0,f=[],l=[];for(t=0;r>t;++t)n=o[t],a>u?(u+=s[n],f.push(n)):(a+=s[n],l.push(n));return l.reverse().concat(f)},reverse:function(e){return nu.range(e.length).reverse()},"default":as}),yf=nu.map({silhouette:function(e){var t,n,r,i=e.length,s=e[0].length,o=[],u=0,a=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];r>u&&(u=r),o.push(r)}for(n=0;s>n;++n)a[n]=(u-o[n])/2;return a},wiggle:function(e){var t,n,r,i,s,o,u,a,f,l=e.length,c=e[0],h=c.length,p=[];for(p[0]=a=f=0,n=1;h>n;++n){for(t=0,i=0;l>t;++t)i+=e[t][n][1];for(t=0,s=0,u=c[n][0]-c[n-1][0];l>t;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*u);t>r;++r)o+=(e[r][n][1]-e[r][n-1][1])/u;s+=o*e[t][n][1]}p[n]=a-=i?s/i*u:0,f>a&&(f=a)}for(n=0;h>n;++n)p[n]-=f;return p},expand:function(e){var t,n,r,i=e.length,s=e[0].length,o=1/i,u=[];for(n=0;s>n;++n){for(t=0,r=0;i>t;t++)r+=e[t][n][1];if(r)for(t=0;i>t;t++)e[t][n][1]/=r;else for(t=0;i>t;t++)e[t][n][1]=o}for(n=0;s>n;++n)u[n]=0;return u},zero:fs});nu.layout.histogram=function(){function e(e,s){for(var o,u,a=[],f=e.map(n,this),l=r.call(this,f,s),c=i.call(this,l,f,s),s=-1,h=f.length,p=c.length-1,d=t?1:1/h;++s<p;)o=a[s]=[],o.dx=c[s+1]-(o.x=c[s]),o.y=0;if(p>0)for(s=-1;++s<h;)u=f[s],u>=l[0]&&u<=l[1]&&(o=a[nu.bisect(c,u,1,p)-1],o.y+=d,o.push(e[s]));return a}var t=!0,n=Number,r=vs,i=ps;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=Ct(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return ds(e,t)}:Ct(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},nu.layout.pack=function(){function e(e,s){var o=n.call(this,e,s),u=o[0],a=i[0],f=i[1],l=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(u.x=u.y=0,es(u,function(e){e.r=+l(e.value)}),es(u,ws),r){var c=r*(t?1:Math.max(2*u.r/a,2*u.r/f))/2;es(u,function(e){e.r+=c}),es(u,ws),es(u,function(e){e.r-=c})}return xs(u,a/2,f/2,t?1:1/Math.max(2*u.r/a,2*u.r/f)),o}var t,n=nu.layout.hierarchy().sort(ms),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},Yi(e,n)},nu.layout.tree=function(){function e(e,i){var l=o.call(this,e,i),c=l[0],h=t(c);if(es(h,n),h.parent.m=-h.z,Zi(h,r),f)Zi(c,s);else{var p=c,d=c,v=c;Zi(c,function(e){e.x<p.x&&(p=e),e.x>d.x&&(d=e),e.depth>v.depth&&(v=e)});var m=u(p,d)/2-p.x,g=a[0]/(d.x+u(d,p)/2+m),y=a[1]/(v.depth||1);Zi(c,function(e){e.x=(e.x+m)*g,e.y=e.depth*y})}return l}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,s=t.children,o=0,u=s.length;u>o;++o)r.push((s[o]=i={_:s[o],parent:t,children:(i=s[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){As(e);var s=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+u(e._,r._),e.m=e.z-s):e.z=s}else r&&(e.z=r.z+u(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,s=e,o=t,a=i.parent.children[0],f=i.m,l=s.m,c=o.m,h=a.m;o=ks(o),i=Cs(i),o&&i;)a=Cs(a),s=ks(s),s.a=e,r=o.z+c-i.z-f+u(o._,i._),r>0&&(Ls(Os(o,e,n),e,r),f+=r,l+=r),c+=o.m,f+=i.m,h+=a.m,l+=s.m;o&&!ks(s)&&(s.t=o,s.m+=c-l),i&&!Cs(a)&&(a.t=i,a.m+=f-h,n=e)}return n}function s(e){e.x*=a[0],e.y=e.depth*a[1]}var o=nu.layout.hierarchy().sort(null).value(null),u=Ns,a=[1,1],f=null;return e.separation=function(t){return arguments.length?(u=t,e):u},e.size=function(t){return arguments.length?(f=null==(a=t)?s:null,e):f?null:a},e.nodeSize=function(t){return arguments.length?(f=null==(a=t)?null:s,e):f?a:null},Yi(e,o)},nu.layout.cluster=function(){function e(e,s){var o,u=t.call(this,e,s),a=u[0],f=0;es(a,function(e){var t=e.children;t&&t.length?(e.x=_s(t),e.y=Ms(t)):(e.x=o?f+=n(e,o):0,e.y=0,o=e)});var l=Ds(a),c=Ps(a),h=l.x-n(l,c)/2,p=c.x+n(c,l)/2;return es(a,i?function(e){e.x=(e.x-a.x)*r[0],e.y=(a.y-e.y)*r[1]}:function(e){e.x=(e.x-h)/(p-h)*r[0],e.y=(1-(a.y?e.y/a.y:1))*r[1]}),u}var t=nu.layout.hierarchy().sort(null).value(null),n=Ns,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},Yi(e,t)},nu.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,s=e.length;++i<s;)r=(n=e[i]).value*(0>t?0:t),n.area=isNaN(r)||0>=r?0:r}function t(n){var s=n.children;if(s&&s.length){var o,u,a,f=c(n),l=[],h=s.slice(),d=1/0,v="slice"===p?f.dx:"dice"===p?f.dy:"slice-dice"===p?1&n.depth?f.dy:f.dx:Math.min(f.dx,f.dy);for(e(h,f.dx*f.dy/n.value),l.area=0;(a=h.length)>0;)l.push(o=h[a-1]),l.area+=o.area,"squarify"!==p||(u=r(l,v))<=d?(h.pop(),d=u):(l.area-=l.pop().area,i(l,v,f,!1),v=Math.min(f.dx,f.dy),l.length=l.area=0,d=1/0);l.length&&(i(l,v,f,!0),l.length=l.area=0),s.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var s,o=c(t),u=r.slice(),a=[];for(e(u,o.dx*o.dy/t.value),a.area=0;s=u.pop();)a.push(s),a.area+=s.area,null!=s.z&&(i(a,s.z?o.dx:o.dy,o,!u.length),a.length=a.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,s=1/0,o=-1,u=e.length;++o<u;)(n=e[o].area)&&(s>n&&(s=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*d/r,r/(t*s*d)):1/0}function i(e,t,n,r){var i,s=-1,o=e.length,u=n.x,f=n.y,l=t?a(e.area/t):0;if(t==n.dx){for((r||l>n.dy)&&(l=n.dy);++s<o;)i=e[s],i.x=u,i.y=f,i.dy=l,u+=i.dx=Math.min(n.x+n.dx-u,l?a(i.area/l):0);i.z=!0,i.dx+=n.x+n.dx-u,n.y+=l,n.dy-=l}else{for((r||l>n.dx)&&(l=n.dx);++s<o;)i=e[s],i.x=u,i.y=f,i.dx=l,f+=i.dy=Math.min(n.y+n.dy-f,l?a(i.area/l):0);i.z=!1,i.dy+=n.y+n.dy-f,n.x+=l,n.dx-=l}}function s(r){var i=o||u(r),s=i[0];return s.x=0,s.y=0,s.dx=f[0],s.dy=f[1],o&&u.revalue(s),e([s],s.dx*s.dy/s.value),(o?n:t)(s),h&&(o=i),i}var o,u=nu.layout.hierarchy(),a=Math.round,f=[1,1],l=null,c=Hs,h=!1,p="squarify",d=.5*(1+Math.sqrt(5));return s.size=function(e){return arguments.length?(f=e,s):f},s.padding=function(e){function t(t){var n=e.call(s,t,t.depth);return null==n?Hs(t):Bs(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return Bs(t,e)}if(!arguments.length)return l;var r;return c=null==(l=e)?Hs:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,s},s.round=function(e){return arguments.length?(a=e?Math.round:Number,s):a!=Number},s.sticky=function(e){return arguments.length?(h=e,o=null,s):h},s.ratio=function(e){return arguments.length?(d=e,s):d},s.mode=function(e){return arguments.length?(p=e+"",s):p},Yi(s,u)},nu.random={normal:function(e,t){var n=arguments.length;return 2>n&&(t=1),1>n&&(e=0),function(){var n,r,i;do n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r;while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=nu.random.normal.apply(nu,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=nu.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;e>n;n++)t+=Math.random();return t}}},nu.scale={};var bf={floor:y,ceil:y};nu.scale.linear=function(){return zs([0,1],[0,1],yi,!1)};var wf={s:1,g:1,p:1,r:1,e:1};nu.scale.log=function(){return Gs(nu.scale.linear().domain([0,1]),10,!0,[1,10])};var Ef=nu.format(".0e"),Sf={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};nu.scale.pow=function(){return Ys(nu.scale.linear(),1,[0,1])},nu.scale.sqrt=function(){return nu.scale.pow().exponent(.5)},nu.scale.ordinal=function(){return eo([],{t:"range",a:[[]]})},nu.scale.category10=function(){return nu.scale.ordinal().range(xf)},nu.scale.category20=function(){return nu.scale.ordinal().range(Tf)},nu.scale.category20b=function(){return nu.scale.ordinal().range(Nf)},nu.scale.category20c=function(){return nu.scale.ordinal().range(Cf)};var xf=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(bt),Tf=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(bt),Nf=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(bt),Cf=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(bt);nu.scale.quantile=function(){return to([],[])},nu.scale.quantize=function(){return no(0,1,[0,1])},nu.scale.threshold=function(){return ro([.5],[0,1])},nu.scale.identity=function(){return io([0,1])},nu.svg={},nu.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),f=Math.max(0,+r.apply(this,arguments)),l=o.apply(this,arguments)-Hu,c=u.apply(this,arguments)-Hu,h=Math.abs(c-l),p=l>c?0:1;if(e>f&&(d=f,f=e,e=d),h>=Pu)return t(f,p)+(e?t(e,1-p):"")+"Z";var d,v,m,g,y,b,w,E,S,x,T,N,C=0,k=0,L=[];if((g=(+a.apply(this,arguments)||0)/2)&&(m=s===kf?Math.sqrt(e*e+f*f):+s.apply(this,arguments),p||(k*=-1),f&&(k=tt(m/f*Math.sin(g))),e&&(C=tt(m/e*Math.sin(g)))),f){y=f*Math.cos(l+k),b=f*Math.sin(l+k),w=f*Math.cos(c-k),E=f*Math.sin(c-k);var A=Math.abs(c-l-2*k)<=_u?0:1;if(k&&co(y,b,w,E)===p^A){var O=(l+c)/2;y=f*Math.cos(O),b=f*Math.sin(O),w=E=null}}else y=b=0;if(e){S=e*Math.cos(c-C),x=e*Math.sin(c-C),T=e*Math.cos(l+C),N=e*Math.sin(l+C);var M=Math.abs(l-c+2*C)<=_u?0:1;if(C&&co(S,x,T,N)===1-p^M){var _=(l+c)/2;S=e*Math.cos(_),x=e*Math.sin(_),T=N=null}}else S=x=0;if((d=Math.min(Math.abs(f-e)/2,+i.apply(this,arguments)))>.001){v=f>e^p?0:1;var D=null==T?[S,x]:null==w?[y,b]:Dr([y,b],[T,N],[w,E],[S,x]),P=y-D[0],H=b-D[1],B=w-D[0],j=E-D[1],F=1/Math.sin(Math.acos((P*B+H*j)/(Math.sqrt(P*P+H*H)*Math.sqrt(B*B+j*j)))/2),I=Math.sqrt(D[0]*D[0]+D[1]*D[1]);if(null!=w){var q=Math.min(d,(f-I)/(F+1)),R=ho(null==T?[S,x]:[T,N],[y,b],f,q,p),U=ho([w,E],[S,x],f,q,p);d===q?L.push("M",R[0],"A",q,",",q," 0 0,",v," ",R[1],"A",f,",",f," 0 ",1-p^co(R[1][0],R[1][1],U[1][0],U[1][1]),",",p," ",U[1],"A",q,",",q," 0 0,",v," ",U[0]):L.push("M",R[0],"A",q,",",q," 0 1,",v," ",U[0])}else L.push("M",y,",",b);if(null!=T){var z=Math.min(d,(e-I)/(F-1)),W=ho([y,b],[T,N],e,-z,p),X=ho([S,x],null==w?[y,b]:[w,E],e,-z,p);d===z?L.push("L",X[0],"A",z,",",z," 0 0,",v," ",X[1],"A",e,",",e," 0 ",p^co(X[1][0],X[1][1],W[1][0],W[1][1]),",",1-p," ",W[1],"A",z,",",z," 0 0,",v," ",W[0]):L.push("L",X[0],"A",z,",",z," 0 0,",v," ",W[0])}else L.push("L",S,",",x)}else L.push("M",y,",",b),null!=w&&L.push("A",f,",",f," 0 ",A,",",p," ",w,",",E),L.push("L",S,",",x),null!=T&&L.push("A",e,",",e," 0 ",M,",",1-p," ",T,",",N);return L.push("Z"),L.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+ -e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=oo,r=uo,i=so,s=kf,o=ao,u=fo,a=lo;return e.innerRadius=function(t){return arguments.length?(n=Ct(t),e):n},e.outerRadius=function(t){return arguments.length?(r=Ct(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=Ct(t),e):i},e.padRadius=function(t){return arguments.length?(s=t==kf?kf:Ct(t),e):s},e.startAngle=function(t){return arguments.length?(o=Ct(t),e):o},e.endAngle=function(t){return arguments.length?(u=Ct(t),e):u},e.padAngle=function(t){return arguments.length?(a=Ct(t),e):a},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +u.apply(this,arguments))/2-Hu;return[Math.cos(t)*e,Math.sin(t)*e]},e};var kf="auto";nu.svg.line=function(){return po(y)};var Lf=nu.map({linear:vo,"linear-closed":mo,step:go,"step-before":yo,"step-after":bo,basis:No,"basis-open":Co,"basis-closed":ko,bundle:Lo,cardinal:So,"cardinal-open":wo,"cardinal-closed":Eo,monotone:Po});Lf.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Af=[0,2/3,1/3,0],Of=[0,1/3,2/3,0],Mf=[0,1/6,2/3,1/6];nu.svg.line.radial=function(){var e=po(Ho);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},yo.reverse=bo,bo.reverse=yo,nu.svg.area=function(){return Bo(y)},nu.svg.area.radial=function(){var e=Bo(Ho);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},nu.svg.chord=function(){function e(e,u){var a=t(this,s,e,u),f=t(this,o,e,u);return"M"+a.p0+r(a.r,a.p1,a.a1-a.a0)+(n(a,f)?i(a.r,a.p1,a.r,a.p0):i(a.r,a.p1,f.r,f.p0)+r(f.r,f.p1,f.a1-f.a0)+i(f.r,f.p1,a.r,a.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),s=u.call(e,i,r),o=a.call(e,i,r)-Hu,l=f.call(e,i,r)-Hu;return{r:s,a0:o,a1:l,p0:[s*Math.cos(o),s*Math.sin(o)],p1:[s*Math.cos(l),s*Math.sin(l)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>_u)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var s=yr,o=br,u=jo,a=ao,f=fo;return e.radius=function(t){return arguments.length?(u=Ct(t),e):u},e.source=function(t){return arguments.length?(s=Ct(t),e):s},e.target=function(t){return arguments.length?(o=Ct(t),e):o},e.startAngle=function(t){return arguments.length?(a=Ct(t),e):a},e.endAngle=function(t){return arguments.length?(f=Ct(t),e):f},e},nu.svg.diagonal=function(){function e(e,i){var s=t.call(this,e,i),o=n.call(this,e,i),u=(s.y+o.y)/2,a=[s,{x:s.x,y:u},{x:o.x,y:u},o];return a=a.map(r),"M"+a[0]+"C"+a[1]+" "+a[2]+" "+a[3]}var t=yr,n=br,r=Fo;return e.source=function(n){return arguments.length?(t=Ct(n),e):t},e.target=function(t){return arguments.length?(n=Ct(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},nu.svg.diagonal.radial=function(){var e=nu.svg.diagonal(),t=Fo,n=e.projection;return e.projection=function(e){return arguments.length?n(Io(t=e)):t},e},nu.svg.symbol=function(){function e(e,r){return(_f.get(t.call(this,e,r))||Uo)(n.call(this,e,r))}var t=Ro,n=qo;return e.type=function(n){return arguments.length?(t=Ct(n),e):t},e.size=function(t){return arguments.length?(n=Ct(t),e):n},e};var _f=nu.map({circle:Uo,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+ -3*t+","+ -t+"H"+ -t+"V"+ -3*t+"H"+t+"V"+ -t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+ -t+"V"+t+"H"+ -3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Pf)),n=t*Pf;return"M0,"+ -t+"L"+n+",0 0,"+t+" "+ -n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+ -t+","+ -t+"L"+t+","+ -t+" "+t+","+t+" "+ -t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Df),n=t*Df/2;return"M0,"+n+"L"+t+","+ -n+" "+ -t+","+ -n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Df),n=t*Df/2;return"M0,"+ -n+"L"+t+","+n+" "+ -t+","+n+"Z"}});nu.svg.symbolTypes=_f.keys();var Df=Math.sqrt(3),Pf=Math.tan(30*Bu);xu.transition=function(e){for(var t,n,r=Hf||++If,i=$o(e),s=[],o=Bf||{time:Date.now(),ease:Ni,delay:0,duration:250},u=-1,a=this.length;++u<a;){s.push(t=[]);for(var f=this[u],l=-1,c=f.length;++l<c;)(n=f[l])&&Jo(n,l,i,r,o),t.push(n)}return Wo(s,i,r)},xu.interrupt=function(e){return this.each(null==e?jf:zo($o(e)))};var Hf,Bf,jf=zo($o()),Ff=[],If=0;Ff.call=xu.call,Ff.empty=xu.empty,Ff.node=xu.node,Ff.size=xu.size,nu.transition=function(e,t){return e&&e.transition?Hf?e.transition(t):e:nu.selection().transition(e)},nu.transition.prototype=Ff,Ff.select=function(e){var t,n,r,i=this.id,s=this.namespace,o=[];e=L(e);for(var u=-1,a=this.length;++u<a;){o.push(t=[]);for(var f=this[u],l=-1,c=f.length;++l<c;)(r=f[l])&&(n=e.call(r,r.__data__,l,u))?("__data__"in r&&(n.__data__=r.__data__),Jo(n,l,s,i,r[s][i]),t.push(n)):t.push(null)}return Wo(o,s,i)},Ff.selectAll=function(e){var t,n,r,i,s,o=this.id,u=this.namespace,a=[];e=A(e);for(var f=-1,l=this.length;++f<l;)for(var c=this[f],h=-1,p=c.length;++h<p;)if(r=c[h]){s=r[u][o],n=e.call(r,r.__data__,h,f),a.push(t=[]);for(var d=-1,v=n.length;++d<v;)(i=n[d])&&Jo(i,d,u,o,s),t.push(i)}return Wo(a,u,o)},Ff.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=R(e));for(var s=0,o=this.length;o>s;s++){i.push(t=[]);for(var n=this[s],u=0,a=n.length;a>u;u++)(r=n[u])&&e.call(r,r.__data__,u,s)&&t.push(r)}return Wo(i,this.namespace,this.id)},Ff.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):z(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Ff.attr=function(e,t){function n(){this.removeAttribute(u)}function r(){this.removeAttributeNS(u.space,u.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(u);return n!==e&&(t=o(n,e),function(e){this.setAttribute(u,t(e))})})}function s(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(u.space,u.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(u.space,u.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?Ri:yi,u=nu.ns.qualify(e);return Xo(this,"attr."+e,t,u.local?s:i)},Ff.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=nu.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Ff.style=function(e,n,r){function i(){this.style.removeProperty(e)}function s(n){return null==n?i:(n+="",function(){var i,s=t(this).getComputedStyle(this,null).getPropertyValue(e);return s!==n&&(i=yi(s,n),function(t){this.style.setProperty(e,i(t),r)})})}var o=arguments.length;if(3>o){if("string"!=typeof e){2>o&&(n="");for(r in e)this.style(r,e[r],n);return this}r=""}return Xo(this,"style."+e,n,s)},Ff.styleTween=function(e,n,r){function i(i,s){var o=n.call(this,i,s,t(this).getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+e,i)},Ff.text=function(e){return Xo(this,"text",e,Vo)},Ff.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Ff.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=nu.ease.apply(nu,arguments)),z(this,function(r){r[n][t].ease=e}))},Ff.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:z(this,"function"==typeof e?function(r,i,s){r[n][t].delay=+e.call(r,r.__data__,i,s)}:(e=+e,function(r){r[n][t].delay=e}))},Ff.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:z(this,"function"==typeof e?function(r,i,s){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,s))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Ff.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Bf,s=Hf;try{Hf=n,z(this,function(t,i,s){Bf=t[r][n],e.call(t,t.__data__,i,s)})}finally{Bf=i,Hf=s}}else z(this,function(i){var s=i[r][n];(s.event||(s.event=nu.dispatch("start","end","interrupt"))).on(e,t)});return this},Ff.transition=function(){for(var e,t,n,r,i=this.id,s=++If,o=this.namespace,u=[],a=0,f=this.length;f>a;a++){u.push(e=[]);for(var t=this[a],l=0,c=t.length;c>l;l++)(n=t[l])&&(r=n[o][i],Jo(n,l,o,s,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return Wo(u,o,s)},nu.svg.axis=function(){function e(e){e.each(function(){var e,f=nu.select(this),l=this.__chart__||n,c=this.__chart__=n.copy(),h=null==a?c.ticks?c.ticks.apply(c,u):c.domain():a,p=null==t?c.tickFormat?c.tickFormat.apply(c,u):y:t,d=f.selectAll(".tick").data(h,c),v=d.enter().insert("g",".domain").attr("class","tick").style("opacity",Ou),m=nu.transition(d.exit()).style("opacity",Ou).remove(),g=nu.transition(d.order()).style("opacity",1),b=Math.max(i,0)+o,w=Fs(c),E=f.selectAll(".domain").data([0]),S=(E.enter().append("path").attr("class","domain"),nu.transition(E));v.append("line"),v.append("text");var x,T,N,C,k=v.select("line"),L=g.select("line"),A=d.select("text").text(p),O=v.select("text"),M=g.select("text"),_="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=Ko,x="x",N="y",T="x2",C="y2",A.attr("dy",0>_?"0em":".71em").style("text-anchor","middle"),S.attr("d","M"+w[0]+","+_*s+"V0H"+w[1]+"V"+_*s)):(e=Qo,x="y",N="x",T="y2",C="x2",A.attr("dy",".32em").style("text-anchor",0>_?"end":"start"),S.attr("d","M"+_*s+","+w[0]+"H0V"+w[1]+"H"+_*s)),k.attr(C,_*i),O.attr(N,_*b),L.attr(T,0).attr(C,_*i),M.attr(x,0).attr(N,_*b),c.rangeBand){var D=c,P=D.rangeBand()/2;l=c=function(e){return D(e)+P}}else l.rangeBand?l=c:m.call(e,c,l);v.call(e,l,c),g.call(e,c,c)})}var t,n=nu.scale.linear(),r=qf,i=6,s=6,o=3,u=[10],a=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Rf?t+"":qf,e):r},e.ticks=function(){return arguments.length?(u=arguments,e):u},e.tickValues=function(t){return arguments.length?(a=t,e):a},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,s=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(s=+t,e):s},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var qf="bottom",Rf={top:1,right:1,bottom:1,left:1};nu.svg.brush=function(){function e(t){t.each(function(){var t=nu.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",s).on("touchstart.brush",s),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var u=t.selectAll(".resize").data(v,y);u.exit().remove(),u.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Uf[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),u.style("display",e.empty()?"none":null);var a,c=nu.transition(t),h=nu.transition(o);f&&(a=Fs(f),h.attr("x",a[0]).attr("width",a[1]-a[0]),r(c)),l&&(a=Fs(l),h.attr("y",a[0]).attr("height",a[1]-a[0]),i(c)),n(c)})}function n(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+c[+/e$/.test(e)]+","+h[+/^s/.test(e)]+")"})}function r(e){e.select(".extent").attr("x",c[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",c[1]-c[0])}function i(e){e.select(".extent").attr("y",h[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",h[1]-h[0])}function s(){function s(){32==nu.event.keyCode&&(A||(b=null,M[0]-=c[1],M[1]-=h[1],A=2),T())}function v(){32==nu.event.keyCode&&2==A&&(M[0]+=c[1],M[1]+=h[1],A=0,T())}function m(){var e=nu.mouse(E),t=!1;w&&(e[0]+=w[0],e[1]+=w[1]),A||(nu.event.altKey?(b||(b=[(c[0]+c[1])/2,(h[0]+h[1])/2]),M[0]=c[+(e[0]<b[0])],M[1]=h[+(e[1]<b[1])]):b=null),k&&g(e,f,0)&&(r(N),t=!0),L&&g(e,l,1)&&(i(N),t=!0),t&&(n(N),x({type:"brush",mode:A?"move":"resize"}))}function g(e,t,n){var r,i,s=Fs(t),a=s[0],f=s[1],l=M[n],v=n?h:c,m=v[1]-v[0];return A&&(a-=l,f-=m+l),r=(n?d:p)?Math.max(a,Math.min(f,e[n])):e[n],A?i=(r+=l)+m:(b&&(l=Math.max(a,Math.min(f,2*b[n]-r))),r>l?(i=r,r=l):i=l),v[0]!=r||v[1]!=i?(n?u=null:o=null,v[0]=r,v[1]=i,!0):void 0}function y(){m(),N.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),nu.select("body").style("cursor",null),_.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),O(),x({type:"brushend"})}var b,w,E=this,S=nu.select(nu.event.target),x=a.of(E,arguments),N=nu.select(E),C=S.datum(),k=!/^(n|s)$/.test(C)&&f,L=!/^(e|w)$/.test(C)&&l,A=S.classed("extent"),O=K(E),M=nu.mouse(E),_=nu.select(t(E)).on("keydown.brush",s).on("keyup.brush",v);if(nu.event.changedTouches?_.on("touchmove.brush",m).on("touchend.brush",y):_.on("mousemove.brush",m).on("mouseup.brush",y),N.interrupt().selectAll("*").interrupt(),A)M[0]=c[0]-M[0],M[1]=h[0]-M[1];else if(C){var D=+/w$/.test(C),P=+/^n/.test(C);w=[c[1-D]-M[0],h[1-P]-M[1]],M[0]=c[D],M[1]=h[P]}else nu.event.altKey&&(b=M.slice());N.style("pointer-events","none").selectAll(".resize").style("display",null),nu.select("body").style("cursor",S.style("cursor")),x({type:"brushstart"}),m()}var o,u,a=C(e,"brushstart","brush","brushend"),f=null,l=null,c=[0,0],h=[0,0],p=!0,d=!0,v=zf[0];return e.event=function(e){e.each(function(){var e=a.of(this,arguments),t={x:c,y:h,i:o,j:u},n=this.__chart__||t;this.__chart__=t,Hf?nu.select(this).transition().each("start.brush",function(){o=n.i,u=n.j,c=n.x,h=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=bi(c,t.x),r=bi(h,t.y);return o=u=null,function(i){c=t.x=n(i),h=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,u=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(f=t,v=zf[!f<<1|!l],e):f},e.y=function(t){return arguments.length?(l=t,v=zf[!f<<1|!l],e):l},e.clamp=function(t){return arguments.length?(f&&l?(p=!!t[0],d=!!t[1]):f?p=!!t:l&&(d=!!t),e):f&&l?[p,d]:f?p:l?d:null},e.extent=function(t){var n,r,i,s,a;return arguments.length?(f&&(n=t[0],r=t[1],l&&(n=n[0],r=r[0]),o=[n,r],f.invert&&(n=f(n),r=f(r)),n>r&&(a=n,n=r,r=a),(n!=c[0]||r!=c[1])&&(c=[n,r])),l&&(i=t[0],s=t[1],f&&(i=i[1],s=s[1]),u=[i,s],l.invert&&(i=l(i),s=l(s)),i>s&&(a=i,i=s,s=a),(i!=h[0]||s!=h[1])&&(h=[i,s])),e):(f&&(o?(n=o[0],r=o[1]):(n=c[0],r=c[1],f.invert&&(n=f.invert(n),r=f.invert(r)),n>r&&(a=n,n=r,r=a))),l&&(u?(i=u[0],s=u[1]):(i=h[0],s=h[1],l.invert&&(i=l.invert(i),s=l.invert(s)),i>s&&(a=i,i=s,s=a))),f&&l?[[n,i],[r,s]]:f?[n,r]:l&&[i,s])},e.clear=function(){return e.empty()||(c=[0,0],h=[0,0],o=u=null),e},e.empty=function(){return!!f&&c[0]==c[1]||!!l&&h[0]==h[1]},nu.rebind(e,a,"on")};var Uf={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},zf=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Wf=aa.format=da.timeFormat,Xf=Wf.utc,Vf=Xf("%Y-%m-%dT%H:%M:%S.%LZ");Wf.iso=Date.prototype.toISOString&&+(new Date("2000-01-01T00:00:00.000Z"))?Go:Vf,Go.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},Go.toString=Vf.toString,aa.second=It(function(e){return new fa(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),aa.seconds=aa.second.range,aa.seconds.utc=aa.second.utc.range,aa.minute=It(function(e){return new fa(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),aa.minutes=aa.minute.range,aa.minutes.utc=aa.minute.utc.range,aa.hour=It(function(e){var t=e.getTimezoneOffset()/60;return new fa(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),aa.hours=aa.hour.range,aa.hours.utc=aa.hour.utc.range,aa.month=It(function(e){return e=aa.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),aa.months=aa.month.range,aa.months.utc=aa.month.utc.range;var $f=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Jf=[[aa.second,1],[aa.second,5],[aa.second,15],[aa.second,30],[aa.minute,1],[aa.minute,5],[aa.minute,15],[aa.minute,30],[aa.hour,1],[aa.hour,3],[aa.hour,6],[aa.hour,12],[aa.day,1],[aa.day,2],[aa.week,1],[aa.month,1],[aa.month,3],[aa.year,1]],Kf=Wf.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",An]]),Qf={range:function(e,t,n){return nu.range(Math.ceil(e/n)*n,+t,n).map(Zo)},floor:y,ceil:y};Jf.year=aa.year,aa.scale=function(){return Yo(nu.scale.linear(),Jf,Kf)};var Gf=Jf.map(function(e){return[e[0].utc,e[1]]}),Yf=Xf.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",An]]);Gf.year=aa.year.utc,aa.scale.utc=function(){return Yo(nu.scale.linear(),Gf,Yf)},nu.text=kt(function(e){return e.responseText}),nu.json=function(e,t){return Lt(e,"application/json",eu,t)},nu.html=function(e,t){return Lt(e,"text/html",tu,t)},nu.xml=kt(function(e){return e.responseXML}),"function"==typeof define&&define.amd?define("d3",nu):"object"==typeof module&&module.exports&&(module.exports=nu),this.d3=nu}(),function(){var e=window.nv||{};window.nv=e,e.dev=!1,e.tooltip=e.tooltip||{},e.utils=e.utils||{},e.models=e.models||{},e.charts={},e.graphs=[],e.logs={},e.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(e){if(typeof this!="function")throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),e.dev&&(e.dispatch.on("render_start",function(t){e.logs.startTime=+(new Date)}),e.dispatch.on("render_end",function(t){e.logs.endTime=+(new Date),e.logs.totalTime=e.logs.endTime-e.logs.startTime,e.log("total",e.logs.totalTime)})),e.log=function(){if(e.dev&&window.console&&console.log&&console.log.apply)console.log.apply(console,arguments);else if(e.dev&&window.console&&typeof console.log=="function"&&Function.prototype.bind){var t=Function.prototype.bind.call(console.log,console);t.apply(console,arguments)}return arguments[arguments.length-1]},e.deprecated=function(t){e.dev&&console&&console.warn&&console.warn("`"+t+"` has been deprecated.")},e.render=function(n){n=n||1,e.render.active=!0,e.dispatch.render_start(),setTimeout(function(){var t,r;for(var i=0;i<n&&(r=e.render.queue[i]);i++)t=r.generate(),typeof r.callback==typeof Function&&r.callback(t),e.graphs.push(t);e.render.queue.splice(0,i),e.render.queue.length?setTimeout(arguments.callee,0):(e.dispatch.render_end(),e.render.active=!1)},0)},e.render.active=!1,e.render.queue=[],e.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),e.render.queue.push(t),e.render.active||e.render()},e.interactiveGuideline=function(){"use strict";function h(o){o.each(function(o){function y(){var e=d3.mouse(this),n=e[0],r=e[1],o=!0,a=!1;l&&!c&&(n=d3.event.offsetX,r=d3.event.offsetY,d3.event.target.tagName!=="svg"&&(o=!1),d3.event.target.className.baseVal.match("nv-legend")&&(a=!0)),o&&(n-=i.left,r-=i.top);if(n<0||r<0||n>d||r>v||d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined||a){if(l&&d3.event.relatedTarget&&d3.event.relatedTarget.ownerSVGElement===undefined&&d3.event.relatedTarget.className.match(t.nvPointerEventsClass))return;u.elementMouseout({mouseX:n,mouseY:r}),h.renderGuideLine(null);return}var f=s.invert(n);u.elementMousemove({mouseX:n,mouseY:r,pointXValue:f}),d3.event.type==="dblclick"&&u.elementDblclick({mouseX:n,mouseY:r,pointXValue:f}),d3.event.type==="click"&&u.elementClick({mouseX:n,mouseY:r,pointXValue:f})}var p=d3.select(this),d=n||960,v=r||400,m=p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([o]),g=m.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer");g.append("g").attr("class","nv-interactiveGuideLine");if(!f)return;f.on("mousemove",y,!0).on("mouseout",y,!0).on("dblclick",y).on("click",y),h.renderGuideLine=function(t){if(!a)return;var n=m.select(".nv-interactiveGuideLine").selectAll("line").data(t!=null?[e.utils.NaNtoZero(t)]:[],String);n.enter().append("line").attr("class","nv-guideline").attr("x1",function(e){return e}).attr("x2",function(e){return e}).attr("y1",v).attr("y2",0),n.exit().remove()}})}var t=e.models.tooltip(),n=null,r=null,i={left:0,top:0},s=d3.scale.linear(),o=d3.scale.linear(),u=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick"),a=!0,f=null,l="ActiveXObject"in window,c=!!window.navigator.userAgent.match(/Trident/)&&!window.navigator.userAgent.match(/MSIE/);return h.dispatch=u,h.tooltip=t,h.margin=function(e){return arguments.length?(i.top=typeof e.top!="undefined"?e.top:i.top,i.left=typeof e.left!="undefined"?e.left:i.left,h):i},h.width=function(e){return arguments.length?(n=e,h):n},h.height=function(e){return arguments.length?(r=e,h):r},h.xScale=function(e){return arguments.length?(s=e,h):s},h.showGuideLine=function(e){return arguments.length?(a=e,h):a},h.svgContainer=function(e){return arguments.length?(f=e,h):f},h},e.interactiveBisect=function(e,t,n){"use strict";if(e instanceof Array){typeof n!="function"&&(n=function(e,t){return e.x});var r=d3.bisector(n).left,i=d3.max([0,r(e,t)-1]),s=n(e[i],i);typeof s=="undefined"&&(s=i);if(s===t)return i;var o=d3.min([i+1,e.length-1]),u=n(e[o],o);return typeof u=="undefined"&&(u=o),Math.abs(u-t)>=Math.abs(s-t)?i:o}return null},e.nearestValueIndex=function(e,t,n){"use strict";var r=Infinity,i=null;return e.forEach(function(e,s){var o=Math.abs(t-e);o<=r&&o<n&&(r=o,i=s)}),i},function(){"use strict";window.nv.tooltip={},window.nv.models.tooltip=function(){function y(){if(a){var e=d3.select(a);e.node().tagName!=="svg"&&(e=e.select("svg"));var t=e.node()?e.attr("viewBox"):null;if(t){t=t.split(" ");var n=parseInt(e.style("width"))/t[2];l.left=l.left*n,l.top=l.top*n}}}function b(e){var t;a?t=d3.select(a):t=d3.select("body");var n=t.select(".nvtooltip");return n.node()===null&&(n=t.append("div").attr("class","nvtooltip "+(u?u:"xy-tooltip")).attr("id",h)),n.node().innerHTML=e,n.style("top",0).style("left",0).style("opacity",0),n.selectAll("div, table, td, tr").classed(p,!0),n.classed(p,!0),n.node()}function w(){if(!c)return;if(!g(n))return;y();var t=l.left,u=o!=null?o:l.top,h=b(m(n));f=h;if(a){var p=a.getElementsByTagName("svg")[0],d=p?p.getBoundingClientRect():a.getBoundingClientRect(),v={left:0,top:0};if(p){var E=p.getBoundingClientRect(),S=a.getBoundingClientRect(),x=E.top;if(x<0){var T=a.getBoundingClientRect();x=Math.abs(x)>T.height?0:x}v.top=Math.abs(x-S.top),v.left=Math.abs(E.left-S.left)}t+=a.offsetLeft+v.left-2*a.scrollLeft,u+=a.offsetTop+v.top-2*a.scrollTop}return s&&s>0&&(u=Math.floor(u/s)*s),e.tooltip.calcTooltipPosition([t,u],r,i,h,a),w}var t=null,n=null,r="w",i=20,s=25,o=null,u=null,a=null,f=null,l={left:null,top:null},c=!0,h="nvtooltip-"+Math.floor(Math.random()*1e5),p="nv-pointer-events-none",d=function(e,t){return e},v=function(e){return e},m=function(e){if(t!=null)return t;if(e==null)return"";var n=d3.select(document.createElement("table")),r=n.selectAll("thead").data([e]).enter().append("thead");r.append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(v(e.value));var i=n.selectAll("tbody").data([e]).enter().append("tbody"),s=i.selectAll("tr").data(function(e){return e.series}).enter().append("tr").classed("highlight",function(e){return e.highlight});s.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(e){return e.color}),s.append("td").classed("key",!0).html(function(e){return e.key}),s.append("td").classed("value",!0).html(function(e,t){return d(e.value,t)}),s.selectAll("td").each(function(e){if(e.highlight){var t=d3.scale.linear().domain([0,1]).range(["#fff",e.color]),n=.6;d3.select(this).style("border-bottom-color",t(n)).style("border-top-color",t(n))}});var o=n.node().outerHTML;return e.footer!==undefined&&(o+="<div class='footer'>"+e.footer+"</div>"),o},g=function(e){return e&&e.series&&e.series.length>0?!0:!1};return w.nvPointerEventsClass=p,w.content=function(e){return arguments.length?(t=e,w):t},w.tooltipElem=function(){return f},w.contentGenerator=function(e){return arguments.length?(typeof e=="function"&&(m=e),w):m},w.data=function(e){return arguments.length?(n=e,w):n},w.gravity=function(e){return arguments.length?(r=e,w):r},w.distance=function(e){return arguments.length?(i=e,w):i},w.snapDistance=function(e){return arguments.length?(s=e,w):s},w.classes=function(e){return arguments.length?(u=e,w):u},w.chartContainer=function(e){return arguments.length?(a=e,w):a},w.position=function(e){return arguments.length?(l.left=typeof e.left!="undefined"?e.left:l.left,l.top=typeof e.top!="undefined"?e.top:l.top,w):l},w.fixedTop=function(e){return arguments.length?(o=e,w):o},w.enabled=function(e){return arguments.length?(c=e,w):c},w.valueFormatter=function(e){return arguments.length?(typeof e=="function"&&(d=e),w):d},w.headerFormatter=function(e){return arguments.length?(typeof e=="function"&&(v=e),w):v},w.id=function(){return h},w},e.tooltip.show=function(t,n,r,i,s,o){var u=document.createElement("div");u.className="nvtooltip "+(o?o:"xy-tooltip");var a=s;if(!s||s.tagName.match(/g|svg/i))a=document.getElementsByTagName("body")[0];u.style.left=0,u.style.top=0,u.style.opacity=0,typeof n!="string"?u.appendChild(n):u.innerHTML=n,a.appendChild(u),s&&(t[0]=t[0]-s.scrollLeft,t[1]=t[1]-s.scrollTop),e.tooltip.calcTooltipPosition(t,r,i,u,s)},e.tooltip.findFirstNonSVGParent=function(e){while(e.tagName.match(/^g|svg$/i)!==null)e=e.parentNode;return e},e.tooltip.findTotalOffsetTop=function(e,t){var n=t;do isNaN(e.offsetTop)||(n+=e.offsetTop);while(e=e.offsetParent);return n},e.tooltip.findTotalOffsetLeft=function(e,t){var n=t;do isNaN(e.offsetLeft)||(n+=e.offsetLeft);while(e=e.offsetParent);return n},e.tooltip.calcTooltipPosition=function(t,n,r,i,s){var o=parseInt(i.offsetHeight),u=parseInt(i.offsetWidth),a=e.utils.windowSize().width,f=e.utils.windowSize().height,l=window.pageYOffset,c=window.pageXOffset,h,p;f=window.innerWidth>=document.body.scrollWidth?f:f-16,a=window.innerHeight>=document.body.scrollHeight?a:a-16,n=n||"s",r=r||20;var d=function(t){return e.tooltip.findTotalOffsetTop(t)},v=function(t){return e.tooltip.findTotalOffsetLeft(t,h)};switch(n){case"e":h=t[0]-u-r,p=t[1]-o/2;var m=v(i),g=d(i);m<c&&(h=t[0]+r>c?t[0]+r:c-m+h),g<l&&(p=l-g+p),g+o>l+f&&(p=l+f-g+p-o);break;case"w":h=t[0]+r,p=t[1]-o/2;var m=v(i),g=d(i);m+u>a&&(h=t[0]-u-r),g<l&&(p=l+5),g+o>l+f&&(p=l+f-g+p-o);break;case"n":h=t[0]-u/2-5,p=t[1]+r;var m=v(i),g=d(i);m<c&&(h=c+5),m+u>a&&(h=h-u/2+5),g+o>l+f&&(p=l+f-g+p-o);break;case"s":h=t[0]-u/2,p=t[1]-o-r;var m=v(i),g=d(i);m<c&&(h=c+5),m+u>a&&(h=h-u/2+5),l>g&&(p=l-$(s).offset().top);break;case"none":h=t[0],p=t[1]-r;var m=v(i),g=d(i)}return s&&h+u>s.offsetWidth&&(h=s.offsetWidth-u-1),s&&p+o>s.offsetHeight&&(p=s.offsetHeight-o-1),h<0&&(h=0),p<0&&(p=0),i.style.left=h+"px",i.style.top=p+"px",i.style.opacity=1,i.style.position="absolute",i},e.tooltip.cleanup=function(){var e=document.getElementsByClassName("nvtooltip"),t=[];while(e.length)t.push(e[0]),e[0].style.transitionDelay="0 !important",e[0].style.opacity=0,e[0].className="nvtooltip-pending-removal";setTimeout(function(){while(t.length){var e=t.pop();e.parentNode.removeChild(e)}},500)}}(),e.utils.windowSize=function(){var e={width:640,height:480};return document.body&&document.body.offsetWidth&&(e.width=document.body.offsetWidth,e.height=document.body.offsetHeight),document.compatMode=="CSS1Compat"&&document.documentElement&&document.documentElement.offsetWidth&&(e.width=document.documentElement.offsetWidth,e.height=document.documentElement.offsetHeight),window.innerWidth&&window.innerHeight&&(e.width=window.innerWidth,e.height=window.innerHeight),e},e.utils.windowResize=function(t){return window.addEventListener?window.addEventListener("resize",t):e.log("ERROR: Failed to bind to window.resize with: ",t),{callback:t,clear:function(){window.removeEventListener("resize",t)}}},e.utils.getColor=function(t){return arguments.length?t instanceof Array?function(e,n){return e.color||t[n%t.length]}:t:e.utils.defaultColor()},e.utils.defaultColor=function(){var e=d3.scale.category20().range();return function(t,n){return t.color||e[n%e.length]}},e.utils.customTheme=function(e,t,n){t=t||function(e){return e.key},n=n||d3.scale.category20().range();var r=n.length;return function(i,s){var o=t(i);return typeof e[o]=="function"?e[o]():e[o]!==undefined?e[o]:(r||(r=n.length),r-=1,n[r])}},e.utils.pjax=function(t,n){var r=function(r){d3.html(r,function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),e.utils.pjax(t,n)})};d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},e.utils.calcApproxTextWidth=function(e){if(typeof e.style=="function"&&typeof e.text=="function"){var t=parseInt(e.style("font-size").replace("px","")),n=e.text().length;return n*t*.5}return 0},e.utils.NaNtoZero=function(e){return typeof e!="number"||isNaN(e)||e===null||e===Infinity||e===-Infinity?0:e},e.utils.sanitizeHeight=function(e,t){return e||parseInt(t.style("height"),10)||400},e.utils.sanitizeWidth=function(e,t){return e||parseInt(t.style("width"),10)||960},e.utils.availableHeight=function(t,n,r){return Math.max(0,e.utils.sanitizeHeight(t,n)-r.top-r.bottom)},e.utils.availableWidth=function(t,n,r){return Math.max(0,e.utils.sanitizeWidth(t,n)-r.left-r.right)},d3.selection.prototype.watchTransition=function(e){var t=[this].concat([].slice.call(arguments,1));return e.transition.apply(e,t)},e.utils.renderWatch=function(t,n){if(!(this instanceof e.utils.renderWatch))return new e.utils.renderWatch(t,n);var r=n!==undefined?n:250,i=[],s=this;this.models=function(e){return e=[].slice.call(arguments,0),e.forEach(function(e){e.__rendered=!1,function(e){e.dispatch.on("renderEnd",function(t){e.__rendered=!0,s.renderEnd("model")})}(e),i.indexOf(e)<0&&i.push(e)}),this},this.reset=function(e){e!==undefined&&(r=e),i=[]},this.transition=function(e,t,n){t=arguments.length>1?[].slice.call(arguments,1):[],t.length>1?n=t.pop():n=r!==undefined?r:250,e.__rendered=!1,i.indexOf(e)<0&&i.push(e);if(n===0)return e.__rendered=!0,e.delay=function(){return this},e.duration=function(){return this},e;e.length===0?e.__rendered=!0:e.every(function(e){return!e.length})?e.__rendered=!0:e.__rendered=!1;var o=0;return e.transition().duration(n).each(function(){++o}).each("end",function(n,r){--o===0&&(e.__rendered=!0,s.renderEnd.apply(this,t))})},this.renderEnd=function(){i.every(function(e){return e.__rendered})&&(i.forEach(function(e){e.__rendered=!1}),t.renderEnd.apply(this,arguments))}},e.utils.deepExtend=function(t){var n=arguments.length>1?[].slice.call(arguments,1):[];n.forEach(function(n){for(key in n){var r=t[key]instanceof Array,i=typeof t[key]=="object",s=typeof n[key]=="object";i&&!r&&s?e.utils.deepExtend(t[key],n[key]):t[key]=n[key]}})},e.utils.state=function(){if(!(this instanceof e.utils.state))return new e.utils.state;var t={},n=this,r=function(){},i=function(){return{}},s=null,o=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(e){r(e,!0)}),this.getter=function(e){return i=e,this},this.setter=function(e,t){return t||(t=function(){}),r=function(n,r){e(n),r&&t()},this},this.init=function(t){s=s||{},e.utils.deepExtend(s,t)};var u=function(){var e=i();if(JSON.stringify(e)===JSON.stringify(t))return!1;for(var n in e)t[n]===undefined&&(t[n]={}),t[n]=e[n],o=!0;return!0};this.update=function(){s&&(r(s,!1),s=null),u.call(this)&&this.dispatch.change(t)}},e.utils.optionsFunc=function(t){return e.deprecated("nv.utils.optionsFunc"),t&&d3.map(t).forEach(function(e,t){typeof this[e]=="function"&&this[e](t)}.bind(this)),this},e.utils.calcTicksX=function(t,n){var r=1,i=0;for(i;i<n.length;i+=1){var s=n[i]&&n[i].values?n[i].values.length:0;r=s>r?s:r}return e.log("Requested number of ticks: ",t),e.log("Calculated max values to be: ",r),t=t>r?t=r-1:t,t=t<1?1:t,t=Math.floor(t),e.log("Calculating tick count as: ",t),t},e.utils.calcTicksY=function(t,n){return e.utils.calcTicksX(t,n)},e.utils.initOption=function(e,t){e._calls&&e._calls[t]?e[t]=e._calls[t]:e[t]=function(n){return arguments.length?(e._options[t]=n,e):e._options[t]}},e.utils.initOptions=function(t){var n=Object.getOwnPropertyNames(t._options||{}),r=Object.getOwnPropertyNames(t._calls||{});n=n.concat(r);for(var i in n)e.utils.initOption(t,n[i])},e.utils.inheritOptionsD3=function(e,t,n){e._d3options=n.concat(e._d3options||[]),n.unshift(t),n.unshift(e),d3.rebind.apply(this,n)},e.utils.arrayUnique=function(e){return e.sort().filter(function(t,n){return!n||t!=e[n-1]})},e.utils.symbolMap=d3.map(),e.utils.symbol=function(){function r(r,i){var s=t.call(this,r,i),o=n.call(this,r,i);return d3.svg.symbolTypes.indexOf(s)!==-1?d3.svg.symbol().type(s).size(o)():e.utils.symbolMap.get(s)(o)}var t,n=64;return r.type=function(e){return arguments.length?(t=d3.functor(e),r):t},r.size=function(e){return arguments.length?(n=d3.functor(e),r):n},r},e.utils.inheritOptions=function(t,n){var r=Object.getOwnPropertyNames(n._options||{}),i=Object.getOwnPropertyNames(n._calls||{}),s=n._inherited||[],o=n._d3options||[],u=r.concat(i).concat(s).concat(o);u.unshift(n),u.unshift(t),d3.rebind.apply(this,u),t._inherited=e.utils.arrayUnique(r.concat(i).concat(s).concat(r).concat(t._inherited||[])),t._d3options=e.utils.arrayUnique(o.concat(t._d3options||[]))},e.utils.initSVG=function(e){e.classed({"nvd3-svg":!0})},e.models.axis=function(){"use strict";function E(s){return w.reset(),s.each(function(s){var v=d3.select(this);e.utils.initSVG(v);var m=v.selectAll("g.nv-wrap.nv-axis").data([s]),g=m.enter().append("g").attr("class","nvd3 nv-wrap nv-axis"),y=g.append("g"),S=m.select("g");p!==null?t.ticks(p):(t.orient()=="top"||t.orient()=="bottom")&&t.ticks(Math.abs(n.range()[1]-n.range()[0])/100),S.watchTransition(w,"axis").call(t),b=b||t.scale();var x=t.tickFormat();x==null&&(x=b.tickFormat());var T=S.selectAll("text.nv-axislabel").data([o||null]);T.exit().remove();switch(t.orient()){case"top":T.enter().append("text").attr("class","nv-axislabel");var N;n.range().length<2?N=0:n.range().length===2?N=n.range()[1]:N=n.range()[n.range().length-1]+(n.range()[1]-n.range()[0]),T.attr("text-anchor","middle").attr("y",0).attr("x",N/2);if(u){var C=m.selectAll("g.nv-axisMaxMin").data(n.domain());C.enter().append("g").attr("class","nv-axisMaxMin").append("text"),C.exit().remove(),C.attr("transform",function(t,r){return"translate("+e.utils.NaNtoZero(n(t))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-t.tickPadding()).attr("text-anchor","middle").text(function(e,t){var n=x(e);return(""+n).match("NaN")?"":n}),C.watchTransition(w,"min-max top").attr("transform",function(t,r){return"translate("+e.utils.NaNtoZero(n.range()[r])+",0)"})}break;case"bottom":var k=d+36,L=30,A=S.selectAll("g").select("text");if(f%360){A.each(function(e,t){var n=this.getBoundingClientRect().width;n>L&&(L=n)});var O=Math.abs(Math.sin(f*Math.PI/180)),k=(O?O*L:L)+30;A.attr("transform",function(e,t,n){return"rotate("+f+" 0,0)"}).style("text-anchor",f%360>0?"start":"end")}T.enter().append("text").attr("class","nv-axislabel");var N;n.range().length<2?N=2*n.range()[0]+E.rangeBand():n.range().length===2?N=n.range()[0]==0?n.range()[1]:n.range()[n.range().length-1]+(n.range()[1]-n.range()[0]):N=n.range()[n.range().length-1]+(n.range()[1]-n.range()[0]),T.attr("text-anchor","middle").attr("y",k).attr("x",N/2);if(u){var C=m.selectAll("g.nv-axisMaxMin").data([n.domain()[0],n.domain()[n.domain().length-1]]);C.enter().append("g").attr("class","nv-axisMaxMin").append("text"),C.exit().remove(),C.attr("transform",function(t,r){return"translate("+e.utils.NaNtoZero(n(t)+(h?n.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",t.tickPadding()).attr("transform",function(e,t,n){return"rotate("+f+" 0,0)"}).style("text-anchor",f?f%360>0?"start":"end":"middle").text(function(e,t){var n=x(e);return(""+n).match("NaN")?"":n}),C.watchTransition(w,"min-max bottom").attr("transform",function(t,r){return"translate("+e.utils.NaNtoZero(n(t)+(h?n.rangeBand()/2:0))+",0)"})}c&&A.attr("transform",function(e,t){return"translate(0,"+(t%2==0?"0":"12")+")"});break;case"right":T.enter().append("text").attr("class","nv-axislabel"),T.style("text-anchor",l?"middle":"begin").attr("transform",l?"rotate(90)":"").attr("y",l?-Math.max(r.right,i)+12:-10).attr("x",l?n.range()[0]/2:t.tickPadding());if(u){var C=m.selectAll("g.nv-axisMaxMin").data(n.domain());C.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),C.exit().remove(),C.attr("transform",function(t,r){return"translate(0,"+e.utils.NaNtoZero(n(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",t.tickPadding()).style("text-anchor","start").text(function(e,t){var n=x(e);return(""+n).match("NaN")?"":n}),C.watchTransition(w,"min-max right").attr("transform",function(t,r){return"translate(0,"+e.utils.NaNtoZero(n.range()[r])+")"}).select("text").style("opacity",1)}break;case"left":T.enter().append("text").attr("class","nv-axislabel"),T.style("text-anchor",l?"middle":"end").attr("transform",l?"rotate(-90)":"").attr("y",l?-Math.max(r.left,i)+25-(d||0):-10).attr("x",l?-n.range()[0]/2:-t.tickPadding());if(u){var C=m.selectAll("g.nv-axisMaxMin").data(n.domain());C.enter().append("g").attr("class","nv-axisMaxMin").append("text").style("opacity",0),C.exit().remove(),C.attr("transform",function(t,n){return"translate(0,"+e.utils.NaNtoZero(b(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-t.tickPadding()).attr("text-anchor","end").text(function(e,t){var n=x(e);return(""+n).match("NaN")?"":n}),C.watchTransition(w,"min-max right").attr("transform",function(t,r){return"translate(0,"+e.utils.NaNtoZero(n.range()[r])+")"}).select("text").style("opacity",1)}}T.text(function(e){return e}),u&&(t.orient()==="left"||t.orient()==="right")&&(S.selectAll("g").each(function(e,t){d3.select(this).select("text").attr("opacity",1);if(n(e)<n.range()[1]+10||n(e)>n.range()[0]-10)(e>1e-10||e<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0)}),n.domain()[0]==n.domain()[1]&&n.domain()[0]==0&&m.selectAll("g.nv-axisMaxMin").style("opacity",function(e,t){return t?0:1}));if(u&&(t.orient()==="top"||t.orient()==="bottom")){var M=[];m.selectAll("g.nv-axisMaxMin").each(function(e,t){try{t?M.push(n(e)-this.getBoundingClientRect().width-4):M.push(n(e)+this.getBoundingClientRect().width+4)}catch(r){t?M.push(n(e)-4):M.push(n(e)+4)}}),S.selectAll("g").each(function(e,t){if(n(e)<M[0]||n(e)>M[1])e>1e-10||e<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove()})}a&&S.selectAll(".tick").filter(function(e){return!parseFloat(Math.round(this.__data__*1e5)/1e6)&&this.__data__!==undefined}).classed("zero",!0),b=n.copy()}),w.renderEnd("axis immediate"),E}var t=d3.svg.axis(),n=d3.scale.linear(),r={top:0,right:0,bottom:0,left:0},i=75,s=60,o=null,u=!0,a=!0,f=0,l=!0,c=!1,h=!1,p=null,d=0,v=250,m=d3.dispatch("renderEnd"),g=!1,y=!1;t.scale(n).orient("bottom").tickFormat(function(e){return e});var b,w=e.utils.renderWatch(m,v);return E.axis=t,E.dispatch=m,E.options=e.utils.optionsFunc.bind(E),E._options=Object.create({},{axisLabelDistance:{get:function(){return d},set:function(e){d=e}},staggerLabels:{get:function(){return c},set:function(e){c=e}},rotateLabels:{get:function(){return f},set:function(e){f=e}},rotateYLabel:{get:function(){return l},set:function(e){l=e}},highlightZero:{get:function(){return a},set:function(e){a=e}},showMaxMin:{get:function(){return u},set:function(e){u=e}},axisLabel:{get:function(){return o},set:function(e){o=e}},height:{get:function(){return s},set:function(e){s=e}},ticks:{get:function(){return p},set:function(e){p=e}},width:{get:function(){return i},set:function(e){i=e}},margin:{get:function(){return r},set:function(e){r.top=e.top!==undefined?e.top:r.top,r.right=e.right!==undefined?e.right:r.right,r.bottom=e.bottom!==undefined?e.bottom:r.bottom,r.left=e.left!==undefined?e.left:r.left}},duration:{get:function(){return v},set:function(e){v=e,w.reset(v)}},scale:{get:function(){return n},set:function(r){n=r,t.scale(n),h=typeof n.rangeBands=="function",e.utils.inheritOptionsD3(E,n,["domain","range","rangeBand","rangeBands"])}}}),e.utils.initOptions(E),e.utils.inheritOptionsD3(E,t,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),e.utils.inheritOptionsD3(E,n,["domain","range","rangeBand","rangeBands"]),E},e.models.bullet=function(){"use strict";function m(n){return n.each(function(n,p){var m=c-t.left-t.right,g=h-t.top-t.bottom,y=d3.select(this);e.utils.initSVG(y);var b=i.call(this,n,p).slice().sort(d3.descending),w=s.call(this,n,p).slice().sort(d3.descending),E=o.call(this,n,p).slice().sort(d3.descending),S=u.call(this,n,p).slice(),x=a.call(this,n,p).slice(),T=f.call(this,n,p).slice(),N=d3.scale.linear().domain(d3.extent(d3.merge([l,b]))).range(r?[m,0]:[0,m]),C=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(N.range());this.__chart__=N;var k=d3.min(b),L=d3.max(b),A=b[1],O=y.selectAll("g.nv-wrap.nv-bullet").data([n]),M=O.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet"),_=M.append("g"),D=O.select("g");_.append("rect").attr("class","nv-range nv-rangeMax"),_.append("rect").attr("class","nv-range nv-rangeAvg"),_.append("rect").attr("class","nv-range nv-rangeMin"),_.append("rect").attr("class","nv-measure"),_.append("path").attr("class","nv-markerTriangle"),O.attr("transform","translate("+t.left+","+t.top+")");var P=function(e){return Math.abs(C(e)-C(0))},H=function(e){return Math.abs(N(e)-N(0))},B=function(e){return e<0?C(e):C(0)},j=function(e){return e<0?N(e):N(0)};D.select("rect.nv-rangeMax").attr("height",g).attr("width",H(L>0?L:k)).attr("x",j(L>0?L:k)).datum(L>0?L:k),D.select("rect.nv-rangeAvg").attr("height",g).attr("width",H(A)).attr("x",j(A)).datum(A),D.select("rect.nv-rangeMin").attr("height",g).attr("width",H(L)).attr("x",j(L)).attr("width",H(L>0?k:L)).attr("x",j(L>0?k:L)).datum(L>0?k:L),D.select("rect.nv-measure").style("fill",d).attr("height",g/3).attr("y",g/3).attr("width",E<0?N(0)-N(E[0]):N(E[0])-N(0)).attr("x",j(E)).on("mouseover",function(){v.elementMouseover({value:E[0],label:T[0]||"Current",pos:[N(E[0]),g/2]})}).on("mouseout",function(){v.elementMouseout({value:E[0],label:T[0]||"Current"})});var F=g/6;w[0]?D.selectAll("path.nv-markerTriangle").attr("transform",function(e){return"translate("+N(w[0])+","+g/2+")"}).attr("d","M0,"+F+"L"+F+","+ -F+" "+ -F+","+ -F+"Z").on("mouseover",function(){v.elementMouseover({value:w[0],label:x[0]||"Previous",pos:[N(w[0]),g/2]})}).on("mouseout",function(){v.elementMouseout({value:w[0],label:x[0]||"Previous"})}):D.selectAll("path.nv-markerTriangle").remove(),O.selectAll(".nv-range").on("mouseover",function(e,t){var n=S[t]||(t?t==1?"Mean":"Minimum":"Maximum");v.elementMouseover({value:e,label:n,pos:[N(e),g/2]})}).on("mouseout",function(e,t){var n=S[t]||(t?t==1?"Mean":"Minimum":"Maximum");v.elementMouseout({value:e,label:n})})}),m}var t={top:0,right:0,bottom:0,left:0},n="left",r=!1,i=function(e){return e.ranges},s=function(e){return e.markers?e.markers:[0]},o=function(e){return e.measures},u=function(e){return e.rangeLabels?e.rangeLabels:[]},a=function(e){return e.markerLabels?e.markerLabels:[]},f=function(e){return e.measureLabels?e.measureLabels:[]},l=[0],c=380,h=30,p=null,d=e.utils.getColor(["#1f77b4"]),v=d3.dispatch("elementMouseover","elementMouseout");return m.dispatch=v,m.options=e.utils.optionsFunc.bind(m),m._options=Object.create({},{ranges:{get:function(){return i},set:function(e){i=e}},markers:{get:function(){return s},set:function(e){s=e}},measures:{get:function(){return o},set:function(e){o=e}},forceX:{get:function(){return l},set:function(e){l=e}},width:{get:function(){return c},set:function(e){c=e}},height:{get:function(){return h},set:function(e){h=e}},tickFormat:{get:function(){return p},set:function(e){p=e}},margin:{get:function(){return t},set:function(e){t.top=e.top!==undefined?e.top:t.top,t.right=e.right!==undefined?e.right:t.right,t.bottom=e.bottom!==undefined?e.bottom:t.bottom,t.left=e.left!==undefined?e.left:t.left}},orient:{get:function(){return n},set:function(e){n=e,r=n=="right"||n=="bottom"}},color:{get:function(){return d},set:function(t){d=e.utils.getColor(t)}}}),e.utils.initOptions(m),m},e.models.bulletChart=function(){"use strict";function m(n){return n.each(function(h,g){var y=d3.select(this);e.utils.initSVG(y);var b=(a||parseInt(y.style("width"))||960)-i.left-i.right,w=f-i.top-i.bottom,E=this;m.update=function(){m(n)},m.container=this;if(!h||!s.call(this,h,g)){var S=y.selectAll(".nv-noData").data([p]);return S.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),S.attr("x",i.left+b/2).attr("y",18+i.top+w/2).text(function(e){return e}),m}y.selectAll(".nv-noData").remove();var x=s.call(this,h,g).slice().sort(d3.descending),T=o.call(this,h,g).slice().sort(d3.descending),N=u.call(this,h,g).slice().sort(d3.descending),C=y.selectAll("g.nv-wrap.nv-bulletChart").data([h]),k=C.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart"),L=k.append("g"),A=C.select("g");L.append("g").attr("class","nv-bulletWrap"),L.append("g").attr("class","nv-titles"),C.attr("transform","translate("+i.left+","+i.top+")");var O=d3.scale.linear().domain([0,Math.max(x[0],T[0],N[0])]).range(r?[b,0]:[0,b]),M=this.__chart__||d3.scale.linear().domain([0,Infinity]).range(O.range());this.__chart__=O;var _=function(e){return Math.abs(M(e)-M(0))},D=function(e){return Math.abs(O(e)-O(0))},P=L.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(f-i.top-i.bottom)/2+")");P.append("text").attr("class","nv-title").text(function(e){return e.title}),P.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(e){return e.subtitle}),t.width(b).height(w);var H=A.select(".nv-bulletWrap");d3.transition(H).call(t);var B=l||O.tickFormat(b/100),j=A.selectAll("g.nv-tick").data(O.ticks(b/50),function(e){return this.textContent||B(e)}),F=j.enter().append("g").attr("class","nv-tick").attr("transform",function(e){return"translate("+M(e)+",0)"}).style("opacity",1e-6);F.append("line").attr("y1",w).attr("y2",w*7/6),F.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",w*7/6).text(B);var I=d3.transition(j).attr("transform",function(e){return"translate("+O(e)+",0)"}).style("opacity",1);I.select("line").attr("y1",w).attr("y2",w*7/6),I.select("text").attr("y",w*7/6),d3.transition(j.exit()).attr("transform",function(e){return"translate("+O(e)+",0)"}).style("opacity",1e-6).remove(),d.on("tooltipShow",function(e){e.key=h.title,c&&v(e,E.parentNode)})}),d3.timer.flush(),m}var t=e.models.bullet(),n="left",r=!1,i={top:5,right:40,bottom:20,left:120},s=function(e){return e.ranges},o=function(e){return e.markers?e.markers:[0]},u=function(e){return e.measures},a=null,f=55,l=null,c=!0,h=function(e,t,n,r,i){return"<h3>"+t+"</h3>"+"<p>"+n+"</p>"},p="No Data Available.",d=d3.dispatch("tooltipShow","tooltipHide"),v=function(t,n){var r=t.pos[0]+(n.offsetLeft||0)+i.left,s=t.pos[1]+(n.offsetTop||0)+i.top,o=h(t.key,t.label,t.value,t,m);e.tooltip.show([r,s],o,t.value<0?"e":"w",null,n)};return t.dispatch.on("elementMouseover.tooltip",function(e){d.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){d.tooltipHide(e)}),d.on("tooltipHide",function(){c&&e.tooltip.cleanup()}),m.bullet=t,m.dispatch=d,m.options=e.utils.optionsFunc.bind(m),m._options=Object.create({},{ranges:{get:function(){return s},set:function(e){s=e}},markers:{get:function(){return o},set:function(e){o=e}},measures:{get:function(){return u},set:function(e){u=e}},width:{get:function(){return a},set:function(e){a=e}},height:{get:function(){return f},set:function(e){f=e}},tickFormat:{get:function(){return l},set:function(e){l=e}},tooltips:{get:function(){return c},set:function(e){c=e}},tooltipContent:{get:function(){return h},set:function(e){h=e}},noData:{get:function(){return p},set:function(e){p=e}},margin:{get:function(){return i},set:function(e){i.top=e.top!==undefined?e.top:i.top,i.right=e.right!==undefined?e.right:i.right,i.bottom=e.bottom!==undefined?e.bottom:i.bottom,i.left=e.left!==undefined?e.left:i.left}},orient:{get:function(){return n},set:function(e){n=e,r=n=="right"||n=="bottom"}}}),e.utils.inheritOptions(m,t),e.utils.initOptions(m),m},e.models.cumulativeLineChart=function(){"use strict";function j(b){return D.reset(),D.models(t),h&&D.models(n),p&&D.models(r),b.each(function(b){function U(e,t){d3.select(j.container).style("cursor","ew-resize")}function z(e,t){_.x=d3.event.x,_.i=Math.round(M.invert(_.x)),st()}function W(e,t){d3.select(j.container).style("cursor","auto"),x.index=_.i,k.stateChange(x)}function st(){it.data([_]);var e=j.duration();j.duration(0),j.update(),j.duration(e)}var L=d3.select(this);e.utils.initSVG(L),L.classed("nv-chart-"+S,!0);var O=this,D=(f||parseInt(L.style("width"))||960)-u.left-u.right,F=(l||parseInt(L.style("height"))||400)-u.top-u.bottom;j.update=function(){A===0?L.call(j):L.transition().duration(A).call(j)},j.container=this,x.setter(B(b),j.update).getter(H(b)).update(),x.disabled=b.map(function(e){return!!e.disabled});if(!T){var q;T={};for(q in x)x[q]instanceof Array?T[q]=x[q].slice(0):T[q]=x[q]}var R=d3.behavior.drag().on("dragstart",U).on("drag",z).on("dragend",W);if(!b||!b.length||!b.filter(function(e){return e.values.length}).length){var X=L.selectAll(".nv-noData").data([N]);return X.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),X.attr("x",u.left+D/2).attr("y",u.top+F/2).text(function(e){return e}),j}L.selectAll(".nv-noData").remove(),w=t.xScale(),E=t.yScale();if(!y){var V=b.filter(function(e){return!e.disabled}).map(function(e,n){var r=d3.extent(e.values,t.y());return r[0]<-0.95&&(r[0]=-0.95),[(r[0]-r[1])/(1+r[1]),(r[1]-r[0])/(1+r[0])]}),$=[d3.min(V,function(e){return e[0]}),d3.max(V,function(e){return e[1]})];t.yDomain($)}else t.yDomain(null);M.domain([0,b[0].values.length-1]).range([0,D]).clamp(!0);var b=I(_.i,b),J=g?"none":"all",K=L.selectAll("g.nv-wrap.nv-cumulativeLine").data([b]),Q=K.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),G=K.select("g");Q.append("g").attr("class","nv-interactive"),Q.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),Q.append("g").attr("class","nv-y nv-axis"),Q.append("g").attr("class","nv-background"),Q.append("g").attr("class","nv-linesWrap").style("pointer-events",J),Q.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),Q.append("g").attr("class","nv-legendWrap"),Q.append("g").attr("class","nv-controlsWrap"),c&&(i.width(D),G.select(".nv-legendWrap").datum(b).call(i),u.top!=i.height()&&(u.top=i.height(),F=(l||parseInt(L.style("height"))||400)-u.top-u.bottom),G.select(".nv-legendWrap").attr("transform","translate(0,"+ -u.top+")"));if(m){var Y=[{key:"Re-scale y-axis",disabled:!y}];s.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),G.select(".nv-controlsWrap").datum(Y).attr("transform","translate(0,"+ -u.top+")").call(s)}K.attr("transform","translate("+u.left+","+u.top+")"),d&&G.select(".nv-y.nv-axis").attr("transform","translate("+D+",0)");var Z=b.filter(function(e){return e.tempDisabled});K.select(".tempDisabled").remove(),Z.length&&K.append("text").attr("class","tempDisabled").attr("x",D/2).attr("y","-.71em").style("text-anchor","end").text(Z.map(function(e){return e.key}).join(", ")+" values cannot be calculated for this time period."),g&&(o.width(D).height(F).margin({left:u.left,top:u.top}).svgContainer(L).xScale(w),K.select(".nv-interactive").call(o)),Q.select(".nv-background").append("rect"),G.select(".nv-background rect").attr("width",D).attr("height",F),t.y(function(e){return e.display.y}).width(D).height(F).color(b.map(function(e,t){return e.color||a(e,t)}).filter(function(e,t){return!b[t].disabled&&!b[t].tempDisabled}));var et=G.select(".nv-linesWrap").datum(b.filter(function(e){return!e.disabled&&!e.tempDisabled}));et.call(t),b.forEach(function(e,t){e.seriesIndex=t});var tt=b.filter(function(e){return!e.disabled&&!!C(e)}),nt=G.select(".nv-avgLinesWrap").selectAll("line").data(tt,function(e){return e.key}),rt=function(e){var t=E(C(e));return t<0?0:t>F?F:t};nt.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(e,n){return t.color()(e,e.seriesIndex)}).attr("x1",0).attr("x2",D).attr("y1",rt).attr("y2",rt),nt.style("stroke-opacity",function(e){var t=E(C(e));return t<0||t>F?0:1}).attr("x1",0).attr("x2",D).attr("y1",rt).attr("y2",rt),nt.exit().remove();var it=et.selectAll(".nv-indexLine").data([_]);it.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(R),it.attr("transform",function(e){return"translate("+M(e.i)+",0)"}).attr("height",F),h&&(n.scale(w).ticks(e.utils.calcTicksX(D/70,b)).tickSize(-F,0),G.select(".nv-x.nv-axis").attr("transform","translate(0,"+E.range()[0]+")"),G.select(".nv-x.nv-axis").call(n)),p&&(r.scale(E).ticks(e.utils.calcTicksY(F/36,b)).tickSize(-D,0),G.select(".nv-y.nv-axis").call(r)),G.select(".nv-background rect").on("click",function(){_.x=d3.mouse(this)[0],_.i=Math.round(M.invert(_.x)),x.index=_.i,k.stateChange(x),st()}),t.dispatch.on("elementClick",function(e){_.i=e.pointIndex,_.x=M(_.i),x.index=_.i,k.stateChange(x),st()}),s.dispatch.on("legendClick",function(e,t){e.disabled=!e.disabled,y=!e.disabled,x.rescaleY=y,k.stateChange(x),j.update()}),i.dispatch.on("stateChange",function(e){for(var t in e)x[t]=e[t];k.stateChange(x),j.update()}),o.dispatch.on("elementMousemove",function(i){t.clearHighlights();var s,f,l,c=[];b.filter(function(e,t){return e.seriesIndex=t,!e.disabled}).forEach(function(n,r){f=e.interactiveBisect(n.values,i.pointXValue,j.x()),t.highlightPoint(r,f,!0);var o=n.values[f];if(typeof o=="undefined")return;typeof s=="undefined"&&(s=o),typeof l=="undefined"&&(l=j.xScale()(j.x()(o,f))),c.push({key:n.key,value:j.y()(o,f),color:a(n,n.seriesIndex)})});if(c.length>2){var h=j.yScale().invert(i.mouseY),p=Math.abs(j.yScale().domain()[0]-j.yScale().domain()[1]),d=.03*p,m=e.nearestValueIndex(c.map(function(e){return e.value}),h,d);m!==null&&(c[m].highlight=!0)}var g=n.tickFormat()(j.x()(s,f),f);o.tooltip.position({left:l+u.left,top:i.mouseY+u.top}).chartContainer(O.parentNode).enabled(v).valueFormatter(function(e,t){return r.tickFormat()(e)}).data({value:g,series:c})(),o.renderGuideLine(l)}),o.dispatch.on("elementMouseout",function(e){k.tooltipHide(),t.clearHighlights()}),k.on("tooltipShow",function(e){v&&P(e,O.parentNode)}),k.on("changeState",function(e){typeof e.disabled!="undefined"&&(b.forEach(function(t,n){t.disabled=e.disabled[n]}),x.disabled=e.disabled),typeof e.index!="undefined"&&(_.i=e.index,_.x=M(_.i),x.index=e.index,it.data([_])),typeof e.rescaleY!="undefined"&&(y=e.rescaleY),j.update()})}),D.renderEnd("cumulativeLineChart immediate"),j}function I(e,n){return F||(F=t.y()),n.map(function(t,n){if(!t.values)return t;var r=t.values[e];if(r==null)return t;var i=F(r,e);return i<-0.95&&!O?(t.tempDisabled=!0,t):(t.tempDisabled=!1,t.values=t.values.map(function(e,t){return e.display={y:(F(e,t)-i)/(1+i)},e}),t)})}var t=e.models.line(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s=e.models.legend(),o=e.interactiveGuideline(),u={top:30,right:30,bottom:50,left:60},a=e.utils.defaultColor(),f=null,l=null,c=!0,h=!0,p=!0,d=!1,v=!0,m=!0,g=!1,y=!0,b=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},w,E,S=t.id(),x=e.utils.state(),T=null,N="No Data Available.",C=function(e){return e.average},k=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),L=250,A=250,O=!1;x.index=0,x.rescaleY=y,n.orient("bottom").tickPadding(7),r.orient(d?"right":"left"),s.updateState(!1);var M=d3.scale.linear(),_={i:0,x:0},D=e.utils.renderWatch(k,A),P=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=b(i.series.key,a,f,i,j);e.tooltip.show([o,u],l,null,null,s)},H=function(e){return function(){return{active:e.map(function(e){return!e.disabled}),index:_.i,rescaleY:y}}},B=function(e){return function(t){t.index!==undefined&&(_.i=t.index),t.rescaleY!==undefined&&(y=t.rescaleY),t.active!==undefined&&e.forEach(function(e,n){e.disabled=!t.active[n]})}};t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+u.left,e.pos[1]+u.top],k.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){k.tooltipHide(e)}),k.on("tooltipHide",function(){v&&e.tooltip.cleanup()});var F=null;return j.dispatch=k,j.lines=t,j.legend=i,j.xAxis=n,j.yAxis=r,j.interactiveLayer=o,j.state=x,j.options=e.utils.optionsFunc.bind(j),j._options=Object.create({},{width:{get:function(){return f},set:function(e){f=e}},height:{get:function(){return l},set:function(e){l=e}},rescaleY:{get:function(){return y},set:function(e){y=e}},showControls:{get:function(){return m},set:function(e){m=e}},showLegend:{get:function(){return c},set:function(e){c=e}},average:{get:function(){return C},set:function(e){C=e}},tooltips:{get:function(){return v},set:function(e){v=e}},tooltipContent:{get:function(){return b},set:function(e){b=e}},defaultState:{get:function(){return T},set:function(e){T=e}},noData:{get:function(){return N},set:function(e){N=e}},showXAxis:{get:function(){return h},set:function(e){h=e}},showYAxis:{get:function(){return p},set:function(e){p=e}},noErrorCheck:{get:function(){return O},set:function(e){O=e}},margin:{get:function(){return u},set:function(e){u.top=e.top!==undefined?e.top:u.top,u.right=e.right!==undefined?e.right:u.right,u.bottom=e.bottom!==undefined?e.bottom:u.bottom,u.left=e.left!==undefined?e.left:u.left}},color:{get:function(){return a},set:function(t){a=e.utils.getColor(t),i.color(a)}},useInteractiveGuideline:{get:function(){return g},set:function(e){g=e,e===!0&&(j.interactive(!1),j.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return d},set:function(e){d=e,r.orient(e?"right":"left")}},duration:{get:function(){return A},set:function(e){A=e,t.duration(A),n.duration(A),r.duration(A),D.reset(A)}}}),e.utils.inheritOptions(j,t),e.utils.initOptions(j),j},e.models.discreteBar=function(){"use strict";function x(i){return S.reset(),i.each(function(i){var b=n-t.left-t.right,x=r-t.top-t.bottom,T=d3.select(this);e.utils.initSVG(T),i.forEach(function(e,t){e.values.forEach(function(e){e.series=t})});var N=p&&d?[]:i.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0}})});s.domain(p||d3.merge(N).map(function(e){return e.x})).rangeBands(v||[0,b],.1),o.domain(d||d3.extent(d3.merge(N).map(function(e){return e.y}).concat(f))),c?o.range(m||[x-(o.domain()[0]<0?12:0),o.domain()[1]>0?12:0]):o.range(m||[x,0]),w=w||s,E=E||o.copy().range([o(0),o(0)]);var C=T.selectAll("g.nv-wrap.nv-discretebar").data([i]),k=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),L=k.append("g"),A=C.select("g");L.append("g").attr("class","nv-groups"),C.attr("transform","translate("+t.left+","+t.top+")");var O=C.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});O.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),O.exit().watchTransition(S,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),O.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}),O.watchTransition(S,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var M=O.selectAll("g.nv-bar").data(function(e){return e.values});M.exit().remove();var _=M.enter().append("g").attr("transform",function(e,t,n){return"translate("+(s(u(e,t))+s.rangeBand()*.05)+", "+o(0)+")"}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),g.elementMouseover({value:a(e,t),point:e,series:i[e.series],pos:[s(u(e,t))+s.rangeBand()*(e.series+.5)/i.length,o(a(e,t))],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),g.elementMouseout({value:a(e,t),point:e,series:i[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("click",function(e,t){g.elementClick({value:a(e,t),point:e,series:i[e.series],pos:[s(u(e,t))+s.rangeBand()*(e.series+.5)/i.length,o(a(e,t))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){g.elementDblClick({value:a(e,t),point:e,series:i[e.series],pos:[s(u(e,t))+s.rangeBand()*(e.series+.5)/i.length,o(a(e,t))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()});_.append("rect").attr("height",0).attr("width",s.rangeBand()*.9/i.length),c?(_.append("text").attr("text-anchor","middle"),M.select("text").text(function(e,t){return h(a(e,t))}).watchTransition(S,"discreteBar: bars text").attr("x",s.rangeBand()*.9/2).attr("y",function(e,t){return a(e,t)<0?o(a(e,t))-o(0)+12:-4})):M.selectAll("text").remove(),M.attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(e,t){return e.color||l(e,t)}).style("stroke",function(e,t){return e.color||l(e,t)}).select("rect").attr("class",y).watchTransition(S,"discreteBar: bars rect").attr("width",s.rangeBand()*.9/i.length),M.watchTransition(S,"discreteBar: bars").attr("transform",function(e,t){var n=s(u(e,t))+s.rangeBand()*.05,r=a(e,t)<0?o(0):o(0)-o(a(e,t))<1?o(0)-1:o(a(e,t));return"translate("+n+", "+r+")"}).select("rect").attr("height",function(e,t){return Math.max(Math.abs(o(a(e,t))-o(d&&d[0]||0))||1)}),w=s.copy(),E=o.copy()}),S.renderEnd("discreteBar immediate"),x}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=Math.floor(Math.random()*1e4),s=d3.scale.ordinal(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=e.utils.defaultColor(),c=!1,h=d3.format(",.2f"),p,d,v,m,g=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),y="discreteBar",b=250,w,E,S=e.utils.renderWatch(g,b);return x.dispatch=g,x.options=e.utils.optionsFunc.bind(x),x._options=Object.create({},{width:{get:function(){return n},set:function(e){n=e}},height:{get:function(){return r},set:function(e){r=e}},forceY:{get:function(){return f},set:function(e){f=e}},showValues:{get:function(){return c},set:function(e){c=e}},x:{get:function(){return u},set:function(e){u=e}},y:{get:function(){return a},set:function(e){a=e}},xScale:{get:function(){return s},set:function(e){s=e}},yScale:{get:function(){return o},set:function(e){o=e}},xDomain:{get:function(){return p},set:function(e){p=e}},yDomain:{get:function(){return d},set:function(e){d=e}},xRange:{get:function(){return v},set:function(e){v=e}},yRange:{get:function(){return m},set:function(e){m=e}},valueFormat:{get:function(){return h},set:function(e){h=e}},id:{get:function(){return i},set:function(e){i=e}},rectClass:{get:function(){return y},set:function(e){y=e}},margin:{get:function(){return t},set:function(e){t.top=e.top!==undefined?e.top:t.top,t.right=e.right!==undefined?e.right:t.right,t.bottom=e.bottom!==undefined?e.bottom:t.bottom,t.left=e.left!==undefined?e.left:t.left}},color:{get:function(){return l},set:function(t){l=e.utils.getColor(t)}},duration:{get:function(){return b},set:function(e){b=e,S.reset(b)}}}),e.utils.initOptions(x),x},e.models.discreteBarChart=function(){"use strict";function E(u){return w.reset(),w.models(t),a&&w.models(n),f&&w.models(r),u.each(function(u){var p=d3.select(this),w=this;e.utils.initSVG(p);var S=(s||parseInt(p.style("width"))||960)-i.left-i.right,T=(o||parseInt(p.style("height"))||400)-i.top-i.bottom;E.update=function(){g.beforeUpdate(),p.transition().duration(y).call(E)},E.container=this;if(!u||!u.length||!u.filter(function(e){return e.values.length}).length){var N=p.selectAll(".nv-noData").data([m]);return N.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),N.attr("x",i.left+S/2).attr("y",i.top+T/2).text(function(e){return e}),E}p.selectAll(".nv-noData").remove(),d=t.xScale(),v=t.yScale().clamp(!0);var C=p.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([u]),k=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),L=k.append("defs"),A=C.select("g");k.append("g").attr("class","nv-x nv-axis"),k.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),k.append("g").attr("class","nv-barsWrap"),A.attr("transform","translate("+i.left+","+i.top+")"),l&&A.select(".nv-y.nv-axis").attr("transform","translate("+S+",0)"),t.width(S).height(T);var O=A.select(".nv-barsWrap").datum(u.filter(function(e){return!e.disabled}));O.transition().call(t),L.append("clipPath").attr("id","nv-x-label-clip-"+t.id()).append("rect"),A.select("#nv-x-label-clip-"+t.id()+" rect").attr("width",d.rangeBand()*(c?2:1)).attr("height",16).attr("x",-d.rangeBand()/(c?1:2));if(a){n.scale(d).ticks(e.utils.calcTicksX(S/100,u)).tickSize(-T,0),A.select(".nv-x.nv-axis").attr("transform","translate(0,"+(v.range()[0]+(t.showValues()&&v.domain()[0]<0?16:0))+")"),A.select(".nv-x.nv-axis").call(n);var M=A.select(".nv-x.nv-axis").selectAll("g");c&&M.selectAll("text").attr("transform",function(e,t,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}f&&(r.scale(v).ticks(e.utils.calcTicksY(T/36,u)).tickSize(-S,0),A.select(".nv-y.nv-axis").call(r)),A.select(".nv-zeroLine line").attr("x1",0).attr("x2",S).attr("y1",v(0)).attr("y2",v(0)),g.on("tooltipShow",function(e){h&&b(e,w.parentNode)})}),w.renderEnd("discreteBar chart immediate"),E}var t=e.models.discreteBar(),n=e.models.axis(),r=e.models.axis(),i={top:15,right:10,bottom:50,left:60},s=null,o=null,u=e.utils.getColor(),a=!0,f=!0,l=!1,c=!1,h=!0,p=function(e,t,n,r,i){return"<h3>"+t+"</h3>"+"<p>"+n+"</p>"},d,v,m="No Data Available.",g=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate","renderEnd"),y=250;n.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),r.orient(l?"right":"left").tickFormat(d3.format(",.1f"));var b=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=p(i.series.key,a,f,i,E);e.tooltip.show([o,u],l,i.value<0?"n":"s",null,s)},w=e.utils.renderWatch(g,y);return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+i.left,e.pos[1]+i.top],g.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){g.tooltipHide(e)}),g.on("tooltipHide",function(){h&&e.tooltip.cleanup()}),E.dispatch=g,E.discretebar=t,E.xAxis=n,E.yAxis=r,E.options=e.utils.optionsFunc.bind(E),E._options=Object.create({},{width:{get:function(){return s},set:function(e){s=e}},height:{get:function(){return o},set:function(e){o=e}},staggerLabels:{get:function(){return c},set:function(e){c=e}},showXAxis:{get:function(){return a},set:function(e){a=e}},showYAxis:{get:function(){return f},set:function(e){f=e}},tooltips:{get:function(){return h},set:function(e){h=e}},tooltipContent:{get:function(){return p},set:function(e){p=e}},noData:{get:function(){return m},set:function(e){m=e}},margin:{get:function(){return i},set:function(e){i.top=e.top!==undefined?e.top:i.top,i.right=e.right!==undefined?e.right:i.right,i.bottom=e.bottom!==undefined?e.bottom:i.bottom,i.left=e.left!==undefined?e.left:i.left}},duration:{get:function(){return y},set:function(e){y=e,w.reset(y),t.duration(y),n.duration(y),r.duration(y)}},color:{get:function(){return u},set:function(n){u=e.utils.getColor(n),t.color(u)}},rightAlignYAxis:{get:function(){return l},set:function(e){l=e,r.orient(e?"right":"left")}}}),e.utils.inheritOptions(E,t),e.utils.initOptions(E),E},e.models.trendBar=function(){"use strict";function x(i){return S.reset(),i.each(function(i){var b=n-t.left-t.right,x=r-t.top-t.bottom,T=d3.select(this);e.utils.initSVG(T),i.forEach(function(e,t){e.values.forEach(function(e){e.series=t})});var N=p&&d?[]:i.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0}})});s.domain(p||d3.merge(N).map(function(e){return e.x})).rangeBands(v||[0,b],.1),o.domain(d||d3.extent(d3.merge(N).map(function(e){return e.y}).concat(f))),c?o.range(m||[x-(o.domain()[0]<0?12:0),o.domain()[1]>0?12:0]):o.range(m||[x,0]),w=w||s,E=E||o.copy().range([o(0),o(0)]);var C=T.selectAll("g.nv-wrap.nv-discretebar").data([i]),k=C.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar"),L=k.append("g"),A=C.select("g");L.append("g").attr("class","nv-groups"),C.attr("transform","translate("+t.left+","+t.top+")");var O=C.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});O.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),O.exit().watchTransition(S,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),O.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}),O.watchTransition(S,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var M=O.selectAll("g.nv-bar").data(function(e){return e.values});M.exit().remove();var _=M.enter().append("g").attr("transform",function(e,t,n){return"translate("+(s(u(e,t))+s.rangeBand()*.05)+", "+o(0)+")"}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),g.elementMouseover({value:a(e,t),point:e,series:i[e.series],pos:[s(u(e,t))+s.rangeBand()*(e.series+.5)/i.length,o(a(e,t))],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),g.elementMouseout({value:a(e,t),point:e,series:i[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("click",function(e,t){g.elementClick({value:a(e,t),point:e,series:i[e.series],pos:[s(u(e,t))+s.rangeBand()*(e.series+.5)/i.length,o(a(e,t))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){g.elementDblClick({value:a(e,t),point:e,series:i[e.series],pos:[s(u(e,t))+s.rangeBand()*(e.series+.5)/i.length,o(a(e,t))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()});_.append("rect").attr("height",0).attr("width",s.rangeBand()*.9/i.length),c?(_.append("text").attr("text-anchor","middle"),M.select("text").style("opacity",1).text(function(e,t){return h(a(e,t))}).watchTransition(S,"discreteBar: bars text").attr("x",s.rangeBand()*.9/2).attr("y",function(e,t){return-4}),M.select("text").text(function(e,t){return h(a(e,t))}).watchTransition(S,"discreteBar: bars text").attr("x",s.rangeBand()*.9/2).attr("y",function(e,t){return a(e,t)<0?o(a(e,t))-o(0)+12:-4}),M.select("text").filter(function(e,t){return t%Math.ceil(i[0].values.length/2/(b/100))!==0}).style("opacity",0)):M.selectAll("text").remove(),M.attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(e,t){return e.color||l(e,t)}).style("stroke",function(e,t){return e.color||l(e,t)}).select("rect").attr("class",y).watchTransition(S,"discreteBar: bars rect").attr("width",s.rangeBand()*.9/i.length);var D=0;M.watchTransition(S,"discreteBar: bars").attr("transform",function(e,t){var n=s(u(e,t))+s.rangeBand()*.05,r=t==0?o(e.value):a(e,t)<0?o(D):o(D+a(e,t));return D+=t==0?e.value:a(e,t),"translate("+n+", "+(e.y==0?r-1:r)+")"}).select("rect").attr("height",function(e,t){return t!==0?o(0)-o(a(e,t)<0?Math.abs(a(e,t))+d[0]:a(e,t)+d[0])||1.5:1.5}),w=s.copy(),E=o.copy()}),S.renderEnd("discreteBar immediate"),x}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=Math.floor(Math.random()*1e4),s=d3.scale.ordinal(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=e.utils.defaultColor(),c=!1,h=d3.format(",.2f"),p,d,v,m,g=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),y="discreteBar",b=250,w,E,S=e.utils.renderWatch(g,b);return x.dispatch=g,x.options=e.utils.optionsFunc.bind(x),x._options=Object.create({},{width:{get:function(){return n},set:function(e){n=e}},height:{get:function(){return r},set:function(e){r=e}},forceY:{get:function(){return f},set:function(e){f=e}},showValues:{get:function(){return c},set:function(e){c=e}},x:{get:function(){return u},set:function(e){u=e}},y:{get:function(){return a},set:function(e){a=e}},xScale:{get:function(){return s},set:function(e){s=e}},yScale:{get:function(){return o},set:function(e){o=e}},xDomain:{get:function(){return p},set:function(e){p=e}},yDomain:{get:function(){return d},set:function(e){d=e}},xRange:{get:function(){return v},set:function(e){v=e}},yRange:{get:function(){return m},set:function(e){m=e}},valueFormat:{get:function(){return h},set:function(e){h=e}},id:{get:function(){return i},set:function(e){i=e}},rectClass:{get:function(){return y},set:function(e){y=e}},margin:{get:function(){return t},set:function(e){t.top=e.top!==undefined?e.top:t.top,t.right=e.right!==undefined?e.right:t.right,t.bottom=e.bottom!==undefined?e.bottom:t.bottom,t.left=e.left!==undefined?e.left:t.left}},color:{get:function(){return l},set:function(t){l=e.utils.getColor(t)}},duration:{get:function(){return b},set:function(e){b=e,S.reset(b)}}}),e.utils.initOptions(x),x},e.models.trendBarChart=function(){"use strict";function S(u){return E.reset(),E.models(t),a&&E.models(n),f&&E.models(r),u.each(function(u){var d=d3.select(this),E=this;e.utils.initSVG(d);var T=(s||parseInt(d.style("width"))||960)-i.left-i.right,N=(o||parseInt(d.style("height"))||400)-i.top-i.bottom;S.update=function(){y.beforeUpdate(),d.transition().duration(b).call(S)},S.container=this;if(!u||!u.length||!u.filter(function(e){return e.values.length}).length){var C=d.selectAll(".nv-noData").data([g]);return C.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),C.attr("x",i.left+T/2).attr("y",i.top+N/2).text(function(e){return e}),S}d.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale().clamp(!0);var k=d.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([u]),L=k.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),A=L.append("defs"),O=k.select("g");L.append("g").attr("class","nv-x nv-axis"),L.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),L.append("g").attr("class","nv-barsWrap"),O.attr("transform","translate("+i.left+","+i.top+")"),l&&O.select(".nv-y.nv-axis").attr("transform","translate("+T+",0)"),t.width(T).height(N);var M=O.select(".nv-barsWrap").datum(u.filter(function(e){return!e.disabled}));M.transition().call(t),A.append("clipPath").attr("id","nv-x-label-clip-"+t.id()).append("rect"),O.select("#nv-x-label-clip-"+t.id()+" rect").attr("width",v.rangeBand()*(h?2:1)).attr("height",16).attr("x",-v.rangeBand()/(h?1:2));if(a){n.scale(v).ticks(e.utils.calcTicksX(T/100,u)).tickSize(-N,0),O.select(".nv-x.nv-axis").attr("transform","translate(0,"+(m.range()[0]+(t.showValues()&&m.domain()[0]<0?16:0))+")"),O.select(".nv-x.nv-axis").call(n);var _=O.select(".nv-x.nv-axis > g").selectAll("g");_.selectAll("line, text").style("opacity",1),c&&_.filter(function(e,t){return t%Math.ceil(u[0].values.length/(T/100))!==0}).selectAll("text, line").style("opacity",0),h&&_.selectAll("text").attr("transform",function(e,t,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}f&&(r.scale(m).ticks(e.utils.calcTicksY(N/36,u)).tickSize(-T,0),O.select(".nv-y.nv-axis").call(r)),O.select(".nv-zeroLine line").attr("x1",0).attr("x2",T).attr("y1",m(0)).attr("y2",m(0)),y.on("tooltipShow",function(e){p&&w(e,E.parentNode)})}),E.renderEnd("trendBar chart immediate"),S}var t=e.models.trendBar(),n=e.models.axis(),r=e.models.axis(),i={top:15,right:10,bottom:50,left:60},s=null,o=null,u=e.utils.getColor(),a=!0,f=!0,l=!1,c=!0,h=!1,p=!0,d=function(e,t,n,r,i){return"<h3>"+t+"</h3>"+"<p>"+n+"</p>"},v,m,g="No Data Available.",y=d3.dispatch("tooltipShow","tooltipHide","beforeUpdate","renderEnd"),b=250;n.orient("bottom").highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),r.orient(l?"right":"left").tickFormat(d3.format(",.1f"));var w=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.value<0?i.pos[1]/2:i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=d(i.series.key,a,f,i,S);e.tooltip.show([o,u],l,i.value<0?"n":"s",null,s)},E=e.utils.renderWatch(y,b);return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+i.left,e.pos[1]+i.top],y.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){y.tooltipHide(e)}),y.on("tooltipHide",function(){p&&e.tooltip.cleanup()}),S.dispatch=y,S.trendbar=t,S.xAxis=n,S.yAxis=r,S.options=e.utils.optionsFunc.bind(S),S._options=Object.create({},{width:{get:function(){return s},set:function(e){s=e}},height:{get:function(){return o},set:function(e){o=e}},staggerLabels:{get:function(){return h},set:function(e){h=e}},showXAxis:{get:function(){return a},set:function(e){a=e}},showYAxis:{get:function(){return f},set:function(e){f=e}},tooltips:{get:function(){return p},set:function(e){p=e}},tooltipContent:{get:function(){return d},set:function(e){d=e}},noData:{get:function(){return g},set:function(e){g=e}},reduceXTicks:{get:function(){return c},set:function(e){c=e}},margin:{get:function(){return i},set:function(e){i.top=e.top!==undefined?e.top:i.top,i.right=e.right!==undefined?e.right:i.right,i.bottom=e.bottom!==undefined?e.bottom:i.bottom,i.left=e.left!==undefined?e.left:i.left}},duration:{get:function(){return b},set:function(e){b=e,E.reset(b),t.duration(b),n.duration(b),r.duration(b)}},color:{get:function(){return u},set:function(n){u=e.utils.getColor(n),t.color(u)}},rightAlignYAxis:{get:function(){return l},set:function(e){l=e,r.orient(e?"right":"left")}}}),e.utils.inheritOptions(S,t),e.utils.initOptions(S),S},e.models.distribution=function(){"use strict";function p(a){return h.reset(),a.each(function(a){var f=n-(i==="x"?t.left+t.right:t.top+t.bottom),l=i=="x"?"y":"x",p=d3.select(this);e.utils.initSVG(p),c=c||u;var d=p.selectAll("g.nv-distribution").data([a]),v=d.enter().append("g").attr("class","nvd3 nv-distribution"),m=v.append("g"),g=d.select("g");d.attr("transform","translate("+t.left+","+t.top+")");var y=g.selectAll("g.nv-dist").data(function(e){return e},function(e){return e.key});y.enter().append("g"),y.attr("class",function(e,t){return"nv-dist nv-series-"+t}).style("stroke",function(e,t){return o(e,t)});var b=y.selectAll("line.nv-dist"+i).data(function(e){return e.values});b.enter().append("line").attr(i+"1",function(e,t){return c(s(e,t))}).attr(i+"2",function(e,t){return c(s(e,t))}),h.transition(y.exit().selectAll("line.nv-dist"+i),"dist exit").attr(i+"1",function(e,t){return u(s(e,t))}).attr(i+"2",function(e,t){return u(s(e,t))}).style("stroke-opacity",0).remove(),b.attr("class",function(e,t){return"nv-dist"+i+" nv-dist"+i+"-"+t}).attr(l+"1",0).attr(l+"2",r),h.transition(b,"dist").attr(i+"1",function(e,t){return u(s(e,t))}).attr(i+"2",function(e,t){return u(s(e,t))}),c=u.copy()}),h.renderEnd("distribution immediate"),p}var t={top:0,right:0,bottom:0,left:0},n=400,r=8,i="x",s=function(e){return e[i]},o=e.utils.defaultColor(),u=d3.scale.linear(),a,f=250,l=d3.dispatch("renderEnd"),c,h=e.utils.renderWatch(l,f);return p.options=e.utils.optionsFunc.bind(p),p.dispatch=l,p.margin=function(e){return arguments.length?(t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left,p):t},p.width=function(e){return arguments.length?(n=e,p):n},p.axis=function(e){return arguments.length?(i=e,p):i},p.size=function(e){return arguments.length?(r=e,p):r},p.getData=function(e){return arguments.length?(s=d3.functor(e),p):s},p.scale=function(e){return arguments.length?(u=e,p):u},p.color=function(t){return arguments.length?(o=e.utils.getColor(t),p):o},p.duration=function(e){return arguments.length?(f=e,h.reset(f),p):f},p},e.models.historicalBar=function(){"use strict";function E(S){return S.each(function(E){w.reset();var S=d3.select(this),T=(n||parseInt(S.style("width"))||960)-t.left-t.right,N=(r||parseInt(S.style("height"))||400)-t.top-t.bottom;e.utils.initSVG(S),s.domain(d||d3.extent(E[0].values.map(u).concat(f))),c?s.range(m||[T*.5/E[0].values.length,T*(E[0].values.length-.5)/E[0].values.length]):s.range(m||[0,T]),o.domain(v||d3.extent(E[0].values.map(a).concat(l))).range(g||[N,0]),s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]-s.domain()[0]*.01,s.domain()[1]+s.domain()[1]*.01]):s.domain([-1,1])),o.domain()[0]===o.domain()[1]&&(o.domain()[0]?o.domain([o.domain()[0]+o.domain()[0]*.01,o.domain()[1]-o.domain()[1]*.01]):o.domain([-1,1]));var C=S.selectAll("g.nv-wrap.nv-historicalBar-"+i).data([E[0].values]),k=C.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+i),L=k.append("defs"),A=k.append("g"),O=C.select("g");A.append("g").attr("class","nv-bars"),C.attr("transform","translate("+t.left+","+t.top+")"),S.on("click",function(e,t){y.chartClick({data:e,index:t,pos:d3.event,id:i})}),L.append("clipPath").attr("id","nv-chart-clip-path-"+i).append("rect"),C.select("#nv-chart-clip-path-"+i+" rect").attr("width",T).attr("height",N),O.attr("clip-path",h?"url(#nv-chart-clip-path-"+i+")":"");var M=C.select(".nv-bars").selectAll(".nv-bar").data(function(e){return e},function(e,t){return u(e,t)});M.exit().remove();var _=M.enter().append("rect").attr("x",0).attr("y",function(t,n){return e.utils.NaNtoZero(o(Math.max(0,a(t,n))))}).attr("height",function(t,n){return e.utils.NaNtoZero(Math.abs(o(a(t,n))-o(0)))}).attr("transform",function(e,t){return"translate("+(s(u(e,t))-T/E[0].values.length*.45)+",0)"}).on("mouseover",function(e,t){if(!b)return;d3.select(this).classed("hover",!0),y.elementMouseover({point:e,series:E[0],pos:[s(u(e,t)),o(a(e,t))],pointIndex:t,seriesIndex:0,e:d3.event})}).on("mouseout",function(e,t){if(!b)return;d3.select(this).classed("hover",!1),y.elementMouseout({point:e,series:E[0],pointIndex:t,seriesIndex:0,e:d3.event})}).on("click",function(e,t){if(!b)return;y.elementClick({value:a(e,t),data:e,index:t,pos:[s(u(e,t)),o(a(e,t))],e:d3.event,id:i}),d3.event.stopPropagation()}).on("dblclick",function(e,t){if(!b)return;y.elementDblClick({value:a(e,t),data:e,index:t,pos:[s(u(e,t)),o(a(e,t))],e:d3.event,id:i}),d3.event.stopPropagation()});M.attr("fill",function(e,t){return p(e,t)}).attr("class",function(e,t,n){return(a(e,t)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+t}).watchTransition(w,"bars").attr("transform",function(e,t){return"translate("+(s(u(e,t))-T/E[0].values.length*.45)+",0)"}).attr("width",T/E[0].values.length*.9),M.watchTransition(w,"bars").attr("y",function(t,n){var r=a(t,n)<0?o(0):o(0)-o(a(t,n))<1?o(0)-1:o(a(t,n));return e.utils.NaNtoZero(r)}).attr("height",function(t,n){return e.utils.NaNtoZero(Math.max(Math.abs(o(a(t,n))-o(0)),1))})}),w.renderEnd("historicalBar immediate"),E}var t={top:0,right:0,bottom:0,left:0},n=null,r=null,i=Math.floor(Math.random()*1e4),s=d3.scale.linear(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=[],l=[0],c=!1,h=!0,p=e.utils.defaultColor(),d,v,m,g,y=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),b=!0,w=e.utils.renderWatch(y,0);return E.highlightPoint=function(e,t){d3.select(".nv-historicalBar-"+i).select(".nv-bars .nv-bar-0-"+e).classed("hover",t)},E.clearHighlights=function(){d3.select(".nv-historicalBar-"+i).select(".nv-bars .nv-bar.hover").classed("hover",!1)},E.dispatch=y,E.options=e.utils.optionsFunc.bind(E),E._options=Object.create({},{width:{get:function(){return n},set:function(e){n=e}},height:{get:function(){return r},set:function(e){r=e}},forceX:{get:function(){return f},set:function(e){f=e}},forceY:{get:function(){return l},set:function(e){l=e}},padData:{get:function(){return c},set:function(e){c=e}},x:{get:function(){return u},set:function(e){u=e}},y:{get:function(){return a},set:function(e){a=e}},xScale:{get:function(){return s},set:function(e){s=e}},yScale:{get:function(){return o},set:function(e){o=e}},xDomain:{get:function(){return d},set:function(e){d=e}},yDomain:{get:function(){return v},set:function(e){v=e}},xRange:{get:function(){return m},set:function(e){m=e}},yRange:{get:function(){return g},set:function(e){g=e}},clipEdge:{get:function(){return h},set:function(e){h=e}},id:{get:function(){return i},set:function(e){i=e}},interactive:{get:function(){return b},set:function(e){b=e}},margin:{get:function(){return t},set:function(e){t.top=e.top!==undefined?e.top:t.top,t.right=e.right!==undefined?e.right:t.right,t.bottom=e.bottom!==undefined?e.bottom:t.bottom,t.left=e.left!==undefined?e.left:t.left}},color:{get:function(){return p},set:function(t){p=e.utils.getColor(t)}}}),e.utils.initOptions(E),E},e.models.historicalBarChart=function(t){"use strict";function k(t){return t.each(function(g){C.reset(),C.models(n),h&&C.models(r),p&&C.models(i);var L=d3.select(this),A=this;e.utils.initSVG(L);var O=(f||parseInt(L.style("width"))||960)-u.left-u.right,M=(l||parseInt(L.style("height"))||400)-u.top-u.bottom;k.update=function(){L.transition().duration(T).call(k)},k.container=this,w.disabled=g.map(function(e){return!!e.disabled});if(!E){var _;E={};for(_ in w)w[_]instanceof Array?E[_]=w[_].slice(0):E[_]=w[_]}if(!g||!g.length||!g.filter(function(e){return e.values.length}).length){var D=L.selectAll(".nv-noData").data([S]);return D.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),D.attr("x",u.left+O/2).attr("y",u.top+M/2).text(function(e){return e}),k}L.selectAll(".nv-noData").remove(),y=n.xScale(),b=n.yScale();var P=L.selectAll("g.nv-wrap.nv-historicalBarChart").data([g]),H=P.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),B=P.select("g");H.append("g").attr("class","nv-x nv-axis"),H.append("g").attr("class","nv-y nv-axis"),H.append("g").attr("class","nv-barsWrap"),H.append("g").attr("class","nv-legendWrap"),H.append("g").attr("class","nv-interactive"),c&&(s.width(O),B.select(".nv-legendWrap").datum(g).call(s),u.top!=s.height()&&(u.top=s.height(),M=(l||parseInt(L.style("height"))||400)-u.top-u.bottom),P.select(".nv-legendWrap").attr("transform","translate(0,"+ -u.top+")")),P.attr("transform","translate("+u.left+","+u.top+")"),d&&B.select(".nv-y.nv-axis").attr("transform","translate("+O+",0)"),v&&(o.width(O).height(M).margin({left:u.left,top:u.top}).svgContainer(L).xScale(y),P.select(".nv-interactive").call(o)),n.width(O).height(M).color(g.map(function(e,t){return e.color||a(e,t)}).filter(function(e,t){return!g[t].disabled}));var j=B.select(".nv-barsWrap").datum(g.filter(function(e){return!e.disabled}));j.transition().call(n),h&&(r.scale(y).tickSize(-M,0),B.select(".nv-x.nv-axis").attr("transform","translate(0,"+b.range()[0]+")"),B.select(".nv-x.nv-axis").transition().call(r)),p&&(i.scale(b).ticks(e.utils.calcTicksY(M/36,g)).tickSize(-O,0),B.select(".nv-y.nv-axis").transition().call(i)),o.dispatch.on("elementMousemove",function(t){n.clearHighlights();var s,f,l,c=[];g.filter(function(e,t){return e.seriesIndex=t,!e.disabled}).forEach(function(r,i){f=e.interactiveBisect(r.values,t.pointXValue,k.x()),n.highlightPoint(f,!0);var o=r.values[f];if(typeof o=="undefined")return;typeof s=="undefined"&&(s=o),typeof l=="undefined"&&(l=k.xScale()(k.x()(o,f))),c.push({key:r.key,value:k.y()(o,f),color:a(r,r.seriesIndex),data:r.values[f]})});var h=r.tickFormat()(k.x()(s,f));o.tooltip.position({left:l+u.left,top:t.mouseY+u.top}).chartContainer(A.parentNode).enabled(m).valueFormatter(function(e,t){return i.tickFormat()(e)}).data({value:h,series:c})(),o.renderGuideLine(l)}),o.dispatch.on("elementMouseout",function(e){x.tooltipHide(),n.clearHighlights()}),s.dispatch.on("legendClick",function(e,n){e.disabled=!e.disabled,g.filter(function(e){return!e.disabled}).length||g.map(function(e){return e.disabled=!1,P.selectAll(".nv-series").classed("disabled",!1),e}),w.disabled=g.map(function(e){return!!e.disabled}),x.stateChange(w),t.transition().call(k)}),s.dispatch.on("legendDblclick",function(e){g.forEach(function(e){e.disabled=!0}),e.disabled=!1,w.disabled=g.map(function(e){return!!e.disabled}),x.stateChange(w),k.update()}),x.on("tooltipShow",function(e){m&&N(e,A.parentNode)}),x.on("changeState",function(e){typeof e.disabled!="undefined"&&(g.forEach(function(t,n){t.disabled=e.disabled[n]}),w.disabled=e.disabled),k.update()})}),C.renderEnd("historicalBarChart immediate"),k}var n=t||e.models.historicalBar(),r=e.models.axis(),i=e.models.axis(),s=e.models.legend(),o=e.interactiveGuideline(),u={top:30,right:90,bottom:50,left:90},a=e.utils.defaultColor(),f=null,l=null,c=!1,h=!0,p=!0,d=!1,v=!1,m=!0,g=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},y,b,w={},E=null,S="No Data Available.",x=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),T=250;r.orient("bottom").tickPadding(7),i.orient(d?"right":"left");var N=function(t,s){if(s){var o=d3.select(s).select("svg"),u=o.node()?o.attr("viewBox"):null;if(u){u=u.split(" ");var a=parseInt(o.style("width"))/u[2];t.pos[0]=t.pos[0]*a,t.pos[1]=t.pos[1]*a}}var f=t.pos[0]+(s.offsetLeft||0),l=t.pos[1]+(s.offsetTop||0),c=r.tickFormat()(n.x()(t.point,t.pointIndex)),h=i.tickFormat()(n.y()(t.point,t.pointIndex)),p=g(t.series.key,c,h,t,k);e.tooltip.show([f,l],p,null,null,s)},C=e.utils.renderWatch(x,0);return n.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+u.left,e.pos[1]+u.top],x.tooltipShow(e)}),n.dispatch.on("elementMouseout.tooltip",function(e){x.tooltipHide(e)}),x.on("tooltipHide",function(){m&&e.tooltip.cleanup()}),k.dispatch=x,k.bars=n,k.legend=s,k.xAxis=r,k.yAxis=i,k.interactiveLayer=o,k.options=e.utils.optionsFunc.bind(k),k._options=Object.create({},{width:{get:function(){return f},set:function(e){f=e}},height:{get:function(){return l},set:function(e){l=e}},showLegend:{get:function(){return c},set:function(e){c=e}},showXAxis:{get:function(){return h},set:function(e){h=e}},showYAxis:{get:function(){return p},set:function(e){p=e}},tooltips:{get:function(){return m},set:function(e){m=e}},tooltipContent:{get:function(){return g},set:function(e){g=e}},defaultState:{get:function(){return E},set:function(e){E=e}},noData:{get:function(){return S},set:function(e){S=e}},margin:{get:function(){return u},set:function(e){u.top=e.top!==undefined?e.top:u.top,u.right=e.right!==undefined?e.right:u.right,u.bottom=e.bottom!==undefined?e.bottom:u.bottom,u.left=e.left!==undefined?e.left:u.left}},color:{get:function(){return a},set:function(t){a=e.utils.getColor(t),s.color(a),n.color(a)}},duration:{get:function(){return T},set:function(e){T=e,C.reset(T),i.duration(T),r.duration(T)}},rightAlignYAxis:{get:function(){return d},set:function(e){d=e,i.orient(e?"right":"left")}},useInteractiveGuideline:{get:function(){return v},set:function(e){v=e,e===!0&&k.interactive(!1)}}}),e.utils.inheritOptions(k,n),e.utils.initOptions(k),k},e.models.ohlcBarChart=function(){var t=e.models.historicalBarChart(e.models.ohlcBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator(function(e){var n=e.series[0].data,r=n.open<n.close?"2ca02c":"d62728";return'<h3 style="color: #'+r+'">'+e.value+"</h3>"+"<table>"+"<tr><td>open:</td><td>"+t.yAxis.tickFormat()(n.open)+"</td></tr>"+"<tr><td>close:</td><td>"+t.yAxis.tickFormat()(n.close)+"</td></tr>"+"<tr><td>high</td><td>"+t.yAxis.tickFormat()(n.high)+"</td></tr>"+"<tr><td>low:</td><td>"+t.yAxis.tickFormat()(n.low)+"</td></tr>"+"</table>"}),t},e.models.legend=function(){"use strict";function c(h){return h.each(function(c){var h=n-t.left-t.right,p=d3.select(this);e.utils.initSVG(p);var d=p.selectAll("g.nv-legend").data([c]),v=d.enter().append("g").attr("class","nvd3 nv-legend").append("g"),m=d.select("g");d.attr("transform","translate("+t.left+","+t.top+")");var g=m.selectAll(".nv-series").data(function(e){return e}),y=g.enter().append("g").attr("class","nv-series").on("mouseover",function(e,t){l.legendMouseover(e,t)}).on("mouseout",function(e,t){l.legendMouseout(e,t)}).on("click",function(e,t){if(a){if(f)c.forEach(function(e){e.disabled=!0}),e.disabled=!1;else{for(var n=0;n<c.length;n++){var r=c[n];r.key==e.key&&(r.disabled=!e.disabled)}c.every(function(e){return e.disabled})&&c.forEach(function(e){e.disabled=!1})}l.stateChange({disabled:c.map(function(e){return!!e.disabled})})}l.legendClick(e,t)}).on("dblclick",function(e,t){a&&(c.forEach(function(e){e.disabled=!0}),e.disabled=!1,l.stateChange({disabled:c.map(function(e){return!!e.disabled})})),l.legendDblclick(e,t)});y.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),y.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8"),g.classed("nv-disabled",function(e){return e.disabled}),g.exit().remove(),g.select("circle").style("fill",function(e,t){return e.color||s(e,t)}).style("stroke",function(e,t){return e.color||s(e,t)}),g.select("text").text(i);if(o){var b=[];g.each(function(t,n){var r=d3.select(this).select("text"),i;try{i=r.node().getComputedTextLength();if(i<=0)throw Error()}catch(s){i=e.utils.calcApproxTextWidth(r)||0}b.push(i+28)});var w=0,E=0,S=[];while(E<h&&w<b.length)S[w]=b[w],E+=b[w++];w===0&&(w=1);while(E>h&&w>1){S=[],w--;for(var x=0;x<b.length;x++)b[x]>(S[x%w]||0)&&(S[x%w]=b[x]);E=S.reduce(function(e,t,n,r){return e+t})}var T=[];for(var N=0,C=0;N<w;N++)T[N]=C,C+=S[N];g.attr("transform",function(e,t){return"translate("+T[t%w]+","+(5+Math.floor(t/w)*20)+")"}),u?m.attr("transform","translate("+(n-t.right-E)+","+t.top+")"):m.attr("transform","translate(0,"+t.top+")"),r=t.top+t.bottom+Math.ceil(b.length/w)*20}else{var k=5,L=5,A=0,O;g.attr("transform",function(e,r){var i=d3.select(this).select("text").node().getComputedTextLength()+28;return O=L,n<t.left+t.right+O+i&&(L=O=5,k+=20),L+=i,L>A&&(A=L),"translate("+O+","+k+")"}),m.attr("transform","translate("+(n-t.right-A)+","+t.top+")"),r=t.top+t.bottom+k+15}}),c}var t={top:5,right:0,bottom:5,left:0},n=400,r=20,i=function(e){return e.key},s=e.utils.defaultColor(),o=!0,u=!0,a=!0,f=!1,l=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange");return c.dispatch=l,c.options=e.utils.optionsFunc.bind(c),c._options=Object.create({},{width:{get:function(){return n},set:function(e){n=e}},height:{get:function(){return r},set:function(e){r=e}},key:{get:function(){return i},set:function(e){i=e}},align:{get:function(){return o},set:function(e){o=e}},rightAlign:{get:function(){return u},set:function(e){u=e}},updateState:{get:function(){return a},set:function(e){a=e}},radioButtonMode:{get:function(){return f},set:function(e){f=e}},margin:{get:function(){return t},set:function(e){t.top=e.top!==undefined?e.top:t.top,t.right=e.right!==undefined?e.right:t.right,t.bottom=e.bottom!==undefined?e.bottom:t.bottom,t.left=e.left!==undefined?e.left:t.left}},color:{get:function(){return s},set:function(t){s=e.utils.getColor(t)}}}),e.utils.initOptions(c),c},e.models.line=function(){"use strict";function b(d){return y.reset(),y.models(t),d.each(function(d){var v=r-n.left-n.right,b=i-n.top-n.bottom,w=d3.select(this);e.utils.initSVG(w),c=t.xScale(),h=t.yScale(),m=m||c,g=g||h;var E=w.selectAll("g.nv-wrap.nv-line").data([d]),S=E.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),T=S.append("defs"),N=S.append("g"),C=E.select("g");N.append("g").attr("class","nv-groups"),N.append("g").attr("class","nv-scatterWrap"),E.attr("transform","translate("+n.left+","+n.top+")"),t.width(v).height(b);var k=E.select(".nv-scatterWrap");k.call(t),T.append("clipPath").attr("id","nv-edge-clip-"+t.id()).append("rect"),E.select("#nv-edge-clip-"+t.id()+" rect").attr("width",v).attr("height",b>0?b:0),C.attr("clip-path",l?"url(#nv-edge-clip-"+t.id()+")":""),k.attr("clip-path",l?"url(#nv-edge-clip-"+t.id()+")":"");var L=E.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});L.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),L.exit().remove(),L.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return s(e,t)}).style("stroke",function(e,t){return s(e,t)}),L.watchTransition(y,"line: groups").style("stroke-opacity",1).style("fill-opacity",.5);var A=L.selectAll("path.nv-area").data(function(e){return f(e)?[e]:[]});A.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(p).defined(a).x(function(t,n){return e.utils.NaNtoZero(m(o(t,n)))}).y0(function(t,n){return e.utils.NaNtoZero(g(u(t,n)))}).y1(function(e,t){return g(h.domain()[0]<=0?h.domain()[1]>=0?0:h.domain()[1]:h.domain()[0])}).apply(this,[t.values])}),L.exit().selectAll("path.nv-area").remove(),A.watchTransition(y,"line: areaPaths").attr("d",function(t){return d3.svg.area().interpolate(p).defined(a).x(function(t,n){return e.utils.NaNtoZero(c(o(t,n)))}).y0(function(t,n){return e.utils.NaNtoZero(h(u(t,n)))}).y1(function(e,t){return h(h.domain()[0]<=0?h.domain()[1]>=0?0:h.domain()[1]:h.domain()[0])}).apply(this,[t.values])});var O=L.selectAll("path.nv-line").data(function(e){return[e.values]});O.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(p).defined(a).x(function(t,n){return e.utils.NaNtoZero(m(o(t,n)))}).y(function(t,n){return e.utils.NaNtoZero(g(u(t,n)))})),O.watchTransition(y,"line: linePaths").attr("d",d3.svg.line().interpolate(p).defined(a).x(function(t,n){return e.utils.NaNtoZero(c(o(t,n)))}).y(function(t,n){return e.utils.NaNtoZero(h(u(t,n)))})),m=c.copy(),g=h.copy()}),y.renderEnd("line immediate"),b}var t=e.models.scatter(),n={top:0,right:0,bottom:0,left:0},r=960,i=500,s=e.utils.defaultColor(),o=function(e){return e.x},u=function(e){return e.y},a=function(e,t){return!isNaN(u(e,t))&&u(e,t)!==null},f=function(e){return e.area},l=!1,c,h,p="linear",d=250,v=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");t.pointSize(16).pointDomain([16,256]);var m,g,y=e.utils.renderWatch(v,d);return b.dispatch=v,b.scatter=t,t.dispatch.on("elementClick",function(){v.elementClick.apply(this,arguments)}),t.dispatch.on("elementMouseover",function(){v.elementMouseover.apply(this,arguments)}),t.dispatch.on("elementMouseout",function(){v.elementMouseout.apply(this,arguments)}),b.options=e.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return r},set:function(e){r=e}},height:{get:function(){return i},set:function(e){i=e}},defined:{get:function(){return a},set:function(e){a=e}},interpolate:{get:function(){return p},set:function(e){p=e}},clipEdge:{get:function(){return l},set:function(e){l=e}},margin:{get:function(){return n},set:function(e){n.top=e.top!==undefined?e.top:n.top,n.right=e.right!==undefined?e.right:n.right,n.bottom=e.bottom!==undefined?e.bottom:n.bottom,n.left=e.left!==undefined?e.left:n.left}},duration:{get:function(){return d},set:function(e){d=e,y.reset(d),t.duration(d)}},isArea:{get:function(){return f},set:function(e){f=d3.functor(e)}},x:{get:function(){return o},set:function(e){o=e,t.x(e)}},y:{get:function(){return u},set:function(e){u=e,t.y(e)}},color:{get:function(){return s},set:function(n){s=e.utils.getColor(n),t.color(s)}}}),e.utils.inheritOptions(b,t),e.utils.initOptions(b),b},e.models.lineChart=function(){"use strict";function L(m){return N.reset(),N.models(t),c&&N.models(n),h&&N.models(r),m.each(function(m){var N=d3.select(this),A=this;e.utils.initSVG(N);var O=(a||parseInt(N.style("width"))||960)-o.left-o.right,M=(f||parseInt(N.style("height"))||400)-o.top-o.bottom;L.update=function(){x===0?N.call(L):N.transition().duration(x).call(L)},L.container=this,b.setter(k(m),L.update).getter(C(m)).update(),b.disabled=m.map(function(e){return!!e.disabled});if(!w){var _;w={};for(_ in b)b[_]instanceof Array?w[_]=b[_].slice(0):w[_]=b[_]}if(!m||!m.length||!m.filter(function(e){return e.values.length}).length){var D=N.selectAll(".nv-noData").data([E]);return D.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),D.attr("x",o.left+O/2).attr("y",o.top+M/2).text(function(e){return e}),L}N.selectAll(".nv-noData").remove(),g=t.xScale(),y=t.yScale();var P=N.selectAll("g.nv-wrap.nv-lineChart").data([m]),H=P.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),B=P.select("g");H.append("rect").style("opacity",0),H.append("g").attr("class","nv-x nv-axis"),H.append("g").attr("class","nv-y nv-axis"),H.append("g").attr("class","nv-linesWrap"),H.append("g").attr("class","nv-legendWrap"),H.append("g").attr("class","nv-interactive"),B.select("rect").attr("width",O).attr("height",M>0?M:0),l&&(i.width(O),B.select(".nv-legendWrap").datum(m).call(i),o.top!=i.height()&&(o.top=i.height(),M=(f||parseInt(N.style("height"))||400)-o.top-o.bottom),P.select(".nv-legendWrap").attr("transform","translate(0,"+ -o.top+")")),P.attr("transform","translate("+o.left+","+o.top+")"),p&&B.select(".nv-y.nv-axis").attr("transform","translate("+O+",0)"),d&&(s.width(O).height(M).margin({left:o.left,top:o.top}).svgContainer(N).xScale(g),P.select(".nv-interactive").call(s)),t.width(O).height(M).color(m.map(function(e,t){return e.color||u(e,t)}).filter(function(e,t){return!m[t].disabled}));var j=B.select(".nv-linesWrap").datum(m.filter(function(e){return!e.disabled}));j.call(t),c&&(n.scale(g).ticks(e.utils.calcTicksX(O/100,m)).tickSize(-M,0),B.select(".nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),B.select(".nv-x.nv-axis").call(n)),h&&(r.scale(y).ticks(e.utils.calcTicksY(M/36,m)).tickSize(-O,0),B.select(".nv-y.nv-axis").call(r)),i.dispatch.on("stateChange",function(e){for(var t in e)b[t]=e[t];S.stateChange(b),L.update()}),s.dispatch.on("elementMousemove",function(i){t.clearHighlights();var a,f,l,c=[];m.filter(function(e,t){return e.seriesIndex=t,!e.disabled}).forEach(function(n,r){f=e.interactiveBisect(n.values,i.pointXValue,L.x()),t.highlightPoint(r,f,!0);var s=n.values[f];if(typeof s=="undefined")return;typeof a=="undefined"&&(a=s),typeof l=="undefined"&&(l=L.xScale()(L.x()(s,f))),c.push({key:n.key,value:L.y()(s,f),color:u(n,n.seriesIndex)})});if(c.length>2){var h=L.yScale().invert(i.mouseY),p=Math.abs(L.yScale().domain()[0]-L.yScale().domain()[1]),d=.03*p,g=e.nearestValueIndex(c.map(function(e){return e.value}),h,d);g!==null&&(c[g].highlight=!0)}var y=n.tickFormat()(L.x()(a,f));s.tooltip.position({left:l+o.left,top:i.mouseY+o.top}).chartContainer(A.parentNode).enabled(v).valueFormatter(function(e,t){return r.tickFormat()(e)}).data({value:y,series:c})(),s.renderGuideLine(l)}),s.dispatch.on("elementClick",function(n){var r,i=[];m.filter(function(e,t){return e.seriesIndex=t,!e.disabled}).forEach(function(t){var s=e.interactiveBisect(t.values,n.pointXValue,L.x()),o=t.values[s];if(typeof o=="undefined")return;typeof r=="undefined"&&(r=L.xScale()(L.x()(o,s)));var u=L.yScale()(L.y()(o,s));i.push({point:o,pointIndex:s,pos:[r,u],seriesIndex:t.seriesIndex,series:t})}),t.dispatch.elementClick(i)}),s.dispatch.on("elementMouseout",function(e){S.tooltipHide(),t.clearHighlights()}),S.on("tooltipShow",function(e){v&&T(e,A.parentNode)}),S.on("changeState",function(e){typeof e.disabled!="undefined"&&m.length===e.disabled.length&&(m.forEach(function(t,n){t.disabled=e.disabled[n]}),b.disabled=e.disabled),L.update()})}),N.renderEnd("lineChart immediate"),L}var t=e.models.line(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s=e.interactiveGuideline(),o={top:30,right:20,bottom:50,left:60},u=e.utils.defaultColor(),a=null,f=null,l=!0,c=!0,h=!0,p=!1,d=!1,v=!0,m=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},g,y,b=e.utils.state(),w=null,E="No Data Available.",S=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),x=250;n.orient("bottom").tickPadding(7),r.orient(p?"right":"left");var T=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=m(i.series.key,a,f,i,L);e.tooltip.show([o,u],l,null,null,s)},N=e.utils.renderWatch(S,x),C=function(e){return function(){return{active:e.map(function(e){return!e.disabled})}}},k=function(e){return function(t){t.active!==undefined&&e.forEach(function(e,n){e.disabled=!t.active[n]})}};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+o.left,e.pos[1]+o.top],S.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){S.tooltipHide(e)}),S.on("tooltipHide",function(){v&&e.tooltip.cleanup()}),L.dispatch=S,L.lines=t,L.legend=i,L.xAxis=n,L.yAxis=r,L.interactiveLayer=s,L.dispatch=S,L.options=e.utils.optionsFunc.bind(L),L._options=Object.create({},{width:{get:function(){return a},set:function(e){a=e}},height:{get:function(){return f},set:function(e){f=e}},showLegend:{get:function(){return l},set:function(e){l=e}},showXAxis:{get:function(){return c},set:function(e){c=e}},showYAxis:{get:function(){return h},set:function(e){h=e}},tooltips:{get:function(){return v},set:function(e){v=e}},tooltipContent:{get:function(){return m},set:function(e){m=e}},defaultState:{get:function(){return w},set:function(e){w=e}},noData:{get:function(){return E},set:function(e){E=e}},margin:{get:function(){return o},set:function(e){o.top=e.top!==undefined?e.top:o.top,o.right=e.right!==undefined?e.right:o.right,o.bottom=e.bottom!==undefined?e.bottom:o.bottom,o.left=e.left!==undefined?e.left:o.left}},duration:{get:function(){return x},set:function(e){x=e,N.reset(x),t.duration(x),n.duration(x),r.duration(x)}},color:{get:function(){return u},set:function(n){u=e.utils.getColor(n),i.color(u),t.color(u)}},rightAlignYAxis:{get:function(){return p},set:function(e){p=e,r.orient(p?"right":"left")}},useInteractiveGuideline:{get:function(){return d},set:function(e){d=e,d&&(t.interactive(!1),t.useVoronoi(!1))}}}),e.utils.inheritOptions(L,t),e.utils.initOptions(L),L},e.models.linePlusBarChart=function(){"use strict";function X(L){return L.each(function(L){function pt(e){var t=+(e=="e"),n=t?1:-1,r=Q/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function dt(){h.empty()||h.extent(C),lt.data([h.empty()?O.domain():C]).each(function(e,t){var n=O(e[0])-O.range()[0],r=O.range()[1]-O(e[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",O(e[1])).attr("width",r<0?0:r)})}function vt(){C=h.empty()?null:h.extent(),N=h.empty()?O.domain():h.extent(),B.brush({extent:N,brush:h}),dt(),r.width(J).height(K).color(L.map(function(e,t){return e.color||b(e,t)}).filter(function(e,t){return!L[t].disabled&&L[t].bar})),t.width(J).height(K).color(L.map(function(e,t){return e.color||b(e,t)}).filter(function(e,t){return!L[t].disabled&&!L[t].bar}));var n=st.select(".nv-focus .nv-barsWrap").datum(Z.length?Z.map(function(e,t){return{key:e.key,values:e.values.filter(function(e,t){return r.x()(e,t)>=N[0]&&r.x()(e,t)<=N[1]})}}):[{values:[]}]),i=st.select(".nv-focus .nv-linesWrap").datum(et[0].disabled?[{values:[]}]:et.map(function(e,n){return{key:e.key,values:e.values.filter(function(e,n){return t.x()(e,n)>=N[0]&&t.x()(e,n)<=N[1]})}}));Z.length?A=r.xScale():A=t.xScale(),s.scale(A).ticks(e.utils.calcTicksX(J/100,L)).tickSize(-K,0),s.domain([Math.ceil(N[0]),Math.floor(N[1])]),st.select(".nv-x.nv-axis").transition().duration(j).call(s),n.transition().duration(j).call(r),i.transition().duration(j).call(t),st.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+M.range()[0]+")"),u.scale(M).ticks(e.utils.calcTicksY(K/36,L)).tickSize(-J,0),a.scale(_).ticks(e.utils.calcTicksY(K/36,L)).tickSize(Z.length?0:-J,0),st.select(".nv-focus .nv-y1.nv-axis").style("opacity",Z.length?1:0),st.select(".nv-focus .nv-y2.nv-axis").style("opacity",et.length&&!et[0].disabled?1:0).attr("transform","translate("+A.range()[1]+",0)"),st.select(".nv-focus .nv-y1.nv-axis").transition().duration(j).call(u),st.select(".nv-focus .nv-y2.nv-axis").transition().duration(j).call(a)}var V=d3.select(this),$=this;e.utils.initSVG(V);var J=(v||parseInt(V.style("width"))||960)-p.left-p.right,K=(m||parseInt(V.style("height"))||400)-p.top-p.bottom-(E?T:0),Q=T-d.top-d.bottom;X.update=function(){V.transition().duration(j).call(X)},X.container=this,F.setter(W(L),X.update).getter(z(L)).update(),F.disabled=L.map(function(e){return!!e.disabled});if(!I){var G;I={};for(G in F)F[G]instanceof Array?I[G]=F[G].slice(0):I[G]=F[G]}if(!L||!L.length||!L.filter(function(e){return e.values.length}).length){var Y=V.selectAll(".nv-noData").data([H]);return Y.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),Y.attr("x",p.left+J/2).attr("y",p.top+K/2).text(function(e){return e}),X}V.selectAll(".nv-noData").remove();var Z=L.filter(function(e){return!e.disabled&&e.bar}),et=L.filter(function(e){return!e.bar});A=r.xScale(),O=o.scale(),M=r.yScale(),_=t.yScale(),D=i.yScale(),P=n.yScale();var tt=L.filter(function(e){return!e.disabled&&e.bar}).map(function(e){return e.values.map(function(e,t){return{x:g(e,t),y:y(e,t)}})}),nt=L.filter(function(e){return!e.disabled&&!e.bar}).map(function(e){return e.values.map(function(e,t){return{x:g(e,t),y:y(e,t)}})});A.range([0,J]),O.domain(d3.extent(d3.merge(tt.concat(nt)),function(e){return e.x})).range([0,J]);var rt=V.selectAll("g.nv-wrap.nv-linePlusBar").data([L]),it=rt.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),st=rt.select("g");it.append("g").attr("class","nv-legendWrap");var ot=it.append("g").attr("class","nv-focus");ot.append("g").attr("class","nv-x nv-axis"),ot.append("g").attr("class","nv-y1 nv-axis"),ot.append("g").attr("class","nv-y2 nv-axis"),ot.append("g").attr("class","nv-barsWrap"),ot.append("g").attr("class","nv-linesWrap");var ut=it.append("g").attr("class","nv-context");ut.append("g").attr("class","nv-x nv-axis"),ut.append("g").attr("class","nv-y1 nv-axis"),ut.append("g").attr("class","nv-y2 nv-axis"),ut.append("g").attr("class","nv-barsWrap"),ut.append("g").attr("class","nv-linesWrap"),ut.append("g").attr("class","nv-brushBackground"),ut.append("g").attr("class","nv-x nv-brush"),w&&(c.width(J/2),st.select(".nv-legendWrap").datum(L.map(function(e){return e.originalKey=e.originalKey===undefined?e.key:e.originalKey,e.key=e.originalKey+(e.bar?q:R),e})).call(c),p.top!=c.height()&&(p.top=c.height(),K=(m||parseInt(V.style("height"))||400)-p.top-p.bottom-T),st.select(".nv-legendWrap").attr("transform","translate("+J/2+","+ -p.top+")")),rt.attr("transform","translate("+p.left+","+p.top+")"),st.select(".nv-context").style("display",E?"initial":"none"),i.width(J).height(Q).color(L.map(function(e,t){return e.color||b(e,t)}).filter(function(e,t){return!L[t].disabled&&L[t].bar})),n.width(J).height(Q).color(L.map(function(e,t){return e.color||b(e,t)}).filter(function(e,t){return!L[t].disabled&&!L[t].bar}));var at=st.select(".nv-context .nv-barsWrap").datum(Z.length?Z:[{values:[]}]),ft=st.select(".nv-context .nv-linesWrap").datum(et[0].disabled?[{values:[]}]:et);st.select(".nv-context").attr("transform","translate(0,"+(K+p.bottom+d.top)+")"),at.transition().call(i),ft.transition().call(n),x&&(o.ticks(e.utils.calcTicksX(J/100,L)).tickSize(-Q,0),st.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+D.range()[0]+")"),st.select(".nv-context .nv-x.nv-axis").transition().call(o)),S&&(f.scale(D).ticks(Q/36).tickSize(-J,0),l.scale(P).ticks(Q/36).tickSize(Z.length?0:-J,0),st.select(".nv-context .nv-y3.nv-axis").style("opacity",Z.length?1:0).attr("transform","translate(0,"+O.range()[0]+")"),st.select(".nv-context .nv-y2.nv-axis").style("opacity",et.length?1:0).attr("transform","translate("+O.range()[1]+",0)"),st.select(".nv-context .nv-y1.nv-axis").transition().call(f),st.select(".nv-context .nv-y2.nv-axis").transition().call(l)),h.x(O).on("brush",vt),C&&h.extent(C);var lt=st.select(".nv-brushBackground").selectAll("g").data([C||h.extent()]),ct=lt.enter().append("g");ct.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",Q),ct.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",Q);var ht=st.select(".nv-x.nv-brush").call(h);ht.selectAll("rect").attr("height",Q),ht.selectAll(".resize").append("path").attr("d",pt),c.dispatch.on("stateChange",function(e){for(var t in e)F[t]=e[t];B.stateChange(F),X.update()}),B.on("tooltipShow",function(e){k&&U(e,$.parentNode)}),B.on("changeState",function(e){typeof e.disabled!="undefined"&&(L.forEach(function(t,n){t.disabled=e.disabled[n]}),F.disabled=e.disabled),X.update()}),vt()}),X}var t=e.models.line(),n=e.models.line(),r=e.models.historicalBar(),i=e.models.historicalBar(),s=e.models.axis(),o=e.models.axis(),u=e.models.axis(),a=e.models.axis(),f=e.models.axis(),l=e.models.axis(),c=e.models.legend(),h=d3.svg.brush(),p={top:30,right:30,bottom:30,left:60},d={top:0,right:30,bottom:20,left:60},v=null,m=null,g=function(e){return e.x},y=function(e){return e.y},b=e.utils.defaultColor(),w=!0,E=!0,S=!1,x=!0,T=50,N,C=null,k=!0,L=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},A,O,M,_,D,P,H="No Data Available.",B=d3.dispatch("tooltipShow","tooltipHide","brush","stateChange","changeState"),j=0,F=e.utils.state(),I=null,q=" (left axis)",R=" (right axis)";t.clipEdge(!0),n.interactive(!1),s.orient("bottom").tickPadding(5),u.orient("left"),a.orient("right"),o.orient("bottom").tickPadding(5),f.orient("left"),l.orient("right");var U=function(n,r){N&&(n.pointIndex+=Math.ceil(N[0]));var i=n.pos[0]+(r.offsetLeft||0),o=n.pos[1]+(r.offsetTop||0),f=s.tickFormat()(t.x()(n.point,n.pointIndex)),l=(n.series.bar?u:a).tickFormat()(t.y()(n.point,n.pointIndex)),c=L(n.series.key,f,l,n,X);e.tooltip.show([i,o],c,n.value<0?"n":"s",null,r)},z=function(e){return function(){return{active:e.map(function(e){return!e.disabled})}}},W=function(e){return function(t){t.active!==undefined&&e.forEach(function(e,n){e.disabled=!t.active[n]})}};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+p.left,e.pos[1]+p.top],B.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){B.tooltipHide(e)}),r.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+p.left,e.pos[1]+p.top],B.tooltipShow(e)}),r.dispatch.on("elementMouseout.tooltip",function(e){B.tooltipHide(e)}),B.on("tooltipHide",function(){k&&e.tooltip.cleanup()}),X.dispatch=B,X.legend=c,X.lines=t,X.lines2=n,X.bars=r,X.bars2=i,X.xAxis=s,X.x2Axis=o,X.y1Axis=u,X.y2Axis=a,X.y3Axis=f,X.y4Axis=l,X.options=e.utils.optionsFunc.bind(X),X._options=Object.create({},{width:{get:function(){return v},set:function(e){v=e}},height:{get:function(){return m},set:function(e){m=e}},showLegend:{get:function(){return w},set:function(e){w=e}},tooltips:{get:function(){return k},set:function(e){k=e}},tooltipContent:{get:function(){return L},set:function(e){L=e}},brushExtent:{get:function(){return C},set:function(e){C=e}},noData:{get:function(){return H},set:function(e){H=e}},focusEnable:{get:function(){return E},set:function(e){E=e}},focusHeight:{get:function(){return T},set:function(e){T=e}},focusShowAxisX:{get:function(){return x},set:function(e){x=e}},focusShowAxisY:{get:function(){return S},set:function(e){S=e}},legendLeftAxisHint:{get:function(){return q},set:function(e){q=e}},legendRightAxisHint:{get:function(){return R},set:function(e){R=e}},margin:{get:function(){return p},set:function(e){p.top=e.top!==undefined?e.top:p.top,p.right=e.right!==undefined?e.right:p.right,p.bottom=e.bottom!==undefined?e.bottom:p.bottom,p.left=e.left!==undefined?e.left:p.left}},duration:{get:function(){return j},set:function(e){j=e}},color:{get:function(){return b},set:function(t){b=e.utils.getColor(t),c.color(b)}},x:{get:function(){return g},set:function(e){g=e,t.x(e),n.x(e),r.x(e),i.x(e)}},y:{get:function(){return y},set:function(e){y=e,t.y(e),n.y(e),r.y(e),i.y(e)}}}),e.utils.inheritOptions(X,t),e.utils.initOptions(X),X},e.models.lineWithFocusChart=function(){"use strict";function M(S){return S.each(function(S){function J(e){var t=+(e=="e"),n=t?1:-1,r=B/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"Z"+"M"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function K(){a.empty()||a.extent(w),X.data([a.empty()?g.domain():w]).each(function(e,t){var n=g(e[0])-v.range()[0],r=v.range()[1]-g(e[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",g(e[1])).attr("width",r<0?0:r)})}function Q(){w=a.empty()?null:a.extent();var e=a.empty()?g.domain():a.extent();if(Math.abs(e[0]-e[1])<=1)return;T.brush({extent:e,brush:a}),K();var n=R.select(".nv-focus .nv-linesWrap").datum(S.filter(function(e){return!e.disabled}).map(function(n,r){return{key:n.key,area:n.area,values:n.values.filter(function(n,r){return t.x()(n,r)>=e[0]&&t.x()(n,r)<=e[1]})}}));n.transition().duration(N).call(t),R.select(".nv-focus .nv-x.nv-axis").transition().duration(N).call(r),R.select(".nv-focus .nv-y.nv-axis").transition().duration(N).call(i)}var _=d3.select(this),D=this;e.utils.initSVG(_);var P=(h||parseInt(_.style("width"))||960)-f.left-f.right,H=(p||parseInt(_.style("height"))||400)-f.top-f.bottom-d,B=d-l.top-l.bottom;M.update=function(){_.transition().duration(N).call(M)},M.container=this,C.setter(O(S),M.update).getter(A(S)).update(),C.disabled=S.map(function(e){return!!e.disabled});if(!k){var j;k={};for(j in C)C[j]instanceof Array?k[j]=C[j].slice(0):k[j]=C[j]}if(!S||!S.length||!S.filter(function(e){return e.values.length}).length){var F=_.selectAll(".nv-noData").data([x]);return F.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),F.attr("x",f.left+P/2).attr("y",f.top+H/2).text(function(e){return e}),M}_.selectAll(".nv-noData").remove(),v=t.xScale(),m=t.yScale(),g=n.xScale(),y=n.yScale();var I=_.selectAll("g.nv-wrap.nv-lineWithFocusChart").data([S]),q=I.enter().append("g").attr("class","nvd3 nv-wrap nv-lineWithFocusChart").append("g"),R=I.select("g");q.append("g").attr("class","nv-legendWrap");var U=q.append("g").attr("class","nv-focus");U.append("g").attr("class","nv-x nv-axis"),U.append("g").attr("class","nv-y nv-axis"),U.append("g").attr("class","nv-linesWrap");var z=q.append("g").attr("class","nv-context");z.append("g").attr("class","nv-x nv-axis"),z.append("g").attr("class","nv-y nv-axis"),z.append("g").attr("class","nv-linesWrap"),z.append("g").attr("class","nv-brushBackground"),z.append("g").attr("class","nv-x nv-brush"),b&&(u.width(P),R.select(".nv-legendWrap").datum(S).call(u),f.top!=u.height()&&(f.top=u.height(),H=(p||parseInt(_.style("height"))||400)-f.top-f.bottom-d),R.select(".nv-legendWrap").attr("transform","translate(0,"+ -f.top+")")),I.attr("transform","translate("+f.left+","+f.top+")"),t.width(P).height(H).color(S.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!S[t].disabled})),n.defined(t.defined()).width(P).height(B).color(S.map(function(e,t){return e.color||c(e,t)}).filter(function(e,t){return!S[t].disabled})),R.select(".nv-context").attr("transform","translate(0,"+(H+f.bottom+l.top)+")");var W=R.select(".nv-context .nv-linesWrap").datum(S.filter(function(e){return!e.disabled}));d3.transition(W).call(n),r.scale(v).ticks(e.utils.calcTicksX(P/100,S)).tickSize(-H,0),i.scale(m).ticks(e.utils.calcTicksY(H/36,S)).tickSize(-P,0),R.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+H+")"),a.x(g).on("brush",function(){var e=M.duration();M.duration(0),Q(),M.duration(e)}),w&&a.extent(w);var X=R.select(".nv-brushBackground").selectAll("g").data([w||a.extent()]),V=X.enter().append("g");V.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",B),V.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",B);var $=R.select(".nv-x.nv-brush").call(a);$.selectAll("rect").attr("height",B),$.selectAll(".resize").append("path").attr("d",J),Q(),s.scale(g).ticks(e.utils.calcTicksX(P/100,S)).tickSize(-B,0),R.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),d3.transition(R.select(".nv-context .nv-x.nv-axis")).call(s),o.scale(y).ticks(e.utils.calcTicksY(B/36,S)).tickSize(-P,0),d3.transition(R.select(".nv-context .nv-y.nv-axis")).call(o),R.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+y.range()[0]+")"),u.dispatch.on("stateChange",function(e){for(var t in e)C[t]=e[t];T.stateChange(C),M.update()}),T.on("tooltipShow",function(e){E&&L(e,D.parentNode)}),T.on("changeState",function(e){typeof e.disabled!="undefined"&&S.forEach(function(t,n){t.disabled=e.disabled[n]}),M.update()})}),M}var t=e.models.line(),n=e.models.line(),r=e.models.axis(),i=e.models.axis(),s=e.models.axis(),o=e.models.axis(),u=e.models.legend(),a=d3.svg.brush(),f={top:30,right:30,bottom:30,left:60},l={top:0,right:30,bottom:20,left:60},c=e.utils.defaultColor(),h=null,p=null,d=100,v,m,g,y,b=!0,w=null,E=!0,S=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},x="No Data Available.",T=d3.dispatch("tooltipShow","tooltipHide","brush","stateChange","changeState"),N=250,C=e.utils.state(),k=null;t.clipEdge(!0),n.interactive(!1),r.orient("bottom").tickPadding(5),i.orient("left"),s.orient("bottom").tickPadding(5),o.orient("left");var L=function(n,s){var o=n.pos[0]+(s.offsetLeft||0),u=n.pos[1]+(s.offsetTop||0),a=r.tickFormat()(t.x()(n.point,n.pointIndex)),f=i.tickFormat()(t.y()(n.point,n.pointIndex)),l=S(n.series.key,a,f,n,M);e.tooltip.show([o,u],l,null,null,s)},A=function(e){return function(){return{active:e.map(function(e){return!e.disabled})}}},O=function(e){return function(t){t.active!==undefined&&e.forEach(function(e,n){e.disabled=!t.active[n]})}};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+f.left,e.pos[1]+f.top],T.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){T.tooltipHide(e)}),T.on("tooltipHide",function(){E&&e.tooltip.cleanup()}),M.dispatch=T,M.legend=u,M.lines=t,M.lines2=n,M.xAxis=r,M.yAxis=i,M.x2Axis=s,M.y2Axis=o,M.options=e.utils.optionsFunc.bind(M),M._options=Object.create({},{width:{get:function(){return h},set:function(e){h=e}},height:{get:function(){return p},set:function(e){p=e}},focusHeight:{get:function(){return d},set:function(e){d=e}},showLegend:{get:function(){return b},set:function(e){b=e}},brushExtent:{get:function(){return w},set:function(e){w=e}},tooltips:{get:function(){return E},set:function(e){E=e}},tooltipContent:{get:function(){return S},set:function(e){S=e}},defaultState:{get:function(){return k},set:function(e){k=e}},noData:{get:function(){return x},set:function(e){x=e}},margin:{get:function(){return f},set:function(e){f.top=e.top!==undefined?e.top:f.top,f.right=e.right!==undefined?e.right:f.right,f.bottom=e.bottom!==undefined?e.bottom:f.bottom,f.left=e.left!==undefined?e.left:f.left}},color:{get:function(){return c},set:function(t){c=e.utils.getColor(t),u.color(c)}},interpolate:{get:function(){return t.interpolate()},set:function(e){t.interpolate(e),n.interpolate(e)}},xTickFormat:{get:function(){return r.xTickFormat()},set:function(e){r.xTickFormat(e),s.xTickFormat(e)}},yTickFormat:{get:function(){return i.yTickFormat()},set:function(e){i.yTickFormat(e),o.yTickFormat(e)}},duration:{get:function(){return N},set:function(e){N=e,i.duration(N),r.duration(N)}},x:{get:function(){return t.x()},set:function(e){t.x(e),n.x(e)}},y:{get:function(){return t.y()},set:function(e){t.y(e),n.y(e)}}}),e.utils.inheritOptions(M,t),e.utils.initOptions(M),M},e.models.multiBar=function(){"use strict";function L(A){return C.reset(),A.each(function(L){var A=n-t.left-t.right,O=r-t.top-t.bottom,M=d3.select(this);e.utils.initSVG(M);var _=function(e,t){return e.series===L.length-1&&t===L[0].values.length-1?!0:!1};d&&L.length&&(d=[{values:L[0].values.map(function(e){return{x:e.x,y:0,series:e.series,size:.01}})}]),c&&(L=d3.layout.stack().offset(h).values(function(e){return e.values}).y(a)(!L.length&&d?d:L)),L.forEach(function(e,t){e.values.forEach(function(e){e.series=t})}),c&&L[0].values.map(function(e,t){var n=0,r=0;L.map(function(e){var i=e.values[t];i.size=Math.abs(i.y),i.y<0?(i.y1=r,r-=i.size):(i.y1=i.size+n,n+=i.size)})});var D=y&&b?[]:L.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0,y1:e.y1}})});i.domain(y||d3.merge(D).map(function(e){return e.x})).rangeBands(w||[0,A],S),s.domain(b||d3.extent(d3.merge(D).map(function(e){return c?e.y>0?e.y1:e.y1+e.y:e.y}).concat(f))).range(E||[O,0]),i.domain()[0]===i.domain()[1]&&(i.domain()[0]?i.domain([i.domain()[0]-i.domain()[0]*.01,i.domain()[1]+i.domain()[1]*.01]):i.domain([-1,1])),s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]+s.domain()[0]*.01,s.domain()[1]-s.domain()[1]*.01]):s.domain([-1,1])),T=T||i,N=N||s;var P=M.selectAll("g.nv-wrap.nv-multibar").data([L]),H=P.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),B=H.append("defs"),j=H.append("g"),F=P.select("g");j.append("g").attr("class","nv-groups"),P.attr("transform","translate("+t.left+","+t.top+")"),B.append("clipPath").attr("id","nv-edge-clip-"+o).append("rect"),P.select("#nv-edge-clip-"+o+" rect").attr("width",A).attr("height",O),F.attr("clip-path",l?"url(#nv-edge-clip-"+o+")":"");var I=P.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e,t){return t});I.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var q=C.transition(I.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,g)).attr("y",function(e){return(c?N(e.y0):N(0))||0}).attr("height",0).remove();q.delay&&q.delay(function(e,t){var n=t*(g/(k+1))-t;return n}),I.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return p(e,t)}).style("stroke",function(e,t){return p(e,t)}),I.style("stroke-opacity",1).style("fill-opacity",.75);var R=I.selectAll("rect.nv-bar").data(function(e){return d&&!L.length?d.values:e.values});R.exit().remove();var U=R.enter().append("rect").attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(e,t,n){return c?0:n*i.rangeBand()/L.length}).attr("y",function(e){return N(c?e.y0:0)||0}).attr("height",0).attr("width",i.rangeBand()/(c?1:L.length)).attr("transform",function(e,t){return"translate("+i(u(e,t))+",0)"});R.style("fill",function(e,t,n){return p(e,n,t)}).style("stroke",function(e,t,n){return p(e,n,t)}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),x.elementMouseover({value:a(e,t),point:e,series:L[e.series],pos:[i(u(e,t))+i.rangeBand()*(c?L.length/2:e.series+.5)/L.length,s(a(e,t)+(c?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),x.elementMouseout({value:a(e,t),point:e,series:L[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("click",function(e,t){x.elementClick({value:a(e,t),point:e,series:L[e.series],pos:[i(u(e,t))+i.rangeBand()*(c?L.length/2:e.series+.5)/L.length,s(a(e,t)+(c?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){x.elementDblClick({value:a(e,t),point:e,series:L[e.series],pos:[i(u(e,t))+i.rangeBand()*(c?L.length/2:e.series+.5)/L.length,s(a(e,t)+(c?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),R.attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(e,t){return"translate("+i(u(e,t))+",0)"}),v&&(m||(m=L.map(function(){return!0})),R.style("fill",function(e,t,n){return d3.rgb(v(e,t)).darker(m.map(function(e,t){return t}).filter(function(e,t){return!m[t]})[n]).toString()}).style("stroke",function(e,t,n){return d3.rgb(v(e,t)).darker(m.map(function(e,t){return t}).filter(function(e,t){return!m[t]})[n]).toString()}));var z=R.watchTransition(C,"multibar",Math.min(250,g)).delay(function(e,t){return t*g/L[0].values.length});c?z.attr("y",function(e,t){return s(c?e.y1:0)}).attr("height",function(e,t){return Math.max(Math.abs(s(e.y+(c?e.y0:0))-s(c?e.y0:0)),1)}).attr("x",function(e,t){return c?0:e.series*i.rangeBand()/L.length}).attr("width",i.rangeBand()/(c?1:L.length)):z.attr("x",function(e,t){return e.series*i.rangeBand()/L.length}).attr("width",i.rangeBand()/L.length).attr("y",function(e,t){return a(e,t)<0?s(0):s(0)-s(a(e,t))<1?s(0)-1:s(a(e,t))||0}).attr("height",function(e,t){return Math.max(Math.abs(s(a(e,t))-s(0)),1)||0}),T=i.copy(),N=s.copy(),L[0]&&L[0].values&&(k=L[0].values.length)}),C.renderEnd("multibar immediate"),L}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=d3.scale.ordinal(),s=d3.scale.linear(),o=Math.floor(Math.random()*1e4),u=function(e){return e.x},a=function(e){return e.y},f=[0],l=!0,c=!1,h="zero",p=e.utils.defaultColor(),d=!1,v=null,m,g=500,y,b,w,E,S=.1,x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),T,N,C=e.utils.renderWatch(x,g),k=0;return L.dispatch=x,L.options=e.utils.optionsFunc.bind(L),L._options=Object.create({},{width:{get:function(){return n},set:function(e){n=e}},height:{get:function(){return r},set:function(e){r=e}},x:{get:function(){return u},set:function(e){u=e}},y:{get:function(){return a},set:function(e){a=e}},xScale:{get:function(){return i},set:function(e){i=e}},yScale:{get:function(){return s},set:function(e){s=e}},xDomain:{get:function(){return y},set:function(e){y=e}},yDomain:{get:function(){return b},set:function(e){b=e}},xRange:{get:function(){return w},set:function(e){w=e}},yRange:{get:function(){return E},set:function(e){E=e}},forceY:{get:function(){return f},set:function(e){f=e}},stacked:{get:function(){return c},set:function(e){c=e}},stackOffset:{get:function(){return h},set:function(e){h=e}},clipEdge:{get:function(){return l},set:function(e){l=e}},disabled:{get:function(){return m},set:function(e){m=e}},id:{get:function(){return o},set:function(e){o=e}},hideable:{get:function(){return d},set:function(e){d=e}},groupSpacing:{get:function(){return S},set:function(e){S=e}},margin:{get:function(){return t},set:function(e){t.top=e.top!==undefined?e.top:t.top,t.right=e.right!==undefined?e.right:t.right,t.bottom=e.bottom!==undefined?e.bottom:t.bottom,t.left=e.left!==undefined?e.left:t.left}},duration:{get:function(){return g},set:function(e){g=e,C.reset(g)}},color:{get:function(){return p},set:function(t){p=e.utils.getColor(t)}},barColor:{get:function(){return v},set:function(t){v=e.utils.getColor(t)}}}),e.utils.initOptions(L),L},e.models.multiBarChart=function(){"use strict";function B(b){return M.reset(),M.models(t),p&&M.models(n),d&&M.models(r),b.each(function(b){var w=d3.select(this),S=this;e.utils.initSVG(w);var M=(u||parseInt(w.style("width"))||960)-o.left-o.right,j=(a||parseInt(w.style("height"))||400)-o.top-o.bottom;B.update=function(){O===0?w.call(B):w.transition().duration(O).call(B)},B.container=this,N.setter(H(b),B.update).getter(P(b)).update(),N.disabled=b.map(function(e){return!!e.disabled});if(!C){var F;C={};for(F in N)N[F]instanceof Array?C[F]=N[F].slice(0):C[F]=N[F]}if(!b||!b.length||!b.filter(function(e){return e.values.length}).length){var I=w.selectAll(".nv-noData").data([k]);return I.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),I.attr("x",o.left+M/2).attr("y",o.top+j/2).text(function(e){return e}),B}w.selectAll(".nv-noData").remove(),x=t.xScale(),T=t.yScale();var q=w.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([b]),R=q.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),U=q.select("g");R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y nv-axis"),R.append("g").attr("class","nv-barsWrap"),R.append("g").attr("class","nv-legendWrap"),R.append("g").attr("class","nv-controlsWrap"),h&&(i.width(M-A()),t.barColor()&&b.forEach(function(e,t){e.color=d3.rgb("#ccc").darker(t*1.5).toString()}),U.select(".nv-legendWrap").datum(b).call(i),o.top!=i.height()&&(o.top=i.height(),j=(a||parseInt(w.style("height"))||400)-o.top-o.bottom),U.select(".nv-legendWrap").attr("transform","translate("+A()+","+ -o.top+")"));if(l){var z=[{key:c.grouped||"Grouped",disabled:t.stacked()},{key:c.stacked||"Stacked",disabled:!t.stacked()}];s.width(A()).color(["#444","#444","#444"]),U.select(".nv-controlsWrap").datum(z).attr("transform","translate(0,"+ -o.top+")").call(s)}q.attr("transform","translate("+o.left+","+o.top+")"),v&&U.select(".nv-y.nv-axis").attr("transform","translate("+M+",0)"),t.disabled(b.map(function(e){return e.disabled})).width(M).height(j).color(b.map(function(e,t){return e.color||f(e,t)}).filter(function(e,t){return!b[t].disabled}));var W=U.select(".nv-barsWrap").datum(b.filter(function(e){return!e.disabled}));W.call(t);if(p){n.scale(x).ticks(e.utils.calcTicksX(M/100,b)).tickSize(-j,0),U.select(".nv-x.nv-axis").attr("transform","translate(0,"+T.range()[0]+")"),U.select(".nv-x.nv-axis").call(n);var X=U.select(".nv-x.nv-axis > g").selectAll("g");X.selectAll("line, text").style("opacity",1);if(g){var V=function(e,t){return"translate("+e+","+t+")"},$=5,J=17;X.selectAll("text").attr("transform",function(e,t,n){return V(0,n%2==0?$:J)});var K=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;U.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(e,t){return V(0,t===0||K%2!==0?J:$)})}m&&X.filter(function(e,t){return t%Math.ceil(b[0].values.length/(M/100))!==0}).selectAll("text, line").style("opacity",0),y&&X.selectAll(".tick text").attr("transform","rotate("+y+" 0,0)").style("text-anchor",y>0?"start":"end"),U.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}d&&(r.scale(T).ticks(e.utils.calcTicksY(j/36,b)).tickSize(-M,0),U.select(".nv-y.nv-axis").call(r)),i.dispatch.on("stateChange",function(e){for(var t in e)N[t]=e[t];L.stateChange(N),B.update()}),s.dispatch.on("legendClick",function(e,n){if(!e.disabled)return;z=z.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":t.stacked(!1);break;case"Stacked":t.stacked(!0)}N.stacked=t.stacked(),L.stateChange(N),B.update()}),L.on("tooltipShow",function(e){E&&D(e,S.parentNode)}),L.on("changeState",function(e){typeof e.disabled!="undefined"&&(b.forEach(function(t,n){t.disabled=e.disabled[n]}),N.disabled=e.disabled),typeof e.stacked!="undefined"&&(t.stacked(e.stacked),N.stacked=e.stacked,_=e.stacked),B.update()})}),M.renderEnd("multibarchart immediate"),B}var t=e.models.multiBar(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s=e.models.legend(),o={top:30,right:20,bottom:50,left:60},u=null,a=null,f=e.utils.defaultColor(),l=!0,c={},h=!0,p=!0,d=!0,v=!1,m=!0,g=!1,y=0,b=!1,w="left",E=!0,S=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},x,T,N=e.utils.state(),C=null,k="No Data Available.",L=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),A=function(){return l?180:0},O=250;N.stacked=!1,t.stacked(!1),n.orient("bottom").tickPadding(7).highlightZero(!0).showMaxMin(!1).tickFormat(function(e){return e}),r.orient(v?"right":"left").tickFormat(d3.format(",.1f")),s.updateState(!1);var M=e.utils.renderWatch(L),_=!1,D=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=S(i.series.key,a,f,i,B);e.tooltip.show([o,u],l,i.value<0?"n":"s",null,s)},P=function(e){return function(){return{active:e.map(function(e){return!e.disabled}),stacked:_}}},H=function(e){return function(t){t.stacked!==undefined&&(_=t.stacked),t.active!==undefined&&e.forEach(function(e,n){e.disabled=!t.active[n]})}};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+o.left,e.pos[1]+o.top],L.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){L.tooltipHide(e)}),L.on("tooltipHide",function(){E&&e.tooltip.cleanup()}),B.dispatch=L,B.multibar=t,B.legend=i,B.xAxis=n,B.yAxis=r,B.state=N,B.options=e.utils.optionsFunc.bind(B),B._options=Object.create({},{width:{get:function(){return u},set:function(e){u=e}},height:{get:function(){return a},set:function(e){a=e}},showLegend:{get:function(){return h},set:function(e){h=e}},showControls:{get:function(){return l},set:function(e){l=e}},controlLabels:{get:function(){return c},set:function(e){c=e}},showXAxis:{get:function(){return p},set:function(e){p=e}},showYAxis:{get:function(){return d},set:function(e){d=e}},tooltips:{get:function(){return E},set:function(e){E=e}},tooltipContent:{get:function(){return S},set:function(e){S=e}},defaultState:{get:function(){return C},set:function(e){C=e}},noData:{get:function(){return k},set:function(e){k=e}},reduceXTicks:{get:function(){return m},set:function(e){m=e}},rotateLabels:{get:function(){return y},set:function(e){y=e}},staggerLabels:{get:function(){return g},set:function(e){g=e}},margin:{get:function(){return o},set:function(e){o.top=e.top!==undefined?e.top:o.top,o.right=e.right!==undefined?e.right:o.right,o.bottom=e.bottom!==undefined?e.bottom:o.bottom,o.left=e.left!==undefined?e.left:o.left}},duration:{get:function(){return O},set:function(e){O=e,t.duration(O),n.duration(O),r.duration(O),M.reset(O)}},color:{get:function(){return f},set:function(t){f=e.utils.getColor(t),i.color(f)}},rightAlignYAxis:{get:function(){return v},set:function(e){v=e,r.orient(v?"right":"left")}},orient:{get:function(){return w},set:function(e){w=e,b=w=="right"||w=="bottom"}}}),e.utils.inheritOptions(B,t),e.utils.initOptions(B),B},e.models.multiBarHorizontal=function(){"use strict";function A(i){return L.reset(),i.each(function(i){var b=n-t.left-t.right,T=r-t.top-t.bottom,A=d3.select(this);e.utils.initSVG(A),d&&(i=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(a)(i)),i.forEach(function(e,t){e.values.forEach(function(e){e.series=t})}),d&&i[0].values.map(function(e,t){var n=0,r=0;i.map(function(e){var i=e.values[t];i.size=Math.abs(i.y),i.y<0?(i.y1=r-i.size,r-=i.size):(i.y1=n,n+=i.size)})});var O=w&&E?[]:i.map(function(e){return e.values.map(function(e,t){return{x:u(e,t),y:a(e,t),y0:e.y0,y1:e.y1}})});s.domain(w||d3.merge(O).map(function(e){return e.x})).rangeBands(S||[0,T],.1),o.domain(E||d3.extent(d3.merge(O).map(function(e){return d?e.y>0?e.y1+e.y:e.y1:e.y}).concat(l))),v&&!d?o.range(x||[o.domain()[0]<0?g:0,b-(o.domain()[1]>0?g:0)]):o.range(x||[0,b]),C=C||s,k=k||d3.scale.linear().domain(o.domain()).range([o(0),o(0)]);var M=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([i]),_=M.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),D=_.append("defs"),P=_.append("g"),H=M.select("g");P.append("g").attr("class","nv-groups"),M.attr("transform","translate("+t.left+","+t.top+")");var B=M.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e,t){return t});B.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),B.exit().watchTransition(L,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),B.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return c(e,t)}).style("stroke",function(e,t){return c(e,t)}),B.watchTransition(L,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",.75);var j=B.selectAll("g.nv-bar").data(function(e){return e.values});j.exit().remove();var F=j.enter().append("g").attr("transform",function(e,t,n){return"translate("+k(d?e.y0:0)+","+(d?0:n*s.rangeBand()/i.length+s(u(e,t)))+")"});F.append("rect").attr("width",0).attr("height",s.rangeBand()/(d?1:i.length)),j.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),N.elementMouseover({value:a(e,t),point:e,series:i[e.series],pos:[o(a(e,t)+(d?e.y0:0)),s(u(e,t))+s.rangeBand()*(d?i.length/2:e.series+.5)/i.length],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),N.elementMouseout({value:a(e,t),point:e,series:i[e.series],pointIndex:t,seriesIndex:e.series,e:d3.event})}).on("click",function(e,t){N.elementClick({value:a(e,t),point:e,series:i[e.series],pos:[s(u(e,t))+s.rangeBand()*(d?i.length/2:e.series+.5)/i.length,o(a(e,t)+(d?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}).on("dblclick",function(e,t){N.elementDblClick({value:a(e,t),point:e,series:i[e.series],pos:[s(u(e,t))+s.rangeBand()*(d?i.length/2:e.series+.5)/i.length,o(a(e,t)+(d?e.y0:0))],pointIndex:t,seriesIndex:e.series,e:d3.event}),d3.event.stopPropagation()}),f(i[0],0)&&(F.append("polyline"),j.select("polyline").attr("fill","none").attr("points",function(e,t){var n=f(e,t),r=.8*s.rangeBand()/((d?1:i.length)*2);n=n.length?n:[-Math.abs(n),Math.abs(n)],n=n.map(function(e){return o(e)-o(0)});var u=[[n[0],-r],[n[0],r],[n[0],0],[n[1],0],[n[1],-r],[n[1],r]];return u.map(function(e){return e.join(",")}).join(" ")}).attr("transform",function(e,t){var n=s.rangeBand()/((d?1:i.length)*2);return"translate("+(a(e,t)<0?0:o(a(e,t))-o(0))+", "+n+")"})),F.append("text"),v&&!d?(j.select("text").attr("text-anchor",function(e,t){return a(e,t)<0?"end":"start"}).attr("y",s.rangeBand()/(i.length*2)).attr("dy",".32em").html(function(e,t){var n=y(a(e,t)),r=f(e,t);return r===undefined?n:r.length?n+"+"+y(Math.abs(r[1]))+"-"+y(Math.abs(r[0])):n+"&plusmn;"+y(Math.abs(r))}),j.watchTransition(L,"multibarhorizontal: bars").select("text").attr("x",function(e,t){return a(e,t)<0?-4:o(a(e,t))-o(0)+4})):j.selectAll("text").text(""),m&&!d?(F.append("text").classed("nv-bar-label",!0),j.select("text.nv-bar-label").attr("text-anchor",function(e,t){return a(e,t)<0?"start":"end"}).attr("y",s.rangeBand()/(i.length*2)).attr("dy",".32em").text(function(e,t){return u(e,t)}),j.watchTransition(L,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(e,t){return a(e,t)<0?o(0)-o(a(e,t))+4:-4})):j.selectAll("text.nv-bar-label").text(""),j.attr("class",function(e,t){return a(e,t)<0?"nv-bar negative":"nv-bar positive"}),h&&(p||(p=i.map(function(){return!0})),j.style("fill",function(e,t,n){return d3.rgb(h(e,t)).darker(p.map(function(e,t){return t}).filter(function(e,t){return!p[t]})[n]).toString()}).style("stroke",function(e,t,n){return d3.rgb(h(e,t)).darker(p.map(function(e,t){return t}).filter(function(e,t){return!p[t]})[n]).toString()})),d?j.watchTransition(L,"multibarhorizontal: bars").attr("transform",function(e,t){return"translate("+o(e.y1)+","+s(u(e,t))+")"}).select("rect").attr("width",function(e,t){return Math.abs(o(a(e,t)+e.y0)-o(e.y0))}).attr("height",s.rangeBand()):j.watchTransition(L,"multibarhorizontal: bars").attr("transform",function(e,t){return"translate("+(a(e,t)<0?o(a(e,t)):o(0))+","+(e.series*s.rangeBand()/i.length+s(u(e,t)))+")"}).select("rect").attr("height",s.rangeBand()/i.length).attr("width",function(e,t){return Math.max(Math.abs(o(a(e,t))-o(0)),1)}),C=s.copy(),k=o.copy()}),L.renderEnd("multibarHorizontal immediate"),A}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=Math.floor(Math.random()*1e4),s=d3.scale.ordinal(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=function(e){return e.yErr},l=[0],c=e.utils.defaultColor(),h=null,p,d=!1,v=!1,m=!1,g=60,y=d3.format(",.2f"),b=1200,w,E,S,x,T=250,N=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),C,k,L=e.utils.renderWatch(N,T);return A.dispatch=N,A.options=e.utils.optionsFunc.bind(A),A._options=Object.create({},{width:{get:function(){return n},set:function(e){n=e}},height:{get:function(){return r},set:function(e){r=e}},x:{get:function(){return u},set:function(e){u=e}},y:{get:function(){return a},set:function(e){a=e}},yErr:{get:function(){return f},set:function(e){f=e}},xScale:{get:function(){return s},set:function(e){s=e}},yScale:{get:function(){return o},set:function(e){o=e}},xDomain:{get:function(){return w},set:function(e){w=e}},yDomain:{get:function(){return E},set:function(e){E=e}},xRange:{get:function(){return S},set:function(e){S=e}},yRange:{get:function(){return x},set:function(e){x=e}},forceY:{get:function(){return l},set:function(e){l=e}},stacked:{get:function(){return d},set:function(e){d=e}},showValues:{get:function(){return v},set:function(e){v=e}},disabled:{get:function(){return p},set:function(e){p=e}},id:{get:function(){return i},set:function(e){i=e}},valueFormat:{get:function(){return y},set:function(e){y=e}},valuePadding:{get:function(){return g},set:function(e){g=e}},margin:{get:function(){return t},set:function(e){t.top=e.top!==undefined?e.top:t.top,t.right=e.right!==undefined?e.right:t.right,t.bottom=e.bottom!==undefined?e.bottom:t.bottom,t.left=e.left!==undefined?e.left:t.left}},duration:{get:function(){return T},set:function(e){T=e,L.reset(T)}},color:{get:function(){return c},set:function(t){c=e.utils.getColor(t)}},barColor:{get:function(){return c},set:function(t){h=e.utils.getColor(t)}}}),e.utils.initOptions(A),A},e.models.multiBarHorizontalChart=function(){"use strict";function M(y){return O.reset(),O.models(t),p&&O.models(n),d&&O.models(r),y.each(function(y){var O=d3.select(this),_=this;e.utils.initSVG(O);var D=(u||parseInt(O.style("width"))||960)-o.left-o.right,P=(a||parseInt(O.style("height"))||400)-o.top-o.bottom;M.update=function(){O.transition().duration(C).call(M)},M.container=this,m=t.stacked(),E.setter(A(y),M.update).getter(L(y)).update(),E.disabled=y.map(function(e){return!!e.disabled});if(!S){var H;S={};for(H in E)E[H]instanceof Array?S[H]=E[H].slice(0):S[H]=E[H]}if(!y||!y.length||!y.filter(function(e){return e.values.length}).length){var B=O.selectAll(".nv-noData").data([x]);return B.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),B.attr("x",o.left+D/2).attr("y",o.top+P/2).text(function(e){return e}),M}O.selectAll(".nv-noData").remove(),b=t.xScale(),w=t.yScale();var j=O.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([y]),F=j.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),I=j.select("g");F.append("g").attr("class","nv-x nv-axis"),F.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),F.append("g").attr("class","nv-barsWrap"),F.append("g").attr("class","nv-legendWrap"),F.append("g").attr("class","nv-controlsWrap"),h&&(i.width(D-N()),t.barColor()&&y.forEach(function(e,t){e.color=d3.rgb("#ccc").darker(t*1.5).toString()}),I.select(".nv-legendWrap").datum(y).call(i),o.top!=i.height()&&(o.top=i.height(),P=(a||parseInt(O.style("height"))||400)-o.top-o.bottom),I.select(".nv-legendWrap").attr("transform","translate("+N()+","+ -o.top+")"));if(l){var q=[{key:c.grouped||"Grouped",disabled:t.stacked()},{key:c.stacked||"Stacked",disabled:!t.stacked()}];s.width(N()).color(["#444","#444","#444"]),I.select(".nv-controlsWrap").datum(q).attr("transform","translate(0,"+ -o.top+")").call(s)}j.attr("transform","translate("+o.left+","+o.top+")"),t.disabled(y.map(function(e){return e.disabled})).width(D).height(P).color(y.map(function(e,t){return e.color||f(e,t)}).filter(function(e,t){return!y[t].disabled}));var R=I.select(".nv-barsWrap").datum(y.filter(function(e){return!e.disabled}));R.transition().call(t);if(p){n.scale(b).ticks(e.utils.calcTicksY(P/24,y)).tickSize(-D,0),I.select(".nv-x.nv-axis").call(n);var U=I.select(".nv-x.nv-axis > g").selectAll("g");U.selectAll("line, text").style("opacity",1),v&&U.filter(function(e,t){return t%Math.ceil(y[0].values.length/4/(P/100))!==0}).selectAll("text, line").style("opacity",0)}d&&(r.scale(w).ticks(e.utils.calcTicksX(D/100,y)).tickSize(-P,0),I.select(".nv-y.nv-axis").attr("transform","translate(0,"+P+")"),I.select(".nv-y.nv-axis").call(r)),I.select(".nv-zeroLine line").attr("x1",w(0)).attr("x2",w(0)).attr("y1",0).attr("y2",-P),i.dispatch.on("stateChange",function(e){for(var t in e)E[t]=e[t];T.stateChange(E),M.update()}),s.dispatch.on("legendClick",function(e,n){if(!e.disabled)return;q=q.map(function(e){return e.disabled=!0,e}),e.disabled=!1;switch(e.key){case"Grouped":t.stacked(!1);break;case"Stacked":t.stacked(!0)}E.stacked=t.stacked(),T.stateChange(E),m=t.stacked(),M.update()}),T.on("tooltipShow",function(e){g&&k(e,_.parentNode)}),T.on("changeState",function(e){typeof e.disabled!="undefined"&&(y.forEach(function(t,n){t.disabled=e.disabled[n]}),E.disabled=e.disabled),typeof e.stacked!="undefined"&&(t.stacked(e.stacked),E.stacked=e.stacked,m=e.stacked),M.update()})}),O.renderEnd("multibar horizontal chart immediate"),M}var t=e.models.multiBarHorizontal(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend().height(30),s=e.models.legend().height(30),o={top:30,right:20,bottom:50,left:60},u=null,a=null,f=e.utils.defaultColor(),l=!0,c={},h=!0,p=!0,d=!0,v=!1,m=!1,g=!0,y=function(e,t,n,r,i){return"<h3>"+e+" - "+t+"</h3>"+"<p>"+n+"</p>"},b,w,E=e.utils.state(),S=null,x="No Data Available.",T=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),N=function(){return l?180:0},C=250;E.stacked=!1,t.stacked(m),n.orient("left").tickPadding(5).highlightZero(!1).showMaxMin(!1).tickFormat(function(e){return e}),r.orient("bottom").tickFormat(d3.format(",.1f")),s.updateState(!1);var k=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=y(i.series.key,a,f,i,M);e.tooltip.show([o,u],l,i.value<0?"e":"w",null,s)},L=function(e){return function(){return{active:e.map(function(e){return!e.disabled}),stacked:m}}},A=function(e){return function(t){t.stacked!==undefined&&(m=t.stacked),t.active!==undefined&&e.forEach(function(e,n){e.disabled=!t.active[n]})}},O=e.utils.renderWatch(T,C);return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+o.left,e.pos[1]+o.top],T.tooltipShow(e)}),t.dispatch.on("elementMouseout.tooltip",function(e){T.tooltipHide(e)}),T.on("tooltipHide",function(){g&&e.tooltip.cleanup()}),M.dispatch=T,M.multibar=t,M.legend=i,M.xAxis=n,M.yAxis=r,M.state=E,M.options=e.utils.optionsFunc.bind(M),M._options=Object.create({},{width:{get:function(){return u},set:function(e){u=e}},height:{get:function(){return a},set:function(e){a=e}},showLegend:{get:function(){return h},set:function(e){h=e}},showControls:{get:function(){return l},set:function(e){l=e}},controlLabels:{get:function(){return c},set:function(e){c=e}},showXAxis:{get:function(){return p},set:function(e){p=e}},showYAxis:{get:function(){return d},set:function(e){d=e}},reduceXTicks:{get:function(){return v},set:function(e){v=e}},tooltips:{get:function(){return g},set:function(e){g=e}},tooltipContent:{get:function(){return y},set:function(e){y=e}},defaultState:{get:function(){return S},set:function(e){S=e}},noData:{get:function(){return x},set:function(e){x=e}},margin:{get:function(){return o},set:function(e){o.top=e.top!==undefined?e.top:o.top,o.right=e.right!==undefined?e.right:o.right,o.bottom=e.bottom!==undefined?e.bottom:o.bottom,o.left=e.left!==undefined?e.left:o.left}},duration:{get:function(){return C},set:function(e){C=e,O.reset(C),t.duration(C),n.duration(C),r.duration(C)}},color:{get:function(){return f},set:function(t){f=e.utils.getColor(t),i.color(f)}}}),e.utils.inheritOptions(M,t),e.utils.initOptions(M),M},e.models.multiChart=function(){"use strict";function O(u){return u.each(function(u){var f=d3.select(this),p=this;e.utils.initSVG(f),O.update=function(){f.transition().call(O)},O.container=this;var d=(r||parseInt(f.style("width"))||960)-t.left-t.right,M=(i||parseInt(f.style("height"))||400)-t.top-t.bottom,_=u.filter(function(e){return e.type=="line"&&e.yAxis==1}),D=u.filter(function(e){return e.type=="line"&&e.yAxis==2}),P=u.filter(function(e){return e.type=="bar"&&e.yAxis==1}),H=u.filter(function(e){return e.type=="bar"&&e.yAxis==2}),B=u.filter(function(e){return e.type=="area"&&e.yAxis==1}),j=u.filter(function(e){return e.type=="area"&&e.yAxis==2});if(!u||!u.length||!u.filter(function(e){return e.values.length}).length){var F=f.selectAll(".nv-noData").data([l]);return F.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),F.attr("x",t.left+d/2).attr("y",t.top+M/2).text(function(e){return e}),O}f.selectAll(".nv-noData").remove();var I=u.filter(function(e){return!e.disabled&&e.yAxis==1}).map(function(e){return e.values.map(function(e,t){return{x:e.x,y:e.y}})}),q=u.filter(function(e){return!e.disabled&&e.yAxis==2}).map(function(e){return e.values.map(function(e,t){return{x:e.x,y:e.y}})});a.domain(d3.extent(d3.merge(I.concat(q)),function(e){return e.x})).range([0,d]);var R=f.selectAll("g.wrap.multiChart").data([u]),U=R.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");U.append("g").attr("class","x axis"),U.append("g").attr("class","y1 axis"),U.append("g").attr("class","y2 axis"),U.append("g").attr("class","lines1Wrap"),U.append("g").attr("class","lines2Wrap"),U.append("g").attr("class","bars1Wrap"),U.append("g").attr("class","bars2Wrap"),U.append("g").attr("class","stack1Wrap"),U.append("g").attr("class","stack2Wrap"),U.append("g").attr("class","legendWrap");var z=R.select("g"),W=u.map(function(e,t){return u[t].color||n(e,t)});s&&(k.color(W),k.width(d/2),z.select(".legendWrap").datum(u.map(function(e){return e.originalKey=e.originalKey===undefined?e.key:e.originalKey,e.key=e.originalKey+(e.yAxis==1?"":" (right axis)"),e})).call(k),t.top!=k.height()&&(t.top=k.height(),M=(i||parseInt(f.style("height"))||400)-t.top-t.bottom),z.select(".legendWrap").attr("transform","translate("+d/2+","+ -t.top+")")),y.width(d).height(M).interpolate(v).color(W.filter(function(e,t){return!u[t].disabled&&u[t].yAxis==1&&u[t].type=="line"})),b.width(d).height(M).interpolate(v).color(W.filter(function(e,t){return!u[t].disabled&&u[t].yAxis==2&&u[t].type=="line"})),w.width(d).height(M).color(W.filter(function(e,t){return!u[t].disabled&&u[t].yAxis==1&&u[t].type=="bar"})),E.width(d).height(M).color(W.filter(function(e,t){return!u[t].disabled&&u[t].yAxis==2&&u[t].type=="bar"})),S.width(d).height(M).color(W.filter(function(e,t){return!u[t].disabled&&u[t].yAxis==1&&u[t].type=="area"})),x.width(d).height(M).color(W.filter(function(e,t){return!u[t].disabled&&u[t].yAxis==2&&u[t].type=="area"})),z.attr("transform","translate("+t.left+","+t.top+")");var X=z.select(".lines1Wrap").datum(_.filter(function(e){return!e.disabled})),V=z.select(".bars1Wrap").datum(P.filter(function(e){return!e.disabled})),$=z.select(".stack1Wrap").datum(B.filter(function(e){return!e.disabled})),J=z.select(".lines2Wrap").datum(D.filter(function(e){return!e.disabled})),K=z.select(".bars2Wrap").datum(H.filter(function(e){return!e.disabled})),Q=z.select(".stack2Wrap").datum(j.filter(function(e){return!e.disabled})),G=B.length?B.map(function(e){return e.values}).reduce(function(e,t){return e.map(function(e,n){return{x:e.x,y:e.y+t[n].y}})}).concat([{x:0,y:0}]):[],Y=j.length?j.map(function(e){return e.values}).reduce(function(e,t){return e.map(function(e,n){return{x:e.x,y:e.y+t[n].y}})}).concat([{x:0,y:0}]):[];m.domain(c||d3.extent(d3.merge(I).concat(G),function(e){return e.y})).range([0,M]),g.domain(h||d3.extent(d3.merge(q).concat(Y),function(e){return e.y})).range([0,M]),y.yDomain(m.domain()),w.yDomain(m.domain()),S.yDomain(m.domain()),b.yDomain(g.domain()),E.yDomain(g.domain()),x.yDomain(g.domain()),B.length&&d3.transition($).call(S),j.length&&d3.transition(Q).call(x),P.length&&d3.transition(V).call(w),H.length&&d3.transition(K).call(E),_.length&&d3.transition(X).call(y),D.length&&d3.transition(J).call(b),T.ticks(e.utils.calcTicksX(d/100,u)).tickSize(-M,0),z.select(".x.axis").attr("transform","translate(0,"+M+")"),d3.transition(z.select(".x.axis")).call(T),N.ticks(e.utils.calcTicksY(M/36,u)).tickSize(-d,0),d3.transition(z.select(".y1.axis")).call(N),C.ticks(e.utils.calcTicksY(M/36,u)).tickSize(-d,0),d3.transition(z.select(".y2.axis")).call(C),z.select(".y1.axis").classed("nv-disabled",I.length?!1:!0).attr("transform","translate("+a.range()[0]+",0)"),z.select(".y2.axis").classed("nv-disabled",q.length?!1:!0).attr("transform","translate("+a.range()[1]+",0)"),k.dispatch.on("stateChange",function(e){O.update()}),L.on("tooltipShow",function(e){o&&A(e,p.parentNode)})}),O}var t={top:30,right:20,bottom:50,left:60},n=e.utils.defaultColor(),r=null,i=null,s=!0,o=!0,u=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" at "+t+"</p>"},a,f,l="No Data Available.",c,h,p=function(e){return e.x},d=function(e){return e.y},v="monotone",a=d3.scale.linear(),m=d3.scale.linear(),g=d3.scale.linear(),y=e.models.line().yScale(m),b=e.models.line().yScale(g),w=e.models.multiBar().stacked(!1).yScale(m),E=e.models.multiBar().stacked(!1).yScale(g),S=e.models.stackedArea().yScale(m),x=e.models.stackedArea().yScale(g),T=e.models.axis().scale(a).orient("bottom").tickPadding(5),N=e.models.axis().scale(m).orient("left"),C=e.models.axis().scale(g).orient("right"),k=e.models.legend().height(30),L=d3.dispatch("tooltipShow","tooltipHide"),A=function(t,n){var r=t.pos[0]+(n.offsetLeft||0),i=t.pos[1]+(n.offsetTop||0),s=T.tickFormat()(y.x()(t.point,t.pointIndex)),o=(t.series.yAxis==2?C:N).tickFormat()(y.y()(t.point,t.pointIndex)),a=u(t.series.key,s,o,t,O);e.tooltip.show([r,i],a,undefined,undefined,n.offsetParent)};return y.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],L.tooltipShow(e)}),y.dispatch.on("elementMouseout.tooltip",function(e){L.tooltipHide(e)}),b.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],L.tooltipShow(e)}),b.dispatch.on("elementMouseout.tooltip",function(e){L.tooltipHide(e)}),w.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],L.tooltipShow(e)}),w.dispatch.on("elementMouseout.tooltip",function(e){L.tooltipHide(e)}),E.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],L.tooltipShow(e)}),E.dispatch.on("elementMouseout.tooltip",function(e){L.tooltipHide(e)}),S.dispatch.on("tooltipShow",function(e){if(!Math.round(S.y()(e.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],L.tooltipShow(e)}),S.dispatch.on("tooltipHide",function(e){L.tooltipHide(e)}),x.dispatch.on("tooltipShow",function(e){if(!Math.round(x.y()(e.point)*100))return setTimeout(function(){d3.selectAll(".point.hover").classed("hover",!1)},0),!1;e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],L.tooltipShow(e)}),x.dispatch.on("tooltipHide",function(e){L.tooltipHide(e)}),y.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],L.tooltipShow(e)}),y.dispatch.on("elementMouseout.tooltip",function(e){L.tooltipHide(e)}),b.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],L.tooltipShow(e)}),b.dispatch.on("elementMouseout.tooltip",function(e){L.tooltipHide(e)}),L.on("tooltipHide",function(){o&&e.tooltip.cleanup()}),O.dispatch=L,O.lines1=y,O.lines2=b,O.bars1=w,O.bars2=E,O.stack1=S,O.stack2=x,O.xAxis=T,O.yAxis1=N,O.yAxis2=C,O.options=e.utils.optionsFunc.bind(O),O._options=Object.create({},{width:{get:function(){return r},set:function(e){r=e}},height:{get:function(){return i},set:function(e){i=e}},showLegend:{get:function(){return s},set:function(e){s=e}},yDomain1:{get:function(){return c},set:function(e){c=e}},yDomain2:{get:function(){return h},set:function(e){h=e}},tooltips:{get:function(){return o},set:function(e){o=e}},tooltipContent:{get:function(){return u},set:function(e){u=e}},noData:{get:function(){return l},set:function(e){l=e}},interpolate:{get:function(){return v},set:function(e){v=e}},margin:{get:function(){return t},set:function(e){t.top=e.top!==undefined?e.top:t.top,t.right=e.right!==undefined?e.right:t.right,t.bottom=e.bottom!==undefined?e.bottom:t.bottom,t.left=e.left!==undefined?e.left:t.left}},color:{get:function(){return n},set:function(t){n=e.utils.getColor(t)}},x:{get:function(){return p},set:function(e){p=e,y.x(e),w.x(e)}},y:{get:function(){return d},set:function(e){d=e,y.y(e),w.y(e)}}}),e.utils.initOptions(O),O},e.models.ohlcBar=function(){"use strict";function T(y){return y.each(function(y){var T=d3.select(this),N=(n||parseInt(T.style("width"))||960)-t.left-t.right,C=(r||parseInt(T.style("height"))||400)-t.top-t.bottom;e.utils.initSVG(T),s.domain(b||d3.extent(y[0].values.map(u).concat(p))),v?s.range(E||[N*.5/y[0].values.length,N*(y[0].values.length-.5)/y[0].values.length]):s.range(E||[0,N]),o.domain(w||[d3.min(y[0].values.map(h).concat(d)),d3.max(y[0].values.map(c).concat(d))]).range(S||[C,0]),s.domain()[0]===s.domain()[1]&&(s.domain()[0]?s.domain([s.domain()[0]-s.domain()[0]*.01,s.domain()[1]+s.domain()[1]*.01]):s.domain([-1,1])),o.domain()[0]===o.domain()[1]&&(o.domain()[0]?o.domain([o.domain()[0]+o.domain()[0]*.01,o.domain()[1]-o.domain()[1]*.01]):o.domain([-1,1]));var k=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([y[0].values]),L=k.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),A=L.append("defs"),O=L.append("g"),M=k.select("g");O.append("g").attr("class","nv-ticks"),k.attr("transform","translate("+t.left+","+t.top+")"),T.on("click",function(e,t){x.chartClick({data:e,index:t,pos:d3.event,id:i})}),A.append("clipPath").attr("id","nv-chart-clip-path-"+i).append("rect"),k.select("#nv-chart-clip-path-"+i+" rect").attr("width",N).attr("height",C),M.attr("clip-path",m?"url(#nv-chart-clip-path-"+i+")":"");var _=k.select(".nv-ticks").selectAll(".nv-tick").data(function(e){return e});_.exit().remove();var D=_.enter().append("path").attr("class",function(e,t,n){return(f(e,t)>l(e,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+t}).attr("d",function(e,t){var n=N/y[0].values.length*.9;return"m0,0l0,"+(o(f(e,t))-o(c(e,t)))+"l"+ -n/2+",0l"+n/2+",0l0,"+(o(h(e,t))-o(f(e,t)))+"l0,"+(o(l(e,t))-o(h(e,t)))+"l"+n/2+",0l"+ -n/2+",0z"}).attr("transform",function(e,t){return"translate("+s(u(e,t))+","+o(c(e,t))+")"}).attr("fill",function(e,t){return g[0]}).attr("stroke",function(e,t){return g[0]}).attr("x",0).attr("y",function(e,t){return o(Math.max(0,a(e,t)))}).attr("height",function(e,t){return Math.abs(o(a(e,t))-o(0))});_.attr("class",function(e,t,n){return(f(e,t)>l(e,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+t}),d3.transition(_).attr("transform",function(e,t){return"translate("+s(u(e,t))+","+o(c(e,t))+")"}).attr("d",function(e,t){var n=N/y[0].values.length*.9;return"m0,0l0,"+(o(f(e,t))-o(c(e,t)))+"l"+ -n/2+",0l"+n/2+",0l0,"+(o(h(e,t))-o(f(e,t)))+"l0,"+(o(l(e,t))-o(h(e,t)))+"l"+n/2+",0l"+ -n/2+",0z"})}),T}var t={top:0,right:0,bottom:0,left:0},n=null,r=null,i=Math.floor(Math.random()*1e4),s=d3.scale.linear(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=function(e){return e.open},l=function(e){return e.close},c=function(e){return e.high},h=function(e){return e.low},p=[],d=[],v=!1,m=!0,g=e.utils.defaultColor(),y=!1,b,w,E,S,x=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout");return T.highlightPoint=function(e,t){T.clearHighlights(),d3.select(".nv-ohlcBar .nv-tick-0-"+e).classed("hover",t)},T.clearHighlights=function(){d3.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},T.dispatch=x,T.options=e.utils.optionsFunc.bind(T),T._options=Object.create({},{width:{get:function(){return n},set:function(e){n=e}},height:{get:function(){return r},set:function(e){r=e}},xScale:{get:function(){return s},set:function(e){s=e}},yScale:{get:function(){return o},set:function(e){o=e}},xDomain:{get:function(){return b},set:function(e){b=e}},yDomain:{get:function(){return w},set:function(e){w=e}},xRange:{get:function(){return E},set:function(e){E=e}},yRange:{get:function(){return S},set:function(e){S=e}},forceX:{get:function(){return p},set:function(e){p=e}},forceY:{get:function(){return d},set:function(e){d=e}},padData:{get:function(){return v},set:function(e){v=e}},clipEdge:{get:function(){return m},set:function(e){m=e}},id:{get:function(){return i},set:function(e){i=e}},interactive:{get:function(){return y},set:function(e){y=e}},x:{get:function(){return u},set:function(e){u=e}},y:{get:function(){return a},set:function(e){a=e}},open:{get:function(){return f()},set:function(e){f=e}},close:{get:function(){return l()},set:function(e){l=e}},high:{get:function(){return c},set:function(e){c=e}},low:{get:function(){return h},set:function(e){h=e}},margin:{get:function(){return t},set:function(e){t.top=e.top!=undefined?e.top:t.top,t.right=e.right!=undefined?e.right:t.right,t.bottom=e.bottom!=undefined?e.bottom:t.bottom,t.left=e.left!=undefined?e.left:t.left}},color:{get:function(){return g},set:function(t){g=e.utils.getColor(t)}}}),e.utils.initOptions(T),T},e.models.parallelCoordinates=function(){"use strict";function c(h){return h.each(function(h){function k(e){return E(o.map(function(t){return[i(t),s[t](e[t])]}))}function L(){var e=o.filter(function(e){return!s[e].brush.empty()}),t=e.map(function(e){return s[e].brush.extent()});a=[],e.forEach(function(e,n){a[n]={dimension:e,extent:t[n]}}),f=[],N.style("display",function(n){var r=e.every(function(e,r){return t[r][0]<=n[e]&&n[e]<=t[r][1]});return r&&f.push(n),r?null:"none"}),l.brush({filters:a,active:f})}var p=d3.select(this),d=(n||parseInt(p.style("width"))||960)-t.left-t.right,v=(r||parseInt(p.style("height"))||400)-t.top-t.bottom;e.utils.initSVG(p),f=h,c.update=function(){},i.rangePoints([0,d],1).domain(o),o.forEach(function(e){return s[e]=d3.scale.linear().domain(d3.extent(h,function(t){return+t[e]})).range([v,0]),s[e].brush=d3.svg.brush().y(s[e]).on("brush",L),e!="name"});var m=p.selectAll("g.nv-wrap.nv-parallelCoordinates").data([h]),g=m.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates"),b=g.append("g"),w=m.select("g");b.append("g").attr("class","nv-parallelCoordinatesWrap"),m.attr("transform","translate("+t.left+","+t.top+")");var E=d3.svg.line(),S=d3.svg.axis().orient("left"),T,N;T=b.append("g").attr("class","background").selectAll("path").data(h).enter().append("path").attr("d",k),N=b.append("g").attr("class","foreground").selectAll("path").data(h).enter().append("path").attr("d",k).attr("stroke",u);var C=w.selectAll(".dimension").data(o).enter().append("g").attr("class","dimension").attr("transform",function(e){return"translate("+i(e)+",0)"});C.append("g").attr("class","axis").each(function(e){d3.select(this).call(S.scale(s[e]))}).append("text").attr("text-anchor","middle").attr("y",-9).text(String),C.append("g").attr("class","brush").each(function(e){d3.select(this).call(s[e].brush)}).selectAll("rect").attr("x",-8).attr("width",16)}),c}var t={top:30,right:10,bottom:10,left:10},n=null,r=null,i=d3.scale.ordinal(),s={},o=[],u=e.utils.defaultColor(),a=[],f=[],l=d3.dispatch("brush");return c.dispatch=l,c.options=e.utils.optionsFunc.bind(c),c._options=Object.create({},{width:{get:function(){return n},set:function(e){n=e}},height:{get:function(){return r},set:function(e){r=e}},dimensions:{get:function(){return o},set:function(e){o=e}},margin:{get:function(){return t},set:function(e){t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left}},color:{get:function(){return u},set:function(t){u=e.utils.getColor(t)}}}),e.utils.initOptions(c),c},e.models.pie=function(){"use strict";function A(a){return L.reset(),a.each(function(a){function G(e){var t=(e.startAngle+e.endAngle)*90/Math.PI-90;return t>90?t-180:t}function Y(e){e.endAngle=isNaN(e.endAngle)?0:e.endAngle,e.startAngle=isNaN(e.startAngle)?0:e.startAngle,m||(e.innerRadius=0);var t=d3.interpolate(this._current,e);return this._current=t(0),function(e){return F(t(e))}}var C=n-t.left-t.right,A=r-t.top-t.bottom,O=Math.min(C,A)/2,M=O-O/10,_=d3.select(this);e.utils.initSVG(_);var D=_.selectAll(".nv-wrap.nv-pie").data(a),P=D.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+o),H=P.append("g"),B=D.select("g"),j=H.append("g").attr("class","nv-pie");H.append("g").attr("class","nv-pieLabels"),D.attr("transform","translate("+t.left+","+t.top+")"),B.select(".nv-pie").attr("transform","translate("+C/2+","+A/2+")"),B.select(".nv-pieLabels").attr("transform","translate("+C/2+","+A/2+")"),_.on("click",function(e,t){k.chartClick({data:e,index:t,pos:d3.event,id:o})});var F=d3.svg.arc().outerRadius(M),I=d3.svg.arc().outerRadius(M+5);E&&(F.startAngle(E),I.startAngle(E)),x&&(F.endAngle(x),I.endAngle(x)),m&&(F.innerRadius(O*N),I.innerRadius(O*N));var q=d3.layout.pie().sort(null).value(function(e){return e.disabled?0:s(e)});q.padAngle&&S&&q.padAngle(S),F.cornerRadius&&T&&(F.cornerRadius(T),I.cornerRadius(T));if(m&&g){var R=j.append("g").attr("class","nv-pie");R.append("text").style("text-anchor","middle").attr("class","nv-pie-title").text(function(e){return g}).attr("dy","0.35em").attr("transform",function(e,t){return"translate(0, "+b+")"})}var U=D.select(".nv-pie").selectAll(".nv-slice").data(q),z=D.select(".nv-pieLabels").selectAll(".nv-label").data(q);U.exit().remove(),z.exit().remove();var W=U.enter().append("g");W.attr("class","nv-slice"),W.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),y&&d3.select(this).select("path").transition().duration(70).attr("d",I),k.elementMouseover({label:i(e.data),value:s(e.data),point:e.data,pointIndex:t,pos:[d3.event.pageX,d3.event.pageY],id:o,color:d3.select(this).style("fill")})}),W.on("mouseout",function(e,t){d3.select(this).classed("hover",!1),y&&d3.select(this).select("path").transition().duration(50).attr("d",F),k.elementMouseout({label:i(e.data),value:s(e.data),point:e.data,index:t,id:o})}),U.attr("fill",function(e,t){return u(e,t)}),U.attr("stroke",function(e,t){return u(e,t)});var X=W.append("path").each(function(e){this._current=e});X.on("click",function(e,t){k.elementClick({label:i(e.data),value:s(e.data),point:e.data,index:t,pos:d3.event,id:o}),d3.event.stopPropagation()}),X.on("dblclick",function(e,t){k.elementDblClick({label:i(e.data),value:s(e.data),point:e.data,index:t,pos:d3.event,id:o}),d3.event.stopPropagation()}),U.select("path").transition().attr("d",F).attrTween("d",Y);if(l){var V=d3.svg.arc().innerRadius(0);if(c)var V=F;h&&(V=d3.svg.arc().outerRadius(F.outerRadius())),z.enter().append("g").classed("nv-label",!0).each(function(e,t){var n=d3.select(this);n.attr("transform",function(e){if(w){e.outerRadius=M+10,e.innerRadius=M+15;var t=(e.startAngle+e.endAngle)/2*(180/Math.PI);return(e.startAngle+e.endAngle)/2<Math.PI?t-=90:t+=90,"translate("+V.centroid(e)+") rotate("+t+")"}return e.outerRadius=O+10,e.innerRadius=O+15,"translate("+V.centroid(e)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",w?(e.startAngle+e.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var $={},J=14,K=40,Q=function(e){return Math.floor(e[0]/K)*K+","+Math.floor(e[1]/J)*J};z.watchTransition(L,"pie labels").attr("transform",function(e){isNaN(e.startAngle)&&(e.startAngle=0),isNaN(e.endAngle)&&(e.endAngle=0);if(w){e.outerRadius=M+10,e.innerRadius=M+15;var t=(e.startAngle+e.endAngle)/2*(180/Math.PI);return(e.startAngle+e.endAngle)/2<Math.PI?t-=90:t+=90,"translate("+V.centroid(e)+") rotate("+t+")"}e.outerRadius=O+10,e.innerRadius=O+15;var n=V.centroid(e);if(e.value){var r=Q(n),i=d3.keys($);i.forEach(function(e){var t=e.split(","),i=r.split(","),s=parseInt(t[0]),o=parseInt(t[1]),u=parseInt(i[0]),a=parseInt(i[1]);s+K<u||o+J<a||s>u+K||o>a+J||(n[1]+=J)}),$[Q(n)]=!0}return"translate("+n+")"}),z.select(".nv-label text").style("text-anchor",w?(d.startAngle+d.endAngle)/2<Math.PI?"start":"end":"middle").text(function(e,t){var n=(e.endAngle-e.startAngle)/(2*Math.PI),r={key:i(e.data),value:s(e.data),percent:f(n)};return e.value&&n>v?r[p]:""})}}),L.renderEnd("pie immediate"),A}var t={top:0,right:0,bottom:0,left:0},n=500,r=500,i=function(e){return e.x},s=function(e){return e.y},o=Math.floor(Math.random()*1e4),u=e.utils.defaultColor(),a=d3.format(",.2f"),f=d3.format("%"),l=!0,c=!0,h=!1,p="key",v=.02,m=!1,g=!1,y=!0,b=0,w=!1,E=!1,S=!1,x=!1,T=0,N=.5,C=250,k=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),L=e.utils.renderWatch(k);return A.dispatch=k,A.options=e.utils.optionsFunc.bind(A),A._options=Object.create({},{width:{get:function(){return n},set:function(e){n=e}},height:{get:function(){return r},set:function(e){r=e}},showLabels:{get:function(){return l},set:function(e){l=e}},title:{get:function(){return g},set:function(e){g=e}},titleOffset:{get:function(){return b},set:function(e){b=e}},labelThreshold:{get:function(){return v},set:function(e){v=e}},labelFormat:{get:function(){return f},set:function(e){f=e}},valueFormat:{get:function(){return a},set:function(e){a=e}},x:{get:function(){return i},set:function(e){i=e}},id:{get:function(){return o},set:function(e){o=e}},endAngle:{get:function(){return x},set:function(e){x=e}},startAngle:{get:function(){return E},set:function(e){E=e}},padAngle:{get:function(){return S},set:function(e){S=e}},cornerRadius:{get:function(){return T},set:function(e){T=e}},donutRatio:{get:function(){return N},set:function(e){N=e}},pieLabelsOutside:{get:function(){return c},set:function(e){c=e}},donutLabelsOutside:{get:function(){return h},set:function(e){h=e}},labelSunbeamLayout:{get:function(){return w},set:function(e){w=e}},donut:{get:function(){return m},set:function(e){m=e}},growOnHover:{get:function(){return y},set:function(e){y=e}},margin:{get:function(){return t},set:function(e){t.top=typeof e.top!="undefined"?e.top:t.top,t.right=typeof e.right!="undefined"?e.right:t.right,t.bottom=typeof e.bottom!="undefined"?e.bottom:t.bottom,t.left=typeof e.left!="undefined"?e.left:t.left}},y:{get:function(){return s},set:function(e){s=d3.functor(e)}},color:{get:function(){return u},set:function(t){u=e.utils.getColor(t)}},labelType:{get:function(){return p},set:function(e){p=e||"key"}}}),e.utils.initOptions(A),A},e.models.pieChart=function(){"use strict";function w(a){return g.reset(),g.models(t),a.each(function(a){var f=d3.select(this);e.utils.initSVG(f);var l=this,d=(i||parseInt(f.style("width"),10)||960)-r.left-r.right,m=(s||parseInt(f.style("height"),10)||400)-r.top-r.bottom;w.update=function(){f.transition().call(w)},w.container=this,c.setter(b(a),w.update).getter(y(a)).update(),c.disabled=a.map(function(e){return!!e.disabled});if(!h){var g;h={};for(g in c)c[g]instanceof Array?h[g]=c[g].slice(0):h[g]=c[g]}if(!a||!a.length){var E=f.selectAll(".nv-noData").data([p]);return f.attr("width","100%").attr("viewBox","-30 40 200 100").attr("preserveAspectRatio","xMidYMid meet"),E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",r.left+d/2).attr("y",r.top+m/2).text(function(e){return e}),w}f.selectAll(".nv-noData").remove();var S=f.selectAll("g.nv-wrap.nv-pieChart").data([a]),x=S.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),T=S.select("g");x.append("g").attr("class","nv-pieWrap"),x.append("g").attr("class","nv-legendWrap");if(o)if(u==="top")n.width(d).key(t.x()),S.select(".nv-legendWrap").datum(a).call(n),r.top!=n.height()&&(r.top=n.height(),m=(s||parseInt(f.style("height"))||400)-r.top-r.bottom),S.select(".nv-legendWrap").attr("transform","translate(0,"+ -(r.top-10)+")");else if(u==="right"){var N=e.models.legend().width();d/2<N&&(N=d/2),n.height(m).key(t.x()),n.width(N),d-=n.width(),S.select(".nv-legendWrap").datum(a).call(n).attr("transform","translate("+d+","+ -(r.top-10)+")")}S.attr("transform","translate("+r.left+","+r.top+")"),t.width(d).height(m);var C=T.select(".nv-pieWrap").datum([a]);d3.transition(C).call(t),n.dispatch.on("stateChange",function(e){for(var t in e)c[t]=e[t];v.stateChange(c),w.update()}),t.dispatch.on("elementMouseout.tooltip",function(e){v.tooltipHide(e)}),v.on("changeState",function(e){typeof e.disabled!="undefined"&&(a.forEach(function(t,n){t.disabled=e.disabled[n]}),c.disabled=e.disabled),w.update()})}),g.renderEnd("pieChart immediate"),w}var t=e.models.pie(),n=e.models.legend(),r={top:30,right:20,bottom:20,left:20},i=null,s=null,o=!0,u="top",a=e.utils.defaultColor(),f=!0,l=function(e,t,n,r){return'<h3 style="background-color: '+n.color+'">'+e+"</h3>"+"<p>"+t+"</p>"},c=e.utils.state(),h=null,p="No Data Available.",d=250,v=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),m=function(n,r){var i=t.x()(n.point),s=n.pos[0]+(r&&r.offsetLeft||0),o=n.pos[1]+(r&&r.offsetTop||0),u=t.valueFormat()(t.y()(n.point)),a=l(i,u,n,w);e.tooltip.show([s,o],a,n.value<0?"n":"s",null,r)},g=e.utils.renderWatch(v),y=function(e){return function(){return{active:e.map(function(e){return!e.disabled})}}},b=function(e){return function(t){t.active!==undefined&&e.forEach(function(e,n){e.disabled=!t.active[n]})}};return t.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+r.left,e.pos[1]+r.top],v.tooltipShow(e)}),v.on("tooltipShow",function(e){f&&m(e)}),v.on("tooltipHide",function(){f&&e.tooltip.cleanup()}),w.legend=n,w.dispatch=v,w.pie=t,w.options=e.utils.optionsFunc.bind(w),w._options=Object.create({},{noData:{get:function(){return p},set:function(e){p=e}},tooltipContent:{get:function(){return l},set:function(e){l=e}},tooltips:{get:function(){return f},set:function(e){f=e}},showLegend:{get:function(){return o},set:function(e){o=e}},legendPosition:{get:function(){return u},set:function(e){u=e}},defaultState:{get:function(){return h},set:function(e){h=e}},margin:{get:function(){return r},set:function(e){r.top=e.top!==undefined?e.top:r.top,r.right=e.right!==undefined?e.right:r.right,r.bottom=e.bottom!==undefined?e.bottom:r.bottom,r.left=e.left!==undefined?e.left:r.left}},color:{get:function(){return a},set:function(e){a=e,n.color(a),t.color(a)}},duration:{get:function(){return d},set:function(e){d=e,g.reset(d)}}}),e.utils.inheritOptions(w,t),e.utils.initOptions(w),w},e.models.scatter=function(){"use strict";function I(_){return F.reset(),_.each(function(_){function K(){if(!m)return!1;var e,i=d3.merge(_.map(function(e,t){return e.values.map(function(e,n){var r=f(e,n),i=l(e,n);return[o(r)+Math.random()*1e-7,u(i)+Math.random()*1e-7,t,n,e]}).filter(function(e,t){return g(e[4],t)})}));if(M===!0){i.length<3&&(i.push([o.range()[0]-20,u.range()[0]-20,null,null]),i.push([o.range()[1]+20,u.range()[1]+20,null,null]),i.push([o.range()[0]-20,u.range()[0]+20,null,null]),i.push([o.range()[1]+20,u.range()[1]-20,null,null]));var s=d3.geom.polygon([[-10,-10],[-10,r+10],[n+10,r+10],[n+10,-10]]),a=d3.geom.voronoi(i).map(function(e,t){return{data:s.clip(e),series:i[t][2],point:i[t][3]}});W.select(".nv-point-paths").selectAll("path").remove();var c=W.select(".nv-point-paths").selectAll("path").data(a);c.enter().append("svg:path").attr("d",function(e){return!e||!e.data||e.data.length===0?"M 0 0":"M"+e.data.join(",")+"Z"}).attr("id",function(e,t){return"nv-path-"+t}).attr("clip-path",function(e,t){return"url(#nv-clip-"+t+")"});if(E){var h=W.append("svg:g").attr("id","nv-point-clips");h.selectAll("clipPath").data(i).enter().append("svg:clipPath").attr("id",function(e,t){return"nv-clip-"+t}).append("svg:circle").attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}).attr("r",S)}var p=function(e,n){if(j)return 0;var r=_[e.series];if(typeof r=="undefined")return;var i=r.values[e.point];n({point:i,series:r,pos:[o(f(i,e.point))+t.left,u(l(i,e.point))+t.top],seriesIndex:e.series,pointIndex:e.point})};c.on("click",function(e){p(e,O.elementClick)}).on("dblclick",function(e){p(e,O.elementDblClick)}).on("mouseover",function(e){p(e,O.elementMouseover)}).on("mouseout",function(e,t){p(e,O.elementMouseout)})}else W.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(e,n){if(j||!_[e.series])return 0;var r=_[e.series],i=r.values[n];O.elementClick({point:i,series:r,pos:[o(f(i,n))+t.left,u(l(i,n))+t.top],seriesIndex:e.series,pointIndex:n})}).on("mouseover",function(e,n){if(j||!_[e.series])return 0;var r=_[e.series],i=r.values[n];O.elementMouseover({point:i,series:r,pos:[o(f(i,n))+t.left,u(l(i,n))+t.top],seriesIndex:e.series,pointIndex:n})}).on("mouseout",function(e,t){if(j||!_[e.series])return 0;var n=_[e.series],r=n.values[t];O.elementMouseout({point:r,series:n,seriesIndex:e.series,pointIndex:t})});j=!1}var I=d3.select(this),q=(n||parseInt(I.style("width"))||960)-t.left-t.right,R=(r||parseInt(I.style("height"))||400)-t.top-t.bottom;e.utils.initSVG(I),_.forEach(function(e,t){e.values.forEach(function(e){e.series=t})});var U=x&&T&&k?[]:d3.merge(_.map(function(e){return e.values.map(function(e,t){return{x:f(e,t),y:l(e,t),size:c(e,t)}})}));o.domain(x||d3.extent(U.map(function(e){return e.x}).concat(p))),y&&_[0]?o.range(N||[(q*b+q)/(2*_[0].values.length),q-q*(1+b)/(2*_[0].values.length)]):o.range(N||[0,q]),u.domain(T||d3.extent(U.map(function(e){return e.y}).concat(d))).range(C||[R,0]),a.domain(k||d3.extent(U.map(function(e){return e.size}).concat(v))).range(L||[16,256]);if(o.domain()[0]===o.domain()[1]||u.domain()[0]===u.domain()[1])A=!0;o.domain()[0]===o.domain()[1]&&(o.domain()[0]?o.domain([o.domain()[0]-o.domain()[0]*.01,o.domain()[1]+o.domain()[1]*.01]):o.domain([-1,1])),u.domain()[0]===u.domain()[1]&&(u.domain()[0]?u.domain([u.domain()[0]-u.domain()[0]*.01,u.domain()[1]+u.domain()[1]*.01]):u.domain([-1,1])),isNaN(o.domain()[0])&&o.domain([-1,1]),isNaN(u.domain()[0])&&u.domain([-1,1]),D=D||o,P=P||u,H=H||a;var W=I.selectAll("g.nv-wrap.nv-scatter").data([_]),X=W.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+s+(A?" nv-single-point":"")),V=X.append("defs"),$=X.append("g"),J=W.select("g");$.append("g").attr("class","nv-groups"),$.append("g").attr("class","nv-point-paths"),W.attr("transform","translate("+t.left+","+t.top+")"),V.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect"),W.select("#nv-edge-clip-"+s+" rect").attr("width",q).attr("height",R>0?R:0),J.attr("clip-path",w?"url(#nv-edge-clip-"+s+")":""),j=!0;var Q=W.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});Q.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),Q.exit().remove(),Q.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}),Q.watchTransition(F,"scatter: groups").style("fill",function(e,t){return i(e,t)}).style("stroke",function(e,t){return i(e,t)}).style("stroke-opacity",1).style("fill-opacity",.5);var G=Q.selectAll("path.nv-point").data(function(e){return e.values});G.enter().append("path").style("fill",function(e,t){return e.color}).style("stroke",function(e,t){return e.color}).attr("transform",function(e,t){return"translate("+D(f(e,t))+","+P(l(e,t))+")"}).attr("d",e.utils.symbol().type(h).size(function(e,t){return a(c(e,t))})),G.exit().remove(),Q.exit().selectAll("path.nv-point").watchTransition(F,"scatter exit").attr("transform",function(e,t){return"translate("+o(f(e,t))+","+u(l(e,t))+")"}).remove(),G.each(function(e,t){d3.select(this).classed("nv-point",!0).classed("nv-point-"+t,!0).classed("hover",!1)}),G.watchTransition(F,"scatter points").attr("transform",function(e,t){return"translate("+o(f(e,t))+","+u(l(e,t))+")"}).attr("d",e.utils.symbol().type(h).size(function(e,t){return a(c(e,t))})),clearTimeout(B),B=setTimeout(K,300),D=o.copy(),P=u.copy(),H=a.copy()}),F.renderEnd("scatter immediate"),I}var t={top:0,right:0,bottom:0,left:0},n=null,r=null,i=e.utils.defaultColor(),s=Math.floor(Math.random()*1e5),o=d3.scale.linear(),u=d3.scale.linear(),a=d3.scale.linear(),f=function(e){return e.x},l=function(e){return e.y},c=function(e){return e.size||1},h=function(e){return e.shape||"circle"},p=[],d=[],v=[],m=!0,g=function(e){return!e.notActive},y=!1,b=.1,w=!1,E=!0,S=function(){return 25},x=null,T=null,N=null,C=null,k=null,L=null,A=!1,O=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),M=!0,_=250,D,P,H,B,j=!1,F=e.utils.renderWatch(O,_);return I.dispatch=O,I.options=e.utils.optionsFunc.bind(I),I._calls=new function(){this.clearHighlights=function(){return d3.selectAll(".nv-chart-"+s+" .nv-point.hover").classed("hover",!1),null},this.highlightPoint=function(e,t,n){d3.select(".nv-chart-"+s+" .nv-series-"+e+" .nv-point-"+t).classed("hover",n)}},O.on("elementMouseover.point",function(e){m&&I._calls.highlightPoint(e.seriesIndex,e.pointIndex,!0)}),O.on("elementMouseout.point",function(e){m&&I._calls.highlightPoint(e.seriesIndex,e.pointIndex,!1)}),I._options=Object.create({},{width:{get:function(){return n},set:function(e){n=e}},height:{get:function(){return r},set:function(e){r=e}},xScale:{get:function(){return o},set:function(e){o=e}},yScale:{get:function(){return u},set:function(e){u=e}},pointScale:{get:function(){return a},set:function(e){a=e}},xDomain:{get:function(){return x},set:function(e){x=e}},yDomain:{get:function(){return T},set:function(e){T=e}},pointDomain:{get:function(){return k},set:function(e){k=e}},xRange:{get:function(){return N},set:function(e){N=e}},yRange:{get:function(){return C},set:function(e){C=e}},pointRange:{get:function(){return L},set:function(e){L=e}},forceX:{get:function(){return p},set:function(e){p=e}},forceY:{get:function(){return d},set:function(e){d=e}},forcePoint:{get:function(){return v},set:function(e){v=e}},interactive:{get:function(){return m},set:function(e){m=e}},pointActive:{get:function(){return g},set:function(e){g=e}},padDataOuter:{get:function(){return b},set:function(e){b=e}},padData:{get:function(){return y},set:function(e){y=e}},clipEdge:{get:function(){return w},set:function(e){w=e}},clipVoronoi:{get:function(){return E},set:function(e){E=e}},clipRadius:{get:function(){return S},set:function(e){S=e}},id:{get:function(){return s},set:function(e){s=e}},x:{get:function(){return f},set:function(e){f=d3.functor(e)}},y:{get:function(){return l},set:function(e){l=d3.functor(e)}},pointSize:{get:function(){return c},set:function(e){c=d3.functor(e)}},pointShape:{get:function(){return h},set:function(e){h=d3.functor(e)}},margin:{get:function(){return t},set:function(e){t.top=e.top!==undefined?e.top:t.top,t.right=e.right!==undefined?e.right:t.right,t.bottom=e.bottom!==undefined?e.bottom:t.bottom,t.left=e.left!==undefined?e.left:t.left}},duration:{get:function(){return _},set:function(e){_=e,F.reset(_)}},color:{get:function(){return i},set:function(t){i=e.utils.getColor(t)}},useVoronoi:{get:function(){return M},set:function(e){M=e,M===!1&&(E=!1)}}}),e.utils.initOptions(I),I},e.models.scatterChart=function(){"use strict";function P(w){return O.reset(),O.models(t),m&&O.models(n),g&&O.models(r),p&&O.models(s),d&&O.models(o),w.each(function(w){var E=d3.select(this),S=this;e.utils.initSVG(E);var H=(a||parseInt(E.style("width"))||960)-u.left-u.right,B=(f||parseInt(E.style("height"))||400)-u.top-u.bottom;P.update=function(){k===0?E.call(P):E.transition().duration(k).call(P)},P.container=this,x.setter(D(w),P.update).getter(_(w)).update(),x.disabled=w.map(function(e){return!!e.disabled});if(!T){var j;T={};for(j in x)x[j]instanceof Array?T[j]=x[j].slice(0):T[j]=x[j]}if(!w||!w.length||!w.filter(function(e){return e.values.length}).length){var F=E.selectAll(".nv-noData").data([C]);return F.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),F.attr("x",u.left+H/2).attr("y",u.top+B/2).text(function(e){return e}),O.renderEnd("scatter immediate"),P}E.selectAll(".nv-noData").remove(),c=t.xScale(),h=t.yScale();var I=E.selectAll("g.nv-wrap.nv-scatterChart").data([w]),q=I.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+t.id()),R=q.append("g"),U=I.select("g");R.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),R.append("g").attr("class","nv-x nv-axis"),R.append("g").attr("class","nv-y nv-axis"),R.append("g").attr("class","nv-scatterWrap"),R.append("g").attr("class","nv-regressionLinesWrap"),R.append("g").attr("class","nv-distWrap"),R.append("g").attr("class","nv-legendWrap"),I.attr("transform","translate("+u.left+","+u.top+")"),y&&U.select(".nv-y.nv-axis").attr("transform","translate("+H+",0)"),v&&(i.width(H/2),I.select(".nv-legendWrap").datum(w).call(i),u.top!=i.height()&&(u.top=i.height(),B=(f||parseInt(E.style("height"))||400)-u.top-u.bottom),I.select(".nv-legendWrap").attr("transform","translate("+H/2+","+ -u.top+")")),t.width(H).height(B).color(w.map(function(e,t){return e.color||l(e,t)}).filter(function(e,t){return!w[t].disabled})),I.select(".nv-scatterWrap").datum(w.filter(function(e){return!e.disabled})).call(t),I.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+t.id()+")");var z=I.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(e){return e});z.enter().append("g").attr("class","nv-regLines");var W=z.selectAll(".nv-regLine").data(function(e){return[e]});W.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),W.filter(function(e){return e.intercept&&e.slope}).watchTransition(O,"scatterPlusLineChart: regline").attr("x1",c.range()[0]).attr("x2",c.range()[1]).attr("y1",function(e,t){return h(c.domain()[0]*e.slope+e.intercept)}).attr("y2",function(e,t){return h(c.domain()[1]*e.slope+e.intercept)}).style("stroke",function(e,t,n){return l(e,n)}).style("stroke-opacity",function(e,t){return e.disabled||typeof e.slope=="undefined"||typeof e.intercept=="undefined"?0:1}),m&&(n.scale(c).ticks(n.ticks()?n.ticks():e.utils.calcTicksX(H/100,w)).tickSize(-B,0),U.select(".nv-x.nv-axis").attr("transform","translate(0,"+h.range()[0]+")").call(n)),g&&(r.scale(h).ticks(r.ticks()?r.ticks():e.utils.calcTicksY(B/36,w)).tickSize(-H,0),U.select(".nv-y.nv-axis").call(r)),p&&(s.getData(t.x()).scale(c).width(H).color(w.map(function(e,t){return e.color||l(e,t)}).filter(function(e,t){return!w[t].disabled})),R.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),U.select(".nv-distributionX").attr("transform","translate(0,"+h.range()[0]+")").datum(w.filter(function(e){return!e.disabled})).call(s)),d&&(o.getData(t.y()).scale(h).width(B).color(w.map(function(e,t){return e.color||l(e,t)}).filter(function(e,t){return!w[t].disabled})),R.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),U.select(".nv-distributionY").attr("transform","translate("+(y?H:-o.size())+",0)").datum(w.filter(function(e){return!e.disabled})).call(o)),i.dispatch.on("stateChange",function(e){for(var t in e)x[t]=e[t];N.stateChange(x),P.update()}),t.dispatch.on("elementMouseover.tooltip",function(e){d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",e.pos[1]-B),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",e.pos[0]+s.size()),e.pos=[e.pos[0]+u.left,e.pos[1]+u.top],N.tooltipShow(e)}),N.on("tooltipShow",function(e){b&&M(e,S.parentNode)}),N.on("changeState",function(e){typeof e.disabled!="undefined"&&(w.forEach(function(t,n){t.disabled=e.disabled[n]}),x.disabled=e.disabled),P.update()}),L=c.copy(),A=h.copy()}),O.renderEnd("scatter with line immediate"),P}var t=e.models.scatter(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s=e.models.distribution(),o=e.models.distribution(),u={top:30,right:20,bottom:50,left:75},a=null,f=null,l=e.utils.defaultColor(),c=t.xScale(),h=t.yScale(),p=!1,d=!1,v=!0,m=!0,g=!0,y=!1,b=!0,w=function(e,t,n){return"<strong>"+t+"</strong>"},E=function(e,t,n){return"<strong>"+n+"</strong>"},S=function(e,t,n,r){return"<h3>"+e+"</h3>"+"<p>"+r+"</p>"},x=e.utils.state(),T=null,N=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),C="No Data Available.",k=250;t.xScale(c).yScale(h),n.orient("bottom").tickPadding(10),r.orient(y?"right":"left").tickPadding(10),s.axis("x"),o.axis("y");var L,A,O=e.utils.renderWatch(N,k),M=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),a=i.pos[1]+(s.offsetTop||0),f=i.pos[0]+(s.offsetLeft||0),l=h.range()[0]+u.top+(s.offsetTop||0),p=c.range()[0]+u.left+(s.offsetLeft||0),d=i.pos[1]+(s.offsetTop||0),v=n.tickFormat()(t.x()(i.point,i.pointIndex)),m=r.tickFormat()(t.y()(i.point,i.pointIndex));w!=null&&e.tooltip.show([f,l],w(i.series.key,v,m,i,P),"n",1,s,"x-nvtooltip"),E!=null&&e.tooltip.show([p,d],E(i.series.key,v,m,i,P),"e",1,s,"y-nvtooltip"),S!=null&&e.tooltip.show([o,a],S(i.series.key,v,m,i.point.tooltip,i,P),i.value<0?"n":"s",null,s)},_=function(e){return function(){return{active:e.map(function(e){return!e.disabled})}}},D=function(e){return function(t){t.active!==undefined&&e.forEach(function(e,n){e.disabled=!t.active[n]})}};return t.dispatch.on("elementMouseout.tooltip",function(e){N.tooltipHide(e),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",0),d3.select(".nv-chart-"+t.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",o.size())}),N.on("tooltipHide",function(){b&&e.tooltip.cleanup()}),P.dispatch=N,P.scatter=t,P.legend=i,P.xAxis=n,P.yAxis=r,P.distX=s,P.distY=o,P._options=Object.create({},{width:{get:function(){return a},set:function(e){a=e}},height:{get:function(){return f},set:function(e){f=e}},showDistX:{get:function(){return p},set:function(e){p=e}},showDistY:{get:function(){return d},set:function(e){d=e}},showLegend:{get:function(){return v},set:function(e){v=e}},showXAxis:{get:function(){return m},set:function(e){m=e}},showYAxis:{get:function(){return g},set:function(e){g=e}},tooltips:{get:function(){return b},set:function(e){b=e}},tooltipContent:{get:function(){return S},set:function(e){S=e}},tooltipXContent:{get:function(){return w},set:function(e){w=e}},tooltipYContent:{get:function(){return E},set:function(e){E=e}},defaultState:{get:function(){return T},set:function(e){T=e}},noData:{get:function(){return C},set:function(e){C=e}},duration:{get:function(){return k},set:function(e){k=e}},margin:{get:function(){return u},set:function(e){u.top=e.top!==undefined?e.top:u.top,u.right=e.right!==undefined?e.right:u.right,u.bottom=e.bottom!==undefined?e.bottom:u.bottom,u.left=e.left!==undefined?e.left:u.left}},rightAlignYAxis:{get:function(){return y},set:function(e){y=e,r.orient(e?"right":"left")}},color:{get:function(){return l},set:function(t){l=e.utils.getColor(t),i.color(l),s.color(l),o.color(l)}}}),e.utils.inheritOptions(P,t),e.utils.initOptions(P),P},e.models.sparkline=function(){"use strict";function d(i){return i.each(function(i){var d=n-t.left-t.right,v=r-t.top-t.bottom,m=d3.select(this);e.utils.initSVG(m),s.domain(l||d3.extent(i,u)).range(h||[0,d]),o.domain(c||d3.extent(i,a)).range(p||[v,0]);var g=m.selectAll("g.nv-wrap.nv-sparkline").data([i]),b=g.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline"),w=b.append("g"),E=g.select("g");g.attr("transform","translate("+t.left+","+t.top+")");var S=g.selectAll("path").data(function(e){return[e]});S.enter().append("path"),S.exit().remove(),S.style("stroke",function(e,t){return e.color||f(e,t)}).attr("d",d3.svg.line().x(function(e,t){return s(u(e,t))}).y(function(e,t){return o(a(e,t))}));var T=g.selectAll("circle.nv-point").data(function(e){function n(t){if(t!=-1){var n=e[t];return n.pointIndex=t,n}return null}var t=e.map(function(e,t){return a(e,t)}),r=n(t.lastIndexOf(o.domain()[1])),i=n(t.indexOf(o.domain()[0])),s=n(t.length-1);return[i,r,s].filter(function(e){return e!=null})});T.enter().append("circle"),T.exit().remove(),T.attr("cx",function(e,t){return s(u(e,e.pointIndex))}).attr("cy",function(e,t){return o(a(e,e.pointIndex))}).attr("r",2).attr("class",function(e,t){return u(e,e.pointIndex)==s.domain()[1]?"nv-point nv-currentValue":a(e,e.pointIndex)==o.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),d}var t={top:2,right:0,bottom:2,left:0},n=400,r=32,i=!0,s=d3.scale.linear(),o=d3.scale.linear(),u=function(e){return e.x},a=function(e){return e.y},f=e.utils.getColor(["#000"]),l,c,h,p;return d.options=e.utils.optionsFunc.bind(d),d._options=Object.create({},{width:{get:function(){return n},set:function(e){n=e}},height:{get:function(){return r},set:function(e){r=e}},xDomain:{get:function(){return l},set:function(e){l=e}},yDomain:{get:function(){return c},set:function(e){c=e}},xRange:{get:function(){return h},set:function(e){h=e}},yRange:{get:function(){return p},set:function(e){p=e}},xScale:{get:function(){return s},set:function(e){s=e}},yScale:{get:function(){return o},set:function(e){o=e}},animate:{get:function(){return i},set:function(e){i=e}},x:{get:function(){return u},set:function(e){u=d3.functor(e)}},y:{get:function(){return a},set:function(e){a=d3.functor(e)}},margin:{get:function(){return t},set:function(e){t.top=e.top!==undefined?e.top:t.top,t.right=e.right!==undefined?e.right:t.right,t.bottom=e.bottom!==undefined?e.bottom:t.bottom,t.left=e.left!==undefined?e.left:t.left}},color:{get:function(){return f},set:function(t){f=e.utils.getColor(t)}}}),e.utils.initOptions(d),d},e.models.sparklinePlus=function(){"use strict";function v(c){return c.each(function(m){function M(){if(a)return;var e=k.selectAll(".nv-hoverValue").data(u),r=e.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);e.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),e.attr("transform",function(e){return"translate("+s(t.x()(m[e],e))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1);if(!u.length)return;r.append("line").attr("x1",0).attr("y1",-n.top).attr("x2",0).attr("y2",w),r.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-n.top).attr("text-anchor","end").attr("dy",".9em"),k.select(".nv-hoverValue .nv-xValue").text(f(t.x()(m[u[0]],u[0]))),r.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-n.top).attr("text-anchor","start").attr("dy",".9em"),k.select(".nv-hoverValue .nv-yValue").text(l(t.y()(m[u[0]],u[0])))}function _(){function r(e,n){var r=Math.abs(t.x()(e[0],0)-n),i=0;for(var s=0;s<e.length;s++)Math.abs(t.x()(e[s],s)-n)<r&&(r=Math.abs(t.x()(e[s],s)-n),i=s);return i}if(a)return;var e=d3.mouse(this)[0]-n.left;u=[r(m,Math.round(s.invert(e)))],M()}var g=d3.select(this);e.utils.initSVG(g);var b=(r||parseInt(g.style("width"))||960)-n.left-n.right,w=(i||parseInt(g.style("height"))||400)-n.top-n.bottom;v.update=function(){v(c)},v.container=this;if(!m||!m.length){var E=g.selectAll(".nv-noData").data([d]);return E.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),E.attr("x",n.left+b/2).attr("y",n.top+w/2).text(function(e){return e}),v}g.selectAll(".nv-noData").remove();var S=t.y()(m[m.length-1],m.length-1);s=t.xScale(),o=t.yScale();var T=g.selectAll("g.nv-wrap.nv-sparklineplus").data([m]),N=T.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus"),C=N.append("g"),k=T.select("g");C.append("g").attr("class","nv-sparklineWrap"),C.append("g").attr("class","nv-valueWrap"),C.append("g").attr("class","nv-hoverArea"),T.attr("transform","translate("+n.left+","+n.top+")");var L=k.select(".nv-sparklineWrap");t.width(b).height(w),L.call(t);var A=k.select(".nv-valueWrap"),O=A.selectAll(".nv-currentValue").data([S]);O.enter().append("text").attr("class","nv-currentValue").attr("dx",p?-8:8).attr("dy",".9em").style("text-anchor",p?"end":"start"),O.attr("x",b+(p?n.right:0)).attr("y",h?function(e){return o(e)}:0).style("fill",t.color()(m[m.length-1],m.length-1)).text(l(S)),C.select(".nv-hoverArea").append("rect").on("mousemove",_).on("click",function(){a=!a}).on("mouseout",function(){u=[],M()}),k.select(".nv-hoverArea rect").attr("transform",function(e){return"translate("+ -n.left+","+ -n.top+")"}).attr("width",b+n.left+n.right).attr("height",w+n.top)}),v}var t=e.models.sparkline(),n={top:15,right:100,bottom:10,left:50},r=null,i=null,s,o,u=[],a=!1,f=d3.format(",r"),l=d3.format(",.2f"),c=!0,h=!0,p=!1,d="No Data Available.";return v.sparkline=t,v.options=e.utils.optionsFunc.bind(v),v._options=Object.create({},{width:{get:function(){return r},set:function(e){r=e}},height:{get:function(){return i},set:function(e){i=e}},xTickFormat:{get:function(){return f},set:function(e){f=e}},yTickFormat:{get:function(){return l},set:function(e){l=e}},showValue:{get:function(){return c},set:function(e){c=e}},alignValue:{get:function(){return h},set:function(e){h=e}},rightAlignValue:{get:function(){return p},set:function(e){p=e}},noData:{get:function(){return d},set:function(e){d=e}},margin:{get:function(){return n},set:function(e){n.top=e.top!==undefined?e.top:n.top,n.right=e.right!==undefined?e.right:n.right,n.bottom=e.bottom!==undefined?e.bottom:n.bottom,n.left=e.left!==undefined?e.left:n.left}}}),e.utils.inheritOptions(v,t),e.utils.initOptions(v),v},e.models.stackedArea=function(){"use strict";function b(a){return y.reset(),y.models(v),a.each(function(a){var m=n-t.left-t.right,w=r-t.top-t.bottom,E=d3.select(this);e.utils.initSVG(E),p=v.xScale(),d=v.yScale();var S=a;a.forEach(function(e,t){e.seriesIndex=t,e.values=e.values.map(function(e,n){return e.index=n,e.seriesIndex=t,e})});var T=a.filter(function(e){return!e.disabled});a=d3.layout.stack().order(l).offset(f).values(function(e){return e.values}).x(o).y(u).out(function(e,t,n){var r=u(e)===0?0:n;e.display={y:r,y0:t}})(T);var N=E.selectAll("g.nv-wrap.nv-stackedarea").data([a]),C=N.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),k=C.append("defs"),L=C.append("g"),A=N.select("g");L.append("g").attr("class","nv-areaWrap"),L.append("g").attr("class","nv-scatterWrap"),N.attr("transform","translate("+t.left+","+t.top+")"),v.width(m).height(w).x(o).y(function(e){return e.display.y+e.display.y0}).forceY([0]).color(a.map(function(e,t){return e.color||i(e,e.seriesIndex)}));var O=A.select(".nv-scatterWrap").datum(a);O.call(v),k.append("clipPath").attr("id","nv-edge-clip-"+s).append("rect"),N.select("#nv-edge-clip-"+s+" rect").attr("width",m).attr("height",w),A.attr("clip-path",h?"url(#nv-edge-clip-"+s+")":"");var M=d3.svg.area().x(function(e,t){return p(o(e,t))}).y0(function(e){return d(e.display.y0)}).y1(function(e){return d(e.display.y+e.display.y0)}).interpolate(c),_=d3.svg.area().x(function(e,t){return p(o(e,t))}).y0(function(e){return d(e.display.y0)}).y1(function(e){return d(e.display.y0)}),D=A.select(".nv-areaWrap").selectAll("path.nv-area").data(function(e){return e});D.enter().append("path").attr("class",function(e,t){return"nv-area nv-area-"+t}).attr("d",function(e,t){return _(e.values,e.seriesIndex)}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),g.areaMouseover({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.seriesIndex})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),g.areaMouseout({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.seriesIndex})}).on("click",function(t,n){var r=d3.mouse(this),i=r[0],s=b.xScale().invert(i),o=e.interactiveBisect(t.values,s,b.x());d3.select(this).classed("hover",!1),g.areaClick({point:t,series:t.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:t.seriesIndex,pointIndex:o})}),D.exit().remove(),D.style("fill",function(e,t){return e.color||i(e,e.seriesIndex)}).style("stroke",function(e,t){return e.color||i(e,e.seriesIndex)}),D.watchTransition(y,"stackedArea path").attr("d",function(e,t){return M(e.values,t)}),v.dispatch.on("elementMouseover.area",function(e){A.select(".nv-chart-"+s+" .nv-area-"+e.seriesIndex).classed("hover",!0)}),v.dispatch.on("elementMouseout.area",function(e){A.select(".nv-chart-"+s+" .nv-area-"+e.seriesIndex).classed("hover",!1)}),b.d3_stackedOffset_stackPercent=function(e){var t=e.length,n=e[0].length,r=1/t,i,s,o,a=[];for(s=0;s<n;++s){for(i=0,o=0;i<S.length;i++)o+=u(S[i].values[s]);if(o)for(i=0;i<t;i++)e[i][s][1]/=o;else for(i=0;i<t;i++)e[i][s][1]=r}for(s=0;s<n;++s)a[s]=0;return a}}),y.renderEnd("stackedArea immediate"),b}var t={top:0,right:0,bottom:0,left:0},n=960,r=500,i=e.utils.defaultColor(),s=Math.floor(Math.random()*1e5),o=function(e){return e.x},u=function(e){return e.y},a="stack",f="zero",l="default",c="linear",h=!1,p,d,v=e.models.scatter(),m=250,g=d3.dispatch("tooltipShow","tooltipHide","areaClick","areaMouseover","areaMouseout","renderEnd");v.interactive(!1),v.pointSize(2.2).pointDomain([2.2,2.2]);var y=e.utils.renderWatch(g,m);return v.dispatch.on("elementClick.area",function(e){g.areaClick(e)}),v.dispatch.on("elementMouseover.tooltip",function(e){e.pos=[e.pos[0]+t.left,e.pos[1]+t.top],g.tooltipShow(e)}),v.dispatch.on("elementMouseout.tooltip",function(e){g.tooltipHide(e)}),b.dispatch=g,b.scatter=v,b.interpolate=function(e){return arguments.length?(c=e,b):c},b.duration=function(e){return arguments.length?(m=e,y.reset(m),v.duration(m),b):m},b.dispatch=g,b.options=e.utils.optionsFunc.bind(b),b._options=Object.create({},{width:{get:function(){return n},set:function(e){n=e}},height:{get:function(){return r},set:function(e){r=e}},clipEdge:{get:function(){return h},set:function(e){h=e}},offset:{get:function(){return f},set:function(e){f=e}},order:{get:function(){return l},set:function(e){l=e}},interpolate:{get:function(){return c},set:function(e){c=e}},x:{get:function(){return o},set:function(e){o=d3.functor(e)}},y:{get:function(){return u},set:function(e){u=d3.functor(e)}},margin:{get:function(){return t},set:function(e){t.top=e.top!==undefined?e.top:t.top,t.right=e.right!==undefined?e.right:t.right,t.bottom=e.bottom!==undefined?e.bottom:t.bottom,t.left=e.left!==undefined?e.left:t.left}},color:{get:function(){return i},set:function(t){i=e.utils.getColor(t)}},style:{get:function(){return a},set:function(e){a=e;switch(a){case"stack":b.offset("zero"),b.order("default");break;case"stream":b.offset("wiggle"),b.order("inside-out");break;case"stream-center":b.offset("silhouette"),b.order("inside-out");break;case"expand":b.offset("expand"),b.order("default");break;case"stack_percent":b.offset(b.d3_stackedOffset_stackPercent),b.order("default")}}},duration:{get:function(){return m},set:function(e){m=e,y.reset(m),v.duration(m)}}}),e.utils.inheritOptions(b,v),e.utils.initOptions(b),b},e.models.stackedAreaChart=function(){"use strict";function H(y){return O.reset(),O.models(t),p&&O.models(n),d&&O.models(r),y.each(function(y){var O=d3.select(this),B=this;e.utils.initSVG(O);var j=(a||parseInt(O.style("width"))||960)-u.left-u.right,F=(f||parseInt(O.style("height"))||400)-u.top-u.bottom;H.update=function(){O.transition().duration(A).call(H)},H.container=this,S.setter(P(y),H.update).getter(D(y)).update(),S.disabled=y.map(function(e){return!!e.disabled});if(!x){var I;x={};for(I in S)S[I]instanceof Array?x[I]=S[I].slice(0):x[I]=S[I]}if(!y||!y.length||!y.filter(function(e){return e.values.length}).length){var q=O.selectAll(".nv-noData").data([T]);return q.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),q.attr("x",u.left+j/2).attr("y",u.top+F/2).text(function(e){return e}),H}O.selectAll(".nv-noData").remove(),b=t.xScale(),w=t.yScale();var R=O.selectAll("g.nv-wrap.nv-stackedAreaChart").data([y]),U=R.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),z=R.select("g");U.append("rect").style("opacity",0),U.append("g").attr("class","nv-x nv-axis"),U.append("g").attr("class","nv-y nv-axis"),U.append("g").attr("class","nv-stackedWrap"),U.append("g").attr("class","nv-legendWrap"),U.append("g").attr("class","nv-controlsWrap"),U.append("g").attr("class","nv-interactive"),z.select("rect").attr("width",j).attr("height",F);if(h){var W=c?j-C:j;i.width(W),z.select(".nv-legendWrap").datum(y).call(i),u.top!=i.height()&&(u.top=i.height(),F=(f||parseInt(O.style("height"))||400)-u.top-u.bottom),z.select(".nv-legendWrap").attr("transform","translate("+(j-W)+","+ -u.top+")")}if(c){var X=[{key:L.stacked||"Stacked",metaKey:"Stacked",disabled:t.style()!="stack",style:"stack"},{key:L.stream||"Stream",metaKey:"Stream",disabled:t.style()!="stream",style:"stream"},{key:L.expanded||"Expanded",metaKey:"Expanded",disabled:t.style()!="expand",style:"expand"},{key:L.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:t.style()!="stack_percent",style:"stack_percent"}];C=k.length/3*260,X=X.filter(function(e){return k.indexOf(e.metaKey)!==-1}),s.width(C).color(["#444","#444","#444"]),z.select(".nv-controlsWrap").datum(X).call(s),u.top!=Math.max(s.height(),i.height())&&(u.top=Math.max(s.height(),i.height()),F=(f||parseInt(O.style("height"))||400)-u.top-u.bottom),z.select(".nv-controlsWrap").attr("transform","translate(0,"+ -u.top+")")}R.attr("transform","translate("+u.left+","+u.top+")"),v&&z.select(".nv-y.nv-axis").attr("transform","translate("+j+",0)"),m&&(o.width(j).height(F).margin({left:u.left,top:u.top}).svgContainer(O).xScale(b),R.select(".nv-interactive").call(o)),t.width(j).height(F);var V=z.select(".nv-stackedWrap").datum(y);V.transition().call(t),p&&(n.scale(b).ticks(e.utils.calcTicksX(j/100,y)).tickSize(-F,0),z.select(".nv-x.nv-axis").attr("transform","translate(0,"+F+")"),z.select(".nv-x.nv-axis").transition().duration(0).call(n)),d&&(r.scale(w).ticks(t.offset()=="wiggle"?0:e.utils.calcTicksY(F/36,y)).tickSize(-j,0).setTickFormat(t.style()=="expand"||t.style()=="stack_percent"?d3.format("%"):E),z.select(".nv-y.nv-axis").transition().duration(0).call(r)),t.dispatch.on("areaClick.toggle",function(e){y.filter(function(e){return!e.disabled}).length===1?y.forEach(function(e){e.disabled=!1}):y.forEach(function(t,n){t.disabled=n!=e.seriesIndex}),S.disabled=y.map(function(e){return!!e.disabled}),N.stateChange(S),H.update()}),i.dispatch.on("stateChange",function(e){for(var t in e)S[t]=e[t];N.stateChange(S),H.update()}),s.dispatch.on("legendClick",function(e,n){if(!e.disabled)return;X=X.map(function(e){return e.disabled=!0,e}),e.disabled=!1,t.style(e.style),S.style=t.style(),N.stateChange(S),H.update()}),o.dispatch.on("elementMousemove",function(i){t.clearHighlights();var s,a,f,c=[];y.filter(function(e,t){return e.seriesIndex=t,!e.disabled}).forEach(function(n,r){a=e.interactiveBisect(n.values,i.pointXValue,H.x()),t.highlightPoint(r,a,!0);var o=n.values[a];if(typeof o=="undefined")return;typeof s=="undefined"&&(s=o),typeof f=="undefined"&&(f=H.xScale()(H.x()(o,a)));var u=t.style()=="expand"?o.display.y:H.y()(o,a);c.push({key:n.key,value:u,color:l(n,n.seriesIndex),stackedValue:o.display})}),c.reverse();if(c.length>2){var h=H.yScale().invert(i.mouseY),p=Infinity,d=null;c.forEach(function(e,t){h=Math.abs(h);var n=Math.abs(e.stackedValue.y0),r=Math.abs(e.stackedValue.y);if(h>=n&&h<=r+n){d=t;return}}),d!=null&&(c[d].highlight=!0)}var v=n.tickFormat()(H.x()(s,a)),m=t.style()=="expand"?function(e,t){return e>=1?e%1===0?d3.format(".0%")(e):d3.format(".2%")(e):e*100%1===0?d3.format(".0%")(e):d3.format(".2%")(e)}:function(e,t){return r.tickFormat()(e)};o.tooltip.position({left:i.mouseX+u.left,top:i.mouseY+u.top}).chartContainer(B.parentNode).enabled(g).valueFormatter(m).data({value:v,series:c})(),o.renderGuideLine(f)}),o.dispatch.on("elementMouseout",function(e){N.tooltipHide(),t.clearHighlights()}),N.on("tooltipShow",function(e){g&&_(e,B.parentNode)}),N.on("changeState",function(e){typeof e.disabled!="undefined"&&y.length===e.disabled.length&&(y.forEach(function(t,n){t.disabled=e.disabled[n]}),S.disabled=e.disabled),typeof e.style!="undefined"&&(t.style(e.style),M=e.style),H.update()})}),O.renderEnd("stacked Area chart immediate"),H}var t=e.models.stackedArea(),n=e.models.axis(),r=e.models.axis(),i=e.models.legend(),s=e.models.legend(),o=e.interactiveGuideline(),u={top:30,right:25,bottom:50,left:60},a=null,f=null,l=e.utils.defaultColor(),c=!0,h=!0,p=!0,d=!0,v=!1,m=!1,g=!0,y=function(e,t,n,r,i){return"<h3>"+e+"</h3>"+"<p>"+n+" on "+t+"</p>"},b,w,E=d3.format(",.2f"),S=e.utils.state(),x=null,T="No Data Available.",N=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),C=250,k=["Stacked","Stream","Expanded"],L={},A=250;S.style=t.style(),n.orient("bottom").tickPadding(7),r.orient(v?"right":"left"),s.updateState(!1);var O=e.utils.renderWatch(N),M=t.style(),_=function(i,s){var o=i.pos[0]+(s.offsetLeft||0),u=i.pos[1]+(s.offsetTop||0),a=n.tickFormat()(t.x()(i.point,i.pointIndex)),f=r.tickFormat()(t.y()(i.point,i.pointIndex)),l=y(i.series.key,a,f,i,H);e.tooltip.show([o,u],l,i.value<0?"n":"s",null,s)},D=function(e){return function(){return{active:e.map(function(e){return!e.disabled}),style:t.style()}}},P=function(e){return function(t){t.style!==undefined&&(M=t.style),t.active!==undefined&&e.forEach(function(e,n){e.disabled=!t.active[n]})}};return t.dispatch.on("tooltipShow",function(e){e.pos=[e.pos[0]+u.left,e.pos[1]+u.top],N.tooltipShow(e)}),t.dispatch.on("tooltipHide",function(e){N.tooltipHide(e)}),N.on("tooltipHide",function(){g&&e.tooltip.cleanup()}),H.dispatch=N,H.stacked=t,H.legend=i,H.controls=s,H.xAxis=n,H.yAxis=r,H.interactiveLayer=o,r.setTickFormat=r.tickFormat,H.dispatch=N,H.options=e.utils.optionsFunc.bind(H),H._options=Object.create({},{width:{get:function(){return a},set:function(e){a=e}},height:{get:function(){return f},set:function(e){f=e}},showLegend:{get:function(){return h},set:function(e){h=e}},showXAxis:{get:function(){return p},set:function(e){p=e}},showYAxis:{get:function(){return d},set:function(e){d=e}},tooltips:{get:function(){return g},set:function(e){g=e}},tooltipContent:{get:function(){return y},set:function(e){y=e}},defaultState:{get:function(){return x},set:function(e){x=e}},noData:{get:function(){return T},set:function(e){T=e}},showControls:{get:function(){return c},set:function(e){c=e}},controlLabels:{get:function(){return L},set:function(e){L=e}},yAxisTickFormat:{get:function(){return E},set:function(e){E=e}},margin:{get:function(){return u},set:function(e){u.top=e.top!==undefined?e.top:u.top,u.right=e.right!==undefined?e.right:u.right,u.bottom=e.bottom!==undefined?e.bottom:u.bottom,u.left=e.left!==undefined?e.left:u.left}},duration:{get:function(){return A},set:function(e){A=e,O.reset(A),t.duration(A),n.duration(A),r.duration(A)}},color:{get:function(){return l},set:function(n){l=e.utils.getColor(n),i.color(l),t.color(l)}},rightAlignYAxis:{get:function(){return v},set:function(e){v=e,r.orient(v?"right":"left")}},useInteractiveGuideline:{get:function(){return m},set:function(e){m=!!e,e&&(H.interactive(!1),H.useVoronoi(!1))}}}),e.utils.inheritOptions(H,t),e.utils.initOptions(H),H},e.version="1.7.1"}(),define("nvd3",["d3"],function(e){return function(){var t,n;return t||e.nv}}(this)),EQCSS={code:"",scripts:[],queries:[],selectors:[],conditions:[],styles:[],xhr:new XMLHttpRequest},EQCSS.load=function(){var e=document.querySelectorAll("script[type='text/eqcss']");for(var t=0;t<e.length;t++)e[t].innerHTML!=""&&(this.code+=e[t].innerHTML),e[t].src&&(this.xhr.open("GET",e[t].src,!1),this.xhr.send(null),this.code+=this.xhr.responseText),e[t].type="text/eqcss-read";this.code=this.code.replace(/\s+/g," "),this.code=this.code.replace(/^ | $/g,""),this.code=this.code.replace(/\/\*[\w\W]*?\*\//g,""),this.code=this.code.replace(/ *@element/g,"\n@element"),this.code.replace(/(@element.*(?!@element))/g,function(e,t){EQCSS.queries.push(t)});for(t=0;t<this.queries.length;t++)this.queries[t].replace(/@element ?["']([^"']*)["']/g,function(e,n){EQCSS.selectors[t]=n});for(t=0;t<this.queries.length;t++)this.conditions[t]=[],this.queries[t].replace(/and ?\( ?([^:]*) ?: ?([^)]*) ?\)/g,function(e,n,r){EQCSS.conditions[t].push({measure:n,value:r})});for(t=0;t<this.queries.length;t++)this.queries[t].replace(/{(.*)}/g,function(e,n){EQCSS.styles[t]=n})},EQCSS.apply=function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d;for(e=0;e<EQCSS.queries.length;e++){r=document.querySelectorAll(EQCSS.selectors[e]);for(t=0;t<r.length;t++){i="EQCSS_"+e+"_"+t,r[t].setAttribute(i,i),s=document.querySelector("#"+i),s||(s=document.createElement("STYLE"),s.id=i,document.querySelector("head").appendChild(s)),s=document.querySelector("#"+i),h=!0;e:for(n=0;n<EQCSS.conditions[e].length;n++){p=window.getComputedStyle(r[t],null),r[t]!=document.documentElement?d=window.getComputedStyle(r[t].parentNode,null):d=null;switch(EQCSS.conditions[e][n].measure){case"min-width":if(EQCSS.conditions[e][n].value.indexOf("px")!=-1){u=parseInt(p.getPropertyValue("width"));if(!(u>=parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}}if(EQCSS.conditions[e][n].value.indexOf("%")!=-1){u=parseInt(p.getPropertyValue("width")),a=parseInt(d.getPropertyValue("width"));if(!(a/u<=100/parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}}break;case"max-width":if(EQCSS.conditions[e][n].value.indexOf("px")!=-1){u=parseInt(p.getPropertyValue("width"));if(!(u<=parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}}if(EQCSS.conditions[e][n].value.indexOf("%")!=-1){u=parseInt(p.getPropertyValue("width")),a=parseInt(d.getPropertyValue("width"));if(!(a/u>=100/parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}}break;case"min-height":if(EQCSS.conditions[e][n].value.indexOf("px")!=-1){u=parseInt(p.getPropertyValue("height"));if(!(u>=parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}}if(EQCSS.conditions[e][n].value.indexOf("%")!=-1){u=parseInt(p.getPropertyValue("height")),a=parseInt(d.getPropertyValue("height"));if(!(a/u<=100/parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}}break;case"max-height":if(EQCSS.conditions[e][n].value.indexOf("px")!=-1){f=parseInt(p.getPropertyValue("height"));if(!(f<=parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}}if(EQCSS.conditions[e][n].value.indexOf("%")!=-1){f=parseInt(p.getPropertyValue("height")),l=parseInt(d.getPropertyValue("height"));if(!(l/f>=100/parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}}break;case"min-characters":if(r[t].value){if(!(r[t].value.length>=parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}}else if(!(r[t].textContent.length>=parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}break;case"max-characters":if(r[t].value){if(!(r[t].value.length<=parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}}else if(!(r[t].textContent.length<=parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}break;case"min-children":if(!(r[t].children.length>=parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}break;case"max-children":if(!(r[t].children.length<=parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}break;case"min-lines":f=parseInt(p.getPropertyValue("height"))-parseInt(p.getPropertyValue("border-top-width"))-parseInt(p.getPropertyValue("border-bottom-width"))-parseInt(p.getPropertyValue("padding-top"))-parseInt(p.getPropertyValue("padding-bottom")),c=parseInt(p.getPropertyValue("line-height"));if(!(f/c>=parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}break;case"max-lines":f=parseInt(p.getPropertyValue("height"))-parseInt(p.getPropertyValue("border-top-width"))-parseInt(p.getPropertyValue("border-bottom-width"))-parseInt(p.getPropertyValue("padding-top"))-parseInt(p.getPropertyValue("padding-bottom")),c=parseInt(p.getPropertyValue("line-height"));if(!(f/c+1<=parseInt(EQCSS.conditions[e][n].value))){h=!1;break e}}}if(h===!0){o=EQCSS.styles[e],o=o.replace(/\$this/g,"["+i+"]");try{s.innerHTML=o}catch(v){s.styleSheet.cssText=o}}else try{s.innerHTML=""}catch(v){s.styleSheet.cssText=""}}}},domready(function(){EQCSS.load(),EQCSS.apply()}),window.addEventListener("resize",function(){EQCSS.apply()}),define("elementQuery",function(){}),function(e,t){typeof define=="function"&&define.amd?define("d3Tip",["d3"],t):typeof module=="object"&&module.exports?module.exports=function(e){return e.tip=t(e),e.tip}:e.d3.tip=t(e.d3)}(this,function(e){return function(){function a(e){s=x(e),o=s.createSVGPoint(),document.body.appendChild(i)}function f(){return"n"}function l(){return[0,0]}function c(){return" "}function d(){var e=N();return{top:e.n.y-i.offsetHeight,left:e.n.x-i.offsetWidth/2}}function v(){var e=N();return{top:e.s.y,left:e.s.x-i.offsetWidth/2}}function m(){var e=N();return{top:e.e.y-i.offsetHeight/2,left:e.e.x}}function g(){var e=N();return{top:e.w.y-i.offsetHeight/2,left:e.w.x-i.offsetWidth}}function y(){var e=N();return{top:e.nw.y-i.offsetHeight,left:e.nw.x-i.offsetWidth}}function b(){var e=N();return{top:e.ne.y-i.offsetHeight,left:e.ne.x}}function w(){var e=N();return{top:e.sw.y,left:e.sw.x-i.offsetWidth}}function E(){var e=N();return{top:e.se.y,left:e.e.x}}function S(){var t=e.select(document.createElement("div"));return t.style({position:"absolute",top:0,opacity:0,"pointer-events":"none","box-sizing":"border-box"}),t.node()}function x(e){return e=e.node(),e.tagName.toLowerCase()==="svg"?e:e.ownerSVGElement}function T(){return i===null&&(i=S(),document.body.appendChild(i)),e.select(i)}function N(){var t=u||e.event.target;while("undefined"==typeof t.getScreenCTM&&"undefined"===t.parentNode)t=t.parentNode;var n={},r=t.getScreenCTM(),i=t.getBBox(),s=i.width,a=i.height,f=i.x,l=i.y;return o.x=f,o.y=l,n.nw=o.matrixTransform(r),o.x+=s,n.ne=o.matrixTransform(r),o.y+=a,n.se=o.matrixTransform(r),o.x-=s,n.sw=o.matrixTransform(r),o.y-=a/2,n.w=o.matrixTransform(r),o.x+=s,n.e=o.matrixTransform(r),o.x-=s/2,o.y-=a/2,n.n=o.matrixTransform(r),o.y+=a,n.s=o.matrixTransform(r),n}var t=f,n=l,r=c,i=S(),s=null,o=null,u=null;a.show=function(){var e=Array.prototype.slice.call(arguments);e[e.length-1]instanceof SVGElement&&(u=e.pop());var s=r.apply(this,e),o=n.apply(this,e),f=t.apply(this,e),l=T(),c=p.length,d,v=document.documentElement.scrollTop||document.body.scrollTop,m=document.documentElement.scrollLeft||document.body.scrollLeft,g=document.documentElement.offsetWidth||document.body.offsetWidth;l.html(s).style({opacity:1,"pointer-events":"all"});while(c--)l.classed(p[c],!1);return d=h.get(f).apply(this),d.left+i.offsetWidth>=g?l.classed(f,!0).style({top:d.top+o[0]+v+"px",left:"auto",right:"20px"}):l.classed(f,!0).style({top:d.top+o[0]+v+"px",left:d.left+o[1]+m+"px",right:"auto"}),a},a.hide=function(){var e=T();return e.style({opacity:0,"pointer-events":"none"}),a},a.attr=function(t,n){if(arguments.length<2&&typeof t=="string")return T().attr(t);var r=Array.prototype.slice.call(arguments);return e.selection.prototype.attr.apply(T(),r),a},a.style=function(t,n){if(arguments.length<2&&typeof t=="string")return T().style(t);var r=Array.prototype.slice.call(arguments);return e.selection.prototype.style.apply(T(),r),a},a.direction=function(n){return arguments.length?(t=n==null?n:e.functor(n),a):t},a.offset=function(t){return arguments.length?(n=t==null?t:e.functor(t),a):n},a.html=function(t){return arguments.length?(r=t==null?t:e.functor(t),a):r},a.destroy=function(){return i&&(T().remove(),i=null),a};var h=e.map({n:d,s:v,e:m,w:g,nw:y,ne:b,sw:w,se:E}),p=h.keys();return a}}),define("filtersService",["require","exports","module","jquery","dataUrlResolver","core/components","callService"],function(e,t,n){"use strict";var r=e("jquery"),i=e("dataUrlResolver"),s=e("core/components"),o=e("callService"),u=o.call,a=function(e){var t=[];return _.each(e,function(e){var n=e.requestParams.getSortInfo(),r=n.dataIndex.replaceAll(".","$"),i={name:e.name,entities:[],type:e.type,share:e.isShared,selection_parameters:{sorting_column:r,is_asc:n.direction==="ASC"}};e.id.indexOf("tmp_")===-1&&(i.id=e.id),_.each(e.requestParams.getFilters(),function(e){var t=e.id.split(".");i.entities.push({value:e.value,filtering_field:t[2],condition:t[1],is_negative:t[1].indexOf("!")===0})}),t.push(i)}),t},f=function(e,t){e.setTab(t.id);var n=[];_.each(t.entities,function(e){var t=e.is_negative?"!":"";n.push({id:"filter."+t+e.condition+"."+e.filtering_field,value:e.value})}),n.length&&e.setFilters(n),e.setPage(t.selection_parameters.page_number||1),e.setPageSize(t.selection_parameters.quantity||50);var r=t.selection_parameters.is_asc?"ASC":"DESC";e.setSortInfo(t.selection_parameters.sorting_column,r)},l=function(e){return u("GET",i.getFilters(e)).then(function(e){return _.each(e,function(e){var t=new s.RequestParameters;f(t,e),e.requestParams=t,e.url=i.tabUrl(t.toURLSting())}),e})},c=function(e){return u("POST",i.saveFilter(),{elements:a(e)})},h=function(e){return u("PUT",i.saveFilter(),{elements:a(e)})},p=function(e){return u("PUT",i.getPreferences(),e)},d=function(e){return u("DELETE",i.filterById(e))},v=function(e,t){return u("PUT",i.filterById(e),{share:t})},m=function(e,t){return u("PUT",i.filterById(e),{name:t})};return{getFilters:l,saveFilters:c,updateFilters:h,updateTabsPreferences:p,loadFilterIntoRequestParams:f,deleteFilter:d,shareFilter:v,updateFilter:m}}),define("widget/widgetsConfig",["require","exports","module","localization","util","defectType/SingletonDefectTypeCollection","app"],function(e,t,n){"use strict";var r=e("localization"),i=e("util"),s=e("defectType/SingletonDefectTypeCollection"),o=e("app"),u=o.getInstance(),a=function(){return{defaultWidgetImg:"no_chart.png",widgetTypes:{old_line_chart:{gadget_name:r.widgets.statisticsLineChart,img:"trends_chart.png",description:r.widgets.statisticsLineChartDescription,widget_type:"line_chart",gadget:"old_line_chart",criteria:l(),mode:{type:"radio",defaultVal:"launch",items:{launch:r.widgets.launchMode,timeline:r.widgets.timelineMode}},limit:{display:!0,min:1,max:150,def:50}},statistic_trend:{gadget_name:r.widgets.statisticsTrendChart,img:"launch_statistics_trend_chart.png",description:r.widgets.statisticsTrendChartDescription,widget_type:"trends_chart",gadget:"statistic_trend",criteria:l(),mode:{type:"radio",defaultVal:"launch",items:{launch:r.widgets.launchMode,timeline:r.widgets.timelineMode}},limit:{display:!0,min:1,max:150,def:50}},overall_statistics:{gadget_name:r.widgets.overallStatisticsPanel,img:"overall_statistics_panel.png",description:r.widgets.overallStatisticsPanelDescription,widget_type:"statistics_panel",gadget:"overall_statistics",criteria:l(),limit:{display:!0,min:1,max:150,def:50}},launches_duration_chart:{gadget_name:r.widgets.durationChart,img:"different_launches_comparison.png",description:r.widgets.durationChartDescription,widget_type:"column_chart",gadget:"launches_duration_chart",noCriteria:!0,staticCriteria:{start_time:"",end_time:"",name:"",number:"",status:""},limit:{display:!0,min:1,max:150,def:50}},launch_statistics:{gadget_name:r.widgets.executionIssueStatistics,img:"launch_statistics_pie.png",description:r.widgets.executionIssueStatisticsDescription,widget_type:"combine_pie_chart",gadget:"launch_statistics",noCriteria:!0,staticCriteria:l(),limit:{display:!1,min:1,max:1,def:1}},last_launch:{gadget_name:r.widgets.executionIssueStatistics,img:"launch_statistics_pie.png",description:r.widgets.executionIssueStatisticsDescription,widget_type:"combine_pie_chart",gadget:"last_launch",noCriteria:!0,notShowOnWizard:!0,staticCriteria:c(),limit:{display:!1,min:1,max:1,def:1}},activity_stream:{gadget_name:r.widgets.projectActivityPanel,img:"activity_stream.png",description:r.widgets.projectActivityPanelDescription,widget_type:"activity_panel",gadget:"activity_stream",noCriteria:!0,noFilters:!0,limit:{display:!0,min:1,max:150,def:50},actions:{start:{actions:["start"],text:r.forms.startLaunch},finish:{actions:["finish"],text:r.forms.finishLaunch},"delete":{actions:["delete"],text:r.forms.deleteLaunch},share:{actions:["share"],text:r.forms.shareWidgetDashboard},unshare:{actions:["unshare"],text:r.forms.unShareWidgetDashboard},post_issue:{actions:["post_issue","attach_issue"],text:r.forms.postIssue},create_user:{actions:["create_user"],text:r.forms.createUser},update_bts:{actions:["create_bts","update_bts","delete_bts"],text:r.forms.updateBts},update_project:{actions:["update_project"],text:r.forms.updateProject},update_defects:{actions:["update_defect","delete_defect"],text:r.forms.updateDefects}},usersFilter:!0,staticCriteria:{name:"name",userRef:r.forms.user,last_modified:"Last_modified",actionType:"ActionType",objectType:"ObjectType",projectRef:r.forms.project,loggedObjectRef:"LoggedObjectRef",history:r.forms.history}},cases_trend:{gadget_name:r.widgets.growthTrendChart,img:"test-cases-growth-trend-chart.png",description:r.widgets.growthTrendChartDescription,widget_type:"cases_trend_chart",gadget:"cases_trend",noCriteria:!0,staticCriteria:{statistics$executions$total:r.launchesHeaders.total},mode:{type:"radio",defaultVal:"launch",items:{launch:r.widgets.launchMode,timeline:r.widgets.timelineMode}},limit:{display:!0,min:1,max:150,def:50}},investigated_trend:{gadget_name:r.widgets.percentageOfLaunches,img:"to_investigate_trend.png",description:r.widgets.percentageOfLaunchesDescription,widget_type:"column_chart",gadget:"investigated_trend",noCriteria:!0,staticCriteria:m(),mode:{type:"radio",defaultVal:"launch",items:{launch:r.widgets.launchMode,timeline:r.widgets.timelineMode}},limit:{display:!0,min:1,max:150,def:50}},launches_table:{gadget_name:r.widgets.launchesTable,img:"filter_results.png",description:r.widgets.launchesTableDescription,widget_type:"launches_table",gadget:"launches_table",criteria:f(),staticCriteria:{name:r.forms.name,number:r.forms.number,last_modified:r.forms.lastModified,status:r.forms.status},limit:{display:!0,min:1,max:150,def:50}},unique_bug_table:{gadget_name:r.widgets.uniqueBugsTable,img:"unique_bugs_table.png",description:r.widgets.uniqueBugsTableDescription,widget_type:"table",gadget:"unique_bug_table",noCriteria:!0,limit:{display:!0,name:r.widgets.maxLaunches,min:1,max:150,def:10}},most_failed_test_cases:{gadget_name:r.widgets.failedTestCasesTable,widget_type:"table",gadget:"most_failed_test_cases",img:"filter_results_failure.png",description:r.widgets.failedTestCasesTableDescription,noFilters:!0,launchesFilter:!0,criteriaSelectType:"radio",limit:{display:!0,name:r.widgets.launchesCount,min:2,max:150,def:30},defaultCriteria:["statistics$executions$failed"],criteria:d()},bug_trend:{gadget_name:r.widgets.failedTrendChart,img:"failed-cases-trend-chart.png",description:r.widgets.failedTrendChartDescription,widget_type:"bug_trend",gadget:"bug_trend",noCriteria:!0,staticCriteria:m(),limit:{display:!0,min:1,max:150,def:50}},not_passed:{gadget_name:r.widgets.nonPassedTrendChart,img:"non-passed_test-cases_trend.png",description:r.widgets.nonPassedTrendChartDescription,widget_type:"not_passed_chart",gadget:"not_passed",noCriteria:!0,staticCriteria:{statistics$executions$failed:r.launchesHeaders.failed,statistics$executions$skipped:r.launchesHeaders.skipped,statistics$executions$total:r.launchesHeaders.total},limit:{display:!0,min:1,max:150,def:50}},launches_comparison_chart:{gadget_name:r.widgets.comparisonChart,img:"launches_duration.png",description:r.widgets.comparisonChartDescription,widget_type:"column_chart",gadget:"launches_comparison_chart",noCriteria:!0,staticCriteria:h(),limit:{display:!1,min:2,max:2,def:2}}}}},f=function(){var e=_.map(p(),function(e,t){return{id:t,keys:[t],name:e}}),t=g("no_defect");return e.concat(t,b())},l=function(){return _.merge(p(),y())},c=function(){return _.merge(p(),v())},h=function(){return _.merge(p(),m())},p=function(){return{statistics$executions$total:r.launchesHeaders.total,statistics$executions$passed:r.launchesHeaders.passed,statistics$executions$failed:r.launchesHeaders.failed,statistics$executions$skipped:r.launchesHeaders.skipped}},d=function(){var e={statistics$executions$failed:r.launchesHeaders.failed,statistics$executions$skipped:r.launchesHeaders.skipped},t=m();return delete t.statistics$defects$to_investigate$total,_.merge(e,t)},v=function(){return{statistics$defects$product_bug:r.launchesHeaders.product_bug,statistics$defects$automation_bug:r.launchesHeaders.automation_bug,statistics$defects$system_issue:r.launchesHeaders.system_issue,statistics$defects$no_defect:r.launchesHeaders.no_defect,statistics$defects$to_investigate:r.launchesHeaders.to_investigate}},m=function(){return{statistics$defects$product_bug$total:r.launchesHeaders.product_bug,statistics$defects$automation_bug$total:r.launchesHeaders.automation_bug,statistics$defects$system_issue$total:r.launchesHeaders.system_issue,statistics$defects$no_defect$total:r.launchesHeaders.no_defect,statistics$defects$to_investigate$total:r.launchesHeaders.to_investigate}},g=function(e){var t={};return _.each(y(),function(n,r){var i=r.split("$"),s=i[2],o=i[3],a=u.patterns.defectsLocator;s!==e&&(t[s]?t[s].keys.push(r):t[s]={name:"",id:s,keys:[r]},a.test(o)&&(t[s].name=n))}),_.values(t)},y=function(){var e=new s,t="statistics$defects$",n={},r=e.toJSON(),o=i.getIssueTypes();return _.each(o,function(e){n[e]={}}),_.each(r,function(e){var r=e.typeRef.toLowerCase(),i=t+r+"$"+e.locator;n[r][i]=e.longName}),_.reduce(_.values(n),function(e,t){return _.extend(e,t)},{})},b=function(){return[{id:"tags",keys:["tags"],name:r.forms.tags},{id:"user",keys:["user"],name:r.forms.user},{id:"start_time",keys:["start_time"],name:r.forms.startTime},{id:"end_time",keys:["end_time"],name:r.forms.finishTime},{id:"description",keys:["description"],name:r.forms.description}]},w=null,E=function(){return w||(w=a()),w},S=function(){w=null};return{getInstance:E,updateInstance:function(){var e=$.Deferred(),t=new s;return t.ready.done(function(){S(),e.resolve(E())}),e.promise()},clear:S}}),define("launchEditor",["require","exports","module","jquery","backbone","util","core/components","coreService","app"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("core/components"),u=e("coreService"),a=e("app"),f=a.getInstance(),l=o.DialogShell.extend({initialize:function(e){e.size="lg",o.DialogShell.prototype.initialize.call(this,e),this.editorType=e.editorType||"updateLaunch",this.eventBus=e.eventBus,e.item.tags||(e.item.tags=[]),this.item=e.item,this.item.max=e.descriptionMax,this.result={description:"",tags:[]}},contentHeader:"tpl-launch-editor-header",contentBody:"tpl-item-editor-body",render:function(){return o.DialogShell.prototype.render.call(this),this.$content.html(s.templates(this.contentHeader,this.item)),this.$content.append(s.templates(this.contentBody,{item:this.item,type:this.editorType})),this.$description=r("#editDescription",this.$el),this.item.max&&h(this.$description,this.item.max),this.$tags=r("#editTags",this.$el),p(this.$tags),this.delegateEvents(),this},events:function(){return _.extend({},o.DialogShell.prototype.events,{"change #editTags":"validate","keyup #editDescription":"validate","paste #editDescription":"validate","shown.bs.modal":"focusSetup"})},focusSetup:function(){this.$description.focus()},validate:function(){this.result.description=this.$description.val().trim();var e=this.$tags.val().trim();e?this.result.tags=e.split(","):this.result.tags=[];var t=this.item.max?this.result.description.length<=this.item.max:!0,n=(this.result.description!==this.item.description||e!==this.item.tags.join(","))&&t,r=n?"remove":"add";this.$actionBtn[r+"Class"]("disabled")},submit:function(){var e=this;u[this.editorType](this.result,this.item.id).done(function(){f.commentAnchor=e.item.id,e.eventBus.trigger("navigation::reload::table",{}),s.ajaxSuccessMessenger(e.editorType)}).fail(function(e){s.ajaxFailMessenger(e)}).always(function(){e.$el.modal("hide")})},destroy:function(){this.$tags.select2("destroy"),this.eventBus=null,this.item=null,o.DialogShell.prototype.destroy.call(this)}}),c=l.extend({contentHeader:"tpl-item-editor-header",initialize:function(e){e.headerTxt="itemEditor",e.editorType="updateTestItem",l.prototype.initialize.call(this,e)}}),h=function(e,t,n){s.attachCounter(e,{selector:".vsize"}),s.bootValidator(e,[{validator:"minMaxNotRequired",type:"launchDescription",min:n||0,max:t}])},p=function(e,t){t=t||{};var n=e.data("warning"),i=[],o=null;s.setupSelect2WhithScroll(e,{formatInputTooShort:function(e,t){return n},tags:!0,multiple:!0,noResizeSearch:t.noResizeSearch?t.noResizeSearch:!1,dropdownCssClass:t.dropdownCssClass||"",minimumInputLength:t.min||1,formatResultCssClass:function(e){if((i.length==0||_.indexOf(i,e.text)<0)&&r(".select2-input.select2-active").val()==e.text)return"exact-match"},initSelection:function(e,t){var n=e.val().split(","),r=_.map(n,function(e){return e=e.trim(),{id:e,text:e}});t(r)},createSearchChoice:function(e,n){return!t.noCreateNew&&_.filter(n,function(t){return t.text.localeCompare(e)===0}).length===0?{id:e,text:e}:null},query:function(e){if(e.term==="?")return;var n={results:[]};t.startSearch&&e.term.length<t.startSearch?(i=[],n.results.push({id:e.term,text:e.term}),e.callback(n)):(clearTimeout(o),o=setTimeout(function(){u.searchTags(e,t.type,t.mode).done(function(t){var r=_.isObject(t)&&t.content?"user":"default",t=r=="default"?t:t.content,i=[];_.forEach(t,function(e){r=="user"?(n.results.push({id:e.userId,text:e.full_name}),e=e.full_name):n.results.push({id:e,text:e}),i.push(e)}),e.callback(n)}).fail(function(e){s.ajaxFailMessenger(e)})},f.userFilterDelay))}}),e.on("remove",function(){n=null,e=null,t=null,o&&(clearTimeout(o),o=null)})},d=o.DialogShell.extend({initialize:function(e){e.headerTxt="mergeLaunches",e.actionTxt="merge",o.DialogShell.prototype.initialize.call(this,e),this.owner=e.owner,this.eventBus=e.eventBus,this.launches=e.launches,this.descriptionMax=e.descriptionMax,this.callback=e.callback,this.ids=[],this.walkThroughLaunches()},walkThroughLaunches:function(){this.renderObject={description:[],endTime:0,startTime:Number.POSITIVE_INFINITY,tags:[],descriptionMax:this.descriptionMax,dateFormat:s.dateFormat,owner:this.owner,name:this.launches[0].get("name")},_.forEach(this.launches,function(e){this.renderObject.tags.push(e.get("tags"));var t=e.get("start_time"),n=e.get("end_time"),r=e.get("description");t<this.renderObject.startTime&&(this.renderObject.startTime=t,this.lastLaunch=e.get("id")),n>this.renderObject.endTime&&(this.renderObject.endTime=n),this.ids.push(e.get("id")),r&&this.renderObject.description.push(r.trim())},this),this.renderObject.description=this.renderObject.description.join(f.commentsSeparator),this.commonTags=_.intersection.apply(this,this.renderObject.tags),this.renderObject.tags=_.union.apply(this,this.renderObject.tags)},contentBody:"tpl-launches-merge-form",render:function(){o.DialogShell.prototype.render.call(this),this.$content.html(s.templates(this.contentBody,this.renderObject)),this.$name=r("#mergeName",this.$el),s.bootValidator(this.$name,[{validator:"minMaxRequired",type:"mergeName",min:3,max:256}]),this.$description=r("#mergeDescription",this.$el),this.descriptionMax&&h(this.$description,this.descriptionMax),this.$description.trigger("validate"),this.$tags=r("#mergeTags",this.$el),p(this.$tags);var e=this;return this.$tags.on("change",function(){e.highlightCommonTags()}),this.highlightCommonTags(),this.$actionBtn.removeClass("disabled"),this.$extendWithOriginal=r("#extendWithOriginal",this.$el),this.validate(),this.delegateEvents(),this},highlightCommonTags:function(){var e=r(".select2-search-choice > div",this.$content),t=this.commonTags||[];_.forEach(e,function(e){var n=r(e),i=n.text();_.contains(t,i)&&n.closest(".select2-search-choice").addClass("common-tag")},this)},events:function(){return _.extend({},o.DialogShell.prototype.events,{"validation::change #mergeName":"validate","validation::change #mergeDescription":"validate"})},validate:function(){var e=r(".has-error",this.$el).length?!1:!0,t=e?"remove":"add";this.$actionBtn[t+"Class"]("disabled")},submit:function(){if(!r(".has-error",this.$el).length){var e={tags:this.$tags.val().trim().split(","),mode:this.eventBus.isDebug()?"DEBUG":"DEFAULT",start_time:(new Date).valueOf(),name:this.$name.val(),description:this.$description.val(),launches:this.ids,extendSuitesDescription:this.$extendWithOriginal.is(":checked")},t=this;this.$loader.show(),u.mergeLaunches(e).done(function(e){t.callback(e,t.lastLaunch),s.ajaxSuccessMessenger("mergeLaunches")}).fail(function(e){s.ajaxFailMessenger(e,"mergeLaunches")}).always(function(){t.$el.modal("hide")})}},destroy:function(){this.eventBus=null,this.launches=null,this.callback=null,o.DialogShell.prototype.destroy.call(this)}});return{LaunchEditor:l,ItemEditor:c,MergeEditor:d,setupSelect2Tags:p}}),function(e,t){if(typeof define=="function"&&define.amd)define("daterangepicker",["moment","jquery","exports"],function(n,r,i){e.daterangepicker=t(e,i,n,r)});else if(typeof exports!="undefined"){var n=require("moment"),r;try{r=require("jquery")}catch(i){r=window.jQuery;if(!r)throw new Error("jQuery dependency not found")}t(e,exports,n,r)}else e.daterangepicker=t(e,{},e.moment,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,t,n,r){var i=function(e,t,n){this.parentEl="body",this.element=r(e),this.isShowing=!1,this.oldDynamicUpdate=!1,this.dynamicUpdate=!1;var i='<div class="daterangepicker dropdown-menu"><div class="ranges"><div class="range_inputs"><div class="daterangepicker_start_input"><label for="daterangepicker_start"></label><input class="input-mini" type="text" name="daterangepicker_start" value="" /></div><div class="daterangepicker_end_input"><label for="daterangepicker_end"></label><input class="input-mini" type="text" name="daterangepicker_end" value="" /></div></div></div><div class="calendar-overflow"><div class="calendar right"></div><div class="calendar left"></div><div class="dynamic_update"><label><input class="rp-input-checkbox" type="checkbox"/><span>Dynamic update</span></label><p>Your time range will be updated every day</p></div><div class="pull-right block-buttons"><button class="rp-btn rp-btn-cancel" data-js-cancel></button><button class="rp-btn rp-btn-submit" data-js-submit disabled="disabled"></button></div></div></div>';if(typeof t!="object"||t===null)t={};this.parentEl=typeof t=="object"&&t.parentEl&&r(t.parentEl).length?r(t.parentEl):r(this.parentEl),this.container=r(i).appendTo(this.parentEl),this.setOptions(t,n);var s=this.container;r.each(this.buttonClasses,function(e,t){s.find("button").addClass(t)}),this.container.find(".daterangepicker_start_input label").html(this.locale.fromLabel),this.container.find(".daterangepicker_end_input label").html(this.locale.toLabel),this.container.find("[data-js-submit]").html(this.locale.applyLabel),this.container.find("[data-js-cancel]").html(this.locale.cancelLabel),this.container.find(".calendar").on("click.daterangepicker",".prev",r.proxy(this.clickPrev,this)).on("click.daterangepicker",".next",r.proxy(this.clickNext,this)).on("click.daterangepicker","td.available",r.proxy(this.clickDate,this)).on("mouseenter.daterangepicker","td.available",r.proxy(this.hoverDate,this)).on("mouseleave.daterangepicker","td.available",r.proxy(this.updateFormInputs,this)).on("change.daterangepicker","select.yearselect",r.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.monthselect",r.proxy(this.updateMonthYear,this)).on("change.daterangepicker","select.hourselect,select.minuteselect,select.ampmselect",r.proxy(this.updateTime,this)),this.container.find(".dynamic_update input").change(r.proxy(this.changeDynamicRange,this)),this.container.on("click.daterangepicker","[data-js-submit]",r.proxy(this.clickApply,this)).on("click.daterangepicker","[data-js-cancel]",r.proxy(this.clickCancel,this)),this.container.find(".ranges").on("click.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",r.proxy(this.showCalendars,this)).on("change.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",r.proxy(this.inputsChanged,this)).on("keydown.daterangepicker",".daterangepicker_start_input,.daterangepicker_end_input",r.proxy(this.inputsKeydown,this)).on("click.daterangepicker","li",r.proxy(this.clickRange,this)).on("mouseenter.daterangepicker","li",r.proxy(this.enterRange,this)).on("mouseleave.daterangepicker","li",r.proxy(this.updateFormInputs,this)),this.element.is("input")?this.element.on({"click.daterangepicker":r.proxy(this.show,this),"focus.daterangepicker":r.proxy(this.show,this),"keyup.daterangepicker":r.proxy(this.updateFromControl,this)}):this.element.on("click.daterangepicker",r.proxy(this.toggle,this)),t.dynamicUpdate&&this.setDynamicRange(!0)};i.prototype={constructor:i,setOptions:function(e,t){this.startDate=n().startOf("day"),this.endDate=n().endOf("day"),this.minDate=!1,this.maxDate=!1,this.dateLimit=!1,this.showDropdowns=!1,this.showWeekNumbers=!1,this.timePicker=!1,this.timePickerIncrement=30,this.timePicker12Hour=!0,this.singleDatePicker=!1,this.ranges={},this.opens="right",this.element.hasClass("pull-right")&&(this.opens="left"),this.buttonClasses=["btn","btn-small btn-sm"],this.applyClass="btn-success",this.cancelClass="btn-default",this.format="MM/DD/YYYY",this.separator=" - ",this.locale={applyLabel:"Apply",cancelLabel:"Cancel",fromLabel:"From",toLabel:"To",weekLabel:"W",customRangeLabel:"Custom Range",daysOfWeek:n.weekdaysMin(),monthNames:n.monthsShort(),firstDay:n.localeData()._week.dow},this.cb=function(){},typeof e.format=="string"&&(this.format=e.format),typeof e.separator=="string"&&(this.separator=e.separator),typeof e.startDate=="string"&&(this.startDate=n(e.startDate,this.format)),typeof e.endDate=="string"&&(this.endDate=n(e.endDate,this.format)),typeof e.minDate=="string"&&(this.minDate=n(e.minDate,this.format)),typeof e.maxDate=="string"&&(this.maxDate=n(e.maxDate,this.format)),typeof e.startDate=="object"&&(this.startDate=n(e.startDate)),typeof e.endDate=="object"&&(this.endDate=n(e.endDate)),typeof e.minDate=="object"&&(this.minDate=n(e.minDate)),typeof e.maxDate=="object"&&(this.maxDate=n(e.maxDate)),typeof e.applyClass=="string"&&(this.applyClass=e.applyClass),typeof e.cancelClass=="string"&&(this.cancelClass=e.cancelClass),typeof e.dateLimit=="object"&&(this.dateLimit=e.dateLimit),typeof e.locale=="object"&&(typeof e.locale.daysOfWeek=="object"&&(this.locale.daysOfWeek=e.locale.daysOfWeek.slice()),typeof e.locale.monthNames=="object"&&(this.locale.monthNames=e.locale.monthNames.slice()),typeof e.locale.firstDay=="number"&&(this.locale.firstDay=e.locale.firstDay),typeof e.locale.applyLabel=="string"&&(this.locale.applyLabel=e.locale.applyLabel),typeof e.locale.cancelLabel=="string"&&(this.locale.cancelLabel=e.locale.cancelLabel),typeof e.locale.fromLabel=="string"&&(this.locale.fromLabel=e.locale.fromLabel),typeof e.locale.toLabel=="string"&&(this.locale.toLabel=e.locale.toLabel),typeof e.locale.weekLabel=="string"&&(this.locale.weekLabel=e.locale.weekLabel),typeof e.locale.customRangeLabel=="string"&&(this.locale.customRangeLabel=e.locale.customRangeLabel)),typeof e.opens=="string"&&(this.opens=e.opens),typeof e.showWeekNumbers=="boolean"&&(this.showWeekNumbers=e.showWeekNumbers),typeof e.buttonClasses=="string"&&(this.buttonClasses=[e.buttonClasses]),typeof e.buttonClasses=="object"&&(this.buttonClasses=e.buttonClasses),typeof e.showDropdowns=="boolean"&&(this.showDropdowns=e.showDropdowns),typeof e.singleDatePicker=="boolean"&&(this.singleDatePicker=e.singleDatePicker,this.singleDatePicker&&(this.endDate=this.startDate.clone())),typeof e.timePicker=="boolean"&&(this.timePicker=e.timePicker),typeof e.timePickerIncrement=="number"&&(this.timePickerIncrement=e.timePickerIncrement),typeof e.timePicker12Hour=="boolean"&&(this.timePicker12Hour=e.timePicker12Hour);if(this.locale.firstDay!=0){var i=this.locale.firstDay;while(i>0)this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift()),i--}var s,o,u;if(typeof e.startDate=="undefined"&&typeof e.endDate=="undefined"&&r(this.element).is("input[type=text]")){var a=r(this.element).val(),f=a.split(this.separator);s=o=null,f.length==2?(s=n(f[0],this.format),o=n(f[1],this.format)):this.singleDatePicker&&(s=n(a,this.format),o=n(a,this.format)),s!==null&&o!==null&&(this.startDate=s,this.endDate=o)}if(typeof e.ranges=="object"){for(u in e.ranges){s=n(e.ranges[u][0]),o=n(e.ranges[u][1]),this.minDate&&s.isBefore(this.minDate)&&(s=n(this.minDate)),this.maxDate&&o.isAfter(this.maxDate)&&(o=n(this.maxDate));if(this.minDate&&o.isBefore(this.minDate)||this.maxDate&&s.isAfter(this.maxDate))continue;this.ranges[u]=[s,o]}var l="<ul>";for(u in this.ranges)l+="<li>"+u+"</li>";l+="<li>"+this.locale.customRangeLabel+"</li>",l+="</ul>",this.container.find(".ranges ul").remove(),this.container.find(".ranges").prepend(l)}typeof t=="function"&&(this.cb=t),this.timePicker||(this.startDate=this.startDate.startOf("day"),this.endDate=this.endDate.endOf("day")),this.singleDatePicker?(this.opens="right",this.container.addClass("single"),this.container.find(".calendar.right").show(),this.container.find(".calendar.left").hide(),this.timePicker?this.container.find(".ranges .daterangepicker_start_input, .ranges .daterangepicker_end_input").hide():this.container.find(".ranges").hide(),this.container.find(".calendar.right").hasClass("single")||this.container.find(".calendar.right").addClass("single")):(this.container.removeClass("single"),this.container.find(".calendar.right").removeClass("single"),this.container.find(".ranges").show()),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.oldChosenLabel=this.chosenLabel,this.leftCalendar={month:n([this.startDate.year(),this.startDate.month(),1,this.startDate.hour(),this.startDate.minute()]),calendar:[]},this.rightCalendar={month:n([this.endDate.year(),this.endDate.month(),1,this.endDate.hour(),this.endDate.minute()]),calendar:[]};if(this.opens=="right"){var c=this.container.find(".calendar.left"),h=this.container.find(".calendar.right");h.hasClass("single")&&(h.removeClass("single"),c.addClass("single")),c.removeClass("left").addClass("right"),h.removeClass("right").addClass("left"),this.singleDatePicker&&(c.show(),h.hide())}typeof e.ranges=="undefined"&&!this.singleDatePicker&&this.container.addClass("show-calendar"),this.container.addClass("opens"+this.opens),this.updateView(),this.updateCalendars()},setStartDate:function(e){typeof e=="string"&&(this.startDate=n(e,this.format)),typeof e=="object"&&(this.startDate=n(e)),this.timePicker||(this.startDate=this.startDate.startOf("day")),this.oldStartDate=this.startDate.clone(),this.updateView(),this.updateCalendars(),this.updateInputText()},setEndDate:function(e){typeof e=="string"&&(this.endDate=n(e,this.format)),typeof e=="object"&&(this.endDate=n(e)),this.timePicker||(this.endDate=this.endDate.endOf("day")),this.oldEndDate=this.endDate.clone(),this.updateView(),this.updateCalendars(),this.updateInputText()},updateView:function(){this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateFormInputs()},updateFormInputs:function(){this.container.find("input[name=daterangepicker_start]").val(this.startDate.format(this.format)),this.container.find("input[name=daterangepicker_end]").val(this.endDate.format(this.format)),this.startDate.isSame(this.endDate)||this.startDate.isBefore(this.endDate)?this.container.find("button[data-js-submit]").removeAttr("disabled"):this.container.find("button[data-js-submit]").attr("disabled","disabled")},updateFromControl:function(){if(!this.element.is("input"))return;if(!this.element.val().length)return;var e=this.element.val().split(this.separator),t=null,r=null;e.length===2&&(t=n(e[0],this.format),r=n(e[1],this.format));if(this.singleDatePicker||t===null||r===null)t=n(this.element.val(),this.format),r=t;if(r.isBefore(t))return;this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.startDate=t,this.endDate=r,(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate))&&this.notify(),this.updateCalendars()},notify:function(){this.updateView(),this.cb(this.startDate,this.endDate,this.chosenLabel)},move:function(){var e={top:0,left:0},t=r(window).width();this.parentEl.is("body")||(e={top:this.parentEl.offset().top-this.parentEl.scrollTop(),left:this.parentEl.offset().left-this.parentEl.scrollLeft()},t=this.parentEl[0].clientWidth+this.parentEl.offset().left);if(this.opens=="left")this.container.css({top:this.element.offset().top+this.element.outerHeight()-e.top,right:t-this.element.offset().left-this.element.outerWidth(),left:"auto"}),this.container.offset().left<0&&this.container.css({right:"auto",left:9});else{this.container.css({top:this.element.offset().top+this.element.outerHeight()-e.top,left:this.element.offset().left-e.left,right:"auto"}),this.container.offset().left+this.container.outerWidth()>r(window).width()&&this.container.css({left:"auto",right:0});var n=178;this.container.hasClass("show-calendar")&&(n=620),this.container.outerWidth()<n&&r(window).width()-t>=n-this.container.outerWidth()&&this.container.css({right:this.parentEl.outerWidth()-n})}},toggle:function(e){this.element.hasClass("active")?this.hide():this.show()},show:function(e){if(this.isShowing)return;this.element.addClass("active"),this.container.show(),this._outsideClickProxy=r.proxy(function(e){this.outsideClick(e)},this),r(document).on("mousedown.daterangepicker",this._outsideClickProxy).on("click.daterangepicker","[data-toggle=dropdown]",this._outsideClickProxy).on("focusin.daterangepicker",this._outsideClickProxy),this.isShowing=!0,this.checkDynamicUpdate(),this.element.trigger("show.daterangepicker",this),this.move()},outsideClick:function(e){var t=r(e.target);if(t.closest(this.element).length||t.closest(this.container).length||t.closest(".calendar-date").length)return;this.hide()},hide:function(e){if(!this.isShowing)return;r(document).off("mousedown.daterangepicker").off("click.daterangepicker","[data-toggle=dropdown]").off("focusin.daterangepicker"),this.element.removeClass("active"),this.container.hide(),(!this.startDate.isSame(this.oldStartDate)||!this.endDate.isSame(this.oldEndDate)||this.oldDynamicUpdate!=this.dynamicUpdate)&&this.notify(),this.oldStartDate=this.startDate.clone(),this.oldEndDate=this.endDate.clone(),this.oldDynamicUpdate=this.dynamicUpdate,this.isShowing=!1,this.element.trigger("hide.daterangepicker",this)},enterRange:function(e){var t=e.target.innerHTML;if(t==this.locale.customRangeLabel)this.updateView();else{var n=this.ranges[t];this.container.find("input[name=daterangepicker_start]").val(n[0].format(this.format)),this.container.find("input[name=daterangepicker_end]").val(n[1].format(this.format))}},showCalendars:function(){this.container.addClass("show-calendar"),this.move(),this.element.trigger("showCalendar.daterangepicker",this)},hideCalendars:function(){this.container.removeClass("show-calendar"),this.element.trigger("hideCalendar.daterangepicker",this)},inputsChanged:function(e){var t=r(e.target),i=n(t.val(),this.format);if(!i.isValid())return;var s,o;t.attr("name")==="daterangepicker_start"?(s=i,o=this.endDate):(s=this.startDate,o=i),this.setCustomDates(s,o)},inputsKeydown:function(e){e.keyCode===13&&(this.inputsChanged(e),this.notify())},updateInputText:function(){this.element.is("input")&&!this.singleDatePicker?this.element.val(this.startDate.format(this.format)+this.separator+this.endDate.format(this.format)):this.element.is("input")&&this.element.val(this.endDate.format(this.format))},clickRange:function(e){var t=e.target.innerHTML;this.chosenLabel=t;if(t==this.locale.customRangeLabel)this.container.find(".ranges li").removeClass("active"),this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html(),this.showCalendars();else{var n=this.ranges[t];this.startDate=n[0],this.endDate=n[1],this.timePicker||(this.startDate.startOf("day"),this.endDate.endOf("day")),this.leftCalendar.month.month(this.startDate.month()).year(this.startDate.year()).hour(this.startDate.hour()).minute(this.startDate.minute()),this.rightCalendar.month.month(this.endDate.month()).year(this.endDate.year()).hour(this.endDate.hour()).minute(this.endDate.minute()),this.updateCalendars(),this.updateInputText(),this.hideCalendars(),this.hide(),this.element.trigger("apply.daterangepicker",this)}},clickPrev:function(e){var t=r(e.target).parents(".calendar");t.hasClass("left")?this.leftCalendar.month.subtract(1,"month"):this.rightCalendar.month.subtract(1,"month"),this.updateCalendars()},clickNext:function(e){var t=r(e.target).parents(".calendar");t.hasClass("left")?this.leftCalendar.month.add(1,"month"):this.rightCalendar.month.add(1,"month"),this.updateCalendars()},hoverDate:function(e){var t=r(e.target).attr("data-title"),n=t.substr(1,1),i=t.substr(3,1),s=r(e.target).parents(".calendar");s.hasClass("left")?this.container.find("input[name=daterangepicker_start]").val(this.leftCalendar.calendar[n][i].format(this.format)):this.container.find("input[name=daterangepicker_end]").val(this.rightCalendar.calendar[n][i].format(this.format))},setCustomDates:function(e,t){this.chosenLabel=this.locale.customRangeLabel;if(e.isAfter(t)){var r=this.endDate.diff(this.startDate);t=n(e).add(r,"ms")}this.startDate=e,this.endDate=t,this.updateView(),this.updateCalendars(!0)},clickDate:function(e){var t=r(e.target).attr("data-title"),i=t.substr(1,1),s=t.substr(3,1),o=r(e.target).parents(".calendar"),u,a;if(o.hasClass("left")){u=this.leftCalendar.calendar[i][s],a=this.endDate;if(typeof this.dateLimit=="object"){var f=n(u).add(this.dateLimit).startOf("day");a.isAfter(f)&&(a=f)}}else{u=this.startDate,a=this.rightCalendar.calendar[i][s];if(typeof this.dateLimit=="object"){var l=n(a).subtract(this.dateLimit).startOf("day");u.isBefore(l)&&(u=l)}}this.singleDatePicker&&o.hasClass("left")?a=u.clone():this.singleDatePicker&&o.hasClass("right")&&(u=a.clone()),o.find("td").removeClass("active"),r(e.target).addClass("active"),this.setCustomDates(u,a),this.timePicker||a.endOf("day"),this.singleDatePicker&&!this.timePicker&&this.clickApply()},clickApply:function(e){this.updateInputText(),this.hide(),this.element.trigger("apply.daterangepicker",this)},clickCancel:function(e){this.startDate=this.oldStartDate,this.endDate=this.oldEndDate,this.chosenLabel=this.oldChosenLabel,this.updateView(),this.updateCalendars(),this.hide(),this.element.trigger("cancel.daterangepicker",this)},updateMonthYear:function(e){var t=r(e.target).closest(".calendar").hasClass("left"),n=t?"left":"right",i=this.container.find(".calendar."+n),s=parseInt(i.find(".monthselect").val(),10),o=i.find(".yearselect").val();this[n+"Calendar"].month.month(s).year(o),this.updateCalendars()},updateTime:function(e){var t=r(e.target).closest(".calendar"),n=t.hasClass("left"),i=parseInt(t.find(".hourselect").val(),10),s=parseInt(t.find(".minuteselect").val(),10);if(this.timePicker12Hour){var o=t.find(".ampmselect").val();o==="PM"&&i<12&&(i+=12),o==="AM"&&i===12&&(i=0)}if(n){var u=this.startDate.clone();u.hour(i),u.minute(s),this.startDate=u,this.leftCalendar.month.hour(i).minute(s)}else{var a=this.endDate.clone();a.hour(i),a.minute(s),this.endDate=a,this.rightCalendar.month.hour(i).minute(s)}this.updateFormInputs(),this.updateCalendars()},updateCalendars:function(e){this.leftCalendar.calendar=this.buildCalendar(this.leftCalendar.month.month(),this.leftCalendar.month.year(),this.leftCalendar.month.hour(),this.leftCalendar.month.minute(),"left"),this.rightCalendar.calendar=this.buildCalendar(this.rightCalendar.month.month(),this.rightCalendar.month.year(),this.rightCalendar.month.hour(),this.rightCalendar.month.minute(),"right"),this.container.find(".calendar.left").empty().html(this.renderCalendar(this.leftCalendar.calendar,this.startDate,this.minDate,this.maxDate,this.locale.fromLabel)),this.container.find(".calendar.right").empty().html(this.renderCalendar(this.rightCalendar.calendar,this.endDate,this.singleDatePicker?this.minDate:this.startDate,this.maxDate,this.locale.toLabel)),this.container.find(".ranges li").removeClass("active");var t=!0,n=0;for(var r in this.ranges)this.timePicker?this.startDate.isSame(this.ranges[r][0])&&this.endDate.isSame(this.ranges[r][1])&&(t=!1,e||(this.chosenLabel=this.container.find(".ranges li:eq("+n+")").addClass("active").html())):this.startDate.format("YYYY-MM-DD")==this.ranges[r][0].format("YYYY-MM-DD")&&this.endDate.format("YYYY-MM-DD")==this.ranges[r][1].format("YYYY-MM-DD")&&(t=!1,e||(this.chosenLabel=this.container.find(".ranges li:eq("+n+")").addClass("active").html())),n++;if(t||e)this.chosenLabel=this.container.find(".ranges li:last").addClass("active").html(),this.showCalendars()},setDynamicRange:function(e){r(".dynamic_update input",this.container).prop("checked",e),this.dynamicUpdat=e,this.oldDynamicUpdat=e},changeDynamicRange:function(e){var t=r(".dynamic_update input",this.container).is(":checked"),n=r(".dynamic_update",this.container);t?n.addClass("checked"):n.removeClass("checked"),this.dynamicUpdate=t,this.element.trigger("changeDynamicRange",t)},checkDynamicUpdate:function(){this.changeDynamicRange()},buildCalendar:function(e,t,r,i,s){var o=n([t,e]).daysInMonth(),u=n([t,e,1]),a=n([t,e,o]),f=n(u).subtract(1,"month").month(),l=n(u).subtract(1,"month").year(),c=n([l,f]).daysInMonth(),h=u.day(),p,d=[];d.firstDay=u,d.lastDay=a;for(p=0;p<6;p++)d[p]=[];var v=c-h+this.locale.firstDay+1;v>c&&(v-=7),h==this.locale.firstDay&&(v=c-6);var m=n([l,f,v,12,i]),g,y;for(p=0,g=0,y=0;p<42;p++,g++,m=n(m).add(24,"hour"))p>0&&g%7===0&&(g=0,y++),d[y][g]=m.clone().hour(r),m.hour(12);return d},renderDropdowns:function(e,t,n){var r=e.month(),i='<select class="monthselect">',s=!1,o=!1;for(var u=0;u<12;u++)(!s||u>=t.month())&&(!o||u<=n.month())&&(i+="<option value='"+u+"'"+(u===r?" selected='selected'":"")+">"+this.locale.monthNames[u]+"</option>");i+="</select>";var a=e.year(),f=n&&n.year()||a+5,l=t&&t.year()||a-50,c='<select class="yearselect">';for(var h=l;h<=f;h++)c+='<option value="'+h+'"'+(h===a?' selected="selected"':"")+">"+h+"</option>";return c+="</select>",i+c},renderCalendar:function(e,t,n,i,s){var o='<div class="calendar-date">';o+='<table class="table-condensed">',o+="<thead>",o+="<tr>",this.showWeekNumbers&&(o+="<th></th>"),!n||n.isBefore(e.firstDay)?o+='<th class="prev available"><i class="material-icons">keyboard_arrow_left</i></th>':o+="<th></th>";var u=this.locale.monthNames[e[1][1].month()]+e[1][1].format(" YYYY");this.showDropdowns&&(u=this.renderDropdowns(e[1][1],n,i)),o+='<th colspan="5" class="month">'+u+"</th>",!i||i.isAfter(e.lastDay)?o+='<th class="next available"><i class="material-icons">keyboard_arrow_right</i></th>':o+="<th></th>",o+="</tr>",o+="<tr>",this.showWeekNumbers&&(o+='<th class="week">'+this.locale.weekLabel+"</th>"),r.each(this.locale.daysOfWeek,function(e,t){o+="<th>"+t+"</th>"}),o+="</tr>",o+="</thead>",o+="<tbody>";for(var a=0;a<6;a++){o+="<tr>",this.showWeekNumbers&&(o+='<td class="week">'+e[a][0].week()+"</td>");for(var f=0;f<7;f++){var l="available ";l+=e[a][f].month()==e[1][1].month()?"":"off",n&&e[a][f].isBefore(n,"day")||i&&e[a][f].isAfter(i,"day")?l=" off disabled ":e[a][f].format("YYYY-MM-DD")==t.format("YYYY-MM-DD")?(l+=" active ",e[a][f].format("YYYY-MM-DD")==this.startDate.format("YYYY-MM-DD")&&(l+=" start-date "),e[a][f].format("YYYY-MM-DD")==this.endDate.format("YYYY-MM-DD")&&(l+=" end-date ")):e[a][f]>=this.startDate&&e[a][f]<=this.endDate&&(l+=" in-range ",e[a][f].isSame(this.startDate)&&(l+=" start-date "),e[a][f].isSame(this.endDate)&&(l+=" end-date "));var c="r"+a+"c"+f;o+='<td class="'+l.replace(/\s+/g," ").replace(/^\s?(.*?)\s?$/,"$1")+'" data-title="'+c+'">'+e[a][f].date()+"</td>"}o+="</tr>"}o+="</tbody>",o+="</table>",o+="</div>";var h;if(this.timePicker){o+='<div class="calendar-time"><label>'+s+"</label>"+'<div class="rp-select"><select class="hourselect">';var p=0,d=23,v=t.hour();this.timePicker12Hour&&(p=1,d=12,v>=12&&(v-=12),v===0&&(v=12));for(h=p;h<=d;h++)h==v?o+='<option value="'+h+'" selected="selected">'+h+"</option>":o+='<option value="'+h+'">'+h+"</option>";o+='</select><div class="icon material-icons">keyboard_arrow_down</div></div> : ',o+='<div class="rp-select"><select class="minuteselect">';for(h=0;h<60;h+=this.timePickerIncrement){var m=h;m<10&&(m="0"+m),h==t.minute()?o+='<option value="'+h+'" selected="selected">'+m+"</option>":o+='<option value="'+h+'">'+m+"</option>"}o+='</select> <div class="icon material-icons">keyboard_arrow_down</div></div>',this.timePicker12Hour&&(o+='<div class="rp-select"><select class="ampmselect">',t.hour()>=12?o+='<option value="AM">AM</option><option value="PM" selected="selected">PM</option>':o+='<option value="AM" selected="selected">AM</option><option value="PM">PM</option>',o+='</select><div class="icon material-icons">keyboard_arrow_down</div></div>'),o+="</div>"}return o},remove:function(){this.container.remove(),this.element.off(".daterangepicker"),this.element.removeData("daterangepicker")}},r.fn.daterangepicker=function(e,t){return this.each(function(){var n=r(this);n.data("daterangepicker")&&n.data("daterangepicker").remove(),n.data("daterangepicker",new i(n,e,t))}),this}}),define("filter/filters",["require","exports","module","jquery","backbone","core/components","util","dataUrlResolver","localization","moment","launchEditor","app","daterangepicker"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("core/components"),o=e("util"),u=e("dataUrlResolver"),a=e("localization"),f=e("moment"),l=e("launchEditor"),c=e("app");e("daterangepicker");var h=c.getInstance(),p=i.Model.extend({defaults:{name:"",id:"",values:[],value:"",required:!1,visible:!1,options:[],condition:"",noConditions:!1},asParameter:function(){if(_.isEmpty(this.get("value")))return null;var e=this.get("noConditions")?this.get("id"):["filter",this.get("condition"),this.get("id")].join(".");return{id:e,value:this.get("value")}}}),d=s.BaseView.extend({initialize:function(e){this.navigationInfo=e.navigationInfo,this.$el=e.element,this.triggerEvent=e.triggerEvent,this.data=new p({id:e.id,values:e.values,condition:e.condition,value:""})},tpl:"tpl-filters-multi-button",render:function(){var e=this.navigationInfo.getCurrentFilterValue(this.data.id);return e&&this.data.set("value",e),this.$el.html(o.templates(this.tpl,this.data.toJSON())),this},events:{"click .my_button":"updateState"},getParams:function(){return this.data.asParameter()},updateState:function(e){var t=r(e.currentTarget);t.toggleClass("active");var n=[];_.each(r(".active",this.$el),function(e){n.push(r(e).data("id"))}),this.data.set("value",n.join(",")),this.navigationInfo.trigger(this.triggerEvent)},clearButtons:function(){r("button",this.$el).removeClass("active"),this.data.set("value","")}}),v=d.extend({initialize:function(e){this.navigationInfo=e.navigationInfo,this.$el=e.element,this.triggerEvent=e.triggerEvent,this.data=new p({id:e.id,name:e.name,condition:e.condition})},tpl:"tpl-filters-button",events:{"click .my_button":"updateState"},updateState:function(e){var t=r(e.currentTarget);t.toggleClass("active"),t.hasClass("active")?this.data.set("value","true"):this.data.set("value",null),this.navigationInfo.trigger(this.triggerEvent)}}),m=i.View.extend({initialize:function(e){this.panel=e.panel,this.noFocus=e.noFocus||"focus",this.minValueSize=e.minValueSize||3,this.maxValueSize=this.model.get("id")==="name"?256:e.maxValueSize||55,this.hintMinMessage="At least "+this.minValueSize+" symbols required.",this.hintMaxMessage="No more then "+this.maxValueSize+" symbols allowed.",this.$hint=null},tpl:"tpl-filters-view",render:function(e){this.$el.empty(),this.model.set("value",this.model.get("value")),this.$el.append(o.templates(this.tpl,this.getRenderObject())),this.input=r(".form-control:first",this.$el)},getRenderObject:function(){return{id:this.model.get("id"),value:this.model.get("value").replace(/'/g,"&apos;").replace(/"/g,"&quot;"),required:this.model.get("required"),visible:this.model.get("visible"),gridType:this.model.get("gridType"),options:this.model.get("options"),condition:this.model.get("condition"),hintMessage:this.hintMinMessage}},events:{'input input[type="text"]':"onUserTypes",'change input[type="text"]':"onValueChange","click .remove-filter":"onUserDeletes",'focus input[type="text"]':"showHint",'blur input[type="text"]':"hideHint","click .clear-text":"clearValue","click .option-menu > li > a":"changeOptions"},onUserDeletes:function(){this.trigger("filterRemove",this.model.get("id"))},conditionFlipper:function(e){e.preventDefault();var t=r(e.currentTarget);t.closest(".input-group").find(".select-value:first").text(t.data("short")),t.closest("ul").find(".active").removeClass("active"),t.parent().addClass("active"),this.model.set("condition",t.data("value"))},changeOptions:function(e){this.conditionFlipper(e),this.model.get("value")?this.onUserTypes(e):this.clearErrors()},showHint:function(e,t){var n=r(e.target),i=n.val().trim();if(t==="user types"&&!i)return;!this.$hint&&this.setupHint(n);if(i.length<this.minValueSize||i.length>this.maxValueSize){var s=i.length>this.maxValueSize?this.hintMaxMessage:this.hintMinMessage;this.$hint.text(s).show()}else this.hideHint()},setupHint:function(e){var t=e.position();this.$hint=r("div.filter-hint",this.$el).css({left:t.left+"px",top:t.top+e.outerHeight()+22+"px"})},hideHint:function(){this.$hint&&this.$hint.hide()},getValue:function(){this.$el.find("div.input-group").removeClass("has-error");var e=this.$el.find('input[type="text"]').val().trim();return e},onUserTypes:function(e){var t=this.getValue(),n=_.size(t);r("div.filter-hint",this.$el).length&&this.showHint(e,"user types"),n>0&&(n<this.minValueSize||n>this.maxValueSize)?(e.stopPropagation(),this.$el.find("div.input-group").addClass("has-error")):(this.model.set("value",t),this.trigger("filterApply"))},onValueChange:function(e){var t=this.getValue(),n=_.size(t);n>0&&(n<this.minValueSize||n>this.maxValueSize)?(e.stopPropagation(),this.$el.find("div.input-group").addClass("has-error")):(this.model.set("value",t),this.trigger("filterApply",!0))},getFilter:function(){var e=this.model.asParameter();return _.isEmpty(e)||_.isEmpty(e.value)?null:e},clearValue:function(){this.input.val()&&(this.input.val(""),this.model.set("value",""),this.clearErrors(),this.trigger("filterApply",!0))},clearErrors:function(){this.input.removeClass("has-error"),this.$el.find("div.input-group").removeClass("has-error"),this.hideHint()},destroy:function(){s.RemovableView.prototype.destroy.call(this)}}),g=p.extend({viewCreator:function(e){return new y(e)}}),y=m.extend({initialize:function(e){m.prototype.initialize.call(this,e),this.maxValueSize=e.maxValueSize||h.forms.tagsMax,this.startSearch=h.forms.filterUser},tpl:"tpl-filters-user",events:{"change #tagFilter":"onValueChange","click .remove-filter":"onUserDeletes"},render:function(e){m.prototype.render.call(this,e),this.$tags=r("#tagFilter",this.$el),this.setupTagsSearch()},getRenderObject:function(){var e=m.prototype.getRenderObject.call(this);return e.startSearch=this.startSearch,e},setupTagsSearch:function(){l.setupSelect2Tags(this.$tags,{type:"userAutoCompleteUrl",mode:this.model.get("mode"),noResizeSearch:!0,startSearch:this.startSearch})},onInput:function(){},onValueChange:function(){this.model.set("value",this.$tags.val()),this.trigger("filterApply",!0)},onUserTypes:function(e){},getValue:function(){}}),b=p.extend({viewCreator:function(e){return new w(e)},needLaunchId:!0}),w=y.extend({initialize:function(e){y.prototype.initialize.call(this,e),this.minValueSize=1,this.minTypeaheadSize=1},events:function(){return _.extend({},y.prototype.events,{"click .option-menu > li > a":"changeOptions"})},changeOptions:function(e){this.conditionFlipper(e);if(!this.$tags.val())return;this.onValueChange()},setupTagsSearch:function(){var e={startSearch:1,noResizeSearch:!0};this.model.get("launchId")&&(e.type="tagsLaunchAutoCompleteUrl",e.mode=this.model.get("launchId")),l.setupSelect2Tags(this.$tags,e)},onInput:function(){}}),E=p.extend({viewCreator:function(e){return new S(e)}}),S=m.extend({tpl:"tpl-filters-invalid",getRenderObject:function(){var e=this.model.get("id").split("$"),t=e[e.length-1];return{id:this.model.get("id"),value:this.model.get("value").replace(/'/g,"&apos;").replace(/"/g,"&quot;"),required:this.model.get("required"),visible:this.model.get("visible"),options:this.model.get("options"),condition:this.model.get("condition"),hintMessage:this.hintMinMessage,name:t}}}),x=p.extend({methodTypes:[{value:"AFTER_CLASS",name:"After Class"},{value:"BEFORE_CLASS",name:"Before Class"},{value:"BEFORE_METHOD",name:"Before Method"},{value:"AFTER_METHOD",name:"After Method"},{value:"AFTER_GROUPS",name:"After Groups"},{value:"BEFORE_GROUPS",name:"Before Groups"},{value:"BEFORE_SUITE",name:"Before Suite"},{value:"AFTER_SUITE",name:"After Suite"},{value:"AFTER_TEST",name:"After Test"},{value:"BEFORE_TEST",name:"Before Test"},{value:"TEST",name:"Test Class"},{value:"STEP",name:"Test"}],getMethodType:function(e){return _.find(this.methodTypes,function(t){return t.name===e||t.value===e})},isIssueType:function(){return this.get("id")==="issue$issue_type"},getAllIssueTypes:function(){var e=[],t=_.map(this.get("values"),function(e){return e.value}).join(",");return t.replace("All,","")},viewCreator:function(e){return this.isIssueType()?new N(e):new T(e)},asParameter:function(){if(this.get("value")===this.get("values")[0])return null;var e=this.get("value").split(","),t="";_.each(e,function(e){var n=this.getMethodType(e);n&&(t+=n.value+",")},this),t=t.replace(/^,|,$/g,""),_.size(t)>0&&this.set("value",t);var n=["filter",this.get("condition"),this.get("id")].join("."),r=this.get("value").replaceAll(" ","_");return this.isIssueType()||(r=r.toUpperCase()),{id:n,value:r}}}),T=m.extend({initialize:function(e){m.prototype.initialize.call(this,e),this.model.get("value")||this.model.set("value",this.model.get("values")[0]);if(this.model&&this.model.get("values")){var t="";_.each(this.model.get("value").split(","),function(e){var n=this.model.getMethodType(e)||this.model.getMethodType(e.toUpperCase()),r=n?n.name:_.find(this.model.get("values"),function(t){return t.toUpperCase().replaceAll("_"," ")===e.toUpperCase().replaceAll("_"," ")});r&&(t+=r+",")},this),this.model.set("value",t.replace(/^,|,$/g,""))}},tpl:"tpl-filters-status",render:function(){this.$el.empty(),this.$el.append(o.templates(this.tpl,{id:this.model.get("id"),value:this.model.get("value").replaceAll(",",", "),values:this.model.get("values")}))},events:{"click .remove-filter":"onUserDeletes",'click input[type="checkbox"]':"onCheckbox","click a.checkbox":"onLabelClick"},onLabelClick:function(e){var t=r(e.currentTarget).closest("li"),n=r.trim(t.text());if(n===this.model.get("values")[0]){var i=_.filter(r("input[type=checkbox]",this.$el),function(e){return e}),s=_.every(i,function(e){return r(e).is(":checked")});this.$el.find("input:checkbox").prop("checked",!s),this.saveValueAndPullTheTrigger(n),e.stopPropagation()}},onCheckbox:function(e){var t=this.$el.find("li input:checked"),n="";_.each(t,function(e){n+=r(e).data("value")+","}),n=n.replace(/^,|,$/g,""),_.size(n)==0&&(n=this.model.get("values")[0]),this.saveValueAndPullTheTrigger(n),e.stopPropagation()},saveValueAndPullTheTrigger:function(e){var t=_.filter(r("input[type=checkbox]",this.$el),function(e){return e}),n=_.every(t,function(e){return r(e).is(":checked")});n&&(e=this.model.get("values")[0],this.model.isIssueType()&&(e=this.model.getAllIssueTypes())),this.model.set("value",e),this.$el.find("span.select-value").text(e.replaceAll(",",", ")),this.trigger("filterApply")}}),N=T.extend({initialize:function(e){m.prototype.initialize.call(this,e),_.extend(this.events,T.prototype.events);if(!this.model.get("value")||this.model.get("value")=="All"){var t=_.map(this.model.get("values"),function(e){return e.value});t.shift(),this.model.set("value",t.join(","))}},tpl:"tpl-filters-status-defect",render:function(){this.$el.empty(),this.$el.append(o.templates(this.tpl,{id:this.model.get("id"),values:this.model.get("values")}));var e=this.model.get("value");_.each(r("input[type=checkbox]",this.$el),function(t){var n=r(t).data("value");if(!~e.indexOf(n))return;r(t).prop("checked",!0).trigger("change",{silent:!0})}),this.syncInputToModel()},events:{"click a":"onClickLink","change input[data-subtype]":"onChangeMainType",'change input[type="checkbox"]':"onChangeCheckbox"},onChangeMainType:function(e){var t=r(e.currentTarget).is(":checked"),n=r(e.currentTarget).data("subtype"),i=r('input[data-maintype="'+n+'"]',this.$el);i.prop("checked",t).prop("disabled",t)},onClickLink:function(e){e.stopPropagation()},onLabelClick:function(e){var t=r(e.currentTarget).closest("li"),n=r.trim(t.text());if(n===this.model.get("values")[0].name){var i=!0,s=r("input[type=checkbox]",this.$el);s.each(function(){r(this).is(":checked")||(i=!1)}),s.prop("checked",!i),r("input[data-subtype]",this.$el).trigger("change"),this.saveValueAndPullTheTrigger(n),e.stopPropagation()}},onChangeCheckbox:function(e,t){if(t&&t.silent)return;this.saveValueAndPullTheTrigger(),e.stopPropagation()},onCheckbox:function(e){e.stopPropagation()},saveValueAndPullTheTrigger:function(){this.syncInputToModel(),this.trigger("filterApply")},syncInputToModel:function(){var e=[],t=[];r('input[type="checkbox"]:checked',this.$el).not(":disabled").each(function(){e.push(r(this).data("value")),t.push(r(this).data("name"))}),r('input[type="checkbox"]',this.$el).not(":checked").length||(t=["All"]),this.model.set("value",e.join(",")),this.$el.find("span.select-value").html(t.join(", ").escapeHtml())}}),C=p.extend({viewCreator:function(e){return new k(e)}}),k=m.extend({tpl:"tpl-filters-select",render:function(){this.$el.empty(),this.$el.append(o.templates(this.tpl,{id:this.model.get("id"),required:this.model.get("required"),value:this.model.get("value"),values:this.model.get("values")}))},events:{"click .remove-filter":"onUserDeletes","click a.value-selector":"onLabelClick"},onLabelClick:function(e){var t=r(e.currentTarget),n=r.trim(t.data("value"));this.saveValueAndPullTheTrigger(n)},saveValueAndPullTheTrigger:function(e){this.model.set("value",e),this.$el.find("span.select-value").text(e),this.trigger("filterApply")}}),L=p.extend({viewCreator:function(e){return new A(e)}}),A=m.extend({initialize:function(e){m.prototype.initialize.call(this,e),this.model.set("arg",this.model.get("id").split(".")[1]),this.timer=null},tpl:"tpl-filters-statistic",render:function(){this.$el.empty(),this.$el.append(o.templates(this.tpl,this.model.toJSON())),this.input=r(".form-control:first",this.$el),this.$arg=r(".greater-lesser:first",this.$el),this.inputGroup=r(".input-group",this.$el)},events:{"click .remove-filter":"onUserDeletes","click span.greater-lesser":"onUserChangesDirection","input input.statistics-number":"onUserTypes","change input.statistics-number":"onValueChange","click .clear-text":"clearValue","blur .statistics-number":"hideHintOnBlur","focus .form-control":"validateForHint","click .option-menu > li > a":"changeOptions"},changeOptions:function(e){this.conditionFlipper(e),this.model.get("value")&&this.handleChange()},validateForHint:function(){this.input.val()||this.clearErrors(),this.inputGroup.hasClass("has-error")&&this.$hint&&this.$hint.show()},hideHintOnBlur:function(){this.input.val()?this.hideHint():this.clearErrors()},clearErrors:function(){this.inputGroup.removeClass("has-error"),this.hideHint()},onUserChangesDirection:function(e){this.input.focus(),this.$arg.toggleClass("gt"),this.$arg.toggleClass("lt");var t=this.$arg.hasClass("gt")?"&gt;":"&lt;",n=this.$arg.hasClass("gt")?"gte":"lte";this.$arg.html(t),this.model.set("arg",n),this.input.val()?this.onUserTypes(e):this.clearErrors()},onUserTypes:function(e){var t=this;_.debounce(t.handleChange,200,e)},onValueChange:function(e){this.handleChange(e)},handleChange:function(e){var t=this.input.val();t||this.clearErrors();var n=/^\d+$/.test(t),i=n?"remove":"add";this.inputGroup[i+"Class"]("has-error"),t!==""&&!n?(this.$hint||(this.input.after('<div class="tt-dropdown-menu filter-hint" style="left: 0px; top: 28px; display: none;" />'),this.$hint=r(".filter-hint",this.$el),this.$hint.text(a.validation.filterStaticsDigitsOnly)),this.$hint.show()):(this.hideHint(),t!==t.replace(/\D/g,"")&&this.input.val(t.replace(/\D/g,"")),this.model.set("value",t),this.trigger("filterApply"))}}),O=p.extend({viewCreator:function(e){return new M(e)},asParameter:function(){var e=this.get("value");if(e===this.get("values")[0])return null;if(e==="")return null;var t=["filter",this.get("condition"),this.get("id")].join("."),e=e.replace("TODAY","0;1439").replace("YESTERDAY","-1440;-1").replace("LAST_7_DAYS","-10080;-1").replace("LAST_30_DAYS","-43200;-1");return{id:t,value:e}},asValue:function(){var e=this.get("value");if(e===this.get("values")[0])return null;if(e==="")return null;var t=["filter",this.get("condition"),this.get("id")].join("."),e=e.replace(/^0;1439;.*/,"Today").replace(/^-1440;-1;.*/,"Yesterday").replace(/^-10080;-1;.*/,"Last 7 days").replace(/^-43200;-1;.*/,"Last 30 days");return{id:t,value:e}}}),M=m.extend({initialize:function(){this.model.get("value")||this.model.set("value",this.model.get("values")[0])},tpl:"tpl-filters-timer",render:function(){function u(e,t){function r(e){var t=f().startOf("day").unix(),n=parseInt(e);return(n*60+t)*1e3}n.push(f(r(e)).format(h.dateRangeFullFormat)),n.push(f(r(t)).format(h.dateRangeFullFormat))}var e=this.model.get("value").replace(/^0;1439/,"TODAY").replace("-1440;-1","YESTERDAY").replace("-10080;-1","LAST_7_DAYS").replace("-43200;-1","LAST_30_DAYS"),t=this,n=[];this.dynamicUpdateRange=!1;if(this.model.get("value")!==this.model.get("values")[0]){var i=e.split(","),s=e.split(";");_.size(i)>1?(_.forEach(i,function(e,t){n.push(f(parseInt(e)).format(h.dateRangeFullFormat))}),e=n.join(" - ")):s.length>2?(u(s[0],s[1]),e=n.join(" - "),this.dynamicUpdateRange=!0):_.size(s)>1&&(e=s[0].split("_").join(" ").capitalize())}this.$el.empty(),this.$el.append(o.templates(this.tpl,{id:this.model.get("id"),value:e}));var l=f().subtract(29,"days"),c=f(),p=h.dateRangeFullFormat,d={Today:[f().startOf("day"),f().endOf("day")],Yesterday:[f().subtract(1,"days").startOf("day"),f().subtract(1,"days").endOf("day")],"Last 7 Days":[f().subtract(6,"days").startOf("day"),f().endOf("day")],"Last 30 Days":[f().subtract(29,"days").startOf("day"),f().endOf("day")]};if(e&&e!=="Any"){var v=_.find(_.keys(d),function(t){return t==e});v?(l=d[v][0],c=d[v][1]):(l=n[0].trim(),c=n[1].trim())}r("span.timerange",this.$el).daterangepicker({parentEl:this.$el,startDate:f(l,p),endDate:f(c,p),minDate:"01/01/00",maxDate:"12/31/50",dynamicUpdate:this.dynamicUpdateRange,showDropdowns:!1,showWeekNumbers:!1,timePicker:!0,timePickerIncrement:1,timePicker12Hour:!1,ranges:d,buttonClasses:["rp-btn rp-btn-default"],applyClass:"btn-sm btn-success",cancelClass:"btn-sm rp-btn-danger pull-right ",format:h.dateRangeFormat,separator:" to ",locale:{applyLabel:a.ui.submit,cancelLabel:a.ui.cancel,fromLabel:"From",toLabel:"To",customRangeLabel:"Custom Range",daysOfWeek:a.ui.daysShort,monthNames:a.ui.months,firstDay:1}},function(e,n){if(e.unix()>n.unix())return;var i;for(var s in d)if(f(d[s][0]).isSame(f(e))&&f(d[s][1]).isSame(f(n))){i=s;break}var o=i,u=r(this.element),a=t.dynamicUpdateRange?";":",",l=(new Date).getTimezoneOffset()/60*-1,c=";"+(l>-1?"+"+l:l);if(i)i=i.toUpperCase().replaceAll(" ","_")+c;else if(t.dynamicUpdateRange){var h=f().startOf("day").unix(),a=t.dynamicUpdateRange?";":",";i=parseInt((e.unix()-h)/60)+a+parseInt((n.unix()-h)/60),o=e.format(p)+" - "+n.format(p),i+=c}else i=e.unix()*1e3+","+n.unix()*1e3,o=e.format(p)+" - "+n.format(p);u.html(o+'&nbsp;<span class="rp-caret"></span>'),u.closest("div").find("span.val").html(i),u.trigger("change")}).on("show.daterangepicker",function(e,n){t.model.get("value")=="Any"&&(r("div.ranges li",this.$el).removeClass("active"),r("div.daterangepicker",this.$el).removeClass("show-calendar"))}).on("showCalendar.daterangepicker",function(e,t){}).on("changeDynamicRange",function(e,n){t.dynamicUpdateRange=n})},events:{"click .remove-filter":"onUserDeletes","click button.applyBtn":"onChange","change span.timerange":"onChange"},isRangeAndInvalid:function(e){var t=!1,n=e.split(",");return n.length===2&&(t=+n[0]>+n[1]),t},onChange:function(e){var t=this.$el.find("span.val").text();if(this.isRangeAndInvalid(t))return;this.model.set("value",t),this.trigger("filterApply")},destroy:function(){var e=r("span.timerange",this.$el);e.length&&e.data("daterangepicker")&&e.data("daterangepicker").remove(),m.prototype.destroy.call(this)}});return{Model:p,View:m,UserModel:g,User:y,TagsModel:b,Tags:w,MultiButtonFilter:d,StatusModel:x,Status:T,StatusDefect:N,InvalidModel:E,StatisticModel:L,Statistic:A,SelectModel:C,Select:k,TimerModel:O,Timer:M,ButtonFilter:v}}),define("helpers",["require","exports","module","jquery","underscore","app","util","moment","localization","defectType/SingletonDefectTypeCollection","filter/filters"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("app"),o=e("util"),u=e("moment"),a=e("localization"),f=e("defectType/SingletonDefectTypeCollection"),l=e("filter/filters"),c=s.getInstance(),h=function(e){if(e)return e=e.split("$"),e.length>1?e[e.length-1]:e[0]},p=function(e){var t=new f,n=e.split("$"),r=n.pop(),i=n.shift(),s=n.pop(),o=t.findWhere({locator:r});if(!e)return"";if(a.filterNameById[e]){if(i=="statistics"){var u=t.where({typeRef:s.toUpperCase()});return u.length==1?u[0].get("longName"):a.filterNameById[e]}return a.filterNameById[e]}if(o)return o.get("longName");var l=i+"$"+n[0]+"$"+s;return a.filterNameById[l]?!1:r.capitalizeName()},d=function(e,t){if(!e||!e.length)return;var n=function(e){function s(e,t){var n="",r=c.dateRangeFullFormat,i=u(parseInt(e)),s=u(parseInt(t));return i.isValid()&&s.isValid()&&(n=a.ui.from+" "+i.format(r)+" "+a.ui.to+" "+s.format(r)),n}var t=e,n=t.split(","),r=t.split(";");if(n.length===2)t=s(n[0],n[1]);else if(r.length==3){var i=u().startOf("day").unix()*1e3;t=s(i+parseInt(r[0],10)*6e4,i+parseInt(r[1],10)*6e4)+" (dynamic)"}return t.escapeHtml()};if(e){var r=i.map(e,function(e){e.filtering_field==="start_time"&&(e.value=(new l.TimerModel(e)).asValue().value,~e.value.indexOf(",")||~e.value.indexOf(";")?e.condition="":e.condition="eq");var r=p(e.filtering_field);return r?[r," ",e.is_negative?t.not:"",t[e.condition]||""," ",n(e.value)].join(""):'<span style="color: #ff3222"><b>Invalid</b></span>'},{});return r.join(t.andb)}},v=function(e,t){i.forEach(e,function(e){var n=e.id.replaceAll(".","");if(m(e)){var s=i.map(e.definedValues,function(e){var t=e.valueName.trim();return{id:t,text:t}}),u=r("#"+e.id,t);o.setupSelect2WhithScroll(u,{tags:!1,data:s}),u.on("remove",function(){u.select2("destroy"),u=null,s=null,r("body > #select2-drop-mask, body > .select2-sizer").remove()})}else g(e)?r("[data-id="+n+"]").prop("readonly",!0).datepicker({dateFormat:c.dateTimeFormat}).on("remove",function(){r(this).datepicker("destroy")}):y(e)?o.bootValidator(r("[data-id="+n+"]",t),[{validator:"matchRegex",type:"onlyIntegersRegex",pattern:c.patterns.onlyIntegers}]):b(e)?e.definedValues&&e.definedValues.length>c.dynamicDropDownVisible&&(o.setupSelect2WhithScroll(r("[data-id="+n+"]",t),{allowClear:!0}),r("[data-id="+n+"]",t).on("remove",function(){r(this).select2("destroy"),r("body > #select2-drop-mask, body > .select2-sizer").remove()})):w(e)&&o.bootValidator(r("[data-id="+n+"]",t),[{validator:"matchRegex",type:"doublesRegex",pattern:c.patterns.doubles}])})},m=function(e){return e.fieldType==="array"&&e.definedValues&&e.definedValues.length},g=function(e){return e.fieldType==="date"||e.fieldType.toLowerCase()==="datetime"},y=function(e){return e.fieldType==="Integer"||e.fieldType==="number"},b=function(e){return e.definedValues&&e.definedValues.length&&e.fieldType!=="array"},w=function(e){return e.fieldType==="Double"};return{getLastKey:h,getFilterOptions:d,applyTypeForBtsFields:v}}),define("modals/_modalView",["require","exports","module","backbone-epoxy","util","jquery"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("jquery"),o=r.View.extend({templateWrapper:"_tpl-modal",show:function(){var e=this;this.closeAsync=s.Deferred(),s(".rp-modal-dialog, .modal-backdrop").remove(),this.$modalWrapper=s(i.templates(this.templateWrapper,{})),this.className&&(this.$modalWrapper.addClass(this.className),this.$el.removeClass(this.className).addClass("modal-content-wrapper")),s("body").append(this.$modalWrapper),s("[data-js-modal-content]",this.$modalWrapper).html(this.$el),i.setupBaronScroll(s("[data-js-scroll-container]",this.$modalWrapper)),s(".baron_scroller",this.$modalWrapper).attr("data-js-cancel",!0);var e=this;return this.$modalWrapper.on("shown.bs.modal",function(){e.onShown&&e.onShown()}).modal("show").click(function(t){var n=s(t.target);n.is("[data-js-cancel]")&&e.hide()}).keydown(function(t){t.keyCode===27&&e.hide()}),this.attachKeyActions(),e.onShow&&e.onShow(),this.closeAsync},attachKeyActions:function(){s(window).on("keydown.modal",function(e){(e.ctrlKey&&e.keyCode===13||e.metaKey&&e.keyCode===13)&&this.onKeySuccess()}.bind(this))},hide:function(){this.$modalWrapper&&this.$modalWrapper.modal("hide"),this.closeAsync&&this.closeAsync.reject(),this.destroy()},onKeySuccess:function(){this.successClose()},showLoading:function(){this.$modalWrapper&&(this.$modalWrapper.addClass("load"),this.$modalWrapper.width(),this.$modalWrapper.addClass("animate"))},hideLoading:function(){this.$modalWrapper&&this.$modalWrapper.removeClass("load animate")},successClose:function(e){this.$modalWrapper&&this.$modalWrapper.modal("hide"),this.closeAsync&&this.closeAsync.resolve(e),this.destroy()},destroy:function(){this.onDestroy&&this.onDestroy(),s(window).off("keydown.modal"),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return o}),define("modals/modalFilterEdit",["require","exports","module","modals/_modalView","backbone-epoxy","util","coreService"],function(e,t,n){"use strict";var r=e("modals/_modalView"),i=e("backbone-epoxy"),s=e("util"),o=e("coreService"),u=r.extend({template:"tpl-modal-filter-edit",className:"modal-filter-edit",bindings:{"[data-js-name-input]":"value: updateName","[data-js-is-shared]":"checked: isShared","[data-js-description]":"value: description"},events:{"click [data-js-ok]":"onClickOk"},computeds:{updateName:{deps:["name"],get:function(e){return e.trim()},set:function(e){this.model.set("name",e.trim())}}},initialize:function(e){var t=[],n=this,r=e.filterModel;this.model=new i.Model({name:r.get("name"),isShared:r.get("isShared"),description:r.get("description")}),this.render(e),o.getFilterNames().done(function(e){_.each(e,function(e){e.name!==n.model.get("name")&&t.push(e.name)})}).always(function(){n.addValidators(t)})},addValidators:function(e){s.hintValidator($("[data-js-name-input]",this.$el),[{validator:"minMaxRequired",type:"filterName",min:3,max:128},{validator:"noDuplications",type:"filterName",source:e,isCaseSensitive:!0}]),s.hintValidator($("[data-js-description]",this.$el),{validator:"maxRequired",type:"filterDescription",max:256})},render:function(e){this.$el.html(s.templates(this.template,e))},onKeySuccess:function(){$("[data-js-ok]",this.$el).focus().trigger("click")},validate:function(){return!$("[data-js-description]",this.$el).trigger("validate").data("validate-error")&&!$("[data-js-name-input]",this.$el).trigger("validate").data("validate-error")},onClickOk:function(){if(!this.validate())return;this.successClose(this.model)}});return u}),define("filters/FilterModel",["require","exports","module","backbone-epoxy","callService","dataUrlResolver","model/SingletonAppModel","helpers","localization","util","core/components","modals/modalFilterEdit","app","dataUrlResolver"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("callService"),s=e("dataUrlResolver"),o=e("model/SingletonAppModel"),u=e("helpers"),a=e("localization"),f=e("util"),l=e("core/components"),c=e("modals/modalFilterEdit"),h=e("app"),p=e("dataUrlResolver"),d=h.getInstance(),v=i.call,m=new o,g=r.Model.extend({defaults:{name:"",description:"",entities:"",selection_parameters:'{"is_asc": false, "sorting_column": "start_time"}',owner:"",isShared:"",id:"",type:"launch",newEntities:"",newSelectionParameters:"",curPage:1,isLaunch:!1,active:!1,url:"",temp:!1},computeds:{optionsString:{deps:["entities","selection_parameters"],get:function(e,t){var n=this.getParametersObj(),r="("+u.getFilterOptions(this.getEntitiesObj(),a.comparators)+")",i=n&&u.getLastKey(n.sorting_column);return i&&(r+=a.favorites.sortedBy+" "+a.launchesHeaders[i]),r}},notMyFilter:{deps:["owner"],get:function(e){return e!=d.userModel.get("name")}},sharedByTitle:{deps:["owner"],get:function(e){return a.filters.sharedBy+" "+e}},isAskSorting:{deps:["selection_parameters","newSelectionParameters"],get:function(){var e=this.getParametersObj();return e.is_asc}},sortingColumn:{deps:["selection_parameters","newSelectionParameters"],get:function(){var e=this.getParametersObj();return e.sorting_column}},isLaunchString:{deps:["isLaunch"],get:function(e){return e?a.ui.on:a.ui.off}}},initialize:function(e){this.context=e.context,this.listenTo(this,"change:name change:isShared change:description change:entities change:selection_parameters",this.onChangeFilterInfo),this.listenTo(this,"change:id",this.computedsUrl),this.listenTo(m,"change:projectId",this.computedsUrl.bind(this)),this.listenTo(this,"change:temp",this.onChangeTemp),this.computedsUrl()},getEntitiesObj:function(){try{return this.get("newEntities")?JSON.parse(this.get("newEntities")):JSON.parse(this.get("entities"))}catch(e){return[]}},getParametersObj:function(){try{if(this.get("newSelectionParameters")){var e=JSON.parse(this.get("newSelectionParameters"));return e}var e=JSON.parse(this.get("selection_parameters"));return e}catch(t){return{}}},getOptions:function(){var e=[];_.each(this.getEntitiesObj(),function(t){t.value&&e.push("filter."+t.condition+"."+t.filtering_field+"="+encodeURIComponent(t.value))});var t=this.getParametersObj(),n="ASC";return t.is_asc||(n="DESC"),e.push("page.sort="+t.sorting_column+"%2C"+n),e},computedsUrl:function(){var e=this.context=="userdebug"?"/userdebug/":"/launches/";this.set({url:"#"+m.get("projectId")+e+this.get("id")})},onChangeFilterInfo:function(){this.get("temp")||v("PUT",s.filterById(this.get("id")),this.getDataFromServer()).done(function(){f.ajaxSuccessMessenger("editFilter")}).fail(function(e){f.ajaxFailMessenger(e,"editFilter")})},getDataFromServer:function(){var e=this.getEntitiesObj();return e.length||e.push({condition:"cnt",filtering_field:"name",value:""}),{name:this.get("name"),description:this.get("description")||null,entities:e,share:this.get("isShared"),selection_parameters:this.getParametersObj(),type:this.get("type")}},editMainInfo:function(){var e=this;this.showPopupMyInfo(function(t){e.set({name:t.get("name"),isShared:t.get("isShared"),description:t.get("description")})},"update")},onChangeTemp:function(e,t){if(t||this.collection)return;var n=e.getDataFromServer();n.type="launch";var r=this;v("POST",p.saveFilter(),{elements:[n]}).done(function(e){f.ajaxSuccessMessenger("savedFilter"),r.set({id:e[0].id})}).fail(function(e){f.ajaxFailMessenger(e,"savedFilter")})},saveFilter:function(){var e=this;this.get("temp")?this.showPopupMyInfo(function(t){e.set({name:t.get("name"),isShared:t.get("isShared"),description:t.get("description"),entities:e.get("newEntities")||e.get("entities"),newEntities:"",selection_parameters:e.get("newSelectionParameters")||e.get("selection_parameters"),newSelectionParameters:""}),e.set({temp:!1})},"save"):this.set({entities:this.get("newEntities")||this.get("entities"),newEntities:"",selection_parameters:this.get("newSelectionParameters")||this.get("selection_parameters"),newSelectionParameters:""})},showPopupMyInfo:function(e,t){var n=new c({mode:t,filterModel:this});n.show().done(function(t){e(t)})},load:function(){var e=this;return v("GET",p.getFilters([this.get("id")])).done(function(t){var n=t[0];n.entities=JSON.stringify(n.entities),n.selection_parameters=JSON.stringify(n.selection_parameters),e.set(n)})},remove:function(){var e=this;return v("DELETE",s.filterById(this.get("id"))).done(function(){f.ajaxSuccessMessenger("deleteFilter"),e.collection&&e.collection.remove(e)}).fail(function(e){f.ajaxFailMessenger(e,"editFilter")})}});return g}),define("filters/LaunchFilterCollection",["require","exports","module","backbone","filters/FilterModel","callService","dataUrlResolver","jquery","underscore","app","util"],function(e,t,n){"use strict";var r=e("backbone"),i=e("filters/FilterModel"),s=e("callService"),o=e("dataUrlResolver"),u=e("jquery"),a=e("underscore"),f=e("app"),l=e("util"),c=f.getInstance(),h=s.call,p=r.Collection.extend({model:i,initialize:function(){this.listenTo(this,"add",this.onAddFilter),this.listenTo(this,"remove",this.onRemoveFilter),this.listenTo(this,"change:temp",this.onChangeTemp),this.ready=u.Deferred()},onAddFilter:function(e){e.get("temp")||h("PUT",o.getPreferences(),{filters:this.getFiltersId()}).done(function(e){l.ajaxSuccessMessenger("savedLaunchFilter")}).fail(function(e){l.ajaxFailMessenger(e,"savedLaunchFilter")})},onRemoveFilter:function(e){!e.get("temp")&&e.get("owner")&&h("PUT",o.getPreferences(),{filters:this.getFiltersId()})},getFiltersId:function(){return a.map(this.models,function(e){if(e.id&&!e.get("temp"))return e.id})},onChangeTemp:function(e,t){var n=this;t||this.saveFilter(e,function(t){e.set({id:t[0].id}),n.onAddFilter(e)})},saveFilter:function(e,t){var n=e.getDataFromServer();n.type="launch",h("POST",o.saveFilter(),{elements:[n]}).done(function(e){t(e)})},onChangeLaunchFilter:function(e){},parse:function(e){var t=this;if(!e){this.reset([]),this.ready.resolve();return}h("GET",o.getFilters(e)).done(function(e){t.reset(a.map(e,function(e){return e.isLaunch=!0,e.type="launch",e.entities=JSON.stringify(e.entities),e.selection_parameters=JSON.stringify(e.selection_parameters),e}))}).always(function(){t.ready.resolve()})},generateTempModel:function(e){var e=e||{},t="New_filter",n=t,r=1;while(this.findWhere({name:n}))n=t+r,r++;return e.id=n,e.name=n,e.temp=!0,e.owner=c.userModel.get("name"),this.add(e)},activateFilter:function(e){var t=u.Deferred(),n=this;return this.ready.done(function(){a.each(n.models,function(e){e.set({active:!1})});var r=n.findWhere({id:e});r?(r.set({active:!0}),t.resolve(r)):t.reject(),n.trigger("change:activeFilter",r)}),t.promise()}});return p}),define("filters/SingletonLaunchFilterCollection",["require","exports","module","filters/LaunchFilterCollection"],function(e,t,n){"use strict";var r=e("filters/LaunchFilterCollection"),i,s=function(){return i||(i=new r),i};return s}),define("modals/modalConfirm",["require","exports","module","modals/_modalView","util","jquery"],function(e,t,n){"use strict";var r=e("modals/_modalView"),i=e("util"),s=e("jquery"),o=r.extend({template:"tpl-modal-confirm",className:"modal-confirm",events:{"change [data-js-select]":"onChangeCheckbox","click [data-js-ok]":"onClickSuccess"},initialize:function(e){this.render(e),this.confirmFunction=e.confirmFunction},render:function(e){this.$el.html(i.templates(this.template,e))},onChangeCheckbox:function(e){s(e.currentTarget).is(":checked")?s("[data-js-ok]",this.$el).removeClass("disabled"):s("[data-js-ok]",this.$el).addClass("disabled")},onKeySuccess:function(){var e=s("[data-js-ok]",this.$el);e.hasClass("disabled")||e.trigger("click")},onClickSuccess:function(){var e=this;if(!this.confirmFunction){e.successClose();return}this.showLoading(),this.confirmFunction().done(function(){e.closeAsync&&e.closeAsync.resolve()}).fail(function(t){e.closeAsync&&e.closeAsync.resolve(t)}).always(function(){e.hide()})}});return o}),!function(e){e.elasticColumns=function(t,n){this.defaults={columns:3,innerMargin:10,outerMargin:10},this.settings={},this.$element=e(t),this.columns=[],this.init=function(){this.settings=e.extend({},this.defaults,n),this.buildLayout()},this.buildLayout=function(){for(var t=this.$element.children(":not(.elastic-columns-ignore)"),n=this.$element.width(),r=(n-this.settings.innerMargin*(this.settings.columns-1)-2*this.settings.outerMargin)/this.settings.columns,i=0;i<this.settings.columns;i+=1)this.columns[i]=this.settings.outerMargin;for(var s=0;s<t.length;s+=1){for(var o=e(t.get(s)),u=0,f=0;f<this.settings.columns;f+=1)this.columns[f]<this.columns[u]&&(u=f);var l=parseInt(o.css("padding-left"))+parseInt(o.css("padding-right")),c=parseInt(o.css("padding-top"))+parseInt(o.css("padding-bottom"));o.css("position","absolute"),o.css("width",r-l+"px"),o.css("left",this.settings.outerMargin+this.settings.innerMargin*u+u*r+"px"),o.css("top",this.columns[u]+"px"),this.columns[u]+=o.outerHeight()+this.settings.innerMargin+c}for(var h=0,f=0;f<this.settings.columns;f+=1)this.columns[f]>this.columns[h]&&(h=f);this.$element.outerHeight(this.columns[h]+"px")},this.destroyLayout=function(){for(var t=this.$element.children(":not(.elastic-columns-ignore)"),n=0;n<t.length;n+=1){var r=e(t.get(n));r.css({position:"",width:"",left:"",top:""})}this.$element.css({height:""})}},e.fn.elasticColumns=function(t,n,r){return this.each(function(){var i=e(this).data("elasticColumns");"undefined"==typeof i?(i=new e.elasticColumns(this,t),e(this).data("elasticColumns",i),i.init()):("refresh"==t&&i.buildLayout(),"set"==t&&(i.settings[n]=r),"destroy"==t&&i.destroyLayout())})}}(jQuery),define("elasticColumns",["jquery"],function(){}),define("widgets",["require","exports","module","jquery","backbone","util","d3","d3Tip","nvd3","dataUrlResolver","app","coreService","filtersService","moment","widget/widgetsConfig","model/SingletonAppModel","core/components","localization","defectType/SingletonDefectTypeCollection","filters/SingletonLaunchFilterCollection","modals/modalConfirm","elasticColumns","select2"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("d3"),u=e("d3Tip"),a=e("nvd3"),f=e("dataUrlResolver"),l=e("app"),c=e("coreService"),h=e("filtersService"),p=e("moment"),d=e("widget/widgetsConfig"),v=e("model/SingletonAppModel"),m=e("core/components"),g=e("localization"),y=e("defectType/SingletonDefectTypeCollection"),b=e("filters/SingletonLaunchFilterCollection"),w=e("modals/modalConfirm");e("elasticColumns"),e("select2");var E=l.getInstance(),S=i.Model.extend({defautls:{name:"",id:""}}),x=m.BaseView.extend({initialize:function(e){this.model=e.model||new S,this.$container=e.container,this.context=e.context,this.navigationInfo=e.navigationInfo,this.height=e.height,this.width=e.width,this.top=e.top,this.left=e.left,this.position=e.position,this.id=e.id,this.url=f.widgetById(this.id),this.isPreview=e.isPreview||!1,this.isStartLoad=!1,this.widgetsConfig=d.getInstance(),this.listenTo(this.navigationInfo,"refresh::widget",this.reloadWidget)},className:"widget-item",getModel:function(){return this.model},getName:function(){return this.model&&this.model.get("name")?this.model.get("name").length>56?this.model.get("name").slice(0,56)+"...":this.model.get("name"):""},getMode:function(){var e=this.getContentParam();return!!(e&&e.widgetOptions&&e.widgetOptions.timeline)},getShared:function(){return this.model.get("isShared")},getOwner:function(){return this.model.get("owner")},getDashboardOwner:function(){return this.navigationInfo.getCurrentDashboard().get("owner")},getId:function(){return this.model&&this.model.get("id")?this.model.get("id"):this.id},getContentParam:function(){return this.model&&this.model.get("content_parameters")?this.model.get("content_parameters"):null},getUrl:function(){return this.url},getWidgetType:function(){var e=this.getContentParam();return e.type},getGadgetType:function(){var e=this.getContentParam();return e&&e.gadget?e.gadget:null},getContentFields:function(){var e=this.getContentParam();return e&&e.content_fields?e.content_fields:null},getContent:function(){return this.model.get("content")},getFilter:function(){return this.model.get("filter_id")},getHeight:function(){return this.height*E.widgetGridCellHeight+E.widgetGridVerticalMargin-r(".panel-heading",this.$el).outerHeight()},canEdit:function(){var e=s.isCustomer()&&this.getGadgetType()==="activity_stream",t=this.getOwner(),n=this.getDashboardOwner(),r=E.userModel.toJSON().name;return!e&&t==r&&n==r},tplPanel:"tpl-widget-content",tpl:"tpl-widget-container",unableLoadTpl:"tpl-widget-unable-load",events:{"click a.remove":"deleteWidget","click a.refresh":"refresh","click a.save":"saveWidget","click a.settings":"editWidget","click .widget-invalid-data":"editWidget"},toggleLoader:function(){var e=r("div.loading-widget",this.$el);e.is(":visible")?e.hide():e.show()},loadWidget:function(e){var t=this;this.isStartLoad=!0,t.toggleLoader(),c.loadWidget(this.getUrl()).done(function(n){e&&_.isFunction(e)?e(n):(t.renderWidget(n),EQCSS.apply()),t.toggleLoader()}).fail(function(e){s.validateForLogOut(e),t.renderNoData(e)})},saveWidget:function(e){e.preventDefault()},refresh:function(e){e&&e.preventDefault();var t=this;this.loadWidget(function(e){t.renderWidget(e);var n=t.getGadgetType();n})},deleteWidget:function(e){e.preventDefault();var t=this,n=this.navigationInfo.getCurrentDashboard(),i=r(".grid-stack:first").data("gridstack"),o=this.getId(),u=new w({headerText:g.dialogHeader.deletedWidget,bodyText:s.replaceTemplate(g.dialog.deletedWidget,this.getName()),cancelButtonText:g.ui.cancel,okButtonDanger:!0,okButtonText:g.ui.delete});u.show().done(function(){if(t.model&&!_.isEmpty(t.model.attributes)){var e=t.model.toJSON(),r=t.getGadgetType();r}n.deleteWidget(o,function(){i.remove_widget(t.$el),t.navigationInfo.trigger("dashboard::widget::deleted",{}),t.destroy(),n.updateWidgets(i.grid.nodes),s.ajaxSuccessMessenger("deletedWidget")})})},editWidget:function(e){e.preventDefault(),this.canEdit()&&this.navigationInfo.trigger("edit::widget",this.getModel().toJSON())},reloadWidget:function(e){if(e===this.id){var t=this;this.loadWidget(f.widgetById(this.id),function(e){t.renderWidget(e)})}},render:function(){var e={"data-gs-width":this.width,"data-gs-height":this.height,"data-gs-y":this.top,"data-gs-x":this.left,"data-gs-min-width":E.minWidgetWidth,"data-gs-min-height":E.minWidgetHeight};return this.position=="bottom"?this.$container.append(this.$el.attr(e).html(s.templates(this.tpl))):this.$container.prepend(this.$el.attr(e).html(s.templates(this.tpl))),this},renderWidget:function(e){r("div.grid-stack-item-content",this.$el).empty(),this.widget&&(this.widget.destroy(),r("div.panel-heading",this.$el).remove()),this.model&&this.model.clear().set(e);var t=this.getGadgetType(),n=Q(t);if(!n||!this.$el){this.renderNoData();return}this.$el.attr("data-widget-type",t);var i={id:this.getId(),name:this.getName(),content:this.getContent(),gadget:this.getGadgetType(),content_fields:this.getContentFields(),filter_id:this.getFilter(),height:this.getHeight(),isTimeline:!!e.content_parameters.widgetOptions&&!!e.content_parameters.widgetOptions.timeline};if(this.getGadgetType()==="most_failed_test_cases"){var s=this.getContentParam(),o=s.widgetOptions,u=o&&!_.isEmpty(o.launchNameFilter)?o.launchNameFilter[0]:"";i.launchName=u}this.widget=(new n({container:r("div.grid-stack-item-content",this.$el),context:this.context,navigationInfo:this.navigationInfo,parent:this,isPreview:this.isPreview,param:i})).render(),this.context&&this.context.widgets&&this.context.widgets.push(this.widget),this.renderHeader()},renderNoData:function(e){this.$el&&this.$container.append(this.$el.html(s.templates(this.unableLoadTpl,{name:this.getName(),owner:this.getOwner(),notFound:e&&e.status==404?!0:!1,unShared:this.getOwner()&&!this.getShared()!==E.userModel.get("name"),isSharedDashboard:this.getDashboardOwner()!==E.userModel.get("name")})))},renderHeader:function(){r("div.grid-stack-item-content",this.$el).append(s.templates(this.tplPanel,{name:this.getName(),shared:this.getShared(),owner:this.getOwner(),height:this.getHeight(),dashOwner:this.getDashboardOwner(),user:E.userModel.toJSON(),canEdit:this.canEdit(),isTimeline:this.getMode(),widgetType:this.widgetsConfig.widgetTypes[this.getGadgetType()].gadget_name}))},destroy:function(){this.getGadgetType()=="activity_stream"&&this.widget.clearAutoRefresh(),this.context=null,this.navigationInfo=null,this.widget&&this.widget.destroy(),m.BaseView.prototype.destroy.call(this)}}),T=i.View.extend({initialize:function(e){this.container=e.container,this.param=e.param,this.context=e.context,this.navigationInfo=e.navigationInfo,this.parent=e.parent,this.id="widget-"+this.param.id,this.isPreview=e.isPreview,this.noScroll=e.noScroll},className:"panel-body",getTitle:function(){var e=this.param.name.length>56?this.param.name.slice(0,56)+"...":this.param.name;return e},getSeriesColor:function(e){var t=new y,n=t.getDefectType(e),r=n?n.color:s.getDefaultColor(e);return r},invalidDataMessage:function(e){return s.templates("tpl-widget-invalid-data",{qty:e,canEdit:this.isPreview||this.parent.canEdit()})},linkToRedirectService:function(e,t){var n=new y,r=new v,i="#"+r.get("projectId"),o=this.param.filter_id,u="",a=function(e){var n=[i,"launches/all"],r="?page.page=1&page.size=50&page.sort=start_time&filter.eq.has_childs=false",s=[[t,r].join("")];return s.push(e),n.push(s.join("&")),n.join("/")},f=function(e){var t=e.split(" "),r=_.map(t,function(e){return e.toLowerCase()}).join("_"),i=n.toJSON();return s.getSubDefectsLocators(r,i)};switch(e){case"Total":case"total":case"Grow test cases":case"grow_test_cases":u="filter.in.type=STEP&filter.in.status=PASSED,FAILED,SKIPPED,INTERRUPTED";break;case"Passed":case"passed":u="filter.in.type=STEP&filter.in.status=PASSED";break;case"Failed":case"failed":u="filter.in.type=STEP&filter.in.status=FAILED";break;case"Skipped":case"skipped":u="filter.in.type=STEP&filter.in.status=SKIPPED";break;case"To Investigate":case"to_investigate":case"toInvestigate":u=["filter.in.issue$issue_type=",f("To Investigate")].join("");break;case"System Issue":case"systemIssue":case"system_issue":u=["filter.in.issue$issue_type=",f("System Issue")].join("");break;case"Product Bug":case"productBug":case"product_bug":u=["filter.in.issue$issue_type=",f("Product Bug")].join("");break;case"No Defect":case"noDefect":case"no_defect":u=["filter.in.issue$issue_type=",f("No Defect")].join("");break;case"Automation Bug":case"Auto Bug":case"automationBug":case"automation_bug":u=["filter.in.issue$issue_type=",f("Automation Bug")].join("");break;case"Investigated":case"investigated":var l=["System Issue","Product Bug","No Defect","Automation Bug"],c=[];_.each(l,function(e){c=c.concat(f(e))}),u=["filter.in.issue$issue_type=",c].join("");break;case"Duration":case"duration":u="";break;default:var h=_.find(n.toJSON(),function(t){return t.locator==e});h?u=["filter.in.issue$issue_type=",h.locator].join(""):u=""}return encodeURI(a(u))},destroy:function(){if(this.context)var e=_.remove(this.context.widgets,function(e){return e.id===this.id},this);this.chart&&_.isFunction(this.chart)&&(r(window).off("resize."+this.id),this.chart=null),r("#d3-tip-"+this.id).remove(),this.undelegateEvents(),this.remove(),delete this}}),N=T.extend({initialize:function(e){T.prototype.initialize.call(this,e),this.defectTypes=new y},tpl:"tpl-widget-filters-table",toolTipContent:"tpl-launches-tooltip-defects",getData:function(){var e=this.param.content||[];if(!_.isEmpty(e)&&!_.isEmpty(e.result)){var t=_.map(e.result,function(e){var t={},n={id:e.id,name:e.name,number:e.number,startTime:e.startTime};return _.forEach(e.values,function(e,n){if(n.indexOf("statistics$issueCounter")>=0){var r=n.split("$"),i=_.initial(r).join("$"),s=_.last(r),o=parseInt(e);t[i]?t[i].total+=o:(t[i]={},t[i].total=o),t[i][s]=o}else t[n]=e}),_.extend(n,t)},this);return t.reverse()}return[]},getCriteria:function(){var e={};return _.each(this.param.content_fields,function(t){var n=t;if(t.indexOf("statistics")>=0&&!e[n]){var r=t.split("$"),i=r[1];n=i=="defects"?r[2]:_.last(r)}e[n]=!0}),e},render:function(){this.items=this.getData();var e={widgetId:this.id,title:this.getTitle(),criteria:this.getCriteria(),items:this.items,project:E.project,getDefectColor:this.getDefectColor,defectTypes:this.defectTypes,linkToRedirectService:this.linkToRedirectService.bind(this),dateFormat:s.dateFormat,moment:p};return this.container.append(this.$el.html(s.templates(this.tpl,e))),s.hoverFullTime(this.$el),this.renderDefects(),!this.noScroll&&s.setupBaronScroll(this.$el),EQCSS.apply(),this},events:{"mouseenter [data-js-launch-defect]":"showDefectTooltip","click [data-js-tag]":"onClickTag","click [data-js-user-tag]":"onClickUserTag"},showDefectTooltip:function(e){var t=r(e.currentTarget),n=t.data("defectType");t.data("tooltip")||(t.data("tooltip","tooltip"),this.createDefectTooltip(t,n))},onClickTag:function(e){e.preventDefault();var t=r(e.currentTarget).data("tag");this.goToLaunchWithFilter("tags",t)},onClickUserTag:function(e){e.preventDefault();var t=r(e.currentTarget).data("tag");this.goToLaunchWithFilter("user",t)},goToLaunchWithFilter:function(e,t){var n=new b,r=n.generateTempModel();E.router.navigate(r.get("url"),{trigger:!0}),r.trigger("add_entity",e,t)},renderDefects:function(){_.each(this.items,function(e){var t=r("#"+e.id,this.container),n=r("[data-js-launch-defect]",t);_.each(n,function(t){var n=r(t),i=n.data("defectType"),s=this.getDefectByType(e,i),o=this.id+"-defect-"+e.id+"-"+i;this.drawPieChart(s,o)},this)},this)},getDefectByType:function(e,t){var n=_.map(t.split("_"),function(e,t){return t?e.capitalize():e}),r="statistics$issueCounter$"+n.join("");return e[r]},createDefectTooltip:function(e,t){var n=e.closest(".row.rp-table-row").attr("id"),r=this.renderDefectsTooltip(n,t);e.append(r)},renderDefectsTooltip:function(e,t){var n=_.find(this.items,function(t){return t.id==e}),r=this.getDefectByType(n,t),i=E.patterns.defectsLocator,o={total:r.total,defects:[],type:t,item:n,noSubDefects:!this.defectTypes.checkForSubDefects(),color:this.getDefectColor(r,t,this.defectTypes),url:this.linkToRedirectService(t,e)};return _.each(r,function(e,t){if(t!=="total")if(e||i.test(t)){var n=this.defectTypes,r=n.getDefectType(t);r&&(r.val=parseInt(e),o.defects.push(r))}},this),o.defects.sort(s.sortSubDefects),s.templates(this.toolTipContent,o)},getDefectColor:function(e,t,n){var r=E.patterns.defectsLocator,i=_.findKey(e,function(e,t){return r.test(t)});if(i){var o=n.getDefectType(i);if(o)return o.color}return s.getDefaultColor(t)},getDefectChartData:function(e){var t=[];return _.each(e,function(e,n){if(n!=="total"){var r=this.defectTypes,i=r.getDefectType(n);i&&t.push({color:i.color,key:i.longName,value:parseInt(e)})}},this),t},drawPieChart:function(e,t){var n,r=48,i=48,s=this.getDefectChartData(e);return n=a.models.pie().x(function(e){return e.key}).y(function(e){return e.value}).width(r).height(i).showLabels(!1).donut(!0).growOnHover(!1).donutRatio(.4).startAngle(function(e){return e.startAngle-Math.PI/2}).endAngle(function(e){return e.endAngle-Math.PI/2}).color(function(e){return e.data.color}).valueFormat(o.format("f")),o.select("#"+t+" svg").datum([s]).call(n),n}}),C=T.extend({tpl:"tpl-widget-most-failed-table",getData:function(e){var t=e.lastLaunch;delete e.lastLaunch;var n=_.map(e,function(e,t){return{name:t,runs:e[0].values["All runs"],failed:e[0].values.Failed,affected:e[0].values["Affected by"],depth:e[0].values["Launch depth"],lastDate:e[0].values["Last Failure"]}});return{items:n,lastLaunch:t?t[0]:{}}},render:function(){var e=this.getData(this.param.content),t={items:e.items,lastLaunch:{id:e.lastLaunch.id,link:this.linkToRedirectService(null,e.lastLaunch.id),name:this.param.widgetOptions&&this.param.widgetOptions.launchNameFilter.length?this.param.widgetOptions.launchNameFilter[0]:""},dateFormat:s.dateFormat,moment:p};return this.container.append(this.$el.html(s.templates(this.tpl,t))),s.hoverFullTime(this.$el),!this.noScroll&&s.setupBaronScroll(this.$el),this}}),k=T.extend({tpl:"tpl-widget-bug-table",tplList:"tpl-widget-bug-table-list",tplItem:"tpl-widget-bug-table-item",ADD_ITEMS_COUNT:80,getData:function(e){var t=[];return _.each(e,function(e,n){var r={bugId:n,items:[]},i=0,s="";_.each(e,function(e){var t=parseInt(e.startTime),n={testItemId:e.id,launchId:e.values.launchRef};r.items.push(n);if(i===0||i>t)i=t,s=e.name}),r.name=s,r.time=i,t.push(r)}),t.sort(function(e,t){return t.time-e.time}),t},render:function(){var e=E.project.configuration;this.params={title:this.getTitle(),items:[],conf:e,imageRoot:f.getAvatar,dateFormat:s.dateFormat,moment:p},this.items=this.getData(this.param.content),this.params.items=this.items,this.container.append(this.$el.html(s.templates(this.tpl,this.params))),this.listContainer=r(".uniq-bugs-list",this.container),this.currentBugIndex=0,this.currentBugItemIndex=0,this.addPackItems();if(!this.noScroll){var t=s.setupBaronScroll(this.$el),n=this;t.scroll(function(){var e=t.get(0);e.scrollHeight-e.scrollTop<e.offsetHeight*2&&n.addPackItems()})}return this},addPackItems:function(){var e=0,t=[];while(e<this.ADD_ITEMS_COUNT){if(this.currentBugItemIndex==0&&!this.addBugList())break;this.currentBugItemIndex<this.currentBug.items.length?(this.lastBugContainer.append(s.templates(this.tplItem,this.currentBug.items[this.currentBugItemIndex])),t.push(this.currentBug.items[this.currentBugItemIndex]),this.currentBugItemIndex++):this.currentBugItemIndex=0,e++}this.getItemsInfo(t)},addBugList:function(){if(this.currentBugIndex>=this.items.length)return!1;this.currentBug=this.items[this.currentBugIndex],this.params.item=this.currentBug;var e=r.parseHTML(s.templates(this.tplList,_.extend(this.params,{methodUpdateImagePath:s.updateImagePath})));return s.hoverFullTime(e),this.listContainer.append(e),this.lastBugContainer=r("[data-js-bugs-item]:last",this.listContainer),this.currentBugIndex++,!0},renderTags:function(e){return _.isEmpty(e)?"":'<span class="text-muted"><i class="material-icons">local_offer</i> '+e.join(", ")+"</span>"},renderItemName:function(e,t,n){var r=this.getItemUrl(t,n);return'<a class="rp-blue-link-undrl" target="_blank" title="'+e+'" href="'+r+'">'+e+"</a><br />"},getItemUrl:function(e,t){return"#"+E.project.projectId+"/launches/all/"+e.join("/")+"?log.item="+t},getItemsInfo:function(e){if(e.length){var t=this,n=_.uniq(_.map(e,function(e){return e.testItemId}));c.getTestItemsInfo(n).done(function(e){_.each(n,function(n){var r=_.find(e,function(e){return e.id==n});r&&t.calculateItemInfo(r,n)})}).fail(function(e){s.ajaxFailMessenger(e,"getItemsWidgetBugTable")})}},calculateItemInfo:function(e,t){var n=[e.launchId].concat(_.keys(e.path_names)),i=e.issue.externalSystemIssues,s=e.tags?this.renderTags(e.tags):"",o=this.renderItemName(e.name,n,t),u=this;r('[data-item-id="'+t+'"]',u.$el).empty().prepend(o,s),_.forEach(i,function(e){var t=r("#bugId-"+e.ticketId,u.$el);e.url&&!t.parent().is("a.rp-blue-link-undrl")&&t.wrap('<a class="rp-blue-link-undrl" target="_blank" href="'+e.url+'"></a>')})}}),L=T.extend({tpl:"tpl-widget-cases-uniq-launches",parseData:function(e){var t="Median value in all unique launches";e[t]&&delete e[t];var n=[],r=_.map(e,function(e,t){var r=e[0].name,i=e[0].values;return n.push(parseInt(i.avg)),_.extend({name:r},i)});return r.sort(function(e,t){return e.name==t.name?0:e.name<t.name?-1:1}),n.sort(function(e,t){return e-t}),{items:r,median:n}},getMedian:function(e){var t=0,n=e.length;return n&&(n%2===0?t=(parseInt(e[n/2-1])+parseInt(e[n/2]))/2:t=parseInt(e[(n+1)/2-1])),t},render:function(){var e=this.parseData(this.param.content),t={median:this.getMedian(e.median),items:e.items};return this.container.empty(),this.container.append(this.$el.html(s.templates(this.tpl,t))),this}}),A=T.extend({tpl:"tpl-widget-statistics-panel",getData:function(){var e=this.param.content||[];if(!_.isEmpty(e)&&!_.isEmpty(e.result)){var t=this.param.content_fields,n=e.result[0].values,r=d.getInstance(),i=this.param.gadget,s=r.widgetTypes[i],o={executions:[],defects:[]};return this.invalid=0,n&&!_.isEmpty(n)&&_.each(t,function(e){var t=e.split("$"),r=t[1],i=_.last(t),u=s.noCriteria?s.staticCriteria[e]:s.criteria[e],a=n[i];u||(u=g.widgets.invalidCriteria,i="invalid",a=0,this.invalid++),o[r].push({key:u,seriesId:i,type:r,color:this.getSeriesColor(i),value:a})},this),o}return[]},render:function(){var e={title:this.param.name,statistics:this.getData(),invalidDataMessage:this.invalidDataMessage(this.invalid),invalid:this.invalid};return this.container.append(this.$el.html(s.templates(this.tpl,e))),!this.noScroll&&s.setupBaronScroll(this.$el),this}}),O=T.extend({initialize:function(e){T.prototype.initialize.call(this,e),this.isAutoRefresh=!1,this.isReverse=_.isUndefined(e.isReverse)?!0:e.isReverse,this.projectId=e.projectId||E.project.projectId},tpl:"tpl-widget-activity-stream",clearAutoRefresh:function(){clearTimeout(this.itemRefresh);var e=this.getCurrentDashboard();e&&(e.refreshItems=_.without(e.refreshItems,this.itemRefresh))},checkForInProgress:function(){this.clearAutoRefresh();var e=this;this.itemRefresh=setTimeout(function(){window.isActive?e.parent.refresh():r(window).one("focus",function(){e.parent.refresh()})},E.itemsAutoRefresh);var t=this.getCurrentDashboard();t.refreshItems?t.refreshItems.push(this.itemRefresh):t.refreshItems=[this.itemRefresh]},getCurrentDashboard:function(){var e=this.navigationInfo.getCurrentDashboard();return e},parseOnOff:function(e){return e=="false"?g.ui.off:e=="true"?g.ui.on:e},getBts:function(e){var t=e.split(":");return{type:t[0],name:t[1]}},getData:function(e){var t=[];return e.result&&_.each(this.isReverse?e.result.reverse():e.result,function(e){if(!(!s.hasValidBtsSystem()&&e.values.objectType=="testItem"&&e.values.actionType.indexOf("issue")>0)){var n=null,r=null,i={id:e.id};e.values.actionType=="update_project"?(i.history={},_.each(e.values,function(e,t){if(t.indexOf("Value")>0)if(t=="emailEnabled$newValue")n="email",r=e=="false"?"off_email":"on_email";else if(t=="emailCases$newValue")n="email",r="update_email";else{var s=t.split("$"),o=s[0],u=s[1],a={};a[u]=e,i.history[o]?_.extend(i.history[o],a):i.history[o]=a}i[t]=e},this)):_.extend(i,e.values),n&&(i.objectType=n,i.actionType=r),this.checkForIssues(i.actionType)&&this.testItems.push(i.loggedObjectRef);var o=new Date(parseFloat(i.last_modified)),u=new Date(o.getFullYear(),o.getMonth(),o.getDate()),a=""+Date.parse(u);i.fullTime=s.dateFormat(parseFloat(i.last_modified)),i.momentTime=p(i.fullTime).fromNow(),i.userRef=i.userRef?i.userRef.split("_").join(" "):"";var f=_.find(t,function(e){return e.day==a});if(f)f.items.push(i);else{var l=new Date,c=(new Date(l.getFullYear(),l.getMonth(),l.getDate())).valueOf(),h="",d=(new Date(c-864e5)).valueOf(),v=new Date(parseFloat(a)),m=g.ui.months,y=g.ui.days;a==c?h=g.ui.today:a==d?h=g.ui.yesterday:c-a<=6048e5?h=y[v.getDay()]:h=m[v.getMonth()]+" "+v.getDate();var b={day:a,dayTitle:h,items:[i]};t.push(b)}}},this),t},render:function(){this.isAutoRefresh&&this.clearAutoRefresh(),this.testItems=[];var e=this.getData(this.param.content),t=E.project.configuration,n={title:this.param.name,conf:t,properties:{projectUrl:this.projectId},getBts:this.getBts,getTicketUrlId:s.getTicketUrlId,getTickets:this.getTickets,parseOnOff:this.parseOnOff,methodUpdateImagePath:s.updateImagePath,imageRoot:f.getAvatar,dates:e};return this.container.append(this.$el.html(s.templates(this.tpl,n))),s.hoverFullTime(this.$el),!this.noScroll&&s.setupBaronScroll(this.$el),this.getItemsInfo(_.uniq(this.testItems)),this.isAutoRefresh&&this.checkForInProgress(),this},getTickets:function(e){var t=e.ticketId$newValue?e.ticketId$newValue.split(","):[],n=e.ticketId$oldValue?e.ticketId$oldValue.split(","):[];return _.difference(t,n)},getItemsInfo:function(e){var t=this;_.each(e,function(e){c.getTestItemInfo(e).done(function(n){var i=[n.launchId].concat(_.keys(n.path_names));r.each(r('[id="itemId-'+e+'"]'),function(){r(this).html(" "+n.name).wrap('<a class="rp-blue-link-undrl" target="_blank" href="#'+t.projectId+"/launches/all/"+i.join("/")+"?log.item="+e+'"></a>')})}).fail(function(n){r("#itemId-"+e,t.$el).html(g.widgets.testItemNotFound)})})},checkForIssues:function(e){return e==="post_issue"||e==="attach_issue"},destroy:function(){var e=this.$el.parent(".baron_scroller").parent(".baron__root");this.isAutoRefresh&&this.clearAutoRefresh(),T.prototype.destroy.call(this),e.baron().dispose(),e.remove()}}),M=T.extend({className:"panel-body",tplTooltip:"tpl-widget-tooltip",attributes:function(){return{id:this.id}},redirectOnElementClick:function(e){this.chart[e].dispatch.on("elementClick",null);if(!this.isPreview){var t=this;this.chart[e].dispatch.on("elementClick",function(e){r(".fullscreen-close").is(":visible")&&r.fullscreen.exit(),t.param.isTimeline?t.redirectForTimeLine(e):t.redirectToLaunch(e)})}},redirectForTimeLine:function(e){var t=this,n=new v,r=n.get("projectId"),i=864e5,s=this.param.filter_id,o="New_filter",u=["#"+r,"launches",o];c.getFilterData([s]).done(function(t){var n=p.unix(e.point.startTime),r={condition:"btw",filtering_field:"start_time",is_negative:!1,value:n.format("x")+","+(parseInt(n.format("x"))+i)},s=new b,o=s.generateTempModel(),u=t[0].entities||[],a=o.get("url");u.push(r),o.set("entities",JSON.stringify(u)),a+="?"+o.getOptions().join("&"),a&&setTimeout(function(){document.location.hash=a},100)})},redirectToLaunch:function(e){var t=e.series.key,n=_.find(this.series,function(e,n){return e.key==t}),r=n?n.seriesId:"",i=this.categories[e.pointIndex],s=i.id,o=r&&s?this.linkToRedirectService(r,s):"";o&&setTimeout(function(){document.location.hash=o},100)},createTooltip:function(e){return e&&r.fullscreen.isFullScreen()?u().attr({"class":"d3-tip",id:"d3-tip-"+this.id}).style("display","none").offset([10,150]).html(function(t){return e}):u().attr({"class":"d3-tip",id:"d3-tip-"+this.id}).style("display","none").offset([-10,0]).html(function(t){return e})},tooltipLabel:g.widgets.casesLabel,tooltipContent:function(){var e=this;return function(t,n,r,i,s){if(e.param.isTimeline){var o=i.pointIndex,u=e.categories[o],a=p.unix(u.startTime);return'<p style="text-align:left"><strong>'+a.format("YYYY-MM-DD")+"</strong><br/>"+t+": <strong>"+r+"</strong> "+e.tooltipLabel+"</p>"}var o=i.pointIndex,u=e.categories[o],a=e.formatDateTime(u.startTime);return'<p style="text-align:left"><strong>'+u.name+" "+u.number+"</strong><br/>"+a+"<br/>"+t+": <strong>"+r+"</strong> "+e.tooltipLabel+"</p>"}},getTitle:function(){if(this.param.name)return{text:this.param.name.length>56?this.param.name.slice(0,56).escapeHtml()+"...":this.param.name.escapeHtml(),useHTML:!0}},addSVG:function(){this.container.append(this.$el.css("overflow","visible").attr(this.attributes()).append('<svg style="height: 100%;"></svg>'))},formatNumber:function(e){if(e%1===0){if(!this.param.isTimeline){var t=this.categories[e-1];return t&&t.number?t.number:e}var t=this.categories[e-1],n=p.unix(t.startTime);return n.format("ddd")+",<br>"+n.format("YYYY-MM-DD")}return""},formatCategories:function(e){if(!this.param.isTimeline){var t=this.categories[e-1],n=this.formatDateTime(t.startTime);return"<strong>"+t.name+" "+t.number+'</strong><br/><span style="font-weight:normal">'+n+"</span>"}var t=this.categories[e-1],n=p.unix(t.startTime);return"<strong>"+n.format("YYYY-MM-DD")+"</span>"},formatDateTime:function(e){return s.dateFormat(new Date(e))},disabeLegendEvents:function(){if(this.chart.legend)for(var e in this.chart.legend.dispatch)this.chart.legend.dispatch[e]=function(){}},addLaunchNameTip:function(e,t){if(!this.isPreview){var n=this;e.selectAll(".nv-x .tick text, .nv-x .nv-axisMaxMin text").each(function(e){o.select(this).on("mouseover."+n.id,function(e){if(o.select(this).style("opacity")==1){var r=n.categories[e-1]||{};if(!r.name&&!r.number)return;t.style("display","block").html(s.templates(n.tplTooltip,{tooltipName:g.launches.launchName,tooltipContent:r.name+" "+r.number})).show()}}).on("mouseout."+n.id,function(){t.style("display","none").hide()})})}},getSeries:function(e){var t=d.getInstance(),n={},r=this.param.gadget,i=t.widgetTypes[r];return this.invalid=0,_.each(e,function(e){var t=e.split("$"),s=_.last(t),o=s,u=i.noCriteria?i.staticCriteria[e]:i.criteria[e];if(r==="launches_comparison_chart"||r==="last_launch"){var a=s.split("_");a[1]&&(a[1]=a[1].capitalize()),s=o=a.join("")}u||(u=g.widgets.invalidCriteria,o="invalid",this.invalid++),n[s]={key:u,seriesId:o,color:this.getSeriesColor(o),values:[]}},this),r==="launches_comparison_chart"&&delete n.total,this.series=n,this.series},updateInvalidCriteria:function(e){this.invalid&&(e.selectAll(".nv-legend .nv-legend-text").each(function(e,t){e.seriesId=="invalid"&&(o.select(this).attr("fill",e.color),o.select(this.previousSibling).attr("r","2"))}),r("#"+this.id).addClass("widget-invalid").append(this.invalidDataMessage(this.invalid)),this.chart.update())},getChartData:function(){var e=this.param.content||[];this.categories=[];if(!_.isEmpty(e)){var t=this.param.content_fields,n=this.getSeries(t);if(!this.param.isTimeline)_.each(e.result,function(e,t){var r={id:e.id,name:e.name,number:"#"+e.number,startTime:parseInt(e.startTime)};this.categories.push(r),_.each(e.values,function(e,i){var s=_.last(i.split("$")),o=_.extend({x:t+1,y:parseFloat(e)},r);n[s]&&n[s].values.push(o)})},this);else{var r=_.pairs(e);r.sort(function(e,t){return p(e[0],"YYYY-MM-DD").unix()-p(t[0],"YYYY-MM-DD").unix()}),_.each(r,function(e,t){var r=e[1][0].values,i=p(e[0],"YYYY-MM-DD"),s={time:i.format("YYYY-MM-DD"),startTime:i.unix()};this.categories.push(s),_.each(r,function(e,r){var s=_.last(r.split("$")),o={startTime:i.unix(),x:t+1,y:parseFloat(e)};n[s].values.push(o)})},this)}return _.values(n)}return[]},updateChart:function(){var e=this;e.charts&&e.charts.length?_.each(e.charts,function(e){e&&e.update()}):e.chart&&e.chart.update()},addResize:function(){var e=this,t=function(t){r(t.target).is(r(window))&&e.updateChart()},n=_.debounce(t,500);r(window).on("resize."+this.id,n)}}),D=M.extend({redirectOnElementClick:function(){this.chart.stacked.dispatch.on("areaClick",null),this.chart.stacked.dispatch.on("areaClick.toggle",null);if(!this.isPreview){var e=this,t=o.select("#"+this.id+" svg"),n=t.select(".nv-scatterWrap").selectAll("path.nv-point");this.chart.stacked.dispatch.on("areaClick",function(t){e.redirectTo(t)}),n.each(function(){o.select(this).on("click",function(t){e.redirectTo(t)})})}},redirectTo:function(e){var t={series:{}};if(!_.has(e,"pointIndex")){var n=o.select("#"+this.id+" svg"),r=n.data();t.series.key=r&&r[0]&&r[0][e.seriesIndex]?r[0][e.seriesIndex].key:null,t.pointIndex=parseInt(e.index)}else t.series.key=e.series,t.pointIndex=0+parseInt(e.pointIndex);if(this.param.isTimeline){var i=this.categories[t.pointIndex];t.point={startTime:i.startTime},this.redirectForTimeLine(t)}else this.redirectToLaunch(t)},render:function(){this.addSVG();var e=this.getChartData(),t=this;this.chart=a.models.stackedAreaChart().margin({left:70}).x(function(e){return e.x}).y(function(e){return e.y}).useInteractiveGuideline(!t.isPreview).showControls(!1).clipEdge(!0).showLegend(!t.isPreview),this.chart.xAxis.showMaxMin(!1).tickFormat(function(e){return t.formatNumber(e)}),this.chart.yAxis.axisLabelDistance(-10).axisLabel("cases"),this.chart.yAxisTickFormat(o.format("d"));var n=this.createTooltip(),i=o.select("#"+this.id+" svg").datum(e).call(this.chart);if(t.param.isTimeline){var s=this.chart.interactiveLayer.tooltip.contentGenerator(),u=this.chart.interactiveLayer.tooltip;u.contentGenerator(function(e){var t=e.value.split(">")[e.value.split(">").length-2],n=t.split("<")[0];return e.value=p(n).format("YYYY-MM-DD"),s(e)})}else i.call(n);t.param.isTimeline&&i.selectAll(".nv-x .tick text, .nv-x .nv-axisMaxMin text").each(function(e,n){var i=r(this),s=r(".nv-x .tick","#"+t.id+" svg").index(i.parent())==r(".nv-x .tick","#"+t.id+" svg").length-1,u=i.text().split("<br>");i.empty();for(n=0;n<u.length;n++)o.select(this).append("tspan").text(u[n]).attr("dy",n?"1.2em":0).attr("x",s?-10:0).attr("y",20).attr("text-anchor","middle").attr("class","tspan"+n)}),this.addLaunchNameTip(i,n),this.chart.xAxis.tickFormat(function(e){return t.formatCategories(e)});var f=t.chart.update,l=function(){t.chart.xAxis.tickFormat(function(e){return t.formatNumber(e)}),f(),t.chart.xAxis.tickFormat(function(e){return t.formatCategories(e)}),t.chart.update=l,t.param.isTimeline&&i.selectAll(".nv-x .tick text, .nv-x .nv-axisMaxMin text").each(function(e,n){var i=r(this),s=r(".nv-x .tick","#"+t.id+" svg").index(i.parent())==r(".nv-x .tick","#"+t.id+" svg").length-1,u=i.text().split("<br>");i.empty();for(n=0;n<u.length;n++)o.select(this).append("tspan").text(u[n]).attr("dy",n?"1.2em":0).attr("x",s?-10:0).attr("y",20).attr("text-anchor","middle").attr("class","tspan"+n)}),t.addLaunchNameTip(i,n),t.redirectOnElementClick()};return this.chart.update=l,this.addResize(),this.redirectOnElementClick(),t.isPreview&&this.disabeLegendEvents(),this.updateInvalidCriteria(i),this}}),P=M.extend({render:function(){this.addSVG();var e=this.getChartData(),t=this,n=this.tooltipContent();this.chart=a.models.multiBarChart().x(function(e){return e.x}).y(function(e){return e.y}).forceY([0,1]).stacked(!0).showControls(!1).clipEdge(!0).showXAxis(!0).tooltips(t.isPreview?!1:!0).showLegend(!t.isPreview),this.chart.tooltipContent(n),this.chart.yAxis.tickFormat(o.format("d")).axisLabelDistance(-10).axisLabel("cases"),this.chart.xAxis.showMaxMin(!1).tickFormat(function(e){return t.formatNumber(e)});var i=this.createTooltip(),s=o.select("#"+this.id+" svg").datum(e).call(this.chart).call(i);t.param.isTimeline&&s.selectAll(".nv-x .tick text, .nv-x .nv-axisMaxMin text").each(function(e,n){var i=r(this),s=r(".nv-x .tick","#"+t.id+" svg").index(i.parent())==r(".nv-x .tick","#"+t.id+" svg").length-1,u=i.text().split("<br>");i.empty();for(n=0;n<u.length;n++)o.select(this).append("tspan").text(u[n]).attr("dy",n?"1.2em":0).attr("x",s?-10:0).attr("y",20).attr("text-anchor","middle").attr("class","tspan"+n)}),this.addLaunchNameTip(s,i),this.chart.xAxis.tickFormat(function(e){return t.formatCategories(e)});var u=t.chart.update,f=function(){t.chart.xAxis.tickFormat(function(e){return t.formatNumber(e)}),u(),t.chart.xAxis.tickFormat(function(e){return t.formatCategories(e)}),t.chart.update=f,t.param.isTimeline&&s.selectAll(".nv-x .tick text, .nv-x .nv-axisMaxMin text").each(function(e,n){var i=r(this),s=r(".nv-x .tick","#"+t.id+" svg").index(i.parent())==r(".nv-x .tick","#"+t.id+" svg").length-1,u=i.text().split("<br>");i.empty();for(n=0;n<u.length;n++)o.select(this).append("tspan").text(u[n]).attr("dy",n?"1.2em":0).attr("x",s?-10:0).attr("y",20).attr("text-anchor","middle").attr("class","tspan"+n)})};return this.chart.update=f,this.addResize(),this.redirectOnElementClick("multibar"),t.isPreview&&this.disabeLegendEvents(),this.updateInvalidCriteria(s),this}}),H=M.extend({getChartData:function(){var e=this.param.content||[];this.categories=[];if(!_.isEmpty(e)){var t={to_investigate:{key:g.widgets.toInvestigate,seriesId:"to_investigate"},investigated:{key:g.widgets.investigated,seriesId:"investigated"}};_.each(t,function(e,t){e.color=this.getSeriesColor(t),e.values=[]},this);if(!this.param.isTimeline)_.each(e.result,function(e,n){var r={id:e.id,name:e.name,number:"#"+e.number,startTime:parseInt(e.startTime)};this.categories.push(r),_.each(e.values,function(e,i){var s=_.extend({x:n+1,y:parseFloat(e)},r);t[i].values.push(s)})},this);else{var n=_.pairs(e);n.sort(function(e,t){return p(e[0],"YYYY-MM-DD").unix()-p(t[0],"YYYY-MM-DD").unix()}),_.each(n,function(e,n){var r=e[1][0].values,i=p(e[0],"YYYY-MM-DD"),s={time:i.format("YYYY-MM-DD"),startTime:i.unix()};this.categories.push(s),_.each(r,function(e,r){var s={startTime:i.unix(),x:n+1,y:parseFloat(e)};t[r].values.push(s)})},this)}return this.series=_.values(t),this.series}return[]},tooltipLabel:"%",render:function(){this.addSVG();var e=this.getChartData(),t=this,n=this.tooltipContent();this.chart=a.models.multiBarChart().x(function(e){return e.x}).y(function(e){return e.y}).stacked(!0).forceY([0,1]).showControls(!1).clipEdge(!0).showXAxis(!0).yDomain([0,100]).tooltips(t.isPreview?!1:!0).showLegend(t.isPreview?!1:!0),this.chart.tooltipContent(n),this.chart.yAxis.tickFormat(function(e){return e}).axisLabelDistance(-10).axisLabel(g.widgets.ofInvestigation),this.chart.xAxis.showMaxMin(!1).tickFormat(function(e){return t.formatNumber(e)});var i=this.createTooltip(),s=o.select("#"+this.id+" svg").datum(e).call(this.chart).call(i);t.param.isTimeline&&s.selectAll(".nv-x .tick text, .nv-x .nv-axisMaxMin text").each(function(e,n){var i=r(this),s=r(".nv-x .tick","#"+t.id+" svg").index(i.parent())==r(".nv-x .tick","#"+t.id+" svg").length-1,u=i.text().split("<br>");i.empty();for(n=0;n<u.length;n++)o.select(this).append("tspan").text(u[n]).attr("dy",n?"1.2em":0).attr("x",s?-10:0).attr("y",20).attr("text-anchor","middle").attr("class","tspan"+n)}),this.addLaunchNameTip(s,i),this.chart.xAxis.tickFormat(function(e){return t.formatCategories(e)});var u=t.chart.update,f=function(){t.chart.xAxis.tickFormat(function(e){return t.formatNumber(e)}),u(),t.chart.xAxis.tickFormat(function(e){return t.formatCategories(e)}),t.chart.update=f,r(".tick text").each(function(){var e=r(this);t.param.isTimeline||(e.css("opacity")==0?e.parent().css("display","none"):e.parent().css("display","block"))}),t.param.isTimeline&&s.selectAll(".nv-x .tick text, .nv-x .nv-axisMaxMin text").each(function(e,n){var i=r(this),s=r(".nv-x .tick","#"+t.id+" svg").index(i.parent())==r(".nv-x .tick","#"+t.id+" svg").length-1,u=i.text().split("<br>");i.empty();for(n=0;n<u.length;n++)o.select(this).append("tspan").text(u[n]).attr("dy",n?"1.2em":0).attr("x",s?-10:0).attr("y",20).attr("text-anchor","middle").attr("class","tspan"+n)})};return this.chart.update=f,this.addResize(),this.redirectOnElementClick("multibar"),t.isPreview&&this.disabeLegendEvents(),this}}),B=M.extend({tooltipLabel:"%",getSeries:function(e){var t=d.getInstance(),n={},r=this.param.gadget,i=t.widgetTypes[r];return _.each(e,function(e){var t=e.split("$"),r=t[1],s=r=="defects"?t[2]:_.last(t),o=s,u=E.patterns.defectsLocator,a=i.noCriteria?i.staticCriteria[e]:i.criteria[e];if(o!=="total"){if(r=="defects")var f=_.map(t[2].split("_"),function(e,t){return t>0?e.capitalize():e}),s=f.join("");n[s]||(n[s]={key:a,seriesId:o,color:this.getSeriesColor(o),values:[]}),r=="defects"&&u.test(_.last(t))&&(n[s].key=a)}},this),this.series=n,this.series},getChartData:function(){var e=this.param.content||[];this.categories=[];if(!_.isEmpty(e)){var t=this.param.content_fields,n=this.getSeries(t);return _.each(e.result,function(e,t){var r={id:e.id,name:e.name,number:"#"+e.number,startTime:parseInt(e.startTime)};this.categories.push(r),_.each(e.values,function(e,i){var s=i.split("$"),o=s[1],u=o=="issueCounter"?s[2]:_.last(s),a=_.extend({x:t+1,y:parseFloat(e)},r);n[u]&&(_.isObject(n[u].values[t])?n[u].values[t].y+=parseFloat(e):n[u].values.push(a))})},this),_.values(n)}return[]},render:function(){this.addSVG();var e=this.getChartData(),t=this,n=this.tooltipContent();this.chart=a.models.multiBarChart().x(function(e){return e.x}).y(function(e){return e.y}).forceY([0,1]).showControls(!1).clipEdge(!0).showXAxis(!0).yDomain([0,100]).tooltips(t.isPreview?!1:!0).showLegend(!t.isPreview),this.chart.tooltipContent(n),this.chart.yAxis.axisLabelDistance(-10).tickFormat(function(e){return e}).tickValues(_.range(0,101,10)).axisLabel("% "+g.widgets.ofTestCases),this.chart.xAxis.tickFormat(function(e){return t.formatNumber(e)});var r=this.createTooltip(),i=o.select("#"+this.id+" svg").datum(e).call(this.chart).call(r);return this.addLaunchNameTip(i,r),this.addResize(),t.isPreview&&this.disabeLegendEvents(),this}}),j=M.extend({getTimeType:function(e){var t={value:36e5,type:g.time.hours};return e>0&&(e<6e4?t={value:1e3,type:g.time.seconds}:e<=72e5&&(t={value:6e4,type:g.time.minutes})),t},getChartData:function(){var e=this.param.content||[];this.categories=[],this.colors=[],this.max=0,this.ITERUPT="INTERRUPTED";if(!_.isEmpty(e)&&e.result){var t={},n=0,r=0,i=0,s="duration",o="interrupted",u=_.clone(e.result).reverse();return t.key=g.widgets[s],t.color=this.getSeriesColor(s),t.seriesId="duration",t.values=[],_.each(u,function(e,i){var s=e.values,o=parseInt(s.duration),u={id:e.id,name:e.name,number:"#"+e.number};this.categories.push(u),t.values.push(_.extend(s,{num:i+1},u)),this.isInterupt(s)||(this.max=o>this.max?o:this.max,r+=o,++n)},this),i=r/n,_.each(t.values,function(e){this.isInterupt(e)?(e.duration=i&&!isNaN(i)?i:e.duration,this.colors.push(this.getSeriesColor(o))):this.colors.push(this.getSeriesColor(s))},this),this.series=[t],this.series}return[]},isInterupt:function(e){return e.status==this.ITERUPT},tooltipContent:function(){var e=this,t=this.getTimeType(this.max);return function(n,r,i,s,o){var u=s.pointIndex,a=p.duration(Math.abs(s.value),t.type).humanize(!0),f=e.categories[u],l=s.point.status,c='<p style="text-align:left;"><b>'+f.name+" "+f.number+"</b><br/>",h="<b>"+(l!==e.ITERUPT?s.series.key+":":'<span style="color: '+e.getSeriesColor(l)+';">Run '+e.ITERUPT.toLowerCase().capitalize()+"</span>")+" </b> "+(l!==e.ITERUPT?a:"")+" <br/></p>";return c+h}},render:function(){this.addSVG();var e=this.getChartData(),t=this,n=this.getTimeType(this.max),i=this.tooltipContent();this.chart=a.models.multiBarHorizontalChart().x(function(e){return e.num}).y(function(e){return parseInt(e.duration)/n.value}).showValues(!1).tooltips(t.isPreview?!1:!0).showControls(!1).reduceXTicks(!0).barColor(this.colors).valueFormat(o.format(",.2f")).showXAxis(!0).showLegend(!1),this.chart.tooltipContent(i),this.chart.xAxis.tickFormat(function(e){return t.formatNumber(e,t.categories)}),this.chart.yAxis.tickFormat(o.format(",.2f")).axisLabel(n.type);var u=this.createTooltip(!0),f=o.select("#"+this.id+" svg").datum(e).call(this.chart).call(u);r(".tick text").each(function(){var e=r(this);e.css("opacity")==0?e.parent().css("display","none"):e.parent().css("display","block")}),this.addLaunchNameTip(f,u);var l=t.chart.update,c=function(){t.chart.xAxis.tickFormat(function(e){return t.formatNumber(e)}),l(),t.chart.xAxis.tickFormat(function(e){return t.formatCategories(e)}),t.chart.update=c,r(".tick text").each(function(){var e=r(this);t.param.isTimeline||(e.css("opacity")==0?e.parent().css("display","none"):e.parent().css("display","block"))}),t.param.isTimeline&&f.selectAll(".nv-x .tick text, .nv-x .nv-axisMaxMin text").each(function(e,n){var i=r(this),s=r(".nv-x .tick","#"+t.id+" svg").index(i.parent())==r(".nv-x .tick","#"+t.id+" svg").length-1,u=i.text().split("<br>");i.empty();for(n=0;n<u.length;n++)o.select(this).append("tspan").text(u[n]).attr("dy",n?"1.2em":0).attr("x",s?-10:0).attr("y",20).attr("text-anchor","middle").attr("class","tspan"+n)});var e=t.createTooltip(!0);f.selectAll(".nv-x .tick, .nv-x .nv-axisMaxMin").on("mouseover."+t.id,function(n){var i=t.categories[n-1]||{};if(r("#widgetWizardModal").is(":visible")||!i.name&&!i.number)return;e.html(s.templates(t.tplTooltip,{tooltipName:g.launches.launchName,tooltipContent:i.name+" "+i.number})).show()}).on("mouseout."+t.id,e.hide),f.call(e)};return this.chart.update=c,this.addResize(),this.redirectOnElementClick("multibar"),t.isPreview&&this.disabeLegendEvents(),this}}),F=M.extend({addColors:function(e){switch(!0){case e<0:this.colors.push(this.getSeriesColor("negative"));break;case e==0:this.colors.push(this.getSeriesColor("zero"));break;case e>0:this.colors.push(this.getSeriesColor("positive"))}},getChartData:function(){var e=this.param.content||[];this.categories=[],this.colors=[],this.startVal=0;if(!_.isEmpty(e)){var t={};t.key=g.widgets.growTestCases,t.color=this.getSeriesColor(t.key),t.seriesId="grow_test_cases",t.values=[];if(!this.param.isTimeline)_.each(e.result,function(e,n){var r=e.values,i=parseInt(r.statistics$executionCounter$total),s=parseInt(r.delta),o={id:e.id,name:e.name,number:"#"+e.number,startTime:parseInt(e.startTime)};this.categories.push(o),n==0&&(this.startVal=parseInt(i)),this.addColors(s),t.values.push(_.extend({y:s,value:i,x:n+1},o))},this);else{var n=_.pairs(e);n.sort(function(e,t){return p(e[0],"YYYY-MM-DD").unix()-p(t[0],"YYYY-MM-DD").unix()}),_.each(n,function(e,n){var r=e[1][0].values,i=p(e[0],"YYYY-MM-DD"),s={time:i.format("YYYY-MM-DD"),startTime:i.unix()};this.categories.push(s);var o=parseInt(r.statistics$executionCounter$total),u=parseInt(r.delta);n==0&&(this.startVal=o),this.addColors(u),t.values.push({x:n+1,startTime:i.unix(),y:u,value:o})},this)}return this.series=[t],this.series}return[]},tooltipContent:function(){var e=this;return function(t,n,r,i,s){if(e.param.isTimeline){var o=i.pointIndex,u=e.categories[o];return'<p style="text-align:left">'+u.time+"<br/>"+t+": <strong>"+r+"</strong>"+"<br/>"+g.widgets.totalTestCases+": <strong>"+i.point.value+"</strong></p>"}var o=i.pointIndex,u=e.categories[o],a=e.formatDateTime(u.startTime);return'<p style="text-align:left"><strong>'+u.name+" "+u.number+"</strong><br/>"+a+"<br/>"+t+": <strong>"+r+"</strong>"+"<br/>"+g.widgets.totalTestCases+": <strong>"+i.point.value+"</strong></p>"}},getDomain:function(e){var t=this.startVal,n=_.isEmpty(e)?0:_.map(e[0].values,function(e,n){return t+=e.y}),r=_.max(n),i=_.min(n),s=[];return r===i&&(r+=1),s=[i,r],s},render:function(){this.addSVG();var e=this.getChartData(),t=this,n=this.tooltipContent(),i=this.getDomain(e);this.chart=a.models.trendBarChart().x(function(e){return e.x}).y(function(e){return e.y}).yDomain(i).valueFormat(o.format("f")).tooltips(t.isPreview?!1:!0).showValues(!0).color(this.colors),this.chart.tooltipContent(n),this.chart.yAxis.tickFormat(o.format("d")).axisLabelDistance(-10).axisLabel("cases"),this.chart.xAxis.staggerLabels(!1).tickFormat(function(e){return t.formatNumber(e)});var s=this.createTooltip(),u=o.select("#"+this.id+" svg").datum(e).call(this.chart).call(s);t.param.isTimeline&&u.selectAll(".nv-x .tick text, .nv-x .nv-axisMaxMin text").each(function(e,n){var i=r(this),s=r(".nv-x .tick","#"+t.id+" svg").index(i.parent())==r(".nv-x .tick","#"+t.id+" svg").length-1,u=i.text().split("<br>");i.empty();for(n=0;n<u.length;n++)o.select(this).append("tspan").text(u[n]).attr("dy",n?"1.2em":0).attr("x",s?-10:0).attr("y",20).attr("text-anchor","middle").attr("class","tspan"+n)}),this.addLaunchNameTip(u,s),this.chart.xAxis.tickFormat(function(e){return t.formatCategories(e)});var f=t.chart.update,l=function(){t.chart.xAxis.tickFormat(function(e){return t.formatNumber(e)}),f(),t.chart.xAxis.tickFormat(function(e){return t.formatCategories(e)}),t.chart.update=l,t.param.isTimeline&&u.selectAll(".nv-x .tick text, .nv-x .nv-axisMaxMin text").each(function(e,n){var i=r(this),s=r(".nv-x .tick","#"+t.id+" svg").index(i.parent())==r(".nv-x .tick","#"+t.id+" svg").length-1,u=i.text().split("<br>");i.empty();for(n=0;n<u.length;n++)o.select(this).append("tspan").text(u[n]).attr("dy",n?"1.2em":0).attr("x",s?-10:0).attr("y",20).attr("text-anchor","middle").attr("class","tspan"+n)})};return this.chart.update=l,this.addResize(),this.redirectOnElementClick("trendbar"),t.isPreview&&this.disabeLegendEvents(),this}}),I=M.extend({initialize:function(e){M.prototype.initialize.call(this,e),this.seriesTotal=g.widgets.not_passed,this.label="%",this.labelName=g.widgets.nonPassedCases,this.yDomain=[0,100]},getChartData:function(){var e=this.param.content||[];this.categories=[];if(!_.isEmpty(e)){var t={};return t.key=this.seriesTotal,t.color=this.getSeriesColor("not_passed"),t.values=[],_.each(e.result,function(e,n){var r={id:e.id,name:e.name,number:"#"+e.number,startTime:parseInt(e.startTime)};this.categories.push(r),t.values.push(_.extend({value:parseFloat(e.values[t.key]),num:n+1},r))},this),[t]}return[]},render:function(){this.addSVG();var e=this.getChartData(),t=this;this.chart=a.models.lineChart().x(function(e){return e.num}).y(function(e){return e.value}).interactive(!1).useInteractiveGuideline(t.isPreview?!1:!0).showLegend(t.isPreview?!1:!0),this.chart.yAxis.tickFormat(function(e){return e.toFixed()}).axisLabelDistance(-10).axisLabel(this.labelName),this.chart.xAxis.tickFormat(function(e){return t.formatNumber(e)}),this.yDomain&&this.chart.yDomain(this.yDomain);var n=this.createTooltip(),i=o.select("#"+this.id+" svg");i.datum(e).transition().duration(500).call(this.chart).call(n),r(".tick text").each(function(){var e=r(this);e.css("opacity")==0?e.parent().css("display","none"):""}),this.addLaunchNameTip(i,n),this.chart.xAxis.tickFormat(function(e){return t.formatCategories(e)});var s=t.chart.update,u=function(){t.chart.xAxis.tickFormat(function(e){return t.formatNumber(e)}),s(),t.chart.xAxis.tickFormat(function(e){return t.formatCategories(e)}),t.chart.update=u,t.addLaunchNameTip(i,n)};return this.chart.update=u,this.addResize(),t.isPreview&&this.disabeLegendEvents(),this}}),q=I.extend({initialize:function(e){I.prototype.initialize.call(this,e),this.seriesTotal=g.widgets.failed,this.label=g.widgets.casesLabel,this.labelName=g.widgets.failedCases,this.yDomain=null},getChartData:function(){var e=this.param.content||[];this.categories=[];if(!_.isEmpty(e)){var t={};return t.key=this.seriesTotal,t.color=this.getSeriesColor("failed"),t.values=[],_.each(e.result,function(e,n){var r=e.values.issuesCount,i={id:e.id,name:e.name,number:"#"+e.number,startTime:parseInt(e.startTime)};this.categories.push(i),t.values.push(_.extend({value:parseInt(r),num:n+1},i))},this),[t]}return[]}}),R=M.extend({pieGrid:"tpl-pie-grid",addSVG:function(e){this.container.append(this.$el.attr(this.attributes()).append(s.templates(this.pieGrid,{id:this.id,stats:e})))},roundLabels:function(e){var t=e%2===0?e*100:o.round(e*100,2),n=o.round(this.forLabels.sum+t,2);return++this.forLabels.count,this.forLabels.count==this.forLabels.size&&(n>100||n<100)&&(t=o.round(100-this.forLabels.sum,2)),this.forLabels.sum=n,t+"%"},renderPie:function(e,t,n){var r=this;this.forLabels={size:e.length,count:0,sum:0},this.chart=a.models.pieChart().x(function(e){return e.key}).y(function(e){return e.value}).margin({top:r.isPreview?0:30}).margin({left:20}).margin({right:20}).margin({bottom:0}).valueFormat(o.format("f")).showLabels(!r.isPreview).color(function(e){return e.data.color}).title(r.isPreview?"":n+":").titleOffset(-10).growOnHover(!1).labelThreshold(0).labelType("percent").legendPosition(n=="Issues"&&e.length>9?"right":"top").labelFormat(function(e){return r.roundLabels(e)}).donut(!0).donutRatio(.4).tooltips(r.isPreview?!1:!0).showLegend(!r.isPreview&&!this.param.isShowLegend?!0:!1),o.select(t).datum(e).call(this.chart),this.charts.push(this.chart),this.addResize(),this.redirectOnElementClick("pie"),this.updateOnLegendClick(t,n),r.isPreview&&this.disabeLegendEvents(),this.updateInvalidCriteria(o.select(t))},upadateTotal:function(e,t){var n=o.select(e).data()[0],i=0;_.each(n,function(e){i=e.disabled?i:i+parseInt(e.value)}),r(".nv-pie-title tspan",e).text(i)},updateOnLegendClick:function(e,t){var n=this;this.chart.legend.dispatch.on("legendClick",function(r,i){n.upadateTotal(e,t)}),this.chart.legend.dispatch.on("legendDblclick",function(r,i){n.upadateTotal(e,t)})},renderTitle:function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","tspan");r(".nv-pie-title",e).append(r(n).attr({x:"0",dy:"1.2em"}).text(t))},redirectOnElementClick:function(e){var t=this;this.chart[e].dispatch.on("elementClick",null),this.isPreview||this.chart[e].dispatch.on("elementClick",function(e){nv.tooltip.cleanup(),r(".fullscreen-close").is(":visible")&&r(".fullscreen-close").trigger("click");var n=e.label,i=_.find(t.series,function(e,t){return e.key==n}),s=i?i.seriesId:"",o=e.point.launch.id,u=s&&o?t.linkToRedirectService(s,o):"";u&&(document.location.hash=u)})},getChartData:function(){this.issues=0,this.total=0,this.gagData=!1;var e=this.param.content||[];if(!_.isEmpty(e)&&!_.isEmpty(e.result)){var t=this.param.content_fields,n=this.getSeries(t),r=e.result[0],i={issues:[],exec:[]},s=_.pairs(r.values);return s.sort(function(e,t){return e[0]==t[0]?0:e[0]<t[0]?-1:1}),_.each(s,function(e){var t=e[0],s=e[1],o=t.split("$"),u=o[1],a=_.last(o),f=parseInt(s),l=n[a];l&&(l.value=f,l.launch={name:r.name,number:"#"+r.number,startTime:parseInt(r.startTime),id:r.id}),a=="total"?this.total=f:u=="executionCounter"?i.exec.push(l):u=="issueCounter"&&(this.issues+=f,i.issues.push(l))},this),i}return[]},render:function(){var e=this.getChartData(),t=e.exec||[],n=e.issues||[];return this.addSVG(e),this.charts=[],this.renderPie(this.checkForZeroData(t),"#"+this.id+"-svg1","Sum"),this.renderPie(this.checkForZeroData(n),"#"+this.id+"-svg2","Issues"),_.isEmpty(this.param.content)||(this.renderTitle("#"+this.id+"-svg1",this.total),this.renderTitle("#"+this.id+"-svg2",this.issues)),this},checkForZeroData:function(e){return _.all(e,function(e){return e.value==0})?[]:e}}),U=R.extend({initialize:function(e){R.prototype.initialize.call(this,e),this.param.gadget="last_launch",this.param.isShowLegend=!0,this.param.content_fields=["statistics$executions$total","statistics$executions$passed","statistics$executions$failed","statistics$executions$skipped","statistics$defects$product_bug","statistics$defects$automation_bug","statistics$defects$system_issue","statistics$defects$to_investigate"]},redirectOnElementClick:function(){return!1}}),z=M.extend({disabledSeries:[],getSortedItems:function(){var e=[];return _.each(this.param.content,function(t,n){var r=t[0],i=_.extend({},r.values);if(this.param.interval==1)i.startTime=p(n,"YYYY-MM-DD").unix();else{var s=n.split("-"),o=parseInt(s[0]),u=parseInt(s[1].substr(1)),a=p(n);i.week=u,i.startTime=a.unix(),i.endTime=a.add("day",6).unix()}e.push(i)},this),e.sort(function(e,t){return e.startTime-t.startTime}),e},getData:function(){var e=[];this.categories=[];if(!_.isEmpty(this.param.content)){var t=this.getSortedItems(),n={toInvestigate:{key:g.widgets.toInvestigate},investigated:{key:g.widgets.investigated}};_.each(n,function(e,t){e.color=this.getSeriesColor(t=="toInvestigate"?"to_investigate":t),e.values=[],this.disabledSeries.push(!1)},this),_.each(t,function(e,t){var r={};r.startTime=e.startTime,r.endTime=e.endTime?e.endTime:null,r.week=e.endTime?e.week:null,this.categories.push(_.clone(r)),r.x=t+1,_.each(n,function(t,n){t.values.push(_.clone(_.extend({y:parseFloat(e[n])},r)))},this)},this),e=_.values(n)}return e},formatCategories:function(e){var t=this.categories[e-1]||{};if(!_.isEmpty(t))return t.endTime?t.week:p.unix(t.startTime).format("DD")},tooltipContent:function(e){var t=this,n=E.widgetTimeFormat;return function(r,i,s,o,u){var a="",f=o.pointIndex,l=p.unix(o.point.startTime).format(n),c=o.point.endTime?p.unix(o.point.endTime).format(n):null,h=c?l+" - "+c:l;return a='<p style="text-align:left"><strong>'+h+"</strong><br/></p>",_.each(e,function(e,n){t.disabledSeries[n]||(a+='<div style="text-align:left; margin-right: 14px; margin-bottom: 10px;"><div style="width: 8px; height: 8px; display: inline-block; margin: 0 7px 0 14px; background: '+e.color+'"></div>'+e.key+":<strong> "+e.values[f].y+"% "+"</strong></div>")}),a}},render:function(){this.addSVG();var e=this,t=parseInt(this.param.interval)!==1?!0:!1,n=this.getData(),i=this.tooltipContent(n),s;return this.chart=a.models.multiBarChart().x(function(e){return e.x}).y(function(e){return e.y}).margin({top:30,left:40,right:0,bottom:40}).reduceXTicks(!0).showControls(!1).stacked(!0).clipEdge(!0).showXAxis(!0).yDomain([0,100]).tooltips(e.isPreview?!1:!0).showLegend(!1),this.chart.dispatch.on("stateChange",function(t){e.disabledSeries=t.disabled}),this.chart.tooltipContent(i),this.chart.yAxis.tickFormat(function(e){return o.round(_.isNaN(e)?0:e)+"%"}),this.chart.xAxis.tickFormat(function(t){return e.formatCategories(t)}).axisLabel(t?g.widgets.timeWeeks:g.widgets.timeDays).tickPadding(8),s=o.select("#"+this.id+" svg").datum(n).call(this.chart),s.filter(function(e){_.isEmpty(e)&&r(this).closest("div").append('<div class="no-data-available"></div>')},this),this.addResize(),this}}),W=M.extend({getData:function(){var e=[],t="number_launches",n={};return _.isEmpty(this.param.content)||(n.key=g.widgets.quantityLaunches,n.color=this.getSeriesColor(t),n.values=[],_.each(this.param.content,function(e,t){var r=e[0].values,i={};i.y=parseInt(r.count),i.startTime=p(r.start,"YYYY-MM-DD").unix();if(r.end){var s=parseInt(t.slice(t.indexOf("W")+1));i.x=s||p(r.start,"YYYY-MM-DD").week(),i.endTime=p(r.end,"YYYY-MM-DD").unix()}else i.x=p(r.start,"YYYY-MM-DD").format("DD");n.values.push(i)},this),n.values.sort(function(e,t){return e.startTime-t.startTime}),e.push(n)),e},tooltipContent:function(){var e=E.widgetTimeFormat;return function(t,n,r,i,s){var o=p.unix(i.point.startTime).format(e),u=i.point.endTime?p.unix(i.point.endTime).format(e):null;return'<p style="text-align:left"><strong>'+r+"</strong> "+g.widgets.launches+"</strong><br/>"+o+(u?" - "+u:"")+"</p>"}},render:function(){this.addSVG();var e=this,t=this.getData(),n=this.param.interval!==1?!0:!1,i=this.tooltipContent(),s;return this.chart=a.models.multiBarChart().x(function(e){return e.x}).y(function(e){return e.y}).margin({top:30,left:40,right:0,bottom:40}).showLegend(!1).showYAxis(!0).showXAxis(!0).showControls(!1).reduceXTicks(!0).defaultState(!0).tooltips(e.isPreview?!1:!0).tooltipContent(i),this.chart.yAxis.tickFormat(function(e){return _.isNaN(e)?0:e}),this.chart.xAxis.tickFormat(function(e){return e}).axisLabel(n?g.widgets.timeWeeks:g.widgets.timeDays).tickPadding(8),s=o.select("#"+this.id+" svg").datum(t).transition().duration(500).call(this.chart),s.filter(function(e){_.isEmpty(e)&&r(this).closest("div").append('<div class="no-data-available"></div>')},this),this.addResize(),this}}),X=M.extend({disabledSeries:[],getCriteria:function(){return["toInvestigate","systemIssue","automationBug","productBug"]},getWeek:function(e){return parseInt(e.slice(e.indexOf("-W")+2))},getSortedItems:function(){var e=[];return _.each(this.param.content,function(t,n){var r=t[0],i=_.extend({},r.values);if(this.param.interval==1)i.startTime=p(n,"YYYY-MM-DD").unix();else{var s=this.getWeek(n),o=p(n);i.week=s,i.startTime=o.unix(),i.endTime=o.add("day",6).unix()}e.push(i)},this),e.sort(function(e,t){return e.startTime-t.startTime}),e},getSeries:function(e){var t={};return _.each(e,function(e){t[e]={color:this.getSeriesColor(e),key:g.widgets[e],values:[]},this.disabledSeries.push(!1)},this),this.series=t,this.series},getData:function(){var e=[];this.categories=[];if(!_.isEmpty(this.param.content)){var t=this.getSortedItems(),n=this.getCriteria(),r=this.getSeries(n);_.each(t,function(e,t){var i={},s=0;i.startTime=e.startTime,i.endTime=e.endTime?e.endTime:null,i.week=e.endTime?e.week:null,this.categories.push(_.clone(i)),_.each(n,function(t){s+=parseInt(e[t])}),_.each(r,function(n,r){i.x=t+1,i.y=s?parseFloat(+(parseInt(e[r])/s*100).toFixed(2).escapeNaN()):0,n.values.push(_.clone(i))})},this),e=_.values(r)}return e},tooltipContent:function(e){var t=this,n=E.widgetTimeFormat;return function(r,i,s,o,u){var a="",f=o.pointIndex,l,c=t.categories[f],h=p.unix(c.startTime).format(n),d=c.endTime?p.unix(c.endTime).format(n):null;return l=d?h+" - "+d:h,a='<p style="text-align:left"><strong>'+l+"</strong><br/></p>",_.each(e,function(e,n){if(!t.disabledSeries[n]){var r=e.values[f].y;a+='<div style="text-align:left; margin-right: 14px; margin-bottom: 12px;"><div style="width: 8px; height: 8px; display: inline-block; margin: 0 7px 0 14px; background: '+e.color+'"></div><strong>'+r+"% "+"</strong>"+e.key+"<br/></div>"}}),a}},formatCategories:function(e){var t=this.categories[e-1]||{};if(!_.isEmpty(t))return t.endTime?t.week||p.unix(t.startTime).week():p.unix(t.startTime).format("DD")},render:function(){this.addSVG();var e=this,t=this.getData(),n=this.param.interval!==1?!0:!1,i=this.tooltipContent(t),s;return this.chart=a.models.multiBarChart().x(function(e){return e.x}).y(function(e){return e.y}).margin({top:30,left:40,right:0,bottom:40}).showControls(!1).stacked(!0).showLegend(!1).showXAxis(!0).reduceXTicks(!1).tooltips(e.isPreview?!1:!0).yDomain([0,100]),this.chart.dispatch.on("stateChange",function(t){e.disabledSeries=t.disabled}),this.chart.tooltipContent(i),this.chart.yAxis.tickFormat(function(e){return e+"%"}),this.chart.xAxis.tickFormat(function(t){return e.formatCategories(t)}).axisLabel(n?g.widgets.timeWeeks:g.widgets.timeDays).tickPadding(8),s=o.select("#"+this.id+" svg").datum(t).call(this.chart),s.filter(function(e){_.isEmpty(e)&&r(this).closest("div").append('<div class="no-data-available"></div>')},this),this.addResize(),this}}),V=M.extend({getCriteria:function(){return["toInvestigate","systemIssue","automationBug","productBug"]},getSeries:function(e){var t={};return _.each(e,function(e){t[e]={color:this.getSeriesColor(e),key:g.widgets[e],values:[]}},this),this.series=t,this.series},getData:function(){var e=[];this.dates={},this.categories=[];if(!_.isEmpty(this.param.content)){var t=_.map(this.param.content,function(e,t){return e[0].values}),n=this.getCriteria(),r=this.getSeries(n);t.sort(function(e,t){return p(e.start,"YYYY-MM-DD").unix()-p(t.start,"YYYY-MM-DD").unix()}),_.each(t,function(e,t){var n={},i=p(e.start,"YYYY-MM-DD"),s=e.end?i.week():i.format("DD");n.startTime=i.unix(),n.endTime=e.end?p(e.end,"YYYY-MM-DD").unix():null,this.categories.push(_.clone(n)),this.dates[s]=this.categories[t],_.each(r,function(r,i){n.x=t+1,n.y=parseInt(e[i]),r.values.push(_.clone(n))})},this),e=_.values(r)}return e},formatCategories:function(e){var t=this.categories[e-1]||{};if(!_.isEmpty(t)){if(t.endTime){var n=p.unix(t.startTime).week();return n}var r=p.unix(t.startTime).format("DD");return r}},render:function(){this.addSVG();var e=this,t=this.getData(),n=this.param.interval!==1?!0:!1;this.chart=a.models.lineChart().margin({left:70}).showLegend(!1).showYAxis(!0).showXAxis(!0).x(function(e){return e.x}).y(function(e){return e.y}).useInteractiveGuideline(!0).tooltips(e.isPreview?!1:!0);var r=E.widgetTimeFormat,i=this.chart.interactiveLayer.tooltip.contentGenerator(),s=this.chart.interactiveLayer.tooltip;s.contentGenerator(function(t){var s=p.unix(e.dates[t.value].startTime).format(r),o=n?p.unix(e.dates[t.value].endTime).format(r):"";return t.value=n?s+" - "+o:s,i(t)}),this.chart.yAxis.tickFormat(function(e){return _.isNaN(e)?0:e}).axisLabelDistance(0).axisLabel("issues"),this.chart.xAxis.tickFormat(function(t){return e.formatCategories(t)}).axisLabel(n?g.widgets.timeWeeks:g.widgets.timeDays);var u=o.select("#"+this.id+" svg").datum(t).call(this.chart);return this.addResize(),this}}),$=M.extend({getWeek:function(e){return parseInt(e.slice(e.indexOf("-W")+2))},getSortedItems:function(){var e=[];return _.each(this.param.content,function(t,n){var r=t[0],i=_.extend({},r.values);if(this.param.interval==1)i.startTime=p(n,"YYYY-MM-DD").unix();else{var s=this.getWeek(n),o=p(n);i.week=s,i.startTime=o.unix(),i.endTime=o.add("day",6).unix()}e.push(i)},this),e.sort(function(e,t){return e.startTime-t.startTime}),e},getData:function(){var e=[],t=this.param.content;this.categories=[],this.dates={},this.averageBugs=0;if(!_.isEmpty(t)){var n=this.getSortedItems(),r=_.size(t),i=0,s=this.getCriteria(),u=this.getSeries(s);_.each(n,function(e,t){var n={},r=e.endTime?e.week:p.unix(e.startTime).format("DD"),s=_.reduce(this.issues,function(t,n){return t+parseInt(e[n])},0);n.startTime=e.startTime,n.endTime=e.endTime?e.endTime:null,n.week=e.endTime?e.week:null,this.categories.push(_.clone(n)),this.dates[r]=this.categories[t],n.x=t+1,_.each(u,function(r,u){var a=s?parseInt(e[u])*100/s:0;n.x=t+1,n.y=a%2===0?a:o.round(a,2),r.values.push(_.clone(n)),u===this.averageKey&&(i+=n.y)},this)},this),this.averageBugs=!_.isNaN(i)&&!_.isNaN(r)?Math.round(i/r*100)/100:0,e=_.values(u)}return e},getCriteria:function(){return["productBug","toInvestigate"]},averageKey:"productBug",issues:["toInvestigate","systemIssue","automationBug","productBug"],label:g.widgets.ofProductBugs,getSeries:function(e){var t={};return _.each(e,function(e){t[e]={color:this.getSeriesColor(e),key:g.widgets[e],values:[]}},this),this.series=t,this.series},formatCategories:function(e){var t=this.categories[e-1]||{};if(!_.isEmpty(t)){if(t.endTime){var n=t.week;return n}var r=p.unix(t.startTime).format("DD");return r}},render:function(){this.addSVG();var e=this,t=this.getData(),n=this.param.interval!==1?!0:!1,i=r("#total-"+this.id),s;_.isEmpty(this.param.content)?i.addClass("hide"):i.text(g.widgets.averageBugs.replace("%%%",this.averageBugs)+" "+g.widgets[this.averageKey]),this.chart=a.models.stackedAreaChart().x(function(e){return e.x}).y(function(e){return e.y}).margin({top:30,left:40,right:0,bottom:40}).yDomain([0,100]).useInteractiveGuideline(!0).showLegend(!1).clipEdge(!0).showControls(!1).yAxisTickFormat(function(e){return(_.isNaN(e)?0:e)+"%"});var u=E.widgetTimeFormat,f=this.chart.interactiveLayer.tooltip.contentGenerator(),l=this.chart.interactiveLayer.tooltip;return l.contentGenerator(function(t){var r=p.unix(e.dates[t.value].startTime).format(u),i=n?p.unix(e.dates[t.value].endTime).format(u):"";return t.value=n?r+" - "+i:r,t.series=_.sortBy(t.series,"key"),f(t)}),this.chart.xAxis.tickFormat(function(t){return e.formatCategories(t)}).axisLabel(n?g.widgets.timeWeeks:g.widgets.timeDays).tickPadding(8),s=o.select("#"+this.id+" svg").datum(t).call(this.chart),s.filter(function(e){_.isEmpty(e)&&(r(this).closest("div").append('<div class="no-data-available"></div>'),r(this).closest(".widget-body").css("height","200px"))},this),this.addResize(),this}}),J=$.extend({averageKey:"systemIssue",label:g.widgets.ofSystemIssues,getCriteria:function(){return["systemIssue","toInvestigate"]}}),K=$.extend({averageKey:"automationBug",label:g.widgets.ofAutoBugs,getCriteria:function(){return["automationBug","toInvestigate"]}}),Q=function(e){switch(e){case"old_line_chart":return D;case"statistic_trend":return P;case"investigated_trend":return H;case"last_launch":return U;case"launch_statistics":return R;case"overall_statistics":return A;case"not_passed":return I;case"cases_trend":return F;case"unique_bug_table":return k;case"bug_trend":return q;case"activity_stream":case"activities":return O;case"launches_comparison_chart":return B;case"launches_duration_chart":return j;case"launches_table":return N;case"investigated":return z;case"bugs_percentage":return $;case"system_issues_percentage":return J;case"auto_bugs_percentage":return K;case"cases_stats":return L;case"launches_quantity":return W;case"most_failed_test_cases":return C;case"issues_chart_trend":case"issues_chart":return X;case"issues_chart_line":return V;default:}};return{Model:S,WidgetView:x,widgetService:Q,LineChartView:D,LaunchesComparisonChart:B}}),define("widgetWizard",["require","exports","module","jquery","backbone","util","core/components","app","coreService","helpers","storageService","localization","dataUrlResolver","filtersService","widgets","launchEditor","moment","widget/widgetsConfig","defectType/SingletonDefectTypeCollection","select2"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("core/components"),u=e("app"),a=e("coreService"),f=e("helpers"),l=e("storageService"),c=e("localization"),h=e("dataUrlResolver"),p=e("filtersService"),d=e("widgets"),v=e("launchEditor"),m=e("moment"),g=e("widget/widgetsConfig"),y=e("defectType/SingletonDefectTypeCollection");e("select2");var b=u.getInstance(),w=i.Model.extend({defaults:{name:"",isShared:!1,filter_id:0,dashboard_id:0,is_shared:!1,widget_id:0,widget_template:null,criteria:null,actions:null,limit:0,mode:"launch",users:null,is_valid:!1,success_event:""},getCriteriaFields:function(e,t){var n=t.content_fields||[];for(var r in e)n.push(r);t.content_fields=_.uniq(n)},getDefaultCriteriaFields:function(e,t){t.content_fields=_.uniq(e.defaultCriteria)},getContentParameters:function(e){var t=e.widget_template,n={type:t.widget_type,gadget:t.gadget},r={};t.limit&&(n.itemsCount=e.limit?e.limit:t.limit.def),t.mode&&e.mode=="timeline"&&(r.timeline=["DAY"]);if(t.actions){var i=[];e.actions?i=e.actions:_.each(t.actions,function(e){Array.prototype.push.apply(i,e.actions)}),r.actionType=i}t.usersFilter&&e.users&&!_.isEmpty(e.users)&&(r.userRef=e.users),t.launchesFilter&&(r.launchNameFilter=e.launches);if(t.noCriteria&&t.staticCriteria&&t.gadget!=="activity_stream")n.content_fields=_.map(t.staticCriteria,function(e,t){return t});else{if(!_.isEmpty(e.criteria)){var s=_.isArray(t.criteria)?_.flatten(_.map(t.criteria,function(e){return e.keys})):_.keys(t.criteria);n.content_fields=t.criteria?_.intersection(e.criteria,s):e.criteria}else _.isEmpty(t.defaultCriteria)?t.criteria&&this.getCriteriaFields(t.criteria,n):this.getDefaultCriteriaFields(t,n);t.staticCriteria&&this.getCriteriaFields(t.staticCriteria,n)}var o=["unique_bug_table","activity_stream","launches_table","most_failed_test_cases"];return _.contains(o,t.gadget)||(n.metadata_fields=["name","number","start_time"]),t.gadget=="most_failed_test_cases"&&(n.metadata_fields=["name","start_time"]),_.isEmpty(r)||(n.widgetOptions=r),n},getSaveModel:function(){var e=this.toJSON();if(e.is_valid){var t={};return e.is_shared||(t.content_parameters=this.getContentParameters(e),t.name=e.name,t.share=e.isShared,e.widget_template.noFilters||(t.filter_id=e.filter_id)),t}}}),E=o.BaseView.extend({$widgetType:null,$widgetShared:null,$filterOwn:null,$filterShared:null,renderedTypes:[],selectedFilter:null,$selectedDashboard:null,ownDashboardNames:[],_widgetIncomingDashboard:null,messages:{minMax:"",select:""},initialize:function(e){this.navigationInfo=e&&e.navigationInfo?e.navigationInfo:null;var t=this;this.$el=s.getDialog({name:this.dialogShellTpl}),this.$el.on("hidden.bs.modal",function(){t.destroy()}).on("shown.bs.modal",function(){t.scrollToTemplate()}),g.clear(),this.widgetsConfig=g.getInstance(),s.switcheryInitialize(this.$el),this.setupAnchors(),this.$typesHolder.html(s.templates(this.widgetTypesTpl,{widgetTypes:this.widgetsConfig.widgetTypes,isCustomer:s.isCustomer()})),this.$templateConfig.slideUp(100),this.renderedTypes=[],this.model=new w({},{}),this.edited=null,s.setupBaronScroll(r(".borderWidget",this.$el))},setupAnchors:function(){this.$topLevelNav=r(".nav-tabs.top-level:first",this.$el),this.$TypeTab=r("a[href='#widgetType']:first",this.$el).parent(),this.$FilterTab=r("a[href='#widgetFilters']:first",this.$el).parent(),this.$NameTab=r("a[href='#widgetData']:first",this.$el).parent(),this.$ownDashboardsLink=r("a[href='#OwnDashboards']:first",this.$el),this.$DashboardsContent=r("#dashboardSelect",this.$el),this.$OwnDashboards=r("#OwnDashboards",this.$el),this.$ownFilters=r(".own-filters",this.$el),this.$sharedFilters=r(".shared-filters",this.$el),this.$previewBlock=r("#widgetPreview",this.$el),this.$previewValidatorMessage=r("#previewValidationMessage",this.$el),this.$previewValidatorHolder=r("#previewValidationHolder",this.$el),this.$previewContent=r("#previewContent",this.$el),this.$SharedFilters=r("#SharedFilters",this.$el),this.$OwnFilters=r("#OwnFilters",this.$el),this.$SharedWidgets=r("#SharedWidgets",this.$el),this.$typesHolder=r("#widgetTemplates",this.$el),this.$templateConfig=r("#templateConfig",this.$el),this.$templateOptions=r("#templateOptions",this.$templateConfig),this.$templateValidations=r("#templateValidations",this.$templateConfig),this.$widgetIsShared=r("#tabShared",this.$el),this.$widgetName=r("#widgetName",this.$el),this.$newDashboardName=r("#dashboardName",this.$el),this.$newDashboardShared=r("#dashboardShared",this.$el),this.$newDashboardWarning=r("#newDashboardWarning",this.$el),this.$widgetGlobalLoader=r("#popupLoader",this.$el),this.$globalValidation=r("#globalValidation",this.$el)},dialogShellTpl:"tpl-widget-wizard-dialog",widgetTypesTpl:"tpl-widget-wizard-widget-types",SharedWidgetsTpl:"tpl-widget-wizard-shared-widget",OwnFiltersTpl:"tpl-widget-wizard-filters",SharedFiltersTpl:"tpl-widget-wizard-filters",dropDownTpl:"tpl-widget-drop-down",minMaxTpl:"tpl-widget-min-max",usersSelectorTpl:"tpl-widget-users",launchesSelectorTpl:"tpl-widget-launches",OwnDashboardsTpl:"tpl-widget-dashboards-own",buttonsTpl:"tpl-widget-buttons",render:function(e){if(e){this._widgetIncomingDashboard=e.dashboard_id,this.edited=e,this.model.set(this.edited),this.edited.content_parameters&&this.setupForEdit(),this.validateForCompletion();var t=this;this.$el.on("shown.bs.modal",function(){var e=t.model.get("content");e&&(t.validateWidgetType()?(t.$previewValidatorHolder.hide(),t.$previewContent.empty().show(),t.renderWidgetPreview()):(t.$previewValidatorMessage.empty(),t.$previewValidatorMessage.text(t.$previewValidatorHolder.data("notavailable")),t.$previewValidatorHolder.show()),r("#widgetType li.shared-tab",this.$el).addClass("disabled").attr("title",c.wizard.impossibleShared))})}return this.getDashboards(),this.validateForPreview(),this.$el.modal("show"),this},setupForEdit:function(){this.model.set("widget_id",this.edited.content_parameters.gadget);var e=this.edited.content_parameters,t=e.widgetOptions&&e.widgetOptions.launchNameFilter?e.widgetOptions.launchNameFilter:null;t&&this.model.set("launches",t)},preselectDashboard:function(){if(!this.model.get("dashboard_id")){var e=l.getActiveDashboard(),t=e.id&&e.owner===b.userModel.get("name")?_.find(this.OwnDashboardsData,function(t){return t.id===e.id}):this.OwnDashboardsData.length?this.OwnDashboardsData[0]:null;this.model.set("dashboard_id",t&&!this.validateForMaxWidgts(t)?t.id:"")}},resetCreateDashboard:function(){this.$newDashboardName.val(""),this.$newDashboardName.closest(".form-group").removeClass("has-error"),this.$newDashboardShared.bootstrapSwitch("state",!1)},events:{"click #widgetType a[data-toggle=tab]":"handleType",'click a[href="#widgetData"]':"handleNameSection","click .top-level a":"handleTopLevelNavigation","click .filters-tab":"handleFiltersTab","click .widget_type":"selectWidgetType","click .btn-group":"selectButton","click .shared_widget_block":"selectSharedWidget","click .filter-row":"selectFilter","keyup #nameFilter":"searchInFilters","keyup #nameFilterShared":"searchInFilters","click .dashboard-selector":"selectDashboard","click #createDashboard .rp-btn.rp-btn-submit":"submitNewDashboard","validation::change #widgetName":"handleWidgetName","switchChange.bootstrapSwitch #tabShared":"handleWidgetShare","input #limitSelector":"validateMinMax","change .selectable":"validateSelect","click .check-all":"validateSelect","click #saveWidget":"saveWidget","click #globalValidation":"hideGlobalValidation","click #newDashboardWarning":"hideNewDashboardWarning","change #userSelector":"validateUsersSelect","change #launchesSelector":"validateLaunchSelect"},validateMinMax:function(e){var t=r(e.currentTarget),n=t.val().trim(),i=t.data("min"),s=t.data("max"),o="";/\D/.test(n)&&(n="",t.val(n));if(!n.length)o="countCantBeEmpty";else{var u=parseInt(n);if(u<i||u>s)o="countWrongAmountSize"}this.messages.minMax=o?{code:o,min:i,max:s}:"",this.model.set("limit",n),this.showMessage(),this.validateModel(),this.validateForPreview()},validateSelect:function(e){var t=r(e.currentTarget),n=t.closest(".dropdown-menu");if(!r(":checked",n).length){var i={};i.code=n.attr("id")==="actionOptions"?"selectAtLeastOneAction":"selectAtLeastOneCriteria",this.messages.select=i}else this.messages.select="";this.showMessage();var s=n.attr("id")==="actionOptions"?"actions":n.attr("id")==="modeOptions"?"mode":"criteria",o=[];if(s==="actions"){var u=this.model.get("widget_id"),a=this.widgetsConfig.widgetTypes[u];_.each(r(":checked",n),function(e){o=o.concat(a.actions[r(e).val()].actions)})}else o=_.flatten(_.map(r(":checked",n),function(e){return r(e).val().split(",")}));this.model.set(s,o),this.validateModel(),this.validateForPreview()},showMessage:function(){this.$templateValidations.empty().hide();for(var e in this.messages){var t=this.messages[e].code;if(t){var n=e==="minMax"&&t==="countWrongAmountSize"?this.messages[e].min+"-"+this.messages[e].max:"";this.$templateValidations.append(s.getValidationMessage(t)+n+"</br>")}}this.$templateValidations.is(":empty")?this.$templateValidations.hide():(this.$templateValidations.show(),this.$TypeTab.removeClass("validated")),this.$TypeTab.addClass("validated"),this.validateModel()},hideGlobalValidation:function(){this.$globalValidation.fadeOut("slow")},hideNewDashboardWarning:function(){this.$newDashboardWarning.fadeOut("slow")},validateUsersSelect:function(){var e=r("#userSelector",this.$templateConfig).val().split(",");this.model.set("users",_.compact(e))},validateLaunchSelect:function(){var e=_.compact(_.map(r("#launchesSelector",this.$templateConfig),function(e){return r(e).val()})),t="";if(!e||_.isEmpty(e))t="launchesCantBeEmpty";this.model.set("launches",e),this.messages.launchesSelect=t?{code:t}:"",this.showMessage(),this.validateModel()},submitNewDashboard:function(){this.$newDashboardName.trigger("validate");if(!this.$newDashboardName.closest(".form-group").hasClass("has-error")){var e={share:this.$newDashboardShared.bootstrapSwitch("state"),name:this.$newDashboardName.val()},t=this;this.$widgetGlobalLoader.show(),a.createDashboard(e).done(function(n){e.id=n.id,t.OwnDashboardsData.length?t.OwnDashboardsData.unshift(e):t.OwnDashboardsData.push(e),t.model.get("dashboard_id")&&r("#"+t.model.get("dashboard_id"),t.$DashboardsContent).removeClass("active"),t.model.set("dashboard_id",n.id),t.renderContent("OwnDashboards"),r("a[href='#OwnDashboards']:first",t.$el).click(),t.resetCreateDashboard(),t.$widgetGlobalLoader.hide(),t.validateModel(),t.ownDashboardNames.push(e.name)}).fail(function(e){s.ajaxFailMessenger(null,"addDashBoard"),t.$widgetGlobalLoader.hide()})}},selectDashboard:function(e){e.preventDefault();var t=r(e.currentTarget);t.hasClass("disabled")||(r(".dashboard-selector",this.$DashboardsContent).removeClass("active"),this.model.set("dashboard_id",t.attr("id")),t.addClass("active"),this.validateModel())},searchInFilters:function(e){var t=r(e.currentTarget),n=t.val(),i=t.attr("id")==="nameFilter"?"OwnFilters":"SharedFilters",s=this;if(n.length>55){t.parent().addClass("has-error");return}t.parent().removeClass("has-error"),n?_.forEach(s[i+"Data"],function(e){var t=r("#"+e.id,s["$"+i]);e.name.toLowerCase().indexOf(n.toLowerCase())===-1?t.hide():t.show()}):r(".filter-row",this["$"+i]).show()},handleTopLevelNavigation:function(e){var t=r(e.currentTarget);if(t.parent().hasClass("disabled"))return e.stopImmediatePropagation(),!1;this.isValidForFirstTimeOwnFiltersLoad(t)&&this.loadType("OwnFilters"),this.hideGlobalValidation()},handleFiltersTab:function(e){var t=r(e.target),n=t.attr("href").slice(1);this.loadType(n)},handleType:function(e){if(r(e.currentTarget).parent().hasClass("disabled"))return e.stopImmediatePropagation(),!1;var t=r(e.target).attr("href").slice(1);t==="SharedWidgets"?(this.loadType(t),this.hideTemplateConfig()):this.showTemplateConfig()},disableFilterTab:function(e){var t=e?"add":"remove";this.$FilterTab[t+"Class"]("disabled")},loadType:function(e){this[e+"Data"]?!this.isTypeRendered(e)&&this.renderContent(e):this.loadContent(e)},loadContent:function(e){var t=this;this.widgetLoader(this["$"+e],!0),a["get"+e]().done(function(n){t.assignDataByType(n,e),t.renderContent(e)}).fail(function(e){s.ajaxFailMessenger(null,"connectToServer")})},handleNameSection:function(){var e=this;setTimeout(function(){e.setupWidgetNameValidator(),e.renderContent("OwnDashboards");var t=e.model.get("name");t&&(e.$widgetName.val(t),e.$widgetIsShared.bootstrapSwitch("state",e.model.get("isShared")))})},validateDashboardTabsForEditability:function(){this.model.get("success_event")==="refresh::widget"&&this.$DashboardsContent.find("ul:first > li").addClass("disabled")},getDashboards:function(){this.validateDashboardTabsForEditability();var e=this;a.getProjectDashboards().done(function(t){e.assignDataByType(t,"OwnDashboards"),e.preselectDashboard()}).fail(function(e){s.ajaxFailMessenger(e,"getDashBoards")})},setupWidgetNameValidator:function(){var e=this;a.getWidgetNames().done(function(t){if(e.model.get("widget_id")!==0){var n=t.indexOf(e.model.get("name"));n!==-1&&t.splice(n,1)}s.bootValidator(e.$widgetName,[{validator:"minMaxRequired",type:"widgetName",min:3,max:128},{validator:"noDuplications",type:"widgetName",source:t}])}).fail(function(e){s.ajaxFailMessenger(null,"widgetNames")})},widgetLoader:function(e,t){var n=t?"show":"hide",i=t?"hide":"show";r(".wizard-loader:first",e)[n](),r(".content-holder:first",e)[i]()},renderContent:function(e){var t=this.model.get("dashboard_id"),n=_.find(this.OwnDashboardsData,function(e){return e.id===t}),i={collection:this[e+"Data"]||[],widgetsConfig:this.widgetsConfig,model:this.model.toJSON(),validateAddSharedWidget:this.validateAddSharedWidget,isCustomer:s.isCustomer(),dash:n,validateForMaxWidgts:this.validateForMaxWidgts,inEdit:this.model.get("success_event")==="refresh::widget"};this.isFiltersType(e)&&(i.shared=e==="SharedFilters",i.getFilterOptions=f.getFilterOptions,i.getLastKey=f.getLastKey),r(".content-holder",this["$"+e]).html(s.templates(this[e+"Tpl"],i)),this.renderedTypes.push(e);var o=this["$"+e];r(".filter-name").each(function(){var e=r(this);e.text(r.trim(e.text()))});if(!o.setupScroll){var u=s.setupBaronScroll(r(".content-holder",o));s.setupBaronScrollSize(u,{maxHeight:300}),o.setupScroll=!0}this.widgetLoader(o),this.scrollToType(e)},scrollToType:function(e){var t=this.isTypeValidToScroll(e);if(t){var n=r("#"+t,this["$"+e]);n.length&&this["$"+e].scrollTop(0).scrollTop(n.position().top)}},scrollToTemplate:function(){var e=0,t=this.model.get("content_parameters");t&&(this.model.set("widget_id",t.gadget),this.model.set("widget_template",this.widgetsConfig.widgetTypes[t.gadget]),this.$widgetType=r("#"+t.gadget,this.$typesHolder),this.$widgetType.addClass("active"),this.renderWidgetSettings(this.widgetsConfig.widgetTypes[t.gadget],t),e=this.$widgetType.position().top,this.widgetsConfig.widgetTypes[t.gadget].noFilters&&this.$FilterTab.addClass("disabled"),this.validateModel()),this.$typesHolder.scrollTop(0).scrollTop(e)},assignDataByType:function(e,t){if(this.isSharedWidgets(t))this[t+"Data"]=_.groupBy(e,"owner");else if(this.isDashboardType(t)){var n=_.groupBy(e,function(e){return e.owner===b.userModel.get("name")?"own":"shared"});this.OwnDashboardsData=n.own||[],this.ownDashboardNames=_.pluck(this.OwnDashboardsData,"name")||[],s.bootValidator(this.$newDashboardName,[{validator:"minMaxRequired",type:"dashboardName",min:3,max:128},{validator:"noDuplications",type:"dashboardName",source:this.ownDashboardNames}])}else this.isFiltersType(t)&&(this[t+"Data"]=e)},resetActiveSelectable:function(e,t){this["$"+e]&&this["$"+e].removeClass("active"),t?(this["$"+e]=t,this["$"+e].addClass("active")):this["$"+e]=null},selectWidgetType:function(e){var t=r(e.currentTarget);if(t.hasClass("active")||t.hasClass("disabled"))return;this.resetActiveSelectable("widgetType",t),this.resetActiveSelectable("widgetShared"),this.messages.minMax="",this.messages.select="",this.messages.launchesSelect="";var n=this.$widgetType.attr("id"),i=this.widgetsConfig.widgetTypes[n];i.mode||this.model.set("mode","launch"),this.edited&&this.edited.content_parameters&&this.edited.content_parameters.gadget&&i.gadget===this.edited.content_parameters.gadget&&this.setupForEdit(),this.model.set("widget_template",i),this.model.set("is_shared",!1),this.model.set("widget_id",t.attr("id")),this.model.set("criteria",null),this.model.set("content_parameters",null),this.model.set("launches",null),this.renderWidgetSettings(i,this.model.get("content_parameters")),this.$previewBlock.show(),this.disableFilterTab(i.noFilters||!1),i.launchesFilter&&_.isEmpty(this.model.get("launches"))&&(this.messages.launchesSelect={code:"launchesCantBeEmpty"},this.showMessage()),this.validateModel(),this.validateForPreview(),this.disableWidgetNameSection(!1)},getWidgetPreviewData:function(){var e=this;a.getFilterData([this.model.get("filter_id")]).done(function(t){if(t&&!_.isEmpty(t)){var n=t[0],r=new o.RequestParameters,i=n.type,u=[],f=e.model,l=f.get("widget_template"),c=!1;p.loadFilterIntoRequestParams(r,n),u=r.getFilters(),u.push({id:"filter.!in.status",value:"IN_PROGRESS"}),r.setFilters(u),(f.get("mode")==="timeline"||l&&l.gadget==="launch_statistics")&&r.setSortInfo("start_time","DESC");if(l&&l.gadget==="launches_comparison_chart"){var h=r.getSortInfo();h.direction==="ASC"&&(c=!0),r.setSortInfo("start_time","DESC")}if(!_.isUndefined(f.get("limit"))){r.setPageSize(f.get("limit"));if(!e.validateLimitForPreview(l,f.get("limit")))return e.renderWidgetPreview({content:[]}),!1}a.getWidgetData(i,r.toURLSting()).done(function(t){l&&l.gadget==="launches_comparison_chart"&&(t.content=S.getComparisonLaunches(t,c)),e.renderWidgetPreview(t)}).fail(function(t){e.noDataForPreview(),s.ajaxFailMessenger(null,"widgetPreviewData")})}else e.noDataForPreview()}).fail(function(t){e.noDataForPreview(),s.ajaxFailMessenger(null,"widgetPreviewData")})},validateLimitForPreview:function(e,t){var n=e.limit,r=n.min,i=n.max;return t>=r&&t<=i},parseWidgetPreviewData:function(e,t){return S.parseData(e,t)},renderWidgetPreview:function(e){var t=this.model.get("content_parameters"),n=e?this.model.get("widget_id"):t.gadget,r=this.model.toJSON(),i=e?this.model.getContentParameters(r):t,s=e?this.model.get("mode")&&this.model.get("mode")=="timeline":t.widgetOptions&&t.widgetOptions.timeline,o=e?this.parseWidgetPreviewData(e,this.model):this.model.get("content"),u=d.widgetService(n),a={isTimeline:s,id:_.uniqueId("preview-"),name:this.model.get("name"),content:o,height:240};this.$previewContent.css("height","300px"),this.$previewContent.empty(),this.widget&&this.widget.destroy(),this.widget=(new u({container:this.$previewContent,context:this.context,model:this.model,parent:this,isPreview:!0,param:_.extend(i,a)})).render()},getSharedWidgetData:function(){var e=this;a.getSharedWidgetData(this.model.get("id")).done(function(t){e.model.set({content:t.content,content_parameters:t.content_parameters}),e.renderWidgetPreview()}).fail(function(e){s.ajaxFailMessenger(e,"sharedWidgetData")})},selectSharedWidget:function(e){var t=r(e.currentTarget),n=t.attr("id"),i=r("#saveWidget",this.$el);if(t.hasClass("disabled"))return;this.emptyTemplateConfig(),i.removeAttr("disabled").removeProp("disabled"),this.resetActiveSelectable("widgetShared",t),this.resetActiveSelectable("widgetType"),this.model.set("widget_template",this.widgetsConfig.widgetTypes[t.data("gadget")]),this.hideTemplateConfig(),this.model.set("is_shared",!0),this.model.set("id",n),this.validateModel(),this.disableWidgetNameSection(!0),this.disableFilterTab(!0),this.$previewValidatorHolder.hide(),this.$previewValidatorMessage.empty(),this.validateWidgetType()?(this.$previewContent.empty().show(),this.getSharedWidgetData()):(this.$previewContent.empty().hide(),this.$previewValidatorMessage.text(this.$previewValidatorHolder.data("notavailable")),this.$previewValidatorHolder.show())},validateForMaxWidgts:function(e){return(e&&e.widgets&&e.widgets.length)>=b.maxWidgetsOnDashboard},validateAddSharedWidget:function(e,t){return e&&!!_.find(e.widgets,function(e){return e.widgetId===t})},validateWidgetType:function(){var e=this.model.get("widget_template");return!e||!e.gadget||e.gadget!="unique_bug_table"&&e.gadget!="activity_stream"&&e.gadget!="launches_table"&&e.gadget!="most_failed_test_cases"},selectButton:function(e){e.preventDefault();var t=r(e.currentTarget),n=r(e.target);n.hasClass("rp-btn-val")&&(e.stopPropagation(),n=n.closest(".rp-btn"));if(n.hasClass("active"))return;t.find(".rp-btn").removeClass("active"),n.addClass("active"),this.model.set(t.data("type"),n.data("value")),this.validateModel(),this.validateForPreview()},selectFilter:function(e){var t=r(e.currentTarget);this.$filterRow?this.$filterRow.removeClass("active"):(r(".active",this.$OwnFilters).removeClass("active"),r(".active",this.$SharedFilters).removeClass("active")),this.$filterRow=t,this.$filterRow.addClass("active"),this.model.set("filter_id",t.attr("id")),this.validateModel(),this.validateForPreview()},validateForPreview:function(){this.$previewValidatorHolder.hide(),this.$previewValidatorMessage.empty();var e=this.model.get("filter_id"),t=this.model.get("widget_template"),n=!1;this.validateWidgetType()?!t&&!e?this.$previewValidatorMessage.text(this.$previewValidatorHolder.data("default")):t?e?n=!0:t&&t.noFilters?this.$previewValidatorMessage.text(this.$previewValidatorHolder.data("notavailable")):this.$previewValidatorMessage.text(this.$previewValidatorHolder.data("nofilter")):this.$previewValidatorMessage.text(this.$previewValidatorHolder.data("notemplate")):this.$previewValidatorMessage.text(this.$previewValidatorHolder.data("notavailable")),n?(this.$previewValidatorHolder.hide(),this.showPreview()):(this.$previewContent.empty().hide(),!this.$previewValidatorMessage.is(":empty")&&this.$previewValidatorHolder.fadeIn())},noDataForPreview:function(){this.$previewValidatorMessage.empty(),this.$previewContent.empty().hide(),this.$previewValidatorMessage.text(this.$previewValidatorHolder.data("nodata")),!this.$previewValidatorMessage.is(":empty")&&this.$previewValidatorHolder.fadeIn()},showPreview:function(){this.$previewContent.empty().show(),this.getWidgetPreviewData()},hideTemplateConfig:function(){this.$templateConfig.slideUp(100),this.$templateOptions.hide(),this.$templateValidations.hide()},showTemplateConfig:function(){this.$templateConfig.slideDown(200),this.$templateOptions.show(),this.$templateValidations.is(":empty")||this.$templateValidations.show()},emptyTemplateConfig:function(){this.$templateOptions.empty(),this.$templateValidations.empty().hide()},disableWidgetNameSection:function(e){this.$widgetIsShared.bootstrapSwitch("disabled",e),e?this.$widgetName.attr("disabled","disabled"):this.$widgetName.removeAttr("disabled")},isCriteriaChecked:function(e,t){if(e.type=="action"){var n=e.criteria[t].actions;return e.criteria_fields.length&&!e.checkAll?_.every(n,function(t){return _.contains(e.criteria_fields,t)}):!0}return e.selectType?_.isEqual(e.criteria_fields,t.split(",")):e.criteria_fields.length&&!e.checkAll?_.every(t.split(","),function(t){return _.contains(e.criteria_fields,t)}):!0},renderWidgetSettings:function(e,t){this.emptyTemplateConfig();if(this.hasRenderableCriteria(e)){var n=_.isArray(e.criteria)?_.flatten(_.map(e.criteria,function(e){return e.keys})):_.keys(e.criteria),i=t&&t.gadget===e.gadget?t.content_fields:_.isEmpty(e.defaultCriteria)?n:e.defaultCriteria,o=n.length===(t&&e.staticCriteria?i.length-_.size(e.staticCriteria):i.length);this.model.set("criteria",i),this.$templateOptions.append(s.templates(this.dropDownTpl,{criteria:e.criteria,criteria_fields:i,defaultCriteria:e.defaultCriteria,selectType:e.criteriaSelectType,type:"criteria",checkAll:o,isChecked:this.isCriteriaChecked}))}if(e.limit){var u=t&&t.gadget===e.gadget&&t.itemsCount?t.itemsCount:e.limit.def;u&&this.model.set("limit",u),e.limit.display&&this.$templateOptions.append(s.templates(this.minMaxTpl,{value:u,limit:e.limit,gadget:e.gadget}))}if(e.mode){var f=t&&t.widgetOptions&&t.widgetOptions.timeline?"timeline":"launch";this.model.set("mode",f),this.$templateOptions.append(s.templates(this.buttonsTpl,{criteria:e.mode.items,defautlCriteria:f,type:"mode"}))}if(e.actions){var l=t&&t.widgetOptions&&t.widgetOptions.actionType,c=_.flatten(_.map(e.actions,function(e,t){return e.actions}));l&&this.model.set("actions",l),l=l||[],this.$templateOptions.append(s.templates(this.dropDownTpl,{criteria:e.actions,criteria_fields:l,type:"action",checkAll:!l.length||c.length===l.length,isChecked:this.isCriteriaChecked}))}if(e.usersFilter){var h=t&&t.widgetOptions&&t.widgetOptions.userRef,p=b.forms.filterUser;h&&this.model.set("users",h),this.$templateOptions.append(s.templates(this.usersSelectorTpl,{selected:h||[],startSearch:p}));var d=r(".users-typeahead:first",this.$templateConfig),m=this;v.setupSelect2Tags(d,{type:"autocompleteUserUrl",min:1,minimumInputLength:p,maximumInputLength:256,mode:"DEFAULT",noResizeSearch:!0,startSearch:p})}if(e.launchesFilter){var g=t&&t.widgetOptions&&t.widgetOptions.launchNameFilter,m=this;this.$templateOptions.append(s.templates(this.launchesSelectorTpl,{selected:g||[]})),s.setupSelect2WhithScroll(r(".users-typeahead:first",this.$templateConfig),{multiple:!1,min:3,noCreateNew:!0,minimumInputLength:3,maximumInputLength:256,allowClear:!0,dropdownCssClass:"hideNew",placeholder:"Select launch",initSelection:function(e,t){t({id:e.val(),text:e.val()})},query:function(e){a.searchLaunches(e).done(function(t){var n={results:[]};_.each(t,function(e){n.results.push({id:e,text:e})}),e.callback(n)}).fail(function(e){s.ajaxFailMessenger(e)})}}),r(".users-typeahead:first",this.$templateConfig).on("select2-open",function(){r(".select2-drop-mask").remove(),m.hideCriteriaDropDown()}),r(document).on("mousedown",function(){r(".users-typeahead:first",m.$templateConfig).select2("close")})}this.$templateOptions.is(":empty")||(s.attachSelectAllFlipper(this.$templateConfig),this.$templateConfig.slideDown(200))},hideCriteriaDropDown:function(){var e=r(".dropdown-toggle",this.$templateConfig);e.parent().hasClass("open")&&e.dropdown("toggle")},validateModel:function(){if(this.model.get("is_shared")){this.$TypeTab.addClass("validated");var e=this.model.get("id"),t=this.model.get("dashboard_id"),n=_.find(this.OwnDashboardsData,function(e){return e.id===t}),i=t?"add":"remove",s="add";this.$NameTab[i+"Class"]("validated"),n&&(s=this.validateAddSharedWidget(n,e)?"remove":"add",s=="remove"&&this.$widgetShared.hasClass("active")&&(r(".shared_widget_block",this.$widgetShared).removeClass("active"),r("#"+e,this.$widgetShared).addClass("disabled"))),this.$TypeTab[s+"Class"]("validated"),this.model.set("is_valid",i=="add"&&s=="add"?!0:!1)}else{var o=this.model.get("name")&&this.model.get("dashboard_id")?"add":"remove";this.$NameTab[o+"Class"]("validated");var u=this.model.get("filter_id"),a=this.widgetsConfig.widgetTypes[this.model.get("widget_id")],f;a&&a.noFilters?f="add":f=u?"add":"remove",this.$FilterTab[f+"Class"]("validated");var s=this.model.get("widget_id")?"add":"remove";this.typeHasAnyErrors()&&(s="remove"),this.$TypeTab[s+"Class"]("validated");var l=o==="add"&&f==="add"&&s==="add",c=r("#saveWidget",this.$el);this.model.set("is_valid",l),l?c.removeAttr("disabled").removeProp("disabled"):c.attr("disabled","disabled").prop("disabled","disabled")}},typeHasAnyErrors:function(){return _.any(this.messages,function(e){return!!e})},handleWidgetName:function(e,t){t.valid?this.model.set("name",t.value):this.model.set("name",""),this.validateModel()},handleWidgetShare:function(e,t){this.model.set("isShared",t)},hasRenderableCriteria:function(e){return e&&e.criteria&&!e.noCriteria},isSharedWidgets:function(e){return e==="SharedWidgets"},isFiltersType:function(e){return e.indexOf("Filters")!==-1},isDashboardType:function(e){return e.indexOf("Dashboards")!==-1},isTypeRendered:function(e){return _.indexOf(this.renderedTypes,e)!==-1},isValidForFirstTimeOwnFiltersLoad:function(e){return e.attr("href")==="#widgetFilters"&&!this.OwnFiltersData},isTypeValidToScroll:function(e){var t="";if(e==="SharedFilters"||e==="OwnFilters")t=this.model.get("filter_id");return t},checkForUnsavedDashboard:function(){var e=Boolean(this.$newDashboardName.is(":visible")&&this.$newDashboardName.val());return e&&this.$newDashboardWarning.fadeIn(),e},validateForCompletion:function(){this.model.get("id")?(this.$FilterTab.addClass("validated"),this.$TypeTab.addClass("validated"),this.$NameTab.addClass("validated")):this.model.get("filter_id")&&this.$FilterTab.addClass("validated")},getWidgetShell:function(){return{widgetId:this.model.get("id"),widgetPosition:[0,0],widgetSize:[b.defaultWidgetWidth,b.defaultWidgetHeight]}},addToDashboard:function(){var e=this.getWidgetShell(),t=this,n=this.model.get("dashboard_id"),r=this.model.get("success_event"),i=function(e){var i=_.find(t.OwnDashboardsData,{id:n})||{id:n};r?(i.widgets=e,t.navigationInfo.trigger(r,i)):t.$el.on("hidden.bs.modal",function(){l.setActiveDashboard({id:i.id,name:i.name,owner:i.owner}),b.router&&b.router.navigate(h.redirectToDashboard(n),{trigger:!0}),t.destroy()}),t.$el.modal("hide")},o=function(){return a.addWidgetToDashboard(e,n)},u=function(){var r=_.find(t.OwnDashboardsData,{id:n})||{id:n},i=r.widgets,s=[e];return i&&i.length&&_.forEach(i,function(t){t.widgetId!==e.widgetId&&(t.widgetPosition[1]+=b.defaultWidgetHeight,s.push(t))}),s},f=function(r){r&&r.length===1?i([e]):a.updateWidgetsOnDashboard(r,n).done(function(e){i(r);var n=t.model.get("widget_template");t.$widgetGlobalLoader.hide()}).fail(c)},c=function(e){t.$el.modal("hide"),s.ajaxFailMessenger(e,"widgetAddToDashboard")};o().then(u).then(f,c)},saveWidget:function(){var e=this;this.model.get("is_shared")||this.$widgetName.trigger("validate");if(this.checkForUnsavedDashboard())return;if(this.model.get("is_valid")){this.hideGlobalValidation(),this.$widgetGlobalLoader.show();if(this.model.get("is_shared"))this.validateModel(),this.addToDashboard();else{this.edited.content_parameters||this.model.set("id",null);var t=this.model.getSaveModel(),n=this.model.get("id");n?a.updateWidget(t,n).done(function(t){e.trigger(e.model.get("success_event"),n),e.$widgetGlobalLoader.hide(),e.$el.modal("hide")}).fail(function(t){s.ajaxFailMessenger(t,"widgetUpdate"),e.$widgetGlobalLoader.hide(),e.$el.modal("hide")}):a.saveWidget(t).done(function(t){e.model.set("id",t.id),e.addToDashboard()}).fail(function(t){s.ajaxFailMessenger(null,"widgetSave"),e.$widgetGlobalLoader.hide(),e.$el.modal("hide")})}}else r("li:not(.validated)",this.$topLevelNav).effect("highlight",{},3e3),this.$globalValidation.fadeIn("fast")},destroy:function(){this.widget&&this.widget.destroy(),this.messages=null,this.model=null,this.$el.data("modal",null),this.$el.off().remove(),o.RemovableView.prototype.destroy.call(this)}}),S={parseData:function(e,t){var n=t.get("widget_id");switch(n){case"old_line_chart":return this.getLineTrendChartData(e,t);case"statistic_trend":return this.getLineTrendChartData(e,t);case"investigated_trend":return this.getColumnChartData(e,t);case"launch_statistics":return this.getCombinePieChartData(e,t);case"overall_statistics":return this.getStaticticsPanelData(e,t);case"not_passed":return this.getNotPassedChartData(e);case"cases_trend":return this.getCasesTrendChartData(e,t);case"bug_trend":return this.getBugsTrendChartData(e,t);case"launches_comparison_chart":return this.getLaunchesComparisonChartData(e,t);case"launches_duration_chart":return this.getLaunchesDurationChartData(e);default:return null}},fixCriteria:function(e,t,n){var r="statistics$executionCounter$",i="statistics$issueCounter$";if(e=="defects"){if(n){var s=n.split("_");return s[1]&&(s[1]=s[1].capitalize()),i+s.join("")+"$"+t}var o=t.split("_");return o[1]&&(o[1]=o[1].capitalize()),i+o.join("")}return r+t},calcValue:function(e){var t=0;return _.isObject(e)?_.isUndefined(e.total)?_.each(e,function(e,n){t+=parseInt(e)}):t=parseInt(e.total):t=parseInt(e),t},getValues:function(e,t){var n={};return _.each(e,function(e){var r=e.split("$"),i=_.last(r),s=r[1],o=t?s=="defects"?t[r[0]][s][r[2]][i]:t[r[0]][s][i]:0,u=this.fixCriteria(s,i,r[2]),a=this.calcValue(o||0);n[u]=a},this),n},getLaunchInfo:function(e){return{name:e.name,number:e.number,startTime:e.start_time}},getCriteria:function(e){var t=e.get("criteria"),n=g.getInstance();return t?t:(t=n.widgetTypes[e.get("widget_id")].criteria,t||(t=n.widgetTypes[e.get("widget_id")].staticCriteria),_.keys(t))},getComparisonLaunches:function(e,t){var n=[],r=e.content;for(var i=0,s=r.length;i<s;i++){if(n.length>=2)break;r.status!=="inProgress"&&n.push(r[i])}return t||n.reverse(),n},getStaticticsPanelData:function(e,t){var n={},r=e.content.reverse(),i=this.getCriteria(t);return _.isEmpty(r)||_.each(r,function(e){_.each(i,function(t){var r=t.split("$"),i=r[1],s=_.last(r),o=e?i=="defects"?e[r[0]][i][r[2]][s]:e[r[0]][i][s]:0,u=this.calcValue(o||0);n[s]?n[s]+=u:n[s]=u},this)},this),{result:[{values:n}]}},getLineTrendChartData:function(e,t){var n={},r=t.get("mode")&&t.get("mode")=="timeline",i=e.content.reverse(),s=this.getCriteria(t);if(!_.isEmpty(i))if(!r)n.result=[],_.each(i,function(e){var t=this.getLaunchInfo(e);t.values=this.getValues(s,e),n.result.push(t)},this);else{var o=[];_.each(i,function(e){var t=this.getValues(s,e),r=m(e.start_time).format("YYYY-MM-DD");o.push(m(r,"YYYY-MM-DD").unix());if(n.hasOwnProperty(r)){var i=n[r][0].values;_.each(i,function(e,n){i[n]=e+t[n]})}else n[r]=[{values:t}]},this);var u=_.min(o),a=_.max(o),f=m.unix(u).format("YYYY-MM-DD"),l=this.getValues(s);while(m(f,"YYYY-MM-DD").unix()<a)f=m(f,"YYYY-MM-DD").add(1,"d").format("YYYY-MM-DD"),n.hasOwnProperty(f)||(n[f]=[{values:l}])}return n},getColumnChartData:function(e,t){var n={},r=t.get("mode")&&t.get("mode")=="timeline",i=this.getCriteria(t),s=this,o=e.content.reverse(),u=function(e,t){var n=0,r=0,i=0;return _.each(e,function(e){var o=e.split("$"),u=o[2],a=_.last(o);if(_.has(t.defects[u],a)){var f=t.defects[u][a],l=s.calcValue(f);u==="to_investigate"?i+=l:r+=l,n+=l}},this),{total:n,inv:r,to_inv:i}};if(!_.isEmpty(o))if(!r)n.result=[],_.each(o,function(e){var t=this.getLaunchInfo(e),r=e.statistics,s=u(i,r),o=s.total,a=s.inv,f=s.to_inv;t.values={investigated:o?Math.round(a/o*100*100)/100:0,to_investigate:o?Math.round(f/o*100*100)/100:0},n.result.push(t)},this);else{var a=[],f={};_.each(o,function(e){var t=m(e.start_time).format("YYYY-MM-DD"),n=e.statistics,r=u(i,n),s=r.total,o=r.inv,l=r.to_inv;a.push(m(t,"YYYY-MM-DD").unix());if(f.hasOwnProperty(t)){var c=f[t];c.total+=s,c.to_investigate+=l,c.investigated+=o}else f[t]={total:s,to_investigate:l,investigated:o}},this);var l=_.min(a),c=_.max(a),h=m.unix(l).format("YYYY-MM-DD");while(m(h,"YYYY-MM-DD").unix()<c)h=m(h,"YYYY-MM-DD").add(1,"d").format("YYYY-MM-DD"),f.hasOwnProperty(h)||(f[h]={total:0,to_investigate:0,investigated:0});_.each(f,function(e,t){var r=e.total,i=e.investigated,s=e.to_investigate,o={investigated:r?Math.round(i/r*100*100)/100:0,to_investigate:r?Math.round(s/r*100*100)/100:0};n[t]=[{values:o}]},this)}return n},getLaunchesDurationChartData:function(e){var t={result:[]},n=e.content.reverse();return _.each(n,function(e){var n=this.getLaunchInfo(e);n.values={status:e.status,start_time:e.start_time,end_time:e.end_time,duration:e.end_time-e.start_time},t.result.push(n)},this),t},getLaunchesComparisonChartData:function(e,t){var n={},r=e.content,i=_.map(this.getCriteria(t),function(e){var t=e.split("$");return t[2]});return _.isEmpty(r)||(n.result=[],_.each(r,function(e){var t=this.getLaunchInfo(e),r={};_.each(e.statistics,function(e,n){var s=_.reduce(e,function(e,t,n){var r=this.calcValue(t);return n!=="total"&&_.contains(i,n)?e+r:e},0,this);_.each(e,function(e,t){if(t!=="total"&&_.contains(i,t)){var o=this.calcValue(e),u=s?Math.round(o/s*100*100)/100:0;r[this.fixCriteria(n,t)]=u}},this),t.values=r},this),n.result.push(t)},this)),n},getNotPassedChartData:function(e){var t={},n=e.content.reverse();return _.isEmpty(n)||(t.result=[],_.each(n,function(e){var n=this.getLaunchInfo(e),r=e.statistics,i=r.executions,s=parseInt(i.total),o=parseInt(i.failed),u=parseInt(i.skipped),a=s?Math.round((o+u)/s*100*100)/100:0;n.values={"% (Failed+Skipped)/Total":a},t.result.push(n)},this)),t},getBugsTrendChartData:function(e,t){var n={},r=e.content.reverse(),i=this.getCriteria(t),s=0;return _.isEmpty(r)||(n.result=[],_.each(r,function(e){var t=this.getLaunchInfo(e),r=e.statistics,o=r.defects,u={},a=0;_.each(i,function(e){var t=e.split("$"),n=t[2],r=o[n],i=this.calcValue(r);a+=i,u[this.fixCriteria(e)]=i},this),u.issuesCount=a,u.delta=a-s,t.values=u,s=a,n.result.push(t)},this)),n},getCasesTrendChartData:function(e,t){var n={},r=e.content.reverse(),i=t.get("mode")&&t.get("mode")=="timeline",s="total",o=function(e){var t=e.statistics,n=t.executions,r=parseInt(n.total);return r};if(!_.isEmpty(r))if(!i){var u=0;n.result=[],_.each(r,function(e,t){var r=this.getLaunchInfo(e),i=o(e),a=t==0?0:i-u;u=i,r.values={},r.values[this.fixCriteria("executions",s)]=i,r.values.delta=a,n.result.push(r)},this)}else{var a=[],f={};_.each(r,function(e){var t=m(e.start_time).format("YYYY-MM-DD"),n=o(e),r={total:n,time:m(t,"YYYY-MM-DD").unix()};if(f.hasOwnProperty(t)){var i=f[t],s=i.total;n>s&&(f[t]=r)}else f[t]=r,a.push(m(t,"YYYY-MM-DD").unix())},this);var l=_.min(a),c=_.max(a),h=m.unix(l).format("YYYY-MM-DD");while(m(h,"YYYY-MM-DD").unix()<c)h=m(h,"YYYY-MM-DD").add(1,"d").format("YYYY-MM-DD"),f.hasOwnProperty(h)||(f[h]={total:0,time:m(h,"YYYY-MM-DD").unix()});var p=_.values(f),u=0;p.sort(function(e,t){return e.time-t.time}),_.each(p,function(e,t){var r=m.unix(e.time).format("YYYY-MM-DD"),i=e.total,o=t==0?0:i-u,a={};a[this.fixCriteria("executions",s)]=i,a.delta=o,n[r]=[{values:a}],u=i},this)}return n},getCombinePieChartData:function(e,t){var n={},r=e.content.reverse(),i=_.last(r),s=this.getCriteria(t);if(i){var o=this.getLaunchInfo(i);n.result=[],o.values={},_.each(s.reverse(),function(e){var t=e.split("$"),n=t[1],r=_.last(t),s=i.statistics&&i.statistics[n]?n==="defects"?i.statistics[n][t[2]][r]:i.statistics[n][r]:0,u=this.calcValue(s||0);o.values[this.fixCriteria(n,r,t[2])]=u},this),n.result.push(o)}return n}};return{WidgetWizard:E}}),function(e){if(typeof define=="function"&&define.amd)define("gridstack",["jquery","underscore"],e);else if(typeof exports!="undefined"){try{jQuery=require("jquery")}catch(t){}try{_=require("lodash")}catch(t){}e(jQuery,_)}else e(jQuery,_)}(function(e,t){function o(e){this.grid=e}var n=window,r=function(e,t,n){var r=function(){return console.warn("gridstack.js: Function `"+t+"` is deprecated as of v0.2.5 and has been replaced "+"with `"+n+"`. It will be **completely** removed in v1.0."),e.apply(this,arguments)};return r.prototype=e.prototype,r},i=function(e,t){console.warn("gridstack.js: Option `"+e+"` is deprecated as of v0.2.5 and has been replaced with `"+t+"`. It will be **completely** removed in v1.0.")},s={isIntercepted:function(e,t){return!(e.x+e.width<=t.x||t.x+t.width<=e.x||e.y+e.height<=t.y||t.y+t.height<=e.y)},sort:function(e,n,r){return r=r||t.chain(e).map(function(e){return e.x+e.width}).max().value(),n=n!=-1?1:-1,t.sortBy(e,function(e){return n*(e.x+e.y*r)})},createStylesheet:function(e){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.setAttribute("data-gs-style-id",e),t.styleSheet?t.styleSheet.cssText="":t.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(t),t.sheet},removeStylesheet:function(t){e("STYLE[data-gs-style-id="+t+"]").remove()},insertCSSRule:function(e,t,n,r){typeof e.insertRule=="function"?e.insertRule(t+"{"+n+"}",r):typeof e.addRule=="function"&&e.addRule(t,n,r)},toBool:function(e){return typeof e=="boolean"?e:typeof e=="string"?(e=e.toLowerCase(),e!==""&&e!="no"&&e!="false"&&e!="0"):Boolean(e)},_collisionNodeCheck:function(e){return e!=this.node&&s.isIntercepted(e,this.nn)},_didCollide:function(e){return s.isIntercepted({x:this.n.x,y:this.newY,width:this.n.width,height:this.n.height},e)},_isAddNodeIntercepted:function(e){return s.isIntercepted({x:this.x,y:this.y,width:this.node.width,height:this.node.height},e)},parseHeight:function(e){var n=e,r="px";if(n&&t.isString(n)){var i=n.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw)?$/);if(!i)throw new Error("Invalid height");r=i[2]||"px",n=parseFloat(i[1])}return{height:n,unit:r}}};s.is_intercepted=r(s.isIntercepted,"is_intercepted","isIntercepted"),s.create_stylesheet=r(s.createStylesheet,"create_stylesheet","createStylesheet"),s.remove_stylesheet=r(s.removeStylesheet,"remove_stylesheet","removeStylesheet"),s.insert_css_rule=r(s.insertCSSRule,"insert_css_rule","insertCSSRule"),o.registeredPlugins=[],o.registerPlugin=function(e){o.registeredPlugins.push(e)},o.prototype.resizable=function(e,t){return this},o.prototype.draggable=function(e,t){return this},o.prototype.droppable=function(e,t){return this},o.prototype.isDroppable=function(e){return!1},o.prototype.on=function(e,t,n){return this};var u=0,a=function(e,t,n,r,i){this.width=e,this.float=n||!1,this.height=r||0,this.nodes=i||[],this.onchange=t||function(){},this._updateCounter=0,this._float=this.float,this._addedNodes=[],this._removedNodes=[]};a.prototype.batchUpdate=function(){this._updateCounter=1,this.float=!0},a.prototype.commit=function(){this._updateCounter!==0&&(this._updateCounter=0,this.float=this._float,this._packNodes(),this._notify())},a.prototype.getNodeDataByDOMEl=function(e){return t.find(this.nodes,function(t){return e.get(0)===t.el.get(0)})},a.prototype._fixCollisions=function(e){var n=this;this._sortNodes(-1);var r=e,i=Boolean(t.find(this.nodes,function(e){return e.locked}));!this.float&&!i&&(r={x:0,y:e.y,width:this.width,height:e.height});for(;;){var o=t.find(this.nodes,t.bind(s._collisionNodeCheck,{node:e,nn:r}));if(typeof o=="undefined")return;this.moveNode(o,o.x,e.y+e.height,o.width,o.height,!0)}},a.prototype.isAreaEmpty=function(e,n,r,i){var o={x:e||0,y:n||0,width:r||1,height:i||1},u=t.find(this.nodes,t.bind(function(e){return s.isIntercepted(e,o)},this));return u===null||typeof u=="undefined"},a.prototype._sortNodes=function(e){this.nodes=s.sort(this.nodes,e,this.width)},a.prototype._packNodes=function(){this._sortNodes(),this.float?t.each(this.nodes,t.bind(function(e,n){if(e._updating||typeof e._origY=="undefined"||e.y==e._origY)return;var r=e.y;while(r>=e._origY){var i=t.chain(this.nodes).find(t.bind(s._didCollide,{n:e,newY:r})).value();i||(e._dirty=!0,e.y=r),--r}},this)):t.each(this.nodes,t.bind(function(e,n){if(e.locked)return;while(e.y>0){var r=e.y-1,i=n===0;if(n>0){var o=t.chain(this.nodes).take(n).find(t.bind(s._didCollide,{n:e,newY:r})).value();i=typeof o=="undefined"}if(!i)break;e._dirty=e.y!=r,e.y=r}},this))},a.prototype._prepareNode=function(e,n){return e=t.defaults(e||{},{width:1,height:1,x:0,y:0}),e.x=parseInt(""+e.x),e.y=parseInt(""+e.y),e.width=parseInt(""+e.width),e.height=parseInt(""+e.height),e.autoPosition=e.autoPosition||!1,e.noResize=e.noResize||!1,e.noMove=e.noMove||!1,e.width>this.width?e.width=this.width:e.width<1&&(e.width=1),e.height<1&&(e.height=1),e.x<0&&(e.x=0),e.x+e.width>this.width&&(n?e.width=this.width-e.x:e.x=this.width-e.width),e.y<0&&(e.y=0),e},a.prototype._notify=function(){var e=Array.prototype.slice.call(arguments,0);e[0]=typeof e[0]=="undefined"?[]:[e[0]],e[1]=typeof e[1]=="undefined"?!0:e[1];if(this._updateCounter)return;var t=e[0].concat(this.getDirtyNodes());this.onchange(t,e[1])},a.prototype.cleanNodes=function(){if(this._updateCounter)return;t.each(this.nodes,function(e){e._dirty=!1})},a.prototype.getDirtyNodes=function(){return t.filter(this.nodes,function(e){return e._dirty})},a.prototype.addNode=function(e,n){e=this._prepareNode(e),typeof e.maxWidth!="undefined"&&(e.width=Math.min(e.width,e.maxWidth)),typeof e.maxHeight!="undefined"&&(e.height=Math.min(e.height,e.maxHeight)),typeof e.minWidth!="undefined"&&(e.width=Math.max(e.width,e.minWidth)),typeof e.minHeight!="undefined"&&(e.height=Math.max(e.height,e.minHeight)),e._id=++u,e._dirty=!0;if(e.autoPosition){this._sortNodes();for(var r=0;;++r){var i=r%this.width,o=Math.floor(r/this.width);if(i+e.width>this.width)continue;if(!t.find(this.nodes,t.bind(s._isAddNodeIntercepted,{x:i,y:o,node:e}))){e.x=i,e.y=o;break}}}return this.nodes.push(e),typeof n!="undefined"&&n&&this._addedNodes.push(t.clone(e)),this._fixCollisions(e),this._packNodes(),this._notify(),e},a.prototype.removeNode=function(e,n){n=typeof n=="undefined"?!0:n,this._removedNodes.push(t.clone(e)),e._id=null,this.nodes=t.without(this.nodes,e),this._packNodes(),this._notify(e,n)},a.prototype.canMoveNode=function(n,r,i,s,o){if(!this.isNodeChangedPosition(n,r,i,s,o))return!1;var u=Boolean(t.find(this.nodes,function(e){return e.locked}));if(!this.height&&!u)return!0;var f,l=new a(this.width,null,this.float,0,t.map(this.nodes,function(t){return t==n?(f=e.extend({},t),f):e.extend({},t)}));if(typeof f=="undefined")return!0;l.moveNode(f,r,i,s,o);var c=!0;return u&&(c&=!Boolean(t.find(l.nodes,function(e){return e!=f&&Boolean(e.locked)&&Boolean(e._dirty)}))),this.height&&(c&=l.getGridHeight()<=this.height),c},a.prototype.canBePlacedWithRespectToHeight=function(n){if(!this.height)return!0;var r=new a(this.width,null,this.float,0,t.map(this.nodes,function(t){return e.extend({},t)}));return r.addNode(n),r.getGridHeight()<=this.height},a.prototype.isNodeChangedPosition=function(e,t,n,r,i){return typeof t!="number"&&(t=e.x),typeof n!="number"&&(n=e.y),typeof r!="number"&&(r=e.width),typeof i!="number"&&(i=e.height),typeof e.maxWidth!="undefined"&&(r=Math.min(r,e.maxWidth)),typeof e.maxHeight!="undefined"&&(i=Math.min(i,e.maxHeight)),typeof e.minWidth!="undefined"&&(r=Math.max(r,e.minWidth)),typeof e.minHeight!="undefined"&&(i=Math.max(i,e.minHeight)),e.x==t&&e.y==n&&e.width==r&&e.height==i?!1:!0},a.prototype.moveNode=function(e,t,n,r,i,s){if(!this.isNodeChangedPosition(e,t,n,r,i))return e;typeof t!="number"&&(t=e.x),typeof n!="number"&&(n=e.y),typeof r!="number"&&(r=e.width),typeof i!="number"&&(i=e.height),typeof e.maxWidth!="undefined"&&(r=Math.min(r,e.maxWidth)),typeof e.maxHeight!="undefined"&&(i=Math.min(i,e.maxHeight)),typeof e.minWidth!="undefined"&&(r=Math.max(r,e.minWidth)),typeof e.minHeight!="undefined"&&(i=Math.max(i,e.minHeight));if(e.x==t&&e.y==n&&e.width==r&&e.height==i)return e;var o=e.width!=r;return e._dirty=!0,e.x=t,e.y=n,e.width=r,e.height=i,e.lastTriedX=t,e.lastTriedY=n,e.lastTriedWidth=r,e.lastTriedHeight=i,e=this._prepareNode(e,o),this._fixCollisions(e),s||(this._packNodes(),this._notify()),e},a.prototype.getGridHeight=function(){return t.reduce(this.nodes,function(e,t){return Math.max(e,t.y+t.height)},0)},a.prototype.beginUpdate=function(e){t.each(this.nodes,function(e){e._origY=e.y}),e._updating=!0},a.prototype.endUpdate=function(){t.each(this.nodes,function(e){e._origY=e.y});var e=t.find(this.nodes,function(e){return e._updating});e&&(e._updating=!1)};var f=function(n,r){var s=this,u,f;r=r||{},this.container=e(n),typeof r.handle_class!="undefined"&&(r.handleClass=r.handle_class,i("handle_class","handleClass")),typeof r.item_class!="undefined"&&(r.itemClass=r.item_class,i("item_class","itemClass")),typeof r.placeholder_class!="undefined"&&(r.placeholderClass=r.placeholder_class,i("placeholder_class","placeholderClass")),typeof r.placeholder_text!="undefined"&&(r.placeholderText=r.placeholder_text,i("placeholder_text","placeholderText")),typeof r.cell_height!="undefined"&&(r.cellHeight=r.cell_height,i("cell_height","cellHeight")),typeof r.vertical_margin!="undefined"&&(r.verticalMargin=r.vertical_margin,i("vertical_margin","verticalMargin")),typeof r.min_width!="undefined"&&(r.minWidth=r.min_width,i("min_width","minWidth")),typeof r.static_grid!="undefined"&&(r.staticGrid=r.static_grid,i("static_grid","staticGrid")),typeof r.is_nested!="undefined"&&(r.isNested=r.is_nested,i("is_nested","isNested")),typeof r.always_show_resize_handle!="undefined"&&(r.alwaysShowResizeHandle=r.always_show_resize_handle,i("always_show_resize_handle","alwaysShowResizeHandle")),r.itemClass=r.itemClass||"grid-stack-item";var l=this.container.closest("."+r.itemClass).length>0;this.opts=t.defaults(r||{},{width:parseInt(this.container.attr("data-gs-width"))||12,height:parseInt(this.container.attr("data-gs-height"))||0,itemClass:"grid-stack-item",placeholderClass:"grid-stack-placeholder",placeholderText:"",handle:".grid-stack-item-content",handleClass:null,cellHeight:60,verticalMargin:20,auto:!0,minWidth:768,"float":!1,staticGrid:!1,_class:"grid-stack-instance-"+(Math.random()*1e4).toFixed(0),animate:Boolean(this.container.attr("data-gs-animate"))||!1,alwaysShowResizeHandle:r.alwaysShowResizeHandle||!1,resizable:t.defaults(r.resizable||{},{autoHide:!r.alwaysShowResizeHandle&&!0,handles:"se"}),draggable:t.defaults(r.draggable||{},{handle:(r.handleClass?"."+r.handleClass:r.handle?r.handle:"")||".grid-stack-item-content",scroll:!1,appendTo:"body"}),disableDrag:r.disableDrag||!1,disableResize:r.disableResize||!1,rtl:"auto",removable:!1,removeTimeout:2e3,verticalMarginUnit:"px",cellHeightUnit:"px",oneColumnModeClass:r.oneColumnModeClass||"grid-stack-one-column-mode",ddPlugin:null}),this.opts.ddPlugin===!1?this.opts.ddPlugin=o:this.opts.ddPlugin===null&&(this.opts.ddPlugin=t.first(o.registeredPlugins)||o),this.dd=new this.opts.ddPlugin(this),this.opts.rtl==="auto"&&(this.opts.rtl=this.container.css("direction")==="rtl"),this.opts.rtl&&this.container.addClass("grid-stack-rtl"),this.opts.isNested=l,f=this.opts.cellHeight==="auto",f?s.cellHeight(s.cellWidth(),!0):this.cellHeight(this.opts.cellHeight,!0),this.verticalMargin(this.opts.verticalMargin,!0),this.container.addClass(this.opts._class),this._setStaticClass(),l&&this.container.addClass("grid-stack-nested"),this._initStyles(),this.grid=new a(this.opts.width,function(e,n){n=typeof n=="undefined"?!0:n;var r=0;t.each(e,function(e){n&&e._id===null?e.el&&e.el.remove():(e.el.attr("data-gs-x",e.x).attr("data-gs-y",e.y).attr("data-gs-width",e.width).attr("data-gs-height",e.height),r=Math.max(r,e.y+e.height))}),s._updateStyles(r+10)},this.opts.float,this.opts.height);if(this.opts.auto){var c=[],h=this;this.container.children("."+this.opts.itemClass+":not(."+this.opts.placeholderClass+")").each(function(t,n){n=e(n),c.push({el:n,i:parseInt(n.attr("data-gs-x"))+parseInt(n.attr("data-gs-y"))*h.opts.width})}),t.chain(c).sortBy(function(e){return e.i}).each(function(e){s._prepareElement(e.el)}).value()}this.setAnimation(this.opts.animate),this.placeholder=e('<div class="'+this.opts.placeholderClass+" "+this.opts.itemClass+'">'+'<div class="placeholder-content">'+this.opts.placeholderText+"</div></div>").hide(),this._updateContainerHeight(),this._updateHeightsOnResize=t.throttle(function(){s.cellHeight(s.cellWidth(),!1)},100),this.onResizeHandler=function(){f&&s._updateHeightsOnResize();if(s._isOneColumnMode()){if(u)return;s.container.addClass(s.opts.oneColumnModeClass),u=!0,s.grid._sortNodes(),t.each(s.grid.nodes,function(e){s.container.append(e.el);if(s.opts.staticGrid)return;(e.noMove||s.opts.disableDrag)&&s.dd.draggable(e.el,"disable"),(e.noResize||s.opts.disableResize)&&s.dd.resizable(e.el,"disable"),e.el.trigger("resize")})}else{if(!u)return;s.container.removeClass(s.opts.oneColumnModeClass),u=!1;if(s.opts.staticGrid)return;t.each(s.grid.nodes,function(e){!e.noMove&&!s.opts.disableDrag&&s.dd.draggable(e.el,"enable"),!e.noResize&&!s.opts.disableResize&&s.dd.resizable(e.el,"enable"),e.el.trigger("resize")})}},e(window).resize(this.onResizeHandler),this.onResizeHandler();if(!s.opts.staticGrid&&typeof s.opts.removable=="string"){var p=e(s.opts.removable);this.dd.isDroppable(p)||this.dd.droppable(p,{accept:"."+s.opts.itemClass}),this.dd.on(p,"dropover",function(t,n){var r=e(n.draggable),i=r.data("_gridstack_node");if(i._grid!==s)return;s._setupRemovingTimeout(r)}).on(p,"dropout",function(t,n){var r=e(n.draggable),i=r.data("_gridstack_node");if(i._grid!==s)return;s._clearRemovingTimeout(r)})}if(!s.opts.staticGrid&&s.opts.acceptWidgets){var d=null,v=function(e,t){var n=d,r=n.data("_gridstack_node"),i=s.getCellFromPixel(t.offset,!0),o=Math.max(0,i.x),u=Math.max(0,i.y);if(!r._added)r._added=!0,r.el=n,r.x=o,r.y=u,s.grid.cleanNodes(),s.grid.beginUpdate(r),s.grid.addNode(r),s.container.append(s.placeholder),s.placeholder.attr("data-gs-x",r.x).attr("data-gs-y",r.y).attr("data-gs-width",r.width).attr("data-gs-height",r.height).show(),r.el=s.placeholder,r._beforeDragX=r.x,r._beforeDragY=r.y,s._updateContainerHeight();else{if(!s.grid.canMoveNode(r,o,u))return;s.grid.moveNode(r,o,u),s._updateContainerHeight()}};this.dd.droppable(s.container,{accept:function(t){t=e(t);var n=t.data("_gridstack_node");return n&&n._grid===s?!1:t.is(s.opts.acceptWidgets===!0?".grid-stack-item":s.opts.acceptWidgets)}}).on(s.container,"dropover",function(t,n){var r=s.container.offset(),i=e(n.draggable),o=s.cellWidth(),u=s.cellHeight(),a=i.data("_gridstack_node"),f=a?a.width:Math.ceil(i.outerWidth()/o),l=a?a.height:Math.ceil(i.outerHeight()/u);d=i;var c=s.grid._prepareNode({width:f,height:l,_added:!1,_temporary:!0});i.data("_gridstack_node",c),i.data("_gridstack_node_orig",a),i.on("drag",v)}).on(s.container,"dropout",function(t,n){var r=e(n.draggable);r.unbind("drag",v);var i=r.data("_gridstack_node");i.el=null,s.grid.removeNode(i),s.placeholder.detach(),s._updateContainerHeight(),r.data("_gridstack_node",r.data("_gridstack_node_orig"))}).on(s.container,"drop",function(t,n){s.placeholder.detach();var r=e(n.draggable).data("_gridstack_node");r._grid=s;var i=e(n.draggable).clone(!1);i.data("_gridstack_node",r),e(n.draggable).remove(),r.el=i,s.placeholder.hide(),i.attr("data-gs-x",r.x).attr("data-gs-y",r.y).attr("data-gs-width",r.width).attr("data-gs-height",r.height).addClass(s.opts.itemClass).removeAttr("style").enableSelection().removeData("draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled").unbind("drag",v),s.container.append(i),s._prepareElementsByNode(i,r),s._updateContainerHeight(),s._triggerChangeEvent(),s.grid.endUpdate()})}};return f.prototype._triggerChangeEvent=function(e){var t=this.grid.getDirtyNodes(),n=!1,r=[];t&&t.length&&(r.push(t),n=!0),(n||e===!0)&&this.container.trigger("change",r)},f.prototype._triggerAddEvent=function(){this.grid._addedNodes&&this.grid._addedNodes.length>0&&(this.container.trigger("added",[t.map(this.grid._addedNodes,t.clone)]),this.grid._addedNodes=[])},f.prototype._triggerRemoveEvent=function(){this.grid._removedNodes&&this.grid._removedNodes.length>0&&(this.container.trigger("removed",[t.map(this.grid._removedNodes,t.clone)]),this.grid._removedNodes=[])},f.prototype._initStyles=function(){this._stylesId&&s.removeStylesheet(this._stylesId),this._stylesId="gridstack-style-"+(Math.random()*1e5).toFixed(),this._styles=s.createStylesheet(this._stylesId),this._styles!==null&&(this._styles._max=0)},f.prototype._updateStyles=function(e){if(this._styles===null||typeof this._styles=="undefined")return;var t="."+this.opts._class+" ."+this.opts.itemClass,n=this,r;typeof e=="undefined"&&(e=this._styles._max,this._initStyles(),this._updateContainerHeight());if(!this.opts.cellHeight)return;if(this._styles._max!==0&&e<=this._styles._max)return;!this.opts.verticalMargin||this.opts.cellHeightUnit===this.opts.verticalMarginUnit?r=function(e,t){return n.opts.cellHeight*e+n.opts.verticalMargin*t+n.opts.cellHeightUnit}:r=function(e,t){return!e||!t?n.opts.cellHeight*e+n.opts.verticalMargin*t+n.opts.cellHeightUnit:"calc("+(n.opts.cellHeight*e+n.opts.cellHeightUnit)+" + "+(n.opts.verticalMargin*t+n.opts.verticalMarginUnit)+")"},this._styles._max===0&&s.insertCSSRule(this._styles,t,"min-height: "+r(1,0)+";",0);if(e>this._styles._max){for(var i=this._styles._max;i<e;++i)s.insertCSSRule(this._styles,t+'[data-gs-height="'+(i+1)+'"]',"height: "+r(i+1,i)+";",i),s.insertCSSRule(this._styles,t+'[data-gs-min-height="'+(i+1)+'"]',"min-height: "+r(i+1,i)+";",i),s.insertCSSRule(this._styles,t+'[data-gs-max-height="'+(i+1)+'"]',"max-height: "+r(i+1,i)+";",i),s.insertCSSRule(this._styles,t+'[data-gs-y="'+i+'"]',"top: "+r(i,i)+";",i);this._styles._max=e}},f.prototype._updateContainerHeight=function(){if(this.grid._updateCounter)return;var e=this.grid.getGridHeight();this.container.attr("data-gs-current-height",e);if(!this.opts.cellHeight)return;this.opts.verticalMargin?this.opts.cellHeightUnit===this.opts.verticalMarginUnit?this.container.css("height",e*(this.opts.cellHeight+this.opts.verticalMargin)-this.opts.verticalMargin+this.opts.cellHeightUnit):this.container.css("height","calc("+(e*this.opts.cellHeight+this.opts.cellHeightUnit)+" + "+(e*(this.opts.verticalMargin-1)+this.opts.verticalMarginUnit)+")"):this.container.css("height",e*this.opts.cellHeight+this.opts.cellHeightUnit)},f.prototype._isOneColumnMode=function(){return(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=this.opts.minWidth},f.prototype._setupRemovingTimeout=function(t){var n=this,r=e(t).data("_gridstack_node");if(r._removeTimeout||!n.opts.removable)return;r._removeTimeout=setTimeout(function(){t.addClass("grid-stack-item-removing"),r._isAboutToRemove=!0},n.opts.removeTimeout)},f.prototype._clearRemovingTimeout=function(t){var n=e(t).data("_gridstack_node");if(!n._removeTimeout)return;clearTimeout(n._removeTimeout),n._removeTimeout=null,t.removeClass("grid-stack-item-removing"),n._isAboutToRemove=!1},f.prototype._prepareElementsByNode=function(t,n){if(typeof e.ui=="undefined")return;var r=this,i,s,o=function(e,o){var u=Math.round(o.position.left/i),a=Math.floor((o.position.top+s/2)/s),f,l;e.type!="drag"&&(f=Math.round(o.size.width/i),l=Math.round(o.size.height/s));if(e.type=="drag")u<0||u>=r.grid.width||a<0?(r.opts.removable===!0&&r._setupRemovingTimeout(t),u=n._beforeDragX,a=n._beforeDragY,r.placeholder.detach(),r.placeholder.hide(),r.grid.removeNode(n),r._updateContainerHeight(),n._temporaryRemoved=!0):(r._clearRemovingTimeout(t),n._temporaryRemoved&&(r.grid.addNode(n),r.placeholder.attr("data-gs-x",u).attr("data-gs-y",a).attr("data-gs-width",f).attr("data-gs-height",l).show(),r.container.append(r.placeholder),n.el=r.placeholder,n._temporaryRemoved=!1));else if(e.type=="resize"&&u<0)return;var c=typeof f!="undefined"?f:n.lastTriedWidth,h=typeof l!="undefined"?l:n.lastTriedHeight;if(!r.grid.canMoveNode(n,u,a,f,l)||n.lastTriedX===u&&n.lastTriedY===a&&n.lastTriedWidth===c&&n.lastTriedHeight===h)return;n.lastTriedX=u,n.lastTriedY=a,n.lastTriedWidth=f,n.lastTriedHeight=l,r.grid.moveNode(n,u,a,f,l),r._updateContainerHeight()},u=function(o,u){r.container.append(r.placeholder);var a=e(this);r.grid.cleanNodes(),r.grid.beginUpdate(n),i=r.cellWidth();var f=Math.ceil(a.outerHeight()/a.attr("data-gs-height"));s=r.container.height()/parseInt(r.container.attr("data-gs-current-height")),r.placeholder.attr("data-gs-x",a.attr("data-gs-x")).attr("data-gs-y",a.attr("data-gs-y")).attr("data-gs-width",a.attr("data-gs-width")).attr("data-gs-height",a.attr("data-gs-height")).show(),n.el=r.placeholder,n._beforeDragX=n.x,n._beforeDragY=n.y,r.dd.resizable(t,"option","minWidth",i*(n.minWidth||1)),r.dd.resizable(t,"option","minHeight",f*(n.minHeight||1)),o.type=="resizestart"&&a.find(".grid-stack-item").trigger("resizestart")},a=function(i,s){var o=e(this);if(!o.data("_gridstack_node"))return;var u=!1;r.placeholder.detach(),n.el=o,r.placeholder.hide(),n._isAboutToRemove?(u=!0,t.removeData("_gridstack_node"),t.remove()):(r._clearRemovingTimeout(t),n._temporaryRemoved?(o.attr("data-gs-x",n._beforeDragX).attr("data-gs-y",n._beforeDragY).attr("data-gs-width",n.width).attr("data-gs-height",n.height).removeAttr("style"),n.x=n._beforeDragX,n.y=n._beforeDragY,r.grid.addNode(n)):o.attr("data-gs-x",n.x).attr("data-gs-y",n.y).attr("data-gs-width",n.width).attr("data-gs-height",n.height).removeAttr("style")),r._updateContainerHeight(),r._triggerChangeEvent(u),r.grid.endUpdate();var a=o.find(".grid-stack");a.length&&i.type=="resizestop"&&(a.each(function(t,n){e(n).data("gridstack").onResizeHandler()}),o.find(".grid-stack-item").trigger("resizestop"))};this.dd.draggable(t,{start:u,stop:a,drag:o}).resizable(t,{start:u,stop:a,resize:o}),(n.noMove||this._isOneColumnMode()||this.opts.disableDrag)&&this.dd.draggable(t,"disable"),(n.noResize||this._isOneColumnMode()||this.opts.disableResize)&&this.dd.resizable(t,"disable"),t.attr("data-gs-locked",n.locked?"yes":null)},f.prototype._prepareElement=function(t,n){n=typeof n!="undefined"?n:!1;var r=this;t=e(t),t.addClass(this.opts.itemClass);var i=r.grid.addNode({x:t.attr("data-gs-x"),y:t.attr("data-gs-y"),width:t.attr("data-gs-width"),height:t.attr("data-gs-height"),maxWidth:t.attr("data-gs-max-width"),minWidth:t.attr("data-gs-min-width"),maxHeight:t.attr("data-gs-max-height"),minHeight:t.attr("data-gs-min-height"),autoPosition:s.toBool(t.attr("data-gs-auto-position")),noResize:s.toBool(t.attr("data-gs-no-resize")),noMove:s.toBool(t.attr("data-gs-no-move")),locked:s.toBool(t.attr("data-gs-locked")),el:t,id:t.attr("data-gs-id"),_grid:r},n);t.data("_gridstack_node",i),this._prepareElementsByNode(t,i)},f.prototype.setAnimation=function(e){e?this.container.addClass("grid-stack-animate"):this.container.removeClass("grid-stack-animate")},f.prototype.addWidget=function(t,n,r,i,s,o,u,a,f,l,c){return t=e(t),typeof n!="undefined"&&t.attr("data-gs-x",n),typeof r!="undefined"&&t.attr("data-gs-y",r),typeof i!="undefined"&&t.attr("data-gs-width",i),typeof s!="undefined"&&t.attr("data-gs-height",s),typeof o!="undefined"&&t.attr("data-gs-auto-position",o?"yes":null),typeof u!="undefined"&&t.attr("data-gs-min-width",u),typeof a!="undefined"&&t.attr("data-gs-max-width",a),typeof f!="undefined"&&t.attr("data-gs-min-height",f),typeof l!="undefined"&&t.attr("data-gs-max-height",l),typeof c!="undefined"&&t.attr("data-gs-id",c),this.container.append(t),this._prepareElement(t,!0),this._triggerAddEvent(),this._updateContainerHeight(),this._triggerChangeEvent(!0),t},f.prototype.makeWidget=function(t){return t=e(t),this._prepareElement(t,!0),this._triggerAddEvent(),this._updateContainerHeight(),this._triggerChangeEvent(!0),t},f.prototype.willItFit=function(e,t,n,r,i){var s={x:e,y:t,width:n,height:r,autoPosition:i};return this.grid.canBePlacedWithRespectToHeight(s)},f.prototype.removeWidget=function(t,n){n=typeof n=="undefined"?!0:n,t=e(t);var r=t.data("_gridstack_node");r||(r=this.grid.getNodeDataByDOMEl(t)),this.grid.removeNode(r,n),t.removeData("_gridstack_node"),this._updateContainerHeight(),n&&t.remove(),this._triggerChangeEvent(!0),this._triggerRemoveEvent()},f.prototype.removeAll=function(e){t.each(this.grid.nodes,t.bind(function(t){this.removeWidget(t.el,e)},this)),this.grid.nodes=[],this._updateContainerHeight()},f.prototype.destroy=function(t){e(window).off("resize",this.onResizeHandler),this.disable(),typeof t!="undefined"&&!t?(this.removeAll(!1),this.container.removeData("gridstack")):this.container.remove(),s.removeStylesheet(this._stylesId),this.grid&&(this.grid=null)},f.prototype.resizable=function(t,n){var r=this;return t=e(t),t.each(function(t,i){i=e(i);var s=i.data("_gridstack_node");if(typeof s=="undefined"||s===null||typeof e.ui=="undefined")return;s.noResize=!n&&!0,s.noResize||r._isOneColumnMode()?r.dd.resizable(i,"disable"):r.dd.resizable(i,"enable")}),this},f.prototype.movable=function(t,n){var r=this;return t=e(t),t.each(function(t,i){i=e(i);var s=i.data("_gridstack_node");if(typeof s=="undefined"||s===null||typeof e.ui=="undefined")return;s.noMove=!n&&!0,s.noMove||r._isOneColumnMode()?(r.dd.draggable(i,"disable"),i.removeClass("ui-draggable-handle")):(r.dd.draggable(i,"enable"),i.addClass("ui-draggable-handle"))}),this},f.prototype.enableMove=function(e,t){this.movable(this.container.children("."+this.opts.itemClass),e),t&&(this.opts.disableDrag=!e)},f.prototype.enableResize=function(e,t){this.resizable(this.container.children("."+this.opts.itemClass),e),t&&(this.opts.disableResize=!e)},f.prototype.disable=function(){this.movable(this.container.children("."+this.opts.itemClass),!1),this.resizable(this.container.children("."+this.opts.itemClass),!1),this.container.trigger("disable")},f.prototype.enable=function(){this.movable(this.container.children("."+this.opts.itemClass),!0),this.resizable(this.container.children("."+this.opts.itemClass),!0),this.container.trigger("enable")},f.prototype.locked=function(t,n){return t=e(t),t.each(function(t,r){r=e(r);var i=r.data("_gridstack_node");if(typeof i=="undefined"||i===null)return;i.locked=n||!1,r.attr("data-gs-locked",i.locked?"yes":null)}),this},f.prototype.maxHeight=function(t,n){return t=e(t),t.each(function(t,r){r=e(r);var i=r.data("_gridstack_node");if(typeof i=="undefined"||i===null)return;isNaN(n)||(i.maxHeight=n||!1,r.attr("data-gs-max-height",n))}),this},f.prototype.minHeight=function(t,n){return t=e(t),t.each(function(t,r){r=e(r);var i=r.data("_gridstack_node");if(typeof i=="undefined"||i===null)return;isNaN(n)||(i.minHeight=n||!1,r.attr("data-gs-min-height",n))}),this},f.prototype.maxWidth=function(t,n){return t=e(t),t.each(function(t,r){r=e(r);var i=r.data("_gridstack_node");if(typeof i=="undefined"||i===null)return;isNaN(n)||(i.maxWidth=n||!1,r.attr("data-gs-max-width",n))}),this},f.prototype.minWidth=function(t,n){return t=e(t),t.each(function(t,r){r=e(r);var i=r.data("_gridstack_node");if(typeof i=="undefined"||i===null)return;isNaN(n)||(i.minWidth=n||!1,r.attr("data-gs-min-width",n))}),this},f.prototype._updateElement=function(t,n){t=e(t).first();var r=t.data("_gridstack_node");if(typeof r=="undefined"||r===null)return;var i=this;i.grid.cleanNodes(),i.grid.beginUpdate(r),n.call(this,t,r),i._updateContainerHeight(),i._triggerChangeEvent(),i.grid.endUpdate()},f.prototype.resize=function(e,t,n){this._updateElement(e,function(e,r){t=t!==null&&typeof t!="undefined"?t:r.width,n=n!==null&&typeof n!="undefined"?n:r.height,this.grid.moveNode(r,r.x,r.y,t,n)})},f.prototype.move=function(e,t,n){this._updateElement(e,function(e,r){t=t!==null&&typeof t!="undefined"?t:r.x,n=n!==null&&typeof n!="undefined"?n:r.y,this.grid.moveNode(r,t,n,r.width,r.height)})},f.prototype.update=function(e,t,n,r,i){this._updateElement(e,function(e,s){t=t!==null&&typeof t!="undefined"?t:s.x,n=n!==null&&typeof n!="undefined"?n:s.y,r=r!==null&&typeof r!="undefined"?r:s.width,i=i!==null&&typeof i!="undefined"?i:s.height,this.grid.moveNode(s,t,n,r,i)})},f.prototype.verticalMargin=function(e,t){if(typeof e=="undefined")return this.opts.verticalMargin;var n=s.parseHeight(e);if(this.opts.verticalMarginUnit===n.unit&&this.opts.height===n.height)return;this.opts.verticalMarginUnit=n.unit,this.opts.verticalMargin=n.height,t||this._updateStyles()},f.prototype.cellHeight=function(e,t){if(typeof e=="undefined"){if(this.opts.cellHeight)return this.opts.cellHeight;var n=this.container.children("."+this.opts.itemClass).first();return Math.ceil(n.outerHeight()/n.attr("data-gs-height"))}var r=s.parseHeight(e);if(this.opts.cellHeightUnit===r.heightUnit&&this.opts.height===r.height)return;this.opts.cellHeightUnit=r.unit,this.opts.cellHeight=r.height,t||this._updateStyles()},f.prototype.cellWidth=function(){return Math.round(this.container.outerWidth()/this.opts.width)},f.prototype.getCellFromPixel=function(e,t){var n=typeof t!="undefined"&&t?this.container.offset():this.container.position(),r=e.left-n.left,i=e.top-n.top,s=Math.floor(this.container.width()/this.opts.width),o=Math.floor(this.container.height()/parseInt(this.container.attr("data-gs-current-height")));return{x:Math.floor(r/s),y:Math.floor(i/o)}},f.prototype.batchUpdate=function(){this.grid.batchUpdate()},f.prototype.commit=function(){this.grid.commit(),this._updateContainerHeight()},f.prototype.isAreaEmpty=function(e,t,n,r){return this.grid.isAreaEmpty(e,t,n,r)},f.prototype.setStatic=function(e){this.opts.staticGrid=e===!0,this.enableMove(!e),this.enableResize(!e),this._setStaticClass()},f.prototype._setStaticClass=function(){var e="grid-stack-static";this.opts.staticGrid===!0?this.container.addClass(e):this.container.removeClass(e)},f.prototype._updateNodeWidths=function(e,t){this.grid._sortNodes(),this.grid.batchUpdate();var n={};for(var r=0;r<this.grid.nodes.length;r++)n=this.grid.nodes[r],this.update(n.el,Math.round(n.x*t/e),undefined,Math.round(n.width*t/e),undefined);this.grid.commit()},f.prototype.setGridWidth=function(e,t){this.container.removeClass("grid-stack-"+this.opts.width),t!==!0&&this._updateNodeWidths(this.opts.width,e),this.opts.width=e,this.grid.width=e,this.container.addClass("grid-stack-"+e)},a.prototype.batch_update=r(a.prototype.batchUpdate),a.prototype._fix_collisions=r(a.prototype._fixCollisions,"_fix_collisions","_fixCollisions"),a.prototype.is_area_empty=r(a.prototype.isAreaEmpty,"is_area_empty","isAreaEmpty"),a.prototype._sort_nodes=r(a.prototype._sortNodes,"_sort_nodes","_sortNodes"),a.prototype._pack_nodes=r(a.prototype._packNodes,"_pack_nodes","_packNodes"),a.prototype._prepare_node=r(a.prototype._prepareNode,"_prepare_node","_prepareNode"),a.prototype.clean_nodes=r(a.prototype.cleanNodes,"clean_nodes","cleanNodes"),a.prototype.get_dirty_nodes=r(a.prototype.getDirtyNodes,"get_dirty_nodes","getDirtyNodes"),a.prototype.add_node=r(a.prototype.addNode,"add_node","addNode, "),a.prototype.remove_node=r(a.prototype.removeNode,"remove_node","removeNode"),a.prototype.can_move_node=r(a.prototype.canMoveNode,"can_move_node","canMoveNode"),a.prototype.move_node=r(a.prototype.moveNode,"move_node","moveNode"),a.prototype.get_grid_height=r(a.prototype.getGridHeight,"get_grid_height","getGridHeight"),a.prototype.begin_update=r(a.prototype.beginUpdate,"begin_update","beginUpdate"),a.prototype.end_update=r(a.prototype.endUpdate,"end_update","endUpdate"),a.prototype.can_be_placed_with_respect_to_height=r(a.prototype.canBePlacedWithRespectToHeight,"can_be_placed_with_respect_to_height","canBePlacedWithRespectToHeight"),f.prototype._trigger_change_event=r(f.prototype._triggerChangeEvent,"_trigger_change_event","_triggerChangeEvent"),f.prototype._init_styles=r(f.prototype._initStyles,"_init_styles","_initStyles"),f.prototype._update_styles=r(f.prototype._updateStyles,"_update_styles","_updateStyles"),f.prototype._update_container_height=r(f.prototype._updateContainerHeight,"_update_container_height","_updateContainerHeight"),f.prototype._is_one_column_mode=r(f.prototype._isOneColumnMode,"_is_one_column_mode","_isOneColumnMode"),f.prototype._prepare_element=r(f.prototype._prepareElement,"_prepare_element","_prepareElement"),f.prototype.set_animation=r(f.prototype.setAnimation,"set_animation","setAnimation"),f.prototype.add_widget=r(f.prototype.addWidget,"add_widget","addWidget"),f.prototype.make_widget=r(f.prototype.makeWidget,"make_widget","makeWidget"),f.prototype.will_it_fit=r(f.prototype.willItFit,"will_it_fit","willItFit"),f.prototype.remove_widget=r(f.prototype.removeWidget,"remove_widget","removeWidget"),f.prototype.remove_all=r(f.prototype.removeAll,"remove_all","removeAll"),f.prototype.min_height=r(f.prototype.minHeight,"min_height","minHeight"),f.prototype.min_width=r(f.prototype.minWidth,"min_width","minWidth"),f.prototype._update_element=r(f.prototype._updateElement,"_update_element","_updateElement"),f.prototype.cell_height=r(f.prototype.cellHeight,"cell_height","cellHeight"),f.prototype.cell_width=r(f.prototype.cellWidth,"cell_width","cellWidth"),f.prototype.get_cell_from_pixel=r(f.prototype.getCellFromPixel,"get_cell_from_pixel","getCellFromPixel"),f.prototype.batch_update=r(f.prototype.batchUpdate,"batch_update","batchUpdate"),f.prototype.is_area_empty=r(f.prototype.isAreaEmpty,"is_area_empty","isAreaEmpty"),f.prototype.set_static=r(f.prototype.setStatic,"set_static","setStatic"),f.prototype._set_static_class=r(f.prototype._setStaticClass,"_set_static_class","_setStaticClass"),n.GridStackUI=f,n.GridStackUI.Utils=s,n.GridStackUI.Engine=a,n.GridStackUI.GridStackDragDropPlugin=o,e.fn.gridstack=function(t){return this.each(function(){var n=e(this);n.data("gridstack")||n.data("gridstack",new f(this,t))})},n.GridStackUI}),function(e,t){typeof define=="function"&&define.amd?define("fullscreen",["jquery"],function(e){return t(e)}):typeof exports=="object"?t(require("jquery")):t(e.jQuery)}(this,function(e){function t(e){return typeof e!="undefined"}function n(t,n,r){var i=function(){};i.prototype=n.prototype,t.prototype=new i,t.prototype.constructor=t,n.prototype.constructor=n,t._super=n.prototype,r&&e.extend(t.prototype,r)}function s(e,n){var s;typeof e=="string"&&(n=e,e=document);for(var o=0;o<r.length;++o){n=n.replace(r[o][0],r[o][1]);for(var u=0;u<i.length;++u){s=i[u],s+=u===0?n:n.charAt(0).toUpperCase()+n.substr(1);if(t(e[s]))return e[s]}}return void 0}var r=[["",""],["exit","cancel"],["screen","Screen"]],i=["","o","ms","moz","webkit","webkitCurrent"],o=navigator.userAgent,u=s("fullscreenEnabled"),a=o.match(/Android.*Chrome\/(\d+)\./),f=!!a,l,c;f&&(c=parseInt(a[1]));var h=(!f||c>37)&&t(s("fullscreenElement"))&&(!t(u)||u===!0),p=e.fn.jquery.split("."),d=parseInt(p[0])<2&&parseInt(p[1])<7,v=function(){this.__options=null,this._fullScreenElement=null,this.__savedStyles={}};v.prototype={"native":s,_DEFAULT_OPTIONS:{styles:{boxSizing:"border-box",MozBoxSizing:"border-box",WebkitBoxSizing:"border-box"},toggleClass:null},__documentOverflow:"",__htmlOverflow:"",_preventDocumentScroll:function(){this.__documentOverflow=document.body.style.overflow,this.__htmlOverflow=document.documentElement.style.overflow,e(this._fullScreenElement).is("body, html")||e("body, html").css("overflow","hidden")},_allowDocumentScroll:function(){document.body.style.overflow=this.__documentOverflow,document.documentElement.style.overflow=this.__htmlOverflow},_fullScreenChange:function(){if(!this.__options)return;this.isFullScreen()?(this._preventDocumentScroll(),this._triggerEvents()):(this._allowDocumentScroll(),this._revertStyles(),this._triggerEvents(),this._fullScreenElement=null)},_fullScreenError:function(t){if(!this.__options)return;this._revertStyles(),this._fullScreenElement=null,t&&e(document).trigger("fscreenerror",[t])},_triggerEvents:function(){e(this._fullScreenElement).trigger(this.isFullScreen()?"fscreenopen":"fscreenclose"),e(document).trigger("fscreenchange",[this.isFullScreen(),this._fullScreenElement])},_saveAndApplyStyles:function(){var t=e(this._fullScreenElement);this.__savedStyles={};for(var n in this.__options.styles)this.__savedStyles[n]=this._fullScreenElement.style[n],this._fullScreenElement.style[n]=this.__options.styles[n];t.is("body")&&(document.documentElement.style.overflow=this.__options.styles.overflow),this.__options.toggleClass&&t.addClass(this.__options.toggleClass)},_revertStyles:function(){var t=e(this._fullScreenElement);for(var n in this.__options.styles)this._fullScreenElement.style[n]=this.__savedStyles[n];t.is("body")&&(document.documentElement.style.overflow=this.__savedStyles.overflow),this.__options.toggleClass&&t.removeClass(this.__options.toggleClass)},open:function(t,n){if(t===this._fullScreenElement)return;this.isFullScreen()&&this.exit(),this._fullScreenElement=t,this.__options=e.extend(!0,{},this._DEFAULT_OPTIONS,n),this._saveAndApplyStyles()},exit:null,isFullScreen:null,isNativelySupported:function(){return h}};var m=function(){m._super.constructor.apply(this,arguments),this.exit=e.proxy(s("exitFullscreen"),document),this._DEFAULT_OPTIONS=e.extend(!0,{},this._DEFAULT_OPTIONS,{styles:{width:"100%",height:"100%"}}),e(document).bind(this._prefixedString("fullscreenchange")+" MSFullscreenChange",e.proxy(this._fullScreenChange,this)).bind(this._prefixedString("fullscreenerror")+" MSFullscreenError",e.proxy(this._fullScreenError,this))};n(m,v,{VENDOR_PREFIXES:["","o","moz","webkit"],_prefixedString:function(t){return e.map(this.VENDOR_PREFIXES,function(e){return e+t}).join(" ")},open:function(e,t){m._super.open.apply(this,arguments);var n=s(e,"requestFullscreen");n.call(e)},exit:e.noop,isFullScreen:function(){return s("fullscreenElement")!==null},element:function(){return s("fullscreenElement")}});var g=function(){g._super.constructor.apply(this,arguments),this._DEFAULT_OPTIONS=e.extend({},this._DEFAULT_OPTIONS,{styles:{position:"fixed",zIndex:"2147483647",left:0,top:0,bottom:0,right:0}}),this.__delegateKeydownHandler()};return n(g,v,{__isFullScreen:!1,__delegateKeydownHandler:function(){var t=e(document);t.delegate("*","keydown.fullscreen",e.proxy(this.__keydownHandler,this));var n=d?t.data("events"):e._data(document).events,r=n.keydown;d?n.live.unshift(n.live.pop()):r.splice(0,0,r.splice(r.delegateCount-1,1)[0])},__keydownHandler:function(e){return this.isFullScreen()&&e.which===27?(this.exit(),!1):!0},_revertStyles:function(){g._super._revertStyles.apply(this,arguments),this._fullScreenElement.offsetHeight},open:function(e){g._super.open.apply(this,arguments),this.__isFullScreen=!0,this._fullScreenChange()},exit:function(){if(!this.__isFullScreen)return;this.__isFullScreen=!1,this._fullScreenChange()},isFullScreen:function(){return this.__isFullScreen},element:function(){return this.__isFullScreen?this._fullScreenElement:null}}),e.fullscreen=h?new m:new g,e.fn.fullscreen=function(t){var n=this[0];return t=e.extend({toggleClass:null,overflow:"hidden"},t),t.styles={overflow:t.overflow},delete t.overflow,n&&e.fullscreen.open(n,t),this},e.fullscreen}),function(e){typeof define=="function"&&define.amd?define("jaddons",["jquery"],e):e(jQuery)}(function(e){e.fn.ForceNumericOnly=function(){return this.each(function(){e(this).keydown(function(e){if(e.keyCode==46||e.keyCode==8||e.keyCode==9||e.keyCode==27||e.keyCode==13||e.keyCode==65&&e.ctrlKey===!0||e.keyCode>=35&&e.keyCode<=39)return;(e.shiftKey||(e.keyCode<48||e.keyCode>57)&&(e.keyCode<96||e.keyCode>105))&&e.preventDefault()})})},e.fn.InvertColor=function(e){var t=e.split("#").join("");return t=t.substring(1),t=parseInt(t,16),t=16777215^t,t=t.toString(16),t=("000000"+t).slice(-6),t="#"+t,t},e.fn.reduceColor=function(e){e=e.split("#").join("");var t=130,n=90,r=e.substring(1,3),i=e.substring(3,5),s=e.substring(5,7),o={R:parseInt(r,16),G:parseInt(i,16),B:parseInt(s,16)},u=o.R*.299+o.G*.587+o.B*.114;return 255-u<t&&255-u>n?"#000000":"#ffffff"};var t=e({});e.each({trigger:"publish",on:"subscribe",off:"unsubscribe"},function(n,r){e[r]=function(){t[n].apply(t,arguments)}})}),define("dashboard/dashboard-view",["require","exports","module","jquery","backbone","core/components","util","widgets","app","dataUrlResolver","storageService","widgetWizard","coreService","widget/widgetsConfig","localization","defectType/SingletonDefectTypeCollection","modals/modalConfirm","gridstack","fullscreen","jaddons"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("core/components"),o=e("util"),u=e("widgets"),a=e("app"),f=e("dataUrlResolver"),l=e("storageService"),c=e("widgetWizard"),h=e("coreService"),p=e("widget/widgetsConfig"),d=e("localization"),v=e("defectType/SingletonDefectTypeCollection"),m=e("modals/modalConfirm");e("gridstack"),e("fullscreen"),e("jaddons");var g=a.getInstance(),y=function(){var e=r("#dynamic-content"),t=r(".no-dashboards .warning");r.fullscreen.isFullScreen()?e.find(".widget-item").length==0&&r("#clickToAddWidget",t).hide():r("#clickToAddWidget",t).show()},b=i.Model.extend({defaults:{name:"",id:"",widgets:[]},initialize:function(){this.url=f.dashboardById(this.get("id"))},addWidget:function(e,t){var n=this,r={addWidget:e};this.updateDashboard(r,function(){_.isFunction(t)&&t()},n)},deleteWidget:function(e,t){var n=this;this.updateDashboard({deleteWidget:e},function(){var i=_.reject(n.get("widgets"),function(t){return t.widgetId==e});n.set("widgets",i),_.isFunction(t)&&t(),i.length&&r.publish("scroll:greater:than:100")},n)},updateName:function(e,t){var n=this;this.updateDashboard(e,function(){_.isFunction(t)&&t()},n)},updateWidgets:function(e,t){var n=this,r=[];_.each(e,function(e){var t=e.el.attr("id"),n=_.find(this.get("widgets"),function(e){return e.widgetId===t});n&&(n.widgetSize||(n.widgetSize=[]),n.widgetPosition||(n.widgetPosition=[]),n.widgetPosition[0]=e.x,n.widgetPosition[1]=e.y,n.widgetSize[0]=e.width,n.widgetSize[1]=e.height,r.push(n))},this),this.updateDashboard({updateWidgets:r},function(){_.isFunction(t)&&t()},n)},updateDashboard:function(e,t,n){h.updateDashboard(this.get("id"),e).done(function(e){EQCSS.apply(),_.isFunction(t)&&t()}).fail(function(e){o.ajaxFailMessenger(e,"updateDashboard")})}}),w=i.Collection.extend({model:b}),E=i.View.extend({initialize:function(e){this.contextName=e.contextName,this.context=e.context,this.project=g.project,this.subContext=e.subContext,this.navigationInfo=new k({current:e.subContext}),this.listenTo(this.navigationInfo,"load::dashboardById",this.performRender)},render:function(){var e=this;return this.defectTypes=new v,this.navigationInfo.loadDashboards().done(function(){e.defectTypes.ready.done(function(){e.performRender()})}),this},performRender:function(){var e=this;this.navigationInfo=this.navigationInfo||new k({current:e.subContext});var t=this.navigationInfo&&this.navigationInfo.getCurrentDashboard();t?(this.createHeader(t),this.createBody(t)):this.noDashboards()},createHeader:function(e){this.$header&&this.$header.destroy(),this.$header=(new S({header:this.context.getMainView().$header,context:this.context,project:this.project,model:e,navigationInfo:this.navigationInfo})).render(),this.$header.$el.css("padding-top",0),this.$header.on("onOpenDashboard",this.update,this),this.$header.on("onUpdateDashboard",this.update,this),this.$header.on("onAddDashboard",this.addDashboard,this),this.$header.on("onRemoveDashboard",this.removeDashboard,this),this.$header.on("onNoDashboards",this.noDashboards,this),this.$header.on("onUpdated",this.reRender,this)},createBody:function(e){this.$body&&this.$body.destroy(),this.$body=(new x({body:this.context.getMainView().$body,context:this.context,project:this.project,model:e,navigationInfo:this.navigationInfo})).render(),this.$body.on("addWidget",this.$header.showAddWidget,this)},update:function(e){var t=this;if(e.subContext)this.navigationInfo.changeActive(e.subContext).done(function(){t.reRender()}).fail(function(e){t.reRender()});else{var n=this.navigationInfo.getCurrentDashboard();n=e[0],t.reRender()}},removeDashboard:function(e){var t=this.navigationInfo.removeDashboard(e);t?this.reRender():(this.noDashboards(),g.router.navigate(f.redirectToDashboard(),{trigger:!1}))},reRender:function(){var e=this.navigationInfo.getCurrentDashboard();this.$header&&this.$header.update(e),this.$body&&this.$body.update(e)},addDashboard:function(e,t){var n=this;this.navigationInfo.changeActive(e,t).done(function(){n.reRender()})},noDashboards:function(){this.createHeader(),this.createBody()},destroy:function(){this.$header&&this.$header.off().destroy(),this.$body&&this.$body.off().destroy(),this.defectTypes.off("reset"),this.undelegateEvents(),this.unbind(),this.navigationInfo.unbind(),this.navigationInfo=null,l.setDirectLinkDashboard(-1),delete this}}),S=s.BaseView.extend({initialize:function(e){this.$el=e.header,this.project=e.project,this.context=e.context,this.context.parent=this,this.navigationInfo=e.navigationInfo,this.dashboards=this.navigationInfo.getDashboards(),this.currentDashboard=e.model,this.listenTo(this.navigationInfo,"edit::widget",this.openWidgetWizard),this.listenTo(this.navigationInfo,"add::widget",this.openWidgetWizard),this.listenTo(this.navigationInfo,"dashboard::widget::deleted",this.onWidgetDelete)},tpl:"tpl-dashboard-menu-view",notFoundDash:"tpl-dashboard-menu-notfound",tplSettings:"tpl-dashboard-settings-modal",render:function(){var e=this.currentDashboard?this.currentDashboard.toJSON():"";e&&l.getDirectLinkDashboard()=="-1"&&(e.isDirectLinkDashboard=!1);var t={project:this.project,user:g.userModel.toJSON(),currentDashboard:e,dashboards:this.dashboards.toJSON()};return this.$el.html(o.templates(this.tpl,t)),this.validateAddWidgetButton(),this},update:function(e){this.currentDashboard=e,this.render()},events:{"click a.add-widget":"showAddWidget","click a.edit-dashboard":"showSettingsForm","click .dashboard-title a":"showDashboardsList","click a.remove-dashboard":"removeDashboard","click a.fullscreen-dashboard":"openFullscreenDashboard","click .add-new-dashboard":"showAddDashboard"},showAddWidget:function(e){e.preventDefault();if(r(e.currentTarget).hasClass("disabled"))return;this.openWidgetWizard()},openWidgetWizard:function(e){var t={dashboard_id:this.currentDashboard.get("id")};e?(t=_.extend(t,e),t.success_event="refresh::widget"):t.success_event="redirect::to::dashboard",this.widgetWizard&&(this.stopListening(this.widgetWizard),this.stopListening(this.navigationInfo,"redirect::to::dashboard"),this.widgetWizard=null),this.widgetWizard=(new c.WidgetWizard({navigationInfo:this.navigationInfo})).render(t),this.listenTo(this.widgetWizard,"refresh::widget",this.reloadWidget),this.listenTo(this.widgetWizard,"remove::widget",this.removeWidgetSoft),this.listenTo(this.navigationInfo,"redirect::to::dashboard",this.redirectToDashBoard)},removeWidgetSoft:function(e){var t=_.reject(this.currentDashboard.get("widgets"),function(t){return t.widgetId===e}),n=this;this.currentDashboard.updateDashboard({updateWidgets:t},function(){n.currentDashboard.set("widgets",t),n.trigger("onUpdated")})},redirectToDashBoard:function(e){e.owner=g.userModel.get("name"),this.navigationInfo.addDashboard(e),this.navigationInfo.changeActive(e.id),this.trigger("onUpdated")},onWidgetDelete:function(){this.validateAddWidgetButton(),y()},reloadWidget:function(e){this.navigationInfo.trigger("refresh::widget",e)},showAddDashboard:function(e){this.tplAddDashModal=T.prototype.tplAddDashModal,T.prototype.showAddDashboardForm.call(this,e)},validateAddWidgetButton:function(){if(this.currentDashboard){var e=this.navigationInfo.getCurrentDashboard(),t=e.get("widgets"),n=t.length>=g.maxWidgetsOnDashboard,i=n?"add":"remove",s=n?d.dashboard.maxWidgetsAdded:"";r(".add-widget",this.$el)[i+"Class"]("disabled").attr("title",s)}},openFullscreenDashboard:function(e){e.preventDefault();var t=this,n=r("#dynamic-content");r(".fullscreen-close").off("click.fullscreen-close").on("click.fullscreen-close",function(){r.fullscreen.exit()}),r("body").off("fscreenopen").on("fscreenopen",function(){n.removeClass("fullscreen-container"),y(),n.scrollTop()&&r.publish("scroll:greater:than:100")}).off("fscreenclose").on("fscreenclose",function(){_.each(t.context.widgets,function(e){e.charts?_.each(e.charts,function(e){_.isFunction(e)&&e.update()}):e.chart&&_.isFunction(e.chart)&&e.chart.update()}),n.off("scroll"),n.addClass("fullscreen-container"),y(),r("html").css("overflow","visible")}).off("click.fullscreen").on("click.fullscreen",".rp-blue-link-undrl, .text-muted, .cases-view, .pr-grid-defect-link, .rp-link, .rp-ti-badge",function(){r.fullscreen.exit()}).fullscreen({toggleClass:"fullscreen"}),n.off("scroll").scroll(function(){var e={top:n.scrollTop(),height:n.height()};n.scrollTop()>100&&r.publish("scroll:greater:than:100",e)})},showSettingsForm:function(e){e.preventDefault();var t=this.currentDashboard,n=t.get("name"),r=_.filter(this.dashboards.toJSON(),function(e){return e.owner===g.userModel.get("name")&&e.name!==n}),i=new C({context:this.context,model:this.currentDashboard,project:this.project,navigationInfo:this.navigationInfo,mydash:r});i.render()},showDashboardsList:function(e){e.preventDefault(),e.stopPropagation();var t=r(e.target),n=this,i=t.is("a")?t:t.closest("a");i.hasClass("open")?this.list.hide(function(){i.removeClass("open")}):(this.list=new T({container:r("#dynamic-content"),dashboards:this.dashboards,currentDashboard:this.currentDashboard,context:this.context,navigationInfo:this.navigationInfo,project:this.project}),this.list.render(),this.list.show(),i.addClass("open"),r(document).on("click",function(e){r(e.target).closest("div.b-dashboars-list").length||n.list.hide(function(){i.removeClass("open")})}))},removeDashboard:function(e){e.preventDefault();if(r(e.target).closest("li").hasClass("disabled"))return;var t=this,n=new m({headerText:d.dialogHeader.dashboardDelete,bodyText:o.replaceTemplate(d.dialog.dashboardDelete,this.currentDashboard.get("name")),cancelButtonText:d.ui.cancel,okButtonDanger:!0,okButtonText:d.ui.delete,confirmFunction:function(){var e=t.currentDashboard.get("id"),n=t.currentDashboard.get("owner")!==g.userModel.get("name");return h.deleteDashboard(e,n).done(function(){t.trigger("onRemoveDashboard",e),o.ajaxSuccessMessenger("dashboardDelete")}).fail(function(e){o.ajaxFailMessenger(e,"dashboardDelete")})}});n.show()},destroy:function(){this.currentDashboard&&this.currentDashboard.refreshItems&&!_.isEmpty(this.currentDashboard.refreshItems)&&_.each(this.currentDashboard.refreshItems,function(e){clearTimeout(e)}),this.widgetWizard=null,s.BaseView.prototype.destroy.call(this)}}),x=s.BaseView.extend({initialize:function(e){this.context=e.context,this.$el=e.body,this.user=g.userModel,this.project=e.project,this.navigationInfo=e.navigationInfo,this.model=e.model,this.context.widgets=[],this.widgets=[],this.bindCheckWidgetsForLoad=this.checkWidgetsForLoad.bind(this),this.listenTo(this.navigationInfo,"refresh::widgets",this.renderUpdate),this.listenTo(this.navigationInfo,"dashboard::widget::deleted",this.onWidgetDelete),this.listenTo(this.navigationInfo,"failedload::dashboardById",this.renderNoDashboards),p.clear()},update:function(e){this.destroyWidgets(),this.context.widgetsContainer&&this.context.widgetsContainer.empty(),this.model=e,this.renderUpdate()},tpl:"tpl-dashboard-widget",notFoundTpl:"tpl-dashboard-notfound",events:{"click .rb-btn-settings":"addWidget","mouseenter .badge-info":"handleSharedHover","mouseleave .badge-info":"handleSharedHover"},addWidget:function(e){e.preventDefault();if(r(e.currentTarget).hasClass("disabled"))return;this.navigationInfo.trigger("add::widget")},createWidget:function(e){var t=g.userModel,n=this.model.get("widgets"),i=this.navigationInfo,s=r("div.widgets-list",this.$el),o=e,a=o.widgetId,f=o.widgetSize,l=o.widgetPosition,c=f&&!_.isEmpty(f)&&f[1]?f[1]:g.defaultWidgetHeight,h=f&&!_.isEmpty(f)&&f[0]?f[0]:g.defaultWidgetWidth,p=(new u.WidgetView({container:s,id:a,navigationInfo:i,width:h,height:c,top:l[1],left:l[0],context:this.context})).render();this.widgets.push(p);var d=r(".grid-stack",this.$el).data("gridstack");if(d){var s=r("#"+p.$el.attr("id"));d.add_widget(s,l[0],l[1],h,c),EQCSS.apply(),this.model.get("owner")!==t.get("name")&&(d.movable(s,!1),d.resizable(s,!1))}},checkWidgetsForLoad:function(){_.each(this.widgets,function(e){!e.isStartLoad&&this.checkScrollingForWidget(e.id)&&e.loadWidget()},this)},checkScrollingForWidget:function(e){return r(window).outerHeight()+r(window).scrollTop()>=r("#"+e).offset().top-100},renderUpdate:function(){this.render()},render:function(){if(this.model){var e=this.model,t=e.get("widgets"),n=g.userModel,i=this;if(!e.get("owner"))this.$el.html(o.templates(this.notFoundTpl,{deletedShared:!0}));else if(e.get("owner")!==n.get("name")&&!e.get("isShared"))this.$el.html(o.templates(this.notFoundTpl,{notShared:!0}));else{this.$el.html(o.templates(this.tpl,{noShared:e.get("owner")==n.get("name")})),t&&t.length>=20&&r(".btn-addwidget",this.$el).parents("div.btn-group").hide();var s=r("div.widgets-list",this.$el);this.setupGrid();if(!_.isEmpty(t)&&_.isArray(t)){t.sort(function(e,t){var n=e.widgetPosition[1],r=t.widgetPosition[1];return n-r});var u=0,a=t.length;while(u<a&&u<g.maxWidgetsOnDashboard)this.createWidget(t[u++]);this.validateAddWidgetButton(),this.checkWidgetsForLoad(),r.subscribe("scroll:greater:than:100",this.bindCheckWidgetsForLoad)}else this.toggleNoWidgets()}}else{var f={};_.isEmpty(this.navigationInfo.collection.models)?f.no_dashboards=!0:f.notfound=!0,this.renderNoDashboards(f)}return this},renderNoDashboards:function(e){e.errorText&&(/40014/.test(e.errorText)?e.dashboardIsNotShared=!0:/4049/.test(e.errorText)&&(e.notfound=!0)),this.$el.html(o.templates(this.notFoundTpl,e))},setupGrid:function(){var e=this.model,t=r(".grid-stack",this.$el),n={cell_height:g.widgetGridCellHeight,vertical_margin:g.widgetGridVerticalMargin,handle:".drag-handle",widgets:this.context.widgets,draggable:{containment:t,handle:".drag-handle"},resizable:{handles:"se, sw"}};t.gridstack(n),t.on("change",function(t,n){e.updateWidgets(n),EQCSS.apply()}),t.on("resizestart",function(e,t){var n=r(e.target);n.css("visibility","hidden")}),t.on("resizestop",function(e,t){var n=r(e.target);n.css("visibility","visible")})},onWidgetDelete:function(){this.toggleNoWidgets(),this.validateAddWidgetButton(),y()},toggleNoWidgets:function(){var e=this.model.get("widgets"),t=r("div.widgets-list",this.$el),n=r("div.no-widgets",this.$el);_.isEmpty(e)?n.length||(this.model.get("owner")!==g.userModel.get("name")?t.after(o.templates(this.notFoundTpl,{sharedEmpty:!0})):t.after(o.templates(this.notFoundTpl,{noWidgets:!0}))):n.length&&n.remove()},validateAddWidgetButton:function(){var e=this.model.get("widgets"),t=e.length>=g.maxWidgetsOnDashboard,n=t?"add":"remove",i=t?d.dashboard.maxWidgetsAdded:"";r("#addNewWidget",this.$el)[n+"Class"]("disabled").attr("title",i)},handleSharedHover:function(e){var t=r(e.currentTarget),n=t.find(".shared-text");e.type==="mouseenter"?n.stop().fadeIn("fast"):n.stop().fadeOut("fast")},destroyWidgets:function(){var e=this.model;e&&e.refreshItems&&!_.isEmpty(e.refreshItems)&&_.each(e.refreshItems,function(e){clearTimeout(e)}),_.forEach(this.widgets,function(e){e&&e.destroy()}),this.widgets=[]},destroy:function(){r.unsubscribe("scroll:greater:than:100",this.bindCheckWidgetsForLoad),this.destroyWidgets(),this.context.widgetsContainer&&this.context.widgetsContainer.empty(),s.BaseView.prototype.destroy.call(this)}}),T=i.View.extend({initialize:function(e){this.container=e.container,this.context=e.context,this.project=e.project,this.navigationInfo=e.navigationInfo,this.dashboards=e.dashboards,this.currentDashboard=e.currentDashboard,this.shared=[],this.mydash=[],_.each(this.dashboards.toJSON(),function(e){e.owner==g.userModel.get("name")?this.mydash.push(e):this.shared.push(e)},this)},tpl:"tpl-dashboards-list",tplMyDashboards:"tpl-dashboards-list-my",tplShatredDashboards:"tpl-dashboards-list-shared",tplDashItem:"tpl-dashboards-list-item",tplAddDashModal:"tpl-dashboard-addnew-modal",className:"b-dashboars-list",events:{"click .add-new-dashboard":"showAddDashboardForm","click a":"onOpenDashboard","click [data-js-remove-dashboard]":"deleteDeletedByOwnerDashboard","click [data-js-unshared-dashboard]":"deleteDeletedByOwnerDashboard"},deleteDeletedByOwnerDashboard:function(e){e.preventDefault();var t=r(e.currentTarget),n=t.closest("a").attr("id"),i=t.closest("li"),s=t.closest(".columnWidget"),u=this.navigationInfo.getDashboards();return h.deleteDeletedByOwnerDashboard(n).done(function(e){u.remove(u.get(n)),i.remove(),r("li",s).length<2&&s.remove(),o.ajaxSuccessMessenger("dashboardDeletedUnsharedByOwner")}).fail(function(e){o.ajaxFailMessenger(e,"errorDeleteDashboard")}),!1},onOpenDashboard:function(e){var t=r(e.currentTarget);(t.closest("li").hasClass("active")||t.hasClass("disabled"))&&e.preventDefault()},showAddDashboardForm:function(e){e.preventDefault();if(r(e.target).hasClass("disabled"))return;var t=new N({context:this.context,model:this.currentDashboard,project:this.project,navigationInfo:this.navigationInfo,mydash:this.mydash});t.render()},hide:function(e){var t=this;this.$el.stop().animate({height:"0px"},100,function(){e&&e(),t.destroy()})},show:function(){var e=this;this.$el.show(),this.checkMaxDashboards()&&r(".add-new-dashboard",this.$el).addClass("disabled").attr("title",d.dashboard.maxAdded).tooltip({placement:"bottom"}),this.$el.stop().animate({height:r("div.dashboards-container",this.$el).outerHeight()+"px"},100,function(){})},render:function(){return this.$el.css({display:"none",height:"0px"}),this.container.append(this.$el.html(o.templates(this.tpl))),this.renderMyDashboards(),this.renderSharedDashboards(),this},checkMaxDashboards:function(){return this.dashboards.length>=g.maxDashboards},renderMyDashboards:function(){if(this.mydash&&!_.isEmpty(this.mydash)){r("div.dashboards-container",this.$el).append(o.templates(this.tplMyDashboards));var e=0,t=0;_.each(this.mydash,function(n){e++,e%5==0?t=4:e%4==0?t=3:e%3==0?t=2:e%2==0?t=1:t=0,e=e==5?0:e,r("div.my-dashboards-list ul",this.$el).eq(t).append(o.templates(this.tplDashItem,{projectUrl:this.project.projectId,dash:n,active:this.currentDashboard&&n.id==this.currentDashboard.get("id")?!0:!1}))},this)}},parseSharedDashboards:function(e){var t=this,n=l.getDirectLinkDashboard(),r=[];return _.each(e,function(e){var t=_.find(r,function(t){return t.owner==e.owner});if(t&&e.id!=n)t.dashboards.push(e);else{var i=[],s=e.owner?e.owner.capitalizeName():"";e.id!=n&&(i.push(e),r.push({owner:e.owner,name:s,dashboards:i}))}},this),r},renderSharedDashboards:function(){if(this.shared&&!_.isEmpty(this.shared)){var e=this.parseSharedDashboards(this.shared);e.length!=0&&r("div.dashboards-container",this.$el).append(o.templates(this.tplShatredDashboards,{projectUrl:this.project.projectId,activeId:this.currentDashboard?this.currentDashboard.get("id"):"",items:e}))}},destroy:function(){this.unbind(),this.undelegateEvents(),this.remove()}}),N=s.DialogShell.extend({initialize:function(e){e.size="md",s.DialogShell.prototype.initialize.call(this,e),this.headerTxt="createNewDashboard",this.actionTxt="create",this.context=e.context,this.project=e.project,this.model=e.model,this.navigationInfo=e.navigationInfo,this.myDashboards=[],e.mydash&&e.mydash.length&&(this.myDashboards=_.map(e.mydash,function(e){return e.name.toLowerCase()}))},events:function(){return _.extend({},s.DialogShell.prototype.events,{"click a.shared-dashboard":"addSharedDashboard","input #dashboardName":"validate","change #dashboardName":"validate"})},contentBody:"tpl-dashboard-addnew-form",emptyTpl:"tpl-dashboard-form-shared-empty",sharedList:"tpl-dashboard-form-shared-list",render:function(){s.DialogShell.prototype.render.call(this);var e={name:this.model?this.model.get("name"):"",shared:this.model?this.model.get("isShared"):!1,projectName:this.project.projectId,myDash:this.mydash};this.$content.append(o.templates(this.contentBody,e)),this.$dashName=r("#dashboardName",this.$content),this.dashModalScroll=o.setupBaronScroll(r(".borderWidget",this.$content)),this.setupValidator(),this.actionButton=r("#actionBtnDialog",this.$el);var t=this;return r('a[data-toggle="tab"]',this.$content).on("show.bs.tab",function(e){var n=r(e.target),i=n.attr("href").indexOf("create")>=0?"show":"hide";t.actionButton[i]()}),r('a[data-toggle="tab"]',this.$content).on("shown.bs.tab",function(e){o.setupBaronScrollSize(t.dashModalScroll,{maxHeight:300})}),this.getSharedDashboards(),o.switcheryInitialize(this.$content),this.delegateEvents(),this},getSharedDashboards:function(){var e=this;h.getSharedDashboards().done(function(t){r("div.shared-loader",e.$content).hide(),e.renderSharedDashboards(t),r("#shareDashboard",this.$content).hasClass("active")&&o.setupBaronScrollSize(e.dashModalScroll,{maxHeight:300})}).fail(function(e){o.ajaxFailMessenger(e,"getSharedDashboards")})},isDublicateDashboard:function(e){return!!_.find(this.navigationInfo.getDashboards().models,function(t){return t.id==e})},parseSharedData:function(e){var t=[],n=l.getDirectLinkDashboard()||null;return _.each(e,function(e,r){var i=_.find(t,function(t){return t.owner==e.owner}),s=this.isDublicateDashboard(r)?this.isDublicateDashboard(r):r==n,o={id:r,name:e.name,dublicate:s};if(i)i.dashboards.push(o);else{var u=[],a=e.owner.capitalizeName();u.push(o),t.push({owner:e.owner,name:a,shortName:a.getCapitalizedOnly(),dashboards:u})}},this),t},renderSharedDashboards:function(e){var t=this.parseSharedData(e);r("div.rp-dashboard-content",this.$content).append(o.templates(this.sharedList,{items:t}))},createNewDashboard:function(e,t){this.context.parent.trigger("onAddDashboard",e.id,t),this.$el.modal("hide")},addSharedDashboard:function(e){e.preventDefault();var t=r(e.target).closest(".shared-dashboard"),n=this;if(t.hasClass("disabled-link"))return;t.addClass("disabled-link"),h.addSharedDashboard(t.data("dashboardId")).done(function(e){l.setDirectLinkDashboard(-1),r(".remove-dashboard").closest("li").removeClass("disabled"),n.createNewDashboard(e,!0),o.ajaxSuccessMessenger("dashboardAdded")}).fail(function(e){o.ajaxFailMessenger(e,"addSharedDashboard"),t.removeClass("disabled-link")})},setupValidator:function(){o.bootValidator(this.$dashName,[{validator:"minMaxRequired",type:"dashboardName",min:g.dashboardNameSize.min,max:g.dashboardNameSize.max},{validator:"noDuplications",type:"dashboardName",source:this.myDashboards}])},validate:function(){this.$dashName.trigger("validate");var e=this.$dashName.data("valid"),t=e?"removeClass":"addClass";return this.actionButton[t]("disabled"),e},submit:function(e){e&&e.preventDefault();if(!this.validate())return;var t=this.$dashName.val().trim(),n=r(".js-switch",this.$el).prop("checked"),i={name:t,share:n},s=this;h.addOwnDashboard(i).done(function(e){s.createNewDashboard(e,i),o.ajaxSuccessMessenger("dashboardAdded")}).fail(function(e){if(e.status!==401){var t=JSON.parse(e.responseText);s.showFormError(t)}})},showFormError:function(e){var t=this.$dashName.parents("div.form-group"),n=r("div.help-inline",this.$el);t.addClass("has-error"),n.empty().html(e.message).show()},hideFormError:function(){var e=this.$dashName.parents("div.form-group");e.hasClass("has-error")&&(e.removeClass("has-error"),r("div.help-inline",e).empty().hide())},destroy:function(){s.DialogShell.prototype.destroy.call(this)}}),C=N.extend({initialize:function(e){N.prototype.initialize.call(this,e),this.headerTxt="dashboardSettings",this.actionTxt="submit",this.size="md"},contentBody:"tpl-dashboard-settings-form",events:function(){return _.extend({},s.DialogShell.prototype.events,{"validation::change #dashboardName":"validate"})},validate:function(){this.$dashName.trigger("validate");var e=this.$dashName.data("valid"),t=!e||this.$dashName.val().trim()===this.model.get("name")&&r(".js-switch",this.$el).prop("checked")===this.model.get("isShared")?"addClass":"removeClass";return this.actionButton[t]("disabled"),e},submit:function(e){e&&e.preventDefault();if(r(e.target).hasClass("disabled"))return;var t=this.$dashName.val().trim(),n=r(".js-switch",this.$el).prop("checked"),i={};if(!this.validate()&&this.model.get("isShared")==n)return;if(this.validate()){this.model.get("name")!=t&&(i.name=t?t:this.model.get("name")),i.share=n,this.model.set({name:t?t:s.model.get("name"),isShared:i.share});var s=this;this.model.updateName(i,function(){s.model&&(s.context.parent.trigger("onUpdateDashboard",[s.model]),s.$el.modal("hide"),o.ajaxSuccessMessenger("dashboardUpdated"))})}},render:function(){s.DialogShell.prototype.render.call(this);var e={name:this.model?this.model.get("name"):"",shared:this.model?this.model.get("isShared"):!1,projectName:this.project.projectId,myDash:this.mydash};this.$content.append(o.templates(this.contentBody,e)),this.$dashName=r("#dashboardName",this.$content),this.setupValidator(),this.actionButton=r("#actionBtnDialog",this.$el),o.switcheryInitialize(this.$content),this.delegateEvents();var t=this;return r("input.js-switch").on("switchChange.bootstrapSwitch",function(){t.validate()}),this}}),k=i.Model.extend({initialize:function(e){this.activeId=e.current},getCurrentDashboard:function(){this.collection=this.collection||new w([]);var e;if(this.activeId)e=this.collection.get(this.activeId);else{var t=l.getActiveDashboard()||{};t.id?(e=this.collection.get(t.id),this.activeId=t.id,g.router.navigate(f.redirectToDashboard(this.activeId),{trigger:!1})):(e=this.collection.at(0),e&&this.setActive(e))}return e},changeActive:function(e,t){this.collection=this.collection||new w([]);var n=this.collection.get(e);if(n){this.setActive(n);var r=this;return n.fetch().done(function(e){r.collection.add(e,{merge:!0})})}return this.collection.add(new b({id:e,isDirectLinkDashboard:!t})),t||l.setDirectLinkDashboard(e),this.changeActive(e)},addDashboard:function(e){this.collection.add(new b(e),{merge:!0})},loadDashboards:function(){var e=this;return h.getProjectDashboards().done(function(t){var n=!1,i=l.getActiveDashboard()||{},s=e.activeId||i.id;e.collection=new w([]),t=t||[],n=_.filter(t,function(e){return e.id==s}).length>0,!n&&s?window.location.hash.indexOf("dashboard")>0&&h.getProjectDashboard(s).done(function(n){n.isDirectLinkDashboard=!0;var i=r.merge(t,[n]);l.setDirectLinkDashboard(n.id),e.collection=new w(i),e.trigger("load::dashboardById")}).fail(function(n){var i=r.merge([],t);e.collection=new w(i),e.trigger("load::dashboardById"),e.trigger("failedload::dashboardById",{errorText:n.responseText})}):e.collection=new w(t)}).fail(function(t){e.trigger("failedload::dashboardById",{errorText:t.responseText})})},setActive:function(e){this.activeId=e?e.get("id"):"";var t=e?{id:e.get("id"),name:e.get("name"),owner:e.get("owner")}:{};l.setActiveDashboard(t),g.router.navigate(f.redirectToDashboard(this.activeId),{trigger:!1}),this.activeId},getDashboards:function(){return this.collection},removeDashboard:function(e){this.collection.remove(this.collection.where({id:e}));var t=this.collection.at(0);return this.setActive(t),t},isEmpty:function(){return this.collection.length===0}});return{ContentView:E,DashboardBody:x,DashboardHeader:S,DashboardsList:T,AddDashboard:N,EditDashboard:C,NavigationInfo:k,Model:b}}),define("components/MainBreadcrumbsComponent",["require","exports","module","jquery","backbone","backbone-epoxy","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=s.Model.extend({defaults:{name:"",link:""}}),a=i.Collection.extend({model:u}),f=s.View.extend({tagName:"li",template:"tpl-component-main-breadcrumbs-item",bindings:{"[data-js-link]":"attr: {href: link}, text: name","[data-js-name]":"text: name"},initialize:function(){this.render()},render:function(){this.$el.html(o.templates(this.template,{}))},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove()}}),l=s.View.extend({tagName:"ul",className:"main-breadcrumbs",events:{},initialize:function(e){this.renderedViews=[],this.collection=new a,this.listenTo(this.collection,"reset",this.render),this.listenTo(this.collection,"add",this.addItem),this.listenTo(this.collection,"remove",this.render),e.data&&this.collection.reset(e.data)},render:function(){_.each(this.renderedViews,function(e){e.destroy()}),this.renderedViews=[];var e=this;_.each(this.collection.models,function(t){e.addItem(t)})},addItem:function(e){var t=new f({model:e});this.renderedViews.push(t),this.$el.append(t.$el)},destroy:function(){this.collection.reset([]),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return l}),define("filters/FilterCollection",["require","exports","module","backbone","underscore","filters/FilterModel","filters/SingletonLaunchFilterCollection"],function(e,t,n){"use strict";var r=e("backbone"),i=e("underscore"),s=e("filters/FilterModel"),o=e("filters/SingletonLaunchFilterCollection"),u=r.Collection.extend({model:s,initialize:function(){this.launchFilterCollection=new o,this.listenTo(this,"change:isLaunch",this.onChangeIsLaunch)},onChangeIsLaunch:function(e,t){if(t){this.launchFilterCollection.add(e);return}this.launchFilterCollection.remove(e)},parse:function(e){var t=this;this.launchFilterCollection.ready.done(function(){t.reset(i.map(e,function(e){var n=t.launchFilterCollection.where({id:e.id})[0];return n?n:(e.entities=JSON.stringify(e.entities),e.selection_parameters=JSON.stringify(e.selection_parameters),e)}))})}});return u}),define("favorites/FavoritesItemView",["require","exports","module","jquery","backbone","backbone-epoxy","util","modals/modalConfirm","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("modals/modalConfirm"),a=e("localization"),f=s.View.extend({className:"row rp-table-row",events:{"click [data-js-remove]":"onClickRemove","click [data-js-filter-edit]":"onClickEdit","click [data-js-filter-shared]":"onClickEdit"},bindings:{":el":'classes: {"not-owner": notMyFilter}',"[data-js-filter-link]":"text: name, attr: {href: url}, classes: {hide: not(isLaunch)}","[data-js-filter-name]":"text: name, classes: {hide: isLaunch}","[data-js-description]":"text: description","[data-js-filter-options]":"html: optionsString","[data-js-owner]":"text: owner","[data-js-filter-shared]":"classes: {hide: not(isShared)}, attr: {disabled: notMyFilter}","[data-js-switch-to-launch]":"checked: isLaunch","[data-js-switch-to-launch-mobile]":"checked: isLaunch","[data-js-switch-to-launch-text]":"text: isLaunchString","[data-js-remove]":"attr: {disabled: notMyFilter}, classes: {disabled: notMyFilter}","[data-js-filter-shared-icon]":"classes: {disabled: notMyFilter}"},initialize:function(){this.render()},template:"tpl-favorite-item",render:function(){this.$el.html(o.templates(this.template,{}))},onClickRemove:function(){var e=this,t=new u({headerText:a.dialogHeader.deleteFilter,bodyText:o.replaceTemplate(a.dialog.deleteFilter,this.model.get("name").escapeHtml()),okButtonDanger:!0,cancelButtonText:a.ui.cancel,okButtonText:a.ui.delete});t.show().done(function(){return e.destroy(),e.model.remove()})},onClickEdit:function(){this.model.editMainInfo()},destroy:function(){this.remove()}});return f}),define("favorites/favorites",["require","exports","module","defectType/SingletonDefectTypeCollection","model/SingletonAppModel","filters/SingletonLaunchFilterCollection","jquery","backbone","backbone-epoxy","app","core/components","util","components/MainBreadcrumbsComponent","coreService","filters/FilterCollection","localization","favorites/FavoritesItemView"],function(e,t,n){"use strict";var r=e("defectType/SingletonDefectTypeCollection"),i=e("model/SingletonAppModel"),s=e("filters/SingletonLaunchFilterCollection"),o=e("jquery"),u=e("backbone"),a=e("backbone-epoxy"),f=e("app"),l=e("core/components"),c=e("util"),h=e("components/MainBreadcrumbsComponent"),p=e("coreService"),d=e("filters/FilterCollection"),v=e("localization"),m=e("favorites/FavoritesItemView"),g=f.getInstance(),y=new i,b=a.View.extend({initialize:function(e){this.model=new u.Model({search:"",empty:!1,notFound:!1}),this.renderViews=[],this.collection=new d,this.launchFilterCollection=new s,this.listenTo(this.collection,"reset",this.renderCollection),this.listenTo(this.collection,"remove",this.updateFilters),this.context=e.context,this.$header=this.context.getMainView().$header,this.$el=this.context.getMainView().$body},template:"tpl-favorite-page",templateHeader:"tpl-favorites-header",events:{"validation::change [data-js-filter-name]":"onChangeFilterName","click [data-js-link-launch]":"onClickLinkLaunch","click [data-js-add-filter]":"onClickAddFilter"},bindings:{"[data-js-filter-name]":"attr: {disabled: empty}","[data-js-empty-block]":"classes: {hide: not(empty)}","[data-js-filter-paginate]":"classes: {hide: any(empty, notFound)}","[data-js-not-found]":"classes: {hide: not(notFound)}","[data-js-search-value]":"text: search"},render:function(){var e=new r;return this.mainBreadcrumbs=new h({data:[{name:v.favorites.title,link:""}]}),this.$header.html(this.mainBreadcrumbs.$el),e.ready.done(function(){this.$el.html(c.templates(this.template,{})),this.$filterName=o("[data-js-filter-name]",this.$el),this.$filterList=o("[data-js-filter-list]",this.$el),this.$filterPaginate=o("[data-js-filter-paginate]",this.$el),c.bootValidator(this.$filterName,[{validator:"minMaxNotRequired",type:"filterName",min:3,max:128}]),this.paging=new l.PagingToolbarSaveUser({el:this.$filterPaginate,model:new u.Model,pageType:"filters"}),this.listenTo(this.paging,"page",this.onPage),this.listenTo(this.paging,"count",this.onPageCount);var e=this;this.paging.ready.done(function(){e.searchString="",e.paging.urlModel.get("filter.cnt.name")&&(e.model.set({search:e.paging.urlModel.get("filter.cnt.name")}),e.$filterName.val(e.model.get("search"))),e.listenTo(e.model,"change:search",e.onChangeModelSearch),e.updateFilters()}),this.applyBindings()}.bind(this)),this},onChangeModelSearch:function(){this.paging.trigger("page",1)},onChangeFilterName:function(e,t){t.valid&&(this.paging.urlModel.set({"filter.cnt.name":t.value}),this.model.set({search:t.value}),this.searchString=t.value)},onPage:function(e){this.changeFilters()},onPageCount:function(e){this.changeFilters()},changeFilters:function(){this.updateFilters()},updateFilters:function(){o("#filter-page",this.$el).addClass("load"),this.collection.reset([]),this.paging.$el.html(""),p.saveFilter(this.getQueryString({search:encodeURIComponent(this.model.get("search")),page:this.paging.model.get("number"),size:this.paging.model.get("size")})).always(function(){o("#filter-page",this.$el).removeClass("load")}.bind(this)).done(function(e){this.paging.model.set(e.page),this.paging.render(),e.content.length?this.model.set({empty:!1,notFound:!1}):this.model.get("search")?this.model.set({empty:!1,notFound:!0}):this.model.set({empty:!0,notFound:!1}),this.collection.parse(e.content)}.bind(this))},getQueryString:function(e){e||(e={}),e.page||(e.page=1),e.size||(e.size=10);var t="?page.sort=name&page.page="+e.page+"&page.size="+e.size;return e.search&&(t+="&filter.cnt.name="+e.search),t},renderCollection:function(){this.$filterList.html(""),_.each(this.renderViews,function(e){e.destroy()}),this.renderViews=[],_.each(this.collection.models,function(e){var t=new m({model:e,collection:this.collection});this.$filterList.append(t.$el),this.renderViews.push(t)},this)},onClickLinkLaunch:function(e){e.preventDefault();var t=y.get("projectId")+"/launches/all";g.router.navigate(t,{trigger:!0})},onClickAddFilter:function(){var e=this.launchFilterCollection.generateTempModel();g.router.navigate(e.get("url"),{trigger:!0})},destroy:function(){this.$header.empty(),this.mainBreadcrumbs&&this.mainBreadcrumbs.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind()}});return{ContentView:b}}),function($){$.fn.markItUp=function(settings,extraSettings){var activeButton,method,params,options,ctrlKey,shiftKey,altKey;ctrlKey=shiftKey=altKey=!1,typeof settings=="string"&&(method=settings,params=extraSettings),options={id:"",nameSpace:"",root:"",previewHandler:!1,previewInWindow:"",previewInElement:"",previewAutoRefresh:!0,previewPosition:"after",previewTemplatePath:"~/templates/preview.html",previewParser:!1,previewParserPath:"",previewParserVar:"data",resizeHandle:!0,beforeInsert:"",afterInsert:"",onEnter:{},onShiftEnter:{},onCtrlEnter:{},onTab:{},markupSet:[{}],customPlaceholder:!1},$.extend(options,settings,extraSettings),options.root||$("script").each(function(e,t){miuScript=$(t).get(0).src.match(/(.*)jquery\.markitup(\.pack)?\.js$/),miuScript!==null&&(options.root=miuScript[1])});var uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},matched=uaMatch(navigator.userAgent),browser={};return matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),this.each(function(){function localize(e,t){return t?e.replace(/("|')~\//g,"$1"+options.root):e.replace(/^~\//,options.root)}function init(){id="",nameSpace="",options.id?id='id="'+options.id+'"':$$.attr("id")&&(id='id="markItUp'+$$.attr("id").substr(0,1).toUpperCase()+$$.attr("id").substr(1)+'"'),options.nameSpace&&(nameSpace='class="'+options.nameSpace+'"'),$$.wrap("<div "+nameSpace+"></div>"),$$.wrap("<div "+id+' class="markItUp"></div>'),$$.wrap('<div class="markItUpContainer"></div>'),$$.addClass("markItUpEditor"),header=$('<div class="markItUpHeader"></div>').insertBefore($$),$(dropMenus(options.markupSet)).appendTo(header),footer=$('<div class="markItUpFooter"></div>').insertAfter($$),options.resizeHandle===!0&&browser.safari!==!0&&(resizeHandle=$('<div class="markItUpResizeHandle"></div>').insertAfter($$).bind("mousedown.markItUp",function(e){var t=$$.height(),n=e.clientY,r,i;r=function(e){return $$.css("height",Math.max(20,e.clientY+t-n)+"px"),!1},i=function(e){return $("html").unbind("mousemove.markItUp",r).unbind("mouseup.markItUp",i),!1},$("html").bind("mousemove.markItUp",r).bind("mouseup.markItUp",i)}),footer.append(resizeHandle)),$$.bind("keydown.markItUp",keyPressed).bind("keyup",keyPressed),$$.bind("insertion.markItUp",function(e,t){t.target!==!1&&get(),textarea===$.markItUp.focused&&markup(t)}),$$.bind("focus.markItUp",function(){$.markItUp.focused=this}),options.previewInElement&&refreshPreview()}function dropMenus(markupSet){var ul=$("<ul></ul>"),i=0;return $("li:hover > ul",ul).css("display","block"),$.each(markupSet,function(){var button=this,t="",title,li,j;title=button.key?(button.name||"")+" [Ctrl+"+button.key+"]":button.name||"",key=button.key?'accesskey="'+button.key+'"':"";if(button.separator)li=$('<li class="markItUpSeparator">'+(button.separator||"")+"</li>").appendTo(ul);else{i++;for(j=levels.length-1;j>=0;j--)t+=levels[j]+"-";li=$('<li class="markItUpButton markItUpButton'+t+i+" "+(button.className||"")+'"><a href="" '+key+' title="'+title+'">'+(button.name||"")+"</a></li>").bind("contextmenu.markItUp",function(){return!1}).bind("click.markItUp",function(e){e.preventDefault()}).bind("focusin.markItUp",function(){$$.focus()}).bind("mouseup",function(){return button.call&&eval(button.call)(),setTimeout(function(){markup(button)},1),!1}).bind("mouseenter.markItUp",function(){$("> ul",this).show(),$(document).one("click",function(){$("ul ul",header).hide()})}).bind("mouseleave.markItUp",function(){$("> ul",this).hide()}).appendTo(ul),button.dropMenu&&(levels.push(i),$(li).addClass("markItUpDropMenu").append(dropMenus(button.dropMenu)))}}),levels.pop(),ul}function magicMarkups(e){return e?(e=e.toString(),e=e.replace(/\(\!\(([\s\S]*?)\)\!\)/g,function(e,t){var n=t.split("|!|");return altKey===!0?n[1]!==undefined?n[1]:n[0]:n[1]===undefined?"":n[0]}),e=e.replace(/\[\!\[([\s\S]*?)\]\!\]/g,function(e,t){var n=t.split(":!:");return abort===!0?!1:(value=prompt(n[0],n[1]?n[1]:""),value===null&&(abort=!0),value)}),e):""}function prepare(e){return $.isFunction(e)&&(e=e(hash)),magicMarkups(e)}function build(e){var t=prepare(clicked.openWith),n=prepare(clicked.placeHolder),r=prepare(clicked.replaceWith),i=prepare(clicked.closeWith),s=prepare(clicked.openBlockWith),o=prepare(clicked.closeBlockWith),u=clicked.multiline;if(r!=="")block=t+r+i;else if(selection===""&&n!=="")if(options.customPlaceholder&&activeButton.name=="Link"){var a=!!t.split('"')[1];a?block=t+i:block='"'+i+'":'+i}else block=t+n+i;else{e=e||selection;var f=[e],l=[];u===!0&&(f=e.split(/\r?\n/));for(var c=0;c<f.length;c++){line=f[c];var h;(h=line.match(/ *$/))?l.push(t+line.replace(/ *$/g,"")+i+h):l.push(t+line+i)}block=l.join("\n")}return block=s+block+o,{block:block,openBlockWith:s,openWith:t,replaceWith:r,placeHolder:n,closeWith:i,closeBlockWith:o}}function markup(e){var t,n,r,i;hash=activeButton=clicked=e,get(),$.extend(hash,{line:"",root:options.root,textarea:textarea,selection:selection||"",caretPosition:caretPosition,ctrlKey:ctrlKey,shiftKey:shiftKey,altKey:altKey}),prepare(options.beforeInsert),prepare(clicked.beforeInsert),(ctrlKey===!0&&shiftKey===!0||e.multiline===!0)&&prepare(clicked.beforeMultiInsert),$.extend(hash,{line:1});if(ctrlKey===!0&&shiftKey===!0){lines=selection.split(/\r?\n/);for(n=0,r=lines.length,i=0;i<r;i++)$.trim(lines[i])!==""?($.extend(hash,{line:++n,selection:lines[i]}),lines[i]=build(lines[i]).block):lines[i]="";string={block:lines.join("\n")},start=caretPosition,t=string.block.length+(browser.opera?r-1:0)}else ctrlKey===!0?(string=build(selection),start=caretPosition+string.openWith.length,t=string.block.length-string.openWith.length-string.closeWith.length,t-=string.block.match(/ $/)?1:0,t-=fixIeBug(string.block)):shiftKey===!0?(string=build(selection),start=caretPosition,t=string.block.length,t-=fixIeBug(string.block)):(string=build(selection),start=caretPosition+string.block.length,t=0,start-=fixIeBug(string.block));selection===""&&string.replaceWith===""&&(caretOffset+=fixOperaBug(string.block),start=caretPosition+string.openBlockWith.length+string.openWith.length,t=string.block.length-string.openBlockWith.length-string.openWith.length-string.closeWith.length-string.closeBlockWith.length,caretOffset=$$.val().substring(caretPosition,$$.val().length).length,caretOffset-=fixOperaBug($$.val().substring(0,caretPosition))),$.extend(hash,{caretPosition:caretPosition,scrollPosition:scrollPosition}),string.block!==selection&&abort===!1?(insert(string.block),set(start,t)):caretOffset=-1,get(),$.extend(hash,{line:"",selection:selection}),(ctrlKey===!0&&shiftKey===!0||e.multiline===!0)&&prepare(clicked.afterMultiInsert),prepare(clicked.afterInsert),prepare(options.afterInsert),previewWindow&&options.previewAutoRefresh&&refreshPreview(),shiftKey=altKey=ctrlKey=abort=!1}function fixOperaBug(e){return browser.opera?e.length-e.replace(/\n*/g,"").length:0}function fixIeBug(e){return browser.msie?e.length-e.replace(/\r*/g,"").length:0}function insert(e){if(document.selection){var t=document.selection.createRange();t.text=e}else textarea.value=textarea.value.substring(0,caretPosition)+e+textarea.value.substring(caretPosition+selection.length,textarea.value.length)}function set(e,t){if(textarea.createTextRange){if(browser.opera&&browser.version>=9.5&&t==0)return!1;range=textarea.createTextRange(),range.collapse(!0),range.moveStart("character",e),range.moveEnd("character",t),range.select()}else textarea.setSelectionRange&&textarea.setSelectionRange(e,e+t);textarea.scrollTop=scrollPosition,textarea.focus()}function get(){textarea.focus(),scrollPosition=textarea.scrollTop;if(document.selection){selection=document.selection.createRange().text;if(browser.msie){var e=document.selection.createRange(),t=e.duplicate();t.moveToElementText(textarea),caretPosition=-1;while(t.inRange(e))t.moveStart("character"),caretPosition++}else caretPosition=textarea.selectionStart}else caretPosition=textarea.selectionStart,selection=textarea.value.substring(caretPosition,textarea.selectionEnd);return selection}function preview(){typeof options.previewHandler=="function"?previewWindow=!0:options.previewInElement?previewWindow=$(options.previewInElement):!previewWindow||previewWindow.closed?options.previewInWindow?(previewWindow=window.open("","preview",options.previewInWindow),$(window).unload(function(){previewWindow.close()})):(iFrame=$('<iframe class="markItUpPreviewFrame"></iframe>'),options.previewPosition=="after"?iFrame.insertAfter(footer):iFrame.insertBefore(header),previewWindow=iFrame[iFrame.length-1].contentWindow||frame[iFrame.length-1]):altKey===!0&&(iFrame?iFrame.remove():previewWindow.close(),previewWindow=iFrame=!1),options.previewAutoRefresh||refreshPreview(),options.previewInWindow&&previewWindow.focus()}function refreshPreview(){renderPreview()}function renderPreview(){var e;if(options.previewHandler&&typeof options.previewHandler=="function")options.previewHandler($$.val());else if(options.previewParser&&typeof options.previewParser=="function"){var t=options.previewParser($$.val());writeInPreview(localize(t,1))}else options.previewParserPath!==""?$.ajax({type:"POST",dataType:"text",global:!1,url:options.previewParserPath,data:options.previewParserVar+"="+encodeURIComponent($$.val()),success:function(e){writeInPreview(localize(e,1))}}):template||$.ajax({url:options.previewTemplatePath,dataType:"text",global:!1,success:function(e){writeInPreview(localize(e,1).replace(/<!-- content -->/g,$$.val()))}});return!1}function writeInPreview(e){if(options.previewInElement)$(options.previewInElement).html(e);else if(previewWindow&&previewWindow.document){try{sp=previewWindow.document.documentElement.scrollTop}catch(t){sp=0}previewWindow.document.open(),previewWindow.document.write(e),previewWindow.document.close(),previewWindow.document.documentElement.scrollTop=sp}}function keyPressed(e){shiftKey=e.shiftKey,altKey=e.altKey,ctrlKey=!e.altKey||!e.ctrlKey?e.ctrlKey||e.metaKey:!1;if(e.type==="keydown"){if(ctrlKey===!0){li=$('a[accesskey="'+(e.keyCode==13?"\\n":String.fromCharCode(e.keyCode))+'"]',header).parent("li");if(li.length!==0)return ctrlKey=!1,setTimeout(function(){li.triggerHandler("mouseup")},1),!1}if(e.keyCode===13||e.keyCode===10)return ctrlKey===!0?(ctrlKey=!1,markup(options.onCtrlEnter),options.onCtrlEnter.keepDefault):shiftKey===!0?(shiftKey=!1,markup(options.onShiftEnter),options.onShiftEnter.keepDefault):(markup(options.onEnter),options.onEnter.keepDefault);if(e.keyCode===9)return shiftKey==1||ctrlKey==1||altKey==1?!1:caretOffset!==-1?(get(),caretOffset=$$.val().length-caretOffset,set(caretOffset,0),caretOffset=-1,!1):(markup(options.onTab),options.onTab.keepDefault)}}function remove(){$$.unbind(".markItUp").removeClass("markItUpEditor"),$$.parent("div").parent("div.markItUp").parent("div").replaceWith($$),$$.data("markItUp",null)}var $$,textarea,levels,scrollPosition,caretPosition,caretOffset,clicked,hash,header,footer,previewWindow,template,iFrame,abort;$$=$(this),textarea=this,levels=[],abort=!1,scrollPosition=caretPosition=0,caretOffset=-1,options.previewParserPath=localize(options.previewParserPath),options.previewTemplatePath=localize(options.previewTemplatePath);if(method){switch(method){case"remove":remove();break;case"insert":markup(params);break;default:$.error("Method "+method+" does not exist on jQuery.markItUp")}return}init()})},$.fn.markItUpRemove=function(){return this.each(function(){$(this).markItUp("remove")})},$.markItUp=function(e){var t={target:!1};$.extend(t,e);if(t.target)return $(t.target).each(function(){$(this).focus(),$(this).trigger("insertion",[t])});$("textarea").trigger("insertion",[t])}}(jQuery),define("markitup",["jquery"],function(){}),define("markitupset",[],function(){var e={previewParserPath:"",onShiftEnter:{keepDefault:!1,replaceWith:"\n\n"},markupSet:[{name:"Heading 1",key:"1",openWith:"h1(!(([![Class]!]))!). ",placeHolder:"Your title here..."},{name:"Heading 2",key:"2",openWith:"h2(!(([![Class]!]))!). ",placeHolder:"Your title here..."},{name:"Heading 3",key:"3",openWith:"h3(!(([![Class]!]))!). ",placeHolder:"Your title here..."},{name:"Heading 4",key:"4",openWith:"h4(!(([![Class]!]))!). ",placeHolder:"Your title here..."},{name:"Heading 5",key:"5",openWith:"h5(!(([![Class]!]))!). ",placeHolder:"Your title here..."},{name:"Heading 6",key:"6",openWith:"h6(!(([![Class]!]))!). ",placeHolder:"Your title here..."},{name:"Paragraph",key:"P",openWith:"p(!(([![Class]!]))!). "},{separator:"---------------"},{name:"Bold",key:"B",closeWith:"*",openWith:"*"},{name:"Italic",key:"I",closeWith:"_",openWith:"_"},{name:"Stroke through",key:"S",closeWith:"-",openWith:"-"},{separator:"---------------"},{name:"Bulleted list",openWith:"(!(* |!|*)!)"},{name:"Numeric list",openWith:"(!(# |!|#)!)"},{separator:"---------------"},{name:"Picture",replaceWith:"![![Source:!:http://]!]([![Alternative text]!])!"},{name:"Link",openWith:'"',closeWith:'([![Title]!])":[![Link:!:http://]!]',placeHolder:"Your text to link here..."},{separator:"---------------"},{name:"Quotes",openWith:"bq(!(([![Class]!]))!). "},{name:"Code",openWith:"@",closeWith:"@"}]};return e}),define("defectEditor",["jquery","backbone","core/components","util","app","coreService","helpers","storageService","markitup","markitupset"],function(e,t,n,r,i,s,o,u,a,f){"use strict";var l=i.getInstance(),c=t.View.extend({defectEditorTpl:"tpl-launch-grid-defect-editor",presentation:null,fieldValidators:[],postBugView:undefined,selectedIssue:null,initialize:function(e){this.$el=e.element,this.$origin=e.origin,this.item=e.item,this.items=e.items,this.selected=_.keys(this.items).length||1,this.navigationInfo=e.navigationInfo,this.defectCallBack=e.defectCallBack,this.selectedIssue=e.item.issue.issue_type,this.isLog=this.navigationInfo.getLevelGridType()==="log",this.bindGridEvents(),this.inProcess=!1},bindGridEvents:function(){if(!this.isLog){var e=this,t=function(){e.$multipleEditAmount&&e.$multipleEditAmount.text(e.selected),e.performAmountUpdate()};this.listenTo(this.navigationInfo,"increase::edited",function(n){e.selected+=1,e.items[n.id]=n,t()}),this.listenTo(this.navigationInfo,"decrease::edited",function(n){e.selected-=1,delete e.items[n],t()}),this.listenTo(this.navigationInfo,"all::edited",function(n){e.items=_.indexBy(n,"id"),e.selected=_.size(n),t()})}},performAmountUpdate:function(){this.selected>1?this.$multipleEditHolder.show():this.$multipleEditHolder.hide()},attachTickets:function(){var t=this.$origin.find(".tickets-container");if(t.length){var n=t.clone();e(".btn-group:first",this.$el).after(n)}e(".tooltip.in",this.$el).remove()},getSubDefects:function(e){var t={},e=this.navigationInfo.defectTypes.toJSON();return _.each(e,function(e){var n=e.typeRef;t[n]?t[n].push(e):t[n]=[e]}),t},render:function(){var e,t=this.navigationInfo.defectTypes,n=["TO_INVESTIGATE","PRODUCT_BUG","AUTOMATION_BUG","SYSTEM_ISSUE","NO_DEFECT"];return this.$el.append(r.templates(this.defectEditorTpl,{item:this.item,selected:this.selected,logs:this.isLog,defectsGroup:n,subDefects:this.getSubDefects(),noSubDefects:!t.checkForSubDefects(),defectTypes:t,canPost:r.canPostToJira(),canLoad:r.hasValidBtsSystem(),isDebug:this.navigationInfo.isDebug()})),this.attachTickets(),this.setupAnchors(),e=_.filter(f.markupSet,{name:"Link"})[0],e.openWith='"[![Title]!]":',e.closeWith="[![Link:!:http://]!]",e.placeHolder=" ",this.$textarea.markItUp(_.extend({customPlaceholder:"true",afterInsert:function(){this.validateForSubmition()}.bind(this)},f)),this.$origin.hide(),this.$el.show(),this},events:{"keyup textarea":"validateForSubmition",'click [data-js-event="postBug"]:not(.disabled)':"openPostBug",'click [data-js-event="loadBug"]':"openLoadBug",'click [data-js-event="submitDefect"]:not(.disabled)':"updateDefectType",'click [data-js-event="selectIssueType"]':"updateSelectedIssue",'click [data-js-event="closeEditor"]':"closeEditor"},updateSelectedIssue:function(t){var n=e(t.currentTarget),r=n.closest(".dropdown-menu"),i=n.data("issueName"),s=n.data("issueColor");e("label",r).removeClass("selected"),n.addClass("selected"),this.selectedIssue=n.data("id"),this.$type.text(i).attr("class",n.find(".badge").attr("class")),this.$type.closest(".pr-defect-type-badge").data("id",this.selectedIssue),e(".pr-defect-type-badge i",this.$el).css("background",s),this.validateForSubmition()},validateForSubmition:function(){this.$textarea.val()!==(this.item.issue.comment||"")||this.selectedIssue!==this.item.issue.issue_type?this.$submitBtn.removeClass("disabled"):this.$submitBtn.addClass("disabled")},setupAnchors:function(){this.$submitBtn=e(".submit:first",this.$el),this.$textarea=e("textarea:first",this.$el),this.$type=e(".pr-defect-type-badge span",this.$el),this.$multipleEditHolder=e(".rp-defect-multiple-edit:first",this.$el),this.$multipleEditAmount=e("#inProgressAmount",this.$el),this.$replaceComments=e("#replaceComments",this.$el)},openPostBug:function(){this.postBugView&&this.postBugView.destroy(),this.postBugView=(new h({settings:l.forSettings,user:l.userModel.toJSON(),systems:l.project.configuration.externalSystem,items:_.values(this.items),selected:this.selected,editor:this})).render(),this.listenTo(this.postBugView,"defect::updated",this.destroyPostBug)},openLoadBug:function(){this.loadBugView&&this.loadBugView.destroy(),this.loadBugView=(new p({items:_.values(this.items),systems:l.project.configuration.externalSystem,editor:this})).render(),this.listenTo(this.loadBugView,"bug::loaded",this.destroyPostBug)},destroyPostBug:function(){this.navigationInfo.trigger(this.defectCallBack)},updateDefectType:function(t){if(this.inProcess)return;this.inProcess=!0;var n=this,i=function(){return{comment:e.trim(n.$textarea.val()),issue_type:n.selectedIssue}},o=[],u=this.$replaceComments.is(":checked"),a=this.item.id,f=function(e){return e.id===a?i():{issue_type:i().issue_type,comment:e.issue.comment}};if(!this.items){var c={};c[this.item.id]=this.item,this.items=c}_.forEach(this.items,function(e,t){var n=i();e.id!=a&&(n.comment=n.comment.length>0?n.comment:this.items[t].issue.comment);var r=u?n:f(e);o.push({test_item_id:t,issue:r})},this),s.updateDefect({issues:o}).done(function(){var e=i();if(this.item.issue.issue_type!==e.issue_type){var t=this.navigationInfo.defectTypes.findWhere({locator:this.item.issue.issue_type}),n=this.navigationInfo.defectTypes.findWhere({locator:e.issue_type});t&&n}l.commentAnchor=this.item.id,this.navigationInfo.trigger(this.defectCallBack)}.bind(this)).fail(function(e){r.ajaxFailMessenger(e,"updateDefect")}).always(function(){this.inProcess=!1}.bind(this))},closeEditor:function(){this.navigationInfo.trigger("deselect::rows"),this.destroy()},destroy:function(){this.items=null,this.$origin.show(),e(".tooltip.in",this.$origin).remove(),this.postBugView&&this.postBugView.destroy(),n.RemovableView.prototype.destroy.call(this)}}),h=n.DialogShell.extend({initialize:function(e){e.headerTxt="postBug",e.actionTxt="submit",e.actionStatus=!0,n.DialogShell.prototype.initialize.call(this,e),this.items=e.items,this.selected=e.selected,this.systems=_.sortBy(e.systems,"project"),this.url=e.url,this.editor=e.editor,this.settings=e.settings,this.systemSettings=this.settings["bts"+e.systems[0].systemType],this.user=e.user,this.systemType=e.systems[0].systemType,this.systemAuth=e.systems[0].systemAuth,this.setUserBts()},setupAnchors:function(){this.$dynamicContent=e("#dynamicContent",this.$el),this.$includesBlock=e("#includesBlock",this.$el),this.$includeLogs=e("#include_logs",this.$includesBlock),this.$includeData=e("#include_data",this.$includesBlock),this.$includeComments=e("#include_comments",this.$includesBlock),this.$postToUrl=e("#postToUrl",this.$el),this.$credentialsLink=e("#credentialsLink",this.$el),this.$collapseCredentials=e("#collapseCredentials",this.$el),this.$authorizationType=e("#authorizationType",this.$el),this.$requiredFieldsWarning=e("#requiredFields",this.$el),this.$credentialsSoftWarning=e("#credentialsSoft",this.$el),this.$credentialsWrongWarning=e("#credentialsWrong",this.$el)},contentBody:"tpl-bts-post-bug",fieldsTpl:"tpl-dynamic-fields",authTpl:"tpl-bts-auth-type",render:function(){return n.DialogShell.prototype.render.call(this,{isBeta:!0}),this.$content.html(r.templates(this.contentBody,{selected:this.selected,source:r.getExternalSystem(!0),systems:this.systems,authorizationTypes:this.settings["bts"+this.systemType].authorizationType,collapse:this.user.bts.hash[this.user.bts.current.id].submits>0,showCredentialsSoft:this.settings["bts"+this.systemType].canUseRPAuthorization,current:this.user.bts.current})),this.setupAnchors(),r.switcheryInitialize(this.$includesBlock),this.renderFields(),this.renderCredentials(),this.delegateEvents(),this},renderFields:function(){this.$dynamicContent.html(r.templates(this.fieldsTpl,{collection:this.user.bts.current.fields,disabled:this.systemSettings.disabledForEdit,update:!1,access:!0,popup:!0})),this.user.bts.current.fields?(o.applyTypeForBtsFields(this.user.bts.current.fields,this.$dynamicContent),this.$actionBtn.prop("disabled",!1)):this.$actionBtn.prop("disabled",!0)},renderCredentials:function(){var e={systemAuth:this.systemAuth,access:!0,post:!0},t=u.getBtsCredentials()||{},n=this.user.bts.current.id;_.extend(e,this.user.bts.hash[n],t[n]),e.hasPassword=!!this.user.bts.hash[n].password,e.defaultPassword=this.settings.defaultPassword,this.$authorizationType.html(r.templates(this.authTpl,e))},updateFieldSet:function(t){t.preventDefault();if(e(t.currentTarget).parent().hasClass("active"))return;r.dropDownHandler(t),this.user.bts.current=_.find(this.systems,{id:e(t.currentTarget).attr("id")}),this.updateHash(),this.renderFields(),this.renderCredentials(),this.$postToUrl.text(this.user.bts.current.url),this.$requiredFieldsWarning.hide(),this.$credentialsLink.removeClass("collapsed"),this.$collapseCredentials.addClass("in")},events:function(){return _.extend({},n.DialogShell.prototype.events,{"click .option-selector":"handleDropDown","click .auth-type":"handleDropDown","keyup .required-value":"clearRequiredError","click .project-name":"updateFieldSet"})},handleCredentials:function(t){r.dropDownHandler(t);var n=e(t.currentTarget).parent().attr("id");this.systemAuth!==n&&(this.systemAuth=n,this.renderCredentials())},handleDropDown:function(e){r.dropDownHandler(e)},clearRequiredError:function(t){var n=e(t.currentTarget);if(n.val()){n.closest(".rp-form-group").removeClass("has-error"),n.closest(".has-error").removeClass("has-error");var r=!0;e("#basicBlock input").each(function(){e(this).val()||(r=!1)}),r&&this.$credentialsWrongWarning.hide()}e(".has-error",this.$dynamicContent).length||this.$requiredFieldsWarning.hide()},submit:function(){var e=this.getData(),t=this,n=function(e){e.status!==401&&t.parseError(e),t.$loader.hide()};e&&(this.$loader.show(),this.inSubmit=!0,s.postBugToBts(e,this.user.bts.current.id).done(function(e){var i=t.bindTicketToIssues(t.items,e);s.updateDefect({issues:i}).done(function(){r.ajaxSuccessMessenger("addTicket"),t.trigger("defect::updated"),t.done()}).fail(function(e){n(e)}),t.persistCredentials()}).fail(function(e){n(e)}).always(function(){this.inSubmit=!1}))},persistCredentials:function(){var e=this.user.bts.hash[this.user.bts.current.id];e.submits+=1;var t={username:e.username,id:e.id};e.domain&&(t.domain=e.domain),u.setBtsCredentials(t)},bindTicketToIssues:function(t,n){var r=[];return _.forEach(t,function(t,i){var s=e(".inline-editor .rp-defect-type-dropdown .pr-defect-type-badge"),o=s.length>0?s.data("id"):null,u={issue_type:o?o:t.issue.issue_type,comment:t.issue.comment,externalSystemIssues:t.issue.externalSystemIssues||[]};e("#replaceComments").prop("checked")&&(u.comment=e(".markItUpEditor").val().length>0?e(".markItUpEditor").val():t.issue.comment);if(t.id==e(".editor-row").closest(".selected").attr("id")){var a=e(".markItUpEditor").val(),f=t.issue.comment;u.comment=f&&a.trim()===f.trim()?f:a}u.externalSystemIssues.push({ticketId:n.id,systemId:this.user.bts.current.id,url:n.url}),r.push({issue:u,test_item_id:t.id})},this),r},setUserBts:function(){this.user.bts?this.user.bts.current?this.user.bts.current=_.find(this.systems,{id:this.user.bts.current.id}):this.user.bts.current=this.systems[0]:(this.user.bts={hash:{},current:null},this.user.bts.current=this.systems[0],this.updateHash())},updateHash:function(){this.user.bts.hash[this.user.bts.current.id]||(this.user.bts.hash[this.user.bts.current.id]={type:this.systemType,id:this.user.bts.current.id,submits:0})},parseError:function(e){if(e.responseText){this.$credentialsSoftWarning.hide();try{var t=JSON.parse(e.responseText);t.message.indexOf(this.systemSettings.credentialsErrorPattern)!==-1&&this.highlightCredentials(!0);if(l.patterns.htmlError.test(t.message)){var n=t.message.match(l.patterns.getBodyContent).map(function(e){return e.replace(l.patterns.replaceBodyTag,"")});this.$credentialsWrongWarning.html(n[0]).show(),this.validateBtsHomeLink()}else this.$credentialsWrongWarning.text(this.$credentialsWrongWarning.data("general")+e.responseText).show()}catch(i){this.$credentialsWrongWarning.text(this.$credentialsWrongWarning.data("general")+e.responseText).show()}return}this.$el.modal("hide"),r.ajaxFailMessenger(null,"postTicketToBts")},validateBtsHomeLink:function(){if(r.getExternalSystem()===l.btsEnum.jira){var t=e("a",this.$credentialsWrongWarning),n=document.createElement("a");n.href=this.user.bts.current.url;var i=n.protocol+"//"+n.host,s=t.attr("href");t.attr("href",i+s),t.attr("target","_blank")}},highlightCredentials:function(t,n){var r=t?"add":"remove";n?n.closest(".rp-form-group")[r+"Class"]("has-error"):e("#authorizationType .col-sm-12",this.$collapseCredentials)[r+"Class"]("has-error"),t&&this.$credentialsSoftWarning.hide()},validateCredentials:function(){var t=!1,n=this.user.bts.hash[this.user.bts.current.id],r=function(){delete n.username,delete n.password,delete n.domain}.bind(this);this.$authorizationType.find(".has-error").removeClass("has-error");switch(this.systemAuth){case"BASIC":case"NTLM":delete n.accessKey;var i=e(".form-control",this.$authorizationType),s=_.every(i,function(e){return!e.value}),o=_.every(i,function(e){return e.value});o||s&&n.type!="JIRA"?(t=!0,s&&r(),i[0].value&&_.forEach(i,function(e){if(e.id==="password"&&e.value===this.settings.defaultPassword)return;n[e.id]=e.value}.bind(this))):(r(),_.forEach(i,function(t){t.value?e(t).closest(".col-sm-12").removeClass("has-error"):e(t).closest(".col-sm-12").addClass("has-error")}),this.$credentialsWrongWarning.text(this.$credentialsWrongWarning.data("fill")).show());break;case"APIKEY":r();var u=e("#accessKey",this.$authorizationType);u.val().length?(n.accessKey=u.val(),t=!0):(u.parent().addClass("has-error"),this.$credentialsWrongWarning.text(this.$credentialsWrongWarning.data("fill")).show());default:}return t&&this.$credentialsWrongWarning.hide(),t},getData:function(){var t=!1,n=[],r,i=this.systemType===l.btsEnum.rally;_.forEach(e(".default-value, select",this.$dynamicContent),function(r){var s=e(r),o=!1;if(s.hasClass("users-typeahead")){if(s.is("div"))return;o=!0}var u=s.hasClass("required-value"),a=s.hasClass("rp-btn")?e(".select-value",s).text():s.val().trim();if(o){var f=a.split(",");a=f[0]===""?[]:f}else a=a?[a]:[];u&&!a.length&&(t=!0,s.closest(".rp-form-group").addClass("has-error")),!u&&!t&&(t=s.closest(".rp-form-group").hasClass("has-error"));var l={value:a,required:u,id:s.attr("id"),fieldType:s.data("type")};i&&(l.fieldName=s.data("name")),n.push(l)});if(!this.validateCredentials()||t){t&&this.$requiredFieldsWarning.show();return}this.$requiredFieldsWarning.hide(),r={fields:n,backLinks:this.getLinks(),item:this.items[0].id,log_quantity:this.systemSettings.logsAmount};var s=this.user.bts.hash[this.user.bts.current.id];s.username&&(r.username=s.username,r.password=s.password,s.domain&&(r.domain=s.domain)),s.accessKey&&(r.token=s.accessKey);var o=this.selected===1;return r.include_logs=o?this.$includeLogs.bootstrapSwitch("state"):!1,r.include_data=o?this.$includeData.bootstrapSwitch("state"):!1,r.include_comments=o?this.$includeComments.bootstrapSwitch("state"):!1,r},getLinks:function(){var e={},t=window.location.href;if(this.items.length>1)_.forEach(this.items,function(n){e[n.id]=t+"/log-for-"+n.id});else{var n=this.items[0].id;t.indexOf("/log-for-")>0?e[n]=t:e[n]=t+"/log-for-"+n}return e},destroy:function(){this.items=null,this.selected=null,this.systems=null,this.url=null,this.settings=null,this.systemSettings=null,this.user=null,n.DialogShell.prototype.destroy.call(this)}}),p=n.DialogShell.extend({initialize:function(e){e.headerTxt="loadBug",e.actionTxt="add",e.actionStatus=!0,n.DialogShell.prototype.initialize.call(this,e),this.items=e.items,this.editor=e.editor,this.systems=_.sortBy(l.project.configuration.externalSystem,"project"),this.systemId=l.session.lastLoadedTo||this.systems[0].id,this.type=r.getExternalSystem()},contentBody:"tpl-load-bug",rowTpl:"tpl-load-bug-row",render:function(){n.DialogShell.prototype.render.call(this,{isBeta:!0});var t=_.find(this.systems,{id:this.systemId});return this.$content.html(r.templates(this.contentBody,{systems:this.systems,current:t||this.systems[0]})),this.$rowsHolder=e("#rowHolder",this.$content),this.$postToUrl=e("#postToUrl",this.$el),this.renderRow(),this.delegateEvents(),this},renderRow:function(){this.$rowsHolder.append(r.templates(this.rowTpl)),r.bootValidator(e(".issue-row:last .issue-id",this.$rowsHolder),{validator:"minMaxRequired",type:"issueId",min:1,max:128}),r.bootValidator(e(".issue-row:last .issue-link",this.$rowsHolder),[{validator:"matchRegex",type:"issueLinkRegex",pattern:l.patterns.inputLink,arg:"i"}])},addRow:function(){this.renderRow(),this.$rowsHolder.addClass("multi")},removeRow:function(t){e(t.currentTarget).closest(".issue-row").remove(),e(".issue-row",this.$rowsHolder).length===1&&this.$rowsHolder.removeClass("multi")},events:function(){return _.extend({},n.DialogShell.prototype.events,{"click .project-name":"updateProject","click #addRow":"addRow","click .remove-row":"removeRow","blur .issue-link":"autoFillId"})},autoFillId:function(t){if(this.canAutoFill()){var n=e(t.currentTarget),r=n.closest(".issue-row").find(".issue-id"),i=n.val(),s;if(!i||!n.data("valid")||e.trim(r.val()))return;this.isJiraBts()&&(s=i.split("/"),s=s[s.length-1]),this.isTfsBts()&&(s=i.split("id=")[1],s=s?s.split("&")[0]:""),r.val(s).trigger("validate")}},canAutoFill:function(){return this.type&&(this.isJiraBts()||this.isTfsBts())},isJiraBts:function(){return this.type===l.btsEnum.jira},isTfsBts:function(){return this.type===l.btsEnum.tfs},updateProject:function(t){r.dropDownHandler(t),this.systemId=e(t.currentTarget).attr("id");var n=_.find(this.systems,{id:this.systemId});this.$postToUrl.text(n.url)},updateIssues:function(t,n){var r=[];return _.forEach(t,function(t,i){var s=e(".inline-editor .rp-defect-type-dropdown .pr-defect-type-badge"),o=s.length>0?s.data("id"):null,u={issue_type:o?o:t.issue.issue_type,comment:t.issue.comment,externalSystemIssues:t.issue.externalSystemIssues||[]};e("#replaceComments").prop("checked")&&(u.comment=e(".markItUpEditor").val().length>0?e(".markItUpEditor").val():this.items[i].issue.comment),t.id==e(".editor-row").closest(".selected").attr("id")&&(u.comment=e(".markItUpEditor").val()),_.each(n.issues,function(e){u.externalSystemIssues.push({ticketId:e.ticketId,systemId:n.systemId,url:e.url})}),r.push({issue:u,test_item_id:t.id})},this),r},submit:function(){e(".form-control",this.$rowsHolder).trigger("validate");if(!e(".has-error",this.$rowsHolder).length){var t={},n=this;t.systemId=this.systemId,t.testItemIds=_.map(this.items,"id"),t.issues=_.map(e(".issue-row",this.$rowsHolder),function(t){var n=e(t).find(".issue-id").val(),r=e(t).find(".issue-link").val();return{ticketId:n,url:r}}),this.inSubmit=!0,s.loadBugs(t).done(function(e){var i=n.updateIssues(n.items,t);s.updateDefect({issues:i}).done(function(){r.ajaxSuccessMessenger("submitKeys"),n.trigger("bug::loaded")}).fail(function(e){errorHandler(e)}).always(function(){n.done()}),l.session.lastLoadedTo=n.systemId}).fail(function(e){r.ajaxFailMessenger(e,"submitKeys")}).always(function(){n.inSubmit=!1})}}}),d=function(t,n,i,o){var u=t.data("ticket-id").toString();t.tooltip("hide").tooltip("destroy"),t.remove(),n.issue.externalSystemIssues=_.reject(n.issue.externalSystemIssues,function(e){return e.ticketId===u}),s.removeTicket({issues:[{issue:n.issue,test_item_id:n.id}]}).done(function(t){i&&e("[data-ticket-id='"+u+"']",i).remove(),_.isFunction(o)&&o(),r.ajaxSuccessMessenger("removeTicket")}).fail(function(e){r.ajaxFailMessenger(e)})},v={tpl:"tpl-launch-grid-defect-ticket",attachListener:function(t){var n=this,i={},o=null,u=function(e){e.parent().find(".tooltip.in").remove()},a=function(e,t){var s=r.templates(n.tpl,t);e.attr("data-original-title",s).tooltip("fixTitle"),t.status&&e.addClass(t.status.toLocaleLowerCase().replaceAll(" ","_")),o==t.id||_.isUndefined(t.id)?e.tooltip("show"):e.tooltip("hide"),delete i[t.id],e.addClass("loaded")};t.off("show.bs.tooltip"),t.on("show.bs.tooltip",".external-ticket:not(.loaded)",function(t){var n=e(t.currentTarget),r=n.data("ticket-id"),u=n.data("system-id");o=r;if(i[r])return;i[r]=!0,s.getBtsTicket(r,u).then(function(e){a(n,e)},function(){a(n,{status:"Error",id:r})})}).on("show.bs.tooltip",".external-ticket.loaded",function(t){var n=e(t.currentTarget);o=n.data("ticket-id"),u(n)})}};return{Editor:c,PostBug:h,LoadBug:p,removeTicket:d,TicketManager:v}}),define("core/StickyHeader",["require","exports","module","app"],function(e,t,n){"use strict";var r="fixed-block",i=e("app"),s=i.getInstance(),o=function(e){if(!e.fixedBlock||e.fixedBlock.length==0){console.log("StickyHeader: fixed block not defined");return}this.topMargin=e.topMargin||0,this.minWidthWindow=e.minWidthWindow||0,this.originBlock=e.fixedBlock,this.clearOriginBlock(),this.cloneBlock=this.originBlock.clone(),this.scrollTop=s.mainScrollElement.scrollTop(),this.isShow=null,this.activate=!0,this.checkWindowWidth($(window).width()),this.originBlock.after(this.cloneBlock),this.sync(),this.bindScrollChange=this.scrollChange.bind(this),this.bindResize=this.resize.bind(this),$.subscribe("scroll:change",this.bindScrollChange),$.subscribe("window:resize",this.bindResize),this.checkScroll()};return o.prototype.scrollChange=function(e,t){this.activate&&(this.scrollTop=t.top,this.isShow||this.sync(),this.checkScroll())},o.prototype.resize=function(e,t){this.checkWindowWidth(t.width),this.sync(),this.checkScroll()},o.prototype.checkWindowWidth=function(e){e<this.minWidthWindow?(this.activate=!1,this.hide(),this.clearOriginBlock()):this.activate=!0},o.prototype.sync=function(){var e=this.cloneBlock;this.isShow||(e=this.originBlock),this.originBlockTop=e.offset().top+this.scrollTop-this.topMargin,this.syncWidth()},o.prototype.syncWidth=function(){this.isShow&&this.originBlock.width(this.cloneBlock.width())},o.prototype.checkScroll=function(){this.activate&&(this.scrollTop>=this.originBlockTop?this.show():this.hide())},o.prototype.show=function(){if(this.isShow==null||!this.isShow)this.isShow=!0,this.originBlock.addClass(r).css({top:this.topMargin}),this.cloneBlock.css({display:"block"}),this.syncWidth()},o.prototype.hide=function(){if(this.isShow==null||this.isShow)this.isShow=!1,this.clearOriginBlock(),this.cloneBlock.css({display:"none"})},o.prototype.clearOriginBlock=function(){this.originBlock.removeClass(r).attr("style","")},o.prototype.updateClone=function(){this.cloneBlock.remove(),this.cloneBlock=this.originBlock.clone(),this.cloneBlock.addClass(r).css({top:0}),this.sync(),this.originBlock.after(this.cloneBlock),this.checkScroll()},o.prototype.destroy=function(){this.originBlock&&(this.cloneBlock.remove(),this.clearOriginBlock()),$.unsubscribe("scroll:change",this.bindScrollChange),$.unsubscribe("window:resize",this.bindResize)},o}),define("log",["require","exports","module","backbone","core/components","defectEditor","util","app","dataUrlResolver","core/StickyHeader","markitup","markitupset","coreService","filter/filters","moment"],function(e,t,n){"use strict";var r=e("backbone"),i=e("core/components"),s=e("defectEditor"),o=e("util"),u=e("app"),a=e("dataUrlResolver"),f=e("core/StickyHeader"),l=e("markitup"),c=e("markitupset"),h=e("coreService"),p=e("filter/filters"),d=e("moment"),v=u.getInstance(),m=i.BaseView.extend({initDone:!1,historyPanel:null,defectEditor:null,levelFilter:null,messageFilter:null,historyFilter:new p.Model({id:"log.state.history",noConditions:!0}),historyPrevVal:null,initialize:function(e){this.$el=e.element,this.navigationInfo=e.navigationInfo,this.user=e.user,this.project=e.project,this.historyItems=null,this.$currentLogId=e.navigationInfo.last().get("data").id,this.inMultyRuns=!1,this.restoreHistoryFilter(),this.listenTo(this.navigationInfo,"open::gallery::at::index",this.openGallery),this.listenTo(this.navigationInfo,"defect::updated",this.reLoadDefect),this.listenTo(this.navigationInfo,"log::update::filters",this.updateFilters),this.listenTo(this.navigationInfo,"open::post::bug",this.postBug),this.listenTo(this.navigationInfo,"open::load::bug",this.loadBug),this.rotationOptions=["rotated-90","rotated-180","rotated-270"]},tpl:"tpl-log-panel",tplGalleryContent:"tpl-log-gallery-content",tplDefectStatic:"tpl-launch-grid-defect-type",historyTpl:"tpl-logs-defect-control",historyItemTpl:"tpl-logs-defect-item",render:function(){return this.$el.html(o.templates(this.tpl)),this.galleryHolder=$("#logGallery",this.$el),this.imageBlockCollapse=$("#imageBlockCollapse",this.galleryHolder),this.historyHolder=$("#logHistory",this.$el),this.historyWell=$("#historyWell",this.$el),this.defectWell=$("#defectWell",this.$el),this.activityWell=$("#activityWell",this.$el),this.filterHolder=$("#logFilter",this.$el),this.validateForHistory(),this.renderFilter(),this.renderLogHeaderPanel(),this},restoreHistoryFilter:function(){var e=this.navigationInfo.getRequestData(),t=e["log.state.history"]||null;this.historyFilter.set("value",t)},renderFilter:function(){this.levelFilter=(new p.MultiButtonFilter({navigationInfo:this.navigationInfo,element:this.filterHolder,id:"level",condition:"in",values:["TRACE","DEBUG","INFO","WARN","ERROR"],triggerEvent:"log::update::filters"})).render(),this.screenShotsFilter=(new p.ButtonFilter({navigationInfo:this.navigationInfo,element:$("#ScreenshotsFilter",this.$el),id:"binary_content$id",condition:"ex",name:"Screenshot",triggerEvent:"log::update::filters"})).render(),this.filters=[this.levelFilter,this.screenShotsFilter]},getCurrentFilters:function(){var e=this.messageModel.value?this.messageModel:null,t=this.levelFilter.getParams(),n=this.screenShotsFilter.getParams();return[e,t,n,this.historyFilter.asParameter()]},clearFilters:function(e){_.each(this.filters,function(t){var n=t.data,r=["filter",n.get("condition"),n.get("id")].join(".");_.contains(_.keys(e),r)||t.clearButtons()}),this.clearMessageFilter(e)},clearMessageFilter:function(e){_.contains(_.keys(e),"filter.cnt.message")||(this.messageModel.value="",this.$messageFilter.val(""))},flipSorting:function(){var e=this.$sortByTime.hasClass("ASC")?"DESC":"ASC";this.$sortByTime.attr("class","rp-table-th "+e),this.applyState()},updateFilters:function(){this.navigationInfo.requestParameters.setPage(1),this.applyState()},applyState:function(){this.navigationInfo.requestParameters.setFilters(this.getCurrentFilters()),this.navigationInfo.requestParameters.setSortInfo("time",this.$sortByTime.hasClass("ASC")?"ASC":"DESC"),this.navigationInfo.applyRequestParameters()},validateForHistory:function(){this.loadHistory()},renderActivities:function(){var e=this.historyFilter.get("value")||this.navigationInfo.last().get("data").id;this.activityView&&(this.activityView.destroy(),this.activityView=null);if(this.inMultyRuns)return;this.activityView=new g({element:this.activityWell,navigationInfo:this.navigationInfo,project:this.project,user:this.user,id:e})},reLoadDefect:function(){var e=this.getCurrentHistoryItem(),t=e?e.id:this.$currentLogId;h.getDefectItem(t).success(function(e){_.forEach(this.historyItems.models,function(t,n){var r=t.get("items")[0];if(r&&r.id===e.id){t.set("items",[e]),this.historyItems.models[n].set("items",[e]);if(!this.inMultyRuns){var i=o.templates(this.historyItemTpl,{item:t.toJSON(),textile:Textile,getIssueType:o.getIssueType,defectTypes:this.navigationInfo.defectTypes,step:this.getHistoryLog(t,this.$currentLogId),logId:this.$currentLogId});i&&$(".progress-bar.activeItem",this.historyWell).html(i)}return!1}}.bind(this)),this.renderDefect()}.bind(this)),this.validateForHistory()},renderDefect:function(){var e=this.getCurrentHistoryItem();if(this.inMultyRuns){this.defectWell.empty().hide();return}if(e&&e.issue){var t=this.navigationInfo.at(1).get("data"),n=o.canStartMatchIssues(t),r=this.navigationInfo.last().get("data");this.defectWell.html(o.templates(this.tplDefectStatic,{item:e,getIssueType:o.getIssueType,defectTypes:this.navigationInfo.defectTypes,textile:Textile,needMatch:!this.navigationInfo.isDebug()&&n&&r.id===e.id,canMatchIssue:n,launchInProcess:t&&t.isProcessing})).show()}else this.navigationInfo.trigger("log::post::bug",{action:"noissues"}),this.defectWell.hide()},postBug:function(){this.postBugView&&(this.postBugView=null),this.postBugView=(new s.PostBug({settings:v.forSettings,user:v.userModel.toJSON(),systems:v.project.configuration.externalSystem,items:[this.getCurrentHistoryItem()],selected:1,ulr:window.location.href})).render(),this.listenTo(this.postBugView,"defect::updated",this.reLoadDefect)},loadBug:function(){this.loadBugView&&(this.loadBugView=null),this.loadBugView=(new s.LoadBug({items:[this.getCurrentHistoryItem()],systems:v.project.configuration.externalSystem})).render(),this.listenTo(this.loadBugView,"bug::loaded",this.reLoadDefect)},loadHistory:function(){h.loadHistory(this.$currentLogId).done(function(e){this.clearLastHistoryStep(e),this.historyItems=new y(e,{parse:!0}),_.isEmpty(e)?this.historyWell.hide():(this.navigationInfo.isDebug()||this.historyWell.html(o.templates(this.historyTpl,{items:this.historyItems.toJSON(),textile:Textile,defectItemTpl:this.historyItemTpl,defectTypes:this.navigationInfo.defectTypes,getCurrentLogTypeCls:this.getCurrentLogTypeCls,getHistoryLog:this.getHistoryLog,id:this.$currentLogId,util:o})).show(),this.attachEventsToHistory(),this.renderActivities())}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"loadHistory")})},getCurrentLogTypeCls:function(e,t){var n=e.items,r=_.find(n,function(e){return e.id===t}),i="";return r?(r.status=="FAILED"||r.status=="INTERRUPTED"?i="progress-bar-danger":r.status=="PASSED"?i="progress-bar-success":r.status=="SKIPPED"?i="progress-bar-skip":r.status=="IN_PROGRESS"?i="progress-striped progress-bar-inprogress":r.status=="RESETED"&&(i="progress-bar-reseted"),e.launchStatus=="INTERRUPTED"?i+=" progress-bar-interupt":e.launchStatus=="IN_PROGRESS"&&(i+=" progress-striped active")):i=e.cls,i},clearLastHistoryStep:function(e){var t=_.max(_.keys(e),function(e){return+e});e[t]&&e[t].length>1&&(e[t]=_.reject(e[t],function(e){return e.id!==this.$currentLogId}.bind(this)))},setupActiveHistoryByElement:function(e){if(!e||!e.length){e=$(".progress-bar:last",this.historyWell);if(!e.length)return}var t="";return $(".navigation-item").remove(),this.$currentLogId===e.data("id")?(this.historyWell.find(".activeItem").removeClass("activeItem"),e.addClass("activeItem"),t=this.navigationInfo.launchIsProcessing(this.navigationInfo.last().get("data"))?"isProcessing":"remove"):(e.closest(".history-cont").addClass("activeItem"),e.closest(".history-cont").find(".activeItem").removeClass("activeItem"),e.closest(".progress-bar").addClass("activeItem"),t="add"),this.navigationInfo.trigger("log::post::bug",{action:t}),e.data("id")},attachEventsToHistory:function(){this.historyWell.tooltip({selector:'[data-toggle="tooltip"]',html:!0,placement:"auto top"}),this.defectWell.tooltip({selector:'[data-toggle="tooltip"]',html:!0}),s.TicketManager.attachListener(this.defectWell),$(".progress-bar:last",this.historyWell).addClass("last"),this.setupDefectByHistory(),this.historyWell.on("click",".progress-bar",function(e){var t=$(e.currentTarget);if(t.hasClass("activeItem")||t.hasClass("progress-bar-empty"))return;var n=$(".progress-bar.activeItem:first",this.historyWell),r=$(".progress-bar",this.historyWell),i=r.index(n)-r.index(t);this.historyFilter.set("value",t.data("id")),this.applyState()}.bind(this))},setupDefectByHistory:function(){var e=this.historyFilter.get("value")||this.$currentLogId,t=e?$("[data-id='"+e+"']",this.historyWell):$(".progress-bar:last",this.historyWell);this.setupActiveHistoryByElement(t),this.renderDefect()},getCurrentHistoryItem:function(){var e=this.historyFilter.get("value")||this.$currentLogId,t;return this.historyItems&&(e?(t=_.find(this.historyItems.models,function(t){var n=t.get("items");return _.find(n,function(t){return t.id===e})}),this.inMultyRuns=e===this.$currentLogId?!1:t&&t.get("type")==="WARNING"):(t=this.historyItems.last(),this.inMultyRuns=!1)),this.getHistoryLog(t,this.$currentLogId)},getHistoryLog:function(e,t){var n=null;if(e){var r=_.isFunction(e.get)?e.get("items"):e.items;n=_.find(r,function(e){return e.id===t},this),n||(n=r[0])}return n},events:{"click #galleryToggler":"renderGalleryContent","click .js-navigation-next":"slideThumb","click .js-navigation-prev":"slideThumb","slide.bs.carousel #launchesCarousel":"slideCarousel","click .carousel-caption":"scrollToMessage","click .rotate-image":"rotateImage","click .defect-type":"openDefectEditor","click .external-ticket a":"followToExternalSystem","click .external-ticket":"followToExternalSystem",'click [data-js-event="removeTicket"]':"removeTicket","click .match-issue":"matchIssue","click #sortByTime":"flipSorting","validation::change #messageFilter":"submitMessageFilter","click .defect-desc .rp-blue-link-undrl":"preventPropagation","click .activity-str .rp-blue-link-undrl":"preventPropagation","click a.edit-defect":"preventDefaultAction"},preventDefaultAction:function(e){e.preventDefault()},preventPropagation:function(e){e.stopImmediatePropagation()},rotateImage:function(e){e.stopImmediatePropagation();var t=$(e.currentTarget).closest(".item").find("img:first"),n=t.data("rotation"),r="";if(!n)r=this.rotationOptions[0];else{var i=_.indexOf(this.rotationOptions,n);r=i+1===this.rotationOptions.length?"":this.rotationOptions[i+1]}t.attr("class","img-responsive "+r).data("rotation",r)},matchIssue:function(e){e.stopImmediatePropagation(),e.preventDefault();var t=$(e.currentTarget),n=this,r;!t.hasClass("disabled")&&!t.hasClass("autoanalyze")&&(t.addClass("autoanalyze").addClass("label-danger"),r=this.navigationInfo.at(1).get("data"),r.isProcessing=!0,this.navigationInfo.trigger("match::issues::action"),this.navigationInfo.trigger("log::post::bug",{action:"isProcessing"}),this.navigationInfo.trackForLaunchProcessing(h.startLaunchMatch(r.id),r.id))},submitMessageFilter:function(e,t){t.valid&&(this.messageModel.value=t.value,this.applyState())},renderLogHeaderPanel:function(){this.$messageFilter=$("#messageFilter",this.$el),o.bootValidator(this.$messageFilter,[{validator:"minMaxNotRequired",type:"logMessage",min:3,max:55}]),this.messageModel={id:"filter.cnt.message",value:""};var e=this.navigationInfo.getCurrentFilterValue(this.messageModel.id);e&&(this.messageModel.value=e,this.$messageFilter.val(e)),this.$sortByTime=$("#sortByTime",this.$el)},removeTicket:function(e){e.stopImmediatePropagation(),e.preventDefault();var t=$(e.currentTarget),n=t.closest("div.defect-type "),r=n.hasClass("disabled")||n.parent().hasClass("disabled");if(!r){var i=$(e.currentTarget).closest(".badge"),o=i.closest("#defectWell");s.removeTicket(i,this.getCurrentHistoryItem(),o,function(){this.reLoadDefect()}.bind(this))}},followToExternalSystem:function(e){e.stopImmediatePropagation()},$editor:null,openDefectEditor:function(e){var t=this.navigationInfo.last().get("data");if(!this.navigationInfo.launchIsProcessing(t)){var n=$(e.currentTarget),t=this.getCurrentHistoryItem(),r=$("<div/>").insertAfter(n);this.$editor=(new s.Editor({element:r,origin:n,item:t,selected:1,navigationInfo:this.navigationInfo,defectCallBack:"defect::updated"})).render()}},slideCarousel:function(e){var t=$(e.relatedTarget).index(),n=$(".navigation-item",this.$el);$(".selected:first",this.$el).removeClass("selected"),$(n[t]).addClass("selected")},slideThumb:function(e){var t=$(e.currentTarget),n=t.closest("#slider-thumbs").find(".navigation-items"),r=n.position().left,i=972-n.width();t.hasClass("js-navigation-next")?(r-=250,r<=i&&(r=i)):(r+=250,r>=0&&(r=0)),n.stop().animate({left:r},400)},renderGalleryContent:function(){$("#galleryContent",this.galleryHolder).html(o.templates(this.tplGalleryContent,{collection:this.binaryCollection,updateImagePath:o.updateImagePath,dataUrl:a.getFile()})),setTimeout(function(){var e=$(".navigation-item",this.galleryHolder),t=0;_.each(e,function(e){t+=$(e).outerWidth()}),t&&$(".navigation-items:first").css("width",t+"px")},2e3)},parseCollectionForImages:function(e){this.imageBlockCollapse.removeClass("in").attr("style","");if(e&&e.length){this.binaryCollection=_.filter(e.toJSON(),function(e){return e.binary_content!==undefined&&e.binary_content.thumbnail_id!==undefined});var t=this.binaryCollection&&this.binaryCollection.length?"show":"hide";this.galleryHolder[t]()}else $("#galleryContent",this.galleryHolder).empty(),this.imageBlockCollapse.removeClass("in"),this.galleryHolder.hide(),this.binaryCollection=null},openGallery:function(e){var t=$(".navigation-item",this.$el);t.length?$(".selected",this.$el).removeClass("selected"):(this.renderGalleryContent(),t=$(".navigation-item",this.$el)),this.imageBlockCollapse.addClass("in").attr("style",""),$(t[e]).click(),v.mainScrollElement.animate({scrollTop:0},200)},scrollToMessage:function(e){var t=$(e.currentTarget).data("content-id");o.scrollToHighlight(t)},update:function(e){this.parseCollectionForImages(e);var t=this.navigationInfo.getRequestData(),n=t["log.state.history"];this.historyFilter.set("value",n),this.clearFilters(t);if(this.initDone){var r=this.navigationInfo.last().get("data").id;if(this.$currentLogId===r){var i=n?$("[data-id='"+n+"']",this.historyWell):$(".progress-bar:last",this.historyWell);this.setupActiveHistoryByElement(i),this.getCurrentHistoryItem()&&this.reLoadDefect()}else this.$currentLogId=r,this.validateForHistory()}else this.initDone=!0;_.delay(function(){$("html,body").trigger("scroll")},500)}}),g=i.BaseView.extend({initialize:function(e){this.$container=e.element,this.navigationInfo=e.navigationInfo,this.project=e.project,this.user=e.user,this.itemId=e.id,this.loadActivity()},loadActivity:function(){h.loadActivityItems(this.itemId).done(function(e){e.length>0?(this.activityItems=new r.Collection(e),this.render()):(this.$el&&this.$el.attr("style",""),this.destroy())}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"loadActivityItems")})},tplActivityPanel:"tpl-logs-activity-panel",render:function(){var e=this.activityItems.toJSON();_.each(e,function(e){e.fullTime=o.dateFormat(e.lastModifiedDate),e.momentTime=d(o.dateFormat(e.lastModifiedDate)).fromNow(),e.fullUserName=e.userRef.replace("_"," "),e.field=_.size(e.history)>1?"issue":_.first(Object.keys(e.history)).split("_").join(" ");var t=e.actionType.split("_");t[0]=t[0].match("e$")?t[0]+"d":t[0]+"ed",e.actionType=t.join(" ");if(e.history.comment&&!_.isEmpty(e.history.comment)){var n=e.history.comment.newValue,r=e.history.comment.oldValue;$.trim(r)==$.trim(n)&&delete e.history.comment}});var t={last:_.first(e),items:_.rest(e),user:this.user,url:o.hasExternalSystem()?this.project.configuration.externalSystem[0].url:"",renderTicket:this.renderTicket,textile:Textile};this.$container.append(this.$el.html(o.templates(this.tplActivityPanel,t)).attr("style","")),this.$accordion=$("#accordion",this.$el),o.hoverFullTime(),this.stickyHeader&&this.stickyHeader.destroy(),this.stickyHeader=new f({fixedBlock:$(".fixed_table_header:first")});var n=this;this.$accordion.on("hidden.bs.collapse",function(){n.stickyHeader.sync()}).on("shown.bs.collapse",function(){n.stickyHeader.sync()}),this.$accordion.on("shown.bs.collapse",function(){}.bind(this))},renderTicket:function(e){var t=o.getTicketUrlId(e);return t.url?'<a target="_blank" class="rp-blue-link-undrl" href="'+t.url+'">'+t.id+"</a>":t.id},destroy:function(){this.stickyHeader&&this.stickyHeader.destroy(),this.navigationInfo=null,this.activityItems=null,this.user=null,this.$accordion=null,i.BaseView.prototype.destroy.call(this),this.$container.empty()}}),y=r.Collection.extend({parse:function(e){var t=0,n=0,r=0,i=0,s=0,o=[];_.each(e,function(e){var u={items:e.resources,launch:e.launchNumber,startTime:parseInt(e.startTime),launchNumber:parseInt(e.launchNumber),launchStatus:e.launchStatus};if(_.isEmpty(e.resources))t+=1,u.cls="progress-bar-empty",u.type="EMPTY";else if(e.resources.length>1)s+=1,u.cls="progress-bar-warning",u.type="WARNING";else{var a=e.resources[0]||e[0];a.status=="FAILED"||a.status=="INTERRUPTED"?(r+=1,u.cls="progress-bar-danger",u.type="FAILED"):a.status=="PASSED"?(n+=1,u.cls="progress-bar-success",u.type="PASSED"):a.status=="SKIPPED"?(i+=1,u.cls="progress-bar-skip",u.type="SKIPPED"):a.status=="IN_PROGRESS"?(i+=1,u.cls="progress-striped active progress-bar-inprogress",u.type="IN_PROGRESS"):a.status=="RESETED"&&(t+=1,u.cls="progress-bar-reseted",u.type="EMPTY")}u.launchStatus=="INTERRUPTED"?u.cls+=" progress-bar-interupt":u.launchStatus=="IN_PROGRESS"&&(u.cls+=" progress-striped active"),o.push(u)}),o=_.sortBy(o,"startTime");var u=4.6,a=4.6,f=100/((r+i)*u+s*a+(n+t)),l=f*u,c=f*a;return _.each(o,function(e){e.type=="PASSED"||e.type=="EMPTY"?e.width=f:e.type=="WARNING"?e.width=c:e.width=l}),o}});return{LogPanel:m,HistoryItems:y}}),define("launchgrid",["require","exports","module","jquery","backbone","core/components","util","dataUrlResolver","app","coreService","storageService","defectEditor","core/StickyHeader","launchEditor","log","localization","moment","d3","nvd3","modals/modalConfirm","bootstrap"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("core/components"),o=e("util"),u=e("dataUrlResolver"),a=e("app"),f=e("coreService"),l=e("storageService"),c=e("defectEditor"),h=e("core/StickyHeader"),p=e("launchEditor"),d=e("log"),v=e("localization"),m=e("moment"),g=e("d3"),y=e("nvd3"),b=e("modals/modalConfirm");e("bootstrap");var w=a.getInstance(),E=s.BaseView.extend({tpl:null,sortingTpl:"tpl-launch-grid-sorting-state",executionTpl:"tpl-launch-grid-statistics-cell",durationTpl:"tpl-launch-grid-duration-cell",defectTypeTpl:"tpl-launch-grid-defect-type",forceFinishTpl:"tpl-launch-warning-dialog",deleteLaunchTpl:"tpl-delete-launch-dialog",itemMenuTpl:"tpl-launch-item-menu",collapsedButtonTpl:"tpl-test-collapsed-button",dynamicTpl:function(){var e=this.type==="launch"?"suit":this.type;return"tpl-launch-"+e+"-grid"},initialize:function(e){this.$el=e.gridHolder,this.$infoHolder=e.infoHolder,this.collection=new s.GridsStore,this.urlResolver=e.urlResolver,this.navigationInfo=e.navigationInfo,this.type=this.navigationInfo.getLevelGridType(),this.url=u.getGridUrl(this.type,this.navigationInfo.isDebug()),S(this),this.tpl=this.dynamicTpl(),this.listenTo(this.navigationInfo,"analyze:is:over",this.onPage),this.listenTo(this.navigationInfo,"navigation::compare::hide",this.setupStickyHeader),this.listenTo(this.navigationInfo,"navigation::merge::hide",this.setupStickyHeader),this.statusPreconditions=l.getPreconditionMethodsStatus(),this.inProgress=[];var t=this;_.isEmpty(this.navigationInfo.defectTypes.models)?this.navigationInfo.defectTypes.on("reset",_.bind(this.validateForLoad,this)):this.validateForLoad()},validateForLoad:function(){this.type&&this.load()},load:function(e,t){var n={url:this.url,reset:!0,success:this.onDataLoad.bind(this),error:this.onDataLoadException.bind(this),data:this.navigationInfo.getRequestData()};typeof this.preLoad=="function"&&this.preLoad(n),this.collection.fetch(n),this.gridScrollTop=t},onPageCount:function(){this.navigationInfo.applyPageCount()},onPage:function(e,t){this.navigationInfo.trigger("reset::counter"),this.navigationInfo.applyPaging(e,t),this.load()},onDataLoad:function(e){if(!this.navigationInfo)return;if(this.navigationInfo.isAllCases()){this.isAllCases=!0;var t=_(e.toJSON()).chain().sortBy(function(e){var t=_.keys(e.path_names);return e.path_names[t[1]]}).sortBy(function(e){var t=_.keys(e.path_names);return e.path_names[t[0]]}).value();this.collection.reset(t)}else this.isAllCases=!1;this.navigationInfo.trigger("grid::data::loaded",{size:e.length}),this.render(),this.checkForInProgress(e),o.hoverFullTime()},checkForInProgress:function(e){this.clearTimer();if(this.navigationInfo.isLaunches()){var t=this;_.forEach(e.models,function(e){e.get("status")===w.launchStatus.inProgress&&t.inProgress.push(e.get("id"))}),this.inProgress.length&&this.startTimer()}},startTimer:function(){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.verifyStateChanges()},w.launchVerifyDelay)},verifyStateChanges:function(){var e=this;f.checkForStatusUpdate(this.inProgress).done(function(t){if(!e.inProgress.length){e.clearTimer();return}e.renderApproximateTime();var n=[];_.forEach(t,function(t,r){t===w.launchStatus.inProgress?n.push(r):e.finishApproximateTime(r)});if(n.length){var r=e.inProgress.length-n.length;r<0?e.clearTimer():(r>0&&(e.navigationInfo.trigger("refresh::counter",r,!0),e.inProgress=n,e.difference=r),e.startTimer())}else e.navigationInfo.trigger("refresh::counter",e.inProgress.length),e.clearTimer()}).fail(function(t){e.clearTimer()})},clearTimer:function(){this.timer&&(this.inProgress=[],clearTimeout(this.timer))},onDataLoadException:function(e,t){t&&o.ajaxFailMessenger(t,"gridData")},renderApproximateTime:function(){var e=[];_.isEmpty(this.inProgress)?e=this.getLaunchesInProgress():_.each(this.inProgress,function(t){var n=this.collection.get(t);n&&e.push(n.toJSON())},this),_.isEmpty(e)||_.each(e,function(e){this.updateApproximateTime(e)},this)},getLaunchesInProgress:function(){return _.filter(this.collection.toJSON(),function(e){return e.status===w.launchStatus.inProgress})},finishApproximateTime:function(e){var t=r("#approximate-"+e,this.$el);t.length&&(t.empty(),t.closest("div").attr("title",v.launches.launchFinished))},updateApproximateTime:function(e){if(e.approximateDuration){var t=r("#approximate-"+e.id,this.$el),n=Math.round(e.approximateDuration),i=Math.round((e.start_time+n-m().unix()*1e3)/1e3),s="";if(i>0)s=i>60?v.launches.approximateTimeLeft.replace("%%%",this.approximateTimeFormat(i)):v.launches.approximateTimeLessMin;else{var o=this.approximateTimeFormat(Math.round(n/1e3)),u=this.approximateTimeFormat(Math.abs(i));t.closest("div").attr("title",[v.launches.approximateTimeExpected," ",o,", ",v.launches.approximateTimeOverLap," ",u].join(""))}t.html(s)}},approximateTimeFormat:function(e){var t=Math.floor(e/86400),n=Math.floor((e-t*86400)/3600),r=Math.floor((e-t*86400-n*3600)/60),i=e-t*86400-n*3600-r*60,s="";return t>0&&(s=s+t+"d "),n>0&&(s=s+n+"h "),r>0&&(s=s+r+"m"),s===""&&i>0?s=i+"s":s===""&&i===0&&(s=Math.round(e/10)/100+"s"),s},getTemplateData:function(){var e=this,t=e.navigationInfo.getTabAsUrlString();return{navigationInfo:e.navigationInfo,collection:e.collection?e.collection.toJSON():[],root:e.root,util:o,validateForPreconditions:e.validateForPreconditions,statusPreconditions:e.statusPreconditions,renderSorting:function(t){return o.templates(e.sortingTpl,{filter:e.navigationInfo.requestParameters.getSortInfo(),currentId:t})},renderStatics:function(n,r,i){return o.templates(e.executionTpl,{urlResolver:e.urlResolver,item:r,type:n,shifted:i,defectTypes:e.navigationInfo.defectTypes,getDefectColor:e.getDefectColor,tab:t})},renderDuration:function(t){return o.templates(e.durationTpl,{item:t,util:o,validator:e.navigationInfo.getValidator()})},renderDefect:function(t){return o.templates(e.defectTypeTpl,{item:t,defectTypes:this.navigationInfo.defectTypes,textile:Textile})},urlResolver:e.urlResolver,getTabUrl:function(){return t},tagSorter:function(e){return _.sortBy(e,function(e){return e.toUpperCase()==="BUILD"||e.indexOf("uild")!==-1})},canEdit:e.canEdit,validator:e.navigationInfo.getValidator(),dataUrl:u.getFile(),isAllCases:e.isAllCases,isValidForParent:function(e,t){return _.isEmpty(t)||!_.isEqual(e.path_names,t)?(t=e.path_names,t):!1},getSuitUrl:function(t){return e.navigationInfo.getUrlForSuit(t)}}},fixLogs:function(){var e=/\\u([\d\w]{4})/gi;r(".pre-view, .log-preview").each(function(){var t=r(this).html().replace(/&lt;br&gt;/gi,"<br>").replace(/&lt;br &gt;/gi,"<br>").replace(/<br\/>/gi,"<br>").replace(/<br \/>/gi,"<br>").split("<br>");r(this).empty();var n=t.length;for(var i=0;i<n;i++){var s=t[i];!s||(s=s.replace(e,function(e,t){return String.fromCharCode(parseInt(t,16))}),s=unescape(s),r(this).append(r.trim(s.replace(/<br>/gi,"").replace(/&lt;br&gt;/gi,""))+(n-1!=i?"<br>":"")))}})},validateForPreconditions:function(e){return e.type!=="STEP"&&e.type!=="SUIT"&&e.status!=="FAILED"},togglePreconditionMethods:function(e){e.preventDefault();var t=r("div.method-collapsed",this.$el);this.statusPreconditions=="show"?this.onSwitcher(t):this.offSwitcher(t),l.setPreconditionMethodsStatus(this.statusPreconditions),e.stopPropagation()},setPreconditionMethods:function(e){return!0},updateStatusMethodCollapsed:function(e,t){e.removeClass("method-collapsed-"+this.statusPreconditions),e.addClass("method-collapsed-"+t),this.statusPreconditions=t},onSwitcher:function(e){this.setPreconditionMethods("ON"),this.updateStatusMethodCollapsed(e,"hide"),r("#collapseMethodBtn .rp-switcher",this.$el).attr("title",v.launches[this.statusPreconditions+"PreconditionMethods"]),r("#collapseMethodBtn .rp-switcher input",this.$el).prop("checked",!0),this.toggleCollapsedRows(this.statusPreconditions,!0)},offSwitcher:function(e){this.setPreconditionMethods("OFF"),this.updateStatusMethodCollapsed(e,"show"),r("input.select-test",e).prop("checked",!1),r("div.row.rp-table-row",e).removeClass("selected"),r("#collapseMethodBtn .rp-switcher",this.$el).attr("title",v.launches[this.statusPreconditions+"PreconditionMethods"]),r("#collapseMethodBtn .rp-switcher input",this.$el).prop("checked",!1),this.toggleCollapsedRows(this.statusPreconditions,!0)},toggleCollapsedRows:function(e,t){var n=r("div.method-collapsed",this.$el),i=e==="show"?.5:1,s=t?1:400;n.stop().fadeTo(s,i)},renderCollapseButtons:function(){r("#add-collapse-method",this.$el).append(o.templates(this.collapsedButtonTpl,{statusPreconditions:this.statusPreconditions}));var e=r("#collapseMethodBtn",this.$el),t=this;e.on("mouseenter",function(){t.statusPreconditions=="show"&&t.toggleCollapsedRows("show")}),e.on("mouseleave",function(){t.statusPreconditions=="show"&&t.toggleCollapsedRows("hide")})},gridScrollTop:0,updateStartTime:function(){var e=this.collection.toJSON();_.each(e,function(e){var t=r("#"+e.id,this.$el),n=r("span.from-now",t),i=r("span.exact-time",t),s=o.dateFormat(e.start_time);n.html(o.fromNowFormat(s)),i.html(s)},this)},startUpdateStartTime:function(){var e=this;this.upStartTimer&&clearTimeout(this.upStartTimer),this.upStartTimer=setTimeout(function(){e.updateStartTime(),e.startUpdateStartTime()},6e4)},clearUpdateStartTime:function(){this.upStartTimer&&clearTimeout(this.upStartTimer)},render:function(){var e=this;r("#compareGrid, #mergeGrid").length||this.$el.show(),this.$el.html(o.templates(this.tpl,e.getTemplateData())),this.type!=="test"&&this.type!=="log"&&this.renderDefects(),this.type=="test"&&this.renderCollapseButtons(),this.renderApproximateTime(),this.fixLogs(),this.$el.addClass(l.getStartTimeMode()==="exact"?"exact-driven":""),this.$el.append("<div id='pagingHolder'></div>"),this.paging&&this.paging.destroy(),this.paging=new s.PagingToolbarConfigSave({el:r("#pagingHolder",this.$el),model:new i.Model(this.collection.page),pageType:this.navigationInfo.getLevelGridType()==="log"?"objectsOnPageLogs":"objectsOnPage"}),this.paging.render(),this.listenTo(this.paging,"page",this.onPage),this.listenTo(this.paging,"count",this.onPageCount),this.type=="launch"?this.startUpdateStartTime():this.clearUpdateStartTime(),this.type==="log"?this.addTestItemsNav():r("#testItemsNav").is(":visible")&&this.navigationInfo.trigger("grid::testitems::loaded","hide"),r(".collapseLogs").on("shown.bs.collapse",function(){e.fixLogs()}).on("hidden.bs.collapse",function(){e.fixLogs()}).on("show.bs.collapse",function(){e.fixLogs()}).on("hide.bs.collapse",function(){e.fixLogs()}),(!this.gridScrollTop||this.gridScrollTop<=0)&&this.scrollToOrigin(this.navigationInfo.scrollToDestinationId),this.navigationInfo.scrollToDestinationId=this.navigationInfo.last().get("id").replace("all-cases-for-",""),typeof this.postRender=="function"&&this.postRender(),this.setupStickyHeader(),r(".badge").on("show.bs.tooltip",function(){r(".tooltip").not(this).hide()});for(var t=0;t<w.deletingLaunches.length;t++)o.showOverlay(".rp-table-row[data-id="+w.deletingLaunches[t]+"]");return r(".nicescroll-it, .shifted",this.$el).each(function(){var e=r(this).height();if(e>300){e=300;var t=o.setupBaronScroll(r(this)),n=t.parent(".baron__root");n.height(e)}}),this},setupStickyHeader:function(){this.destroyStickyHeader(),this.stickyHeader=new h({fixedBlock:r("#headerBar"),topMargin:0}),this.stickyTable=new h({fixedBlock:r(".fixed_table_header:first",this.$el),topMargin:47})},destroyStickyHeader:function(){this.stickyHeader&&this.stickyHeader.destroy(),this.stickyTable&&this.stickyTable.destroy()},events:{"click .sortable":"applySort","click .navigateable":"pushCurrentItemToTheNavigation","click a.cases-view":"pushCurrentItemToTheNavigation","click .show-time":"toggleStartTimeView","click .tag":"applyTag","click .launch-mode-switch":"switchLaunchMode","click .item-menu:not(.rendered)":"renderItemMenu","click .edit-item":"showEdit","click .delete-item":"showDeleteModal","click .start-analyze":"startAnalyzeAction","click .match-issues":"startAnalyzeAction","click .force-finish":"stopLaunch","click .rp-export-btn-group a":"exportLaunch","mouseenter .pr-grid-defect-stats":"showDefectTooltip","click [data-toggle-switch]":"togglePreconditionMethods"},renderDefects:function(){var e=this.collection?this.collection.toJSON():[];_.each(e,function(e){var t=r("#"+e.id,this.$el),n=r(".pr-grid-defect-stats",t),i=e.statistics.defects;_.each(n,function(t){var n=r(t),s=n.data("defectType"),o=i[s],u="defect-"+e.id+"-"+s;this.drawPieChart(o,u)},this)},this)},getDefectChartData:function(e){var t=[];return _.each(e,function(e,n){if(n!=="total"){var r=this.navigationInfo.defectTypes,i=r.getDefectType(n);i&&t.push({color:i.color,key:i.longName,value:parseInt(e)})}},this),t},showDefectTooltip:function(e){var t=r(e.currentTarget),n=t.data("defectType");t.data("tooltip")||(t.data("tooltip","tooltip"),this.createDefectTooltip(t,n))},exportLaunch:function(e){var t=r(e.currentTarget);if(t.hasClass("disabled"))return!1},createDefectTooltip:function(e,t){var n=e.closest(".row.rp-table-row").data("id"),r=this.renderDefectsTooltip(n,t);e.append(r)},toolTipContent:"tpl-launches-tooltip-defects",renderDefectsTooltip:function(e,t){var n=this.collection.get(e),r=n.get("statistics"),i=r.defects[t],s={total:i.total,defects:[],type:t,item:n.toJSON(),noSubDefects:!this.navigationInfo.defectTypes.checkForSubDefects(),tab:this.navigationInfo.getTabAsUrlString(),color:this.getDefectColor(i,t,this.navigationInfo.defectTypes),urlResolver:this.urlResolver};return _.each(i,function(e,t){if(t!=="total"){var n=this.navigationInfo.defectTypes,r=n.getDefectType(t);r&&(r.val=parseInt(e),s.defects.push(r))}},this),s.defects.sort(o.sortSubDefects),o.templates(this.toolTipContent,s)},getDefectColor:function(e,t,n){var r=w.patterns.defectsLocator,i=_.findKey(e,function(e,t){return r.test(t)});if(i){var s=n.getDefectType(i);if(s)return s.color}return o.getDefaultColor(t)},drawPieChart:function(e,t){var n,r=48,i=48,s=this.getDefectChartData(e);return n=y.models.pie().x(function(e){return e.key}).y(function(e){return e.value}).width(r).height(i).showLabels(!1).donut(!0).growOnHover(!1).donutRatio(.4).startAngle(function(e){return e.startAngle-Math.PI/2}).endAngle(function(e){return e.endAngle-Math.PI/2}).color(function(e){return e.data.color}).valueFormat(g.format("f")),g.select("#"+t+" svg").datum([s]).call(n),n},renderItemMenu:function(e){var t=r(e.currentTarget),n=this.collection.get(t.data("id")).toJSON(),i={item:n,isLaunchInProgress:this.launchInProgress(n),canEdit:this.canEdit(n),canDeleteLaunch:this.canDeleteLaunch(n),util:o};this.navigationInfo.isLaunches()&&_.extend(i,{validator:this.navigationInfo.getValidator(),isCustomer:o.isCustomer(),isDebug:this.navigationInfo.isDebug(),canMatchIssues:o.canStartMatchIssues(n),getExportUrl:u.exportLaunchUrl,exportFormats:["pdf","xls","html"]}),_.extend(i,{validator:this.navigationInfo.getValidator()}),t.after(o.templates(this.itemMenuTpl,i)).addClass("rendered").dropdown()},canDeleteLaunch:function(e){var t=w.userModel.toJSON(),n=t.projects[w.project.projectId].projectRole,r=w.projectRoles.indexOf(n);return o.isAdmin(t)||r>1||e.owner===t.user_login||this.navigationInfo.isLaunchOwner()},canEdit:function(e){var t=this.navigationInfo.isLaunches()?w.userModel.get("name")===e.owner:this.navigationInfo.isLaunchOwner();return t||o.isInPrivilegedGroup()},launchInProgress:function(e){var t=!1;if(e.launchId){var n=_.find(this.navigationInfo.models,function(t){var n=t.get("data");return n?n.id===e.launchId:!1});if(n){var r=n.get("data");r&&(t=r.status===w.launchStatus.inProgress)}}return t},startAnalyzeAction:function(e){e.preventDefault();var t=this,n=r(e.currentTarget),i=n.data("id"),s=n.data("type")==="analyze"?"startLaunchAnalyze":"startLaunchMatch";n.hasClass("disabled")?e.stopPropagation():(n.closest(".name-cell").find(".autoanalyze:first").show(),_.forEach(n.closest(".dropdown-menu").find(".start-analyze, .match-issues"),function(e){var t=r(e);t.addClass("disabled"),t.parent().addClass("disabled")}),this.collection.get(i).set("isProcessing",!0),t.navigationInfo.trackForLaunchProcessing(f[s](i),i))},stopLaunch:function(e){e.preventDefault();var t=r(e.currentTarget),n=t.data("id");if(!t.hasClass("disabled")){var i=this;this.warningDialog||(this.warningDialog={}),this.warningDialog.editDialog=o.getDialog({name:this.forceFinishTpl,data:{name:t.data("name")}}),this.warningDialog.submitButton=r(".rp-btn-danger",this.editDialog),this.warningDialog.editDialog.on("click",".rp-btn-danger",function(e){f.finishLaunch(n).done(function(){o.ajaxSuccessMessenger("finishLaunch"),i.load();if(i.inProgress.length){var e=i.inProgress.length;i.inProgress=_.reject(i.inProgress,function(e){return e===n}),e-i.inProgress.length>0?i.navigationInfo.trigger("refresh::counter",e-i.inProgress.length):i.navigationInfo.trigger("refresh::counter",i.inProgress.length)}else i.navigationInfo.trigger("reset::counter")}).fail(function(e){o.ajaxFailMessenger(e,"finishLaunch")}),i.warningDialog.editDialog.modal("hide")}).on("change","#deleteConfirm",function(e){i.warningDialog.submitButton.prop("disabled",!r(this).is(":checked"))}).on("hidden.bs.modal",function(){r(this).data("modal",null),i.warningDialog.submitButton=null,i.warningDialog.editDialog.remove()}),this.warningDialog.editDialog.modal("show")}else e.stopPropagation()},showEdit:function(e){e.preventDefault();var t=r(e.currentTarget);if(!t.hasClass("disabled")){var n=this.navigationInfo.isLaunches()?"LaunchEditor":"ItemEditor";this.itemEditor=null,this.itemEditor=(new p[n]({item:this.collection.get(r(e.currentTarget).data("id")).toJSON(),eventBus:this.navigationInfo})).render()}else e.stopPropagation()},showDeleteModal:function(e){e.preventDefault();var t=r(e.currentTarget),n=t.data("id"),i=this;if(!t.hasClass("disabled")){var s=this.navigationInfo.isLaunches()?v.ui.launch:v.ui.item,u=new b({headerText:v.ui.delete+" "+s,bodyText:o.replaceTemplate(v.dialog.msgDeleteItems,s,s+" '"+t.data("name").bold()+"'"),confirmText:o.replaceTemplate(v.launches.deleteAgree,s+" '"+t.data("name")+"'"),cancelButtonText:v.ui.cancel,okButtonText:v.ui.delete});u.show().done(function(){return i.deleteLaunch(n)})}else e.stopPropagation()},deleteLaunch:function(e){var t=this,n=this.navigationInfo.isLaunches()?"deleteLaunch":"deleteTestItem";o.showOverlay(".rp-table-row[data-id="+e+"]"),w.deletingLaunches.push(e),function(e){f[n](e).done(function(r){t.navigationInfo&&t.navigationInfo.trigger("navigation::reload::table",{}),o.ajaxSuccessMessenger(n),w.deletingLaunches=_.without(w.deletingLaunches,e)}).fail(function(t){o.ajaxFailMessenger(t),o.hideOverlay(".rp-table-row[data-id="+e+"]"),w.deletingLaunches=_.without(w.deletingLaunches,e)})}(e)},switchLaunchMode:function(e){e.preventDefault();var t=r(e.currentTarget);if(!t.hasClass("disabled")){var n=t.closest("div.rp-table-row").attr("data-id"),i={},s=this.collection.get(n),u=this;i.mode=s.get("mode")=="DEBUG"?"DEFAULT":"DEBUG",f.updateLaunch(i,n).done(function(e){u.navigationInfo.trigger("navigation::reload::table",{}),o.ajaxSuccessMessenger(i.mode=="DEBUG"?"switchToDebug":"switchToAllLaunches");var t=i.mode==="DEBUG"?"debugOn":"debugOff"}).fail(function(e){o.ajaxFailMessenger(e)})}},applySort:function(e){var t=r(e.currentTarget),n=t.data("sorter"),i=this.navigationInfo.requestParameters.getSortInfo(),s=i.dataIndex===n&&i.direction==="ASC"?"DESC":"ASC";this.navigationInfo.applySorting(n,s),this.onPage(1)},applyTag:function(e){var t=r(e.currentTarget);e.preventDefault(),this.navigationInfo.trigger("apply::tag::filter",t.data("tag"),t.data("tag-type"))},pushCurrentItemToTheNavigation:function(e){var t=r(e.currentTarget);this.navigationInfo.scrollToDestinationId=t.data("id"),t.hasClass("cases-view")?this.reportAllCasesToTracker(t):this.reportLogViewToTracker(t)},reportAllCasesToTracker:function(e){if(this.navigationInfo.isLaunches())var t=e.attr("href").match(/\$issue_type=([^<]+)\&filter.eq./),n=e.attr("href").match(/\&filter.in.status=([^<]+)\&filter.in.type/),r=t?t[1]:n?n[1]:"TOTAL"},reportLogViewToTracker:function(e){var t=e.attr("href")},toggleStartTimeView:function(){this.$el.toggleClass("exact-driven");var e=this.$el.hasClass("exact-driven")?"exact":"";l.setStartTimeMode(e)},scrollToOrigin:function(e){o.scrollToHighlight(e,!0)},destroy:function(){this.stickyHeader&&this.stickyHeader.destroy(),this.stickyTable&&this.stickyTable.destroy(),r(".pr-grid-defect-stats",this.$el).popover("destroy"),this.paging&&this.paging.destroy(),this.paging=null,this.navigationInfo.defectTypes.off("reset"),this.clearTimer(),this.clearUpdateStartTime(),this.$editor&&this.$editor.destroy(),this.navigationInfo=null,s.BaseView.prototype.destroy.call(this)}}),S=function(e){var t=null;switch(e.type){case"test":t=x;break;case"log":t=T;break;default:t={events:{}}}_.defaults(e,t),_.extend(e.events,t.events),_.isFunction(t.destroy)&&(e.destroy=t.destroy)},x={events:{"click .select-all":"selectAll","click .select-test":"selectTest","click .defect-type":"editDefect","click .navigateable":"reportLogOpenIfValid",'click [data-js-event="removeTicket"]':"removeTicket","click .defect-type .rp-blue-link-undrl":"preventPropagation","click .external-ticket":"preventPropagation"},reportLogOpenIfValid:function(e){this.reportLogViewToTracker(r(e.currentTarget))},preventPropagation:function(e){e.stopImmediatePropagation()},selectAll:function(e){e.stopImmediatePropagation();var t=r(e.currentTarget).is(":checked");this.handleRows(t),this.navigationInfo.trigger("all::edited",this.getSelectedItems()),!t&&this.removeEditor()},handleRows:function(e){var t=e===undefined;t&&r(".select-all:first",this.$el).prop("checked",!1),e=t?!1:e;var n=e?"add":"remove";_.each(r(".select-test",this.$el),function(t){!r(t).is(":disabled")&&!r(t).closest("div.method-collapsed-hide").length&&r(t).prop("checked",e).closest(".rp-table-row")[n+"Class"]("selected")})},selectTest:function(e){e.stopImmediatePropagation();var t=r(e.currentTarget),n=t.is(":checked"),i=r(e.currentTarget).closest(".rp-table-row").find(".defect-type").is(":visible");t.closest(".rp-table-row").toggleClass("selected");if(i)if(n){var s=this.collection.get(t.data("id")).toJSON();this.navigationInfo.trigger("increase::edited",s)}else this.navigationInfo.trigger("decrease::edited",t.data("id"));else this.removeEditor()},$editor:null,setupEditor:function(e,t,n){this.removeEditor(),this.$editor=(new c.Editor({element:r("<div class='col-sm-12 editor-row'/>").appendTo(e.closest(".rp-table-row")),origin:e,item:t,items:n,navigationInfo:this.navigationInfo,defectCallBack:"navigation::reload::table"})).render()},removeEditor:function(){this.$editor&&(this.$editor.destroy(),this.$editor=null)},editDefect:function(e){var t=this,n=r(e.currentTarget),i=n.data("id"),s=this.collection.get(i).toJSON(),o=n.closest(".rp-table-row");if(!this.navigationInfo.launchIsProcessing(s)){o.addClass("selected").find(".select-test").prop("checked",!0);var u=t.getSelectedItems();this.setupEditor(n,s,u)}},getSelectedItems:function(){var e={},t=this;return _.forEach(r(".select-test:checked",t.$el),function(n){var i=r(n).data("id");e[i]=t.collection.get(i).toJSON()}),e},postRender:function(){this.$el.tooltip("destroy"),this.$el.tooltip({selector:'[data-toggle="tooltip"]',html:!0}),c.TicketManager.attachListener(this.$el),this.listenTo(this.navigationInfo,"deselect::rows",this.handleRows)},removeTicket:function(e){e.stopImmediatePropagation(),e.preventDefault();var t=r(e.currentTarget),n=t.closest("div.defect-type "),i=n.hasClass("disabled")||n.parent().hasClass("disabled");if(!i){var s=t.closest(".badge"),o=s.closest(".rp-table-row"),u=this.collection.get(s.closest(".tickets-container").data("id"));c.removeTicket(s,u.toJSON(),o)}}},T={openGallery:function(e){e.preventDefault(),this.navigationInfo.trigger("open::gallery::at::index",r(e.currentTarget).data("slide-index"))},addTestItemsNav:function(){this.testItems=new s.GridsStore,this.testItemsUrl=u.getGridUrl("test",this.navigationInfo.isDebug()),this.getTestItems()},getTestItems:function(e,t){var n={url:this.testItemsUrl,merge:!0,success:this.onLoadTestItems.bind(this,e),error:this.onLoadTestItemsError.bind(this),data:this.getTestItemsRequestData(t)};this.testItems.fetch(n)},updateTestItemsNav:function(){var e=r("#testItemsNav a").eq(0),t=r("#testItemsNav a").eq(1),n=this.getTestItemLink(this.testItems.prev),i=this.getTestItemLink(this.testItems.next);n?e.attr("href",n).removeClass("disabled"):e.attr("href","").addClass("disabled"),i?t.attr("href",i).removeClass("disabled"):t.attr("href","").addClass("disabled"),this.navigationInfo.trigger("grid::testitems::loaded","show")},getTestItemLink:function(e){var t=window.document.location.hash,n=_.initial(t.split("/")),r=_.last(n).split("?"),i="/log-for-",t=null;return e&&e.item&&(this.testItems.requestParameters.setPage(e.page.number),n[n.length-1]=r[0]+"?"+this.testItems.requestParameters.toURLSting(),t=n.join("/")+i+e.item.id),t},getTestItemByIndex:function(e,t,n){var r=null;while(!r&&n>=0&&n<this.testItems.length){if(this.statusPreconditions=="hide"){var i=t.at(n);i&&!this.validateForPreconditions(i.toJSON())&&(r=i)}else r=t.at(n);n=e=="next"?n+1:n-1}return r},onLoadTestItems:function(e,t){var n=this.navigationInfo.last().get("id").replace("log-for-",""),r=_.findIndex(this.testItems.models,function(e){return e.id==n},this),i=null,s=null;e?(e=="next"?(i=this.getTestItemByIndex("next",t,0),this.testItems.next={item:i,page:t.page},!i&&t.page.number<t.page.totalPages&&this.getTestItems("next",+t.page.number+1)):e=="prev"&&(s=this.getTestItemByIndex("prev",t,+t.page.size-1),this.testItems.prev={item:s,page:t.page},!s&&t.page.number!==1&&this.getTestItems("prev",+t.page.number-1)),this.updateTestItemsNav()):(i=this.getTestItemByIndex("next",t,r+1),s=this.getTestItemByIndex("prev",t,r-1),this.testItems.prev={item:s,page:t.page},this.testItems.next={item:i,page:t.page},this.updateTestItemsNav(),!s&&t.page.number!==1&&this.getTestItems("prev",+t.page.number-1),!i&&t.page.number<t.page.totalPages&&this.getTestItems("next",+t.page.number+1))},onLoadTestItemsError:function(e){o.ajaxFailMessenger(e)},getTestItemsRequestData:function(e){var t={},n=_.last(_.initial(this.navigationInfo.models),this),r=o.getDefaultRequestParams(),i=n.get("id");this.testItems.requestParameters=new s.RequestParameters({}),n&&n.get("params")&&this.testItems.requestParameters.apply(n.get("params")),e&&this.testItems.requestParameters.setPage(e);if(i.indexOf("all-cases-")===0){var u=this.testItems.requestParameters.toJSON(),a=this.navigationInfo.isExecutionStatistics(u),f=i.replace("all-cases-for-",""),l=r.allcases(a,f,this.navigationInfo.length-1);return _.extend(l,u)}t=r.test(),t["filter.eq.parent"]=i;if(_.isEmpty(this.testItems.requestParameters.getSortInfo())){var c=r.test();if(c){var h=c["page.sort"].split(",");this.testItems.requestParameters.setSortInfo(h[0],h[1])}}return _.extend(t,this.testItems.requestParameters.toJSON())},testItemNavTpl:"tpl-logs-test-nav",postRender:function(){this.logPanel&&this.logPanel.update(this.collection)},preLoad:function(e){e.data["log.state.history"]&&(e.data["filter.eq.item"]=e.data["log.state.history"]),this.logPanel||(this.$infoHolder.off().empty(),this.logPanel=(new d.LogPanel({navigationInfo:this.navigationInfo,element:this.$infoHolder,user:w.userModel,project:w.project})).render())},events:{"click .thumbnail.image":"openGallery"},destroy:function(){this.logPanel&&this.logPanel.destroy(),this.logPanel=null,this.$infoHolder.off().empty(),E.prototype.destroy.call(this)}},N=s.BaseView.extend({initialize:function(e){this.$el=e.element,this.navigationInfo=e.navigationInfo,this.urlResolver=e.urlResolver,this.depth=0,this.toLoad=[],this.qty=w.historyItemsToLoad,this.ids=this.navigationInfo.getFilter("ids").value.split(","),this.tabId=this.navigationInfo.extractTabId(),this.path=e.path,this.loaded=0,this.launches=[],this.load(this.loaded)},tpl:"tpl-launch-history-grid",loadButton:"tpl-launch-history-load-more",toolTipTpl:"tpl-launches-tooltip",defectsTipContent:"tpl-launches-tooltip-defects",events:{"click .btn-block":"loadNext","click .goToItem":"redirectToItem","mouseenter [data-tooltip-type]":"showTooltip"},load:function(e,t){this.validateForReset(this.navigationInfo.getFilter("history_depth").value,e),this.toLoad=this.ids.slice(this.loaded,this.loaded+this.qty),f.getHistoryData(this.toLoad,this.depth).done(function(e){this.assignHistory(e),this.loaded+=this.toLoad.length,this.$el&&(this.render(),w.mainScrollElement.scrollTop(t)),this.navigationInfo.trigger("grid::data::loaded",{size:1})}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"loadHistory")})},validateForReset:function(e,t){if(!this.depth||!t)this.loaded=0,this.depth=e,this.launches=[]},assignHistory:function(e){e.sort(function(e,t){return parseInt(e.startTime)-parseInt(t.startTime)}),_.isEmpty(this.launches)?this.launches=e:this.mergeLaunches(e)},mergeLaunches:function(e){_.each(e,function(e){var t=e.launchId,n=_.find(this.launches,function(e){return e.launchId===t});n?n.resources=n.resources.concat(e.resources):this.launches.push(e)},this)},loadNext:function(e){e.preventDefault(),r(e.target).css("visibility","hidden"),r("div.loader",this.$el).show(),this.load(this.loaded)},redirectToItem:function(e){var t=r(e.currentTarget),n=t.data("itemId"),i=w.router,s=this;f.getTestItemsInfo([n]).done(function(e){var t=s.getItemLink(e);i.navigate(t,{trigger:!0})}).fail(function(e){o.ajaxFailMessenger(e,"getItemInfo")})},showTooltip:function(e){var t=r(e.currentTarget),n=t.data("tooltipType");t.data("tooltip")||(t.data("tooltip","tooltip"),this.createTooltip(t,n))},createTooltip:function(e,t){var n=e.closest(".history-col").data("item-id"),r=e.closest(".history-col").data("launch-id"),i=this.getItem(r,n),s="";t=="warning"?s=this.renderToolTip(e.data("tooltip-content")):s=this.renderDefectsTooltip(t,i),e.append(s)},renderToolTip:function(e){return o.templates(this.toolTipTpl,{message:e})},renderDefectsTooltip:function(e,t){return o.templates(this.defectsTipContent,_.extend(this.getDefects(t,e),{item:t,noTotalLink:!0,tab:this.navigationInfo.getTabAsUrlString(),noSubDefects:!this.navigationInfo.defectTypes.checkForSubDefects(),urlResolver:this.urlResolver}))},getItemLink:function(e){var t=e[0],n=[t.launchId].concat(_.keys(t.path_names),["log-for-"+t.id]),r="#"+w.project.projectId+"/launches/all/"+n.join("/");return r},getItem:function(e,t){var n=_.find(this.launches,function(t){return t.launchId==e});return n?_.find(n.resources,function(e){return e.id==t}):null},getDefects:function(e,t){var n=e.statistics.defects,r=n[t],i={defects:[]},s=w.patterns.defectsLocator,u=0,a="";return _.each(r,function(e,t){if(t!=="total"){var n=this.navigationInfo.defectTypes,r=n.getDefectType(t);parseInt(e)!==0&&r&&(r.val=parseInt(e),i.defects.push(r)),s.test(t)&&r&&(a=r.color)}else u=parseInt(e)},this),i.defects.sort(o.sortSubDefects),i.color=a||o.getDefaultColor(t),i.type=t,i.total=u,i},getHistoryItems:function(){var e=[];return _.forEach(this.launches,function(t){var n=t.launchNumber;_.forEach(t.resources,function(t){var r={name:t.name,description:t.description,tags:t.tags,launches:{}};r.launches[n]=[t];if(_.isEmpty(e))e.push(r);else{var i=_.find(e,function(e){var n=e.name===t.name,r=e.description===t.description,i=_.size(e.tags)===_.size(t.tags)&&_.every(e.tags,function(e){return _.contains(t.tags,e)});return n&&r&&i});i?i.launches[n]?i.launches[n].push(t):i.launches[n]=[t]:e.push(r)}})}),e},getCls:function(e){var t="",n=e.statistics.defects,r=!_.isEmpty(n)&&!_.every(n,function(e){return e==0}),i=e.status=="PASSED"?!0:!1,s=e.status=="FAILED"?!0:!1,o=e.status=="RESETED"||e.status=="INTERRUPTED"?!0:!1,u=e.status=="SKIPPED"?!0:!1,a=e.status=="IN_PROGRESS"?!0:!1;if(i)t="rp-pass";else if(u)t="rp-skip";else if(o)t="rp-reseted";else if(a)t="rp-inprogress progress-striped";else if(s||r)t="rp-fail";return t},getIssuesByType:function(e,t){var n=e.statistics.defects,r={},i=!_.isEmpty(n)&&!_.every(n,function(e){return e==0});return i?(_.each(n,function(e,n){if(e.total!=0){var i=w.patterns.defectsLocator,s=_.findKey(e,function(e,t){return i.test(t)});if(s){var u=t.getDefectType(s);u&&(r[n]={shortName:u.shortName,fullName:u.longName,color:u.color||o.getDefaultColor(n),cls:o.getDefectCls(n)})}}}),r):!1},getTickets:function(e){var t=_.map(e,function(e){return e.ticketId});return t.join(", ")},getComment:function(e){return Textile(e.setMaxLength(256)).escapeScript()},render:function(){var e=_.map(this.launches,function(e){return{launchNumber:e.launchNumber,launchStatus:e.launchStatus,launchId:e.launchId}});if(!e.length){this.$el.html(o.templates(this.tpl,{launches:[]}));return}this.$el.html(o.templates(this.tpl,{launches:e,items:this.getHistoryItems(),getCls:this.getCls,getDefectCls:o.getDefectCls,getIssuesByType:this.getIssuesByType,getTickets:this.getTickets,defectTypes:this.navigationInfo.defectTypes,getComment:this.getComment,sortedIssueTypes:o.getIssueTypes(),buildUrl:function(e){var t=e.launches[_.last(_.keys(e.launches))][0];return this.path+(!t.has_childs&&t.status=="RESETED"||t.has_childs?"":"log-for-")+t.id+(this.tabId?"?tab.id="+this.tabId:"")}.bind(this)})),this.loaded<this.ids.length&&this.$el.append(o.templates(this.loadButton)),r(".nicescroll-it, .shifted",this.$el).each(function(){var e=r(this).height();if(e>190){e=190;var t=o.setupBaronScroll(r(this)),n=t.parent(".baron__root");n.height(e)}})},destroy:function(){r('[data-toggle="tooltip"]',this.$el).tooltip("destroy"),s.BaseView.prototype.destroy.call(this)}});return{GridByType:E,HistoryGrid:N}}),define("filtersResolver",["require","exports","module","underscore","jquery","backbone","filter/filters","defectType/SingletonDefectTypeCollection","localization"],function(e,t,n){"use strict";var r=e("underscore"),i=e("jquery"),s=e("backbone"),o=e("filter/filters"),u=e("defectType/SingletonDefectTypeCollection"),a=e("localization"),f=null,l=function(){var e=[new o.StatisticModel({id:"statistics$executions$total",condition:"gte",options:N()}),new o.StatisticModel({id:"statistics$executions$passed",condition:"gte",options:N()}),new o.StatisticModel({id:"statistics$executions$failed",condition:"gte",options:N()}),new o.StatisticModel({id:"statistics$executions$skipped",condition:"gte",options:N()})];return e=e.concat(c("product_bug")),e=e.concat(c("automation_bug")),e=e.concat(c("system_issue")),e=e.concat(c("to_investigate")),e},c=function(e){var t=h(e),n=r.map(t,function(t){return new o.StatisticModel({id:"statistics$defects$"+e+"$"+t.get("locator"),condition:"gte",label:a.filterNameById[e]+" "+t.get("shortName"),longName:t.get("longName"),subFilter:!0,options:N()})}),i="Total "+a.filterNamePluralById[e];return n.length==1&&(i=a.filterNameById[e],n=[]),n.unshift(new o.StatisticModel({id:"statistics$defects$"+e+"$total",condition:"gte",label:i,longName:i,subFilter:!1,options:N()})),n},h=function(e){return f.filter(function(t){return t.get("typeRef").toUpperCase()==e.toUpperCase()})},p=function(e){var t=h(e);return r.map(t,function(t){return{name:t.get("longName"),value:t.get("locator"),subOption:!0,mainType:e}})},d=function(e){var t=[];return r.each(e,function(e){var n=p(e),i=r.map(n,function(e){return e.value}),s=i.join(",");n.length<=1?t.push({name:a.filterNameById[e],value:s}):(t.push({name:"All "+a.filterNamePluralById[e],value:s,subType:e}),t=t.concat(n))}),t},v=function(){var e=[{name:"All",value:"all"}];return e=e.concat(d(["to_investigate","product_bug","automation_bug","system_issue","no_defect"])),[new o.StatusModel({id:"type",condition:"in",values:["All","Before Suite","Before Groups","Before Class","Before Test","Test Class","Before Method","Test","After Method","After Test","After Class","After Groups","After Suite"],value:"All"}),new o.Model({id:"description",condition:"cnt",options:x()}),new o.StatusModel({id:"status",condition:"in",values:["All","Passed","Failed","Skipped","Interrupted","In Progress"],value:"All"}),new o.TimerModel({id:"start_time",condition:"btw",values:["Any"],value:""}),new o.StatusModel({id:"issue$issue_type",condition:"in",values:e,value:"All"}),new o.Model({id:"issue$issue_comment",condition:"cnt"}),new o.TagsModel({id:"tags",condition:"has",options:T()})]},m=function(){var e=y();return e.add(new o.UserModel({id:"user",condition:"in"}),{at:1}),e},g=function(e){var t=y();return t.add(new o.UserModel({id:"user",condition:"in",mode:"DEBUG"}),{at:1}),t},y=function(){return new s.Collection([new o.Model({id:"name",required:!0,condition:"cnt",options:x()}),new o.TimerModel({id:"start_time",condition:"btw",values:["Any"],value:""}),new o.Model({id:"description",condition:"cnt",options:x()}),new o.TagsModel({id:"tags",condition:"has",options:T()})].concat(l()))},b=function(){return new s.Collection([new o.Model({id:"name",required:!0,condition:"cnt",options:x()})].concat(v()))},w=function(){return[new o.TimerModel({id:"time",condition:"btw",values:["Any"],value:""}),new o.StatusModel({id:"level",condition:"in",values:["Any","Trace","Debug","Info","Warn","Error"],value:"Any"}),new o.Model({id:"ex.binary_content"})]},E=function(){return new s.Collection([new o.Model({id:"message",required:!0,condition:"cnt"})].concat(w()))},S=function(){return new s.Collection([new o.SelectModel({name:"History Depth",id:"history_depth",noConditions:!0,required:!0,values:[{value:"3",name:"3"},{value:"5",name:"5"},{value:"10",name:"10"}],value:"3"})])},x=function(){return[{id:"cnt",shortCut:"cnt"},{id:"!cnt",shortCut:"!cnt"},{id:"eq",shortCut:"eq"},{id:"ne",shortCut:"!eq"}]},T=function(){return[{id:"has",shortCut:"and"},{id:"in",shortCut:"or"}]},N=function(){return[{id:"gte",shortCut:"&ge;"},{id:"lte",shortCut:"&le;"},{id:"eq",shortCut:"="}]},C=function(e,t){f=new u;var n=i.Deferred(),e=e||"launch";return t&&(e="userdebug"),f.ready.done(function(){if(e){var r=null;switch(e){case"launch":r=m();break;case"suit":r=y();break;case"userdebug":r=g(t);break;case"test":r=b();break;case"log":r=E();break;case"history":r=S();break;default:}n.resolve(r)}}),n.promise()};return{getDefaults:C}}),define("filtersPanel",["require","exports","module","jquery","backbone","util","filter/filters","filtersResolver","filtersService","core/components","storageService","app","coreService"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("filter/filters"),u=e("filtersResolver"),a=e("filtersService"),f=e("core/components"),l=e("storageService"),c=e("app"),h=e("coreService"),p=c.getInstance(),d=f.RemovableView.extend({initialize:function(e){this.$el=e.element,this.navigationInfo=e.navigationInfo,this.currentGridType=this.navigationInfo.getLevelGridType(),this.currentTab=this.navigationInfo.getCurrentStepTab(),this.currentGridFilters=null,this.defaultTabId="allCases",this.tabsData={},this.copyInProcess=!1,this.tabs={},this.tabFilters={},this.readyTabState=this.setupCurrentTabState(),this.listenTo(this.navigationInfo,"apply::tag::filter",this.applyTag),this.listenTo(this.navigationInfo,"navigation::state::change",this.updateTabsNavigation)},updateTabsNavigation:function(e){e&&this.tabs[this.currentTab.id]&&(!this.navigationInfo.isDebug()&&this.checkTabUrl(e)&&(!this.activeTab.hasClass("cloned")&&!this.activeTab.hasClass("navigated")||!e.tabSwitched)&&(e.state=!0),this.tabs[this.currentTab.id].requestParams.set(e.params.attributes),~window.location.hash.indexOf("?")&&(this.tabs[this.currentTab.id].stateUrl=window.location.hash),this.checkIfValidForUnsaved(e)&&this.markAsUnsaved()),this.navigationInfo.trigger("toggle::widget::wizard",this.checkIfValidToOpenWidgetWizard())},checkTabUrl:function(e){var t=e.params.toURLSting(),n=this.tabs[this.currentTab.id].requestParams.toURLSting(),r=function(e){var n=_.reject(t.split("&"),function(e){return e.indexOf("page.page=")>=0});return n.join("&")};return r(t)!==r(n)},checkIfValidForUnsaved:function(e){return e.state&&this.currentTab.id!==this.defaultTabId&&this.navigationInfo.isLaunches()},setupCurrentTabState:function(){var e=this;return u.getDefaults(this.currentGridType,this.validateForDebugOwnersState()).done(function(t){e.currentGridFilters=t,e.currentTab.requestParams&&e.applyState(e.currentTab.requestParams.getFilters())})},validateForDebugOwnersState:function(){var e="";if(this.navigationInfo.isDebug()&&this.navigationInfo.isLaunches()){var t=l.getDebugUser(),n=t?t:p.userModel.get("name");e=n}return e},validateForDebugOwnersStateChange:function(e){if(this.navigationInfo.isDebug()&&this.checkIfOwnerFilter(e)){var t=e.value?e.value.replaceAll(" ",""):"";s.updateDebugHref(t),l.setDebugUser(t)}},loadFilters:function(){var e=p.preferences.filters,t=this,n=function(e){t.navigationInfo&&(t.tabs[t.defaultTabId]=t.navigationInfo.getDefaultTab()),e&&_.merge(t.tabs,e),t.currentTab=t.verifyActiveTab(t.tabs,t.currentTab),t.renderTabs()},r=function(e){var t=_.indexBy(e,"id");this.validateForMissingFilters(t),n(t)};e&&e.length?a.getFilters(e).done(r.bind(this)).fail(function(e){s.ajaxFailMessenger(e,"loadFilters")}):n()},validateForMissingFilters:function(e){var t=_.keys(e);t.length!==p.preferences.filters.length&&(p.preferences.filters=t,a.updateTabsPreferences({filters:t}))},renderTabs:function(){this.currentTab=this.currentTab||{},this.tabsHolder.html(s.templates(this.tabMenuTpl,{id:this.currentTab.id,user:p.userModel.get("name"),util:s,tabs:this.tabs})),this.addTab=r(".add-new:first",this.tabsHolder),this.activeTab=r("[data-id="+this.currentTab.id+"]",this.tabsHolder),this.validateForHistory(),this.navigationInfo&&this.navigationInfo.trigger("toggle::widget::wizard",this.checkIfValidToOpenWidgetWizard());var e={params:this.navigationInfo.requestParameters};this.updateTabsNavigation(e)},openItemMenu:function(e){r(e.currentTarget).find(".filter-manager:first").replaceWith(s.templates(this.tabOptionsTpl,this.getActionData()))},renderItemMenu:function(e){r(e.currentTarget).after(s.templates(this.tabOptionsTpl,this.getActionData())).dropdown()},getActionData:function(){var e={edit:!1,save:!1,saveAll:!1,clone:!1,discard:!1,close:!1},t=this.currentTab.id,n=this.activeTab.hasClass("unsaved"),r=this.checkIfFiltersInDefaultState(t),i=this.checkIfAllCasesTab();if(i&&r)return e;if(!this.navigationInfo.isLaunches())return e.discard=!r,e.close=!i,e;if(i&&!r)e.clone=!0,e.discard=!0;else{this.checkIfOwnFilter(t)&&(e.edit=!0,e.save=n&&!r);if(!r||r&&!this.checkIfTempId(t))e.discard=n;e.saveAll=this.checkIfMoreThenOneOwnFilterIsUnsaved(),e.clone=!0,e.close=!0}return e},verifyActiveTab:function(e,t){t=t||{},e=e||[];var n=e[t.id];return!n&&this.navigationInfo&&(n=this.navigationInfo.changeCurrentStepId(this.defaultTabId)),n},update:function(){this.currentTab=this.navigationInfo.getCurrentStepTab();var e=this.navigationInfo.getLevelGridType();this.currentGridType!==e&&(this.currentGridType=e),this.setupCurrentTabState(),this.renderState(),this.navigationInfo.isDebug()||(this.setupActiveByCurrentTabId(),this.validateForHistory())},setupActiveByCurrentTabId:function(){this.currentTab.id!==this.activeTab.data("id")&&(this.activeTab.removeClass("active"),this.activeTab=r("[data-id="+this.currentTab.id+"]:first",this.tabsHolder),this.activeTab.length||(this.activeTab=r("[data-id="+this.defaultTabId+"]:first",this.tabsHolder)),this.activeTab.addClass("active"))},getCurrentFilter:function(){return this.checkIfAllCasesTab()?"":this.tabs[this.currentTab.id]},shellTpl:"tpl-filters-panel",tabTpl:"tpl-filters-tab-options",tabNewOptionTpl:"tpl-filters-tab-new-option",tabOptionsTpl:"tpl-filters-tab-options",tabCriteriaTpl:"tpl-filters-tab-criteria",tabMenuTpl:"tpl-filters-tab-menu",tabEditTpl:"tpl-filters-tab-editor",events:{"click .criteria-option":"select","click .tab:not(.active)":"handleTab","click .tab-controls .action":"makeActionWithTab","click .tab-controls":"renderItemMenu","show.bs.dropdown .tab":"openItemMenu","click .edit-tab:not(.disabled)":"openTabEditor","click .save-tab:not(.disabled)":"saveSingle","click .save-all-tab:not(.disabled)":"saveAll","click .discard-tab:not(.disabled)":"discardTabChanges","click .clone-tab:not(.disabled)":"cloneTab","click .close-tab:not(.disabled)":"closeTab"},cloneTab:function(){this.copyInProcess=!0,this.activeTab.hasClass("unsaved")?this.activeTab.removeClass("cloned"):this.activeTab.addClass("cloned"),this.openTabEditor()},addNewTab:function(e){var t=_.uniqueId("tmp_"),n={};n[t]={name:e.name,isShared:e.shared,id:t,owner:p.userModel.get("name")},this.addTab.before(s.templates(this.tabNewOptionTpl,n[t])),this.activeTab.removeClass("active"),this.activeTab=r("[data-id="+t+"]",this.tabsHolder),this.fillFiltersAndUpdateCurrentTab(n[t]),this.renderState(),this.activeTab.addClass("active").addClass("unsaved"),r("#addWidget").addClass("disabled")},updateTab:function(e){r(".material-icons",this.activeTab).closest(".share-icon-wrapper").remove(),e.shared&&this.checkIfOwnFilter(this.currentTab.id)&&this.activeTab.append(s.getLocalSharedIcon()),r(".name-text",this.activeTab).text(e.name),this.tabs[this.currentTab.id].name=e.name,this.tabs[this.currentTab.id].isShared=e.shared},fillFiltersAndUpdateCurrentTab:function(e){if(this.copyInProcess){this.tabs[e.id]=_.cloneDeep(this.tabs[this.currentTab.id]);var t=this.tabs[e.id],n=this.navigationInfo.getTempTab(e).requestParams;n.set(this.navigationInfo.requestParameters.attributes),n.setTab(e.id),t.requestParams=n,t.isShared=e.isShared,t.owner=e.owner,t.id=e.id,t.url=this.navigationInfo.getUrlForRequestParams(n),t.stateUrl="",t.name=e.name,t.type="launch",this.copyInProcess=!1,this.updateHrefs(this.currentTab.id,e.id),this.currentTab=this.tabs[e.id],this.setupCurrentTabState()}else this.tabs[e.id]=this.navigationInfo.getTempTab(e),this.openTabById(e.id)},handleTab:function(e){var t=this,n=r(e.currentTarget);if(n.hasClass("add-new"))this.openTabEditor();else{this.activeTab.removeClass("active"),this.activeTab=n,this.activeTab.addClass("active");var i=n.attr("data-id"),o=t.tabs[i].url;p.preferences.active=o,a.updateTabsPreferences({filters:p.preferences.filters,active:o}),s.updateLaunchesHref(o),t.openTabById(i)}},openTabEditor:function(e){var t=this,n={};e&&(n=this.tabs[this.currentTab.id]),this.copyInProcess&&(n={name:this.getNameUnderCopy()}),this.modal=null,this.modal=(new f.DialogWithCallBack({headerTxt:n.id?"editFilter":"addFilter",actionTxt:n.id?"update":"add",actionStatus:!0,contentTpl:this.tabEditTpl,data:n,callback:function(e){var t=r("#tabName",this.modal.$content);t.val(t.val().trim()).trigger("validate");if(!t.data("valid"))return;var n={name:t.val(),shared:r("#tabShared",this.modal.$content).prop("checked")};if(this.modal.data.id){if(this.modal.data.name!==n.name||this.modal.data.isShared!==n.shared)this.updateTab(n),this.markAsUnsaved()}else this.addNewTab(n);e()}.bind(this),afterRenderCallback:function(){s.switcheryInitialize(this.$content)},destroyCallback:function(){this.copyInProcess=!1}.bind(this),shownCallback:function(){var e=p.forms.filterName;s.bootValidator(r("#tabName",this.modal.$content),[{validator:"minMaxRequired",type:"filterName",min:e[0],max:e[1]},{validator:"noDuplications",type:"filterName",source:this.getUsedNames(n)}]),r("#tabName",this.modal.$content).focus()}.bind(this)})).render()},getUsedNames:function(e){e=e||{};var t=[],n=this;return h.getOwnFilters().done(function(r){_.forEach(n.tabs,function(r){r.id!==e.id&&n.checkIfOwnFilter(r.id)&&t.push(r.name.toLowerCase())}),_.forEach(r,function(n){n.id!==e.id&&t.push(n.name.toLowerCase())})}).fail(function(e){s.ajaxFailMessenger(e,"getUsedNames")}),t},getNameUnderCopy:function(){var e=s.getCopyName(this.tabs[this.currentTab.id].name),t=0,n=this;return _.forEach(this.tabs,function(r){n.checkIfAnyOtherFilterStartsWithCopiedName(r,e)&&(t+=1)},0),t&&(e+=" "+t),e},openTabById:function(e){var t=this;_.delay(function(){t.navigationInfo.followTabUrl(t.tabs[e].stateUrl||t.tabs[e].url)},50)},reFetchTab:function(e){var t=this;a.getFilters([e]).then(function(e){var t=e[0];this.tabs[t.id].requestParams=t.requestParams,this.tabs[t.id].stateUrl="",this.tabs[t.id].url=t.url,this.updateTab({name:t.name,shared:t.isShared}),this.openTabById(t.id)}.bind(this),function(){this.removeTabByIdAndSetAllCasesActive(e)}.bind(this))},markAsUnsaved:function(){this.activeTab.addClass("unsaved")},discardTabChanges:function(){var e=this.currentTab.id;this.checkIfValidForDefaultValuesDiscard(e)?(this.currentTab=this.navigationInfo.getDefaultTab(),this.setupCurrentTabState(!0),this.currentTab.id!==e&&(this.currentTab.id=e,this.currentTab.requestParams.setTab(e)),this.renderState(),this.navigationInfo.applyFilters(this.getFilters(),this.currentTab.id)):this.reFetchTab(e),this.checkIfValidToRemoveUnsavedSign(e)&&this.activeTab.removeClass("unsaved")},saveSingle:function(){this.saveTabs(this.currentTab.id)},saveAll:function(){this.saveTabs()},saveTabs:function(e){var t=this,n=[],i=[],o=[],u=[],f=[],l=function(e){_.forEach(e,function(e){r("[data-id="+e+"]",t.tabsHolder).removeClass("unsaved")})};e?n.push(e):_.forEach(r(".unsaved",t.tabsHolder),function(e){var i=r(e).data("id");t.checkIfOwnFilter(i)&&!t.checkIfFiltersInDefaultState(i)&&n.push(i)}),_.forEach(n,function(e){t.checkIfTempId(e)?t.tabs[e]&&(i.push(t.tabs[e]),u.push(e)):(t.tabs[e].url=t.navigationInfo.getUrlForRequestParams(t.tabs[e].requestParams),o.push(t.tabs[e]))}),i.length&&f.push(a.saveFilters(i).then(function(e){_.forEach(u,function(n,i){var s=r("[data-id="+n+"]",t.tabsHolder),o=e[i].id;s.attr("data-id",o),r(s).data("id",o),s.removeClass("unsaved");var u=r(".add-widget-btn");u.attr("title",u.data("title"));var a=t.tabs[n],f=t.tabsData[n];delete t.tabs[n],delete t.tabsData[n],t.tabs[o]=a;var l=t.tabs[o];l.id=o,l.requestParams.setTab(o),l.url=t.navigationInfo.getUrlForRequestParams(l.requestParams),l.stateUrl="",t.tabsData[o]=f,s.hasClass("active")&&(t.currentTab=t.tabs[o],t.updateHrefs(n,o))})},function(e){e.responseText&&(e.responseText.indexOf(40031)?s.ajaxFailMessenger(e):e.responseText.indexOf(4001)?s.ajaxFailMessenger("","savedLaunchFilterQuantity"):s.ajaxFailMessenger(e,"savedLaunchFilter"))})),o.length&&f.push(a.updateFilters(o).then(function(e){l(_.map(o,function(e){return e.id}))},function(e){e.responseText&&(e.responseText.indexOf(40031)?s.ajaxFailMessenger(e):e.responseText.indexOf(4001)&&s.ajaxFailMessenger("","savedLaunchFilterQuantity"),s.ajaxFailMessenger(e,"savedLaunchFilter"))}));var c=n.length>1?"s":"";r.when.apply(r,f).done(function(){t.updatePreferences(),s.ajaxSuccessMessenger("savedLaunchFilter"+c),t.navigationInfo.trigger("toggle::widget::wizard",t.checkIfValidToOpenWidgetWizard())})},updateHrefs:function(e,t){this.navigationInfo.replaceTempId(e,t),_.each(r("#gridWrapper a"),function(n){var i=r(n);i.attr("href")&&i.attr("href",i.attr("href").replaceAll(e,t))})},checkIfOwnFilter:function(e){return this.tabs[e].owner===p.userModel.get("name")},checkIfTempId:function(e){return e.indexOf("tmp_")===0},checkIfAllCasesTab:function(){return this.currentTab.id===this.defaultTabId},checkIfOwnerFilter:function(e){return e&&e.id==="user"},checkIfFiltersInDefaultState:function(e){return!this.tabs[e].requestParams.hasFiltersWithValue()&&this.tabs[e].requestParams.toURLSting()===this.navigationInfo.requestParameters.toURLSting()},checkIfValidForDefaultValuesDiscard:function(e){return this.checkIfTempId(e)||this.checkIfAllCasesTab()||!this.navigationInfo.isLaunches()},checkIfMoreThenOneOwnFilterIsUnsaved:function(){var e=0,t=this;return _.forEach(r(".unsaved",t.tabsHolder),function(n){var i=r(n).attr("data-id");t.checkIfOwnFilter(i)&&!t.checkIfFiltersInDefaultState(i)&&(e+=1)}),e>1},checkIfIdValidToUpdateActiveTab:function(e){return!this.checkIfTempId(e)&&e!==this.defaultTabId&&this.tabs[e]},checkIfValidToRemoveUnsavedSign:function(e){return!this.checkIfTempId(e)&&this.navigationInfo.isLaunches()},checkIfValidToOpenWidgetWizard:function(){var e={show:!1,enable:!1};return this.navigationInfo.isLaunches()&&!this.navigationInfo.isDebug()&&(e.show=!0,this.checkIfAllCasesTab()?e.enable=!0:e.enable=!this.checkIfTempId(this.currentTab.id)&&this.activeTab&&!this.activeTab.hasClass("unsaved")),e},checkIfAnyOtherFilterStartsWithCopiedName:function(e,t){return e.id!==this.currentTab.id&&e.name.indexOf(t)===0},updatePreferences:function(){var e=[],t=this;_.each(r(".tab",this.tabsHolder),function(n){var i=r(n).attr("data-id");i&&i!==t.defaultTabId&&!t.checkIfTempId(i)&&e.push(i)});var n=t.getActiveTabUrl();p.preferences.filters=e,p.preferences.active=n,s.updateLaunchesHref(n),a.updateTabsPreferences({filters:e,active:n})},getActiveTabUrl:function(){var e="",t=this.currentTab.id;return this.checkIfIdValidToUpdateActiveTab(t)&&(e=this.tabs[t].url),e},closeTab:function(){var e=this,t=this.currentTab.id;if(e.checkIfTempId(t))e.removeTabByIdAndSetAllCasesActive(t);else{var n=_.indexOf(p.preferences.filters,t);n!==-1&&(p.preferences.filters.splice(n,1),a.updateTabsPreferences({filters:p.preferences.filters,active:""}).done(function(){e.removeTabByIdAndSetAllCasesActive(t)}).fail(function(e){}))}},removeTabByIdAndSetAllCasesActive:function(e){delete this.tabs[e],delete this.tabsData[e],this.activeTab.remove(),this.openTabById(this.defaultTabId),s.clearLaunchesActiveFilter()},select:function(e){var t=r(e.currentTarget),n=this.currentGridFilters.get(t.data("id"));t.is(":checked")?this._appendFilter(n):this.onFilterRemove(n.get("id"))},_appendFilter:function(e,t){var n=r("<div class='filter-wrapper' />");this.criteriaBlock.before(n),this.renderFilter(n,e,t)},applyTag:function(e,t){var n=t||"tags",e=e.toString();if(this.tabFilters[n]){var r=this.tabFilters[n],i=r.model.get("value");if(_.indexOf(i.split(","),e)===-1){var s=i?i+","+e:e;r.model.set("value",s),r.off(),r.$el.empty(),this.renderFilter(r.$el,r.model)}}else{var o=this.currentGridFilters.get(n);this.criteriaHolder.find('[data-id="'+n+'"]:first').prop("checked",!0),o&&(o.set("value",e),this._appendFilter(o))}this.navigationInfo.applyFilters(this.getFilters(),this.currentTab.id)},onFilterChange:function(e){this.task&&clearTimeout(this.task),e?(this.navigationInfo.applyFilters(this.getFilters(),this.currentTab.id),delete this.task):this.task=setTimeout(function(){this.navigationInfo.applyFilters(this.getFilters(),this.currentTab.id),delete this.task}.bind(this),p.userInputDelay)},validateForHistory:function(){if(this.navigationInfo){var e=this.navigationInfo.isHistory()?"add":"remove";this.activeTab[e+"Class"]("history")}},onFilterRemove:function(e){this.validateForDebugOwnersStateChange({id:e});var t=e.replace(".lte.",".gte.");this.criteriaHolder.find('[data-id="'+t+'"]').prop("checked",!1);var n=this.tabFilters;n[t].destroy(),delete n[t],this.currentGridFilters.get(e).set("value",""),this.navigationInfo.applyFilters(this.getFilters(),this.currentTab.id)},getFilters:function(){var e=[],t=this;return _.forEach(this.tabFilters,function(n,r){var i=n.getFilter();t.validateForDebugOwnersStateChange({id:r,value:i?i.value:""}),_.isEmpty(i)||e.push(i)}),e},renderFilter:function(e,t,n){t.set("gridType",this.navigationInfo.getLevelGridType()),this.validateForTagsInsideLaunch(t);var r=_.isFunction(t.viewCreator)?t.viewCreator({el:e,model:t,panel:this,noFocus:n||"nofocus"}):new o.View({el:e,model:t,panel:this});this.tabFilters[t.get("id")]=r,(t.id==="tags"||t.id==="user"||t.id==="issue$issue_type"||t.id==="type"||t.id==="status")&&e.addClass("fluid-filter"),r.render(),r.on("filterApply",this.onFilterChange,this),r.on("filterRemove",this.onFilterRemove,this)},applyState:function(e){var t=[];_.forEach(e,function(e){var n,r;if(e.id!=="history_depth"&&e.id!=="ids"){var i=e.id.split(".");n=i[2],r=i[1]}else n=e.id;var s=this.currentGridFilters.get(n);s?s.set({visible:!0,value:e.value,id:n,condition:r}):~n.indexOf("statistics$defects")&&t.push(new o.InvalidModel({hideCriteria:!0,visible:!0,value:e.value,id:n,condition:r}))},this),this.currentGridFilters.add(t)},clearTabFilters:function(){_.forEach(this.tabFilters,function(e,t){_.isFunction(e.destroy)&&e.destroy(),e=null}),this.tabFilters={},this.tabsContentHolder.off().empty()},renderState:function(){this.clearTabFilters(),this.currentGridFilters.forEach(function(e){if(e.get("required")||e.get("visible")){var t=e.get("required")?"required":"",n=r("<div class='"+t+" filter-wrapper' />");this.tabsContentHolder.append(n),this.renderFilter(n,e,"nofocus")}},this),this.tabsContentHolder.append(s.templates(this.tabCriteriaTpl,{criteria:this.currentGridFilters.toJSON(),id:this.currentTab.id})),this.criteriaBlock=r(".criteria-btn:first",this.tabsContentHolder),this.criteriaHolder=r(".filters-criteria:first",this.criteriaBlock)},validateForTagsInsideLaunch:function(e){e.needLaunchId&&!this.navigationInfo.isLaunches()&&e.set("launchId",this.navigationInfo.models[1].get("id"))},render:function(){var e=this;return this.readyTabState.done(function(){e.$el.html(s.templates(e.shellTpl)),e.tabsHolder=r(".rp-filter-tabs:first",e.$el),e.tabsContentHolder=r("#filterInputs",e.$el),e.renderState(),e.navigationInfo.isDebug()?e.tabs[e.defaultTabId]=e.navigationInfo.getDefaultTab():e.loadFilters()}),this},destroy:function(){this.currentGridType=null,this.currentTab=null,this.clearTabFilters(),this.currentGridFilters=null,this.tabs=null,this.navigationInfo=null,f.RemovableView.prototype.destroy.call(this)}});return{FilterPanel:d}}),define("launchCrumbs",["require","exports","module","jquery","backbone","util","core/components","app","storageService","dataUrlResolver"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("core/components"),u=e("app"),a=e("storageService"),f=e("dataUrlResolver"),l=u.getInstance(),c=o.BaseView.extend({tpl:"tpl-launches-crumbs",lostTpl:"tpl-launches-crumbs-lost",initialize:function(e){this.$el=e.holder,this.navigationInfo=e.navigationInfo,this.truncateFn=this.truncateCrumbs.bind(this),r(window).on("resize.breadcrumbs",this.truncateFn),this.listenTo(this.navigationInfo,"match::issues::action",this.updateCrumbs),this.listenTo(this.navigationInfo,"analyze:is:over",this.updateCrumbs)},events:{"click #breadcrumbToggle":"toggleBreadcrumbs","click #restoreNavigation":"restoreNavigation"},render:function(){var e=this.getLinedNavigation(),t=this.launchIsLost(e)?this.lostTpl:this.tpl;return this.$el.html(s.templates(t,{steps:e,expanded:a.getBreadcrumbMode()?l.breadcrumbMode.expanded:""})),this.$breadcrumbToggle=r("#breadcrumbToggle",this.$el),this.truncateCrumbs(),this},launchIsLost:function(e){return e.length>2&&!e[1].id&&e[e.length-1].id},restoreNavigation:function(){this.navigationInfo.restoreFromLast()},toggleBreadcrumbs:function(){var e=a.getBreadcrumbMode()?"":l.breadcrumbMode.expanded;a.setBreadcrumbMode(e),this.$breadcrumbToggle.toggleClass(l.breadcrumbMode.expanded),this.truncateCrumbs()},updateCrumbs:function(){this.render()},truncateCrumbs:function(){var e=r(".ellipse",this.$el);if(!a.getBreadcrumbMode()){var t=r(".crumb",this.$el);e.css({"max-width":Math.floor((this.$el.parent().width()-this.$el.next().width())/t.length)-20})}else e.css({"max-width":"100%"})},getLinedNavigation:function(){var e=this.navigationInfo.toJSON(),t=this.navigationInfo.isDebug()?f.userDebugBade():f.launchesBase();return this.validateForAllCasesToLogSituation(e),_.forEach(_.initial(e),function(e){t+="/"+e.id+(e.params?"?"+e.params:""),e.link=t}),e},validateForAllCasesToLogSituation:function(e){var t=e[e.length-1];if(t.grid==="log"&&e[e.length-2].id.indexOf("all-cases")===0){t=e.pop();var n=window.location.hash;for(var r in t.data.path_names)n.indexOf(r)===-1&&e.push({id:r,name:t.data.path_names[r]});e.push(t)}},destroy:function(){r(window).off("resize.breadcrumbs",this.truncateFn),this.navigationInfo=null,o.BaseView.prototype.destroy.call(this)}});return{View:c}}),function(e){typeof define=="function"&&define.amd?define("readmore-js",["jquery"],e):typeof exports=="object"?module.exports=e(require("jquery")):e(jQuery)}(function(e){"use strict";function s(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,n||e.apply(i,s)},u=n&&!r;clearTimeout(r),r=setTimeout(o,t),u&&e.apply(i,s)}}function o(e){var t=++i;return String(e==null?"rmjs-":e)+t}function u(e){var t=e.clone().css({height:"auto",width:e.width(),maxHeight:"none",overflow:"hidden"}).insertAfter(e),n=t.outerHeight(),r=parseInt(t.css({maxHeight:""}).css("max-height").replace(/[^-\d\.]/g,""),10),i=e.data("defaultHeight");t.remove();var s=r||e.data("collapsedHeight")||i;e.data({expandedHeight:n,maxHeight:r,collapsedHeight:s}).css({maxHeight:"none"})}function f(e){if(!r[e.selector]){var t=" ";e.embedCSS&&e.blockCSS!==""&&(t+=e.selector+" + [data-readmore-toggle], "+e.selector+"[data-readmore]{"+e.blockCSS+"}"),t+=e.selector+"[data-readmore]{"+"transition: height "+e.speed+"ms;"+"overflow: hidden;"+"}",function(e,t){var n=e.createElement("style");n.type="text/css",n.styleSheet?n.styleSheet.cssText=t:n.appendChild(e.createTextNode(t)),e.getElementsByTagName("head")[0].appendChild(n)}(document,t),r[e.selector]=!0}}function l(r,i){this.element=r,this.options=e.extend({},n,i),f(this.options),this._defaults=n,this._name=t,this.init(),window.addEventListener?(window.addEventListener("load",a),window.addEventListener("resize",a)):(window.attachEvent("load",a),window.attachEvent("resize",a))}var t="readmore",n={speed:100,collapsedHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,blockCSS:"display: block; width: 100%;",startOpen:!1,beforeToggle:function(){},afterToggle:function(){}},r={},i=0,a=s(function(){e("[data-readmore]").each(function(){var t=e(this),n=t.attr("aria-expanded")==="true";u(t),t.css({height:t.data(n?"expandedHeight":"collapsedHeight")})})},100);l.prototype={init:function(){var t=e(this.element);t.data({defaultHeight:this.options.collapsedHeight,heightMargin:this.options.heightMargin}),u(t);var n=t.data("collapsedHeight"),r=t.data("heightMargin");if(t.outerHeight(!0)<=n+r)return!0;var i=t.attr("id")||o(),s=this.options.startOpen?this.options.lessLink:this.options.moreLink;t.attr({"data-readmore":"","aria-expanded":this.options.startOpen,id:i}),t.after(e(s).on("click",function(e){return function(n){e.toggle(this,t[0],n)}}(this)).attr({"data-readmore-toggle":"","aria-controls":i})),this.options.startOpen||t.css({height:n})},toggle:function(t,n,r){r&&r.preventDefault(),t||(t=e('[aria-controls="'+_this.element.id+'"]')[0]),n||(n=_this.element);var i=e(n),s="",o="",u=!1,a=i.data("collapsedHeight");i.height()<=a+5?(s=i.data("expandedHeight")+"px",o="lessLink",u=!0):(s=a,o="moreLink"),this.options.beforeToggle(t,i,!u),i.css({height:s}),i.on("transitionend",function(n){return function(){n.options.afterToggle(t,i,u),e(this).attr({"aria-expanded":u}).off("transitionend")}}(this)),e(t).replaceWith(e(this.options[o]).on("click",function(e){return function(t){e.toggle(this,n,t)}}(this)).attr({"data-readmore-toggle":"","aria-controls":i.attr("id")}))},destroy:function(){e(this.element).each(function(){var t=e(this);t.attr({"data-readmore":null,"aria-expanded":null}).css({maxHeight:"",height:""}).next("[data-readmore-toggle]").remove(),t.removeData()})}},e.fn.readmore=function(n){var r=arguments,i=this.selector;n=n||{};if(typeof n=="object")return this.each(function(){if(e.data(this,"plugin_"+t)){var r=e.data(this,"plugin_"+t);r.destroy.apply(r)}n.selector=i,e.data(this,"plugin_"+t,new l(this,n))});if(typeof n=="string"&&n[0]!=="_"&&n!=="init")return this.each(function(){var i=e.data(this,"plugin_"+t);i instanceof l&&typeof i[n]=="function"&&i[n].apply(i,Array.prototype.slice.call(r,1))})}}),define("launch",["require","exports","module","jquery","backbone","util","core/components","launchgrid","filter/filters","widgets","filtersPanel","dataUrlResolver","app","launchEditor","widgetWizard","coreService","storageService","localization","defectType/SingletonDefectTypeCollection","core/StickyHeader","widget/widgetsConfig","launchCrumbs","readmore-js"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("core/components"),u=e("launchgrid"),a=e("filter/filters"),f=e("widgets"),l=e("filtersPanel"),c=e("dataUrlResolver"),h=e("app"),p=e("launchEditor"),d=e("widgetWizard"),v=e("coreService"),m=e("storageService"),g=e("localization"),y=e("defectType/SingletonDefectTypeCollection"),b=e("core/StickyHeader"),w=e("widget/widgetsConfig"),E=e("launchCrumbs");e("readmore-js");var S=h.getInstance(),x=i.View.extend({initialize:function(e){this.contextName=e.contextName,this.context=e.context,this.queryString=e.queryString,this.navigationInfo=new D([{name:"All Runs",id:"all",grid:"launch"}],{prefix:this.contextName}),this.queryString&&this.navigationInfo.restoreNavigationState("launches/all"+this.queryString)},render:function(){return this.$header=(new T({header:this.context.getMainView().$header,navigationInfo:this.navigationInfo,context:this.context,project:S.project})).render(),this.$body=(new N({context:this.context,project:S.project,navigationInfo:this.navigationInfo})).render(),this},update:function(e){var t=e.queryString;this.navigationInfo.updateNavigationState(t)},destroy:function(){this.$header.destroy(),this.$body.destroy(),this.navigationInfo.destroy(),this.navigationInfo=null,this.undelegateEvents(),this.unbind(),delete this}}),T=o.BaseView.extend({initialize:function(e){this.$el=e.header,this.context=e.context,this.project=e.project,this.navigationInfo=e.navigationInfo,this.listenTo(this.navigationInfo,"navigation::loaded",this.update),this.listenTo(this.navigationInfo,"navigation::compare::hide",this.hideCompare),this.listenTo(this.navigationInfo,"navigation::merge::hide",this.hideMerge),this.listenTo(this.navigationInfo,"log::post::bug",this.updatePostBugBtn),this.listenTo(this.navigationInfo,"grid::data::loaded",this.toggleButtons),this.listenTo(this.navigationInfo,"grid::testitems::loaded",this.toggleTestItemsNav),this.listenTo(this.navigationInfo,"toggle::widget::wizard",this.toggleWidgetWizard),this.listenTo(this.navigationInfo,"refresh::counter",this.updateCounter),this.listenTo(this.navigationInfo,"reset::counter",this.resetCounter)},filterPanel:null,tpl:"tpl-launches-header",render:function(){return this.$el.html(s.templates(this.tpl)),this.$breadCrumbs=r("#breadCrumbs",this.$el),this.crumbsView=(new E.View({holder:this.$breadCrumbs,navigationInfo:this.navigationInfo})).render(),this.historyButton=r("#historyActivator",this.$el),this.filterPanelHolder=r("#filterPanel",this.$el),this.compareButton=r("#launchesCompare",this.$el),this.mergeButton=r("#mergeLaunches",this.$el),this.postBugButton=r("#postBug",this.$el),this.loadBugButton=r("#loadBug",this.$el),this.widgetWizardButton=r("#addWidget",this.$el),this.testItemsNavBtn=r("#testItemsNav",this.$el),this.counter=r("#changeCounter",this.$el),this.count=0,this.validateForFilters(),this.validatePostLoadBug(),this},updateCounter:function(e,t){this.count+=e,this.counter=r("#changeCounter",this.$el),this.counter.text(this.count),this.counter.addClass("rp-display-block")},resetCounter:function(){this.count=0,r("#changeCounter",this.$el).removeClass("rp-display-block")},toggleWidgetWizard:function(e){var t=e.show?"show":"hide",n=e.enable?"remove":"add",r=e.enable?"":this.widgetWizardButton.data("title"),i=this.widgetWizardButton.find(".add-widget-btn");this.widgetWizardButton[t]()[n+"Class"]("disabled").attr("title",r),r?i.removeAttr("title"):i.attr("title",i.data("title"))},openWidgetWizard:function(e){if(r(e.currentTarget).hasClass("disabled"))return;this.widgetWizard&&(this.widgetWizard=null),this.widgetWizard=(new d.WidgetWizard).render({filter_id:this.filterPanel.getCurrentFilter().id})},update:function(){this.validateForFilters(),this.crumbsView.updateCrumbs(),this.validatePostLoadBug(),this.validateForTestItemsNav(),this.navigationInfo.isHistory()&&this.historyButton.hide(),this.resetCounter()},toggleButtons:function(e){e.size?(this.validateForHistory(),this.validateMergeCompare()):this.hideButtons()},hideButtons:function(){this.historyButton.hide(),this.compareButton.hide(),this.mergeButton.hide()},validatePostLoadBug:function(){var e=!this.navigationInfo.isDebug()&&this.navigationInfo.isLog()?"show":"hide";this.postBugButton[e](),this.loadBugButton[e]()},validateForTestItemsNav:function(){var e=this.navigationInfo.isLog()?"show":"hide";this.toggleTestItemsNav(e)},toggleTestItemsNav:function(e){this.testItemsNavBtn[e]()},validateForHistory:function(){var e=this.navigationInfo.validForHistory()?"show":"hide";this.historyButton[e]()},validateMergeCompare:function(){var e=!this.navigationInfo.isDebug()&&this.navigationInfo.isLaunches()?"show":"hide";this.compareButton[e](),this.mergeButton[e]()},validateForFilters:function(){this.navigationInfo.requiresFilters()?(this.filterPanel?this.filterPanel.update():this.createFilterPanel(),this.filterPanelHolder.show()):this.filterPanel&&this.filterPanelHolder.hide()},createFilterPanel:function(){this.filterPanel=(new l.FilterPanel({element:this.filterPanelHolder,navigationInfo:this.navigationInfo})).render()},events:{"click #historyActivator":"onShowHistory","click #gridRefresh":"onRefresh","click #postBug:not(.disabled)":"postBug","click #loadBug:not(.disabled)":"loadBug","click #launchesCompare:not(.disabled)":"toggleCompareSelect","click #mergeLaunches:not(.disabled)":"toggleMerge","click #addWidget":"openWidgetWizard","click #testItemsNav a":"navigateToTestItem"},onRefresh:function(e){e.preventDefault(),this.navigationInfo.trigger("navigation::reload::table",{scrollTop:r(".fixed_header").hasClass("affix")?r("body").getNiceScroll(0).newscrolly:0}),this.resetCounter()},postBug:function(){this.navigationInfo.trigger("open::post::bug")},loadBug:function(){this.navigationInfo.trigger("open::load::bug")},onShowHistory:function(e){e.preventDefault(),this.historyButton.hide(),this.navigationInfo.trigger("navigation::show::history")},toggleCompareSelect:function(e){e.preventDefault(),this.comparePanel?(this.stickyHeader&&this.stickyHeader.destroy(),this.hideCompare(),this.navigationInfo.trigger("navigation::compare::hide")):(this.showFor(this.compareButton),this.createComparePanel(),this.navigationInfo.trigger("navigation::compare::show",this.comparePanel),this.stickyHeader&&this.stickyHeader.destroy(),this.stickyHeader=new b({fixedBlock:r(".history-panel:first")}))},navigateToTestItem:function(e){var t=r(e.currentTarget);t.hasClass("disabled")&&e.preventDefault();var n=t.attr("title");if(!n)return},showFor:function(e){r("li.rp-launch-btn",this.$el).addClass("disabled"),e.removeClass("disabled").addClass("history-shown"),this.filterPanelHolder.hide()},hideFor:function(e){this.stickyHeader&&this.stickyHeader.destroy(),e.removeClass("history-shown"),r("li.rp-launch-btn",this.$el).removeClass("disabled"),this.filterPanelHolder.show()},hideCompare:function(){this.hideFor(this.compareButton),this.comparePanel&&(this.comparePanel.destroy(),this.comparePanel=null)},createComparePanel:function(){this.comparePanel=(new k({container:r("#contentHeader"),context:this.context,project:S.project,navigationInfo:this.navigationInfo})).render()},toggleMerge:function(e){e.preventDefault(),this.mergePanel?(this.stickyHeader&&this.stickyHeader.destroy(),this.hideMerge(),this.navigationInfo.trigger("navigation::merge::hide")):(this.showFor(this.mergeButton),this.createMergePanel(),this.navigationInfo.trigger("navigation::merge::show",this.mergePanel),this.stickyHeader&&this.stickyHeader.destroy(),this.stickyHeader=new b({fixedBlock:r(".history-panel:first")}))},hideMerge:function(){this.hideFor(this.mergeButton),this.mergePanel&&(this.mergePanel.destroy(),this.mergePanel=null)},updatePostBugBtn:function(e){var t="",n="",r="";e.action==="remove"?(e.action=s.canPostToJira()?"remove":"add",r=s.hasValidBtsSystem()?"remove":"add",t=e.action==="add"?this.postBugButton.data("notbs"):this.postBugButton.data("tbs"),n=s.hasValidBtsSystem()?this.loadBugButton.data("tbs"):this.loadBugButton.data("notbs")):e.action==="isProcessing"?(e.action="add",r="add",t=this.postBugButton.data("isprocessing"),n=this.loadBugButton.data("isprocessing")):e.action==="noissues"&&(e.action="add",r="add",t=this.postBugButton.data("noissues"),n=this.loadBugButton.data("noissues")),this.postBugButton[e.action+"Class"]("disabled").attr("title",t),this.loadBugButton[(r||"add")+"Class"]("disabled").attr("title",n)},createMergePanel:function(){this.mergePanel=(new A({container:r("#contentHeader"),context:this.context,navigationInfo:this.navigationInfo})).render()},destroy:function(){this.stickyHeader&&this.stickyHeader.destroy(),this.crumbsView&&this.crumbsView.destroy(),this.widgetWizard&&this.widgetWizard.destroy(),this.filterPanel&&this.filterPanel.destroy(),this.hideMerge(),this.hideCompare(),this.navigationInfo=null,o.BaseView.prototype.destroy.call(this)}}),N=o.BaseView.extend({grid:null,initialize:function(e){this.$el=e.context.getMainView().$body,this.context=e.context,this.project=e.project,this.navigationInfo=e.navigationInfo,this.listenTo(this.navigationInfo,"navigation::loaded",this.update),this.listenTo(this.navigationInfo,"navigation::reload::table",this.update),this.listenTo(this.navigationInfo,"navigation::show::history",this.showHistory),this.listenTo(this.navigationInfo,"navigation::compare::hide",this.removeGridForCompare),this.listenTo(this.navigationInfo,"navigation::compare::show",this.showGridForCompare),this.listenTo(this.navigationInfo,"navigation::merge::hide",this.removeGridForMerge),this.listenTo(this.navigationInfo,"navigation::merge::show",this.showGridForMerge)},update:function(e){e=e||{},e.rerender?(this.grid&&this.grid.destroy(),this.grid=null,this.initializeGrid()):e.scrollTop?this.grid.load(!1,e.scrollTop||0):this.grid.load(),this.validateForInfoLine()},initializeGrid:function(){this.$gridWrapper.off().empty(),this.navigationInfo.isHistory()?this.grid=new u.HistoryGrid({element:this.$gridWrapper,navigationInfo:this.navigationInfo,path:window.location.hash.split("history?")[0],urlResolver:B}):this.grid=new u.GridByType({gridHolder:this.$gridWrapper,infoHolder:this.$infoHolder,navigationInfo:this.navigationInfo,urlResolver:B})},navigate:function(e){this.navigationInfo.restoreNavigationState("launches/"+e),this.navigationInfo.last().get("id")!="history"&&this.createFilterPanel()},validateForInfoLine:function(){if(!this.navigationInfo.isLaunches()&&!this.navigationInfo.isLog()){var e=this.navigationInfo.isHistory()?this.navigationInfo.at(this.navigationInfo.length-2).get("data"):this.navigationInfo.last().get("data");if(!this.infoLine){this.infoLine=new C({container:this.$infoHolder,item:e,navigationInfo:this.navigationInfo});var t=this;_.isEmpty(this.navigationInfo.defectTypes.models)?this.navigationInfo.defectTypes.on("reset",function(){t.infoLine.render(e)}):t.infoLine.render(e)}else this.infoLine.reload(e)}else this.infoLine&&(this.infoLine.unrender(),this.infoLine.destroy(),this.infoLine=null)},showHistory:function(){var e=this.grid.collection.map(function(e){return e.get("id")}),t=c.historyGridUrl(e,S.defaultHistoryDepth,this.navigationInfo.extractTabId());S.router.navigate(t,{trigger:!0})},showGridForCompare:function(e){this.grid&&(this.compareGrid=(new L({panel:e,grid:this.grid,navigationInfo:this.navigationInfo})).render(),this.grid.$el.hide())},removeGridForCompare:function(){this.compareGrid.destroy(),this.compareGrid=null,this.grid.$el.show()},showGridForMerge:function(e){this.grid&&(this.mergeGrid=(new O({panel:e,grid:this.grid,navigationInfo:this.navigationInfo})).render(),this.grid.$el.hide())},removeGridForMerge:function(){this.mergeGrid.destroy(),this.mergeGrid=null,this.grid.$el.show()},render:function(){return this.$el.html('<div id="infoWrapper"></div><div id="gridWrapper"></div>'),this.$infoHolder=r("#infoWrapper",this.$el),this.$gridWrapper=r("#gridWrapper",this.$el),this.initializeGrid(),this.validateForInfoLine(),this},destroy:function(){this.grid&&this.grid.destroy&&(this.grid.destroy(),this.grid=null),this.infoLine&&(this.infoLine.destroy(),this.infoLine=null),this.navigationInfo=null,o.BaseView.prototype.destroy.call(this)}}),C=o.BaseView.extend({tpl:"tpl-launches-info-panel",notFoundTPL:"tpl-launch-notfound",toolTipTpl:"tpl-launches-tooltip",defectsTipContent:"tpl-launches-tooltip-defects",execTipContent:"tpl-launches-tooltip-executions",defectTpl:"tpl-launches-info-panel-defect",initialize:function(e){e.container.html('<span id="infoLine" />'),this.$el=e.container.find("#infoLine"),this.item=e.item,this.navigationInfo=e.navigationInfo,this.listenTo(e.navigationInfo,"launch:not_found",this.updateTemplate),this.defects={},this.stats=[]},updateTemplate:function(e){this.$el.html(s.templates(this.notFoundTPL,{isLaunch:!e})),r("#gridWrapper").hide()},events:{"mouseenter [data-tooltip-type]":"showTooltip"},reload:function(e){e&&(this.item=e);if(this.item){var t=this.item.launchId?"item":"launch",n=this.item.id,r=this;v.getLaunchItem(t,n).done(function(e){r.item=e,r.unrender(),r.render()}).fail(function(e){r.unrender(),s.ajaxFailMessenger(e)})}else this.unrender(),this.render()},showTooltip:function(e){var t=r(e.currentTarget),n=t.data("tooltipType");t.data("tooltip")||(t.data("tooltip","tooltip"),this.createTooltip(t,n))},createTooltip:function(e,t){var n="";t=="duration"?n=s.templates(this.toolTipTpl,{message:g.launchesHeaders.durationSpecific}):t=="executions"?n=this.renderExecutionsTooltip():n=this.renderDefectsTooltip(t),e.closest("li").append(n)},renderExecutionsTooltip:function(){return console.log(this.stats),s.templates(this.execTipContent,{stats:this.stats})},renderDefectsTooltip:function(e){return s.templates(this.defectsTipContent,_.extend(this.defects[e],{item:this.item,noTotalLink:!0,tab:this.navigationInfo.getTabAsUrlString(),noSubDefects:!this.navigationInfo.defectTypes.checkForSubDefects(),urlResolver:B}))},renderDefect:function(e){return function(t){return s.templates(e,t)}},render:function(e){return e&&(this.item=e),this.item?this.$el.html(s.templates(this.tpl,this.getRenderModel())):this.updateTemplate(this.navigationInfo.length>2),this.$el.show(),this},getDefects:function(){var e=this.item.statistics.defects;_.each(e,function(e,t){this.defects[t]=this.getDefectByType(e,t)},this)},getDefectByType:function(e,t){var n={defects:[]},r=0;return _.each(e,function(e,t){if(t=="total")r=parseInt(e);else{var i=this.navigationInfo.defectTypes,s=i.getDefectType(t);s&&(s.val=parseInt(e),n.defects.push(s))}},this),n.defects.sort(s.sortSubDefects),n.total=r,n.type=t,n.cls=s.getDefectCls(t),n.short=this.getShortType(t),n.color=s.getDefaultColor(t),n},getShortType:function(e){var t=g.defectShortCutById[e.toUpperCase()];return t},getCls:function(e){var t="",n=e.split("_");return t=n.length==1?n[0].slice(0,1):n.length==2?n[0][0]+n[1][0]:"",t},getStats:function(){var e=this.item.statistics.executions,t=+e.total,n=(+e.passed/t*100).toFixed(2),r=(+e.failed/t*100).toFixed(2),i=(+e.skipped/t*100).toFixed(2);this.stats=[{name:"passed",value:n},{name:"failed",value:r},{name:"skipped",value:i}]},getRenderModel:function(){this.getDefects(),this.getStats(),console.log(this.defects);var e={total:this.item.statistics.executions.total,duration:s.timeFormat(this.item.start_time,this.item.end_time),finish:s.dateFormat(this.item.end_time,!0),status:this.item.status.toLocaleLowerCase(),sortedIssueTypes:s.getIssueTypes(),interrupted:this.statusInterrupt(this.item),renderDefect:this.renderDefect(this.defectTpl),getDefaultColor:s.getDefaultColor,defects:this.defects},t=this.stats,n=0,r={value:0},i={};return _.each(t,function(e){e.value=parseFloat(e.value.escapeNaN()),n+=e.value,r=e.value>r.value?e:r}),(n>100||n<100)&&r.value!==0&&(r.value=(100-(n-r.value)).toFixed(2)),_.each(t,function(e){i[e.name]=e.value}),_.extend(e,i)},statusInterrupt:function(e){return e.status==="INTERRUPTED"},unrender:function(){r("[data-tooltip-type]",this.$el).popover("destroy"),r(".info_section:first",this.$el).remove(),r(".no-launches").remove(),r("#gridWrapper").show()}}),k=i.View.extend({initialize:function(e){this.context=e.context,this.project=e.project,this.$container=e.container,this.navigationInfo=e.navigationInfo,this.ids=[],this.compareModal=s.getDialog({name:"tpl-launches-compare-modal"}),this.modalContent=r("#compareContent",this.compareModal),this.modalContent.css("min-height","420px"),this.loader=r(".submitticket-loader",this.compareModal),this.listenTo(this.navigationInfo,"add::compare::item",this.addCompareItem),this.listenTo(this.navigationInfo,"remove::compare::item::from::panel",this.removeCompareItemFromPanel),w.clear()},className:"history-panel",tmpl:"tpl-launches-compare-panel",tmpCompareItem:"tpl-launches-panel-item",events:{"click #cancel-history":"cancelCompare","click .btn-show-compare":"compare","click .remove-item":"removeMergeItem"},addCompareItem:function(e){this.comparesHolder.append(s.templates(this.tmpCompareItem,e)),this.ids.push(e.id),this.compareBtn.show()},removeMergeItem:function(e){var t=r(e.currentTarget);this.navigationInfo.trigger("remove::compare::item::from::grid",t.data("id")),t.closest("li").remove(),this.removeFromIds(t.data("id"))},removeCompareItemFromPanel:function(e){r("#panel-item-"+e,this.$el).remove(),this.removeFromIds(e)},removeFromIds:function(e){this.ids=_.filter(this.ids,function(t){return t!==e}),this.ids.length||this.compareBtn.hide()},cancelCompare:function(e){e.preventDefault(),this.navigationInfo.trigger("navigation::compare::hide")},clearCompare:function(){this.ids=[],this.comparesHolder.empty(),this.navigationInfo.trigger("navigation::compare::clear")},render:function(){return this.$container.prepend(this.$el.html(s.templates(this.tmpl))),this.comparesHolder=r(".history-items",this.$el),this.compareBtn=r("button.btn-show-compare",this.$el),this},createChart:function(e){var t="launches_comparison_chart",n=w.getInstance(),r=n.widgetTypes[t].staticCriteria;delete r.statistics$defects$no_defect$total,this.widget=new f.LaunchesComparisonChart({container:this.modalContent,param:{gadget:t,content:e,content_fields:_.keys(n.widgetTypes[t].staticCriteria),height:S.defaultWidgetHeight}}),this.widget.render()},compare:function(e){e.preventDefault();var t=this;t.widget&&t.widget.remove(),t.loader.show(),t.compareModal.modal("show").one("shown.bs.modal",function(){v.getCompare(t.ids.join(",")).done(function(e){t.compareModal.length&&(t.loader.hide(),t.createChart(e))}).fail(function(e){t.loader.hide(),s.ajaxFailMessenger(e,"errorUpdateWidget"),t.compareModal.modal("hide")})}),t.compareModal.one("hidden.bs.modal",function(){t.clearCompare(),t.widget.remove(),setTimeout(function(){t.compareModal.remove()},100)})},destroy:function(){this.widget&&this.widget.remove(),this.compareModal.length&&this.compareModal.remove(),o.RemovableView.prototype.destroy.call(this)}}),L=i.View.extend({initialize:function(e){this.launchGrid=e.grid,this.launchGrid.destroyStickyHeader(),this.panel=e.panel,this.navigationInfo=e.navigationInfo,this.listenTo(this.navigationInfo,"navigation::compare::clear",this.clearSelect),this.listenTo(this.navigationInfo,"remove::compare::item::from::grid",this.removeCompareItem)},attributes:{id:"compareGrid"},events:{"click .rp-table-row":"selectForCompare"},clearSelect:function(){r("button.btn-show-compare",this.panel.$el).hide(),r("div.selected-forhistory",this.$el).attr("data-toggled","off").removeClass("selected-forhistory")},selectForCompare:function(e){var t=r(e.currentTarget),n=t.attr("id");!t.attr("data-toggled")||t.attr("data-toggled")=="off"?(t.attr("data-toggled","on"),t.addClass("selected-forhistory"),this.navigationInfo.trigger("add::compare::item",{id:n,name:this.launchGrid.collection.get(n).get("name")})):(t.attr("data-toggled","off").removeClass("selected-forhistory"),this.navigationInfo.trigger("remove::compare::item::from::panel",n))},removeCompareItem:function(e){r("#"+e,this.$el).attr("data-toggled","off").removeClass("selected-forhistory")},render:function(){var e=this.launchGrid.$el.find(".container-fluid.suit-grid").clone();return r(".rp-table-th",e).removeClass("sortable"),r(".rp-table-th .keyboard_arrow_down",e).hide(),r("input",e).attr("disabled","disabled"),r(".tooltip",r(e)).remove(),_.forEach(r("a",e),function(e){var t=r(e);t.replaceWith('<span style="'+t.attr("style")+'" class="to-history '+t.attr("class")+'">'+t.html()+"</span>")}),this.launchGrid.$el.after(this.$el.html(e).addClass(this.launchGrid.$el.attr("class"))),this},destroy:function(){o.RemovableView.prototype.destroy.call(this)}}),A=i.View.extend({initialize:function(e){this.launches=[],this.launchesId=[],this.lastLaunch=null,this.navigationInfo=e.navigationInfo,this.$container=e.container,this.listenTo(this.navigationInfo,"add::compare::item",this.addCompareItem),this.listenTo(this.navigationInfo,"remove::merge::item::from::panel",this.removeMergeItemPanel)},className:"history-panel",tmpl:"tpl-launches-merge-panel",mergeFormTmpl:"tpl-launches-merge-form",rowTpl:"tpl-launch-update-row",tmpCompareItem:"tpl-launches-panel-item",events:{"click #cancel-merge":"cancelMerge","click [data-js-merge-launches]":"showPopupForMerge","click .remove-item":"removeCompareItem"},removeCompareItem:function(e){var t=r(e.currentTarget);this.navigationInfo.trigger("remove::compare::item::from::grid",t.data("id")),t.closest("li").remove()},removeMergeItemPanel:function(e){r("#panel-item-"+e,this.$el).remove()},addCompareItem:function(e){this.comparesHolder.append(s.templates(this.tmpCompareItem,e))},cancelMerge:function(){this.navigationInfo.trigger("navigation::merge::hide")},showPopupForMerge:function(){this.mergeEditor=null,this.mergeEditor=(new p.MergeEditor({launches:this.launches,eventBus:this.navigationInfo,owner:S.userModel.get("name").replace("_"," ").capitalize(),callback:function(e,t){this.updateGrid(e,t),this.cancelMerge()}.bind(this)})).render()},updateGrid:function(e,t){var n=this.grid.collection,i=n.get(t),s=this,o=_.reject(this.launches,function(e){return r("#"+e.id,this.grid.$el).addClass("selected-forhistory").fadeOut("slow",function(){r("#"+e.id,s.grid.$el).remove()}),e.id==t},this),u=e.id,s=this;n.remove(o),_.delay(function(){S.router.navigate(document.location.hash+"/"+u+"?"+s.navigationInfo.getTabAsUrlString(),{trigger:!0})},800)},render:function(){return this.$container.prepend(this.$el.html(s.templates(this.tmpl))),this.comparesHolder=r(".history-items",this.$el),this},destroy:function(){this.mergeEditor=null,o.RemovableView.prototype.destroy.call(this)}}),O=i.View.extend({initialize:function(e){this.launchGrid=e.grid,this.launchGrid.destroyStickyHeader(),this.panel=e.panel,this.panel.grid=this.launchGrid,this.navigationInfo=e.navigationInfo,this.listenTo(this.navigationInfo,"remove::compare::item::from::grid",this.removeMergeItem),this.listenTo(this.launchGrid.collection,"reset",this.updateGrid)},attributes:{id:"mergeGrid"},events:{"click div.rp-table-row":"selectForMerge"},tplMergeAlert:"tpl-merge-warning",selectForMerge:function(e){var t=r(e.currentTarget),n=t.attr("id"),i=this.launchGrid.collection.get(n);if(!t.hasClass("disabled")||this.validateForOwner(i))if(!t.attr("data-toggled")||t.attr("data-toggled")=="off"){var s=this.validateIsProcessing(i),u=this.validateIsDeleting(i.get("id"));if(i.get("status")=="IN_PROGRESS"||s||u)var a=s?g.launches.launchIsProcessing:u?g.launches.launchIsDeleting:g.launches.launchNotInProgress,f=(new o.DialogWithCallBack({headerTxt:"unableSelectForMerge",actionTxt:"ok",hideDismiss:!0,actionStatus:!0,data:{message:a},contentTpl:this.tplMergeAlert,callback:function(){f.$el.modal("hide")}})).render();else{t.attr("data-toggled","on"),t.addClass("selected-forhistory"),this.panel.launches.push(i),this.panel.launches.length>1&&r("[data-js-merge-launches]",this.panel.$el).show();var l={id:n,name:i.get("name"),number:i.get("number")};this.navigationInfo.trigger("add::compare::item",l)}}else this.removeMergeItem(n),this.navigationInfo.trigger("remove::merge::item::from::panel",n)},removeMergeItem:function(e){var t=r("#"+e,this.$el);t.attr("data-toggled","off").removeClass("selected-forhistory"),this.panel.launches=_.filter(this.panel.launches,function(t){return t.id!==e}),this.panel.launches.length<2&&r("button#merge-launches",this.panel.$el).hide()},updateGrid:function(){_.each(this.launchGrid.collection.models,function(e){var t=e.get("id"),n=r("#"+t+" .label.autoanalyze",this.$el),i=this.validateIsProcessing(e)?"show":"hide";n[i]()},this)},render:function(){var e=this.launchGrid.$el.find(".container-fluid.suit-grid").clone();return r(".rp-table-th",r(e)).removeClass("sortable"),r(".rp-table-th .keyboard_arrow_down",r(e)).hide(),r("input",r(e)).attr("disabled","disabled"),r(".tooltip",r(e)).remove(),_.forEach(r("a",e),function(e){var t=r(e);t.replaceWith('<span style="'+t.attr("style")+'" class="to-history '+t.attr("class")+'">'+t.html()+"</span>")}),S.userModel.hasPermissions()||_.each(this.launchGrid.collection.models,function(t){this.validateForOwner(t)||r("#"+t.get("id"),e).addClass("disabled")},this),this.launchGrid.$el.after(this.$el.html(e).addClass(this.launchGrid.$el.attr("class"))),this},validateForOwner:function(e){return e.get("owner")===S.userModel.get("name")},validateIsProcessing:function(e){return e.get("isProcessing")},validateIsDeleting:function(e){var t=m.getDeletingLaunches();return _.contains(t,e)},destroy:function(){this.launchGrid=null,this.navigationInfo=null,this.panel=null,o.RemovableView.prototype.destroy.call(this)}}),M=i.Model.extend({defaults:{name:"",id:"",params:null,grid:"",data:null}}),D=i.Collection.extend({model:M,prefix:"",parentItem:null,scrollToDestinationId:null,initialize:function(e,t){this.prefix=t.prefix,this.url=c.getProjectBase(),this.navigationCache={},this.requestParameters=new o.RequestParameters({}),this.requestParameters.loadObjectsCount("objectsOnPage"),this.requestParameters.loadObjectsCount("objectsOnPageLogs"),this.requestParameters.clear(),this.defectTypes=new y},getLevelGridType:function(){return this.last().get("grid")},checkIfStepDefaultsRevealed:function(){return Boolean(this.last().get("params"))},toNavigationObject:function(e){if(e){var t=[],n=e.split("/");return _.each(n,function(e,n){var r=e.split("?");n===0&&(r[0]="all"),t.push({id:r[0],params:r[1]})}),t}},getURLForCurrentLocation:function(){return this.reduce(function(e,t){var n=(e?e+"/":"")+t.get("id");return _.isEmpty(t.get("params"))||(n+="?"+t.get("params")),n},this.prefix?this.prefix:null)},saveNavigationState:function(){this.trigger("navigation::loaded"),this.last().get("params")&&this.requestParameters.apply(this.last().get("params"))},updateNavigationState:function(e){var t=this.getLevelGridType();if(e){var n=this.toNavigationObject(e);this.combineRequestWithCurrentNavigation(n),this.setupRequestParamsForLevel()}else{while(this.length>1)this.pop();this.setupRequestParamsForLevel()}this.parentItem=null,this.trigger("navigation::loaded",{rerender:t!==this.getLevelGridType()});var i=r(".active.tab");i.hasClass("unsaved")?i.removeClass("navigated"):i.addClass("navigated"),this.trigger("navigation::state::change",{params:this.requestParameters,tabSwitched:!0})},setupRequestParamsForLevel:function(){this.last().get("params")?(this.requestParameters.clear(this.setRequestObjectsType()),this.requestParameters.apply(this.last().get("params"))):this.requestParameters.clear(this.setRequestObjectsType())},setRequestObjectsType:function(){return this.getLevelGridType()==="log"?"objectsOnPageLogs":"objectsOnPage"},applyRequestParameters:function(){this.last().set("params",this.requestParameters.toURLSting()),this.navigationCache[this.last().get("id")]=this.last();var e="#"+S.project.projectId+"/"+this.getURLForCurrentLocation();S.router.navigate(e,{trigger:!0})},applyPaging:function(e,t){var n=this.last().get("params");n?this.requestParameters.apply(n):this.revealDefaults(),e&&this.requestParameters.setPage(e),t&&this.requestParameters.setPageSize(t),this.last().set("params",this.requestParameters.toURLSting()),this.updateHashSilently(),this.trigger("navigation::state::change",{params:this.requestParameters})},applySorting:function(e,t){this.revealDefaults(),this.requestParameters.setSortInfo(e,t),this.updateLastItemCacheAndUrl(),this.trigger("navigation::state::change",{params:this.requestParameters,state:!0})},applyPageCount:function(){this.trigger("navigation::state::change",{params:this.requestParameters,state:!0})},applyFilters:function(e,t){var n=this.last(),r=n.get("params");this.requestParameters.clear(this.setRequestObjectsType()),r&&this.requestParameters.apply(r);if(!this.isHistory())this.requestParameters.setFilters(e),this.requestParameters.setPage(1),t&&this.requestParameters.setTab(t);else{var i=_.find(decodeURIComponent(r).split("&"),function(e){return e.indexOf("ids")===0}),s=i?i.substring(4):"";e.push({id:"ids",value:s}),this.requestParameters.setFilters(e)}this.updateLastItemCacheAndUrl(),this.trigger("reset::counter"),this.trigger("navigation::reload::table",{}),this.trigger("navigation::state::change",{params:this.requestParameters,state:!0})},updateLastItemCacheAndUrl:function(){this.last().set("params",this.requestParameters.toURLSting()),this.navigationCache[this.last().get("id")]=this.last(),this.updateHashSilently()},getCurrentFilterValue:function(e){var t=this.last().get("params"),n=null;if(t){this.requestParameters.clear(this.setRequestObjectsType()),this.requestParameters.apply(t);var r=_.find(this.requestParameters.getFilters(),function(t){return t.id===e});r&&(n=r.value)}return n},revealDefaults:function(){if(this.checkIfStepDefaultsRevealed())return;var e=this.getRequestData();this.requestParameters.setPage(e["page.page"]),this.requestParameters.setPageSize(e["page.size"]);var t=e["page.sort"].split(",");this.requestParameters.setSortInfo(t[0],t[1]),this.last().set("params",this.requestParameters.toURLSting())},updateHashSilently:function(){var e="#"+S.project.projectId+"/"+this.getURLForCurrentLocation();S.router.navigate(e,{trigger:!1})},combineRequestWithCurrentNavigation:function(e){var t=[];for(var n=0,r=e.length;n<r;n+=1){var i=this.navigationCache[e[n].id];if(!i||n===r-1){var s=this.loadNavigationStep(e[n],n);t.push(s),s&&s.grid!=="log"&&(this.navigationCache[e[n].id]=s)}else i.set("params",e[n].params),t.push(i)}this.reset(t)},loadNavigationStep:function(e,t){var n=null,i=c.getProjectBase(),o=t>1?"/item/":"/launch/",u=this,a;return e.id==="all"?n=new M({name:"All",id:e.id,params:e.params,grid:"launch"}):e.id.indexOf("all-cases-for-")===0?(a=i+o+e.id.replace("all-cases-for-",""),r.ajax(a,{type:"GET",async:!1,success:function(t){n=new M({name:t.name+(t.number?" #"+t.number:""),id:e.id,params:e.params,grid:"test",data:t}),u.requestParameters.clear("objectsOnPage")},error:function(e){u.trigger("launch:not_found",t>1),e&&s.ajaxFailMessenger(e,"loadNavigationStep")}})):e.id.indexOf("log-for-")===0?(a=i+"/item/"+e.id.replace("log-for-",""),r.ajax(a,{type:"GET",async:!1,success:function(t){n=new M({name:t.name,id:e.id,params:e.params,grid:"log",data:t}),u.requestParameters.clear("objectsOnPageLogs")},error:function(e){u.trigger("launch:not_found",t>1),e&&s.ajaxFailMessenger(e,"loadNavigationStep")}})):e.id=="history"?n=new M({name:e.id,id:e.id,params:e.params,grid:"history"}):(a=i+o+e.id,r.ajax(a,{type:"GET",async:!1,success:function(t){var r=P.typeTestAndChildren(t)?"test":"suit";n=new M({name:t.name+(t.number?" #"+t.number:""),id:e.id,params:e.params,grid:r,data:t}),u.requestParameters.clear("objectsOnPage")},error:function(e){u.trigger("launch:not_found",t>1),e&&s.ajaxFailMessenger(e,"loadNavigationStep")}})),n},restoreNavigationState:function(e){var t=this.toNavigationObject(e.replace("launches/all","").replace("userdebug/all","")),n=[];_.forEach(t,function(e,t){var r=this.loadNavigationStep(e,t);n.push(r),this.navigationCache[e.id]=r},this),this.reset(n),this.saveNavigationState(),this.trigger("navigation::state::change",this.requestParameters)},getRequestData:function(){var e={},t=this.last().get("id");if(this.last().get("params")){this.requestParameters.apply(this.last().get("params"));if(t.indexOf("all-cases-")===0){var n=this.requestParameters.toJSON(),r=this.isExecutionStatistics(n),i=t.replace("all-cases-for-",""),s=H.allcases(r,i,this.length);return _.extend(s,n)}}return this.isLaunches()?e=H.launch():this.length===2?(e=H.suit(),e["filter.eq.launch"]=t):this.isLog()?(e=H.log(),e["filter.eq.item"]=t.replace("log-for-","")):(e=H.test(),e["filter.eq.parent"]=t),_.isEmpty(this.requestParameters.getSortInfo())&&this.applySortingParamsByGridType(this.requestParameters),_.extend(e,this.requestParameters.toJSON())},isExecutionStatistics:function(e){return!e["filter.in.issue$issue_type"]&&e["filter.in.type"]!==undefined},getValidator:function(){return P},getTempTab:function(e){var t=new o.RequestParameters({}),n=H.launch(),r=n["page.sort"].split(",");return t.setSortInfo(r[0],r[1]),t.setTab(e.id),{id:e.id,name:e.name,requestParams:t,url:this.getUrlForRequestParams(t),stateUrl:"",type:"launch",isShared:e.isShared,owner:S.userModel.get("name")}},getUrlForRequestParams:function(e){return c.tabUrl(e.toURLSting())},replaceTempId:function(e,t){this.requestParameters.setTab(t),this.last().set("params",this.requestParameters.toURLSting());var n=window.location.hash;n=n.replace(e,t),S.router.navigate(n,{trigger:!1})},applySortingParamsByGridType:function(e){var t=this.getLevelGridType(),n=this.models.length===1?H.launch():t?H[t]():"";if(n){var r=n["page.sort"].split(",");e.setSortInfo(r[0],r[1])}},getDefaultTab:function(){var e=new o.RequestParameters({});return this.applySortingParamsByGridType(e),{id:e.getTab(),requestParams:e,name:"All Launches",owner:S.userModel.get("name"),url:c.tabUrl(e.toURLSting())}},extractTabId:function(e){var t="",n=e?e:this.last().get("params");try{t=n.split("tab.id=")[1].split("&")[0]}catch(r){}return t||S.defaultTabId},getFilter:function(e){return _.find(this.requestParameters.getFilters(),function(t){return t.id===e})},getCurrentStepTab:function(){return{id:this.requestParameters.getTab(),requestParams:this.requestParameters,url:c.tabUrl(this.requestParameters.toURLSting())}},changeCurrentStepId:function(e){return this.requestParameters.setTab(e),this.updateLastItemCacheAndUrl(),{id:this.requestParameters.getTab(),requestParams:this.requestParameters}},applyCurrentStepTab:function(e){this.requestParameters.set(e.attributes),this.updateLastItemCacheAndUrl(),this.trigger("navigation::reload::table",{})},restoreFromLast:function(){var e="?"+this.getTabAsUrlString(),t=this.last(),n,r;t&&(r=t.get("data"),n="#"+S.project.projectId+"/"+this.prefix+"/all"+e+"/"+r.launchId+e,_.forEach(r.path_names,function(t,r){n+="/"+r+e}),n+="/"+t.get("id"),t.get("id").indexOf("log-for")===-1&&(n+=e),S.router.navigate(n,{trigger:!0}))},followTabUrl:function(e){e=e||c.launchesBase()+"/all",S.router.navigate(e),i.history.loadUrl(e)},requiresFilters:function(){return!this.isLog()},isAllCases:function(){return this.last().get("id").indexOf("all-cases-for-")===0},isHistory:function(){return this.last().get("id").indexOf("history")===0},getUrlForSuit:function(e){var t=this.at(1),n="?"+this.getTabAsUrlString(),r=this.at(0).toJSON().params,i=r?"?"+r:n;return s.getRoot()+"#"+S.project.projectId+"/"+this.prefix+"/all"+i+"/"+t.get("id").replace("all-cases-for-","")+n+"/"+e+n},getTabAsUrlString:function(){return this.requestParameters?"tab.id="+this.requestParameters.get("tab")["tab.id"]:""},isDebug:function(){return this.prefix==="userdebug"},isLaunches:function(){return this.length===1},isLog:function(){return this.getLevelGridType()==="log"},isLaunchOwner:function(){var e=this.at(1),t=e?e.get("data"):{};return t.owner===S.userModel.get("name")},launchIsProcessing:function(e){var t=!1;if(e.launchId){var n=this.get(e.launchId)||this.get("all-cases-for-"+e.launchId);if(n){var r=n.get("data");r&&(t=r.isProcessing)}}return t},isInterrupted:function(){var e=this.last().get("data");return e.status==="INTERRUPTED"||e.status==="STOPPED"},isLaunchInterrupted:function(){var e=this.last().get("data"),t=!1;if(e.launchId){var n=this.get(e.launchId);if(n){var r=n.get("data");r&&(t=r.status===S.launchStatus.interrupted||r.status===S.launchStatus.stopped)}}return t},validForHistory:function(){return!this.isDebug()&&!this.isLaunches()&&!this.isLog()&&!this.isAllCases()&&!this.isHistory()&&!this.isInterrupted()&&!this.isLaunchInterrupted()},trackForLaunchProcessing:function(e,t){var n=this;e.done(function(e){s.ajaxSuccessMessenger("startAnalyzeAction")}).fail(function(e){s.ajaxFailMessenger(e,"startAnalyzeAction")}).always(function(){n.navigationCache&&n.navigationCache[t]&&(n.navigationCache[t].get("data").isProcessing=!1),n.trigger("analyze:is:over")})},destroy:function(){this.reset(),this.stopListening(),this.unbind(),this.navigationCache=null,this.requestParameters=null,this.remove(),delete this}}),P={hasOwner:function(e){return e.owner!==undefined},hasIssue:function(e){return e.issue!==undefined},hasNoChildren:function(e){return e.has_childs!==undefined&&!e.has_childs},hasNoResetedStatus:function(e){return e.status.toLowerCase()!=="reseted"},typeSuiteAndChildren:function(e){return e.type!==undefined&&e.type==="SUITE"&&e.has_childs!==undefined&&e.has_childs},typeSuiteAndNoChildren:function(e){return e.type!==undefined&&e.type==="SUITE"&&e.has_childs!==undefined&&!e.has_childs},typeStepAndNoChildren:function(e){return e.type!==undefined&&e.type==="STEP"&&e.has_childs!==undefined&&!e.has_childs},typeTestAndChildren:function(e){return e.type!==undefined&&e.type==="TEST"&&e.has_childs!==undefined&&e.has_childs},typeStep:function(e){return e.type!==undefined&&e.type==="STEP"},typeAndNoChildren:function(e){return e.type!==undefined&&e.has_childs!==undefined&&!e.has_childs},durationInProgress:function(e){return e.status==="IN_PROGRESS"},canStopLaunch:function(e,t){var n=S.userModel.get("projects")[S.project.projectId].projectRole,r=S.projectRoles.indexOf(n);return s.isAdmin(S.userModel.toJSON())||r>=2||this.isOwner(e)&&!t},isOwner:function(e){return e.owner===S.userModel.get("name")},durationSkipped:function(e){return e.status==="SKIPPED"},durationInterrupted:function(e){return e.status==="INTERRUPTED"||e.status==="STOPPED"},durationStopped:function(e){return e.status==="STOPPED"},durationStartAndEnd:function(e){return e.start_time&&e.end_time},durationStartNoEnd:function(e){return e.start_time&&!e.end_time},statusFailedNoChildren:function(e){return e.status!==undefined&&e.status==="FAILED"&&e.has_childs!==undefined&&!e.has_childs},stepIsShifter:function(e){return e.type!==undefined&&e.has_childs!==undefined&&!e.has_childs},levelError:function(e){return e.level!==undefined&&e.level==="ERROR"}},H=s.getDefaultRequestParams(),B=function(e,t,n){var r=function(e,t,r){var i=t!==undefined?"&filter.eq.launch=":"&filter.in.path=",s=n?"&"+n:"";return"all-cases-for-"+e+"?page.page=1&page.sort=start_time,ASC"+"&filter.eq.has_childs=false"+r+i+e+s},i=window.document.location+"/";switch(e){case"name":var o=P.hasNoChildren(t)&&P.hasNoResetedStatus(t)?"log-for-":"",n=n?"?"+n:"";i=i+o+t.id+n;break;case"total":var u="&filter.in.status=PASSED,FAILED,SKIPPED,INTERRUPTED&filter.in.type=STEP";i+=r(t.id,t.owner,u);break;case"passed":case"failed":case"skipped":var u="&filter.in.status="+e.toUpperCase()+"&filter.in.type=STEP";i+=r(t.id,t.owner,u);break;case"product_bug":case"system_issue":case"to_investigate":case"no_defect":case"automation_bug":var u="&filter.in.issue$issue_type=",a=new y,f=a.toJSON(),l=s.getSubDefectsLocators(e,f).join("%2C");i+=r(t.id,t.owner,u+l);break;default:}return i};return{NavigationPoint:M,NavigationInfo:D,ContentView:x,MergeGrid:O,MergePanel:A,UrlResolver:B}}),define("launches/FilterLabelView",["require","exports","module","backbone-epoxy","util","app","localization"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("app"),o=e("localization"),u=s.getInstance(),a=r.View.extend({tagName:"a",className:"filter-item",template:"tpl-launch-filter-label",events:{"click [data-js-filter-close]":"onClickRemove"},bindings:{"[data-js-filter-shared]":"classes: {hide: not(isShared)}","[data-js-filter-name]":"text: name","[data-js-filter-comment]":"classes: {hide: not(description)}","[data-js-filter-not-my]":"classes: {hide: not(notMyFilter)}","[data-js-filter-not-save]":"classes: {hide: all(not(temp), not(newEntities), not(newSelectionParameters))}",":el":"attr: {href: url}, classes: {active: active}"},initialize:function(){this.render(),this.setTooltip(),this.listenTo(this.model,"change",this.update)},setTooltip:function(){this.model.get("description")&&i.appendTooltip(this.model.get("description"),$("[data-js-filter-comment]",this.$el),this.$el,function(){u.trackingDispatcher.trackEventNumber(18)}),i.appendTooltip(o.launches.filterIsSharedByOtherUser,$("[data-js-filter-not-my]",this.$el),this.$el,function(){u.trackingDispatcher.trackEventNumber(19)}),i.appendTooltip(o.launches.filterIsShared,$("[data-js-filter-shared]",this.$el),this.$el,function(){u.trackingDispatcher.trackEventNumber(20)}),i.appendTooltip(o.filters.notSaveDescription,$("[data-js-filter-not-save]",this.$el),this.$el,function(){u.trackingDispatcher.trackEventNumber(21)})},update:function(){this.setTooltip()},render:function(){this.$el.html(i.templates(this.template,{}))},onClickRemove:function(){this.model.collection.remove(this.model),this.destroy()},destroy:function(){this.undelegateEvents(),this.unbind(),this.$el.remove(),delete this}});return a}),define("filterEntities/FilterEntities",["require","exports","module","jquery","backbone-epoxy","backbone","core/components","util","dataUrlResolver","localization","moment","coreService","app","daterangepicker"],function(e,t,n){"use strict";function R(e,t){t=t||{};var n=e.data("warning"),i=[],s=null;return e.on("remove",function(){n=null,e=null,t=null,s&&(clearTimeout(s),s=null)}),u.setupSelect2WhithScroll(e,{formatInputTooShort:function(e,t){return n},tags:!0,multiple:!0,noResizeSearch:t.noResizeSearch?t.noResizeSearch:!1,dropdownCssClass:t.dropdownCssClass||"",minimumInputLength:t.min||1,formatResultCssClass:function(e){if((i.length==0||_.indexOf(i,e.text)<0)&&r(".select2-input.select2-active").val()==e.text)return"exact-match"},initSelection:function(e,t){var n=e.val().split(","),r=_.map(n,function(e){return e=e.trim(),{id:e,text:e}});t(r)},createSearchChoice:function(e,n){return!t.noCreateNew&&_.filter(n,function(t){return t.text.localeCompare(e)===0}).length===0?{id:e,text:e}:null},query:function(e){if(e.term==="?")return;var n={results:[]};t.startSearch&&e.term.length<t.startSearch?(i=[],n.results.push({id:e.term,text:e.term}),e.callback(n)):(clearTimeout(s),s=setTimeout(function(){c.searchTags(e,t.type,t.mode).done(function(t){var r=_.isObject(t)&&t.content?"user":"default",t=r=="default"?t:t.content,i=[];_.forEach(t,function(e){r=="user"?(n.results.push({id:e.userId,text:e.full_name}),e=e.full_name):n.results.push({id:e,text:e}),i.push(e)}),e.callback(n)}).fail(function(e){u.ajaxFailMessenger(e)})},p.userFilterDelay))}})}var r=e("jquery"),i=e("backbone-epoxy"),s=e("backbone"),o=e("core/components"),u=e("util"),a=e("dataUrlResolver"),f=e("localization"),l=e("moment"),c=e("coreService"),h=e("app");e("daterangepicker");var p=h.getInstance(),d=i.Model.extend({defaults:{value:"",valueMinLength:0,valueMaxLength:18,valueOnlyDigits:!0,required:!1,visible:!1,id:"",name:"",label:"",condition:"",options:[],hint:"",invalid:!1,subEntity:!1},computeds:{getLabel:{deps:["id","label"],get:function(e,t){return t?t:f.filterNameById[e]}},getName:{deps:["id","name"],get:function(e,t){return t?t:f.filterNameById[e]}}},getInfo:function(){return{filtering_field:this.get("id"),condition:this.get("condition"),value:this.get("value")}}}),v=i.View.extend({className:"filter-option-input",template:"tpl-entity-input",events:{"click [data-js-clear-input]":"onClickClearInput","keyup [data-js-input]":"onKeyUp","focus [data-js-input]":"validateInput","focusout [data-js-input]":"hideValidate"},bindings:{"[data-js-input]":"validateValue: value, attr: {maxlength: valueMaxLength}",":el":'classes: {"has-error": invalid}'},bindingHandlers:{validateValue:{set:function(e,t){e.val(t)},get:function(e,t,n){var r=e.val();if(this.view.validate(r))return r}}},onKeyUp:function(e){this.validate(r(e.currentTarget).val())&&this.debounceChange()},validateInput:function(e){this.validate(r(e.currentTarget).val())},hideValidate:function(){this.model.set({hint:""})},initialize:function(){this.valid=!0,this.listenTo(this.model,"focus",this.onTriggerFocus),this.render(),this.debounceChange=_.debounce(function(){r("[data-js-input]",this.$el).trigger("change")}.bind(this),800)},onTriggerFocus:function(){r("[data-js-input]",this.$el).focus()},validate:function(e){if(this.model.get("valueOnlyDigits")&&!/^[0-9]*$/.test(e))return this.model.set({hint:f.validation.filterStaticsDigitsOnly,invalid:!0}),!1;if(e.length<this.model.get("valueMinLength")){var t=!0;return e.length==0&&(t=!1),this.model.set({hint:"At least "+this.model.get("valueMinLength")+" symbols required.",invalid:t}),e==""?!0:!1}return e.length>this.model.get("valueMaxLength")?(this.model.set({hint:"No more then "+this.model.get("valueMaxLength")+" symbols allowed.",invalid:!0}),!1):(this.model.set({hint:"",invalid:!1}),!0)},render:function(){this.$el.html(u.templates(this.template,{}))},onClickClearInput:function(){this.model.set({value:""})}}),m=i.View.extend({template:"tpl-entity-conditions",className:"input-group-sm filter-option-select",events:{"click .option-menu > li > a":"changeOptions"},initialize:function(){this.render()},render:function(){this.$el.html(u.templates(this.template,this.model.toJSON()))},conditionFlipper:function(e){e.preventDefault();var t=r(e.currentTarget);t.closest(".input-group").find(".select-value:first").text(t.data("short")),t.closest("ul").find(".active").removeClass("active"),t.parent().addClass("active"),this.model.set("condition",t.data("value"))},changeOptions:function(e){this.conditionFlipper(e)}}),g=i.View.extend({className:"filter-option-input",template:"tpl-entity-tag",bindings:{"[data-js-tag-input]":"value: value"},initialize:function(e){this.type=e.type,this.startSearch=e.startSearch,this.warning=e.warning,this.render(),this.listenTo(this.model,"change:value",this.onChangeValue)},render:function(){this.$el.html(u.templates(this.template,{warning:this.warning})),this.applyBindings(),this.select2el=R(r("[data-js-tag-input]",this.$el),{type:this.type,mode:this.model.get("mode"),noResizeSearch:!0,startSearch:this.startSearch})},onChangeValue:function(e,t){this.select2el.val(t).trigger("change")}}),y=i.View.extend({className:"filter-option-input",template:"tpl-entity-time-range",initialize:function(){this.render(),this.listenTo(this.model,"focus",this.onTriggerFocus)},onTriggerFocus:function(){r("span.timerange",this.$el).data("daterangepicker").show()},parseValue:function(e){function o(e,t){function n(e){var t=l().startOf("day").unix(),n=parseInt(e);return(n*60+t)*1e3}r.push(l(n(e)).format(p.dateRangeFullFormat)),r.push(l(n(t)).format(p.dateRangeFullFormat))}var t="Any",n=!1,r=[];if(!e)r=[l().subtract(29,"days"),l()];else{t=e.replace(/^0;1439;/,"TODAY;").replace(/^-1440;-1;/,"YESTERDAY;").replace(/^-10080;-1;/,"LAST_7_DAYS;").replace(/^-43200;-1;/,"LAST_30_DAYS;");var i=t.split(","),s=t.split(";");i.length>1?(_.forEach(i,function(e){r.push(l(parseInt(e)).format(p.dateRangeFullFormat))}),t=r.join(" - ")):s.length>2?(o(s[0],s[1]),n=!0,t=r.join(" - ")):s.length>1&&(t=s[0].split("_").join(" ").capitalize(),r.push(this.ranges[t][0]),r.push(this.ranges[t][1]))}return{valueStr:t,date:r,dynamicUpdateRange:n}},render:function(){this.$el.html(u.templates(this.template,{})),this.ranges={Today:[l().startOf("day"),l().endOf("day")],Yesterday:[l().subtract(1,"days").startOf("day"),l()],"Last 7 Days":[l().subtract(7,"days").startOf("day"),l()],"Last 30 Days":[l().subtract(30,"days").startOf("day"),l()]};var e=this.parseValue(this.model.get("value"));r("[data-js-input]",this.$el).text(e.valueStr),this.listenTo(this.model,"change:value",this.onChangeValue);var t=p.dateRangeFullFormat,n=this;r("span.timerange",this.$el).daterangepicker({parentEl:this.$el,startDate:l(e.date[0],t),endDate:l(e.date[1],t),minDate:"01/01/00",maxDate:"12/31/50",dynamicUpdate:e.dynamicUpdateRange,showDropdowns:!1,showWeekNumbers:!1,timePicker:!0,timePickerIncrement:1,timePicker12Hour:!1,ranges:this.ranges,buttonClasses:["btn btn-default btn-default"],applyClass:"btn-sm btn-success",cancelClass:"btn-sm rp-btn-danger pull-right ",format:p.dateRangeFormat,separator:" to ",locale:{applyLabel:f.ui.submit,cancelLabel:f.ui.cancel,fromLabel:"From",toLabel:"To",customRangeLabel:"Custom Range",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],firstDay:1}},function(e,t){if(e.unix()>t.unix())return;var r=!0;for(var i in this.ranges)if(l(this.ranges[i][0]).isSame(l(e))&&l(this.ranges[i][1]).isSame(l(t))){r=!1;break}var s="";if(!r||n.dynamicUpdateRange){var o=(new Date).getTimezoneOffset()/60*-1,u=";"+(o>-1?"+"+o:o),a=l().startOf("day").unix();s=parseInt((e.unix()-a)/60)+";"+parseInt((t.unix()-a)/60)+u}else s=e.unix()*1e3+","+t.unix()*1e3;n.model.set({value:s})}).on("show.daterangepicker",function(e,t){n.model.get("value")==""&&(r("div.ranges li",this.$el).removeClass("active"),r("div.daterangepicker",this.$el).removeClass("show-calendar"))}).on("showCalendar.daterangepicker",function(e,t){}).on("changeDynamicRange",function(e,t){n.dynamicUpdateRange=t})},onChangeValue:function(e,t){var n=this.parseValue(t);r("[data-js-input]",this.$el).text(n.valueStr)}}),b=i.View.extend({className:"filter-option-input",template:"tpl-entity-invalid",bindings:{"[data-js-input]":"value: value"},initialize:function(){this.render()},render:function(){this.$el.html(u.templates(this.template,{}))}}),w=i.View.extend({className:"input-group-btn btn-group-fix-font filter-entities-select",template:"tpl-entity-select",events:{"change .rp-input-checkbox":"onChangeState","change input[data-subtype]":"onChangeMainType","click [data-js-toggle-all]":"onClickToggle"},initialize:function(){this.render(),this.initState(),this.listenTo(this.model,"changeState",this.initState)},render:function(){this.$el.html(u.templates(this.template,this.model.toJSON())),this.applyBindings()},onChangeMainType:function(e){var t=r(e.currentTarget).is(":checked"),n=r(e.currentTarget).data("subtype"),i=r('input[data-maintype="'+n+'"]',this.$el);i.prop("checked",t).prop("disabled",t)},onClickToggle:function(){var e=!0,t=this,n=r("input[type=checkbox]",this.$el);n.each(function(){r(this).is(":checked")||(e=!1)}),n.prop("checked",!e),e||_.each(r(".rp-input-checkbox[data-subtype]",this.$el),function(e){t.onChangeMainType({currentTarget:e.get(0)})}),this.onChangeState()},initState:function(){var e=this,t=this.model.get("value").split(",");_.each(r(".rp-input-checkbox",this.$el),function(e){var n=r(e);n.prop("checked",_.contains(t,n.data("value")))}),_.each(r(".rp-input-checkbox[data-subtype]",this.$el),function(t){var n=r(t),i=n.data("value").split(","),s=!0;_.each(i,function(t){var n=r(".rp-input-checkbox[data-value="+t+"]",e.$el);if(!n||!n.is(":checked"))return s=!1,!1}),s&&(n.prop("checked",!0),e.onChangeMainType({currentTarget:n.get(0)}))}),this.onChangeState()},onChangeState:function(){var e=[],t=[];_.each(r(".rp-input-checkbox",this.$el),function(n){var i=r(n);i.is(":checked:not(:disabled)")&&(e.push(i.data("name")),t.push(i.data("value")))}),this.model.set({value:t.join(",")}),r("[data-js-value]",this.$el).text(e.join(", ")||"All")}}),E=i.View.extend({className:"input-group-btn btn-group-fix-font filter-entities-dropdown",template:"tpl-filter-entity-dropdown",bindings:{"[data-js-value]":"validateValue: value"},bindingHandlers:{validateValue:{set:function(e,t){var n=_.find(this.view.model.get("options"),function(e){return e.value===""+t});e.text(n.name)}}},events:{"click a.value-selector":"onLabelClick"},initialize:function(){this.render()},render:function(){this.$el.html(u.templates(this.template,this.model.toJSON())),this.applyBindings()},onLabelClick:function(e){e.preventDefault();var t=r(e.currentTarget),n=""+t.data("value");this.model.set({value:n})}}),S=i.View.extend({initialize:function(e){this.$el=(new g({model:this.model,type:e.type||"userAutoCompleteUrl",startSearch:p.forms.triggerMin,warning:"At least  3  symbols required."})).$el}}),x=i.View.extend({template:"tpl-entity-base",events:{"click [data-js-remove]":"onClickRemove"},bindings:{"[data-js-name]":"text: getName","[data-js-remove]":"classes: {hide: required}","[data-js-hint]":"text: hint, classes: {hide: not(hint)}"},initialize:function(){this.render()},render:function(){this.$el.html(u.templates(this.template,{})),this.$content=r("[data-js-content]",this.$el),this.onRender()},onClickRemove:function(){this.model.set({visible:!1})},onRender:function(){}}),T=x.extend({onRender:function(){this.$content.append((new v({model:this.model})).$el)}}),N=x.extend({onRender:function(){this.$content.append((new m({model:this.model})).$el),this.$content.append((new v({model:this.model})).$el)}}),C=x.extend({onRender:function(){this.$content.append((new S({model:this.model})).$el)}}),k=x.extend({onRender:function(){this.$content.append((new m({model:this.model})).$el),this.$content.append((new g({model:this.model,noResizeSearch:!0,startSearch:1,warning:"Please enter 1 or more characters"})).$el)}}),L=x.extend({onRender:function(){this.$content.append((new y({model:this.model})).$el)}}),A=x.extend({onRender:function(){this.$content.append((new b({model:this.model})).$el)}}),O=x.extend({onRender:function(){this.$content.append((new w({model:this.model})).$el)}}),M=x.extend({onRender:function(){this.$content.append((new E({model:this.model})).$el)}}),D=d.extend({view:T}),P=d.extend({view:N}),H=d.extend({view:C}),B=d.extend({view:k}),j=d.extend({view:L}),F=d.extend({view:A}),I=d.extend({view:O}),q=d.extend({view:M});return{EntityInputModel:D,EntityConditionInputModel:P,EntityUserTagModel:H,EntityConditionTagModel:B,EntityTimeRangeModel:j,EntityInvalidModel:F,EntitySelectModel:I,EntityDropDownModel:q,Model:d,UserTagEntityView:S,TagEntityView:g}}),define("filterEntities/FilterEntitiesResolver",["require","exports","module","underscore","jquery","backbone","filterEntities/FilterEntities","defectType/SingletonDefectTypeCollection","localization"],function(e,t,n){"use strict";var r=e("underscore"),i=e("jquery"),s=e("backbone"),o=e("filterEntities/FilterEntities"),u=e("defectType/SingletonDefectTypeCollection"),a=e("localization"),f=null,l=function(){var e=[new o.EntityConditionInputModel({id:"statistics$executions$total",condition:"gte",options:k()}),new o.EntityConditionInputModel({id:"statistics$executions$passed",condition:"gte",options:k()}),new o.EntityConditionInputModel({id:"statistics$executions$failed",condition:"gte",options:k()}),new o.EntityConditionInputModel({id:"statistics$executions$skipped",condition:"gte",options:k()})];return e=e.concat(c("product_bug")),e=e.concat(c("automation_bug")),e=e.concat(c("system_issue")),e=e.concat(c("to_investigate")),e},c=function(e){var t=h(e),n=r.map(t,function(t){return new o.EntityConditionInputModel({id:"statistics$defects$"+e+"$"+t.get("locator"),condition:"gte",label:t.get("longName"),name:a.filterNameById[e]+" "+t.get("shortName"),subEntity:!0,options:k()})}),i="Total "+a.filterNamePluralById[e];return n.length==1&&(i=a.filterNameById[e],n=[]),n.unshift(new o.EntityConditionInputModel({id:"statistics$defects$"+e+"$total",condition:"gte",label:i,name:i,subEntity:!1,options:k()})),n},h=function(e){return f.filter(function(t){return t.get("typeRef").toUpperCase()==e.toUpperCase()})},p=function(e){var t=h(e);return r.map(t,function(t){return{name:t.get("longName"),value:t.get("locator"),subOption:!0,mainType:e}})},d=function(e){var t=[];return r.each(e,function(e){var n=p(e),i=r.map(n,function(e){return e.value}),s=i.join(",");n.length<=1?t.push({name:a.filterNameById[e],value:s}):(t.push({name:"All "+a.filterNamePluralById[e],value:s,subType:e}),t=t.concat(n))}),t},v=function(){var e=[{name:"All",value:"All"}];return e=e.concat(d(["to_investigate","product_bug","automation_bug","system_issue","no_defect"])),[new o.EntitySelectModel({id:"type",condition:"in",values:[{name:"All",value:"All"},{name:"Before Suite",value:"BEFORE_SUITE"},{name:"Before Groups",value:"BEFORE_GROUPS"},{name:"Before Class",value:"BEFORE_CLASS"},{name:"Before Test",value:"BEFORE_TEST"},{name:"Test Class",value:"TEST"},{name:"Before Method",value:"BEFORE_METHOD"},{name:"Test",value:"STEP"},{name:"After Method",value:"AFTER_METHOD"},{name:"After Test",value:"AFTER_TEST"},{name:"After Class",value:"AFTER_CLASS"},{name:"After Groups",value:"AFTER_GROUPS"},{name:"After Suite",value:"AFTER_SUITE"}],value:"All"}),new o.EntityConditionInputModel({id:"description",condition:"cnt",options:N(),valueOnlyDigits:!1}),new o.EntitySelectModel({id:"status",condition:"in",values:[{name:"All",value:"All"},{name:"Passed",value:"PASSED"},{name:"Failed",value:"FAILED"},{name:"Skipped",value:"SKIPPED"},{name:"Interrupted",value:"INTERRUPTED"},{name:"In Progress",value:"IN_PROGRESS"}],value:"All"}),new o.EntityTimeRangeModel({id:"start_time",condition:"btw",values:["Any"],value:""}),new o.EntitySelectModel({id:"issue$issue_type",condition:"in",values:e,value:"All"}),new o.EntityConditionInputModel({id:"issue$issue_comment",valueMinLength:3,condition:"cnt",options:N(),valueOnlyDigits:!1}),new o.EntityConditionTagModel({id:"tags",condition:"has",options:C()})]},m=function(e){var t=g();return t.add(new o.EntityUserTagModel({id:"user",condition:"in",mode:"DEBUG"}),{at:1}),t},g=function(){return new s.Collection([new o.EntityConditionInputModel({id:"name",name:"Launch Name",required:!0,condition:"cnt",options:N(),valueMinLength:3,valueMaxLength:256,valueOnlyDigits:!1}),new o.EntityTimeRangeModel({id:"start_time",condition:"btw",values:["Any"],value:""}),new o.EntityConditionInputModel({id:"description",condition:"cnt",options:N(),valueMinLength:3,valueOnlyDigits:!1}),new o.EntityConditionTagModel({id:"tags",condition:"has",options:C()})].concat(l()))},y=function(){var e=w();return e.unshift(new o.EntityConditionInputModel({id:"name",name:"Launch Name",required:!0,condition:"cnt",options:N(),valueMinLength:3,valueMaxLength:256,valueOnlyDigits:!1})),e.add(new o.EntityUserTagModel({id:"user",condition:"in"}),{at:1}),e},b=function(){var e=w();return e.unshift(new o.EntityConditionInputModel({id:"name",name:"Suite Name",required:!0,condition:"cnt",options:N(),valueMinLength:3,valueMaxLength:256,valueOnlyDigits:!1})),e},w=function(){return new s.Collection([new o.EntityTimeRangeModel({id:"start_time",condition:"btw",values:["Any"],value:""}),new o.EntityConditionInputModel({id:"description",condition:"cnt",options:N(),valueMinLength:3,valueOnlyDigits:!1}),new o.EntityConditionTagModel({id:"tags",condition:"has",options:C()})].concat(l()))},E=function(){return new s.Collection([new o.EntityConditionInputModel({id:"name",name:"Test Name",required:!0,condition:"cnt",options:N(),valueMinLength:3,valueMaxLength:256,valueOnlyDigits:!1})].concat(v()))},S=function(){return[new o.StatusModel({id:"level",condition:"in",values:["Any","Trace","Debug","Info","Warn","Error"],value:"Any"}),new o.Model({id:"ex.binary_content"})]},x=function(){return new s.Collection([new o.EntityInputModel({id:"message",condition:"cnt",valueMinLength:3,valueOnlyDigits:!1})].concat(S()))},T=function(){return new s.Collection([new o.EntityDropDownModel({name:"History Depth",id:"history_depth",noConditions:!0,required:!0,options:[{value:"3",name:"3"},{value:"5",name:"5"},{value:"10",name:"10"}],value:"10"})])},N=function(){return[{id:"cnt",shortCut:"cnt"},{id:"!cnt",shortCut:"!cnt"},{id:"eq",shortCut:"eq"},{id:"ne",shortCut:"!eq"}]},C=function(){return[{id:"has",shortCut:"and"},{id:"in",shortCut:"or"}]},k=function(){return[{id:"gte",shortCut:"&ge;"},{id:"lte",shortCut:"&le;"},{id:"eq",shortCut:"="}]},L=function(e,t){f=new u;var n=i.Deferred(),e=e||"launch";return t&&(e="userdebug"),f.ready.done(function(){if(e){var r=null;switch(e){case"launch":r=y();break;case"suit":r=b();break;case"userdebug":r=m(t);break;case"test":r=E();break;case"log":r=x();break;case"history":r=T();break;default:}n.resolve(r)}}),n.promise()},A=function(){return o.EntityInvalidModel};return{getDefaults:L,getInvalidModel:A}}),define("filterEntities/FilterEntityView",["require","exports","module","backbone-epoxy","util","underscore","filterEntities/FilterEntities"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("underscore"),o=e("filterEntities/FilterEntities"),u=r.View.extend({className:"filter-entity-wrapper",initialize:function(){this.render(),this.listenTo(this.model,"change:visible",this.onChangeVisible)},onChangeVisible:function(e,t){t||(e.set({value:e.defaults.value}),this.destroy())},render:function(){var e=new this.model.view({model:this.model});this.$el.html(e.$el)},destroy:function(){this.undelegateEvents(),this.unbind(),this.$el.remove(),delete this}});return u}),define("filterEntities/FilterEntityChoiceView",["require","exports","module","jquery","underscore","util","backbone-epoxy"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("util"),o=e("backbone-epoxy"),u=o.View.extend({template:"tpl-filter-entity-choice",tagName:"li",bindings:{"[data-js-name]":"text: getLabel","[data-js-link]":'classes: {"sub-option": subEntity}',":el":"classes: {hide: required}","[data-js-check-visible]":"checked: visible"},initialize:function(){this.render()},render:function(){this.$el.html(s.templates(this.template,{}))}});return u}),define("filterEntities/FilterEntitiesChoiceView",["require","exports","module","jquery","underscore","util","backbone-epoxy","filterEntities/FilterEntityChoiceView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("util"),o=e("backbone-epoxy"),u=e("filterEntities/FilterEntityChoiceView"),a=o.View.extend({template:"tpl-filter-entities-choice",initialize:function(){this.render()},render:function(){this.$el.html(s.templates(this.template,{})),this.$choiceList=r("[data-js-entity-choice-list]",this.$el),i.each(this.collection.models,function(e){this.$choiceList.append((new u({model:e})).$el)},this)}});return a}),define("filterEntities/FilterEntitiesView",["require","exports","module","jquery","underscore","util","backbone","filterEntities/FilterEntitiesResolver","core/components","filterEntities/FilterEntityView","filterEntities/FilterEntitiesChoiceView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("util"),o=e("backbone"),u=e("filterEntities/FilterEntitiesResolver"),a=e("core/components"),f=e("filterEntities/FilterEntityView"),l=e("filterEntities/FilterEntitiesChoiceView"),c=a.RemovableView.extend({template:"tpl-filter-entities",initialize:function(e){this.filterLevel=e.filterLevel||"launch",this.collection=new o.Collection,this.invalidCollection=new o.Collection,this.listenTo(this.collection,"change:visible",this.onChangeVisible),this.listenTo(this.model,"add_entity",this.onAddEntityById),this.listenTo(this.invalidCollection,"add",this.renderEntity),this.listenTo(this.invalidCollection,"change:visible",this.changeVisibleInvalidEntity),this.hiddenFields=[],u.getDefaults(this.filterLevel).done(function(e){this.collection.reset(e.models),this.render()}.bind(this))},changeVisibleInvalidEntity:function(e,t){if(t)return;this.invalidCollection.remove(e),this.onChangeFilterEntities()},onChangeVisible:function(e,t){if(!t)return;this.renderEntity(e)},render:function(){this.$el.html(s.templates(this.template,{})),this.$entities=r("[data-js-entities]",this.$el),new l({el:r("[data-js-entities-choice]",this.$el),collection:this.collection}),i.each(this.collection.where({required:!0}),function(e){e.set({visible:!0})},this),this.parseModelEntities(),this.listenTo(this.collection,"change:condition change:value",this.onChangeFilterEntities)},onAddEntityById:function(e,t){var n=this.collection.where({id:e})[0];if(n){if(t){var r=n.get("value");if(n.get("id")=="tags"||n.get("id")=="user")r=r?r+","+t:t;n.set({visible:!0,value:r})}else n.set({visible:!0});n.trigger("focus",!0)}},renderEntity:function(e){this.$entities.append((new f({model:e})).$el)},parseModelEntities:function(){i.each(this.model.getEntitiesObj(),function(e){var t=this.collection.where({id:e.filtering_field});t.length?t[0].set({condition:e.condition,value:e.value,visible:!0}):e.filtering_field=="has_childs"?this.hiddenFields.push(e):this.invalidCollection.add(new(u.getInvalidModel())({condition:e.condition,value:e.value,visible:!0,name:e.filtering_field.split("$").pop(),id:e.filtering_field}))},this)},onChangeFilterEntities:function(){var e=[];i.each(this.collection.models,function(t){(t.get("visible")||t.get("required"))&&t.get("value")!=""&&e.push(t.getInfo())},this),i.each(this.invalidCollection.models,function(t){e.push(t.getInfo())},this),i.each(this.hiddenFields,function(t){e.push(t)}),this.model.set({newEntities:JSON.stringify(e)})},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return c}),define("modals/addWidget/SelectWidgetView",["require","exports","module","backbone-epoxy","util","jquery","underscore","widget/widgetsConfig"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("jquery"),o=e("underscore"),u=e("widget/widgetsConfig"),a=r.View.extend({className:"modal-add-widget-select-widget",template:"tpl-modal-add-widget-select-widget",events:{'change input[type="radio"]':"onChangeType"},initialize:function(){this.widgetConfig=u.getInstance(),this.render()},render:function(){this.$el.html(i.templates(this.template,{widgets:this.widgetConfig.widgetTypes}))},onChangeType:function(){var e=s("input:checked",this.$el).val(),t=this.widgetConfig.widgetTypes[e];this.model.set({gadget:e,itemsCount:t.limit.def,widgetDescription:"",widgetOptions:"{}",content_fields:"[]"});var n=[];t.criteria&&!t.noCriteria&&(t.defaultCriteria?n=t.defaultCriteria:n=o.map(t.criteria,function(e,t){return typeof e=="object"?e.keys.join(","):t})),t.staticCriteria&&o.each(t.staticCriteria,function(e,t){n.push(t)}),this.model.setContentFields(o.uniq(n));if(t.actions){var r=[];o.each(t.actions,function(e){Array.prototype.push.apply(r,e.actions)}),this.model.setWidgetOptions({actionType:r})}},destroy:function(){}});return a}),define("modals/addWidget/FilterSearchItemView",["require","exports","module","jquery","backbone","backbone-epoxy","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=s.View.extend({className:"modal-add-widget-filter-search-item",template:"tpl-modal-add-widget-filter-search-item",events:{"click [data-js-filter-edit]":"onClickFilterEdit"},bindings:{"[data-js-filter-name]":"html: getName","[data-js-filter-options]":"html: optionsString","[data-js-filter-shared]":"classes: {hide: any(not(isShared), notMyFilter)}","[data-js-filter-not-my]":"classes: {hide: not(notMyFilter)}, attr: {title: sharedByTitle}","[data-js-filter-edit]":"classes: {hide: notMyFilter}","[data-js-filter-select]":"checked: active"},computeds:{getName:{deps:["name"],get:function(e){var t=this.searchModel?this.searchModel.get("search"):null;return t?o.textWrapper(e,t):e}}},initialize:function(e){this.searchModel=e.searchModel,this.render();var t=this;this.model.get("active")&&setTimeout(function(){r("[data-js-filter-select]",t.$el)[0].checked=!0})},onClickFilterEdit:function(e){e.stopPropagation(),this.model.trigger("edit",this.model)},render:function(){this.$el.html(o.templates(this.template,{}))},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove()}});return u}),define("filterSelectionParameters/FilterSortingItemView",["require","exports","module","backbone-epoxy","backbone","util","underscore"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("backbone"),s=e("util"),o=e("underscore"),u=r.View.extend({tagName:"li",className:"filter-sorting-item-view",template:"filter-sorting-item-view",events:{click:"onClick"},bindings:{"[data-js-name]":"text: name",":el":"classes: {selected: isActive}","[data-js-ask-icon]":"classes: {hide: not(isAskSorting)}","[data-js-desc-icon]":"classes: {hide: isAskSorting}"},computeds:{isActive:{deps:["sortingColumn"],get:function(e){return e==this.viewModel.get("id")}}},initialize:function(){this.render()},render:function(){this.$el.html(s.templates(this.template,{}))},onClick:function(){var e=this.model.getParametersObj();this.getBinding("isActive")?e.is_asc=!e.is_asc:(e.is_asc=!1,e.sorting_column=this.viewModel.get("id")),this.model.set({newSelectionParameters:JSON.stringify(e)})},destroy:function(){this.undelegateEvents(),this.unbind(),this.$el.remove()}});return u}),define("filterSelectionParameters/FilterSortingView",["require","exports","module","backbone-epoxy","backbone","util","underscore","localization","filterSelectionParameters/FilterSortingItemView"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("backbone"),s=e("util"),o=e("underscore"),u=e("localization"),a=e("filterSelectionParameters/FilterSortingItemView"),f=r.View.extend({className:"filter-sorting-view",template:"filter-sorting-view",bindings:{"[data-js-sorting-name]":"text: nameSorting","[data-js-ask-sort]":"classes: {hide: not(isAskSorting)}","[data-js-desc-sort]":"classes: {hide: isAskSorting}"},computeds:{nameSorting:{deps:["selection_parameters","newSelectionParameters"],get:function(){var e=this.model.getParametersObj(),t=this.collection.get(e.sorting_column);return t?t.get("name"):""}}},initialize:function(){this.render(),this.collection=new i.Collection([{name:u.launches.launchName,active:!1,id:"name"},{name:u.launchesHeaders.start_time,active:!1,id:"start_time"},{name:u.launchesHeaders.total,active:!1,id:"statistics$executions$total"},{name:u.launchesHeaders.passed,active:!1,id:"statistics$executions$passed"},{name:u.launchesHeaders.failed,active:!1,id:"statistics$executions$failed"},{name:u.launchesHeaders.skipped,active:!1,id:"statistics$executions$skipped"},{name:u.launchesHeaders.product_bug,active:!1,id:"statistics$defects$product_bug"},{name:u.launchesHeaders.automation_bug,active:!1,id:"statistics$defects$automation_bug"},{name:u.launchesHeaders.system_issue,active:!1,id:"statistics$defects$system_issue"},{name:u.launchesHeaders.to_investigate,active:!1,id:"statistics$defects$to_investigate"}]);var e=this;o.each(this.collection.models,function(t){var n=new a({viewModel:t,model:e.model});$("[data-js-sorting-list]",e.$el).append(n.$el)})},render:function(){this.$el.html(s.templates(this.template,{}))},destroy:function(){this.undelegateEvents(),this.unbind(),this.$el.remove()}});return f}),define("modals/addWidget/FilterSearchEditView",["require","exports","module","jquery","backbone","backbone-epoxy","util","filterEntities/FilterEntitiesView","filterSelectionParameters/FilterSortingView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("filterEntities/FilterEntitiesView"),a=e("filterSelectionParameters/FilterSortingView"),f=s.View.extend({className:"modal-add-widget-filter-search-edit",template:"tpl-modal-add-widget-filter-search-edit",events:{"click [data-js-cancel-edit]":"onClickCancel","click [data-js-ok-edit]":"onClickOk","click [data-js-cancel]":"onClick"},bindings:{"[data-js-filter-name]":"text: name"},initialize:function(){this.render(),this.async=r.Deferred(),this.filterEntities=new u({el:r("[data-js-entities-container]",this.$el),filterLevel:"launch",model:this.model}),this.filterSorting=new a({model:this.model}),r("[data-js-filter-sorting]",this.$el).append(this.filterSorting.$el)},render:function(){this.$el.html(o.templates(this.template,{}))},onClick:function(e){e.stopPropagation()},onClickCancel:function(){this.model.set({newEntities:""}),this.async.reject()},onClickOk:function(){this.model.saveFilter(),this.async.resolve()},getReadyState:function(){return this.async},destroy:function(){this.filterEntities&&this.filterEntities.destroy(),this.filterSorting&&this.filterSorting.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove()}});return f}),define("modals/addWidget/FilterSearchAddView",["require","exports","module","jquery","backbone","backbone-epoxy","util","filterEntities/FilterEntitiesView","filterSelectionParameters/FilterSortingView","filters/SingletonLaunchFilterCollection","filters/FilterModel","app"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("filterEntities/FilterEntitiesView"),a=e("filterSelectionParameters/FilterSortingView"),f=e("filters/SingletonLaunchFilterCollection"),l=e("filters/FilterModel"),c=e("app"),h=c.getInstance(),p=s.View.extend({className:"modal-add-widget-filter-search-add",template:"tpl-modal-add-widget-filter-search-add",events:{"click [data-js-cancel-edit]":"onClickCancel","click [data-js-ok-edit]":"onClickOk","click [data-js-cancel]":"onClick"},bindings:{"[data-js-filter-name]":"text: name"},initialize:function(){this.launchFilterCollection=new f,this.render(),this.async=r.Deferred()},activate:function(){var e=this;this.launchFilterCollection.ready.done(function(){e.model=new l({temp:!0,active:!0,owner:h.userModel.get("name")});var t=_.map(e.launchFilterCollection.models,function(e){return e.get("name")});e.trigger("change:filter",e.model),o.hintValidator(r("[data-js-name-input]",e.$el),[{validator:"minMaxRequired",type:"filterName",min:3,max:128},{validator:"noDuplications",type:"filterName",source:t}]),e.filterEntities=new u({el:r("[data-js-entities-container]",e.$el),filterLevel:"launch",model:e.model}),e.filterSorting=new a({model:e.model}),r("[data-js-filter-sorting]",e.$el).append(e.filterSorting.$el),e.listenTo(e.model,"change:id",e.onChangeId)})},render:function(){this.$el.html(o.templates(this.template,{}))},onClick:function(e){e.stopPropagation()},onClickCancel:function(){this.model.set({newEntities:""}),this.launchFilterCollection.remove(this.model),this.async.reject()},onClickOk:function(){var e=r("[data-js-name-input]",this.$el);e.trigger("validate"),e.data("validate-error")||(this.model.set({name:e.val(),isShared:!1,description:"",entities:this.model.get("newEntities")||this.model.get("entities"),newEntities:"",selection_parameters:this.model.get("newSelectionParameters")||this.model.get("selection_parameters"),newSelectionParameters:""}),this.model.set({temp:!1}))},onChangeId:function(){this.trigger("change:filter",this.model),this.async.resolve()},getReadyState:function(){return this.async},destroy:function(){this.filterEntities&&this.filterEntities.destroy(),this.filterSorting&&this.filterSorting.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove()}});return p}),define("modals/addWidget/FilterSearchView",["require","exports","module","backbone-epoxy","util","jquery","widget/widgetsConfig","coreService","filters/FilterModel","modals/addWidget/FilterSearchItemView","modals/addWidget/FilterSearchEditView","modals/addWidget/FilterSearchAddView"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("jquery"),o=e("widget/widgetsConfig"),u=e("coreService"),a=e("filters/FilterModel"),f=e("modals/addWidget/FilterSearchItemView"),l=e("modals/addWidget/FilterSearchEditView"),c=e("modals/addWidget/FilterSearchAddView"),h=Backbone.Collection.extend({model:a,initialize:function(e){this.mainModel=e.mainModel,this.listenTo(this,"change:active",this.onChangeActive)},onChangeActive:function(e,t){t&&_.each(this.models,function(t){t!=e&&t.set({active:!1})})},parse:function(e){var t=this;return _.map(e,function(e){return e.entities=JSON.stringify(e.entities),e.selection_parameters=JSON.stringify(e.selection_parameters),e.active=e.id==t.mainModel.get("filter_id"),e})}}),p=r.View.extend({className:"modal-add-widget-filter-search",template:"tpl-modal-add-widget-filter-search",events:{"validation:success [data-js-filter-name]":"onChangeFilterName","click [data-js-add-filter]":"onClickAddFilter"},bindings:{":el":"classes: {hide: not(gadgetIsFilter)}","[data-js-seach-query]":"text: search"},initialize:function(){this.widgetConfig=o.getInstance(),this.firstActivate=!0,this.collection=new h({mainModel:this.model}),this.renderViews=[],this.render(),this.viewModel=new r.Model({search:"",empty:!1,notFound:!1,currentPage:1,pageSize:10,totalPage:1}),i.hintValidator(s("[data-js-filter-name]",this.$el),[{validator:"minMaxNotRequired",type:"filterName",min:3,max:128}]),this.listenTo(this.viewModel,"change:search",_.debounce(this.updateFilters,500)),this.listenTo(this.collection,"add",this.onAddCollectionItems),this.listenTo(this.collection,"reset",this.onResetCollectionItems),this.listenTo(this.collection,"change:active",this.onSelectFilterCheck),this.listenTo(this.collection,"edit",this.onEditFilter)},render:function(){this.$el.html(i.templates(this.template,{}))},setFilterModel:function(e){this.selectFilterView&&this.selectFilterView.destroy(),e?(s("[data-js-select-filter-block]",this.$el).removeClass("empty-state"),this.selectFilterView=new f({model:e,searchModel:this.viewModel}),s("[data-js-select-filter-container]",this.$el).html(this.selectFilterView.$el),this.selectedFilterModel=e):s("[data-js-select-filter-block]",this.$el).addClass("empty-state")},getSelectedFilterModel:function(){return this.selectedFilterModel},onSelectFilterCheck:function(e,t){t&&this.onSelectFilter(e)},onSelectFilter:function(e){this.model.set({filter_id:e.get("id")}),this.setFilterModel(e)},onClickAddFilter:function(e){e.preventDefault(),this.$el.addClass("hide-content"),this.addFilterView&&this.stopListening(this.addFilterView)&&this.addFilterView.destroy(),this.addFilterView=new c({gadgetModel:this.model}),this.listenTo(this.addFilterView,"change:filter",this.onSelectFilter),this.addFilterView.activate(),s("[data-js-filter-add-container]",this.$el).html(this.addFilterView.$el),this.trigger("disable:navigation",!0);var t=this;this.addFilterView.getReadyState().always(function(){t.addFilterView.destroy(),t.$el.removeClass("hide-content"),t.trigger("disable:navigation",!1),t.updateFilters()}).fail(function(){t.model.set({filter_id:""}),t.setFilterModel(null)})},onEditFilter:function(e){this.$el.addClass("hide-content"),this.editFilterView&&this.editFilterView.destroy(),this.editFilterView=new l({model:e,gadgetModel:this.model}),s("[data-js-filter-edit-container]",this.$el).html(this.editFilterView.$el),this.trigger("disable:navigation",!0);var t=this;this.editFilterView.getReadyState().always(function(){t.editFilterView.destroy(),t.$el.removeClass("hide-content"),t.trigger("disable:navigation",!1)})},activate:function(){if(!this.firstActivate)return;var e=this.widgetConfig.widgetTypes[this.model.get("gadget")];if(!e.noFilters){this.firstActivate=!1;var t=this;this.load().always(function(){t.baronScroll=i.setupBaronScroll(s("[data-js-filter-list-scroll]",t.$el)),i.setupBaronScrollSize(t.baronScroll,{maxHeight:330}),t.baronScroll.on("scroll",function(e){var n=t.baronScroll.get(0);n.scrollHeight-n.scrollTop<n.offsetHeight*2&&t.addLoadData()})})}},addLoadData:function(){this.viewModel.get("currentPage")<this.viewModel.get("totalPage")&&!this.$el.hasClass("load")&&(this.viewModel.set("currentPage",this.viewModel.get("currentPage")+1),this.load())},onChangeFilterName:function(e){this.viewModel.set({search:s(e.currentTarget).val()})},onAddCollectionItems:function(e){this.renderFilter(e)},onResetCollectionItems:function(){_.each(this.renderViews,function(e){e.destroy()}),this.renderViews=[],_.each(this.collection.models,function(e){this.renderFilter(e)},this)},renderFilter:function(e){var t=new f({model:e,searchModel:this.viewModel});s("[data-js-filter-list]",this.$el).append(t.$el),this.renderViews.push(t)},updateFilters:function(){this.collection.reset([]),this.viewModel.set({totalPage:1,currentPage:1});var e=this;this.load().done(function(){i.setupBaronScrollSize(e.baronScroll,{maxHeight:330})})},load:function(){this.$el.addClass("load");var e=this;return u.saveFilter(this.getQueryString({search:encodeURIComponent(this.viewModel.get("search")),page:this.viewModel.get("currentPage"),size:this.viewModel.get("pageSize")})).always(function(){e.$el.removeClass("load")}).done(function(t){e.viewModel.set({totalPage:t.page.totalPages,currentPage:t.page.number}),t.content.length?e.viewModel.set({empty:!1,notFound:!1}):e.model.get("search")?e.viewModel.set({empty:!1,notFound:!0}):e.viewModel.set({empty:!0,notFound:!1}),e.collection.add(t.content,{parse:!0}),e.model.get("filter_id")&&e.setFilterModel(e.collection.get(e.model.get("filter_id"))),s("[data-js-select-filter-block]",e.$el)[(t.content.length?"remove":"add")+"Class"]("hide"),s("[data-js-filter-empty]",e.$el)[(t.content.length?"add":"remove")+"Class"]("hide")})},getQueryString:function(e){e||(e={}),e.page||(e.page=1),e.size||(e.size=10);var t="?page.sort=name&page.page="+e.page+"&page.size="+e.size;return e.search&&(t+="&filter.cnt.name="+e.search),t},onDestroy:function(){this.$el.remove()}});return p}),define("modals/addWidget/widgetSettings/_settingView",["require","exports","module","backbone-epoxy","util","jquery"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("jquery"),o=r.View.extend({validate:function(){return!0},destroy:function(){this.onDestroy&&this.onDestroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove(),this.unActive=!0}});return o}),define("components/DropDownComponent",["require","exports","module","jquery","backbone","backbone-epoxy","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=s.View.extend({className:"drop-down-component",template:"tpl-drop-down-component",events:{"click ul li a":"onClickItem","click [data-js-label]":"onClickLabel","change input":"onChangeInput"},initialize:function(e){this.options=e;if(!this.options.data){console.log("DropDownComponent: data not found");return}this.render(),e.defaultValue&&(!e.multiple&&this.activateItem(e.defaultValue),e.multiple&&this.setDefaultState(e.defaultValue))},render:function(){this.$el.html(o.templates(this.template,this.options))},onClickLabel:function(e){e.stopPropagation()},onClickItem:function(e){e.preventDefault();var t=r(e.currentTarget).data("value");this.trigger("change",t),this.activateItem(t)},activateItem:function(e){this.$el.removeClass("dropdown-error-state");var t="";_.each(this.options.data,function(n){if(n.value==e)return t=n.name,!1}),r("[data-js-select-value]",this.$el).html(t),this.$el.addClass("selected")},setDefaultState:function(e){var t=this;_.each(e,function(e){r('[data-value="'+e+'"]',t.$el).prop({checked:"checked"})}),this.onChangeInput()},onChangeInput:function(){this.$el.removeClass("dropdown-error-state");var e=[],t=[];_.each(r("input:checked",this.$el),function(n){e.push(r(n).data("value")),t.push(r(n).data("name"))}),this.trigger("change",e),t.length?(this.$el.addClass("selected"),r("[data-js-select-value]",this.$el).html(t.join(", "))):(this.$el.removeClass("selected"),r("[data-js-select-value]",this.$el).html(this.options.placeholder))},setErrorState:function(e){this.$el.addClass("dropdown-error-state"),r("[data-js-hint-message]",this.$el).html(e)},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return u}),define("modals/addWidget/widgetSettings/SettingCriteriaView",["require","exports","module","backbone-epoxy","util","jquery","underscore","modals/addWidget/widgetSettings/_settingView","widget/widgetsConfig","components/DropDownComponent","localization"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("jquery"),o=e("underscore"),u=e("modals/addWidget/widgetSettings/_settingView"),a=e("widget/widgetsConfig"),f=e("components/DropDownComponent"),l=e("localization"),c=u.extend({className:"modal-add-widget-setting-criteria",template:"modal-add-widget-setting-criteria",events:{},bindings:{},initialize:function(){this.widgetConfig=a.getInstance(),this.curWidget=this.widgetConfig.widgetTypes[this.model.get("gadget")];if(this.curWidget.noCriteria||!this.curWidget.criteria)return this.destroy(),!1;this.render();var e=this.getCriteriaData();this.selectCriteria=new f({data:e,placeholder:l.widgets.selectCriteria,multiple:this.curWidget.criteriaSelectType=="radio"?!1:!0,defaultValue:this.getDefaultValue()}),s("[data-js-select-criteria-container]",this.$el).html(this.selectCriteria.$el),this.listenTo(this.selectCriteria,"change",this.onChangeSelectCriteria)},getCriteriaData:function(){return o.map(this.curWidget.criteria,function(e,t){return typeof e=="object"?{name:e.name,value:e.keys.join(",")}:{name:e,value:t}})},getDefaultValue:function(){var e=this.model.get("gadget"),t=this.model.getContentFields();if(e=="launches_table"){var n=this.getCriteriaData(),r=[];return o.each(t,function(e){var t=o.find(n,function(t){return t.value.indexOf(e)>=0});t&&r.push(t.value)}),o.uniq(r)}return t},render:function(){this.$el.html(i.templates(this.template,{}))},onChangeSelectCriteria:function(e){var t=[];typeof e=="string"?t.push(e):o.each(e,function(e){t=t.concat(e.split(","))}),this.curWidget.staticCriteria&&o.each(this.curWidget.staticCriteria,function(e,n){t.push(n)}),this.model.setContentFields(o.uniq(t)),this.validate()},validate:function(){return this.model.getContentFields().length?!0:(this.selectCriteria.setErrorState(l.validation.selectAtLeastOneCriteria),!1)},onDestroy:function(){this.selectCriteria&&this.selectCriteria.destroy()}});return c}),define("modals/addWidget/widgetSettings/SettingItemsView",["require","exports","module","backbone-epoxy","util","jquery","modals/addWidget/widgetSettings/_settingView","widget/widgetsConfig","localization"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("jquery"),o=e("modals/addWidget/widgetSettings/_settingView"),u=e("widget/widgetsConfig"),a=e("localization"),f=o.extend({className:"modal-add-widget-setting-items",template:"modal-add-widget-setting-items",events:{},bindings:{"[data-js-limit-input]":"value: itemsCount"},initialize:function(){this.widgetConfig=u.getInstance(),this.curWidget=this.widgetConfig.widgetTypes[this.model.get("gadget")];if(!this.curWidget.limit||!this.curWidget.limit.display)return this.destroy(),!1;this.render(),i.hintValidator(s("[data-js-limit-input]",this.$el),[{validator:"minMaxNumberRequired",type:"itemsSize",min:this.curWidget.limit.min,max:this.curWidget.limit.max}])},render:function(){this.$el.html(i.templates(this.template,{name:this.curWidget.limit.name||a.widgets.items}))},validate:function(){return!s("[data-js-limit-input]",this.$el).trigger("validate").data("validate-error")}});return f}),define("modals/addWidget/widgetSettings/SettingSwitchMode",["require","exports","module","backbone-epoxy","util","jquery","modals/addWidget/widgetSettings/_settingView","widget/widgetsConfig","localization"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("jquery"),o=e("modals/addWidget/widgetSettings/_settingView"),u=e("widget/widgetsConfig"),a=e("localization"),f=o.extend({className:"modal-add-widget-setting-switch-mode",template:"modal-add-widget-setting-switch-mode",events:{"click [data-js-launch-mode]":"onClickLaunch","click [data-js-timeline-mode]":"onClickTimeline"},bindings:{},initialize:function(){this.widgetConfig=u.getInstance(),this.curWidget=this.widgetConfig.widgetTypes[this.model.get("gadget")];if(!this.curWidget.mode)return this.destroy(),!1;this.curWidget.mode.timeline=this.model.getWidgetOptions().timeline,this.render(),this.$launchMode=s("[data-js-launch-mode]",this.$el),this.timelineMode=s("[data-js-timeline-mode]",this.$el)},render:function(){this.$el.html(i.templates(this.template,this.curWidget.mode))},onClickLaunch:function(e){e.preventDefault();if(!this.$launchMode.hasClass("active")){this.$launchMode.addClass("active"),this.timelineMode.removeClass("active");var t=this.model.getWidgetOptions();delete t.timeline,this.model.setWidgetOptions(t)}},onClickTimeline:function(e){e.preventDefault();if(!this.timelineMode.hasClass("active")){this.timelineMode.addClass("active"),this.$launchMode.removeClass("active");var t=this.model.getWidgetOptions();t.timeline=["DAY"],this.model.setWidgetOptions(t)}}});return f}),define("modals/addWidget/widgetSettings/SettingActionView",["require","exports","module","backbone-epoxy","util","jquery","modals/addWidget/widgetSettings/_settingView","widget/widgetsConfig","components/DropDownComponent","localization"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("jquery"),o=e("modals/addWidget/widgetSettings/_settingView"),u=e("widget/widgetsConfig"),a=e("components/DropDownComponent"),f=e("localization"),l=o.extend({className:"modal-add-widget-setting-action",template:"modal-add-widget-setting-action",events:{},bindings:{},initialize:function(){this.widgetConfig=u.getInstance(),this.curWidget=this.widgetConfig.widgetTypes[this.model.get("gadget")];if(!this.curWidget.actions)return this.destroy(),!1;this.render();var e=_.map(this.curWidget.actions,function(e){return{name:e.text,value:e.actions.join(",")}}),t=this.model.getWidgetOptions(),n=t.actionType||[],r=[];_.each(n,function(t){var n=_.find(e,function(e){return _.contains(e.value.split(","),t)});n&&r.push(n.value)}),this.selectAction=new a({data:e,placeholder:f.wizard.actionSelectTitle,multiple:!0,defaultValue:_.uniq(r)}),s("[data-js-select-action-container]",this.$el).html(this.selectAction.$el),this.listenTo(this.selectAction,"change",this.onChangeSelectAction)},render:function(){this.$el.html(i.templates(this.template,{}))},onChangeSelectAction:function(e){var t=[];_.each(e,function(e){t=t.concat(e.split(","))});var n=this.model.getWidgetOptions();n.actionType=t,this.model.setWidgetOptions(n),this.validate()},validate:function(){var e=this.model.getWidgetOptions();return!e.actionType||_.isEmpty(e.actionType)?(this.selectAction.setErrorState(f.validation.selectAtLeastOneAction),!1):!0},onDestroy:function(){this.selectCriteria&&this.selectCriteria.destroy()}});return l}),define("modals/addWidget/widgetSettings/SettingUsersView",["require","exports","module","backbone-epoxy","util","jquery","modals/addWidget/widgetSettings/_settingView","widget/widgetsConfig","filterEntities/FilterEntities","localization"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("jquery"),o=e("modals/addWidget/widgetSettings/_settingView"),u=e("widget/widgetsConfig"),a=e("filterEntities/FilterEntities"),f=e("localization"),l=o.extend({className:"modal-add-widget-setting-users",template:"modal-add-widget-setting-users",events:{},bindings:{},initialize:function(){this.widgetConfig=u.getInstance(),this.curWidget=this.widgetConfig.widgetTypes[this.model.get("gadget")];if(!this.curWidget.usersFilter)return this.destroy(),!1;this.render(),this.usersModel=new a.Model({value:""}),this.userView=new a.UserTagEntityView({model:this.usersModel,type:"autocompleteUserUrl"}),s("[data-js-user-tags-container]",this.$el).html(this.userView.$el),this.listenTo(this.usersModel,"change:value",this.onChangeValue)},render:function(){this.$el.html(i.templates(this.template,{}))},activate:function(){var e=this.model.getWidgetOptions();e.userRef&&this.usersModel.set("value",e.userRef.join(","))},onChangeValue:function(e,t){var n=this.model.getWidgetOptions();t?n.userRef=t.split(","):delete n.userRef,this.model.setWidgetOptions(n)}});return l}),define("modals/addWidget/widgetSettings/SettingLaunchView",["require","exports","module","backbone-epoxy","util","jquery","modals/addWidget/widgetSettings/_settingView","widget/widgetsConfig","localization","coreService","select2"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("jquery"),o=e("modals/addWidget/widgetSettings/_settingView"),u=e("widget/widgetsConfig"),a=e("localization"),f=e("coreService");e("select2");var l=o.extend({className:"modal-add-widget-setting-launch",template:"modal-add-widget-setting-launch",events:{"change [data-js-data-launch-input]":"onChange"},bindings:{},initialize:function(){this.widgetConfig=u.getInstance(),this.curWidget=this.widgetConfig.widgetTypes[this.model.get("gadget")];if(!this.curWidget.launchesFilter)return this.destroy(),!1;this.render()},render:function(){this.$el.html(i.templates(this.template,{}))},onChange:function(e){var t=this.model.getWidgetOptions();t.launchNameFilter=[s(e.currentTarget).val()],this.model.setWidgetOptions(t)},activate:function(){var e=this,t=this.model.getWidgetOptions(),n=s("[data-js-data-launch-input]",this.$el);t.launchNameFilter&&n.val(t.launchNameFilter),i.setupSelect2WhithScroll(n,{min:1,minimumInputLength:3,maximumInputLength:256,maximumSelectionSize:1,multiple:!1,dropdownCssClass:"rp-select2-separate-block",allowClear:!1,placeholder:a.widgets.selectLaunch,initSelection:function(e,t){t({id:e.val(),text:e.val()})},query:function(e){f.searchLaunches(e).done(function(t){var n={results:[]};_.each(t,function(e){n.results.push({id:e,text:e})}),e.callback(n)}).fail(function(e){i.ajaxFailMessenger(e)})}}),n.on("change",function(){n.trigger("validate")}),i.hintValidator(n,{validator:"required"})},validate:function(){return!s("[data-js-data-launch-input]",this.$el).trigger("validate").data("validate-error")}});return l}),define("modals/addWidget/WidgetSettingsView",["require","exports","module","backbone-epoxy","util","jquery","modals/addWidget/widgetSettings/SettingCriteriaView","modals/addWidget/widgetSettings/SettingItemsView","modals/addWidget/widgetSettings/SettingSwitchMode","modals/addWidget/widgetSettings/SettingActionView","modals/addWidget/widgetSettings/SettingUsersView","modals/addWidget/widgetSettings/SettingLaunchView"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("jquery"),o=e("modals/addWidget/widgetSettings/SettingCriteriaView"),u=e("modals/addWidget/widgetSettings/SettingItemsView"),a=e("modals/addWidget/widgetSettings/SettingSwitchMode"),f=e("modals/addWidget/widgetSettings/SettingActionView"),l=e("modals/addWidget/widgetSettings/SettingUsersView"),c=e("modals/addWidget/widgetSettings/SettingLaunchView"),h=r.View.extend({className:"modal-add-widget-criteria-list rp-form",events:{},bindings:{},initialize:function(){this.renderedView=[]},renderView:function(e,t){var n=new e({model:this.model});n.unActive||(this.renderedView.push(n),this.$el.append(n.$el),n.activate&&n.activate())},activate:function(){_.each(this.renderedView,function(e){e.destroy()}),this.renderedView=[],this.renderView(o),this.renderView(f),this.renderView(u),this.renderView(a),this.renderView(l),this.renderView(c)},validate:function(){var e=!0;return _.each(this.renderedView,function(t){t.validate()||(e=!1)}),e}});return h}),define("modals/addWidget/ConfigureWidgetView",["require","exports","module","backbone-epoxy","util","jquery","modals/addWidget/FilterSearchView","modals/addWidget/WidgetSettingsView"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("jquery"),o=e("modals/addWidget/FilterSearchView"),u=e("modals/addWidget/WidgetSettingsView"),a=r.View.extend({className:"modal-add-widget-configure-widget",template:"tpl-modal-add-widget-configure-widget",initialize:function(){this.render(),this.filterSearch=new o({model:this.model}),s("[data-js-filter-search]",this.$el).html(this.filterSearch.$el),this.listenTo(this.filterSearch,"disable:navigation",this.onChangeDisableNavigation),this.widgetCriteria=new u({model:this.model}),s("[data-js-enter-criteria]",this.$el).html(this.widgetCriteria.$el)},onChangeDisableNavigation:function(e){this.trigger("disable:navigation",e),e?s("[data-js-enter-criteria]",this.$el).addClass("hide"):s("[data-js-enter-criteria]",this.$el).removeClass("hide")},getSelectedFilterModel:function(){return this.filterSearch.getSelectedFilterModel()},activate:function(){this.filterSearch.activate(),this.widgetCriteria.activate()},validate:function(){return this.widgetCriteria.validate()},render:function(){this.$el.html(i.templates(this.template,{}))}});return a}),define("dashboard/DashboardModel",["require","exports","module","jquery","backbone-epoxy","app","coreService","localization","util","model/SingletonAppModel"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone-epoxy"),s=e("app"),o=e("coreService"),u=e("localization"),a=e("util"),f=e("model/SingletonAppModel"),l=s.getInstance(),c=new f,h=i.Model.extend({defaults:{isShared:!1,name:"",description:null,owner:"",widgets:"[]",active:!1,notLoad:!1},computeds:{isMy:{deps:["owner"],get:function(e){return e==l.userModel.get("name")}},sharedTitle:{deps:["isMy","owner"],get:function(e,t){return e?u.dashboard.dashboardShared:u.dashboard.dashboardSharedBy+" "+t}},url:{deps:["id"],get:function(e){return"#"+c.get("projectId")+"/dashboard/"+e}}},initialize:function(){this.listenTo(this,"change:isShared change:description change:name",_.debounce(this.onChangeData,10)),this.listenTo(this,"change:widgets",this.onChangeWidgets)},onChangeData:function(){var e={name:this.get("name"),share:this.get("isShared")};this.get("description")&&(e.description=this.get("description")),o.updateDashboard(this.get("id"),e).done(function(){a.ajaxSuccessMessenger("dashboardUpdated")}).fail(function(e){a.ajaxFailMessenger(e,"updateDashboard")})},update:function(){var e=this;return o.getProjectDashboard(this.get("id")).done(function(t){e.setWidgets(t.widgets,!0)})},addWidget:function(e){var t=this.getWidgets(),n=this,r={widgetId:e.get("id"),widgetPosition:[e.get("x"),e.get("y")],widgetSize:[e.get("width"),e.get("height")]};return o.addWidgetToDashboard(r,this.get("id")).done(function(){t.push(r),n.setWidgets(t,!0),a.ajaxSuccessMessenger("addedWidget"),n.trigger("add:widget",e)})},onChangeWidgets:function(){o.updateDashboard(this.get("id"),{updateWidgets:this.getWidgets()}).fail(function(e){a.ajaxFailMessenger(e,"updateDashboard")})},getWidgets:function(){try{return JSON.parse(this.get("widgets"))}catch(e){return[]}},setWidgets:function(e,t){this.set({widgets:JSON.stringify(e)},{silent:t||!1})}});return h}),define("modals/modalEditDashboard",["require","exports","module","modals/_modalView","backbone-epoxy","util","model/UserModel"],function(e,t,n){"use strict";var r=e("modals/_modalView"),i=e("backbone-epoxy"),s=e("util"),o=e("model/UserModel"),u=r.extend({template:"tpl-modal-edit-dashboard",className:"modal-edit-dashboard",bindings:{"[data-js-name-input]":"value: name","[data-js-is-shared]":"checked: isShared","[data-js-description]":"value: description"},events:{"click [data-js-ok]":"onClickOk"},initialize:function(e){var t=e.dashboardModel,n=t.get("owner")===""?(new o).get("name"):t.get("owner"),r=_.map(e.dashboardCollection.models,function(e){if(t.get("name")!=e.get("name")&&n===e.get("owner"))return e.get("name")});this.render(e),this.model=new i.Model({name:t.get("name"),isShared:t.get("isShared"),description:t.get("description")}),s.hintValidator($("[data-js-name-input]",this.$el),[{validator:"minMaxRequired",type:"dashboardName",min:3,max:128},{validator:"noDuplications",type:"dashboardName",source:r,isCaseSensitive:!0}]),s.hintValidator($("[data-js-description]",this.$el),{validator:"maxRequired",type:"",max:256})},render:function(e){this.$el.html(s.templates(this.template,e))},onKeySuccess:function(){$("[data-js-ok]",this.$el).focus().trigger("click")},onClickOk:function(){$("[data-js-name-input]",this.$el).trigger("validate");if($(".validate-error",this.$el).length)return;this.successClose(this.model)}});return u}),define("dashboard/DashboardCollection",["require","exports","module","jquery","underscore","backbone","app","dashboard/DashboardModel","coreService","modals/modalEditDashboard","model/SingletonAppModel","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("backbone"),o=e("app"),u=e("dashboard/DashboardModel"),a=e("coreService"),f=e("modals/modalEditDashboard"),l=e("model/SingletonAppModel"),c=e("util"),h=o.getInstance(),p=new l,d=s.Collection.extend({model:u,initialize:function(e){this.ready=r.Deferred(),this.defaultPath="#"+p.get("projectId")+"/dashboard",this.update(e.startId);var t=this;this.ready.done(function(){t.listenTo(t,"add",t.onAddDashboard),t.listenTo(t,"remove",t.onRemoveDashboard),t.listenTo(t,"change:active",t.onChangeActive)})},onAddDashboard:function(e){var t={name:e.get("name"),share:e.get("isShared"),description:e.get("description")};a.addOwnDashboard(t).done(function(t){e.set({id:t.id}),c.ajaxSuccessMessenger("dashboardAdded")}).fail(function(e){c.ajaxFailMessenger(e,"dashboardAdded")})},onRemoveDashboard:function(e){var t=this;return a.deleteDashboard(e.get("id")).done(function(){c.ajaxSuccessMessenger("dashboardDelete")}).fail(function(e){t.update(),c.ajaxFailMessenger(e,"dashboardDelete")})},update:function(e){this.reset([]);var t=this;this.getDashboards(e).done(function(n){t.getSharedDashboards(e).done(function(e){t.reset(n.concat(e)),t.ready.resolve()})})},getDashboards:function(e){var t=r.Deferred(),n=this;return a.getProjectDashboards().done(function(r){t.resolve(n.parse(r,e))}).fail(function(e){t.reject(e)}),t.promise()},getSharedDashboards:function(e){var t=r.Deferred(),n=this;return a.getSharedDashboards().done(function(r){t.resolve(n.parseShared(r,e))}).fail(function(e){t.reject(e)}),t.promise()},parse:function(e,t){return i.each(e,function(e){e.id==t&&(e.active=!0),e.widgets=JSON.stringify(e.widgets)}),e},parseShared:function(e,t){var n=[];return i.each(e,function(e,r){r==t&&(e.active=!0),e.isShared=!0,e.id=r,e.notLoad=!0,n.push(e)}),n},createNewDashboard:function(){var e=this;(new f({dashboardCollection:this,dashboardModel:new u,mode:"save"})).show().done(function(t){var n=t.toJSON();n.name=n.name.trim(),n.owner=h.userModel.get("name"),e.add(n)})},onChangeActive:function(e,t){t&&i.each(this.models,function(t){e.get("id")!=t.get("id")&&t.set({active:!1},{silent:!0})})},resetActive:function(){i.each(this.models,function(e){e.set({active:!1})}),this.trigger("reset:active")}});return d}),define("modals/addWidget/SelectDashboardItemView",["require","exports","module","jquery","backbone","backbone-epoxy","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=s.View.extend({className:"select-dashboard-item",template:"tpl-modal-add-widget-select-dashboard-item",bindings:{"[data-js-dashboard-item]":'attr: {"data-dashboard-id": id}, classes: {active: active}',"[data-js-dashboard-item] span":"text: name","[data-js-share-icon]":"classes: {hide: not(isShared)}"},initialize:function(e){this.render()},render:function(){this.$el.html(o.templates(this.template,{}))},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove()}});return u}),define("modals/addWidget/SelectDashboardView",["require","exports","module","jquery","backbone","backbone-epoxy","util","dashboard/DashboardCollection","dashboard/DashboardModel","modals/addWidget/SelectDashboardItemView","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("dashboard/DashboardCollection"),a=e("dashboard/DashboardModel"),f=e("modals/addWidget/SelectDashboardItemView"),l=e("localization"),c=s.View.extend({className:"modal-add-widget-select-dashboard",template:"tpl-modal-add-widget-select-dashboard",events:{"click [data-js-dashboard-item]":"setActiveDashboard"},initialize:function(){this.render()},render:function(){this.destroyItems(),this.$el.html(o.templates(this.template,{}));var e=this;this.$el.addClass("load"),this.collection=new u({}),this.collection.ready.done(function(){e.$el.removeClass("load"),e.activate()}),this.listenTo(this.collection,"change:active",this.onChangeActive)},activate:function(){r("[data-js-dashboard-items]",this.$el).removeClass("hide"),this.collection.isEmpty()&&(this.collection.add({id:_.uniqueId(),name:l.dashboard.firstDashboard,owner:config.userModel.get("name")}),r("[data-js-auto-created]",this.$el).removeClass("hide"));var e=this.collection.first();e.set("active",!0),this.renderItems()},renderItems:function(){this.destroyItems(),_.each(this.collection.models,function(e){var t=new f({model:e});r("[data-js-dashboard-items]",this.$el).append(t.$el),this.renderedItems.push(t)},this)},destroyItems:function(){_.each(this.renderedItems,function(e){e&&e.destroy()}),this.renderedItems=[],r("[data-js-dashboard-items]",this.$el).empty()},setActiveDashboard:function(e){e.preventDefault(),e.stopPropagation();var t=r(e.currentTarget),n=t.data("dashboardId"),i=this.collection.get(n);i.set("active",!0)},onChangeActive:function(e){e.get("active")&&this.trigger("change::dashboard",e)},destroy:function(){this.destroyItems(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove()}});return c}),define("modals/addWidget/SaveWidgetView",["require","exports","module","backbone-epoxy","util","jquery","modals/addWidget/SelectDashboardView","localization"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("util"),s=e("jquery"),o=e("modals/addWidget/SelectDashboardView"),u=e("localization"),a=r.View.extend({className:"modal-add-widget-save-widget",template:"tpl-modal-add-widget-save-widget",bindings:{"[data-js-name-input]":"value: name","[data-js-description]":"value: description","[data-js-is-shared]":"checked: isShared"},initialize:function(e){this.dashboardModel=e.dashboardModel,this.isNoDashboard=e.isNoDashboard,this.dashboardModel&&this.dashboardModel.get("isShared")&&this.model.set("isShared",!0),this.render(),i.hintValidator(s("[data-js-name-input]",this.$el),[{validator:"minMaxRequired",type:"widgetName",min:3,max:128},{validator:"noDuplications",type:"widgetName",source:[]}]),i.hintValidator(s("[data-js-description]",this.$el),{validator:"maxRequired",type:"",max:256}),this.listenTo(this.model,"change:name",this.onChangeName),this.updateSharedSwitcher()},onChangeDashboard:function(e){this.dashboardModel=e,this.updateSharedSwitcher(),this.trigger("change::dashboard",this.dashboardModel)},isSharedDashboard:function(){return this.dashboardModel&&this.dashboardModel.get("isShared")},onChangeName:function(){this.validate()?this.trigger("disable:navigation",!1):this.trigger("disable:navigation",!0)},updateSharedSwitcher:function(){this.dashboardModel&&(this.isSharedDashboard()?(this.model.set("isShared",!0),s("[data-js-is-shared]",this.$el).prop("disabled",!0),s("[data-js-shared-control]",this.$el).addClass("disabled").attr("title",u.wizard.widgetOnSharedDashboard)):(this.model.set("isShared",!1),s("[data-js-is-shared]",this.$el).prop("disabled",!1),s("[data-js-shared-control]",this.$el).removeClass("disabled").attr("title","")))},validate:function(){return this.isNoDashboard?!s("[data-js-name-input]",this.$el).trigger("validate").data("validate-error")&&this.dashboardModel:!s("[data-js-name-input]",this.$el).trigger("validate").data("validate-error")},activate:function(){this.isNoDashboard&&(this.selectDashboard||(this.selectDashboard=new o,s("[data-js-dashboards-list]",this.$el).removeClass("hide").append(this.selectDashboard.$el),this.listenTo(this.selectDashboard,"change::dashboard",this.onChangeDashboard)))},render:function(){this.$el.html(i.templates(this.template,{}))},destroy:function(){this.selectDashboard&&this.selectDashboard.destroy()}});return a}),define("dashboard/GadgetModel",["require","exports","module","jquery","backbone-epoxy","app","coreService","widget/widgetsConfig","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone-epoxy"),s=e("app"),o=e("coreService"),u=e("widget/widgetsConfig"),a=e("localization"),f=u.getInstance(),l=s.getInstance(),c=i.Model.extend({defaults:{id:"",width:l.defaultWidgetWidth,height:l.defaultWidgetHeight,x:0,y:0,name:"",description:"",gadget:"",owner:"",isShared:!1,filter_id:"",itemsCount:50,widgetDescription:"",widgetOptions:"{}",content_fields:"[]"},computeds:{gadgetName:{deps:["gadget"],get:function(e){return e?f.widgetTypes[e].gadget_name:""}},gadgetDescription:{deps:["gadget"],get:function(e){return e?f.widgetTypes[e].description.escapeScript():""}},gadgetPreviewImg:{deps:["gadget"],get:function(e){return e?"img/popup/"+f.widgetTypes[e].img:"img/popup/"+f.defaultWidgetImg}},gadgetIsFilter:{deps:["gadget"],get:function(e){return e?!f.widgetTypes[e].noFilters:!1}},gadgetIsFilterFill:{deps:["gadget","gadgetIsFilter","filter_id"],get:function(e,t,n){return t?!!n:!0}},isMy:{deps:["owner"],get:function(e){return e==l.userModel.get("name")}},isMyDashboard:function(){return this.collection?this.collection.dashboardModel.get("isMy"):!0},sharedTitle:{deps:["isMy","owner"],get:function(e,t){return e?"":a.widgets.widgetCreatedBy+" "+t}},isTimeline:{deps:["widgetOptions"],get:function(e){var t=this.getWidgetOptions();return t.timeline&&t.timeline.length?!0:!1}}},initialize:function(){},update:function(){var e=this;return o.loadDashboardWidget(this.get("id")).done(function(t){e.parseData(t)})},getWidgetOptions:function(){try{return JSON.parse(this.get("widgetOptions"))}catch(e){return{}}},setWidgetOptions:function(e){this.set({widgetOptions:JSON.stringify(e)})},getContentFields:function(){try{return JSON.parse(this.get("content_fields"))}catch(e){return[]}},setContentFields:function(e){this.set({content_fields:JSON.stringify(e)})},parseData:function(e){var t={name:e.name,description:e.description,owner:e.owner,isShared:e.isShared,gadget:e.content_parameters&&e.content_parameters.gadget,widgetData:e,widgetOptions:"{}",filter_id:e.filter_id};e.content_parameters&&(e.content_parameters.content_fields&&(t.content_fields=JSON.stringify(e.content_parameters.content_fields)),e.content_parameters.itemsCount&&(t.itemsCount=e.content_parameters.itemsCount),e.content_parameters.widgetOptions&&(t.widgetOptions=JSON.stringify(e.content_parameters.widgetOptions))),this.set(t)}});return c}),define("newWidgets/WidgetModel",["require","exports","module","backbone-epoxy"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=r.Model.extend({defaults:{content:{},content_parameters:{},filter_id:"",isShared:!1,name:"",owner:""},computeds:{},initialize:function(){}});return i}),define("newWidgets/WidgetView",["require","exports","module","backbone","backbone-epoxy","widgets","defectType/SingletonDefectTypeCollection"],function(e,t,n){"use strict";var r=e("backbone"),i=e("backbone-epoxy"),s=e("widgets"),o=e("defectType/SingletonDefectTypeCollection"),u=i.View.extend({className:"widget-view",initialize:function(e){this.render(e)},render:function(e){this.defectTypes=new o;var t=s.widgetService(this.model.get("content_parameters").gadget),n={getCurrentDashboard:function(){return{}}};_.extend(n,r.Events);var i={canEdit:function(){return!0},refresh:function(){}},u="";this.model.get("content_parameters").widgetOptions&&this.model.get("content_parameters").widgetOptions.launchNameFilter&&(u=this.model.get("content_parameters").widgetOptions.launchNameFilter[0]);var a={id:this.model.get("id"),name:this.model.get("name"),content:this.model.get("content"),gadget:this.model.get("content_parameters").gadget,content_fields:this.model.get("content_parameters").content_fields,filter_id:this.model.get("filter_id"),launchName:u,height:100,isTimeline:!!this.model.get("content_parameters").widgetOptions&&!!this.model.get("content_parameters").widgetOptions.timeline};this.model.get("content_parameters").widgetOptions&&(a.widgetOptions=this.model.get("content_parameters").widgetOptions);var f={container:this.$el,context:null,navigationInfo:n,parent:i,isPreview:e&&e.preview||!1,param:a},l=this;this.defectTypes.ready.done(function(){setTimeout(function(){l.widget&&l.widget.destroy(),l.widget=(new t(f)).render()},1)})},resize:function(){EQCSS.apply(),this.model.get("content_parameters").gadget=="launch_statistics"?this.render():this.widget&&this.widget.updateChart&&this.widget.updateChart()},destroy:function(){this.widget&&this.widget.destroy(),this.$el.remove()}});return u}),define("newWidgets/PreviewWidgetView",["require","exports","module","backbone","backbone-epoxy","util","widgets","coreService","widget/widgetsConfig","defectType/SingletonDefectTypeCollection","dashboard/GadgetModel","newWidgets/WidgetModel","newWidgets/WidgetView","moment"],function(e,t,n){"use strict";var r=e("backbone"),i=e("backbone-epoxy"),s=e("util"),o=e("widgets"),u=e("coreService"),a=e("widget/widgetsConfig"),f=e("defectType/SingletonDefectTypeCollection"),l=e("dashboard/GadgetModel"),c=e("newWidgets/WidgetModel"),h=e("newWidgets/WidgetView"),p=e("moment"),d=i.View.extend({className:"preview-widget-view",initialize:function(e){this.filterModel=e.filterModel,e.sharedWidgetModel&&(this.model=new l({gadget:e.sharedWidgetModel.get("gadget")}));var t=this.model.get("gadget");if(!this.filterModel&&!e.sharedWidgetModel||t=="activity_stream"||t=="launches_table"||t=="unique_bug_table"||t=="most_failed_test_cases")return this.$el.css("background-image","url("+this.model.get("gadgetPreviewImg")+")"),!0;this.$el.html('<div class="preloader" style="display: block; padding-top: 50px;"><i class="material-icons loader-animation">refresh</i></div>');if(e.sharedWidgetModel){var n=this;u.getSharedWidgetData(e.sharedWidgetModel.get("id")).done(function(e){n.model.parseData(e),n.widgetView&&n.widgetView.destroy(),n.widgetView=new h({model:new c(n.model.get("widgetData")),preview:!0}),n.$el.html(n.widgetView.$el)}).fail(function(e){s.ajaxFailMessenger(e,"sharedWidgetData")})}else{var r=this.filterModel.getOptions();r.push("filter.!in.status=IN_PROGRESS"),r.push("page.page=1"),r.push("page.size="+this.model.get("itemsCount"));var n=this;this.request=u.getWidgetData(this.filterModel.get("type"),r.join("&")).done(function(e){n.renderWidgetPreview(e)}).fail(function(e){})}},parseWidgetPreviewData:function(e,t){return v.parseData(e,t)},getCriteriaFields:function(e,t){var n=t.content_fields||[];for(var r in e)n.push(r);t.content_fields=_.uniq(n)},getDefaultCriteriaFields:function(e,t){t.content_fields=_.uniq(e.defaultCriteria)},getContentParameters:function(e){var e=e.toJSON(),t=a.getInstance(),n=t.widgetTypes[e.widget_id],r={type:n.widget_type,gadget:n.gadget},i={};n.limit&&(r.itemsCount=e.limit?e.limit:n.limit.def),n.mode&&e.mode=="timeline"&&(i.timeline=["DAY"]);if(n.actions){var s=[];e.actions?s=e.actions:_.each(n.actions,function(e){Array.prototype.push.apply(s,e.actions)}),i.actionType=s}n.usersFilter&&e.users&&!_.isEmpty(e.users)&&(i.userRef=e.users),n.launchesFilter&&(i.launchNameFilter=e.launches);if(n.noCriteria&&n.staticCriteria&&n.gadget!=="activity_stream")r.content_fields=_.map(n.staticCriteria,function(e,t){return t});else{if(!_.isEmpty(e.criteria)){var o=_.isArray(n.criteria)?_.flatten(_.map(n.criteria,function(e){return e.keys})):_.keys(n.criteria);r.content_fields=n.criteria?_.intersection(e.criteria,o):e.criteria}else _.isEmpty(n.defaultCriteria)?n.criteria&&this.getCriteriaFields(n.criteria,r):this.getDefaultCriteriaFields(n,r);n.staticCriteria&&this.getCriteriaFields(n.staticCriteria,r)}var u=["unique_bug_table","activity_stream","launches_table","most_failed_test_cases"];return _.contains(u,n.gadget)||(r.metadata_fields=["name","number","start_time"]),n.gadget=="most_failed_test_cases"&&(r.metadata_fields=["name","start_time"]),_.isEmpty(i)||(r.widgetOptions=i),r},renderWidgetPreview:function(e){var t=!!(this.model.getWidgetOptions()&&this.model.getWidgetOptions().timeline&&this.model.getWidgetOptions().timeline.length),n=new r.Model({widget_id:this.model.get("gadget"),criteria:this.model.getContentFields(),mode:t?"timeline":"launch"}),i=this.getContentParameters(n),s=o.widgetService(this.model.get("gadget")),u={isTimeline:t,id:_.uniqueId("preview-"),name:this.model.get("name"),content:this.parseWidgetPreviewData(e,n),height:140};this.widget&&this.widget.destroy(),this.$el.html(""),this.widget=(new s({container:this.$el,parent:this,isPreview:!0,param:_.extend(i,u)})).render()},destroy:function(){this.request&&this.request.abort(),this.widget&&this.widget.destroy(),this.$el.remove()}}),v={parseData:function(e,t){var n=t.get("widget_id");switch(n){case"old_line_chart":return this.getLineTrendChartData(e,t);case"statistic_trend":return this.getLineTrendChartData(e,t);case"investigated_trend":return this.getColumnChartData(e,t);case"launch_statistics":return this.getCombinePieChartData(e,t);case"overall_statistics":return this.getStaticticsPanelData(e,t);case"not_passed":return this.getNotPassedChartData(e);case"cases_trend":return this.getCasesTrendChartData(e,t);case"bug_trend":return this.getBugsTrendChartData(e,t);case"launches_comparison_chart":return this.getLaunchesComparisonChartData(e,t);case"launches_duration_chart":return this.getLaunchesDurationChartData(e);default:return null}},fixCriteria:function(e,t,n){var r="statistics$executionCounter$",i="statistics$issueCounter$";if(e=="defects"){if(n){var s=n.split("_");return s[1]&&(s[1]=s[1].capitalize()),i+s.join("")+"$"+t}var o=t.split("_");return o[1]&&(o[1]=o[1].capitalize()),i+o.join("")}return r+t},calcValue:function(e){var t=0;return _.isObject(e)?_.isUndefined(e.total)?_.each(e,function(e,n){t+=parseInt(e)}):t=parseInt(e.total):t=parseInt(e),t},getValues:function(e,t){var n={};return _.each(e,function(e){var r=e.split("$"),i=_.last(r),s=r[1],o=t?s=="defects"?t[r[0]][s][r[2]][i]:t[r[0]][s][i]:0,u=this.fixCriteria(s,i,r[2]),a=this.calcValue(o||0);n[u]=a},this),n},getLaunchInfo:function(e){return{name:e.name,number:e.number,startTime:e.start_time}},getCriteria:function(e){var t=e.get("criteria"),n=a.getInstance();return t?t:(t=n.widgetTypes[e.get("widget_id")].criteria,t||(t=n.widgetTypes[e.get("widget_id")].staticCriteria),_.keys(t))},getComparisonLaunches:function(e,t){var n=[],r=e.content;for(var i=0,s=r.length;i<s;i++){if(n.length>=2)break;r.status!=="inProgress"&&n.push(r[i])}return t||n.reverse(),n},getStaticticsPanelData:function(e,t){var n={},r=e.content.reverse(),i=this.getCriteria(t);return _.isEmpty(r)||_.each(r,function(e){_.each(i,function(t){var r=t.split("$"),i=r[1],s=_.last(r),o=e?i=="defects"?e[r[0]][i][r[2]][s]:e[r[0]][i][s]:0,u=this.calcValue(o||0);n[s]?n[s]+=u:n[s]=u},this)},this),{result:[{values:n}]}},getLineTrendChartData:function(e,t){var n={},r=t.get("mode")&&t.get("mode")=="timeline",i=e.content.reverse(),s=this.getCriteria(t);if(!_.isEmpty(i))if(!r)n.result=[],_.each(i,function(e){var t=this.getLaunchInfo(e);t.values=this.getValues(s,e),n.result.push(t)},this);else{var o=[];_.each(i,function(e){var t=this.getValues(s,e),r=p(e.start_time).format("YYYY-MM-DD");o.push(p(r,"YYYY-MM-DD").unix());if(n.hasOwnProperty(r)){var i=n[r][0].values;_.each(i,function(e,n){i[n]=e+t[n]})}else n[r]=[{values:t}]},this);var u=_.min(o),a=_.max(o),f=p.unix(u).format("YYYY-MM-DD"),l=this.getValues(s);while(p(f,"YYYY-MM-DD").unix()<a)f=p(f,"YYYY-MM-DD").add(1,"d").format("YYYY-MM-DD"),n.hasOwnProperty(f)||(n[f]=[{values:l}])}return n},getColumnChartData:function(e,t){var n={},r=t.get("mode")&&t.get("mode")=="timeline",i=this.getCriteria(t),s=this,o=e.content.reverse(),u=function(e,t){var n=0,r=0,i=0;return _.each(e,function(e){var o=e.split("$"),u=o[2],a=_.last(o);if(_.has(t.defects[u],a)){var f=t.defects[u][a],l=s.calcValue(f);u==="to_investigate"?i+=l:r+=l,n+=l}},this),{total:n,inv:r,to_inv:i}};if(!_.isEmpty(o))if(!r)n.result=[],_.each(o,function(e){var t=this.getLaunchInfo(e),r=e.statistics,s=u(i,r),o=s.total,a=s.inv,f=s.to_inv;t.values={investigated:o?Math.round(a/o*100*100)/100:0,to_investigate:o?Math.round(f/o*100*100)/100:0},n.result.push(t)},this);else{var a=[],f={};_.each(o,function(e){var t=p(e.start_time).format("YYYY-MM-DD"),n=e.statistics,r=u(i,n),s=r.total,o=r.inv,l=r.to_inv;a.push(p(t,"YYYY-MM-DD").unix());if(f.hasOwnProperty(t)){var c=f[t];c.total+=s,c.to_investigate+=l,c.investigated+=o}else f[t]={total:s,to_investigate:l,investigated:o}},this);var l=_.min(a),c=_.max(a),h=p.unix(l).format("YYYY-MM-DD");while(p(h,"YYYY-MM-DD").unix()<c)h=p(h,"YYYY-MM-DD").add(1,"d").format("YYYY-MM-DD"),f.hasOwnProperty(h)||(f[h]={total:0,to_investigate:0,investigated:0});_.each(f,function(e,t){var r=e.total,i=e.investigated,s=e.to_investigate,o={investigated:r?Math.round(i/r*100*100)/100:0,to_investigate:r?Math.round(s/r*100*100)/100:0};n[t]=[{values:o}]},this)}return n},getLaunchesDurationChartData:function(e){var t={result:[]},n=e.content.reverse();return _.each(n,function(e){var n=this.getLaunchInfo(e);n.values={status:e.status,start_time:e.start_time,end_time:e.end_time,duration:e.end_time-e.start_time},t.result.push(n)},this),t},getLaunchesComparisonChartData:function(e,t){var n={},r=e.content,i=_.map(this.getCriteria(t),function(e){var t=e.split("$");return t[2]});return _.isEmpty(r)||(n.result=[],_.each(r,function(e){var t=this.getLaunchInfo(e),r={};_.each(e.statistics,function(e,n){var s=_.reduce(e,function(e,t,n){var r=this.calcValue(t);return n!=="total"&&_.contains(i,n)?e+r:e},0,this);_.each(e,function(e,t){if(t!=="total"&&_.contains(i,t)){var o=this.calcValue(e),u=s?Math.round(o/s*100*100)/100:0;r[this.fixCriteria(n,t)]=u}},this),t.values=r},this),n.result.push(t)},this)),n},getNotPassedChartData:function(e){var t={},n=e.content.reverse();return _.isEmpty(n)||(t.result=[],_.each(n,function(e){var n=this.getLaunchInfo(e),r=e.statistics,i=r.executions,s=parseInt(i.total),o=parseInt(i.failed),u=parseInt(i.skipped),a=s?Math.round((o+u)/s*100*100)/100:0;n.values={"% (Failed+Skipped)/Total":a},t.result.push(n)},this)),t},getBugsTrendChartData:function(e,t){var n={},r=e.content.reverse(),i=this.getCriteria(t),s=0;return _.isEmpty(r)||(n.result=[],_.each(r,function(e){var t=this.getLaunchInfo(e),r=e.statistics,o=r.defects,u={},a=0;_.each(i,function(e){var t=e.split("$"),n=t[2],r=o[n],i=this.calcValue(r);a+=i,u[this.fixCriteria(e)]=i},this),u.issuesCount=a,u.delta=a-s,t.values=u,s=a,n.result.push(t)},this)),n},getCasesTrendChartData:function(e,t){var n={},r=e.content.reverse(),i=t.get("mode")&&t.get("mode")=="timeline",s="total",o=function(e){var t=e.statistics,n=t.executions,r=parseInt(n.total);return r};if(!_.isEmpty(r))if(!i){var u=0;n.result=[],_.each(r,function(e,t){var r=this.getLaunchInfo(e),i=o(e),a=t==0?0:i-u;u=i,r.values={},r.values[this.fixCriteria("executions",s)]=i,r.values.delta=a,n.result.push(r)},this)}else{var a=[],f={};_.each(r,function(e){var t=p(e.start_time).format("YYYY-MM-DD"),n=o(e),r={total:n,time:p(t,"YYYY-MM-DD").unix()};if(f.hasOwnProperty(t)){var i=f[t],s=i.total;n>s&&(f[t]=r)}else f[t]=r,a.push(p(t,"YYYY-MM-DD").unix())},this);var l=_.min(a),c=_.max(a),h=p.unix(l).format("YYYY-MM-DD");while(p(h,"YYYY-MM-DD").unix()<c)h=p(h,"YYYY-MM-DD").add(1,"d").format("YYYY-MM-DD"),f.hasOwnProperty(h)||(f[h]={total:0,time:p(h,"YYYY-MM-DD").unix()});var d=_.values(f),u=0;d.sort(function(e,t){return e.time-t.time}),_.each(d,function(e,t){var r=p.unix(e.time).format("YYYY-MM-DD"),i=e.total,o=t==0?0:i-u,a={};a[this.fixCriteria("executions",s)]=i,a.delta=o,n[r]=[{values:a}],u=i},this)}return n},getCombinePieChartData:function(e,t){var n={},r=e.content.reverse(),i=_.last(r),s=this.getCriteria(t);if(i){var o=this.getLaunchInfo(i);n.result=[],o.values={},_.each(s.reverse(),function(e){var t=e.split("$"),n=t[1],r=_.last(t),s=i.statistics&&i.statistics[n]?n==="defects"?i.statistics[n][t[2]][r]:i.statistics[n][r]:0,u=this.calcValue(s||0);o.values[this.fixCriteria(n,r,t[2])]=u},this),n.result.push(o)}return n}};return d}),define("modals/addWidget/modalAddWidget",["require","exports","module","backbone-epoxy","modals/_modalView","util","jquery","widget/widgetsConfig","modals/addWidget/SelectWidgetView","modals/addWidget/ConfigureWidgetView","modals/addWidget/SaveWidgetView","newWidgets/PreviewWidgetView","coreService","dataUrlResolver","app"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("modals/_modalView"),s=e("util"),o=e("jquery"),u=e("widget/widgetsConfig"),a=e("modals/addWidget/SelectWidgetView"),f=e("modals/addWidget/ConfigureWidgetView"),l=e("modals/addWidget/SaveWidgetView"),c=e("newWidgets/PreviewWidgetView"),h=e("coreService"),p=e("dataUrlResolver"),d=e("app"),v=d.getInstance(),m=i.extend({template:"tpl-modal-add-widget",className:"modal-add-widget",events:{"click [data-js-previous-first-step]":"onClickFirstStep","click [data-js-next-second-step]":"onClickSecondStep","click [data-js-next-last-step]":"onClickLastStep","click [data-js-previous-second-step]":"onClickSecondStep","click [data-js-add-widget]":"onClickAddWidget"},bindings:{"[data-js-widget-type]":"text: gadgetName","[data-js-widget-description]":"html: gadgetDescription","[data-js-next-second-step]":"attr: {disabled: any(not(gadget), disableNavigate)}","[data-js-next-last-step]":"attr: {disabled: any(not(gadgetIsFilterFill), disableNavigate)}","[data-js-previous-first-step]":"attr: {disabled:  disableNavigate}","[data-js-add-widget]":"attr: {disabled: any(not(name),disableNavigate)}"},initialize:function(e){if(!e.model)return!1;this.model.set({owner:v.userModel.get("name")}),this.dashboardModel=e.dashboardModel,this.isNoDashboard=e.isNoDashboard,e.filter_id&&this.model.set("filter_id",e.filter_id),this.widgetConfig=u.getInstance(),this.viewModel=new(r.Model.extend({defaults:{step:1,disableNavigate:!1}})),this.render(),this.selectWidgetView=new a({model:this.model}),o("[data-js-step-1]",this.$el).html(this.selectWidgetView.$el),this.configureWidgetView=new f({model:this.model}),o("[data-js-step-2]",this.$el).html(this.configureWidgetView.$el),this.saveWidget=new l({model:this.model,dashboardModel:this.dashboardModel,isNoDashboard:this.isNoDashboard}),o("[data-js-step-3]",this.$el).html(this.saveWidget.$el),this.listenTo(this.viewModel,"change:step",this.setState),this.listenTo(this.configureWidgetView,"disable:navigation",this.onChangeDisableNavigation),this.listenTo(this.saveWidget,"disable:navigation",this.onChangeDisableNavigation),this.listenTo(this.saveWidget,"change::dashboard",this.onChangeDashboard),this.setState(),this.listenTo(this.model,"change",_.debounce(this.onChangeModel,10)),this.listenTo(this.model,"change:gadget change:widgetOptions change:content_fields change:filter_id change:itemsCount",_.debounce(this.onChangePreview,10))},onChangeModel:function(e){},onChangePreview:function(){this.previewWidgetView&&this.previewWidgetView.destroy(),this.previewWidgetView=new c({model:this.model,filterModel:this.configureWidgetView.getSelectedFilterModel()}),o("[data-js-widget-preview]",this.$el).html(this.previewWidgetView.$el)},render:function(){this.$el.html(s.templates(this.template,{}))},onChangeDisableNavigation:function(e){this.viewModel.set({disableNavigate:e})},setState:function(){o("[data-js-step-1-title], [data-js-step-2-title], [data-js-step-3-title]",this.$el).removeClass("active visited"),o("[data-js-step-1], [data-js-step-2], [data-js-step-3]",this.$el).removeClass("active"),o("[data-js-next-second-step], [data-js-previous-first-step],[data-js-next-last-step], [data-js-previous-second-step],[data-js-add-widget]",this.$el).addClass("hide");switch(this.viewModel.get("step")){case 1:o("[data-js-step-1-title], [data-js-step-1]",this.$el).addClass("active"),o("[data-js-next-second-step]",this.$el).removeClass("hide");break;case 2:o("[data-js-step-1-title]",this.$el).addClass("visited"),o("[data-js-step-2-title], [data-js-step-2]",this.$el).addClass("active"),o("[data-js-previous-first-step],[data-js-next-last-step]",this.$el).removeClass("hide"),this.configureWidgetView.activate();break;case 3:o("[data-js-step-1-title], [data-js-step-2-title]",this.$el).addClass("visited"),o("[data-js-step-3-title], [data-js-step-3]",this.$el).addClass("active"),o("[data-js-previous-second-step],[data-js-add-widget]",this.$el).removeClass("hide"),this.saveWidget.activate()}},onClickFirstStep:function(){this.viewModel.set("step",1)},onClickSecondStep:function(){this.viewModel.set("step",2)},onClickLastStep:function(){this.configureWidgetView.validate()&&this.viewModel.set("step",3)},onChangeDashboard:function(e){this.dashboardModel=e},onKeySuccess:function(){switch(this.viewModel.get("step")){case 1:o("[data-js-next-second-step]:not(.hide)",this.$el).focus().trigger("click");break;case 2:o("[data-js-next-last-step]:not(.hide)",this.$el).length&&o("[data-js-next-last-step]:not(.hide)",this.$el).focus().trigger("click");break;case 3:o("[data-js-add-widget]:not(.hide)",this.$el).focus().trigger("click")}},onClickAddWidget:function(){if(this.saveWidget.validate()){this.$el.addClass("load");var e=this,t=this.widgetConfig.widgetTypes[this.model.get("gadget")],n={};_.contains(["unique_bug_table","activity_stream","launches_table"],this.model.get("gadget"))||(n.metadata_fields=["name","number","start_time"]),this.model.get("gadget")=="most_failed_test_cases"&&(n.metadata_fields=["name","start_time"]),n.type=t.widget_type,n.gadget=this.model.get("gadget"),n.itemsCount=this.model.get("itemsCount"),this.model.getContentFields().length&&(n.content_fields=this.model.getContentFields()),n.widgetOptions=this.model.getWidgetOptions();var r={filter_id:this.model.get("filter_id"),name:this.model.get("name").trim(),share:this.model.get("isShared"),content_parameters:n};this.model.get("description")&&(r.description=this.model.get("description")),h.saveWidget(r).done(function(t){e.model.set({id:t.id}),e.dashboardModel.addWidget(e.model),e.isNoDashboard&&v.router.navigate(p.redirectToDashboard(e.dashboardModel.get("id")),{trigger:!0}),e.successClose(t.id)}).fail(function(e){s.ajaxFailMessenger(null,"widgetSave")})}},onDestroy:function(){this.selectWidgetView&&this.selectWidgetView.destroy(),this.configureWidgetView&&this.configureWidgetView.destroy(),this.saveWidget&&this.saveWidget.destroy()}});return m}),define("launches/FilterPanelView",["require","exports","module","defectType/SingletonDefectTypeCollection","jquery","backbone","backbone-epoxy","filterEntities/FilterEntitiesView","modals/addWidget/modalAddWidget","dashboard/GadgetModel","util","app"],function(e,t,n){"use strict";var r=e("defectType/SingletonDefectTypeCollection"),i=e("jquery"),s=e("backbone"),o=e("backbone-epoxy"),u=e("filterEntities/FilterEntitiesView"),a=e("modals/addWidget/modalAddWidget"),f=e("dashboard/GadgetModel"),l=e("util"),c=e("app"),h=c.getInstance(),p=o.View.extend({template:"tpl-launch-filter-panel",events:{"click [data-js-edit-filter]":"onClickEdit","click [data-js-discard-filter]":"onClickDiscard","click [data-js-save-filter]":"onClickSave","click [data-js-clone-filter]":"onClickClone","click [data-js-add-widget]":"onClickAddWidget"},bindings:{"[data-js-filter-not-save-descr]":"classes: {hide: all(not(temp), not(newEntities), not(newSelectionParameters))}","[data-js-filter-shared-descr]":"classes: {hide: not(isShared)}","[data-js-save-filter]":"attr: {disabled: any(all(not(newEntities), not(newSelectionParameters)), notMyFilter)}","[data-js-discard-filter]":"attr: {disabled: all(not(newEntities), not(newSelectionParameters))}","[data-js-edit-filter]":"attr: {disabled: any(temp, notMyFilter)}","[data-js-clone-filter]":"attr: {disabled: all(not(entities), not(newEntities))}","[data-js-filter-not-my-descr]":"classes: {hide: not(notMyFilter)}","[data-js-add-widget]":"classes: {disabled: temp}"},initialize:function(e){this.render(),this.createFilterEntities()},render:function(){this.$el.html(l.templates(this.template,{}))},onClickEdit:function(){h.trackingDispatcher.trackEventNumber(15),this.model.editMainInfo()},onClickClone:function(){h.trackingDispatcher.trackEventNumber(14);var e=this.model.collection.generateTempModel({newEntities:this.model.get("newEntities")||this.model.get("entities")});h.router.navigate(e.get("url"),{trigger:!0})},onClickDiscard:function(){h.trackingDispatcher.trackEventNumber(13),this.model.set({newEntities:"",newSelectionParameters:""}),this.createFilterEntities()},createFilterEntities:function(){this.filterEntities&&this.filterEntities.destroy(),this.filterEntities=new u({el:i("[data-js-filter-entities]",this.$el),filterLevel:"launch",model:this.model})},onClickSave:function(){h.trackingDispatcher.trackEventNumber(16),this.model.saveFilter()},onClickAddWidget:function(e){e.preventDefault(),e.stopPropagation(),h.trackingDispatcher.trackEventNumber(17),(new a({model:new f,filter_id:this.model.get("id"),isNoDashboard:!0})).show()},destroy:function(){this.filterEntities.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return p}),define("launches/LaunchHeaderView",["require","exports","module","defectType/SingletonDefectTypeCollection","filters/SingletonLaunchFilterCollection","launches/FilterLabelView","launches/FilterPanelView","util","jquery","backbone-epoxy","filters/FilterModel","app"],function(e,t,n){"use strict";var r=e("defectType/SingletonDefectTypeCollection"),i=e("filters/SingletonLaunchFilterCollection"),s=e("launches/FilterLabelView"),o=e("launches/FilterPanelView"),u=e("util"),a=e("jquery"),f=e("backbone-epoxy"),l=e("filters/FilterModel"),c=e("app"),h=c.getInstance(),p=f.View.extend({events:{"click [data-js-add-filter]":"onClickAddFilter","click [data-js-all-link]":"onClickAllLink"},bindings:{"[data-js-filters-overflow]":'classes: {"padding-bottom": not(active)}',"[data-js-all-link]":"attr: {href: url}, classes: {active: active}"},template:"tpl-launch-header",initialize:function(e){this.ready=a.Deferred(),this.launchFilterCollection=new i,this.model=new l({id:"all",active:!0,name:"All Launches",owner:h.userModel.get("name")}),this.listenTo(this.launchFilterCollection,"add",this.onAddFilter),this.listenTo(this.launchFilterCollection,"change:activeFilter",this.onChangeActiveFilter),this.listenTo(this.launchFilterCollection,"change:id",this.onChangeIdFilter),this.render()},render:function(){this.launchFilterCollection.ready.done(function(){this.listenTo(this.launchFilterCollection,"reset",this.renderFilterList),this.$el.html(u.templates(this.template)),this.applyBindings(),this.renderFilterList(),this.ready.resolve()}.bind(this))},onChangeActiveFilter:function(e){e?(this.activateFilter(e),this.renderActiveFilter(e)):(this.model.set({active:!0}),this.renderActiveFilter(this.model),this.filterPanel&&this.filterPanel.destroy())},renderActiveFilter:function(e){var t=a("[data-js-active-filter]",this.$el);t.html("");var n=new s({model:e});t.append(n.$el)},setState:function(e){a(".launches-header-block",this.$el).attr("data-js-state",e)},activateFilter:function(e){this.model.set({active:!1}),this.filterPanel&&this.filterPanel.destroy(),this.filterPanel=new o({model:e}),a("[data-js-filter-panel]",this.$el).html(this.filterPanel.$el)},onAddFilter:function(e){var t=new s({model:e});a("[data-js-filter-list]",this.$el).append(t.$el);var n=new s({model:e});a("[data-js-filter-list-mobile]",this.$el).append(n.$el)},renderFilterList:function(){a("[data-js-filter-list]",this.$el).html(""),a("[data-js-filter-list-mobile]",this.$el).html("");var e=new s({model:this.model});a("[data-js-filter-list-mobile]",this.$el).append(e.$el),_.each(this.launchFilterCollection.models,function(e){this.onAddFilter(e)},this)},onClickAddFilter:function(){h.trackingDispatcher.trackEventNumber(12);var e=this.launchFilterCollection.generateTempModel();h.router.navigate(e.get("url"),{trigger:!0})},onClickAllLink:function(){h.trackingDispatcher.trackEventNumber(22)},onChangeIdFilter:function(e){h.router.navigate(e.get("url"),{trigger:!1})},destroy:function(){this.$el.empty(),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return p}),define("launches/launchLevel/LaunchControlView",["require","exports","module","util","jquery","backbone-epoxy","app","localization","coreService","filterEntities/FilterEntitiesView"],function(e,t,n){"use strict";var r=e("util"),i=e("jquery"),s=e("backbone-epoxy"),o=e("app"),u=e("localization"),a=e("coreService"),f=e("filterEntities/FilterEntitiesView"),l=o.getInstance(),c=s.View.extend({events:{"click [data-js-refresh]":"onClickRefresh","click [data-js-multi-action]":"onClickMultiAction","click [data-js-multi-button]":"onShowMultiActon"},bindings:{"[data-js-refresh-counter]":"text: refreshItems, classes: {hide: not(refreshItems)}"},template:"tpl-launch-launch-control",initialize:function(e){this.collectionItems=e.collectionItems,this.filterModel=e.filterModel,this.context=e.context,this.model=new(s.Model.extend({defaults:{refreshItems:0}})),this.render(),this.context=="userdebug"&&(this.filterEntities=new f({el:i("[data-js-refine-entities]",this.$el),filterLevel:"launch",model:this.filterModel})),l.userModel.getRoleForCurrentProject()==l.projectRolesEnum.customer&&i('[data-js-multi-action="changemode"]',this.$el).addClass("hide"),this.listenTo(this.collectionItems,"reset",this.onResetCollectionItems),this.onResetCollectionItems()},render:function(){this.$el.html(r.templates(this.template,{context:this.context}))},onResetCollectionItems:function(){this.model.set({refreshItems:0}),this.request&&this.request.abort(),clearTimeout(this.timeout),this.inProgressItems=this.collectionItems.where({status:l.launchStatus.inProgress}),this.checkItems()},checkItems:function(){if(this.inProgressItems.length){var e=this,t=_.map(this.inProgressItems,function(e){return e.get("id")});this.request=a.checkForStatusUpdate(t).done(function(t){var n=[];_.each(e.inProgressItems,function(r){t[r.get("id")]!=l.launchStatus.inProgress?(r.set({status:t[r.get("id")],end_time:(new Date).getTime()}),e.model.set({refreshItems:e.model.get("refreshItems")+1})):n.push(r)}),e.inProgressItems=n,clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.checkItems()},5e3)})}},activateMultiple:function(){i("[data-js-refresh]",this.$el).addClass("disabled"),i("[data-js-multi-button]",this.$el).removeClass("disabled").attr({title:u.ui.actions})},disableMultiple:function(){i("[data-js-refresh]",this.$el).removeClass("disabled"),i("[data-js-multi-button]",this.$el).addClass("disabled").attr({title:u.launches.actionTitle})},onShowMultiActon:function(){l.trackingDispatcher.trackEventNumber(61)},onClickMultiAction:function(e){var t=i(e.currentTarget).data("js-multi-action");switch(t){case"merge":l.trackingDispatcher.trackEventNumber(62);break;case"compare":l.trackingDispatcher.trackEventNumber(63);break;case"changemode":l.trackingDispatcher.trackEventNumber(64);break;case"forcefinish":l.trackingDispatcher.trackEventNumber(65);break;case"remove":l.trackingDispatcher.trackEventNumber(66);break;default:}this.trigger("multi:action",t)},onClickRefresh:function(){this.collectionItems.load()},destroy:function(){this.request&&this.request.abort(),clearTimeout(this.timeout),this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return c}),define("launches/common/ItemDurationView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","localization","moment"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("localization"),f=e("moment"),l=u.getInstance(),c=s.View.extend({template:"tpl-launch-suite-item-duration",events:{},bindings:{"[data-js-status-title]":'attr: {title: getStatusTitle}, classes: {"duration-error": durationTimeClass}',"[data-js-status-icon]":"attr: {class: iconDurationClass}, text: iconDurationText","[data-js-duration-time]":"html: showDurationTime"},computeds:{iconDurationClass:function(){return this.isInvalidDuration()?"rp-icons rp-icons-warning":"material-icons"},iconDurationText:function(){return this.isInvalidDuration()?"":"query_builder"},showDurationTime:function(){if(this.isInvalidDuration())return" ";if(this.isProgress()){var e=this.getApproximateTimeText(),t="<span data-js-approximate-time>"+e+"</span>";return'<img alt="'+a.launches.inProcess+'" src="img/time-in-progress.gif"/>'+(this.validateForApproximateTime()?t:"")}return this.durationTime()},durationTimeClass:function(){return this.isStopped()||this.isInterrupted()},getStatusTitle:function(){if(this.isInvalidDuration())return this.isStartAndEndTime()?a.launches.inProcessAndEndedDuration:a.launches.notInProcessNotEndedDuration;if(this.isProgress()){if(this.validateForApproximateTime()){var e=this.getApproximateTime();if(e<=0)return this.getOverApproximateTitle()}return a.launches.inProcess}var t=this.durationTime(),n=this.getBinding("formatEndTime");return this.isSkipped()?a.launches.skippedDuration+" "+t:this.isStopped()?a.launches.stoppedDuration+" "+t+a.launches.stoppedAt+n:this.isInterrupted()?a.launches.interruptedDuration+" "+t+a.launches.stoppedAt+n:a.launches.prefixDuration+" "+t+"."+a.launches.finishTime+" "+n}},initialize:function(e){this.render()},render:function(){this.$el.html(o.templates(this.template,{model:this.model.toJSON({computed:!0})})),this.validateForApproximateTime()&&(this.updateApproximateTime(),this.startTimer())},isInvalidDuration:function(){var e=this.isProgress(),t=this.isStartAndEndTime(),n=this.isStartNoEndTime();return e&&t||!e&&n},isProgress:function(){var e=this.getBinding("status");return e==l.launchStatus.inProgress},isSkipped:function(){var e=this.getBinding("status");return e==l.launchStatus.skipped},isStopped:function(){var e=this.getBinding("status");return e==l.launchStatus.stopped},isInterrupted:function(){var e=this.getBinding("status");return e==l.launchStatus.interrupted},isStartAndEndTime:function(){var e=this.getBinding("start_time"),t=this.getBinding("end_time");return!!e&&!!t},isStartNoEndTime:function(){var e=this.getBinding("start_time"),t=this.getBinding("end_time");return!!e&&!t},durationTime:function(){var e=this.getBinding("start_time"),t=this.getBinding("end_time");return o.timeFormat(e,t)},validateForApproximateTime:function(){var e=this.model.get("isProgress"),t=this.model.get("type"),n=t==="launch"||!t;return e&&n},startTimer:function(){var e=this;this.timer&&clearTimeout(this.timer),this.timer=setTimeout(function(){e.updateApproximateTime()},6e4)},clearTimer:function(){this.timer&&clearTimeout(this.timer)},getApproximateTime:function(){var e=Math.round(this.model.get("approximateDuration")),t=Math.round((this.model.get("start_time")+e-f().unix()*1e3)/1e3);return t},updateApproximateTime:function(){var e=this.getApproximateTime(),t=this.getApproximateTimeText(),n=r("[data-js-approximate-time]",this.$el);n.closest("[data-js-status-title]").attr("title",this.getOverApproximateTitle()),n.html(t)},getApproximateTimeText:function(){var e=this.getApproximateTime();return e>0?e>60?a.launches.approximateTimeLeft.replace("%%%",this.approximateTimeFormat(e)):a.launches.approximateTimeLessMin:""},getOverApproximateTitle:function(){var e=this.getApproximateTime();if(e>0)return"";var t=this.approximateTimeFormat(Math.round(this.model.get("start_time")/1e3)),n=this.approximateTimeFormat(e);return[a.launches.approximateTimeExpected," ",t,", ",a.launches.approximateTimeOverLap," ",n].join("")},approximateTimeFormat:function(e){var t=Math.floor(e/86400),n=Math.floor((e-t*86400)/3600),r=Math.floor((e-t*86400-n*3600)/60),i=e-t*86400-n*3600-r*60,s="";return t>0&&(s=s+t+"d "),n>0&&(s=s+n+"h "),r>0&&(s=s+r+"m"),s===""&&i>0?s=i+"s":s===""&&i===0&&(s=Math.round(e/10)/100+"s"),s},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.empty(),delete this}});return c}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("simplemde",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.SimpleMDE=e()}}(function(){var e;return function t(e,n,r){function i(o,u){if(!n[o]){if(!e[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){var n=e[o][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(t,n,r){!function(i){"object"==typeof r&&"object"==typeof n?i(t("../../lib/codemirror")):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){function t(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function n(e){t(e);var n=e.state.placeholder=document.createElement("pre");n.style.cssText="height: 0; overflow: visible",n.className="CodeMirror-placeholder";var r=e.getOption("placeholder");"string"==typeof r&&(r=document.createTextNode(r)),n.appendChild(r),e.display.lineSpace.insertBefore(n,e.display.lineSpace.firstChild)}function r(e){s(e)&&n(e)}function i(e){var r=e.getWrapperElement(),i=s(e);r.className=r.className.replace(" CodeMirror-empty","")+(i?" CodeMirror-empty":""),i?n(e):t(e)}function s(e){return 1===e.lineCount()&&""===e.getLine(0)}e.defineOption("placeholder","",function(n,s,o){var u=o&&o!=e.Init;if(s&&!u)n.on("blur",r),n.on("change",i),n.on("swapDoc",i),i(n);else if(!s&&u){n.off("blur",r),n.off("change",i),n.off("swapDoc",i),t(n);var a=n.getWrapperElement();a.className=a.className.replace(" CodeMirror-empty","")}s&&!n.hasFocus()&&r(n)})})},{"../../lib/codemirror":5}],2:[function(t,n,r){!function(i){"object"==typeof r&&"object"==typeof n?i(t("../../lib/codemirror")):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";var t=/^(\s*)(>[> ]*|- \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,n=/^(\s*)(>[> ]*|- \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,r=/[*+-]\s/;e.commands.newlineAndIndentContinueMarkdownList=function(i){if(i.getOption("disableInput"))return e.Pass;for(var s=i.listSelections(),o=[],u=0;u<s.length;u++){var a=s[u].head,f=i.getStateAfter(a.line),l=f.list!==!1,c=0!==f.quote,h=i.getLine(a.line),p=t.exec(h);if(!s[u].empty()||!l&&!c||!p)return void i.execCommand("newlineAndIndent");if(n.test(h))i.replaceRange("",{line:a.line,ch:0},{line:a.line,ch:a.ch+1}),o[u]="\n";else{var d=p[1],v=p[5],m=r.test(p[2])||p[2].indexOf(">")>=0?p[2].replace("x"," "):parseInt(p[3],10)+1+p[4];o[u]="\n"+d+m+v}}i.replaceSelections(o)}})},{"../../lib/codemirror":5}],3:[function(t,n,r){!function(i){"object"==typeof r&&"object"==typeof n?i(t("../../lib/codemirror")):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";e.overlayMode=function(t,n,r){return{startState:function(){return{base:e.startState(t),overlay:e.startState(n),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(r){return{base:e.copyState(t,r.base),overlay:e.copyState(n,r.overlay),basePos:r.basePos,baseCur:null,overlayPos:r.overlayPos,overlayCur:null}},token:function(e,i){return(e!=i.streamSeen||Math.min(i.basePos,i.overlayPos)<e.start)&&(i.streamSeen=e,i.basePos=i.overlayPos=e.start),e.start==i.basePos&&(i.baseCur=t.token(e,i.base),i.basePos=e.pos),e.start==i.overlayPos&&(e.pos=e.start,i.overlayCur=n.token(e,i.overlay),i.overlayPos=e.pos),e.pos=Math.min(i.basePos,i.overlayPos),null==i.overlayCur?i.baseCur:null!=i.baseCur&&i.overlay.combineTokens||r&&null==i.overlay.combineTokens?i.baseCur+" "+i.overlayCur:i.overlayCur},indent:t.indent&&function(e,n){return t.indent(e.base,n)},electricChars:t.electricChars,innerMode:function(e){return{state:e.base,mode:t}},blankLine:function(e){var i,s;return t.blankLine&&(i=t.blankLine(e.base)),n.blankLine&&(s=n.blankLine(e.overlay)),null==s?i:r&&null!=i?i+" "+s:s}}}})},{"../../lib/codemirror":5}],4:[function(t,n,r){!function(i){"object"==typeof r&&"object"==typeof n?i(t("../../lib/codemirror")):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";function t(e){e.operation(function(){o(e)})}function n(e){e.state.markedSelection.length&&e.operation(function(){i(e)})}function r(e,t,n,r){if(0!=f(t,n))for(var i=e.state.markedSelection,s=e.state.markedSelectionStyle,o=t.line;;){var l=o==t.line?t:a(o,0),h=o+u,p=h>=n.line,d=p?n:a(h,0),v=e.markText(l,d,{className:s});if(null==r?i.push(v):i.splice(r++,0,v),p)break;o=h}}function i(e){for(var t=e.state.markedSelection,n=0;n<t.length;++n)t[n].clear();t.length=0}function s(e){i(e);for(var t=e.listSelections(),n=0;n<t.length;n++)r(e,t[n].from(),t[n].to())}function o(e){if(!e.somethingSelected())return i(e);if(e.listSelections().length>1)return s(e);var t=e.getCursor("start"),n=e.getCursor("end"),o=e.state.markedSelection;if(!o.length)return r(e,t,n);var a=o[0].find(),l=o[o.length-1].find();if(!a||!l||n.line-t.line<u||f(t,l.to)>=0||f(n,a.from)<=0)return s(e);for(;f(t,a.from)>0;)o.shift().clear(),a=o[0].find();for(f(t,a.from)<0&&(a.to.line-t.line<u?(o.shift().clear(),r(e,t,a.to,0)):r(e,t,a.from,0));f(n,l.to)<0;)o.pop().clear(),l=o[o.length-1].find();f(n,l.to)>0&&(n.line-l.from.line<u?(o.pop().clear(),r(e,l.from,n)):r(e,l.to,n))}e.defineOption("styleSelectedText",!1,function(r,o,u){var a=u&&u!=e.Init;o&&!a?(r.state.markedSelection=[],r.state.markedSelectionStyle="string"==typeof o?o:"CodeMirror-selectedtext",s(r),r.on("cursorActivity",t),r.on("change",n)):!o&&a&&(r.off("cursorActivity",t),r.off("change",n),i(r),r.state.markedSelection=r.state.markedSelectionStyle=null)});var u=8,a=e.Pos,f=e.cmpPos})},{"../../lib/codemirror":5}],5:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?n.exports=i():"function"==typeof e&&e.amd?e(i):t.CodeMirror=i()}(this,function(){"use strict";function e(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}function t(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function n(e,n){return t(e).appendChild(n)}function r(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)i.appendChild(document.createTextNode(t));else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function i(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do if(11==t.nodeType&&(t=t.host),t==e)return!0;while(t=t.parentNode)}function s(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.root&&e.root.activeElement;)e=e.root.activeElement;return e}function o(t,n){var r=t.className;e(n).test(r)||(t.className+=(r?" ":"")+n)}function u(t,n){for(var r=t.split(" "),i=0;i<r.length;i++)r[i]&&!e(r[i]).test(n)&&(n+=" "+r[i]);return n}function a(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function f(e,t,n){t||(t={});for(var r in e)!e.hasOwnProperty(r)||n===!1&&t.hasOwnProperty(r)||(t[r]=e[r]);return t}function l(e,t,n,r,i){null==t&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var s=r||0,o=i||0;;){var u=e.indexOf("	",s);if(u<0||u>=t)return o+(t-s);o+=u-s,o+=n-o%n,s=u+1}}function c(){this.id=null}function h(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}function p(e,t,n){for(var r=0,i=0;;){var s=e.indexOf("	",r);s==-1&&(s=e.length);var o=s-r;if(s==e.length||i+o>=t)return r+Math.min(o,t-i);if(i+=s-r,i+=n-i%n,r=s+1,i>=t)return r}}function d(e){for(;Au.length<=e;)Au.push(v(Au)+" ");return Au[e]}function v(e){return e[e.length-1]}function m(e,t){for(var n=[],r=0;r<e.length;r++)n[r]=t(e[r],r);return n}function g(e,t,n){for(var r=0,i=n(t);r<e.length&&n(e[r])<=i;)r++;e.splice(r,0,t)}function y(){}function b(e,t){var n;return Object.create?n=Object.create(e):(y.prototype=e,n=new y),t&&f(t,n),n}function w(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||Ou.test(e))}function E(e,t){return t?!!(t.source.indexOf("\\w")>-1&&w(e))||t.test(e):w(e)}function S(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function x(e){return e.charCodeAt(0)>=768&&Mu.test(e)}function T(e,t,n){var i=this;this.input=n,i.scrollbarFiller=r("div",null,"CodeMirror-scrollbar-filler"),i.scrollbarFiller.setAttribute("cm-not-content","true"),i.gutterFiller=r("div",null,"CodeMirror-gutter-filler"),i.gutterFiller.setAttribute("cm-not-content","true"),i.lineDiv=r("div",null,"CodeMirror-code"),i.selectionDiv=r("div",null,null,"position: relative; z-index: 1"),i.cursorDiv=r("div",null,"CodeMirror-cursors"),i.measure=r("div",null,"CodeMirror-measure"),i.lineMeasure=r("div",null,"CodeMirror-measure"),i.lineSpace=r("div",[i.measure,i.lineMeasure,i.selectionDiv,i.cursorDiv,i.lineDiv],null,"position: relative; outline: none"),i.mover=r("div",[r("div",[i.lineSpace],"CodeMirror-lines")],null,"position: relative"),i.sizer=r("div",[i.mover],"CodeMirror-sizer"),i.sizerWidth=null,i.heightForcer=r("div",null,null,"position: absolute; height: "+Tu+"px; width: 1px;"),i.gutters=r("div",null,"CodeMirror-gutters"),i.lineGutter=null,i.scroller=r("div",[i.sizer,i.heightForcer,i.gutters],"CodeMirror-scroll"),i.scroller.setAttribute("tabIndex","-1"),i.wrapper=r("div",[i.scrollbarFiller,i.gutterFiller,i.scroller],"CodeMirror"),nu&&ru<8&&(i.gutters.style.zIndex=-1,i.scroller.style.paddingRight=0),iu||Zo&&hu||(i.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(i.wrapper):e(i.wrapper)),i.viewFrom=i.viewTo=t.first,i.reportedViewFrom=i.reportedViewTo=t.first,i.view=[],i.renderedView=null,i.externalMeasured=null,i.viewOffset=0,i.lastWrapHeight=i.lastWrapWidth=0,i.updateLineNumbers=null,i.nativeBarWidth=i.barHeight=i.barWidth=0,i.scrollbarsClipped=!1,i.lineNumWidth=i.lineNumInnerWidth=i.lineNumChars=null,i.alignWidgets=!1,i.cachedCharWidth=i.cachedTextHeight=i.cachedPaddingH=null,i.maxLine=null,i.maxLineLength=0,i.maxLineChanged=!1,i.wheelDX=i.wheelDY=i.wheelStartX=i.wheelStartY=null,i.shift=!1,i.selForContextMenu=null,i.activeTouch=null,n.init(i)}function N(e,t){if(t-=e.first,t<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var r=0;;++r){var i=n.children[r],s=i.chunkSize();if(t<s){n=i;break}t-=s}return n.lines[t]}function C(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var s=e.text;i==n.line&&(s=s.slice(0,n.ch)),i==t.line&&(s=s.slice(t.ch)),r.push(s),++i}),r}function k(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function L(e,t){var n=t-e.height;if(n)for(var r=e;r;r=r.parent)r.height+=n}function A(e){if(null==e.parent)return null;for(var t=e.parent,n=h(t.lines,e),r=t.parent;r;t=r,r=r.parent)for(var i=0;r.children[i]!=t;++i)n+=r.children[i].chunkSize();return n+t.first}function O(e,t){var n=e.first;e:do{for(var r=0;r<e.children.length;++r){var i=e.children[r],s=i.height;if(t<s){e=i;continue e}t-=s,n+=i.chunkSize()}return n}while(!e.lines);for(var o=0;o<e.lines.length;++o){var u=e.lines[o],a=u.height;if(t<a)break;t-=a}return n+o}function M(e,t){return t>=e.first&&t<e.first+e.size}function _(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function D(e,t){return this instanceof D?(this.line=e,void (this.ch=t)):new D(e,t)}function P(e,t){return e.line-t.line||e.ch-t.ch}function H(e){return D(e.line,e.ch)}function B(e,t){return P(e,t)<0?t:e}function j(e,t){return P(e,t)<0?e:t}function F(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function I(e,t){if(t.line<e.first)return D(e.first,0);var n=e.first+e.size-1;return t.line>n?D(n,N(e,n).text.length):q(t,N(e,t.line).text.length)}function q(e,t){var n=e.ch;return null==n||n>t?D(e.line,t):n<0?D(e.line,0):e}function R(e,t){for(var n=[],r=0;r<t.length;r++)n[r]=I(e,t[r]);return n}function U(){_u=!0}function z(){Du=!0}function W(e,t,n){this.marker=e,this.from=t,this.to=n}function X(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function V(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function $(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function J(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var s=e[i],o=s.marker,u=null==s.from||(o.inclusiveLeft?s.from<=t:s.from<t);if(u||s.from==t&&"bookmark"==o.type&&(!n||!s.marker.insertLeft)){var a=null==s.to||(o.inclusiveRight?s.to>=t:s.to>t);(r||(r=[])).push(new W(o,s.from,a?null:s.to))}}return r}function K(e,t,n){var r;if(e)for(var i=0;i<e.length;++i){var s=e[i],o=s.marker,u=null==s.to||(o.inclusiveRight?s.to>=t:s.to>t);if(u||s.from==t&&"bookmark"==o.type&&(!n||s.marker.insertLeft)){var a=null==s.from||(o.inclusiveLeft?s.from<=t:s.from<t);(r||(r=[])).push(new W(o,a?null:s.from-t,null==s.to?null:s.to-t))}}return r}function Q(e,t){if(t.full)return null;var n=M(e,t.from.line)&&N(e,t.from.line).markedSpans,r=M(e,t.to.line)&&N(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,s=t.to.ch,o=0==P(t.from,t.to),u=J(n,i,o),a=K(r,s,o),f=1==t.text.length,l=v(t.text).length+(f?i:0);if(u)for(var c=0;c<u.length;++c){var h=u[c];if(null==h.to){var p=X(a,h.marker);p?f&&(h.to=null==p.to?null:p.to+l):h.to=i}}if(a)for(var d=0;d<a.length;++d){var m=a[d];if(null!=m.to&&(m.to+=l),null==m.from){var g=X(u,m.marker);g||(m.from=l,f&&(u||(u=[])).push(m))}else m.from+=l,f&&(u||(u=[])).push(m)}u&&(u=G(u)),a&&a!=u&&(a=G(a));var y=[u];if(!f){var b,w=t.text.length-2;if(w>0&&u)for(var E=0;E<u.length;++E)null==u[E].to&&(b||(b=[])).push(new W(u[E].marker,null,null));for(var S=0;S<w;++S)y.push(b);y.push(a)}return y}function G(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&n.marker.clearWhenEmpty!==!1&&e.splice(t--,1)}return e.length?e:null}function Y(e,t,n){var r=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||r&&h(r,n)!=-1||(r||(r=[])).push(n)}}),!r)return null;for(var i=[{from:t,to:n}],s=0;s<r.length;++s)for(var o=r[s],u=o.find(0),a=0;a<i.length;++a){var f=i[a];if(!(P(f.to,u.from)<0||P(f.from,u.to)>0)){var l=[a,1],c=P(f.from,u.from),p=P(f.to,u.to);(c<0||!o.inclusiveLeft&&!c)&&l.push({from:f.from,to:u.from}),(p>0||!o.inclusiveRight&&!p)&&l.push({from:u.to,to:f.to}),i.splice.apply(i,l),a+=l.length-1}}return i}function Z(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function et(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function tt(e){return e.inclusiveLeft?-1:0}function nt(e){return e.inclusiveRight?1:0}function rt(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var r=e.find(),i=t.find(),s=P(r.from,i.from)||tt(e)-tt(t);if(s)return-s;var o=P(r.to,i.to)||nt(e)-nt(t);return o?o:t.id-e.id}function it(e,t){var n,r=Du&&e.markedSpans;if(r)for(var i=void 0,s=0;s<r.length;++s)i=r[s],i.marker.collapsed&&null==(t?i.from:i.to)&&(!n||rt(n,i.marker)<0)&&(n=i.marker);return n}function st(e){return it(e,!0)}function ot(e){return it(e,!1)}function ut(e,t,n,r,i){var s=N(e,t),o=Du&&s.markedSpans;if(o)for(var u=0;u<o.length;++u){var a=o[u];if(a.marker.collapsed){var f=a.marker.find(0),l=P(f.from,n)||tt(a.marker)-tt(i),c=P(f.to,r)||nt(a.marker)-nt(i);if(!(l>=0&&c<=0||l<=0&&c>=0)&&(l<=0&&(a.marker.inclusiveRight&&i.inclusiveLeft?P(f.to,n)>=0:P(f.to,n)>0)||l>=0&&(a.marker.inclusiveRight&&i.inclusiveLeft?P(f.from,r)<=0:P(f.from,r)<0)))return!0}}}function at(e){for(var t;t=st(e);)e=t.find(-1,!0).line;return e}function ft(e){for(var t,n;t=ot(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}function lt(e,t){var n=N(e,t),r=at(n);return n==r?t:A(r)}function ct(e,t){if(t>e.lastLine())return t;var n,r=N(e,t);if(!ht(e,r))return t;for(;n=ot(r);)r=n.find(1,!0).line;return A(r)+1}function ht(e,t){var n=Du&&t.markedSpans;if(n)for(var r=void 0,i=0;i<n.length;++i)if(r=n[i],r.marker.collapsed){if(null==r.from)return!0;if(!r.marker.widgetNode&&0==r.from&&r.marker.inclusiveLeft&&pt(e,t,r))return!0}}function pt(e,t,n){if(null==n.to){var r=n.marker.find(1,!0);return pt(e,r.line,X(r.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var i=void 0,s=0;s<t.markedSpans.length;++s)if(i=t.markedSpans[s],i.marker.collapsed&&!i.marker.widgetNode&&i.from==n.to&&(null==i.to||i.to!=n.from)&&(i.marker.inclusiveLeft||n.marker.inclusiveRight)&&pt(e,t,i))return!0}function dt(e){e=at(e);for(var t=0,n=e.parent,r=0;r<n.lines.length;++r){var i=n.lines[r];if(i==e)break;t+=i.height}for(var s=n.parent;s;n=s,s=n.parent)for(var o=0;o<s.children.length;++o){var u=s.children[o];if(u==n)break;t+=u.height}return t}function vt(e){if(0==e.height)return 0;for(var t,n=e.text.length,r=e;t=st(r);){var i=t.find(0,!0);r=i.from.line,n+=i.from.ch-i.to.ch}for(r=e;t=ot(r);){var s=t.find(0,!0);n-=r.text.length-s.from.ch,r=s.to.line,n+=r.text.length-s.to.ch}return n}function mt(e){var t=e.display,n=e.doc;t.maxLine=N(n,n.first),t.maxLineLength=vt(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=vt(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}function gt(e,t,n,r){if(!e)return r(t,n,"ltr");for(var i=!1,s=0;s<e.length;++s){var o=e[s];(o.from<n&&o.to>t||t==n&&o.to==t)&&(r(Math.max(o.from,t),Math.min(o.to,n),1==o.level?"rtl":"ltr"),i=!0)}i||r(t,n,"ltr")}function yt(e){return e.level%2?e.to:e.from}function bt(e){return e.level%2?e.from:e.to}function wt(e){var t=kt(e);return t?yt(t[0]):0}function Et(e){var t=kt(e);return t?bt(v(t)):e.text.length}function St(e,t,n){var r=e[0].level;return t==r||n!=r&&t<n}function xt(e,t){var n;Pu=null;for(var r=0;r<e.length;++r){var i=e[r];if(i.from<t&&i.to>t)return r;if(i.from==t||i.to==t){if(null!=n)return St(e,i.level,e[n].level)?(i.from!=i.to&&(Pu=n),r):(i.from!=i.to&&(Pu=r),n);n=r}}return n}function Tt(e,t,n,r){if(!r)return t+n;do t+=n;while(t>0&&x(e.text.charAt(t)));return t}function Nt(e,t,n,r){var i=kt(e);if(!i)return Ct(e,t,n,r);for(var s=xt(i,t),o=i[s],u=Tt(e,t,o.level%2?-n:n,r);;){if(u>o.from&&u<o.to)return u;if(u==o.from||u==o.to)return xt(i,u)==s?u:(o=i[s+=n],n>0==o.level%2?o.to:o.from);if(o=i[s+=n],!o)return null;u=n>0==o.level%2?Tt(e,o.to,-1,r):Tt(e,o.from,1,r)}}function Ct(e,t,n,r){var i=t+n;if(r)for(;i>0&&x(e.text.charAt(i));)i+=n;return i<0||i>e.text.length?null:i}function kt(e){var t=e.order;return null==t&&(t=e.order=Hu(e.text)),t}function Lt(e,t){return e._handlers&&e._handlers[t]||Bu}function At(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers,i=r&&r[t];if(i){var s=h(i,n);s>-1&&(r[t]=i.slice(0,s).concat(i.slice(s+1)))}}}function Ot(e,t){var n=Lt(e,t);if(n.length)for(var r=Array.prototype.slice.call(arguments,2),i=0;i<n.length;++i)n[i].apply(null,r)}function Mt(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),Ot(e,n||t.type,e,t),jt(t)||t.codemirrorIgnore}function _t(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),r=0;r<t.length;++r)h(n,t[r])==-1&&n.push(t[r])}function Dt(e,t){return Lt(e,t).length>0}function Pt(e){e.prototype.on=function(e,t){ju(this,e,t)},e.prototype.off=function(e,t){At(this,e,t)}}function Ht(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Bt(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function jt(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Ft(e){Ht(e),Bt(e)}function It(e){return e.target||e.srcElement}function qt(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),pu&&e.ctrlKey&&1==t&&(t=3),t}function Rt(e){if(null==Su){var t=r("span","​");n(e,r("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Su=t.offsetWidth<=1&&t.offsetHeight>2&&!(nu&&ru<8))}var i=Su?r("span","​"):r("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return i.setAttribute("cm-text",""),i}function Ut(e){if(null!=xu)return xu;var r=n(e,document.createTextNode("AخA")),i=gu(r,0,1).getBoundingClientRect(),s=gu(r,1,2).getBoundingClientRect();return t(e),!!i&&i.left!=i.right&&(xu=s.right-i.right<3)}function zt(e){if(null!=Uu)return Uu;var t=n(e,r("span","x")),i=t.getBoundingClientRect(),s=gu(t,0,1).getBoundingClientRect();return Uu=Math.abs(i.left-s.left)>1}function Wt(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),zu[e]=t}function Xt(e,t){Wu[e]=t}function Vt(e){if("string"==typeof e&&Wu.hasOwnProperty(e))e=Wu[e];else if(e&&"string"==typeof e.name&&Wu.hasOwnProperty(e.name)){var t=Wu[e.name];"string"==typeof t&&(t={name:t}),e=b(t,e),e.name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return Vt("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return Vt("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function $t(e,t){t=Vt(t);var n=zu[t.name];if(!n)return $t(e,"text/plain");var r=n(e,t);if(Xu.hasOwnProperty(t.name)){var i=Xu[t.name];for(var s in i)i.hasOwnProperty(s)&&(r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=i[s])}if(r.name=t.name,t.helperType&&(r.helperType=t.helperType),t.modeProps)for(var o in t.modeProps)r[o]=t.modeProps[o];return r}function Jt(e,t){var n=Xu.hasOwnProperty(e)?Xu[e]:Xu[e]={};f(t,n)}function Kt(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function Qt(e,t){for(var n;e.innerMode&&(n=e.innerMode(t),n&&n.mode!=e);)t=n.state,e=n.mode;return n||{mode:e,state:t}}function Gt(e,t,n){return!e.startState||e.startState(t,n)}function Yt(e,t,n,r){var i=[e.state.modeGen],s={};un(e,t.text,e.doc.mode,n,function(e,t){return i.push(e,t)},s,r);for(var o=function(n){var r=e.state.overlays[n],o=1,u=0;un(e,t.text,r.mode,!0,function(e,t){for(var n=o;u<e;){var s=i[o];s>e&&i.splice(o,1,e,i[o+1],s),o+=2,u=Math.min(e,s)}if(t)if(r.opaque)i.splice(n,o-n,e,"overlay "+t),o=n+2;else for(;n<o;n+=2){var a=i[n+1];i[n+1]=(a?a+" ":"")+"overlay "+t}},s)},u=0;u<e.state.overlays.length;++u)o(u);return{styles:i,classes:s.bgClass||s.textClass?s:null}}function Zt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var r=en(e,A(t)),i=Yt(e,t,t.text.length>e.options.maxHighlightLength?Kt(e.doc.mode,r):r);t.stateAfter=r,t.styles=i.styles,i.classes?t.styleClasses=i.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.frontier&&e.doc.frontier++}return t.styles}function en(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var s=an(e,t,n),o=s>r.first&&N(r,s-1).stateAfter;return o=o?Kt(r.mode,o):Gt(r.mode),r.iter(s,t,function(n){tn(e,n.text,o);var u=s==t-1||s%5==0||s>=i.viewFrom&&s<i.viewTo;n.stateAfter=u?Kt(r.mode,o):null,++s}),n&&(r.frontier=s),o}function tn(e,t,n,r){var i=e.doc.mode,s=new Vu(t,e.options.tabSize);for(s.start=s.pos=r||0,""==t&&nn(i,n);!s.eol();)rn(i,s,n),s.start=s.pos}function nn(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Qt(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function rn(e,t,n,r){for(var i=0;i<10;i++){r&&(r[0]=Qt(e,n).mode);var s=e.token(t,n);if(t.pos>t.start)return s}throw new Error("Mode "+e.name+" failed to advance stream.")}function sn(e,t,n,r){var i,s=function(e){return{start:c.start,end:c.pos,string:c.current(),type:i||null,state:e?Kt(o.mode,l):l}},o=e.doc,u=o.mode;t=I(o,t);var a,f=N(o,t.line),l=en(e,t.line,n),c=new Vu(f.text,e.options.tabSize);for(r&&(a=[]);(r||c.pos<t.ch)&&!c.eol();)c.start=c.pos,i=rn(u,c,l),r&&a.push(s(!0));return r?a:s()}function on(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";null==t[r]?t[r]=n[2]:(new RegExp("(?:^|s)"+n[2]+"(?:$|s)")).test(t[r])||(t[r]+=" "+n[2])}return e}function un(e,t,n,r,i,s,o){var u=n.flattenSpans;null==u&&(u=e.options.flattenSpans);var a,f=0,l=null,c=new Vu(t,e.options.tabSize),h=e.options.addModeClass&&[null];for(""==t&&on(nn(n,r),s);!c.eol();){if(c.pos>e.options.maxHighlightLength?(u=!1,o&&tn(e,t,r,c.pos),c.pos=t.length,a=null):a=on(rn(n,c,r,h),s),h){var p=h[0].name;p&&(a="m-"+(a?p+" "+a:p))}if(!u||l!=a){for(;f<c.start;)f=Math.min(c.start,f+5e3),i(f,l);l=a}c.start=c.pos}for(;f<c.pos;){var d=Math.min(c.pos,f+5e3);i(d,l),f=d}}function an(e,t,n){for(var r,i,s=e.doc,o=n?-1:t-(e.doc.mode.innerMode?1e3:100),u=t;u>o;--u){if(u<=s.first)return s.first;var a=N(s,u-1);if(a.stateAfter&&(!n||u<=s.frontier))return u;var f=l(a.text,null,e.options.tabSize);(null==i||r>f)&&(i=u-1,r=f)}return i}function fn(e,t,n){this.text=e,et(this,t),this.height=n?n(this):1}function ln(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),Z(e),et(e,n);var i=r?r(e):1;i!=e.height&&L(e,i)}function cn(e){e.parent=null,Z(e)}function hn(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Ku:Ju;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function pn(e,t){var n=r("span",null,null,iu?"padding-right: .1px":null),i={pre:r("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:(nu||iu)&&e.getOption("lineWrapping")};n.setAttribute("role","presentation"),i.pre.setAttribute("role","presentation"),t.measure={};for(var s=0;s<=(t.rest?t.rest.length:0);s++){var o=s?t.rest[s-1]:t.line,a=void 0;i.pos=0,i.addToken=vn,Ut(e.display.measure)&&(a=kt(o))&&(i.addToken=gn(i.addToken,a)),i.map=[];var f=t!=e.display.externalMeasured&&A(o);bn(o,i,Zt(e,o,f)),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=u(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=u(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Rt(e.display.measure))),0==s?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(iu){var l=i.content.lastChild;(/\bcm-tab\b/.test(l.className)||l.querySelector&&l.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return Ot(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=u(i.pre.className,i.textClass||"")),i}function dn(e){var t=r("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function vn(e,t,n,i,s,o,u){if(t){var a,f=e.splitSpaces?mn(t,e.trailingSpace):t,l=e.cm.state.specialChars,c=!1;if(l.test(t)){a=document.createDocumentFragment();for(var h=0;;){l.lastIndex=h;var p=l.exec(t),v=p?p.index-h:t.length-h;if(v){var m=document.createTextNode(f.slice(h,h+v));nu&&ru<9?a.appendChild(r("span",[m])):a.appendChild(m),e.map.push(e.pos,e.pos+v,m),e.col+=v,e.pos+=v}if(!p)break;h+=v+1;var g=void 0;if("	"==p[0]){var y=e.cm.options.tabSize,b=y-e.col%y;g=a.appendChild(r("span",d(b),"cm-tab")),g.setAttribute("role","presentation"),g.setAttribute("cm-text","	"),e.col+=b}else"\r"==p[0]||"\n"==p[0]?(g=a.appendChild(r("span","\r"==p[0]?"␍":"␤","cm-invalidchar")),g.setAttribute("cm-text",p[0]),e.col+=1):(g=e.cm.options.specialCharPlaceholder(p[0]),g.setAttribute("cm-text",p[0]),nu&&ru<9?a.appendChild(r("span",[g])):a.appendChild(g),e.col+=1);e.map.push(e.pos,e.pos+1,g),e.pos++}}else e.col+=t.length,a=document.createTextNode(f),e.map.push(e.pos,e.pos+t.length,a),nu&&ru<9&&(c=!0),e.pos+=t.length;if(e.trailingSpace=32==f.charCodeAt(t.length-1),n||i||s||c||u){var w=n||"";i&&(w+=i),s&&(w+=s);var E=r("span",[a],w,u);return o&&(E.title=o),e.content.appendChild(E)}e.content.appendChild(a)}}function mn(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,r="",i=0;i<e.length;i++){var s=e.charAt(i);" "!=s||!n||i!=e.length-1&&32!=e.charCodeAt(i+1)||(s=" "),r+=s,n=" "==s}return r}function gn(e,t){return function(n,r,i,s,o,u,a){i=i?i+" cm-force-border":"cm-force-border";for(var f=n.pos,l=f+r.length;;){for(var c=void 0,h=0;h<t.length&&(c=t[h],!(c.to>f&&c.from<=f));h++);if(c.to>=l)return e(n,r,i,s,o,u,a);e(n,r.slice(0,c.to-f),i,s,null,u,a),s=null,r=r.slice(c.to-f),f=c.to}}}function yn(e,t,n,r){var i=!r&&n.widgetNode;i&&e.map.push(e.pos,e.pos+t,i),!r&&e.cm.display.input.needsContentAttribute&&(i||(i=e.content.appendChild(document.createElement("span"))),i.setAttribute("cm-marker",n.id)),i&&(e.cm.display.input.setUneditable(i),e.content.appendChild(i)),e.pos+=t,e.trailingSpace=!1}function bn(e,t,n){var r=e.markedSpans,i=e.text,s=0;if(r)for(var o,u,a,f,l,c,h,p=i.length,d=0,v=1,m="",g=0;;){if(g==d){a=f=l=c=u="",h=null,g=1/0;for(var y=[],b=void 0,w=0;w<r.length;++w){var E=r[w],S=E.marker;"bookmark"==S.type&&E.from==d&&S.widgetNode?y.push(S):E.from<=d&&(null==E.to||E.to>d||S.collapsed&&E.to==d&&E.from==d)?(null!=E.to&&E.to!=d&&g>E.to&&(g=E.to,f=""),S.className&&(a+=" "+S.className),S.css&&(u=(u?u+";":"")+S.css),S.startStyle&&E.from==d&&(l+=" "+S.startStyle),S.endStyle&&E.to==g&&(b||(b=[])).push(S.endStyle,E.to),S.title&&!c&&(c=S.title),S.collapsed&&(!h||rt(h.marker,S)<0)&&(h=E)):E.from>d&&g>E.from&&(g=E.from)}if(b)for(var x=0;x<b.length;x+=2)b[x+1]==g&&(f+=" "+b[x]);if(!h||h.from==d)for(var T=0;T<y.length;++T)yn(t,0,y[T]);if(h&&(h.from||0)==d){if(yn(t,(null==h.to?p+1:h.to)-d,h.marker,null==h.from),null==h.to)return;h.to==d&&(h=!1)}}if(d>=p)break;for(var N=Math.min(p,g);;){if(m){var C=d+m.length;if(!h){var k=C>N?m.slice(0,N-d):m;t.addToken(t,k,o?o+a:a,l,d+k.length==g?f:"",c,u)}if(C>=N){m=m.slice(N-d),d=N;break}d=C,l=""}m=i.slice(s,s=n[v++]),o=hn(n[v++],t.cm.options)}}else for(var L=1;L<n.length;L+=2)t.addToken(t,i.slice(s,s=n[L]),hn(n[L+1],t.cm.options))}function wn(e,t,n){this.line=t,this.rest=ft(t),this.size=this.rest?A(v(this.rest))-n+1:1,this.node=this.text=null,this.hidden=ht(e,t)}function En(e,t,n){for(var r,i=[],s=t;s<n;s=r){var o=new wn(e.doc,N(e.doc,s),s);r=s+o.size,i.push(o)}return i}function Sn(e){Qu?Qu.ops.push(e):e.ownsGroup=Qu={ops:[e],delayedCallbacks:[]}}function xn(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var r=0;r<e.ops.length;r++){var i=e.ops[r];if(i.cursorActivityHandlers)for(;i.cursorActivityCalled<i.cursorActivityHandlers.length;)i.cursorActivityHandlers[i.cursorActivityCalled++].call(null,i.cm)}}while(n<t.length)}function Tn(e,t){var n=e.ownsGroup;if(n)try{xn(n)}finally{Qu=null,t(n)}}function Nn(e,t){var n=Lt(e,t);if(n.length){var r,i=Array.prototype.slice.call(arguments,2);Qu?r=Qu.delayedCallbacks:Gu?r=Gu:(r=Gu=[],setTimeout(Cn,0));for(var s=function(e){r.push(function(){return n[e].apply(null,i)})},o=0;o<n.length;++o)s(o)}}function Cn(){var e=Gu;Gu=null;for(var t=0;t<e.length;++t)e[t]()}function kn(e,t,n,r){for(var i=0;i<t.changes.length;i++){var s=t.changes[i];"text"==s?Mn(e,t):"gutter"==s?Dn(e,t,n,r):"class"==s?_n(t):"widget"==s&&Pn(e,t,r)}t.changes=null}function Ln(e){return e.node==e.text&&(e.node=r("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),nu&&ru<8&&(e.node.style.zIndex=2)),e.node}function An(e){var t=e.bgClass?e.bgClass+" "+(e.line.bgClass||""):e.line.bgClass;if(t&&(t+=" CodeMirror-linebackground"),e.background)t?e.background.className=t:(e.background.parentNode.removeChild(e.background),e.background=null);else if(t){var n=Ln(e);e.background=n.insertBefore(r("div",null,t),n.firstChild)}}function On(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):pn(e,t)}function Mn(e,t){var n=t.text.className,r=On(e,t);t.text==t.node&&(t.node=r.pre),t.text.parentNode.replaceChild(r.pre,t.text),t.text=r.pre,r.bgClass!=t.bgClass||r.textClass!=t.textClass?(t.bgClass=r.bgClass,t.textClass=r.textClass,_n(t)):n&&(t.text.className=n)}function _n(e){An(e),e.line.wrapClass?Ln(e).className=e.line.wrapClass:e.node!=e.text&&(e.node.className="");var t=e.textClass?e.textClass+" "+(e.line.textClass||""):e.line.textClass;e.text.className=t||""}function Dn(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var s=Ln(t);t.gutterBackground=r("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),s.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var u=Ln(t),a=t.gutter=r("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(a),u.insertBefore(a,t.text),t.line.gutterClass&&(a.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=a.appendChild(r("div",_(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var f=0;f<e.options.gutters.length;++f){var l=e.options.gutters[f],c=o.hasOwnProperty(l)&&o[l];c&&a.appendChild(r("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[l]+"px; width: "+i.gutterWidth[l]+"px"))}}}function Pn(e,t,n){t.alignable&&(t.alignable=null);for(var r=t.node.firstChild,i=void 0;r;r=i)i=r.nextSibling,"CodeMirror-linewidget"==r.className&&t.node.removeChild(r);Bn(e,t,n)}function Hn(e,t,n,r){var i=On(e,t);return t.text=t.node=i.pre,i.bgClass&&(t.bgClass=i.bgClass),i.textClass&&(t.textClass=i.textClass),_n(t),Dn(e,t,n,r),Bn(e,t,r),t.node}function Bn(e,t,n){if(jn(e,t.line,t,n,!0),t.rest)for(var r=0;r<t.rest.length;r++)jn(e,t.rest[r],t,n,!1)}function jn(e,t,n,i,s){if(t.widgets)for(var o=Ln(n),u=0,a=t.widgets;u<a.length;++u){var f=a[u],l=r("div",[f.node],"CodeMirror-linewidget");f.handleMouseEvents||l.setAttribute("cm-ignore-events","true"),Fn(f,l,n,i),e.display.input.setUneditable(l),s&&f.above?o.insertBefore(l,n.gutter||n.text):o.appendChild(l),Nn(f,"redraw")}}function Fn(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function In(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!i(document.body,e.node)){var s="position: relative;";e.coverGutter&&(s+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(s+="width: "+t.display.wrapper.clientWidth+"px;"),n(t.display.measure,r("div",[e.node],null,s))}return e.height=e.node.parentNode.offsetHeight}function qn(e,t){for(var n=It(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function Rn(e){return e.lineSpace.offsetTop}function Un(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function zn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=n(e.measure,r("pre","x")),i=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,s={left:parseInt(i.paddingLeft),right:parseInt(i.paddingRight)};return isNaN(s.left)||isNaN(s.right)||(e.cachedPaddingH=s),s}function Wn(e){return Tu-e.display.nativeBarWidth}function Xn(e){return e.display.scroller.clientWidth-Wn(e)-e.display.barWidth}function Vn(e){return e.display.scroller.clientHeight-Wn(e)-e.display.barHeight}function $n(e,t,n){var r=e.options.lineWrapping,i=r&&Xn(e);if(!t.measure.heights||r&&t.measure.width!=i){var s=t.measure.heights=[];if(r){t.measure.width=i;for(var o=t.text.firstChild.getClientRects(),u=0;u<o.length-1;u++){var a=o[u],f=o[u+1];Math.abs(a.bottom-f.bottom)>2&&s.push((a.bottom+f.top)/2-n.top)}}s.push(n.bottom-n.top)}}function Jn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var r=0;r<e.rest.length;r++)if(e.rest[r]==t)return{map:e.measure.maps[r],cache:e.measure.caches[r]};for(var i=0;i<e.rest.length;i++)if(A(e.rest[i])>n)return{map:e.measure.maps[i],cache:e.measure.caches[i],before:!0}}function Kn(e,t){t=at(t);var r=A(t),i=e.display.externalMeasured=new wn(e.doc,t,r);i.lineN=r;var s=i.built=pn(e,i);return i.text=s.pre,n(e.display.lineMeasure,s.pre),i}function Qn(e,t,n,r){return Zn(e,Yn(e,t),n,r)}function Gn(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[Tr(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Yn(e,t){var n=A(t),r=Gn(e,n);r&&!r.text?r=null:r&&r.changes&&(kn(e,r,n,br(e)),e.curOp.forceUpdate=!0),r||(r=Kn(e,t));var i=Jn(r,t,n);return{line:t,view:r,rect:null,map:i.map,cache:i.cache,before:i.before,hasHeights:!1}}function Zn(e,t,n,r,i){t.before&&(n=-1);var s,o=n+(r||"");return t.cache.hasOwnProperty(o)?s=t.cache[o]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||($n(e,t.view,t.rect),t.hasHeights=!0),s=nr(e,t,n,r),s.bogus||(t.cache[o]=s)),{left:s.left,right:s.right,top:i?s.rtop:s.top,bottom:i?s.rbottom:s.bottom}}function er(e,t,n){for(var r,i,s,o,u,a,f=0;f<e.length;f+=3)if(u=e[f],a=e[f+1],t<u?(i=0,s=1,o="left"):t<a?(i=t-u,s=i+1):(f==e.length-3||t==a&&e[f+3]>t)&&(s=a-u,i=s-1,t>=a&&(o="right")),null!=i){if(r=e[f+2],u==a&&n==(r.insertLeft?"left":"right")&&(o=n),"left"==n&&0==i)for(;f&&e[f-2]==e[f-3]&&e[f-1].insertLeft;)r=e[(f-=3)+2],o="left";if("right"==n&&i==a-u)for(;f<e.length-3&&e[f+3]==e[f+4]&&!e[f+5].insertLeft;)r=e[(f+=3)+2],o="right";break}return{node:r,start:i,end:s,collapse:o,coverStart:u,coverEnd:a}}function tr(e,t){var n=Yu;if("left"==t)for(var r=0;r<e.length&&(n=e[r]).left==n.right;r++);else for(var i=e.length-1;i>=0&&(n=e[i]).left==n.right;i--);return n}function nr(e,t,n,r){var i,s=er(t.map,n,r),o=s.node,u=s.start,a=s.end,f=s.collapse;if(3==o.nodeType){for(var l=0;l<4;l++){for(;u&&x(t.line.text.charAt(s.coverStart+u));)--u;for(;s.coverStart+a<s.coverEnd&&x(t.line.text.charAt(s.coverStart+a));)++a;if(i=nu&&ru<9&&0==u&&a==s.coverEnd-s.coverStart?o.parentNode.getBoundingClientRect():tr(gu(o,u,a).getClientRects(),r),i.left||i.right||0==u)break;a=u,u-=1,f="right"}nu&&ru<11&&(i=rr(e.display.measure,i))}else{u>0&&(f=r="right");var c;i=e.options.lineWrapping&&(c=o.getClientRects()).length>1?c["right"==r?c.length-1:0]:o.getBoundingClientRect()}if(nu&&ru<9&&!u&&(!i||!i.left&&!i.right)){var h=o.parentNode.getClientRects()[0];i=h?{left:h.left,right:h.left+yr(e.display),top:h.top,bottom:h.bottom}:Yu}for(var p=i.top-t.rect.top,d=i.bottom-t.rect.top,v=(p+d)/2,m=t.view.measure.heights,g=0;g<m.length-1&&!(v<m[g]);g++);var y=g?m[g-1]:0,b=m[g],w={left:("right"==f?i.right:i.left)-t.rect.left,right:("left"==f?i.left:i.right)-t.rect.left,top:y,bottom:b};return i.left||i.right||(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=p,w.rbottom=d),w}function rr(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!zt(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,r=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*r,bottom:t.bottom*r}}function ir(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function sr(e){e.display.externalMeasure=null,t(e.display.lineMeasure);for(var n=0;n<e.display.view.length;n++)ir(e.display.view[n])}function or(e){sr(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function ur(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function ar(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function fr(e,t,n,r,i){if(!i&&t.widgets)for(var s=0;s<t.widgets.length;++s)if(t.widgets[s].above){var o=In(t.widgets[s]);n.top+=o,n.bottom+=o}if("line"==r)return n;r||(r="local");var u=dt(t);if("local"==r?u+=Rn(e.display):u-=e.display.viewOffset,"page"==r||"window"==r){var a=e.display.lineSpace.getBoundingClientRect();u+=a.top+("window"==r?0:ar());var f=a.left+("window"==r?0:ur());n.left+=f,n.right+=f}return n.top+=u,n.bottom+=u,n}function lr(e,t,n){if("div"==n)return t;var r=t.left,i=t.top;if("page"==n)r-=ur(),i-=ar();else if("local"==n||!n){var s=e.display.sizer.getBoundingClientRect();r+=s.left,i+=s.top}var o=e.display.lineSpace.getBoundingClientRect();return{left:r-o.left,top:i-o.top}}function cr(e,t,n,r,i){return r||(r=N(e.doc,t.line)),fr(e,r,Qn(e,r,t.ch,i),n)}function hr(e,t,n,r,i,s){function o(t,o){var u=Zn(e,i,t,o?"right":"left",s);return o?u.left=u.right:u.right=u.left,fr(e,r,u,n)}function u(e,t){var n=a[t],r=n.level%2;return e==yt(n)&&t&&n.level<a[t-1].level?(n=a[--t],e=bt(n)-(n.level%2?0:1),r=!0):e==bt(n)&&t<a.length-1&&n.level<a[t+1].level&&(n=a[++t],e=yt(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?o(e-1):o(e,r)}r=r||N(e.doc,t.line),i||(i=Yn(e,r));var a=kt(r),f=t.ch;if(!a)return o(f);var l=xt(a,f),c=u(f,l);return null!=Pu&&(c.other=u(f,Pu)),c}function pr(e,t){var n=0;t=I(e.doc,t),e.options.lineWrapping||(n=yr(e.display)*t.ch);var r=N(e.doc,t.line),i=dt(r)+Rn(e.display);return{left:n,right:n,top:i,bottom:i+r.height}}function dr(e,t,n,r){var i=D(e,t);return i.xRel=r,n&&(i.outside=!0),i}function vr(e,t,n){var r=e.doc;if(n+=e.display.viewOffset,n<0)return dr(r.first,0,!0,-1);var i=O(r,n),s=r.first+r.size-1;if(i>s)return dr(r.first+r.size-1,N(r,s).text.length,!0,1);t<0&&(t=0);for(var o=N(r,i);;){var u=mr(e,o,i,t,n),a=ot(o),f=a&&a.find(0,!0);if(!a||!(u.ch>f.from.ch||u.ch==f.from.ch&&u.xRel>0))return u;i=A(o=f.to.line)}}function mr(e,t,n,r,i){function s(r){var i=hr(e,D(n,r),"line",t,f);return u=!0,o>i.bottom?i.left-a:o<i.top?i.left+a:(u=!1,i.left)}var o=i-dt(t),u=!1,a=2*e.display.wrapper.clientWidth,f=Yn(e,t),l=kt(t),c=t.text.length,h=wt(t),p=Et(t),d=s(h),v=u,m=s(p),g=u;if(r>m)return dr(n,p,g,1);for(;;){if(l?p==h||p==Nt(t,h,1):p-h<=1){var y=r<d||r-d<=m-r?h:p,b=y==h?v:g,w=r-(y==h?d:m);if(g&&!l&&!/\s/.test(t.text.charAt(y))&&w>0&&y<t.text.length&&f.view.measure.heights.length>1){var E=Zn(e,f,y,"right");o<=E.bottom&&o>=E.top&&Math.abs(r-E.right)<w&&(b=!1,y++,w=r-E.right)}for(;x(t.text.charAt(y));)++y;var S=dr(n,y,b,w<-1?-1:w>1?1:0);return S}var T=Math.ceil(c/2),N=h+T;if(l){N=h;for(var C=0;C<T;++C)N=Nt(t,N,1)}var k=s(N);k>r?(p=N,m=k,(g=u)&&(m+=1e3),c=T):(h=N,d=k,v=u,c-=T)}}function gr(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==$u){$u=r("pre");for(var i=0;i<49;++i)$u.appendChild(document.createTextNode("x")),$u.appendChild(r("br"));$u.appendChild(document.createTextNode("x"))}n(e.measure,$u);var s=$u.offsetHeight/50;return s>3&&(e.cachedTextHeight=s),t(e.measure),s||1}function yr(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=r("span","xxxxxxxxxx"),i=r("pre",[t]);n(e.measure,i);var s=t.getBoundingClientRect(),o=(s.right-s.left)/10;return o>2&&(e.cachedCharWidth=o),o||10}function br(e){for(var t=e.display,n={},r={},i=t.gutters.clientLeft,s=t.gutters.firstChild,o=0;s;s=s.nextSibling,++o)n[e.options.gutters[o]]=s.offsetLeft+s.clientLeft+i,r[e.options.gutters[o]]=s.clientWidth;return{fixedPos:wr(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function wr(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function Er(e){var t=gr(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/yr(e.display)-3);return function(i){if(ht(e.doc,i))return 0;var s=0;if(i.widgets)for(var o=0;o<i.widgets.length;o++)i.widgets[o].height&&(s+=i.widgets[o].height);return n?s+(Math.ceil(i.text.length/r)||1)*t:s+t}}function Sr(e){var t=e.doc,n=Er(e);t.iter(function(e){var t=n(e);t!=e.height&&L(e,t)})}function xr(e,t,n,r){var i=e.display;if(!n&&"true"==It(t).getAttribute("cm-not-content"))return null;var s,o,u=i.lineSpace.getBoundingClientRect();try{s=t.clientX-u.left,o=t.clientY-u.top}catch(e){return null}var a,f=vr(e,s,o);if(r&&1==f.xRel&&(a=N(e.doc,f.line).text).length==f.ch){var c=l(a,a.length,e.options.tabSize)-a.length;f=D(f.line,Math.max(0,Math.round((s-zn(e.display).left)/yr(e.display))-c))}return f}function Tr(e,t){if(t>=e.display.viewTo)return null;if(t-=e.display.viewFrom,t<0)return null;for(var n=e.display.view,r=0;r<n.length;r++)if(t-=n[r].size,t<0)return r}function Nr(e){e.display.input.showSelection(e.display.input.prepareSelection())}function Cr(e,t){for(var n=e.doc,r={},i=r.cursors=document.createDocumentFragment(),s=r.selection=document.createDocumentFragment(),o=0;o<n.sel.ranges.length;o++)if(t!==!1||o!=n.sel.primIndex){var u=n.sel.ranges[o];if(!(u.from().line>=e.display.viewTo||u.to().line<e.display.viewFrom)){var a=u.empty();(a||e.options.showCursorWhenSelecting)&&kr(e,u.head,i),a||Lr(e,u,s)}}return r}function kr(e,t,n){var i=hr(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),s=n.appendChild(r("div"," ","CodeMirror-cursor"));if(s.style.left=i.left+"px",s.style.top=i.top+"px",s.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var o=n.appendChild(r("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=i.other.left+"px",o.style.top=i.other.top+"px",o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function Lr(e,t,n){function i(e,t,n,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),a.appendChild(r("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?c-e:n)+"px;\n                             height: "+(i-t)+"px"))}function s(t,n,r){function s(n,r){return cr(e,D(t,n),"div",f,r)}var o,a,f=N(u,t),h=f.text.length;return gt(kt(f),n||0,null==r?h:r,function(e,t,u){var f,p,d,v=s(e,"left");if(e==t)f=v,p=d=v.left;else{if(f=s(t-1,"right"),"rtl"==u){var m=v;v=f,f=m}p=v.left,d=f.right}null==n&&0==e&&(p=l),f.top-v.top>3&&(i(p,v.top,null,v.bottom),p=l,v.bottom<f.top&&i(p,v.bottom,null,f.top)),null==r&&t==h&&(d=c),(!o||v.top<o.top||v.top==o.top&&v.left<o.left)&&(o=v),(!a||f.bottom>a.bottom||f.bottom==a.bottom&&f.right>a.right)&&(a=f),p<l+1&&(p=l),i(p,f.top,d-p,f.bottom)}),{start:o,end:a}}var o=e.display,u=e.doc,a=document.createDocumentFragment(),f=zn(e.display),l=f.left,c=Math.max(o.sizerWidth,Xn(e)-o.sizer.offsetLeft)-f.right,h=t.from(),p=t.to();if(h.line==p.line)s(h.line,h.ch,p.ch);else{var d=N(u,h.line),v=N(u,p.line),m=at(d)==at(v),g=s(h.line,h.ch,m?d.text.length+1:null).end,y=s(p.line,m?0:null,p.ch).start;m&&(g.top<y.top-2?(i(g.right,g.top,null,g.bottom),i(l,y.top,y.left,y.bottom)):i(g.right,g.top,y.left-g.right,g.bottom)),g.bottom<y.top&&i(l,g.bottom,null,y.top)}n.appendChild(a)}function Ar(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function Or(e){e.state.focused||(e.display.input.focus(),_r(e))}function Mr(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,Dr(e))},100)}function _r(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(Ot(e,"focus",e,t),e.state.focused=!0,o(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),iu&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),Ar(e))}function Dr(e,t){e.state.delayingBlurEvent||(e.state.focused&&(Ot(e,"blur",e,t),e.state.focused=!1,wu(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Pr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var r=wr(t)-t.scroller.scrollLeft+e.doc.scrollLeft,i=t.gutters.offsetWidth,s=r+"px",o=0;o<n.length;o++)if(!n[o].hidden){e.options.fixedGutter&&(n[o].gutter&&(n[o].gutter.style.left=s),n[o].gutterBackground&&(n[o].gutterBackground.style.left=s));var u=n[o].alignable;if(u)for(var a=0;a<u.length;a++)u[a].style.left=s}e.options.fixedGutter&&(t.gutters.style.left=r+i+"px")}}function Hr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=_(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var s=i.measure.appendChild(r("div",[r("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=s.firstChild.offsetWidth,u=s.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-u)+1,i.lineNumWidth=i.lineNumInnerWidth+u,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",Ci(e),!0}return!1}function Br(e){for(var t=e.display,n=t.lineDiv.offsetTop,r=0;r<t.view.length;r++){var i=t.view[r],s=void 0;if(!i.hidden){if(nu&&ru<8){var o=i.node.offsetTop+i.node.offsetHeight;s=o-n,n=o}else{var u=i.node.getBoundingClientRect();s=u.bottom-u.top}var a=i.line.height-s;if(s<2&&(s=gr(t)),(a>.001||a<-0.001)&&(L(i.line,s),jr(i.line),i.rest))for(var f=0;f<i.rest.length;f++)jr(i.rest[f])}}}function jr(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t)e.widgets[t].height=e.widgets[t].node.parentNode.offsetHeight}function Fr(e,t,n){var r=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;r=Math.floor(r-Rn(e));var i=n&&null!=n.bottom?n.bottom:r+e.wrapper.clientHeight,s=O(t,r),o=O(t,i);if(n&&n.ensure){var u=n.ensure.from.line,a=n.ensure.to.line;u<s?(s=u,o=O(t,dt(N(t,u))+e.wrapper.clientHeight)):Math.min(a,t.lastLine())>=o&&(s=O(t,dt(N(t,a))-e.wrapper.clientHeight),o=a)}return{from:s,to:Math.max(o,s+1)}}function Ir(e,t){Math.abs(e.doc.scrollTop-t)<2||(e.doc.scrollTop=t,Zo||Ti(e,{top:t}),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t),e.display.scrollbars.setScrollTop(t),Zo&&Ti(e),bi(e,100))}function qr(e,t,n){(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)||(t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,Pr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Rr(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function Ur(e){var t=Rr(e);return t.x*=ea,t.y*=ea,t}function zr(e,t){var n=Rr(t),r=n.x,i=n.y,s=e.display,o=s.scroller,u=o.scrollWidth>o.clientWidth,a=o.scrollHeight>o.clientHeight;if(r&&u||i&&a){if(i&&pu&&iu)e:for(var f=t.target,l=s.view;f!=o;f=f.parentNode)for(var c=0;c<l.length;c++)if(l[c].node==f){e.display.currentWheelTarget=f;break e}if(r&&!Zo&&!uu&&null!=ea)return i&&a&&Ir(e,Math.max(0,Math.min(o.scrollTop+i*ea,o.scrollHeight-o.clientHeight))),qr(e,Math.max(0,Math.min(o.scrollLeft+r*ea,o.scrollWidth-o.clientWidth))),(!i||i&&a)&&Ht(t),void (s.wheelStartX=null);if(i&&null!=ea){var h=i*ea,p=e.doc.scrollTop,d=p+s.wrapper.clientHeight;h<0?p=Math.max(0,p+h-50):d=Math.min(e.doc.height,d+h+50),Ti(e,{top:p,bottom:d})}Zu<20&&(null==s.wheelStartX?(s.wheelStartX=o.scrollLeft,s.wheelStartY=o.scrollTop,s.wheelDX=r,s.wheelDY=i,setTimeout(function(){if(null!=s.wheelStartX){var e=o.scrollLeft-s.wheelStartX,t=o.scrollTop-s.wheelStartY,n=t&&s.wheelDY&&t/s.wheelDY||e&&s.wheelDX&&e/s.wheelDX;s.wheelStartX=s.wheelStartY=null,n&&(ea=(ea*Zu+n)/(Zu+1),++Zu)}},200)):(s.wheelDX+=r,s.wheelDY+=i))}}function Wr(e){var t=e.display,n=t.gutters.offsetWidth,r=Math.round(e.doc.height+Un(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:r,scrollHeight:r+Wn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}function Xr(e,t){t||(t=Wr(e));var n=e.display.barWidth,r=e.display.barHeight;Vr(e,t);for(var i=0;i<4&&n!=e.display.barWidth||r!=e.display.barHeight;i++)n!=e.display.barWidth&&e.options.lineWrapping&&Br(e),Vr(e,Wr(e)),n=e.display.barWidth,r=e.display.barHeight}function Vr(e,t){var n=e.display,r=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=r.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=r.bottom)+"px",n.heightForcer.style.borderBottom=r.bottom+"px solid transparent",r.right&&r.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=r.bottom+"px",n.scrollbarFiller.style.width=r.right+"px"):n.scrollbarFiller.style.display="",r.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=r.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}function $r(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&wu(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new ra[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),ju(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?qr(e,t):Ir(e,t)},e),e.display.scrollbars.addClass&&o(e.display.wrapper,e.display.scrollbars.addClass)}function Jr(e,t){if(!Mt(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),s=null;if(t.top+i.top<0?s=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(s=!1),null!=s&&!lu){var o=r("div","​",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-Rn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Wn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: 2px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(s),e.display.lineSpace.removeChild(o)}}}function Kr(e,t,n,r){null==r&&(r=0);for(var i,s=0;s<5;s++){var o=!1;i=hr(e,t);var u=n&&n!=t?hr(e,n):i,a=Gr(e,Math.min(i.left,u.left),Math.min(i.top,u.top)-r,Math.max(i.left,u.left),Math.max(i.bottom,u.bottom)+r),f=e.doc.scrollTop,l=e.doc.scrollLeft;if(null!=a.scrollTop&&(Ir(e,a.scrollTop),Math.abs(e.doc.scrollTop-f)>1&&(o=!0)),null!=a.scrollLeft&&(qr(e,a.scrollLeft),Math.abs(e.doc.scrollLeft-l)>1&&(o=!0)),!o)break}return i}function Qr(e,t,n,r,i){var s=Gr(e,t,n,r,i);null!=s.scrollTop&&Ir(e,s.scrollTop),null!=s.scrollLeft&&qr(e,s.scrollLeft)}function Gr(e,t,n,r,i){var s=e.display,o=gr(e.display);n<0&&(n=0);var u=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:s.scroller.scrollTop,a=Vn(e),f={};i-n>a&&(i=n+a);var l=e.doc.height+Un(s),c=n<o,h=i>l-o;if(n<u)f.scrollTop=c?0:n;else if(i>u+a){var p=Math.min(n,(h?l:i)-a);p!=u&&(f.scrollTop=p)}var d=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:s.scroller.scrollLeft,v=Xn(e)-(e.options.fixedGutter?s.gutters.offsetWidth:0),m=r-t>v;return m&&(r=t+v),t<10?f.scrollLeft=0:t<d?f.scrollLeft=Math.max(0,t-(m?0:10)):r>v+d-3&&(f.scrollLeft=r+(m?0:10)-v),f}function Yr(e,t,n){null==t&&null==n||ei(e),null!=t&&(e.curOp.scrollLeft=(null==e.curOp.scrollLeft?e.doc.scrollLeft:e.curOp.scrollLeft)+t),null!=n&&(e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+n)}function Zr(e){ei(e);var t=e.getCursor(),n=t,r=t;e.options.lineWrapping||(n=t.ch?D(t.line,t.ch-1):t,r=D(t.line,t.ch+1)),e.curOp.scrollToPos={from:n,to:r,margin:e.options.cursorScrollMargin,isCursor:!0}}function ei(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=pr(e,t.from),r=pr(e,t.to),i=Gr(e,Math.min(n.left,r.left),Math.min(n.top,r.top)-t.margin,Math.max(n.right,r.right),Math.max(n.bottom,r.bottom)+t.margin);e.scrollTo(i.scrollLeft,i.scrollTop)}}function ti(e){e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++ia},Sn(e.curOp)}function ni(e){var t=e.curOp;Tn(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;ri(e)})}function ri(e){for(var t=e.ops,n=0;n<t.length;n++)ii(t[n]);for(var r=0;r<t.length;r++)si(t[r]);for(var i=0;i<t.length;i++)oi(t[i]);for(var s=0;s<t.length;s++)ui(t[s]);for(var o=0;o<t.length;o++)ai(t[o])}function ii(e){var t=e.cm,n=t.display;Ei(t),e.updateMaxLine&&mt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new sa(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function si(e){e.updatedDisplay=e.mustUpdate&&Si(e.cm,e.update)}function oi(e){var t=e.cm,n=t.display;e.updatedDisplay&&Br(t),e.barMeasure=Wr(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Qn(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Wn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-Xn(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection(e.focus))}function ui(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&qr(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==s()&&(!document.hasFocus||document.hasFocus());e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Xr(t,e.barMeasure),e.updatedDisplay&&ki(t,e.barMeasure),e.selectionChanged&&Ar(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&Or(e.cm)}function ai(e){var t=e.cm,n=t.display,r=t.doc;if(e.updatedDisplay&&xi(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null==e.scrollTop||n.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(r.scrollTop=Math.max(0,Math.min(n.scroller.scrollHeight-n.scroller.clientHeight,e.scrollTop)),n.scrollbars.setScrollTop(r.scrollTop),n.scroller.scrollTop=r.scrollTop),null==e.scrollLeft||n.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(r.scrollLeft=Math.max(0,Math.min(n.scroller.scrollWidth-n.scroller.clientWidth,e.scrollLeft)),n.scrollbars.setScrollLeft(r.scrollLeft),n.scroller.scrollLeft=r.scrollLeft,Pr(t)),e.scrollToPos){var i=Kr(t,I(r,e.scrollToPos.from),I(r,e.scrollToPos.to),e.scrollToPos.margin);e.scrollToPos.isCursor&&t.state.focused&&Jr(t,i)}var s=e.maybeHiddenMarkers,o=e.maybeUnhiddenMarkers;if(s)for(var u=0;u<s.length;++u)s[u].lines.length||Ot(s[u],"hide");if(o)for(var a=0;a<o.length;++a)o[a].lines.length&&Ot(o[a],"unhide");n.wrapper.offsetHeight&&(r.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&Ot(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function fi(e,t){if(e.curOp)return t();ti(e);try{return t()}finally{ni(e)}}function li(e,t){return function(){if(e.curOp)return t.apply(e,arguments);ti(e);try{return t.apply(e,arguments)}finally{ni(e)}}}function ci(e){return function(){if(this.curOp)return e.apply(this,arguments);ti(this);try{return e.apply(this,arguments)}finally{ni(this)}}}function hi(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);ti(t);try{return e.apply(this,arguments)}finally{ni(t)}}}function pi(e,t,n,r){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),r||(r=0);var i=e.display;if(r&&n<i.viewTo&&(null==i.updateLineNumbers||i.updateLineNumbers>t)&&(i.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=i.viewTo)Du&&lt(e.doc,t)<i.viewTo&&vi(e);else if(n<=i.viewFrom)Du&&ct(e.doc,n+r)>i.viewFrom?vi(e):(i.viewFrom+=r,i.viewTo+=r);else if(t<=i.viewFrom&&n>=i.viewTo)vi(e);else if(t<=i.viewFrom){var s=mi(e,n,n+r,1);s?(i.view=i.view.slice(s.index),i.viewFrom=s.lineN,i.viewTo+=r):vi(e)}else if(n>=i.viewTo){var o=mi(e,t,t,-1);o?(i.view=i.view.slice(0,o.index),i.viewTo=o.lineN):vi(e)}else{var u=mi(e,t,t,-1),a=mi(e,n,n+r,1);u&&a?(i.view=i.view.slice(0,u.index).concat(En(e,u.lineN,a.lineN)).concat(i.view.slice(a.index)),i.viewTo+=r):vi(e)}var f=i.externalMeasured;f&&(n<f.lineN?f.lineN+=r:t<f.lineN+f.size&&(i.externalMeasured=null))}function di(e,t,n){e.curOp.viewChanged=!0;var r=e.display,i=e.display.externalMeasured;if(i&&t>=i.lineN&&t<i.lineN+i.size&&(r.externalMeasured=null),!(t<r.viewFrom||t>=r.viewTo)){var s=r.view[Tr(e,t)];if(null!=s.node){var o=s.changes||(s.changes=[]);h(o,n)==-1&&o.push(n)}}}function vi(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function mi(e,t,n,r){var i,s=Tr(e,t),o=e.display.view;if(!Du||n==e.doc.first+e.doc.size)return{index:s,lineN:n};for(var u=e.display.viewFrom,a=0;a<s;a++)u+=o[a].size;if(u!=t){if(r>0){if(s==o.length-1)return null;i=u+o[s].size-t,s++}else i=u-t;t+=i,n+=i}for(;lt(e.doc,n)!=n;){if(s==(r<0?0:o.length-1))return null;n+=r*o[s-(r<0?1:0)].size,s+=r}return{index:s,lineN:n}}function gi(e,t,n){var r=e.display,i=r.view;0==i.length||t>=r.viewTo||n<=r.viewFrom?(r.view=En(e,t,n),r.viewFrom=t):(r.viewFrom>t?r.view=En(e,t,r.viewFrom).concat(r.view):r.viewFrom<t&&(r.view=r.view.slice(Tr(e,t))),r.viewFrom=t,r.viewTo<n?r.view=r.view.concat(En(e,r.viewTo,n)):r.viewTo>n&&(r.view=r.view.slice(0,Tr(e,n)))),r.viewTo=n}function yi(e){for(var t=e.display.view,n=0,r=0;r<t.length;r++){var i=t[r];i.hidden||i.node&&!i.changes||++n}return n}function bi(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.viewTo&&e.state.highlight.set(t,a(wi,e))}function wi(e){var t=e.doc;if(t.frontier<t.first&&(t.frontier=t.first),!(t.frontier>=e.display.viewTo)){var n=+(new Date)+e.options.workTime,r=Kt(t.mode,en(e,t.frontier)),i=[];t.iter(t.frontier,Math.min(t.first+t.size,e.display.viewTo+500),function(s){if(t.frontier>=e.display.viewFrom){var o=s.styles,u=s.text.length>e.options.maxHighlightLength,a=Yt(e,s,u?Kt(t.mode,r):r,!0);s.styles=a.styles;var f=s.styleClasses,l=a.classes;l?s.styleClasses=l:f&&(s.styleClasses=null);for(var c=!o||o.length!=s.styles.length||f!=l&&(!f||!l||f.bgClass!=l.bgClass||f.textClass!=l.textClass),h=0;!c&&h<o.length;++h)c=o[h]!=s.styles[h];c&&i.push(t.frontier),s.stateAfter=u?r:Kt(t.mode,r)}else s.text.length<=e.options.maxHighlightLength&&tn(e,s.text,r),s.stateAfter=t.frontier%5==0?Kt(t.mode,r):null;if(++t.frontier,+(new Date)>n)return bi(e,e.options.workDelay),!0}),i.length&&fi(e,function(){for(var t=0;t<i.length;t++)di(e,i[t],"text")})}}function Ei(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Wn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Wn(e)+"px",t.scrollbarsClipped=!0)}function Si(e,n){var r=e.display,i=e.doc;if(n.editorIsHidden)return vi(e),!1;if(!n.force&&n.visible.from>=r.viewFrom&&n.visible.to<=r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo)&&r.renderedView==r.view&&0==yi(e))return!1;Hr(e)&&(vi(e),n.dims=br(e));var o=i.first+i.size,u=Math.max(n.visible.from-e.options.viewportMargin,i.first),a=Math.min(o,n.visible.to+e.options.viewportMargin);r.viewFrom<u&&u-r.viewFrom<20&&(u=Math.max(i.first,r.viewFrom)),r.viewTo>a&&r.viewTo-a<20&&(a=Math.min(o,r.viewTo)),Du&&(u=lt(e.doc,u),a=ct(e.doc,a));var f=u!=r.viewFrom||a!=r.viewTo||r.lastWrapHeight!=n.wrapperHeight||r.lastWrapWidth!=n.wrapperWidth;gi(e,u,a),r.viewOffset=dt(N(e.doc,r.viewFrom)),e.display.mover.style.top=r.viewOffset+"px";var l=yi(e);if(!f&&0==l&&!n.force&&r.renderedView==r.view&&(null==r.updateLineNumbers||r.updateLineNumbers>=r.viewTo))return!1;var c=s();return l>4&&(r.lineDiv.style.display="none"),Ni(e,r.updateLineNumbers,n.dims),l>4&&(r.lineDiv.style.display=""),r.renderedView=r.view,c&&s()!=c&&c.offsetHeight&&c.focus(),t(r.cursorDiv),t(r.selectionDiv),r.gutters.style.height=r.sizer.style.minHeight=0,f&&(r.lastWrapHeight=n.wrapperHeight,r.lastWrapWidth=n.wrapperWidth,bi(e,400)),r.updateLineNumbers=null,!0}function xi(e,t){for(var n=t.viewport,r=!0;(r&&e.options.lineWrapping&&t.oldDisplayWidth!=Xn(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Un(e.display)-Vn(e),n.top)}),t.visible=Fr(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&Si(e,t);r=!1){Br(e);var i=Wr(e);Nr(e),Xr(e,i),ki(e,i)}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function Ti(e,t){var n=new sa(e,t);if(Si(e,n)){Br(e),xi(e,n);var r=Wr(e);Nr(e),Xr(e,r),ki(e,r),n.finish()}}function Ni(e,n,r){function i(t){var n=t.nextSibling;return iu&&pu&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var s=e.display,o=e.options.lineNumbers,u=s.lineDiv,a=u.firstChild,f=s.view,l=s.viewFrom,c=0;c<f.length;c++){var p=f[c];if(!p.hidden)if(p.node&&p.node.parentNode==u){for(;a!=p.node;)a=i(a);var d=o&&null!=n&&n<=l&&p.lineNumber;p.changes&&(h(p.changes,"gutter")>-1&&(d=!1),kn(e,p,l,r)),d&&(t(p.lineNumber),p.lineNumber.appendChild(document.createTextNode(_(e.options,l)))),a=p.node.nextSibling}else{var v=Hn(e,p,l,r);u.insertBefore(v,a)}l+=p.size}for(;a;)a=i(a)}function Ci(e){var t=e.display.gutters.offsetWidth;e.display.sizer.style.marginLeft=t+"px"}function ki(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Wn(e)+"px"}function Li(e){var n=e.display.gutters,i=e.options.gutters;t(n);for(var s=0;s<i.length;++s){var o=i[s],u=n.appendChild(r("div",null,"CodeMirror-gutter "+o));"CodeMirror-linenumbers"==o&&(e.display.lineGutter=u,u.style.width=(e.display.lineNumWidth||1)+"px")}n.style.display=s?"":"none",Ci(e)}function Ai(e){var t=h(e.gutters,"CodeMirror-linenumbers");t==-1&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function Oi(e,t){this.ranges=e,this.primIndex=t}function Mi(e,t){this.anchor=e,this.head=t}function _i(e,t){var n=e[t];e.sort(function(e,t){return P(e.from(),t.from())}),t=h(e,n);for(var r=1;r<e.length;r++){var i=e[r],s=e[r-1];if(P(s.to(),i.from())>=0){var o=j(s.from(),i.from()),u=B(s.to(),i.to()),a=s.empty()?i.from()==i.head:s.from()==s.head;r<=t&&--t,e.splice(--r,2,new Mi(a?u:o,a?o:u))}}return new Oi(e,t)}function Di(e,t){return new Oi([new Mi(e,t||e)],0)}function Pi(e){return e.text?D(e.from.line+e.text.length-1,v(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Hi(e,t){if(P(e,t.from)<0)return e;if(P(e,t.to)<=0)return Pi(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,r=e.ch;return e.line==t.to.line&&(r+=Pi(t).ch-t.to.ch),D(n,r)}function Bi(e,t){for(var n=[],r=0;r<e.sel.ranges.length;r++){var i=e.sel.ranges[r];n.push(new Mi(Hi(i.anchor,t),Hi(i.head,t)))}return _i(n,e.sel.primIndex)}function ji(e,t,n){return e.line==t.line?D(n.line,e.ch-t.ch+n.ch):D(n.line+(e.line-t.line),e.ch)}function Fi(e,t,n){for(var r=[],i=D(e.first,0),s=i,o=0;o<t.length;o++){var u=t[o],a=ji(u.from,i,s),f=ji(Pi(u),i,s);if(i=u.to,s=f,"around"==n){var l=e.sel.ranges[o],c=P(l.head,l.anchor)<0;r[o]=new Mi(c?f:a,c?a:f)}else r[o]=new Mi(a,a)}return new Oi(r,e.sel.primIndex)}function Ii(e){e.doc.mode=$t(e.options,e.doc.modeOption),qi(e)}function qi(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,bi(e,100),e.state.modeGen++,e.curOp&&pi(e)}function Ri(e,t){return 0==t.from.ch&&0==t.to.ch&&""==v(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Ui(e,t,n,r){function i(e){return n?n[e]:null}function s(e,n,i){ln(e,n,i,r),Nn(e,"change",e,t)}function o(e,t){for(var n=[],s=e;s<t;++s)n.push(new fn(f[s],i(s),r));return n}var u=t.from,a=t.to,f=t.text,l=N(e,u.line),c=N(e,a.line),h=v(f),p=i(f.length-1),d=a.line-u.line;if(t.full)e.insert(0,o(0,f.length)),e.remove(f.length,e.size-f.length);else if(Ri(e,t)){var m=o(0,f.length-1);s(c,c.text,p),d&&e.remove(u.line,d),m.length&&e.insert(u.line,m)}else if(l==c)if(1==f.length)s(l,l.text.slice(0,u.ch)+h+l.text.slice(a.ch),p);else{var g=o(1,f.length-1);g.push(new fn(h+l.text.slice(a.ch),p,r)),s(l,l.text.slice(0,u.ch)+f[0],i(0)),e.insert(u.line+1,g)}else if(1==f.length)s(l,l.text.slice(0,u.ch)+f[0]+c.text.slice(a.ch),i(0)),e.remove(u.line+1,d);else{s(l,l.text.slice(0,u.ch)+f[0],i(0)),s(c,h+c.text.slice(a.ch),p);var y=o(1,f.length-1);d>1&&e.remove(u.line+1,d-1),e.insert(u.line+1,y)}Nn(e,"change",e,t)}function zi(e,t,n){function r(e,i,s){if(e.linked)for(var o=0;o<e.linked.length;++o){var u=e.linked[o];if(u.doc!=i){var a=s&&u.sharedHist;n&&!a||(t(u.doc,a),r(u.doc,e,a))}}}r(e,null,!0)}function Wi(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,Sr(e),Ii(e),e.options.lineWrapping||mt(e),e.options.mode=t.modeOption,pi(e)}function Xi(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Vi(e,t){var n={from:H(t.from),to:Pi(t),text:C(e,t.from,t.to)};return Zi(e,n,t.from.line,t.to.line+1),zi(e,function(e){return Zi(e,n,t.from.line,t.to.line+1)},!0),n}function $i(e){for(;e.length;){var t=v(e);if(!t.ranges)break;e.pop()}}function Ji(e,t){return t?($i(e.done),v(e.done)):e.done.length&&!v(e.done).ranges?v(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),v(e.done)):void 0}function Ki(e,t,n,r){var i=e.history;i.undone.length=0;var s,o,u=+(new Date);if((i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&e.cm&&i.lastModTime>u-e.cm.options.historyEventDelay||"*"==t.origin.charAt(0)))&&(s=Ji(i,i.lastOp==r)))o=v(s.changes),0==P(t.from,t.to)&&0==P(t.from,o.to)?o.to=Pi(t):s.changes.push(Vi(e,t));else{var a=v(i.done);for(a&&a.ranges||Yi(e.sel,i.done),s={changes:[Vi(e,t)],generation:i.generation},i.done.push(s);i.done.length>i.undoDepth;)i.done.shift(),i.done[0].ranges||i.done.shift()}i.done.push(n),i.generation=++i.maxGeneration,i.lastModTime=i.lastSelTime=u,i.lastOp=i.lastSelOp=r,i.lastOrigin=i.lastSelOrigin=t.origin,o||Ot(e,"historyAdded")}function Qi(e,t,n,r){var i=t.charAt(0);return"*"==i||"+"==i&&n.ranges.length==r.ranges.length&&n.somethingSelected()==r.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}function Gi(e,t,n,r){var i=e.history,s=r&&r.origin;n==i.lastSelOp||s&&i.lastSelOrigin==s&&(i.lastModTime==i.lastSelTime&&i.lastOrigin==s||Qi(e,s,v(i.done),t))?i.done[i.done.length-1]=t:Yi(t,i.done),i.lastSelTime=+(new Date),i.lastSelOrigin=s,i.lastSelOp=n,r&&r.clearRedo!==!1&&$i(i.undone)}function Yi(e,t){var n=v(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Zi(e,t,n,r){var i=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[s]=n.markedSpans),++s})}function es(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function ts(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=[],i=0;i<t.text.length;++i)r.push(es(n[i]));return r}function ns(e,t){var n=ts(e,t),r=Q(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var s=n[i],o=r[i];if(s&&o)e:for(var u=0;u<o.length;++u){for(var a=o[u],f=0;f<s.length;++f)if(s[f].marker==a.marker)continue e;s.push(a)}else o&&(n[i]=o)}return n}function rs(e,t,n){for(var r=[],i=0;i<e.length;++i){var s=e[i];if(s.ranges)r.push(n?Oi.prototype.deepCopy.call(s):s);else{var o=s.changes,u=[];r.push({changes:u});for(var a=0;a<o.length;++a){var f=o[a],l=void 0;if(u.push({from:f.from,to:f.to,text:f.text}),t)for(var c in f)(l=c.match(/^spans_(\d+)$/))&&h(t,Number(l[1]))>-1&&(v(u)[c]=f[c],delete f[c])}}}return r}function is(e,t,n,r){if(e.cm&&e.cm.display.shift||e.extend){var i=t.anchor;if(r){var s=P(n,i)<0;s!=P(r,i)<0?(i=n,n=r):s!=P(n,r)<0&&(n=r)}return new Mi(i,n)}return new Mi(r||n,n)}function ss(e,t,n,r){cs(e,new Oi([is(e,e.sel.primary(),t,n)],0),r)}function os(e,t,n){for(var r=[],i=0;i<e.sel.ranges.length;i++)r[i]=is(e,e.sel.ranges[i],t[i],null);var s=_i(r,e.sel.primIndex);cs(e,s,n)}function us(e,t,n,r){var i=e.sel.ranges.slice(0);i[t]=n,cs(e,_i(i,e.sel.primIndex),r)}function as(e,t,n,r){cs(e,Di(t,n),r)}function fs(e,t,n){var r={ranges:t.ranges,update:function(t){var n=this;this.ranges=[];for(var r=0;r<t.length;r++)n.ranges[r]=new Mi(I(e,t[r].anchor),I(e,t[r].head))},origin:n&&n.origin};return Ot(e,"beforeSelectionChange",e,r),e.cm&&Ot(e.cm,"beforeSelectionChange",e.cm,r),r.ranges!=t.ranges?_i(r.ranges,r.ranges.length-1):t}function ls(e,t,n){var r=e.history.done,i=v(r);i&&i.ranges?(r[r.length-1]=t,hs(e,t,n)):cs(e,t,n)}function cs(e,t,n){hs(e,t,n),Gi(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function hs(e,t,n){(Dt(e,"beforeSelectionChange")||e.cm&&Dt(e.cm,"beforeSelectionChange"))&&(t=fs(e,t,n));var r=n&&n.bias||(P(t.primary().head,e.sel.primary().head)<0?-1:1);ps(e,vs(e,t,r,!0)),n&&n.scroll===!1||!e.cm||Zr(e.cm)}function ps(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=!0,_t(e.cm)),Nn(e,"cursorActivity",e))}function ds(e){ps(e,vs(e,e.sel,null,!1),Cu)}function vs(e,t,n,r){for(var i,s=0;s<t.ranges.length;s++){var o=t.ranges[s],u=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[s],a=gs(e,o.anchor,u&&u.anchor,n,r),f=gs(e,o.head,u&&u.head,n,r);(i||a!=o.anchor||f!=o.head)&&(i||(i=t.ranges.slice(0,s)),i[s]=new Mi(a,f))}return i?_i(i,t.primIndex):t}function ms(e,t,n,r,i){var s=N(e,t.line);if(s.markedSpans)for(var o=0;o<s.markedSpans.length;++o){var u=s.markedSpans[o],a=u.marker;if((null==u.from||(a.inclusiveLeft?u.from<=t.ch:u.from<t.ch))&&(null==u.to||(a.inclusiveRight?u.to>=t.ch:u.to>t.ch))){if(i&&(Ot(a,"beforeCursorEnter"),a.explicitlyCleared)){if(s.markedSpans){--o;continue}break}if(!a.atomic)continue;if(n){var f=a.find(r<0?1:-1),l=void 0;if((r<0?a.inclusiveRight:a.inclusiveLeft)&&(f=ys(e,f,-r,f&&f.line==t.line?s:null)),f&&f.line==t.line&&(l=P(f,n))&&(r<0?l<0:l>0))return ms(e,f,t,r,i)}var c=a.find(r<0?-1:1);return(r<0?a.inclusiveLeft:a.inclusiveRight)&&(c=ys(e,c,r,c.line==t.line?s:null)),c?ms(e,c,t,r,i):null}}return t}function gs(e,t,n,r,i){var s=r||1,o=ms(e,t,n,s,i)||!i&&ms(e,t,n,s,!0)||ms(e,t,n,-s,i)||!i&&ms(e,t,n,-s,!0);return o?o:(e.cantEdit=!0,D(e.first,0))}function ys(e,t,n,r){return n<0&&0==t.ch?t.line>e.first?I(e,D(t.line-1)):null:n>0&&t.ch==(r||N(e,t.line)).text.length?t.line<e.first+e.size-1?D(t.line+1,0):null:new D(t.line,t.ch+n)}function bs(e){e.setSelection(D(e.firstLine(),0),D(e.lastLine()),Cu)}function ws(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return r.canceled=!0}};return n&&(r.update=function(t,n,i,s){t&&(r.from=I(e,t)),n&&(r.to=I(e,n)),i&&(r.text=i),void 0!==s&&(r.origin=s)}),Ot(e,"beforeChange",e,r),e.cm&&Ot(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function Es(e,t,n){if(e.cm){if(!e.cm.curOp)return li(e.cm,Es)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(Dt(e,"beforeChange")||e.cm&&Dt(e.cm,"beforeChange"))||(t=ws(e,t,!0))){var r=_u&&!n&&Y(e,t.from,t.to);if(r)for(var i=r.length-1;i>=0;--i)Ss(e,{from:r[i].from,to:r[i].to,text:i?[""]:t.text});else Ss(e,t)}}function Ss(e,t){if(1!=t.text.length||""!=t.text[0]||0!=P(t.from,t.to)){var n=Bi(e,t);Ki(e,t,n,e.cm?e.cm.curOp.id:NaN),Ns(e,t,n,Q(e,t));var r=[];zi(e,function(e,n){n||h(r,e.history)!=-1||(Os(e.history,t),r.push(e.history)),Ns(e,t,null,Q(e,t))})}}function xs(e,t,n){if(!e.cm||!e.cm.state.suppressEdits||n){for(var r,i=e.history,s=e.sel,o="undo"==t?i.done:i.undone,u="undo"==t?i.undone:i.done,a=0;a<o.length&&(r=o[a],n?!r.ranges||r.equals(e.sel):r.ranges);a++);if(a!=o.length){for(i.lastOrigin=i.lastSelOrigin=null;r=o.pop(),r.ranges;){if(Yi(r,u),n&&!r.equals(e.sel))return void cs(e,r,{clearRedo:!1});s=r}var f=[];Yi(s,u),u.push({changes:f,generation:i.generation}),i.generation=r.generation||++i.maxGeneration;for(var l=Dt(e,"beforeChange")||e.cm&&Dt(e.cm,"beforeChange"),c=function(n){var i=r.changes[n];if(i.origin=t,l&&!ws(e,i,!1))return o.length=0,{};f.push(Vi(e,i));var s=n?Bi(e,i):v(o);Ns(e,i,s,ns(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:Pi(i)});var u=[];zi(e,function(e,t){t||h(u,e.history)!=-1||(Os(e.history,i),u.push(e.history)),Ns(e,i,null,ns(e,i))})},p=r.changes.length-1;p>=0;--p){var d=c(p);if(d)return d.v}}}}function Ts(e,t){if(0!=t&&(e.first+=t,e.sel=new Oi(m(e.sel.ranges,function(e){return new Mi(D(e.anchor.line+t,e.anchor.ch),D(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){pi(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,r=n.viewFrom;r<n.viewTo;r++)di(e.cm,r,"gutter")}}function Ns(e,t,n,r){if(e.cm&&!e.cm.curOp)return li(e.cm,Ns)(e,t,n,r);if(t.to.line<e.first)return void Ts(e,t.text.length-1-(t.to.line-t.from.line));if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Ts(e,i),t={from:D(e.first,0),to:D(t.to.line+i,t.to.ch),text:[v(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:D(s,N(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=C(e,t.from,t.to),n||(n=Bi(e,t)),e.cm?Cs(e.cm,t,r):Ui(e,t,r),hs(e,n,Cu)}}function Cs(e,t,n){var r=e.doc,i=e.display,s=t.from,o=t.to,u=!1,a=s.line;e.options.lineWrapping||(a=A(at(N(r,s.line))),r.iter(a,o.line+1,function(e){if(e==i.maxLine)return u=!0,!0})),r.sel.contains(t.from,t.to)>-1&&_t(e),Ui(r,t,n,Er(e)),e.options.lineWrapping||(r.iter(a,s.line+t.text.length,function(e){var t=vt(e);t>i.maxLineLength&&(i.maxLine=e,i.maxLineLength=t,i.maxLineChanged=!0,u=!1)}),u&&(e.curOp.updateMaxLine=!0)),r.frontier=Math.min(r.frontier,s.line),bi(e,400);var f=t.text.length-(o.line-s.line)-1;t.full?pi(e):s.line!=o.line||1!=t.text.length||Ri(e.doc,t)?pi(e,s.line,o.line+1,f):di(e,s.line,"text");var l=Dt(e,"changes"),c=Dt(e,"change");if(c||l){var h={from:s,to:o,text:t.text,removed:t.removed,origin:t.origin};c&&Nn(e,"change",e,h),l&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(h)}e.display.selForContextMenu=null}function ks(e,t,n,r,i){if(r||(r=n),P(r,n)<0){var s=r;r=n,n=s}"string"==typeof t&&(t=e.splitLines(t)),Es(e,{from:n,to:r,text:t,origin:i})}function Ls(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function As(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i],o=!0;if(s.ranges){s.copied||(s=e[i]=s.deepCopy(),s.copied=!0);for(var u=0;u<s.ranges.length;u++)Ls(s.ranges[u].anchor,t,n,r),Ls(s.ranges[u].head,t,n,r)}else{for(var a=0;a<s.changes.length;++a){var f=s.changes[a];if(n<f.from.line)f.from=D(f.from.line+r,f.from.ch),f.to=D(f.to.line+r,f.to.ch);else if(t<=f.to.line){o=!1;break}}o||(e.splice(0,i+1),i=0)}}}function Os(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;As(e.done,n,r,i),As(e.undone,n,r,i)}function Ms(e,t,n,r){var i=t,s=t;return"number"==typeof t?s=N(e,F(e,t)):i=A(t),null==i?null:(r(s,i)&&e.cm&&di(e.cm,i,n),s)}function _s(e){var t=this;this.lines=e,this.parent=null;for(var n=0,r=0;r<e.length;++r)e[r].parent=t,n+=e[r].height;this.height=n}function Ds(e){var t=this;this.children=e;for(var n=0,r=0,i=0;i<e.length;++i){var s=e[i];n+=s.chunkSize(),r+=s.height,s.parent=t}this.size=n,this.height=r,this.parent=null}function Ps(e,t,n){var r=this;if(n)for(var i in n)n.hasOwnProperty(i)&&(r[i]=n[i]);this.doc=e,this.node=t}function Hs(e,t,n){dt(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&Yr(e,null,n)}function Bs(e,t,n,r){var i=new Ps(e,n,r),s=e.cm;return s&&i.noHScroll&&(s.display.alignWidgets=!0),Ms(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==i.insertAt?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t,s&&!ht(e,t)){var r=dt(t)<e.scrollTop;L(t,t.height+In(i)),r&&Yr(s,null,i.height),s.curOp.forceUpdate=!0}return!0}),i}function js(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++oa}function Fs(e,t,n,i,s){if(i&&i.shared)return qs(e,t,n,i,s);if(e.cm&&!e.cm.curOp)return li(e.cm,Fs)(e,t,n,i,s);var o=new js(e,s),u=P(t,n);if(i&&f(i,o,!1),u>0||0==u&&o.clearWhenEmpty!==!1)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=r("span",[o.replacedWith],"CodeMirror-widget"),o.widgetNode.setAttribute("role","presentation"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(ut(e,t.line,t,n,o)||t.line!=n.line&&ut(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");z()}o.addToHistory&&Ki(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var a,l=t.line,c=e.cm;if(e.iter(l,n.line+1,function(e){c&&o.collapsed&&!c.options.lineWrapping&&at(e)==c.display.maxLine&&(a=!0),o.collapsed&&l!=t.line&&L(e,0),$(e,new W(o,l==t.line?t.ch:null,l==n.line?n.ch:null)),++l}),o.collapsed&&e.iter(t.line,n.line+1,function(t){ht(e,t)&&L(t,0)}),o.clearOnEnter&&ju(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(U(),(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++oa,o.atomic=!0),c){if(a&&(c.curOp.updateMaxLine=!0),o.collapsed)pi(c,t.line,n.line+1);else if(o.className||o.title||o.startStyle||o.endStyle||o.css)for(var h=t.line;h<=n.line;h++)di(c,h,"text");o.atomic&&ds(c.doc),Nn(c,"markerAdded",c,o)}return o}function Is(e,t){var n=this;this.markers=e,this.primary=t;for(var r=0;r<e.length;++r)e[r].parent=n}function qs(e,t,n,r,i){r=f(r),r.shared=!1;var s=[Fs(e,t,n,r,i)],o=s[0],u=r.widgetNode;return zi(e,function(e){u&&(r.widgetNode=u.cloneNode(!0)),s.push(Fs(e,I(e,t),I(e,n),r,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;o=v(s)}),new Is(s,o)}function Rs(e){return e.findMarks(D(e.first,0),e.clipPos(D(e.lastLine())),function(e){return e.parent})}function Us(e,t){for(var n=0;n<t.length;n++){var r=t[n],i=r.find(),s=e.clipPos(i.from),o=e.clipPos(i.to);if(P(s,o)){var u=Fs(e,s,o,r.primary,r.primary.type);r.markers.push(u),u.parent=r}}}function zs(e){for(var t=function(t){var n=e[t],r=[n.primary.doc];zi(n.primary.doc,function(e){return r.push(e)});for(var i=0;i<n.markers.length;i++){var s=n.markers[i];h(r,s.doc)==-1&&(s.parent=null,n.markers.splice(i--,1))}},n=0;n<e.length;n++)t(n)}function Ws(e){var t=this;if($s(t),!Mt(t,e)&&!qn(t.display,e)){Ht(e),nu&&(fa=+(new Date));var n=xr(t,e,!0),r=e.dataTransfer.files;if(n&&!t.isReadOnly())if(r&&r.length&&window.FileReader&&window.File)for(var i=r.length,s=Array(i),o=0,u=function(e,r){if(!t.options.allowDropFileTypes||h(t.options.allowDropFileTypes,e.type)!=-1){var u=new FileReader;u.onload=li(t,function(){var e=u.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),s[r]=e,++o==i){n=I(t.doc,n);var a={from:n,to:n,text:t.doc.splitLines(s.join(t.doc.lineSeparator())),origin:"paste"};Es(t.doc,a),ls(t.doc,Di(n,Pi(a)))}}),u.readAsText(e)}},a=0;a<i;++a)u(r[a],a);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var f=e.dataTransfer.getData("Text");if(f){var l;if(t.state.draggingText&&!t.state.draggingText.copy&&(l=t.listSelections()),hs(t.doc,Di(n,n)),l)for(var c=0;c<l.length;++c)ks(t.doc,"",l[c].anchor,l[c].head,"drag");t.replaceSelection(f,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Xs(e,t){if(nu&&(!e.state.draggingText||+(new Date)-fa<100))return void Ft(t);if(!Mt(e,t)&&!qn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!au)){var n=r("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",uu&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),uu&&n.parentNode.removeChild(n)}}function Vs(e,t){var i=xr(e,t);if(i){var s=document.createDocumentFragment();kr(e,i,s),e.display.dragCursor||(e.display.dragCursor=r("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),n(e.display.dragCursor,s)}}function $s(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function Js(e){if(document.body.getElementsByClassName)for(var t=document.body.getElementsByClassName("CodeMirror"),n=0;n<t.length;n++){var r=t[n].CodeMirror;r&&e(r)}}function Ks(){la||(Qs(),la=!0)}function Qs(){var e;ju(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,Js(Gs)},100))}),ju(window,"blur",function(){return Js(Dr)})}function Gs(e){var t=e.display;t.lastWrapHeight==t.wrapper.clientHeight&&t.lastWrapWidth==t.wrapper.clientWidth||(t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize())}function Ys(e){var t=e.split(/-(?!$)/);e=t[t.length-1];for(var n,r,i,s,o=0;o<t.length-1;o++){var u=t[o];if(/^(cmd|meta|m)$/i.test(u))s=!0;else if(/^a(lt)?$/i.test(u))n=!0;else if(/^(c|ctrl|control)$/i.test(u))r=!0;else{if(!/^s(hift)?$/i.test(u))throw new Error("Unrecognized modifier name: "+u);i=!0}}return n&&(e="Alt-"+e),r&&(e="Ctrl-"+e),s&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function Zs(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==r){delete e[n];continue}for(var i=m(n.split(" "),Ys),s=0;s<i.length;s++){var o=void 0,u=void 0;s==i.length-1?(u=i.join(" "),o=r):(u=i.slice(0,s+1).join(" "),o="...");var a=t[u];if(a){if(a!=o)throw new Error("Inconsistent bindings for "+u)}else t[u]=o}delete e[n]}for(var f in t)e[f]=t[f];return e}function eo(e,t,n,r){t=ro(t);var i=t.call?t.call(e,r):t[e];if(i===!1)return"nothing";if("..."===i)return"multi";if(null!=i&&n(i))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return eo(e,t.fallthrough,n,r);for(var s=0;s<t.fallthrough.length;s++){var o=eo(e,t.fallthrough[s],n,r);if(o)return o}}}function to(e){var t="string"==typeof e?e:ca[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function no(e,t){if(uu&&34==e.keyCode&&e.char)return!1;var n=ca[e.keyCode],r=n;return null!=r&&!e.altGraphKey&&(e.altKey&&"Alt"!=n&&(r="Alt-"+r),(yu?e.metaKey:e.ctrlKey)&&"Ctrl"!=n&&(r="Ctrl-"+r),(yu?e.ctrlKey:e.metaKey)&&"Cmd"!=n&&(r="Cmd-"+r),!t&&e.shiftKey&&"Shift"!=n&&(r="Shift-"+r),r)}function ro(e){return"string"==typeof e?va[e]:e}function io(e,t){for(var n=e.doc.sel.ranges,r=[],i=0;i<n.length;i++){for(var s=t(n[i]);r.length&&P(s.from,v(r).to)<=0;){var o=r.pop();if(P(o.from,s.from)<0){s.from=o.from;break}}r.push(s)}fi(e,function(){for(var t=r.length-1;t>=0;t--)ks(e.doc,"",r[t].from,r[t].to,"+delete");Zr(e)})}function so(e,t){var n=N(e.doc,t),r=at(n);r!=n&&(t=A(r));var i=kt(r),s=i?i[0].level%2?Et(r):wt(r):0;return D(t,s)}function oo(e,t){for(var n,r=N(e.doc,t);n=ot(r);)r=n.find(1,!0).line,t=null;var i=kt(r),s=i?i[0].level%2?wt(r):Et(r):r.text.length;return D(null==t?A(r):t,s)}function uo(e,t){var n=so(e,t.line),r=N(e.doc,n.line),i=kt(r);if(!i||0==i[0].level){var s=Math.max(0,r.text.search(/\S/)),o=t.line==n.line&&t.ch<=s&&t.ch;return D(n.line,o?0:s)}return n}function ao(e,t,n){if("string"==typeof t&&(t=ya[t],!t))return!1;e.display.input.ensurePolled();var r=e.display.shift,i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),i=t(e)!=Nu}finally{e.display.shift=r,e.state.suppressEdits=!1}return i}function fo(e,t,n){for(var r=0;r<e.state.keyMaps.length;r++){var i=eo(t,e.state.keyMaps[r],n,e);if(i)return i}return e.options.extraKeys&&eo(t,e.options.extraKeys,n,e)||eo(t,e.options.keyMap,n,e)}function lo(e,t,n,r){var i=e.state.keySeq;if(i){if(to(t))return"handled";ba.set(50,function(){e.state.keySeq==i&&(e.state.keySeq=null,e.display.input.reset())}),t=i+" "+t}var s=fo(e,t,r);return"multi"==s&&(e.state.keySeq=t),"handled"==s&&Nn(e,"keyHandled",e,t,n),"handled"!=s&&"multi"!=s||(Ht(n),Ar(e)),i&&!s&&/\'$/.test(t)?(Ht(n),!0):!!s}function co(e,t){var n=no(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?lo(e,"Shift-"+n,t,function(t){return ao(e,t,!0)})||lo(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ao(e,t)}):lo(e,n,t,function(t){return ao(e,t)}))}function ho(e,t,n){return lo(e,"'"+n+"'",t,function(t){return ao(e,t,!0)})}function po(e){var t=this;if(t.curOp.focus=s(),!Mt(t,e)){nu&&ru<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var r=co(t,e);uu&&(wa=r?n:null,!r&&88==n&&!Ru&&(pu?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||vo(t)}}function vo(e){function t(e){18!=e.keyCode&&e.altKey||(wu(n,"CodeMirror-crosshair"),At(document,"keyup",t),At(document,"mouseover",t))}var n=e.display.lineDiv;o(n,"CodeMirror-crosshair"),ju(document,"keyup",t),ju(document,"mouseover",t)}function mo(e){16==e.keyCode&&(this.doc.sel.shift=!1),Mt(this,e)}function go(e){var t=this;if(!(qn(t.display,e)||Mt(t,e)||e.ctrlKey&&!e.altKey||pu&&e.metaKey)){var n=e.keyCode,r=e.charCode;if(uu&&n==wa)return wa=null,void Ht(e);if(!uu||e.which&&!(e.which<10)||!co(t,e)){var i=String.fromCharCode(null==r?n:r);"\b"!=i&&(ho(t,e,i)||t.display.input.onKeyPress(e))}}}function yo(e){var t=this,n=t.display;if(!(Mt(t,e)||n.activeTouch&&n.input.supportsTouch())){if(n.input.ensurePolled(),n.shift=e.shiftKey,qn(n,e))return void (iu||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100)));if(!xo(t,e)){var r=xr(t,e);switch(window.focus(),qt(e)){case 1:t.state.selectingText?t.state.selectingText(e):r?bo(t,e,r):It(e)==n.scroller&&Ht(e);break;case 2:iu&&(t.state.lastMiddleDown=+(new Date)),r&&ss(t.doc,r),setTimeout(function(){return n.input.focus()},20),Ht(e);break;case 3:bu?To(t,e):Mr(t)}}}}function bo(e,t,n){nu?setTimeout(a(Or,e),0):e.curOp.focus=s();var r,i=+(new Date);ga&&ga.time>i-400&&0==P(ga.pos,n)?r="triple":ma&&ma.time>i-400&&0==P(ma.pos,n)?(r="double",ga={time:i,pos:n}):(r="single",ma={time:i,pos:n});var o,u=e.doc.sel,f=pu?t.metaKey:t.ctrlKey;e.options.dragDrop&&Fu&&!e.isReadOnly()&&"single"==r&&(o=u.contains(n))>-1&&(P((o=u.ranges[o]).from(),n)<0||n.xRel>0)&&(P(o.to(),n)>0||n.xRel<0)?wo(e,t,n,f):Eo(e,t,n,r,f)}function wo(e,t,n,r){var i=e.display,s=+(new Date),o=li(e,function(u){iu&&(i.scroller.draggable=!1),e.state.draggingText=!1,At(document,"mouseup",o),At(i.scroller,"drop",o),Math.abs(t.clientX-u.clientX)+Math.abs(t.clientY-u.clientY)<10&&(Ht(u),!r&&+(new Date)-200<s&&ss(e.doc,n),iu||nu&&9==ru?setTimeout(function(){document.body.focus(),i.input.focus()},20):i.input.focus())});iu&&(i.scroller.draggable=!0),e.state.draggingText=o,o.copy=pu?t.altKey:t.ctrlKey,i.scroller.dragDrop&&i.scroller.dragDrop(),ju(document,"mouseup",o),ju(i.scroller,"drop",o)}function Eo(e,t,n,r,i){function o(t){if(0!=P(b,t))if(b=t,"rect"==r){for(var i=[],s=e.options.tabSize,o=l(N(c,n.line).text,n.ch,s),u=l(N(c,t.line).text,t.ch,s),a=Math.min(o,u),f=Math.max(o,u),m=Math.min(n.line,t.line),g=Math.min(e.lastLine(),Math.max(n.line,t.line));m<=g;m++){var y=N(c,m).text,w=p(y,a,s);a==f?i.push(new Mi(D(m,w),D(m,w))):y.length>w&&i.push(new Mi(D(m,w),D(m,p(y,f,s))))}i.length||i.push(new Mi(n,n)),cs(c,_i(v.ranges.slice(0,d).concat(i),d),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var E=h,S=E.anchor,x=t;if("single"!=r){var T;T="double"==r?e.findWordAt(t):new Mi(D(t.line,0),I(c,D(t.line+1,0))),P(T.anchor,S)>0?(x=T.head,S=j(E.from(),T.anchor)):(x=T.anchor,S=B(E.to(),T.head))}var C=v.ranges.slice(0);C[d]=new Mi(I(c,S),x),cs(c,_i(C,d),ku)}}function u(t){var n=++E,i=xr(e,t,!0,"rect"==r);if(i)if(0!=P(i,b)){e.curOp.focus=s(),o(i);var a=Fr(f,c);(i.line>=a.to||i.line<a.from)&&setTimeout(li(e,function(){E==n&&u(t)}),150)}else{var l=t.clientY<w.top?-20:t.clientY>w.bottom?20:0;l&&setTimeout(li(e,function(){E==n&&(f.scroller.scrollTop+=l,u(t))}),50)}}function a(t){e.state.selectingText=!1,E=1/0,Ht(t),f.input.focus(),At(document,"mousemove",S),At(document,"mouseup",x),c.history.lastSelOrigin=null}var f=e.display,c=e.doc;Ht(t);var h,d,v=c.sel,m=v.ranges;if(i&&!t.shiftKey?(d=c.sel.contains(n),h=d>-1?m[d]:new Mi(n,n)):(h=c.sel.primary(),d=c.sel.primIndex),du?t.shiftKey&&t.metaKey:t.altKey)r="rect",i||(h=new Mi(n,n)),n=xr(e,t,!0,!0),d=-1;else if("double"==r){var g=e.findWordAt(n);h=e.display.shift||c.extend?is(c,h,g.anchor,g.head):g}else if("triple"==r){var y=new Mi(D(n.line,0),I(c,D(n.line+1,0)));h=e.display.shift||c.extend?is(c,h,y.anchor,y.head):y}else h=is(c,h,n);i?d==-1?(d=m.length,cs(c,_i(m.concat([h]),d),{scroll:!1,origin:"*mouse"})):m.length>1&&m[d].empty()&&"single"==r&&!t.shiftKey?(cs(c,_i(m.slice(0,d).concat(m.slice(d+1)),0),{scroll:!1,origin:"*mouse"}),v=c.sel):us(c,d,h,ku):(d=0,cs(c,new Oi([h],0),ku),v=c.sel);var b=n,w=f.wrapper.getBoundingClientRect(),E=0,S=li(e,function(e){qt(e)?u(e):a(e)}),x=li(e,a);e.state.selectingText=x,ju(document,"mousemove",S),ju(document,"mouseup",x)}function So(e,t,n,r){var i,s;try{i=t.clientX,s=t.clientY}catch(e){return!1}if(i>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;r&&Ht(t);var o=e.display,u=o.lineDiv.getBoundingClientRect();if(s>u.bottom||!Dt(e,n))return jt(t);s-=u.top-o.viewOffset;for(var a=0;a<e.options.gutters.length;++a){var f=o.gutters.childNodes[a];if(f&&f.getBoundingClientRect().right>=i){var l=O(e.doc,s),c=e.options.gutters[a];return Ot(e,n,e,l,c,t),jt(t)}}}function xo(e,t){return So(e,t,"gutterClick",!0)}function To(e,t){qn(e.display,t)||No(e,t)||Mt(e,t,"contextmenu")||e.display.input.onContextMenu(t)}function No(e,t){return!!Dt(e,"gutterContextMenu")&&So(e,t,"gutterContextMenu",!1)}function Co(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),or(e)}function ko(e){function t(t,r,i,s){e.defaults[t]=r,i&&(n[t]=s?function(e,t,n){n!=Ea&&i(e,t,n)}:i)}var n=e.optionHandlers;e.defineOption=t,e.Init=Ea,t("value","",function(e,t){return e.setValue(t)},!0),t("mode",null,function(e,t){e.doc.modeOption=t,Ii(e)},!0),t("indentUnit",2,Ii,!0),t("indentWithTabs",!1),t("smartIndent",!0),t("tabSize",4,function(e){qi(e),or(e),pi(e)},!0),t("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],r=e.doc.first;e.doc.iter(function(e){for(var i=0;;){var s=e.text.indexOf(t,i);if(s==-1)break;i=s+t.length,n.push(D(r,s))}r++});for(var i=n.length-1;i>=0;i--)ks(e.doc,t,n[i],D(n[i].line,n[i].ch+t.length))}}),t("specialChars",/[\u0000-\u001f\u007f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),n!=Ea&&e.refresh()}),t("specialCharPlaceholder",dn,function(e){return e.refresh()},!0),t("electricChars",!0),t("inputStyle",hu?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),t("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),t("rtlMoveVisually",!vu),t("wholeLineUpdateBefore",!0),t("theme","default",function(e){Co(e),Lo(e)},!0),t("keyMap","default",function(e,t,n){var r=ro(t),i=n!=Ea&&ro(n);i&&i.detach&&i.detach(e,r),r.attach&&r.attach(e,i||null)}),t("extraKeys",null),t("lineWrapping",!1,Oo,!0),t("gutters",[],function(e){Ai(e.options),Lo(e)},!0),t("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?wr(e.display)+"px":"0",e.refresh()},!0),t("coverGutterNextToScrollbar",!1,function(e){return Xr(e)},!0),t("scrollbarStyle","native",function(e){$r(e),Xr(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),t("lineNumbers",!1,function(e){Ai(e.options),Lo(e)},!0),t("firstLineNumber",1,Lo,!0),t("lineNumberFormatter",function(e){return e},Lo,!0),t("showCursorWhenSelecting",!1,Nr,!0),t("resetSelectionOnContextMenu",!0),t("lineWiseCopyCut",!0),t("readOnly",!1,function(e,t){"nocursor"==t?(Dr(e),e.display.input.blur(),e.display.disabled=!0):e.display.disabled=!1,e.display.input.readOnlyChanged(t)}),t("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),t("dragDrop",!0,Ao),t("allowDropFileTypes",null),t("cursorBlinkRate",530),t("cursorScrollMargin",0),t("cursorHeight",1,Nr,!0),t("singleCursorHeightPerLine",!0,Nr,!0),t("workTime",100),t("workDelay",100),t("flattenSpans",!0,qi,!0),t("addModeClass",!1,qi,!0),t("pollInterval",100),t("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),t("historyEventDelay",1250),t("viewportMargin",10,function(e){return e.refresh()},!0),t("maxHighlightLength",1e4,qi,!0),t("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),t("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),t("autofocus",null)}function Lo(e){Li(e),pi(e),Pr(e)}function Ao(e,t,n){var r=n&&n!=Ea;if(!t!=!r){var i=e.display.dragFunctions,s=t?ju:At;s(e.display.scroller,"dragstart",i.start),s(e.display.scroller,"dragenter",i.enter),s(e.display.scroller,"dragover",i.over),s(e.display.scroller,"dragleave",i.leave),s(e.display.scroller,"drop",i.drop)}}function Oo(e){e.options.lineWrapping?(o(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(wu(e.display.wrapper,"CodeMirror-wrap"),mt(e)),Sr(e),pi(e),or(e),setTimeout(function(){return Xr(e)},100)}function Mo(e,t){var n=this;if(!(this instanceof Mo))return new Mo(e,t);this.options=t=t?f(t):{},f(Sa,t,!1),Ai(t);var r=t.value;"string"==typeof r&&(r=new aa(r,t.mode,null,t.lineSeparator)),this.doc=r;var i=new Mo.inputStyles[t.inputStyle](this),s=this.display=new T(e,r,i);s.wrapper.CodeMirror=this,Li(this),Co(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),$r(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new c,keySeq:null,specialChars:null},t.autofocus&&!hu&&s.input.focus(),nu&&ru<11&&setTimeout(function(){return n.display.input.reset(!0)},20),_o(this),Ks(),ti(this),this.curOp.forceUpdate=!0,Wi(this,r),t.autofocus&&!hu||this.hasFocus()?setTimeout(a(_r,this),20):Dr(this);for(var o in xa)xa.hasOwnProperty(o)&&xa[o](n,t[o],Ea);Hr(this),t.finishInit&&t.finishInit(this);for(var u=0;u<Ta.length;++u)Ta[u](n);ni(this),iu&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(s.lineDiv).textRendering&&(s.lineDiv.style.textRendering="auto")}function _o(e){function t(){i.activeTouch&&(s=setTimeout(function(){return i.activeTouch=null},1e3),o=i.activeTouch,o.end=+(new Date))}function n(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}function r(e,t){if(null==t.left)return!0;var n=t.left-e.left,r=t.top-e.top;return n*n+r*r>400}var i=e.display;ju(i.scroller,"mousedown",li(e,yo)),nu&&ru<11?ju(i.scroller,"dblclick",li(e,function(t){if(!Mt(e,t)){var n=xr(e,t);if(n&&!xo(e,t)&&!qn(e.display,t)){Ht(t);var r=e.findWordAt(n);ss(e.doc,r.anchor,r.head)}}})):ju(i.scroller,"dblclick",function(t){return Mt(e,t)||Ht(t)}),bu||ju(i.scroller,"contextmenu",function(t){return To(e,t)});var s,o={end:0};ju(i.scroller,"touchstart",function(t){if(!Mt(e,t)&&!n(t)){i.input.ensurePolled(),clearTimeout(s);var r=+(new Date);i.activeTouch={start:r,moved:!1,prev:r-o.end<=300?o:null},1==t.touches.length&&(i.activeTouch.left=t.touches[0].pageX,i.activeTouch.top=t.touches[0].pageY)}}),ju(i.scroller,"touchmove",function(){i.activeTouch&&(i.activeTouch.moved=!0)}),ju(i.scroller,"touchend",function(n){var s=i.activeTouch;if(s&&!qn(i,n)&&null!=s.left&&!s.moved&&new Date-s.start<300){var o,u=e.coordsChar(i.activeTouch,"page");o=!s.prev||r(s,s.prev)?new Mi(u,u):!s.prev.prev||r(s,s.prev.prev)?e.findWordAt(u):new Mi(D(u.line,0),I(e.doc,D(u.line+1,0))),e.setSelection(o.anchor,o.head),e.focus(),Ht(n)}t()}),ju(i.scroller,"touchcancel",t),ju(i.scroller,"scroll",function(){i.scroller.clientHeight&&(Ir(e,i.scroller.scrollTop),qr(e,i.scroller.scrollLeft,!0),Ot(e,"scroll",e))}),ju(i.scroller,"mousewheel",function(t){return zr(e,t)}),ju(i.scroller,"DOMMouseScroll",function(t){return zr(e,t)}),ju(i.wrapper,"scroll",function(){return i.wrapper.scrollTop=i.wrapper.scrollLeft=0}),i.dragFunctions={enter:function(t){Mt(e,t)||Ft(t)},over:function(t){Mt(e,t)||(Vs(e,t),Ft(t))},start:function(t){return Xs(e,t)},drop:li(e,Ws),leave:function(t){Mt(e,t)||$s(e)}};var u=i.input.getField();ju(u,"keyup",function(t){return mo.call(e,t)}),ju(u,"keydown",li(e,po)),ju(u,"keypress",li(e,go)),ju(u,"focus",function(t){return _r(e,t)}),ju(u,"blur",function(t){return Dr(e,t)})}function Do(e,t,n,r){var i,s=e.doc;null==n&&(n="add"),"smart"==n&&(s.mode.indent?i=en(e,t):n="prev");var o=e.options.tabSize,u=N(s,t),a=l(u.text,null,o);u.stateAfter&&(u.stateAfter=null);var f,c=u.text.match(/^\s*/)[0];if(r||/\S/.test(u.text)){if("smart"==n&&(f=s.mode.indent(i,u.text.slice(c.length),u.text),f==Nu||f>150)){if(!r)return;n="prev"}}else f=0,n="not";"prev"==n?f=t>s.first?l(N(s,t-1).text,null,o):0:"add"==n?f=a+e.options.indentUnit:"subtract"==n?f=a-e.options.indentUnit:"number"==typeof n&&(f=a+n),f=Math.max(0,f);var h="",p=0;if(e.options.indentWithTabs)for(var v=Math.floor(f/o);v;--v)p+=o,h+="	";if(p<f&&(h+=d(f-p)),h!=c)return ks(s,h,D(t,0),D(t,c.length),"+input"),u.stateAfter=null,!0;for(var m=0;m<s.sel.ranges.length;m++){var g=s.sel.ranges[m];if(g.head.line==t&&g.head.ch<c.length){var y=D(t,c.length);us(s,m,new Mi(y,y));break}}}function Po(e){Na=e}function Ho(e,t,n,r,i){var s=e.doc;e.display.shift=!1,r||(r=s.sel);var o=e.state.pasteIncoming||"paste"==i,u=Iu(t),a=null;if(o&&r.ranges.length>1)if(Na&&Na.text.join("\n")==t){if(r.ranges.length%Na.text.length==0){a=[];for(var f=0;f<Na.text.length;f++)a.push(s.splitLines(Na.text[f]))}}else u.length==r.ranges.length&&(a=m(u,function(e){return[e]}));for(var l,c=r.ranges.length-1;c>=0;c--){var h=r.ranges[c],p=h.from(),d=h.to();h.empty()&&(n&&n>0?p=D(p.line,p.ch-n):e.state.overwrite&&!o?d=D(d.line,Math.min(N(s,d.line).text.length,d.ch+v(u).length)):Na&&Na.lineWise&&Na.text.join("\n")==t&&(p=d=D(p.line,0))),l=e.curOp.updateInput;var g={from:p,to:d,text:a?a[c%a.length]:u,origin:i||(o?"paste":e.state.cutIncoming?"cut":"+input")};Es(e.doc,g),Nn(e,"inputRead",e,g)}t&&!o&&jo(e,t),Zr(e),e.curOp.updateInput=l,e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=!1}function Bo(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||fi(t,function(){return Ho(t,n,0,null,"paste")}),!0}function jo(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,r=n.ranges.length-1;r>=0;r--){var i=n.ranges[r];if(!(i.head.ch>100||r&&n.ranges[r-1].head.line==i.head.line)){var s=e.getModeAt(i.head),o=!1;if(s.electricChars){for(var u=0;u<s.electricChars.length;u++)if(t.indexOf(s.electricChars.charAt(u))>-1){o=Do(e,i.head.line,"smart");break}}else s.electricInput&&s.electricInput.test(N(e.doc,i.head.line).text.slice(0,i.head.ch))&&(o=Do(e,i.head.line,"smart"));o&&Nn(e,"electricInput",e,i.head.line)}}}function Fo(e){for(var t=[],n=[],r=0;r<e.doc.sel.ranges.length;r++){var i=e.doc.sel.ranges[r].head.line,s={anchor:D(i,0),head:D(i+1,0)};n.push(s),t.push(e.getRange(s.anchor,s.head))}return{text:t,ranges:n}}function Io(e,t){e.setAttribute("autocorrect","off"),e.setAttribute("autocapitalize","off"),e.setAttribute("spellcheck",!!t)}function qo(){var e=r("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=r("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return iu?e.style.width="1000px":e.setAttribute("wrap","off"),cu&&(e.style.border="1px solid black"),Io(e),t}function Ro(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var r=this.options,i=r[e];r[e]==n&&"mode"!=e||(r[e]=n,t.hasOwnProperty(e)&&li(this,t[e])(this,n,i),Ot(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](ro(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:ci(function(t,n){var r=t.token?t:e.getMode(this.options,t);if(r.startState)throw new Error("Overlays may not be stateful.");g(this.state.overlays,{mode:r,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,pi(this)}),removeOverlay:ci(function(e){for(var t=this,n=this.state.overlays,r=0;r<n.length;++r){var i=n[r].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return n.splice(r,1),t.state.modeGen++,void pi(t)}}),indentLine:ci(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),M(this.doc,e)&&Do(this,e,t,n)}),indentSelection:ci(function(e){for(var t=this,n=this.doc.sel.ranges,r=-1,i=0;i<n.length;i++){var s=n[i];if(s.empty())s.head.line>r&&(Do(t,s.head.line,e,!0),r=s.head.line,i==t.doc.sel.primIndex&&Zr(t));else{var o=s.from(),u=s.to(),a=Math.max(r,o.line);r=Math.min(t.lastLine(),u.line-(u.ch?0:1))+1;for(var f=a;f<r;++f)Do(t,f,e);var l=t.doc.sel.ranges;0==o.ch&&n.length==l.length&&l[i].from().ch>0&&us(t.doc,i,new Mi(o,l[i].to()),Cu)}}}),getTokenAt:function(e,t){return sn(this,e,t)},getLineTokens:function(e,t){return sn(this,D(e),t,!0)},getTokenTypeAt:function(e){e=I(this.doc,e);var t,n=Zt(this,N(this.doc,e.line)),r=0,i=(n.length-1)/2,s=e.ch;if(0==s)t=n[2];else for(;;){var o=r+i>>1;if((o?n[2*o-1]:0)>=s)i=o;else{if(!(n[2*o+1]<s)){t=n[2*o+2];break}r=o+1}}var u=t?t.indexOf("overlay "):-1;return u<0?t:0==u?null:t.slice(0,u-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var r=this,i=[];if(!n.hasOwnProperty(t))return i;var s=n[t],o=this.getModeAt(e);if("string"==typeof o[t])s[o[t]]&&i.push(s[o[t]]);else if(o[t])for(var u=0;u<o[t].length;u++){var a=s[o[t][u]];a&&i.push(a)}else o.helperType&&s[o.helperType]?i.push(s[o.helperType]):s[o.name]&&i.push(s[o.name]);for(var f=0;f<s._global.length;f++){var l=s._global[f];l.pred(o,r)&&h(i,l.val)==-1&&i.push(l.val)}return i},getStateAfter:function(e,t){var n=this.doc;return e=F(n,null==e?n.first+n.size-1:e),en(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel.primary();return n=null==e?r.head:"object"==typeof e?I(this.doc,e):e?r.from():r.to(),hr(this,n,t||"page")},charCoords:function(e,t){return cr(this,I(this.doc,e),t||"page")},coordsChar:function(e,t){return e=lr(this,e,t||"page"),vr(this,e.left,e.top)},lineAtHeight:function(e,t){return e=lr(this,{top:e,left:0},t||"page").top,O(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var r,i=!1;if("number"==typeof e){var s=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>s&&(e=s,i=!0),r=N(this.doc,e)}else r=e;return fr(this,r,{top:0,left:0},t||"page",n).top+(i?this.doc.height-dt(r):0)},defaultTextHeight:function(){return gr(this.display)},defaultCharWidth:function(){return yr(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,r,i){var s=this.display;e=hr(this,I(this.doc,e));var o=e.bottom,u=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),s.sizer.appendChild(t),"over"==r)o=e.top;else if("above"==r||"near"==r){var a=Math.max(s.wrapper.clientHeight,this.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);("above"==r||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=a&&(o=e.bottom),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="","right"==i?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?u=0:"middle"==i&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&Qr(this,u,o,u+t.offsetWidth,o+t.offsetHeight)},triggerOnKeyDown:ci(po),triggerOnKeyPress:ci(go),triggerOnKeyUp:mo,execCommand:function(e){if(ya.hasOwnProperty(e))return ya[e].call(null,this)},triggerElectric:ci(function(e){jo(this,e)}),findPosH:function(e,t,n,r){var i=this,s=1;t<0&&(s=-1,t=-t);for(var o=I(this.doc,e),u=0;u<t&&(o=Uo(i.doc,o,s,n,r),!o.hitSide);++u);return o},moveH:ci(function(e,t){var n=this;this.extendSelectionsBy(function(r){return n.display.shift||n.doc.extend||r.empty()?Uo(n.doc,r.head,e,t,n.options.rtlMoveVisually):e<0?r.from():r.to()},Lu)}),deleteH:ci(function(e,t){var n=this.doc.sel,r=this.doc;n.somethingSelected()?r.replaceSelection("",null,"+delete"):io(this,function(n){var i=Uo(r,n.head,e,t,!1);return e<0?{from:i,to:n.head}:{from:n.head,to:i}})}),findPosV:function(e,t,n,r){var i=this,s=1,o=r;t<0&&(s=-1,t=-t);for(var u=I(this.doc,e),a=0;a<t;++a){var f=hr(i,u,"div");if(null==o?o=f.left:f.left=o,u=zo(i,f,s,n),u.hitSide)break}return u},moveV:ci(function(e,t){var n=this,r=this.doc,i=[],s=!this.display.shift&&!r.extend&&r.sel.somethingSelected();if(r.extendSelectionsBy(function(o){if(s)return e<0?o.from():o.to();var u=hr(n,o.head,"div");null!=o.goalColumn&&(u.left=o.goalColumn),i.push(u.left);var a=zo(n,u,e,t);return"page"==t&&o==r.sel.primary()&&Yr(n,null,cr(n,a,"div").top-u.top),a},Lu),i.length)for(var o=0;o<r.sel.ranges.length;o++)r.sel.ranges[o].goalColumn=i[o]}),findWordAt:function(e){var t=this.doc,n=N(t,e.line).text,r=e.ch,i=e.ch;if(n){var s=this.getHelper(e,"wordChars");(e.xRel<0||i==n.length)&&r?--r:++i;for(var o=n.charAt(r),u=E(o,s)?function(e){return E(e,s)}:/\s/.test(o)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!E(e)};r>0&&u(n.charAt(r-1));)--r;for(;i<n.length&&u(n.charAt(i));)++i}return new Mi(D(e.line,r),D(e.line,i))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?o(this.display.cursorDiv,"CodeMirror-overwrite"):wu(this.display.cursorDiv,"CodeMirror-overwrite"),Ot(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==s()},isReadOnly:function(){return!!this.options.readOnly||!!this.doc.cantEdit},scrollTo:ci(function(e,t){null==e&&null==t||ei(this),null!=e&&(this.curOp.scrollLeft=e),null!=t&&(this.curOp.scrollTop=t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Wn(this)-this.display.barHeight,width:e.scrollWidth-Wn(this)-this.display.barWidth,clientHeight:Vn(this),clientWidth:Xn(this)}},scrollIntoView:ci(function(e,t){if(null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:D(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line)ei(this),this.curOp.scrollToPos=e;else{var n=Gr(this,Math.min(e.from.left,e.to.left),Math.min(e.from.top,e.to.top)-e.margin,Math.max(e.from.right,e.to.right),Math.max(e.from.bottom,e.to.bottom)+e.margin);this.scrollTo(n.scrollLeft,n.scrollTop)}}),setSize:ci(function(e,t){var n=this,r=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=r(e)),null!=t&&(this.display.wrapper.style.height=r(t)),this.options.lineWrapping&&sr(this);var i=this.display.viewFrom;this.doc.iter(i,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){di(n,i,"widget");break}++i}),this.curOp.forceUpdate=!0,Ot(this,"refresh",this)}),operation:function(e){return fi(this,e)},refresh:ci(function(){var e=this.display.cachedTextHeight;pi(this),this.curOp.forceUpdate=!0,or(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),Ci(this),(null==e||Math.abs(e-gr(this.display))>.5)&&Sr(this),Ot(this,"refresh",this)}),swapDoc:ci(function(e){var t=this.doc;return t.cm=null,Wi(this,e),or(this),this.display.input.reset(),this.scrollTo(e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,Nn(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Pt(e),e.registerHelper=function(t,r,i){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][r]=i},e.registerGlobalHelper=function(t,r,i,s){e.registerHelper(t,r,s),n[t]._global.push({pred:i,val:s})}}function Uo(e,t,n,r,i){function s(){var t=u+n;return!(t<e.first||t>=e.first+e.size)&&(u=t,l=N(e,t))}function o(e){var t=(i?Nt:Ct)(l,a,n,!0);if(null==t){if(e||!s())return!1;a=i?(n<0?Et:wt)(l):n<0?l.text.length:0}else a=t;return!0}var u=t.line,a=t.ch,f=n,l=N(e,u);if("char"==r)o();else if("column"==r)o(!0);else if("word"==r||"group"==r)for(var c=null,h="group"==r,p=e.cm&&e.cm.getHelper(t,"wordChars"),d=!0;!(n<0)||o(!d);d=!1){var v=l.text.charAt(a)||"\n",m=E(v,p)?"w":h&&"\n"==v?"n":!h||/\s/.test(v)?null:"p";if(!h||d||m||(m="s"),c&&c!=m){n<0&&(n=1,o());break}if(m&&(c=m),n>0&&!o(!d))break}var g=gs(e,D(u,a),t,f,!0);return P(t,g)||(g.hitSide=!0),g}function zo(e,t,n,r){var i,s=e.doc,o=t.left;if("page"==r){var u=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),a=Math.max(u-.5*gr(e.display),3);i=(n>0?t.bottom:t.top)+n*a}else"line"==r&&(i=n>0?t.bottom+3:t.top-3);for(var f;f=vr(e,o,i),f.outside;){if(n<0?i<=0:i>=s.height){f.hitSide=!0;break}i+=5*n}return f}function Wo(e,t){var n=Gn(e,t.line);if(!n||n.hidden)return null;var r=N(e.doc,t.line),i=Jn(n,r,t.line),s=kt(r),o="left";if(s){var u=xt(s,t.ch);o=u%2?"right":"left"}var a=er(i.map,t.ch,o);return a.offset="right"==a.collapse?a.end:a.start,a}function Xo(e,t){return t&&(e.bad=!0),e}function Vo(e,t,n,r,i){function s(e){return function(t){return t.id==e}}function o(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(null!=n)return void (u+=""==n?t.textContent.replace(/\u200b/g,""):n);var l,c=t.getAttribute("cm-marker");if(c){var h=e.findMarks(D(r,0),D(i+1,0),s(+c));return void (h.length&&(l=h[0].find())&&(u+=C(e.doc,l.from,l.to).join(f)))}if("false"==t.getAttribute("contenteditable"))return;for(var p=0;p<t.childNodes.length;p++)o(t.childNodes[p]);/^(pre|div|p)$/i.test(t.nodeName)&&(a=!0)}else if(3==t.nodeType){var d=t.nodeValue;if(!d)return;a&&(u+=f,a=!1),u+=d}}for(var u="",a=!1,f=e.doc.lineSeparator();o(t),t!=n;)t=t.nextSibling;return u}function $o(e,t,n){var r;if(t==e.display.lineDiv){if(r=e.display.lineDiv.childNodes[n],!r)return Xo(e.clipPos(D(e.display.viewTo-1)),!0);t=null,n=0}else for(r=t;;r=r.parentNode){if(!r||r==e.display.lineDiv)return null;if(r.parentNode&&r.parentNode==e.display.lineDiv)break}for(var i=0;i<e.display.view.length;i++){var s=e.display.view[i];if(s.node==r)return Jo(s,t,n)}}function Jo(e,t,n){function r(t,n,r){for(var i=-1;i<(c?c.length:0);i++)for(var s=i<0?l.map:c[i],o=0;o<s.length;o+=3){var u=s[o+2];if(u==t||u==n){var a=A(i<0?e.line:e.rest[i]),f=s[o]+r;return(r<0||u!=t)&&(f=s[o+(r?1:0)]),D(a,f)}}}var s=e.text.firstChild,o=!1;if(!t||!i(s,t))return Xo(D(A(e.line),0),!0);if(t==s&&(o=!0,t=s.childNodes[n],n=0,!t)){var u=e.rest?v(e.rest):e.line;return Xo(D(A(u),u.text.length),o)}var a=3==t.nodeType?t:null,f=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));f.parentNode!=s;)f=f.parentNode;var l=e.measure,c=l.maps,h=r(a,f,n);if(h)return Xo(h,o);for(var p=f.nextSibling,d=a?a.nodeValue.length-n:0;p;p=p.nextSibling){if(h=r(p,p.firstChild,0))return Xo(D(h.line,h.ch-d),o);d+=p.textContent.length}for(var m=f.previousSibling,g=n;m;m=m.previousSibling){if(h=r(m,m.firstChild,-1))return Xo(D(h.line,h.ch+g),o);g+=m.textContent.length}}function Ko(e,t){function n(){e.value=a.getValue()}if(t=t?f(t):{},t.value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var r=s();t.autofocus=r==e||null!=e.getAttribute("autofocus")&&r==document.body}var i;if(e.form&&(ju(e.form,"submit",n),!t.leaveSubmitMethodAlone)){var o=e.form;i=o.submit;try{var u=o.submit=function(){n(),o.submit=i,o.submit(),o.submit=u}}catch(e){}}t.finishInit=function(t){t.save=n,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,n(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(At(e.form,"submit",n),"function"==typeof e.form.submit&&(e.form.submit=i))}},e.style.display="none";var a=Mo(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return a}function Qo(e){e.off=At,e.on=ju,e.wheelEventPixels=Ur,e.Doc=aa,e.splitLines=Iu,e.countColumn=l,e.findColumn=p,e.isWordChar=w,e.Pass=Nu,e.signal=Ot,e.Line=fn,e.changeEnd=Pi,e.scrollbarModel=ra,e.Pos=D,e.cmpPos=P,e.modes=zu,e.mimeModes=Wu,e.resolveMode=Vt,e.getMode=$t,e.modeExtensions=Xu,e.extendMode=Jt,e.copyState=Kt,e.startState=Gt,e.innerMode=Qt,e.commands=ya,e.keyMap=va,e.keyName=no,e.isModifierKey=to,e.lookupKey=eo,e.normalizeKeyMap=Zs,e.StringStream=Vu,e.SharedTextMarker=Is,e.TextMarker=js,e.LineWidget=Ps,e.e_preventDefault=Ht,e.e_stopPropagation=Bt,e.e_stop=Ft,e.addClass=o,e.contains=i,e.rmClass=wu,e.keyNames=ca}var Go=navigator.userAgent,Yo=navigator.platform,Zo=/gecko\/\d/i.test(Go),eu=/MSIE \d/.test(Go),tu=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Go),nu=eu||tu,ru=nu&&(eu?document.documentMode||6:tu[1]),iu=/WebKit\//.test(Go),su=iu&&/Qt\/\d+\.\d+/.test(Go),ou=/Chrome\//.test(Go),uu=/Opera\//.test(Go),au=/Apple Computer/.test(navigator.vendor),fu=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(Go),lu=/PhantomJS/.test(Go),cu=/AppleWebKit/.test(Go)&&/Mobile\/\w+/.test(Go),hu=cu||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(Go),pu=cu||/Mac/.test(Yo),du=/\bCrOS\b/.test(Go),vu=/win/i.test(Yo),mu=uu&&Go.match(/Version\/(\d*\.\d*)/);mu&&(mu=Number(mu[1])),mu&&mu>=15&&(uu=!1,iu=!0);var gu,yu=pu&&(su||uu&&(null==mu||mu<12.11)),bu=Zo||nu&&ru>=9,wu=function(t,n){var r=t.className,i=e(n).exec(r);if(i){var s=r.slice(i.index+i[0].length);t.className=r.slice(0,i.index)+(s?i[1]+s:"")}};gu=document.createRange?function(e,t,n,r){var i=document.createRange();return i.setEnd(r||e,n),i.setStart(e,t),i}:function(e,t,n){var r=document.body.createTextRange();try{r.moveToElementText(e.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",n),r.moveStart("character",t),r};var Eu=function(e){e.select()};cu?Eu=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:nu&&(Eu=function(e){try{e.select()}catch(e){}}),c.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var Su,xu,Tu=30,Nu={toString:function(){return"CodeMirror.Pass"}},Cu={scroll:!1},ku={origin:"*mouse"},Lu={origin:"+move"},Au=[""],Ou=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Mu=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,_u=!1,Du=!1,Pu=null,Hu=function(){function e(e){return e<=247?n.charAt(e):1424<=e&&e<=1524?"R":1536<=e&&e<=1785?r.charAt(e-1536):1774<=e&&e<=2220?"r":8192<=e&&e<=8203?"w":8204==e?"b":"L"}function t(e,t,n){this.level=e,this.from=t,this.to=n}var n="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",r="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",i=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,s=/[stwN]/,o=/[LRr]/,u=/[Lb1n]/,a=/[1n]/,f="L";return function(n){if(!i.test(n))return!1;for(var r=n.length,l=[],c=0;c<r;++c)l.push(e(n.charCodeAt(c)));for(var h=0,p=f;h<r;++h){var d=l[h];"m"==d?l[h]=p:p=d}for(var m=0,g=f;m<r;++m){var y=l[m];"1"==y&&"r"==g?l[m]="n":o.test(y)&&(g=y,"r"==y&&(l[m]="R"))}for(var b=1,w=l[0];b<r-1;++b){var E=l[b];"+"==E&&"1"==w&&"1"==l[b+1]?l[b]="1":","!=E||w!=l[b+1]||"1"!=w&&"n"!=w||(l[b]=w),w=E}for(var S=0;S<r;++S){var x=l[S];if(","==x)l[S]="N";else if("%"==x){var T=void 0;for(T=S+1;T<r&&"%"==l[T];++T);for(var N=S&&"!"==l[S-1]||T<r&&"1"==l[T]?"1":"N",C=S;C<T;++C)l[C]=N;S=T-1}}for(var k=0,L=f;k<r;++k){var A=l[k];"L"==L&&"1"==A?l[k]="L":o.test(A)&&(L=A)}for(var O=0;O<r;++O)if(s.test(l[O])){var M=void 0;for(M=O+1;M<r&&s.test(l[M]);++M);for(var _="L"==(O?l[O-1]:f),D="L"==(M<r?l[M]:f),P=_||D?"L":"R",H=O;H<M;++H)l[H]=P;O=M-1}for(var B,j=[],F=0;F<r;)if(u.test(l[F])){var I=F;for(++F;F<r&&u.test(l[F]);++F);j.push(new t(0,I,F))}else{var q=F,R=j.length;for(++F;F<r&&"L"!=l[F];++F);for(var U=q;U<F;)if(a.test(l[U])){q<U&&j.splice(R,0,new t(1,q,U));var z=U;for(++U;U<F&&a.test(l[U]);++U);j.splice(R,0,new t(2,z,U)),q=U}else++U;q<F&&j.splice(R,0,new t(1,q,F))}return 1==j[0].level&&(B=n.match(/^\s+/))&&(j[0].from=B[0].length,j.unshift(new t(0,0,B[0].length))),1==v(j).level&&(B=n.match(/\s+$/))&&(v(j).to-=B[0].length,j.push(new t(0,r-B[0].length,r))),2==j[0].level&&j.unshift(new t(1,j[0].to,j[0].to)),j[0].level!=v(j).level&&j.push(new t(j[0].level,r,r)),j}}(),Bu=[],ju=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={});r[t]=(r[t]||Bu).concat(n)}},Fu=function(){if(nu&&ru<9)return!1;var e=r("div");return"draggable"in e||"dragDrop"in e}(),Iu=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;t<=r;){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var s=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),o=s.indexOf("\r");o!=-1?(n.push(s.slice(0,o)),t+=o+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)},qu=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(e){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(e){}return!!t&&t.parentElement()==e&&0!=t.compareEndPoints("StartToEnd",t)},Ru=function(){var e=r("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Uu=null,zu={},Wu={},Xu={},Vu=function(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};Vu.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t,n=this.string.charAt(this.pos);if(t="string"==typeof e?n==e:n&&(e.test?e.test(n):e(n)))return++this.pos,n},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this,t=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++e.pos;return this.pos>t},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=l(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?l(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return l(this.string,null,this.tabSize)-(this.lineStart?l(this.string,this.lineStart,this.tabSize):0)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e},s=this.string.substr(this.pos,e.length);if(i(s)==i(e))return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}}},Pt(fn),fn.prototype.lineNo=function(){return A(this)};var $u,Ju={},Ku={},Qu=null,Gu=null,Yu={left:0,right:0,top:0,bottom:0},Zu=0,ea=null;nu?ea=-0.53:Zo?ea=15:ou?ea=-0.7:au&&(ea=-1/3);var ta=function(e,t,n){this.cm=n;var i=this.vert=r("div",[r("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),s=this.horiz=r("div",[r("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");e(i),e(s),ju(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),ju(s,"scroll",function(){s.clientWidth&&t(s.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,nu&&ru<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};ta.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,r=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?r+"px":"0";var i=e.viewHeight-(t?r:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+i)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?r+"px":"0",this.horiz.style.left=e.barLeft+"px";var s=e.viewWidth-e.barLeft-(n?r:0);this.horiz.firstChild.style.width=e.scrollWidth-e.clientWidth+s+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==r&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?r:0,bottom:t?r:0}},ta.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},ta.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},ta.prototype.zeroWidthHack=function(){var e=pu&&!fu?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new c,this.disableVert=new c},ta.prototype.enableZeroWidthBar=function(e,t){function n(){var r=e.getBoundingClientRect(),i=document.elementFromPoint(r.left+1,r.bottom-1);i!=e?e.style.pointerEvents="none":t.set(1e3,n)}e.style.pointerEvents="auto",t.set(1e3,n)},ta.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var na=function(){};na.prototype.update=function(){return{bottom:0,right:0}},na.prototype.setScrollLeft=function(){},na.prototype.setScrollTop=function(){},na.prototype.clear=function(){};var ra={"native":ta,"null":na},ia=0,sa=function(e,t,n){var r=e.display;this.viewport=t,this.visible=Fr(r,e.doc,t),this.editorIsHidden=!r.wrapper.offsetWidth,this.wrapperHeight=r.wrapper.clientHeight,this.wrapperWidth=r.wrapper.clientWidth,this.oldDisplayWidth=Xn(e),this.force=n,this.dims=br(e),this.events=[]};sa.prototype.signal=function(e,t){Dt(e,t)&&this.events.push(arguments)},sa.prototype.finish=function(){for(var e=this,t=0;t<this.events.length;t++)Ot.apply(null,e.events[t])},Oi.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(e){var t=this;if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var n=0;n<this.ranges.length;n++){var r=t.ranges[n],i=e.ranges[n];if(0!=P(r.anchor,i.anchor)||0!=P(r.head,i.head))return!1}return!0},deepCopy:function(){for(var e=this,t=[],n=0;n<this.ranges.length;n++)t[n]=new Mi(H(e.ranges[n].anchor),H(e.ranges[n].head));return new Oi(t,this.primIndex)},somethingSelected:function(){for(var e=this,t=0;t<this.ranges.length;t++)if(!e.ranges[t].empty())return!0;return!1},contains:function(e,t){var n=this;t||(t=e);for(var r=0;r<this.ranges.length;r++){var i=n.ranges[r];if(P(t,i.from())>=0&&P(e,i.to())<=0)return r}return-1}},Mi.prototype={from:function(){return j(this.anchor,this.head)},to:function(){return B(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}},_s.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=this,r=e,i=e+t;r<i;++r){var s=n.lines[r];n.height-=s.height,cn(s),Nn(s,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){var r=this;this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=r},iterN:function(e,t,n){for(var r=this,i=e+t;e<i;++e)if(n(r.lines[e]))return!0}},Ds.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){var n=this;this.size-=t;for(var r=0;r<this.children.length;++r){var i=n.children[r],s=i.chunkSize();if(e<s){var o=Math.min(t,s-e),u=i.height;if(i.removeInner(e,o),n.height-=u-i.height,s==o&&(n.children.splice(r--,1),i.parent=null),0==(t-=o))break;e=0}else e-=s}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof _s))){var a=[];this.collapse(a),this.children=[new _s(a)],this.children[0].parent=this}},collapse:function(e){for(var t=this,n=0;n<this.children.length;++n)t.children[n].collapse(e)},insertInner:function(e,t,n){var r=this;this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var s=r.children[i],o=s.chunkSize();if(e<=o){if(s.insertInner(e,t,n),s.lines&&s.lines.length>50){for(var u=s.lines.length%25+25,a=u;a<s.lines.length;){var f=new _s(s.lines.slice(a,a+=25));s.height-=f.height,r.children.splice(++i,0,f),f.parent=r}s.lines=s.lines.slice(0,u),r.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new Ds(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=h(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new Ds(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var r=this,i=0;i<this.children.length;++i){var s=r.children[i],o=s.chunkSize();if(e<o){var u=Math.min(t,o-e);if(s.iterN(e,u,n))return!0;if(0==(t-=u))break;e=0}else e-=o}}},Pt(Ps),Ps.prototype.clear=function(){var e=this,t=this.doc.cm,n=this.line.widgets,r=this.line,i=A(r);if(null!=i&&n){for(var s=0;s<n.length;++s)n[s]==e&&n.splice(s--,1);n.length||(r.widgets=null);var o=In(this);L(r,Math.max(0,r.height-o)),t&&fi(t,function(){Hs(t,r,-o),di(t,i,"widget")})}},Ps.prototype.changed=function(){var e=this.height,t=this.doc.cm,n=this.line;this.height=null;var r=In(this)-e;r&&(L(n,n.height+r),t&&fi(t,function(){t.curOp.forceUpdate=!0,Hs(t,n,r)}))};var oa=0;Pt(js),js.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){var t=this.doc.cm,n=t&&!t.curOp;if(n&&ti(t),Dt(this,"clear")){var r=this.find();r&&Nn(this,"clear",r.from,r.to)}for(var i=null,s=null,o=0;o<this.lines.length;++o){var u=e.lines[o],a=X(u.markedSpans,e);t&&!e.collapsed?di(t,A(u),"text"):t&&(null!=a.to&&(s=A(u)),null!=a.from&&(i=A(u))),u.markedSpans=V(u.markedSpans,a),null==a.from&&e.collapsed&&!ht(e.doc,u)&&t&&L(u,gr(t.display))}if(t&&this.collapsed&&!t.options.lineWrapping)for(var f=0;f<this.lines.length;++f){var l=at(e.lines[f]),c=vt(l);c>t.display.maxLineLength&&(t.display.maxLine=l,t.display.maxLineLength=c,t.display.maxLineChanged=!0)}null!=i&&t&&this.collapsed&&pi(t,i,s+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,t&&ds(t.doc)),t&&Nn(t,"markerCleared",t,this),n&&ni(t),this.parent&&this.parent.clear()}},js.prototype.find=function(e,t){var n=this;null==e&&"bookmark"==this.type&&(e=1);for(var r,i,s=0;s<this.lines.length;++s){var o=n.lines[s],u=X(o.markedSpans,n);if(null!=u.from&&(r=D(t?o:A(o),u.from),e==-1))return r;if(null!=u.to&&(i=D(t?o:A(o),u.to),1==e))return i}return r&&{from:r,to:i}},js.prototype.changed=function(){var e=this.find(-1,!0),t=this,n=this.doc.cm;e&&n&&fi(n,function(){var r=e.line,i=A(e.line),s=Gn(n,i);if(s&&(ir(s),n.curOp.selectionChanged=n.curOp.forceUpdate=!0),n.curOp.updateMaxLine=!0,!ht(t.doc,r)&&null!=t.height){var o=t.height;t.height=null;var u=In(t)-o;u&&L(r,r.height+u)}})},js.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&h(t.maybeHiddenMarkers,this)!=-1||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},js.prototype.detachLine=function(e){if(this.lines.splice(h(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},Pt(Is),Is.prototype.clear=function(){var e=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var t=0;t<this.markers.length;++t)e.markers[t].clear();Nn(this,"clear")}},Is.prototype.find=function(e,t){return this.primary.find(e,t)};var ua=0,aa=function(e,t,n,r){if(!(this instanceof aa))return new aa(e,t,n,r);null==n&&(n=0),Ds.call(this,[new _s([new fn("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=n;var i=D(n,0);this.sel=Di(i),this.history=new Xi(null),this.id=++ua,this.modeOption=t,this.lineSep=r,this.extend=!1,"string"==typeof e&&(e=this.splitLines(e)),Ui(this,{from:i,to:i,text:e}),cs(this,Di(i),Cu)};aa.prototype=b(Ds.prototype,{constructor:aa,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,r=0;r<t.length;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=k(this,this.first,this.first+this.size);return e===!1?t:t.join(e||this.lineSeparator())},setValue:hi(function(e){var t=D(this.first,0),n=this.first+this.size-1;Es(this,{from:t,to:D(n,N(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),cs(this,Di(t))}),replaceRange:function(e,t,n,r){t=I(this,t),n=n?I(this,n):t,ks(this,e,t,n,r)},getRange:function(e,t,n){var r=C(this,I(this,e),I(this,t));return n===!1?r:r.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(M(this,e))return N(this,e)},getLineNumber:function(e){return A(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=N(this,e)),at(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return I(this,e)},getCursor:function(e){var t,n=this.sel.primary();return t=null==e||"head"==e?n.head:"anchor"==e?n.anchor:"end"==e||"to"==e||e===!1?n.to():n.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:hi(function(e,t,n){as(this,I(this,"number"==typeof e?D(e,t||0):e),null,n)}),setSelection:hi(function(e,t,n){as(this,I(this,e),I(this,t||e),n)}),extendSelection:hi(function(e,t,n){ss(this,I(this,e),t&&I(this,t),n)}),extendSelections:hi(function(e,t){os(this,R(this,e),t)}),extendSelectionsBy:hi(function(e,t){var n=m(this.sel.ranges,e);os(this,R(this,n),t)}),setSelections:hi(function(e,t,n){var r=this;if(e.length){for(var i=[],s=0;s<e.length;s++)i[s]=new Mi(I(r,e[s].anchor),I(r,e[s].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),cs(this,_i(i,t),n)}}),addSelection:hi(function(e,t,n){var r=this.sel.ranges.slice(0);r.push(new Mi(I(this,e),I(this,t||e))),cs(this,_i(r,r.length-1),n)}),getSelection:function(e){for(var t,n=this,r=this.sel.ranges,i=0;i<r.length;i++){var s=C(n,r[i].from(),r[i].to());t=t?t.concat(s):s}return e===!1?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=this,n=[],r=this.sel.ranges,i=0;i<r.length;i++){var s=C(t,r[i].from(),r[i].to());e!==!1&&(s=s.join(e||t.lineSeparator())),n[i]=s}return n},replaceSelection:function(e,t,n){for(var r=[],i=0;i<this.sel.ranges.length;i++)r[i]=e;this.replaceSelections(r,t,n||"+input")},replaceSelections:hi(function(e,t,n){for(var r=this,i=[],s=this.sel,o=0;o<s.ranges.length;o++){var u=s.ranges[o];i[o]={from:u.from(),to:u.to(),text:r.splitLines(e[o]),origin:n}}for(var a=t&&"end"!=t&&Fi(this,i,t),f=i.length-1;f>=0;f--)Es(r,i[f]);a?ls(this,a):this.cm&&Zr(this.cm)}),undo:hi(function(){xs(this,"undo")}),redo:hi(function(){xs(this,"redo")}),undoSelection:hi(function(){xs(this,"undo",!0)}),redoSelection:hi(function(){xs(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,r=0;r<e.done.length;r++)e.done[r].ranges||++t;for(var i=0;i<e.undone.length;i++)e.undone[i].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Xi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:rs(this.history.done),undone:rs(this.history.undone)}},setHistory:function(e){var t=this.history=new Xi(this.history.maxGeneration);t.done=rs(e.done.slice(0),null,!0),t.undone=rs(e.undone.slice(0),null,!0)},setGutterMarker:hi(function(e,t,n){return Ms(this,e,"gutter",function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&S(r)&&(e.gutterMarkers=null),!0})}),clearGutter:hi(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&Ms(t,n,"gutter",function(){return n.gutterMarkers[e]=null,S(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!M(this,e))return null;if(t=e,e=N(this,e),!e)return null}else if(t=A(e),null==t)return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:hi(function(t,n,r){return Ms(this,t,"gutter"==n?"gutter":"class",function(t){var i="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass";if(t[i]){if(e(r).test(t[i]))return!1;t[i]+=" "+r}else t[i]=r;return!0})}),removeLineClass:hi(function(t,n,r){return Ms(this,t,"gutter"==n?"gutter":"class",function(t){var i="text"==n?"textClass":"background"==n?"bgClass":"gutter"==n?"gutterClass":"wrapClass",s=t[i];if(!s)return!1;if(null==r)t[i]=null;else{var o=s.match(e(r));if(!o)return!1;var u=o.index+o[0].length;t[i]=s.slice(0,o.index)+(o.index&&u!=s.length?" ":"")+s.slice(u)||null}return!0})}),addLineWidget:hi(function(e,t,n){return Bs(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return Fs(this,I(this,e),I(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return e=I(this,e),Fs(this,e,e,n,"bookmark")},findMarksAt:function(e){e=I(this,e);var t=[],n=N(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},findMarks:function(e,t,n){e=I(this,e),t=I(this,t);var r=[],i=e.line;return this.iter(e.line,t.line+1,function(s){var o=s.markedSpans;if(o)for(var u=0;u<o.length;u++){var a=o[u];null!=a.to&&i==e.line&&e.ch>=a.to||null==a.from&&i!=e.line||null!=a.from&&i==t.line&&a.from>=t.ch||n&&!n(a.marker)||r.push(a.marker.parent||a.marker)}++i}),r},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)null!=n[r].from&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first,r=this.lineSeparator().length;return this.iter(function(i){var s=i.text.length+r;return s>e?(t=e,!0):(e-=s,void ++n)}),I(this,D(n,t))},indexFromPos:function(e){e=I(this,e);var t=e.ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new aa(k(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var r=new aa(k(this,t,n),e.mode||this.modeOption,t,this.lineSep);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],Us(r,Rs(this)),r},unlinkDoc:function(e){var t=this;if(e instanceof Mo&&(e=e.doc),this.linked)for(var n=0;n<this.linked.length;++n){var r=t.linked[n];if(r.doc==e){t.linked.splice(n,1),e.unlinkDoc(t),zs(Rs(t));break}}if(e.history==this.history){var i=[e.id];zi(e,function(e){return i.push(e.id)},!0),e.history=new Xi(null),e.history.done=rs(this.history.done,i),e.history.undone=rs(this.history.undone,i)}},iterLinkedDocs:function(e){zi(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Iu(e)},lineSeparator:function(){return this.lineSep||"\n"}}),aa.prototype.eachLine=aa.prototype.iter;for(var fa=0,la=!1,ca={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},ha=0;ha<10;ha++)ca[ha+48]=ca[ha+96]=String(ha);for(var pa=65;pa<=90;pa++)ca[pa]=String.fromCharCode(pa);for(var da=1;da<=12;da++)ca[da+111]=ca[da+63235]="F"+da;var va={};va.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},va.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},va.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},va.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},va.default=pu?va.macDefault:va.pcDefault;var ma,ga,ya={selectAll:bs,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),Cu)},killLine:function(e){return io(e,function(t){if(t.empty()){var n=N(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:D(t.head.line+1,0)}:{from:t.head,to:D(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return io(e,function(t){return{from:D(t.from().line,0),to:I(e.doc,D(t.to().line+1,0))}})},delLineLeft:function(e){return io(e,function(e){return{from:D(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return io(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return{from:r,to:t.from()}})},delWrappedLineRight:function(e){return io(e,function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:r}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(D(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(D(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return so(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return uo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return oo(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},Lu)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},Lu)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.charCoords(t.head,"div").top+5,r=e.coordsChar({left:0,top:n},"div");return r.ch<e.getLine(r.line).search(/\S/)?uo(e,t.head):r},Lu)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("	")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),r=e.options.tabSize,i=0;i<n.length;i++){var s=n[i].from(),o=l(e.getLine(s.line),s.ch,r);t.push(d(r-o%r))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return fi(e,function(){for(var t=e.listSelections(),n=[],r=0;r<t.length;r++)if(t[r].empty()){var i=t[r].head,s=N(e.doc,i.line).text;if(s)if(i.ch==s.length&&(i=new D(i.line,i.ch-1)),i.ch>0)i=new D(i.line,i.ch+1),e.replaceRange(s.charAt(i.ch-1)+s.charAt(i.ch-2),D(i.line,i.ch-2),i,"+transpose");else if(i.line>e.doc.first){var o=N(e.doc,i.line-1).text;o&&(i=new D(i.line,1),e.replaceRange(s.charAt(0)+e.doc.lineSeparator()+o.charAt(o.length-1),D(i.line-1,o.length-1),i,"+transpose"))}n.push(new Mi(i,i))}e.setSelections(n)})},newlineAndIndent:function(e){return fi(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var r=0;r<t.length;r++)e.indentLine(t[r].from().line,null,!0);Zr(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}},ba=new c,wa=null,Ea={toString:function(){return"CodeMirror.Init"}},Sa={},xa={};Mo.defaults=Sa,Mo.optionHandlers=xa;var Ta=[];Mo.defineInitHook=function(e){return Ta.push(e)};var Na=null,Ca=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new c,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};Ca.prototype.init=function(e){function t(e){if(!Mt(i,e)){if(i.somethingSelected())Po({lineWise:!1,text:i.getSelections()}),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=Fo(i);Po({lineWise:!0,text:t.text}),"cut"==e.type&&i.operation(function(){i.setSelections(t.ranges,0,Cu),i.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var n=Na.text.join("\n");if(e.clipboardData.setData("Text",n),e.clipboardData.getData("Text")==n)return void e.preventDefault()}var o=qo(),u=o.firstChild;i.display.lineSpace.insertBefore(o,i.display.lineSpace.firstChild),u.value=Na.text.join("\n");var a=document.activeElement;Eu(u),setTimeout(function(){i.display.lineSpace.removeChild(o),a.focus(),a==s&&r.showPrimarySelection()},50)}}var n=this,r=this,i=r.cm,s=r.div=e.lineDiv;Io(s,i.options.spellcheck),ju(s,"paste",function(e){Mt(i,e)||Bo(e,i)||ru<=11&&setTimeout(li(i,function(){r.pollContent()||pi(i)}),20)}),ju(s,"compositionstart",function(e){n.composing={data:e.data,done:!1}}),ju(s,"compositionupdate",function(e){n.composing||(n.composing={data:e.data,done:!1})}),ju(s,"compositionend",function(e){n.composing&&(e.data!=n.composing.data&&n.readFromDOMSoon(),n.composing.done=!0)}),ju(s,"touchstart",function(){return r.forceCompositionEnd()}),ju(s,"input",function(){n.composing||n.readFromDOMSoon()}),ju(s,"copy",t),ju(s,"cut",t)},Ca.prototype.prepareSelection=function(){var e=Cr(this.cm,!1);return e.focus=this.cm.state.focused,e},Ca.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ca.prototype.showPrimarySelection=function(){var e=window.getSelection(),t=this.cm.doc.sel.primary(),n=$o(this.cm,e.anchorNode,e.anchorOffset),r=$o(this.cm,e.focusNode,e.focusOffset);if(!n||n.bad||!r||r.bad||0!=P(j(n,r),t.from())||0!=P(B(n,r),t.to())){var i=Wo(this.cm,t.from()),s=Wo(this.cm,t.to());if(i||s){var o=this.cm.display.view,u=e.rangeCount&&e.getRangeAt(0);if(i){if(!s){var a=o[o.length-1].measure,f=a.maps?a.maps[a.maps.length-1]:a.map;s={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}}else i={node:o[0].measure.map[2],offset:0};var l;try{l=gu(i.node,i.offset,s.offset,s.node)}catch(e){}l&&(!Zo&&this.cm.state.focused?(e.collapse(i.node,i.offset),l.collapsed||(e.removeAllRanges(),e.addRange(l))):(e.removeAllRanges(),e.addRange(l)),u&&null==e.anchorNode?e.addRange(u):Zo&&this.startGracePeriod()),this.rememberSelection()}}},Ca.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Ca.prototype.showMultipleSelections=function(e){n(this.cm.display.cursorDiv,e.cursors),n(this.cm.display.selectionDiv,e.selection)},Ca.prototype.rememberSelection=function(){var e=window.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ca.prototype.selectionInEditor=function(){var e=window.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return i(this.div,t)},Ca.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ca.prototype.blur=function(){this.div.blur()},Ca.prototype.getField=function(){return this.div},Ca.prototype.supportsTouch=function(){return!0},Ca.prototype.receivedFocus=function(){function e(){t.cm.state.focused&&(t.pollSelection(),t.polling.set(t.cm.options.pollInterval,e))}var t=this;this.selectionInEditor()?this.pollSelection():fi(this.cm,function(){return t.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,e)},Ca.prototype.selectionChanged=function(){var e=window.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ca.prototype.pollSelection=function(){if(!this.composing&&null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=window.getSelection(),t=this.cm;this.rememberSelection();var n=$o(t,e.anchorNode,e.anchorOffset),r=$o(t,e.focusNode,e.focusOffset);n&&r&&fi(t,function(){cs(t.doc,Di(n,r),Cu),(n.bad||r.bad)&&(t.curOp.selectionChanged=!0)})}},Ca.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e=this.cm,t=e.display,n=e.doc.sel.primary(),r=n.from(),i=n.to();if(0==r.ch&&r.line>e.firstLine()&&(r=D(r.line-1,N(e.doc,r.line-1).length)),i.ch==N(e.doc,i.line).text.length&&i.line<e.lastLine()&&(i=D(i.line+1,0)),r.line<t.viewFrom||i.line>t.viewTo-1)return!1;var s,o,u;r.line==t.viewFrom||0==(s=Tr(e,r.line))?(o=A(t.view[0].line),u=t.view[0].node):(o=A(t.view[s].line),u=t.view[s-1].node.nextSibling);var a,f,l=Tr(e,i.line);if(l==t.view.length-1?(a=t.viewTo-1,f=t.lineDiv.lastChild):(a=A(t.view[l+1].line)-1,f=t.view[l+1].node.previousSibling),!u)return!1;for(var c=e.doc.splitLines(Vo(e,u,f,o,a)),h=C(e.doc,D(o,0),D(a,N(e.doc,a).text.length));c.length>1&&h.length>1;)if(v(c)==v(h))c.pop(),h.pop(),a--;else{if(c[0]!=h[0])break;c.shift(),h.shift(),o++}for(var p=0,d=0,m=c[0],g=h[0],y=Math.min(m.length,g.length);p<y&&m.charCodeAt(p)==g.charCodeAt(p);)++p;for(var b=v(c),w=v(h),E=Math.min(b.length-(1==c.length?p:0),w.length-(1==h.length?p:0));d<E&&b.charCodeAt(b.length-d-1)==w.charCodeAt(w.length-d-1);)++d;c[c.length-1]=b.slice(0,b.length-d).replace(/^\u200b+/,""),c[0]=c[0].slice(p).replace(/\u200b+$/,"");var S=D(o,p),x=D(a,h.length?v(h).length-d:0);return c.length>1||c[0]||P(S,x)?(ks(e.doc,c,S,x,"+input"),!0):void 0},Ca.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ca.prototype.reset=function(){this.forceCompositionEnd()},Ca.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.pollContent()||pi(this.cm),this.div.blur(),this.div.focus())},Ca.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}!e.cm.isReadOnly()&&e.pollContent()||fi(e.cm,function(){return pi(e.cm)})},80))},Ca.prototype.setUneditable=function(e){e.contentEditable="false"},Ca.prototype.onKeyPress=function(e){e.preventDefault(),this.cm.isReadOnly()||li(this.cm,Ho)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},Ca.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Ca.prototype.onContextMenu=function(){},Ca.prototype.resetPosition=function(){},Ca.prototype.needsContentAttribute=!0;var ka=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new c,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null};ka.prototype.init=function(e){function t(e){if(!Mt(i,e)){if(i.somethingSelected())Po({lineWise:!1,text:i.getSelections()}),r.inaccurateSelection&&(r.prevInput="",r.inaccurateSelection=!1,o.value=Na.text.join("\n"),Eu(o));else{if(!i.options.lineWiseCopyCut)return;var t=Fo(i);Po({lineWise:!0,text:t.text}),"cut"==e.type?i.setSelections(t.ranges,null,Cu):(r.prevInput="",o.value=t.text.join("\n"),Eu(o))}"cut"==e.type&&(i.state.cutIncoming=!0)}}var n=this,r=this,i=this.cm,s=this.wrapper=qo(),o=this.textarea=s.firstChild;e.wrapper.insertBefore(s,e.wrapper.firstChild),cu&&(o.style.width="0px"),ju(o,"input",function(){nu&&ru>=9&&n.hasSelection&&(n.hasSelection=null),r.poll()}),ju(o,"paste",function(e){Mt(i,e)||Bo(e,i)||(i.state.pasteIncoming=!0,r.fastPoll())}),ju(o,"cut",t),ju(o,"copy",t),ju(e.scroller,"paste",function(t){qn(e,t)||Mt(i,t)||(i.state.pasteIncoming=!0,r.focus())}),ju(e.lineSpace,"selectstart",function(t){qn(e,t)||Ht(t)}),ju(o,"compositionstart",function(){var e=i.getCursor("from");r.composing&&r.composing.range.clear(),r.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}}),ju(o,"compositionend",function(){r.composing&&(r.poll(),r.composing.range.clear(),r.composing=null)})},ka.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,r=Cr(e);if(e.options.moveInputWithCursor){var i=hr(e,n.sel.primary().head,"div"),s=t.wrapper.getBoundingClientRect(),o=t.lineDiv.getBoundingClientRect();r.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,i.top+o.top-s.top)),r.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,i.left+o.left-s.left))}return r},ka.prototype.showSelection=function(e){var t=this.cm,r=t.display;n(r.cursorDiv,e.cursors),n(r.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},ka.prototype.reset=function(e){if(!this.contextMenuPending){var t,n,r=this.cm,i=r.doc;if(r.somethingSelected()){this.prevInput="";var s=i.sel.primary();t=Ru&&(s.to().line-s.from().line>100||(n=r.getSelection()).length>1e3);var o=t?"-":n||r.getSelection();this.textarea.value=o,r.state.focused&&Eu(this.textarea),nu&&ru>=9&&(this.hasSelection=o)}else e||(this.prevInput=this.textarea.value="",nu&&ru>=9&&(this.hasSelection=null));this.inaccurateSelection=t}},ka.prototype.getField=function(){return this.textarea},ka.prototype.supportsTouch=function(){return!1},ka.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!hu||s()!=this.textarea))try{this.textarea.focus()}catch(e){}},ka.prototype.blur=function(){this.textarea.blur()},ka.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ka.prototype.receivedFocus=function(){this.slowPoll()},ka.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},ka.prototype.fastPoll=function(){function e(){var r=n.poll();r||t?(n.pollingFast=!1,n.slowPoll()):(t=!0,n.polling.set(60,e))}var t=!1,n=this;n.pollingFast=!0,n.polling.set(20,e)},ka.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,r=this.prevInput;if(this.contextMenuPending||!t.state.focused||qu(n)&&!r&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var i=n.value;if(i==r&&!t.somethingSelected())return!1;if(nu&&ru>=9&&this.hasSelection===i||pu&&/[\uf700-\uf7ff]/.test(i))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var s=i.charCodeAt(0);if(8203!=s||r||(r="​"),8666==s)return this.reset(),this.cm.execCommand("undo")}for(var o=0,u=Math.min(r.length,i.length);o<u&&r.charCodeAt(o)==i.charCodeAt(o);)++o;return fi(t,function(){Ho(t,i.slice(o),r.length-o,null,e.composing?"*compose":null),i.length>1e3||i.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=i,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ka.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ka.prototype.onKeyPress=function(){nu&&ru>=9&&(this.hasSelection=null),this.fastPoll()},ka.prototype.onContextMenu=function(e){function t(){if(null!=o.selectionStart){var e=i.somethingSelected(),t="​"+(e?o.value:"");o.value="⇚",o.value=t,r.prevInput=e?"":"​",o.selectionStart=1,o.selectionEnd=t.length,s.selForContextMenu=i.doc.sel}}function n(){if(r.contextMenuPending=!1,r.wrapper.style.cssText=c,o.style.cssText=l,nu&&ru<9&&s.scrollbars.setScrollTop(s.scroller.scrollTop=a),null!=o.selectionStart){(!nu||nu&&ru<9)&&t();var e=0,n=function(){s.selForContextMenu==i.doc.sel&&0==o.selectionStart&&o.selectionEnd>0&&"​"==r.prevInput?li(i,bs)(i):e++<10?s.detectingSelectAll=setTimeout(n,500):s.input.reset()};s.detectingSelectAll=setTimeout(n,200)}}var r=this,i=r.cm,s=i.display,o=r.textarea,u=xr(i,e),a=s.scroller.scrollTop;if(u&&!uu){var f=i.options.resetSelectionOnContextMenu;f&&i.doc.sel.contains(u)==-1&&li(i,cs)(i.doc,Di(u),Cu);var l=o.style.cssText,c=r.wrapper.style.cssText;r.wrapper.style.cssText="position: absolute";var h=r.wrapper.getBoundingClientRect();o.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-h.top-5)+"px; left: "+(e.clientX-h.left-5)+"px;\n      z-index: 1000; background: "+(nu?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var p;if(iu&&(p=window.scrollY),s.input.focus(),iu&&window.scrollTo(null,p),s.input.reset(),i.somethingSelected()||(o.value=r.prevInput=" "),r.contextMenuPending=!0,s.selForContextMenu=i.doc.sel,clearTimeout(s.detectingSelectAll),nu&&ru>=9&&t(),bu){Ft(e);var d=function(){At(window,"mouseup",d),setTimeout(n,20)};ju(window,"mouseup",d)}else setTimeout(n,50)}},ka.prototype.readOnlyChanged=function(e){e||this.reset()},ka.prototype.setUneditable=function(){},ka.prototype.needsContentAttribute=!1,ko(Mo),Ro(Mo);var La="iter insert remove copy getEditor constructor".split(" ");for(var Aa in aa.prototype)aa.prototype.hasOwnProperty(Aa)&&h(La,Aa)<0&&(Mo.prototype[Aa]=function(e){return function(){return e.apply(this.doc,arguments)}}(aa.prototype[Aa]));return Pt(aa),Mo.inputStyles={textarea:ka,contenteditable:Ca},Mo.defineMode=function(e){Mo.defaults.mode||"null"==e||(Mo.defaults.mode=e),Wt.apply(this,arguments)},Mo.defineMIME=Xt,Mo.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Mo.defineMIME("text/plain","null"),Mo.defineExtension=function(e,t){Mo.prototype[e]=t},Mo.defineDocExtension=function(e,t){aa.prototype[e]=t},Mo.fromTextArea=Ko,Qo(Mo),Mo.version="5.23.0",Mo})},{}],6:[function(t,n,r){!function(i){"object"==typeof r&&"object"==typeof n?i(t("../../lib/codemirror"),t("../xml/xml"),t("../meta")):"function"==typeof e&&e.amd?e(["../../lib/codemirror","../xml/xml","../meta"],i):i(CodeMirror)}(function(e){"use strict";e.defineMode("markdown",function(t,n){function r(n){if(e.findModeByName){var r=e.findModeByName(n);r&&(n=r.mime||r.mimes[0])}var i=e.getMode(t,n);return"null"==i.name?null:i}function i(e,t,n){return t.f=t.inline=n,n(e,t)}function s(e,t,n){return t.f=t.block=n,n(e,t)}function o(e){return!e||!/\S/.test(e.string)}function u(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,S&&e.f==f&&(e.f=d,e.block=a),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine=null,null}function a(t,s){var u=t.sol(),a=s.list!==!1,f=s.indentedCode;s.indentedCode=!1,a&&(s.indentationDiff>=0?(s.indentationDiff<4&&(s.indentation-=s.indentationDiff),s.list=null):s.indentation>0?s.list=null:s.list=!1);var c=null;if(s.indentationDiff>=4)return t.skipToEnd(),f||o(s.prevLine)?(s.indentation-=4,s.indentedCode=!0,x.code):null;if(t.eatSpace())return null;if((c=t.match(L))&&c[1].length<=6)return s.header=c[1].length,n.highlightFormatting&&(s.formatting="header"),s.f=s.inline,h(s);if(!(o(s.prevLine)||s.quote||a||f)&&(c=t.match(A)))return s.header="="==c[0].charAt(0)?1:2,n.highlightFormatting&&(s.formatting="header"),s.f=s.inline,h(s);if(t.eat(">"))return s.quote=u?1:s.quote+1,n.highlightFormatting&&(s.formatting="quote"),t.eatSpace(),h(s);if("["===t.peek())return i(t,s,y);if(t.match(N,!0))return s.hr=!0,x.hr;if(c=t.match(C)){var p=c[1]?"ol":"ul";for(s.indentation=t.column()+t.current().length,s.list=!0;s.listStack&&t.column()<s.listStack[s.listStack.length-1];)s.listStack.pop();return s.listStack.push(s.indentation),n.taskLists&&t.match(k,!1)&&(s.taskList=!0),s.f=s.inline,n.highlightFormatting&&(s.formatting=["list","list-"+p]),h(s)}return n.fencedCodeBlocks&&(c=t.match(M,!0))?(s.fencedChars=c[1],s.localMode=r(c[2]),s.localMode&&(s.localState=e.startState(s.localMode)),s.f=s.block=l,n.highlightFormatting&&(s.formatting="code-block"),s.code=-1,h(s)):i(t,s,s.inline)}function f(t,n){var r=E.token(t,n.htmlState);if(!S){var i=e.innerMode(E,n.htmlState);("xml"==i.mode.name&&null===i.state.tagStart&&!i.state.context&&i.state.tokenize.isInText||n.md_inside&&t.current().indexOf(">")>-1)&&(n.f=d,n.block=a,n.htmlState=null)}return r}function l(e,t){return t.fencedChars&&e.match(t.fencedChars,!1)?(t.localMode=t.localState=null,t.f=t.block=c,null):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),x.code)}function c(e,t){e.match(t.fencedChars),t.block=a,t.f=d,t.fencedChars=null,n.highlightFormatting&&(t.formatting="code-block"),t.code=1;var r=h(t);return t.code=0,r}function h(e){var t=[];if(e.formatting){t.push(x.formatting),"string"==typeof e.formatting&&(e.formatting=[e.formatting]);for(var r=0;r<e.formatting.length;r++)t.push(x.formatting+"-"+e.formatting[r]),"header"===e.formatting[r]&&t.push(x.formatting+"-"+e.formatting[r]+"-"+e.header),"quote"===e.formatting[r]&&(!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(x.formatting+"-"+e.formatting[r]+"-"+e.quote):t.push("error"))}if(e.taskOpen)return t.push("meta"),t.length?t.join(" "):null;if(e.taskClosed)return t.push("property"),t.length?t.join(" "):null;if(e.linkHref?t.push(x.linkHref,"url"):(e.strong&&t.push(x.strong),e.em&&t.push(x.em),e.strikethrough&&t.push(x.strikethrough),e.linkText&&t.push(x.linkText),e.code&&t.push(x.code),e.image&&t.push(x.image),e.imageAltText&&t.push(x.imageAltText,"link"),e.imageMarker&&t.push(x.imageMarker)),e.header&&t.push(x.header,x.header+"-"+e.header),e.quote&&(t.push(x.quote),!n.maxBlockquoteDepth||n.maxBlockquoteDepth>=e.quote?t.push(x.quote+"-"+e.quote):t.push(x.quote+"-"+n.maxBlockquoteDepth)),e.list!==!1){var i=(e.listStack.length-1)%3;i?1===i?t.push(x.list2):t.push(x.list3):t.push(x.list1)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function p(e,t){if(e.match(O,!0))return h(t)}function d(t,r){var i=r.text(t,r);if("undefined"!=typeof i)return i;if(r.list)return r.list=null,h(r);if(r.taskList){var o="x"!==t.match(k,!0)[1];return o?r.taskOpen=!0:r.taskClosed=!0,n.highlightFormatting&&(r.formatting="task"),r.taskList=!1,h(r)}if(r.taskOpen=!1,r.taskClosed=!1,r.header&&t.match(/^#+$/,!0))return n.highlightFormatting&&(r.formatting="header"),h(r);var u=t.sol(),a=t.next();if(r.linkTitle){r.linkTitle=!1;var l=a;"("===a&&(l=")"),l=(l+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var c="^\\s*(?:[^"+l+"\\\\]+|\\\\\\\\|\\\\.)"+l;if(t.match(new RegExp(c),!0))return x.linkHref}if("`"===a){var p=r.formatting;n.highlightFormatting&&(r.formatting="code"),t.eatWhile("`");var d=t.current().length;if(0==r.code)return r.code=d,h(r);if(d==r.code){var g=h(r);return r.code=0,g}return r.formatting=p,h(r)}if(r.code)return h(r);if("\\"===a&&(t.next(),n.highlightFormatting)){var y=h(r),b=x.formatting+"-escape";return y?y+" "+b:b}if("!"===a&&t.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return r.imageMarker=!0,r.image=!0,n.highlightFormatting&&(r.formatting="image"),h(r);if("["===a&&r.imageMarker&&t.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return r.imageMarker=!1,r.imageAltText=!0,n.highlightFormatting&&(r.formatting="image"),h(r);if("]"===a&&r.imageAltText){n.highlightFormatting&&(r.formatting="image");var y=h(r);return r.imageAltText=!1,r.image=!1,r.inline=r.f=m,y}if("["===a&&t.match(/[^\]]*\](\(.*\)| ?\[.*?\])/,!1)&&!r.image)return r.linkText=!0,n.highlightFormatting&&(r.formatting="link"),h(r);if("]"===a&&r.linkText&&t.match(/\(.*?\)| ?\[.*?\]/,!1)){n.highlightFormatting&&(r.formatting="link");var y=h(r);return r.linkText=!1,r.inline=r.f=m,y}if("<"===a&&t.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=v,n.highlightFormatting&&(r.formatting="link");var y=h(r);return y?y+=" ":y="",y+x.linkInline}if("<"===a&&t.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1)){r.f=r.inline=v,n.highlightFormatting&&(r.formatting="link");var y=h(r);return y?y+=" ":y="",y+x.linkEmail}if("<"===a&&t.match(/^(!--|[a-z]+(?:\s+[a-z_:.\-]+(?:\s*=\s*[^ >]+)?)*\s*>)/i,!1)){var w=t.string.indexOf(">",t.pos);if(w!=-1){var S=t.string.substring(t.start,w);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(S)&&(r.md_inside=!0)}return t.backUp(1),r.htmlState=e.startState(E),s(t,r,f)}if("<"===a&&t.match(/^\/\w*?>/))return r.md_inside=!1,"tag";var T=!1;if(!n.underscoresBreakWords&&"_"===a&&"_"!==t.peek()&&t.match(/(\w)/,!1)){var N=t.pos-2;if(N>=0){var C=t.string.charAt(N);"_"!==C&&C.match(/(\w)/,!1)&&(T=!0)}}if("*"===a||"_"===a&&!T){if(!u||" "!==t.peek()){if(r.strong===a&&t.eat(a)){n.highlightFormatting&&(r.formatting="strong");var g=h(r);return r.strong=!1,g}if(!r.strong&&t.eat(a))return r.strong=a,n.highlightFormatting&&(r.formatting="strong"),h(r);if(r.em===a){n.highlightFormatting&&(r.formatting="em");var g=h(r);return r.em=!1,g}if(!r.em)return r.em=a,n.highlightFormatting&&(r.formatting="em"),h(r)}}else if(" "===a&&(t.eat("*")||t.eat("_"))){if(" "===t.peek())return h(r);t.backUp(1)}if(n.strikethrough)if("~"===a&&t.eatWhile(a)){if(r.strikethrough){n.highlightFormatting&&(r.formatting="strikethrough");var g=h(r);return r.strikethrough=!1,g}if(t.match(/^[^\s]/,!1))return r.strikethrough=!0,n.highlightFormatting&&(r.formatting="strikethrough"),h(r)}else if(" "===a&&t.match(/^~~/,!0)){if(" "===t.peek())return h(r);t.backUp(2)}return" "===a&&(t.match(/ +$/,!1)?r.trailingSpace++:r.trailingSpace&&(r.trailingSpaceNewLine=!0)),h(r)}function v(e,t){var r=e.next();if(">"===r){t.f=t.inline=d,n.highlightFormatting&&(t.formatting="link");var i=h(t);return i?i+=" ":i="",i+x.linkInline}return e.match(/^[^>]+/,!0),x.linkInline}function m(e,t){if(e.eatSpace())return null;var r=e.next();return"("===r||"["===r?(t.f=t.inline=g("("===r?")":"]",0),n.highlightFormatting&&(t.formatting="link-string"),t.linkHref=!0,h(t)):"error"}function g(e){return function(t,r){var i=t.next();if(i===e){r.f=r.inline=d,n.highlightFormatting&&(r.formatting="link-string");var s=h(r);return r.linkHref=!1,s}return t.match(_[e]),r.linkHref=!0,h(r)}}function y(e,t){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(t.f=b,e.next(),n.highlightFormatting&&(t.formatting="link"),t.linkText=!0,h(t)):i(e,t,d)}function b(e,t){if(e.match(/^\]:/,!0)){t.f=t.inline=w,n.highlightFormatting&&(t.formatting="link");var r=h(t);return t.linkText=!1,r}return e.match(/^([^\]\\]|\\.)+/,!0),x.linkText}function w(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=d,x.linkHref+" url")}var E=e.getMode(t,"text/html"),S="null"==E.name;void 0===n.highlightFormatting&&(n.highlightFormatting=!1),void 0===n.maxBlockquoteDepth&&(n.maxBlockquoteDepth=0),void 0===n.underscoresBreakWords&&(n.underscoresBreakWords=!0),void 0===n.taskLists&&(n.taskLists=!1),void 0===n.strikethrough&&(n.strikethrough=!1),void 0===n.tokenTypeOverrides&&(n.tokenTypeOverrides={});var x={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough"};for(var T in x)x.hasOwnProperty(T)&&n.tokenTypeOverrides[T]&&(x[T]=n.tokenTypeOverrides[T]);var N=/^([*\-_])(?:\s*\1){2,}\s*$/,C=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,k=/^\[(x| )\](?=\s)/,L=n.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,A=/^ *(?:\={1,}|-{1,})\s*$/,O=/^[^#!\[\]*_\\<>` "'(~]+/,M=new RegExp("^("+(n.fencedCodeBlocks===!0?"~~~+|```+":n.fencedCodeBlocks)+")[ \\t]*([\\w+#-]*)"),_={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\\]]|\\.)*\])*?(?=\])/},D={startState:function(){return{f:a,prevLine:null,thisLine:null,block:a,htmlState:null,indentation:0,inline:d,text:p,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,fencedChars:null}},copyState:function(t){return{f:t.f,prevLine:t.prevLine,thisLine:t.thisLine,block:t.block,htmlState:t.htmlState&&e.copyState(E,t.htmlState),indentation:t.indentation,localMode:t.localMode,localState:t.localMode?e.copyState(t.localMode,t.localState):null,inline:t.inline,text:t.text,formatting:!1,linkTitle:t.linkTitle,code:t.code,em:t.em,strong:t.strong,strikethrough:t.strikethrough,header:t.header,hr:t.hr,taskList:t.taskList,list:t.list,listStack:t.listStack.slice(0),quote:t.quote,indentedCode:t.indentedCode,trailingSpace:t.trailingSpace,trailingSpaceNewLine:t.trailingSpaceNewLine,md_inside:t.md_inside,fencedChars:t.fencedChars}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine){var n=t.header||t.hr;if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0)||n){if(u(t),!n)return null;t.prevLine=null}t.prevLine=t.thisLine,t.thisLine=e,t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.f=t.block;var r=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentationDiff=Math.min(r-t.indentation,4),t.indentation=t.indentation+t.indentationDiff,r>0)return null}return t.f(e,t)},innerMode:function(e){return e.block==f?{state:e.htmlState,mode:E}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:D}},blankLine:u,getType:h,closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return D},"xml"),e.defineMIME("text/x-markdown","markdown")})},{"../../lib/codemirror":5,"../meta":7,"../xml/xml":8}],7:[function(t,n,r){!function(i){"object"==typeof r&&"object"==typeof n?i(t("../lib/codemirror")):"function"==typeof e&&e.amd?e(["../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";e.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["pgp"]},{name:"ASN.1",mime:"text/x-ttcn-asn",mode:"asn.1",ext:["asn","asn1"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"Brainfuck",mime:"text/x-brainfuck",mode:"brainfuck",ext:["b","bf"]},{name:"C",mime:"text/x-csrc",mode:"clike",ext:["c","h"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:["cpp","c++","cc","cxx","hpp","h++","hh","hxx"],alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj","cljc","cljx"]},{name:"ClojureScript",mime:"text/x-clojurescript",mode:"clojure",ext:["cljs"]},{name:"Closure Stylesheets (GSS)",mime:"text/x-gss",mode:"css",ext:["gss"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mime:"text/x-coffeescript",mode:"coffeescript",ext:["coffee"],alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"Crystal",mime:"text/x-crystal",mode:"crystal",ext:["cr"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"edn",mime:"application/edn",mode:"clojure",ext:["edn"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",ext:["e"]},{name:"Elm",mime:"text/x-elm",mode:"elm",ext:["elm"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Factor",mime:"text/x-factor",mode:"factor",ext:["factor"]},{name:"FCL",mime:"text/x-fcl",mode:"fcl"},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy","gradle"],file:/^Jenkinsfile$/},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haskell (Literate)",mime:"text/x-literate-haskell",mode:"haskell-literate",ext:["lhs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Pug",mime:"text/x-pug",mode:"pug",ext:["jade","pug"],alias:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"JSX",mime:"text/jsx",mode:"jsx",ext:["jsx"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"clike",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps",ext:["mps"]},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"mbox",mime:"application/mbox",mode:"mbox",ext:["mbox"]},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NSIS",mime:"text/x-nsis",mode:"nsis",ext:["nsh","nsi"]},{name:"NTriples",mime:"text/n-triples",mode:"ntriples",ext:["nt"]},{name:"Objective C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"],alias:["objective-c","objc"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Oz",mime:"text/x-oz",mode:"oz",ext:["oz"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mime:"application/x-httpd-php",mode:"php",ext:["php","php3","php4","php5","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:["txt","text","conf","def","list","log"]},{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"PowerShell",mime:"application/x-powershell",mode:"powershell",ext:["ps1","psd1","psm1"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"ProtoBuf",mime:"text/x-protobuf",mode:"protobuf",ext:["proto"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["BUILD","bzl","py","pyw"],file:/^(BUCK|BUILD)$/},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r","R"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"SAS",mime:"text/x-sas",mode:"sas",ext:["sas"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"],file:/^PKGBUILD$/},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"Squirrel",mime:"text/x-squirrel",mode:"clike",ext:["nut"]},{name:"Stylus",mime:"text/x-styl",mode:"stylus",ext:["styl"]},{name:"Swift",mime:"text/x-swift",mode:"swift",ext:["swift"]},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",ext:["v"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"text/troff",mode:"troff",ext:["1","2","3","4","5","6","7","8","9"]},{name:"TTCN",mime:"text/x-ttcn",mode:"ttcn",ext:["ttcn","ttcn3","ttcnpp"]},{name:"TTCN_CFG",mime:"text/x-ttcn-cfg",mode:"ttcn-cfg",ext:["cfg"]},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"Twig",mime:"text/x-twig",mode:"twig"},{name:"Web IDL",mime:"text/x-webidl",mode:"webidl",ext:["webidl"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"VHDL",mime:"text/x-vhdl",mode:"vhdl",ext:["vhd","vhdl"]},{name:"Vue.js Component",mimes:["script/x-vue","text/x-vue"],mode:"vue",ext:["vue"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd","svg"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy","xquery"]},{name:"Yacas",mime:"text/x-yacas",mode:"yacas",ext:["ys"]},{name:"YAML",mimes:["text/x-yaml","text/yaml"],mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]},{name:"mscgen",mime:"text/x-mscgen",mode:"mscgen",ext:["mscgen","mscin","msc"]},{name:"xu",mime:"text/x-xu",mode:"mscgen",ext:["xu"]},{name:"msgenny",mime:"text/x-msgenny",mode:"mscgen",ext:["msgenny"]}];for(var t=0;t<e.modeInfo.length;t++){var n=e.modeInfo[t];n.mimes&&(n.mime=n.mimes[0])}e.findModeByMIME=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.mime==t)return r;if(r.mimes)for(var i=0;i<r.mimes.length;i++)if(r.mimes[i]==t)return r}return/\+xml$/.test(t)?e.findModeByMIME("application/xml"):/\+json$/.test(t)?e.findModeByMIME("application/json"):void 0},e.findModeByExtension=function(t){for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.ext)for(var i=0;i<r.ext.length;i++)if(r.ext[i]==t)return r}},e.findModeByFileName=function(t){for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.file&&r.file.test(t))return r}var i=t.lastIndexOf("."),s=i>-1&&t.substring(i+1,t.length);if(s)return e.findModeByExtension(s)},e.findModeByName=function(t){t=t.toLowerCase();for(var n=0;n<e.modeInfo.length;n++){var r=e.modeInfo[n];if(r.name.toLowerCase()==t)return r;if(r.alias)for(var i=0;i<r.alias.length;i++)if(r.alias[i].toLowerCase()==t)return r}}})},{"../lib/codemirror":5}],8:[function(t,n,r){!function(i){"object"==typeof r&&"object"==typeof n?i(t("../../lib/codemirror")):"function"==typeof e&&e.amd?e(["../../lib/codemirror"],i):i(CodeMirror)}(function(e){"use strict";var t={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},n={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};e.defineMode("xml",function(r,i){function s(e,t){function n(n){return t.tokenize=n,n(e,t)}var r=e.next();if("<"==r)return e.eat("!")?e.eat("[")?e.match("CDATA[")?n(a("atom","]]>")):null:e.match("--")?n(a("comment","-->")):e.match("DOCTYPE",!0,!0)?(e.eatWhile(/[\w\._\-]/),n(f(1))):null:e.eat("?")?(e.eatWhile(/[\w\._\-]/),t.tokenize=a("meta","?>"),"meta"):(C=e.eat("/")?"closeTag":"openTag",t.tokenize=o,"tag bracket");if("&"==r){var i;return i=e.eat("#")?e.eat("x")?e.eatWhile(/[a-fA-F\d]/)&&e.eat(";"):e.eatWhile(/[\d]/)&&e.eat(";"):e.eatWhile(/[\w\.\-:]/)&&e.eat(";"),i?"atom":"error"}return e.eatWhile(/[^&<]/),null}function o(e,t){var n=e.next();if(">"==n||"/"==n&&e.eat(">"))return t.tokenize=s,C=">"==n?"endTag":"selfcloseTag","tag bracket";if("="==n)return C="equals",null;if("<"==n){t.tokenize=s,t.state=p,t.tagName=t.tagStart=null;var r=t.tokenize(e,t);return r?r+" tag error":"tag error"}return/[\'\"]/.test(n)?(t.tokenize=u(n),t.stringStartCol=e.column(),t.tokenize(e,t)):(e.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function u(e){var t=function(t,n){for(;!t.eol();)if(t.next()==e){n.tokenize=o;break}return"string"};return t.isInAttribute=!0,t}function a(e,t){return function(n,r){for(;!n.eol();){if(n.match(t)){r.tokenize=s;break}n.next()}return e}}function f(e){return function(t,n){for(var r;null!=(r=t.next());){if("<"==r)return n.tokenize=f(e+1),n.tokenize(t,n);if(">"==r){if(1==e){n.tokenize=s;break}return n.tokenize=f(e-1),n.tokenize(t,n)}}return"meta"}}function l(e,t,n){this.prev=e.context,this.tagName=t,this.indent=e.indented,this.startOfLine=n,(x.doNotIndent.hasOwnProperty(t)||e.context&&e.context.noIndent)&&(this.noIndent=!0)}function c(e){e.context&&(e.context=e.context.prev)}function h(e,t){for(var n;;){if(!e.context)return;if(n=e.context.tagName,!x.contextGrabbers.hasOwnProperty(n)||!x.contextGrabbers[n].hasOwnProperty(t))return;c(e)}}function p(e,t,n){return"openTag"==e?(n.tagStart=t.column(),d):"closeTag"==e?v:p}function d(e,t,n){return"word"==e?(n.tagName=t.current(),k="tag",y):(k="error",d)}function v(e,t,n){if("word"==e){var r=t.current();return n.context&&n.context.tagName!=r&&x.implicitlyClosed.hasOwnProperty(n.context.tagName)&&c(n),n.context&&n.context.tagName==r||x.matchClosing===!1?(k="tag",m):(k="tag error",g)}return k="error",g}function m(e,t,n){return"endTag"!=e?(k="error",m):(c(n),p)}function g(e,t,n){return k="error",m(e,t,n)}function y(e,t,n){if("word"==e)return k="attribute",b;if("endTag"==e||"selfcloseTag"==e){var r=n.tagName,i=n.tagStart;return n.tagName=n.tagStart=null,"selfcloseTag"==e||x.autoSelfClosers.hasOwnProperty(r)?h(n,r):(h(n,r),n.context=new l(n,r,i==n.indented)),p}return k="error",y}function b(e,t,n){return"equals"==e?w:(x.allowMissing||(k="error"),y(e,t,n))}function w(e,t,n){return"string"==e?E:"word"==e&&x.allowUnquoted?(k="string",y):(k="error",y(e,t,n))}function E(e,t,n){return"string"==e?E:y(e,t,n)}var S=r.indentUnit,x={},T=i.htmlMode?t:n;for(var N in T)x[N]=T[N];for(var N in i)x[N]=i[N];var C,k;return s.isInText=!0,{startState:function(e){var t={tokenize:s,state:p,indented:e||0,tagName:null,tagStart:null,context:null};return null!=e&&(t.baseIndent=e),t},token:function(e,t){if(!t.tagName&&e.sol()&&(t.indented=e.indentation()),e.eatSpace())return null;C=null;var n=t.tokenize(e,t);return(n||C)&&"comment"!=n&&(k=null,t.state=t.state(C||n,e,t),k&&(n="error"==k?n+" error":k)),n},indent:function(t,n,r){var i=t.context;if(t.tokenize.isInAttribute)return t.tagStart==t.indented?t.stringStartCol+1:t.indented+S;if(i&&i.noIndent)return e.Pass;if(t.tokenize!=o&&t.tokenize!=s)return r?r.match(/^(\s*)/)[0].length:0;if(t.tagName)return x.multilineTagIndentPastTag!==!1?t.tagStart+t.tagName.length+2:t.tagStart+S*(x.multilineTagIndentFactor||1);if(x.alignCDATA&&/<!\[CDATA\[/.test(n))return 0;var u=n&&/^<(\/)?([\w_:\.-]*)/.exec(n);if(u&&u[1])for(;i;){if(i.tagName==u[2]){i=i.prev;break}if(!x.implicitlyClosed.hasOwnProperty(i.tagName))break;i=i.prev}else if(u)for(;i;){var a=x.contextGrabbers[i.tagName];if(!a||!a.hasOwnProperty(u[2]))break;i=i.prev}for(;i&&i.prev&&!i.startOfLine;)i=i.prev;return i?i.indent+S:t.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:x.htmlMode?"html":"xml",helperType:x.htmlMode?"html":"xml",skipAttribute:function(e){e.state==w&&(e.state=y)}}}),e.defineMIME("text/xml","xml"),e.defineMIME("application/xml","xml"),e.mimeModes.hasOwnProperty("text/html")||e.defineMIME("text/html",{name:"xml",htmlMode:!0})})},{"../../lib/codemirror":5}],9:[function(t,n,r){(function(t){(function(){function t(e){this.tokens=[],this.tokens.links={},this.options=e||h.defaults,this.rules=p.normal,this.options.gfm&&(this.options.tables?this.rules=p.tables:this.rules=p.gfm)}function i(e,t){if(this.options=t||h.defaults,this.links=e,this.rules=d.normal,this.renderer=this.options.renderer||new s,this.renderer.options=this.options,!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=d.breaks:this.rules=d.gfm:this.options.pedantic&&(this.rules=d.pedantic)}function s(e){this.options=e||{}}function o(e){this.tokens=[],this.token=null,this.options=e||h.defaults,this.options.renderer=this.options.renderer||new s,this.renderer=this.options.renderer,this.renderer.options=this.options}function u(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function a(e){return e.replace(/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/g,function(e,t){return t=t.toLowerCase(),"colon"===t?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""})}function f(e,t){return e=e.source,t=t||"",function n(r,i){return r?(i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,i),n):new RegExp(e,t)}}function l(){}function c(e){for(var t,n,r=1;r<arguments.length;r++){t=arguments[r];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}function h(e,n,r){if(r||"function"==typeof n){r||(r=n,n=null),n=c({},h.defaults,n||{});var i,s,a=n.highlight,f=0;try{i=t.lex(e,n)}catch(e){return r(e)}s=i.length;var l=function(e){if(e)return n.highlight=a,r(e);var t;try{t=o.parse(i,n)}catch(t){e=t}return n.highlight=a,e?r(e):r(null,t)};if(!a||a.length<3)return l();if(delete n.highlight,!s)return l();for(;f<i.length;f++)!function(e){return"code"!==e.type?--s||l():a(e.text,e.lang,function(t,n){return t?l(t):null==n||n===e.text?--s||l():(e.text=n,e.escaped=!0,void (--s||l()))})}(i[f])}else try{return n&&(n=c({},h.defaults,n)),o.parse(t.lex(e,n),n)}catch(e){if(e.message+="\nPlease report this to https://github.com/chjj/marked.",(n||h.defaults).silent)return"<p>An error occured:</p><pre>"+u(e.message+"",!0)+"</pre>";throw e}}var p={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:l,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:l,lheading:/^([^\n]+)\n *(=|-){2,} *(?:\n+|$)/,blockquote:/^( *>[^\n]+(\n(?!def)[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment *(?:\n|\s*$)|closed *(?:\n{2,}|\s*$)|closing *(?:\n{2,}|\s*$))/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:l,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};p.bullet=/(?:[*+-]|\d+\.)/,p.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,p.item=f(p.item,"gm")(/bull/g,p.bullet)(),p.list=f(p.list)(/bull/g,p.bullet)("hr","\\n+(?=\\1?(?:[-*_] *){3,}(?:\\n+|$))")("def","\\n+(?="+p.def.source+")")(),p.blockquote=f(p.blockquote)("def",p.def)(),p._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|[^\\w\\s@]*@)\\b",p.html=f(p.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,p._tag)(),p.paragraph=f(p.paragraph)("hr",p.hr)("heading",p.heading)("lheading",p.lheading)("blockquote",p.blockquote)("tag","<"+p._tag)("def",p.def)(),p.normal=c({},p),p.gfm=c({},p.normal,{fences:/^ *(`{3,}|~{3,})[ \.]*(\S+)? *\n([\s\S]*?)\s*\1 *(?:\n+|$)/,paragraph:/^/,heading:/^ *(#{1,6}) +([^\n]+?) *#* *(?:\n+|$)/}),p.gfm.paragraph=f(p.paragraph)("(?!","(?!"+p.gfm.fences.source.replace("\\1","\\2")+"|"+p.list.source.replace("\\1","\\3")+"|")(),p.tables=c({},p.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=p,t.lex=function(e,n){var r=new t(n);return r.lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(e,t,n){for(var r,i,s,o,u,a,f,l,c,e=e.replace(/^ +$/gm,"");e;)if((s=this.rules.newline.exec(e))&&(e=e.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"})),s=this.rules.code.exec(e))e=e.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});else if(s=this.rules.fences.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]||""});else if(s=this.rules.heading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});else if(t&&(s=this.rules.nptable.exec(e))){for(e=e.substring(s[0].length),a={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")},l=0;l<a.align.length;l++)/^ *-+: *$/.test(a.align[l])?a.align[l]="right":/^ *:-+: *$/.test(a.align[l])?a.align[l]="center":/^ *:-+ *$/.test(a.align[l])?a.align[l]="left":a.align[l]=null;for(l=0;l<a.cells.length;l++)a.cells[l]=a.cells[l].split(/ *\| */);this.tokens.push(a)}else if(s=this.rules.lheading.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"heading",depth:"="===s[2]?1:2,text:s[1]});else if(s=this.rules.hr.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"hr"});else if(s=this.rules.blockquote.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,t,!0),this.tokens.push({type:"blockquote_end"});else if(s=this.rules.list.exec(e)){for(e=e.substring(s[0].length),o=s[2],this.tokens.push({type:"list_start",ordered:o.length>1}),s=s[0].match(this.rules.item),r=!1,c=s.length,l=0;l<c;l++)a=s[l],f=a.length,a=a.replace(/^ *([*+-]|\d+\.) +/,""),~a.indexOf("\n ")&&(f-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+f+"}","gm"),"")),this.options.smartLists&&l!==c-1&&(u=p.bullet.exec(s[l+1])[0],o===u||o.length>1&&u.length>1||(e=s.slice(l+1).join("\n")+e,l=c-1)),i=r||/\n\n(?!\s*$)/.test(a),l!==c-1&&(r="\n"===a.charAt(a.length-1),i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(a,!1,n),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"})}else if(s=this.rules.html.exec(e))e=e.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:!this.options.sanitizer&&("pre"===s[1]||"script"===s[1]||"style"===s[1]),text:s[0]});else if(!n&&t&&(s=this.rules.def.exec(e)))e=e.substring(s[0].length),this.tokens.links[s[1].toLowerCase()]={href:s[2],title:s[3]};else if(t&&(s=this.rules.table.exec(e))){for(e=e.substring(s[0].length),a={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")},l=0;l<a.align.length;l++)/^ *-+: *$/.test(a.align[l])?a.align[l]="right":/^ *:-+: *$/.test(a.align[l])?a.align[l]="center":/^ *:-+ *$/.test(a.align[l])?a.align[l]="left":a.align[l]=null;for(l=0;l<a.cells.length;l++)a.cells[l]=a.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(a)}else if(t&&(s=this.rules.paragraph.exec(e)))e=e.substring(s[0].length),this.tokens.push({type:"paragraph",text:"\n"===s[1].charAt(s[1].length-1)?s[1].slice(0,-1):s[1]});else if(s=this.rules.text.exec(e))e=e.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0));return this.tokens};var d={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:l,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:[^_]|__)+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:l,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};d._inside=/(?:\[[^\]]*\]|[^\[\]]|\](?=[^\[]*\]))*/,d._href=/\s*<?([\s\S]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,d.link=f(d.link)("inside",d._inside)("href",d._href)(),d.reflink=f(d.reflink)("inside",d._inside)(),d.normal=c({},d),d.pedantic=c({},d.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),d.gfm=c({},d.normal,{escape:f(d.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:f(d.text)("]|","~]|")("|","|https?://|")()}),d.breaks=c({},d.gfm,{br:f(d.br)("{2,}","*")(),text:f(d.gfm.text)("{2,}","*")()}),i.rules=d,i.output=function(e,t,n){var r=new i(t,n);return r.output(e)},i.prototype.output=function(e){for(var t,n,r,i,s="";e;)if(i=this.rules.escape.exec(e))e=e.substring(i[0].length),s+=i[1];else if(i=this.rules.autolink.exec(e))e=e.substring(i[0].length),"@"===i[2]?(n=":"===i[1].charAt(6)?this.mangle(i[1].substring(7)):this.mangle(i[1]),r=this.mangle("mailto:")+n):(n=u(i[1]),r=n),s+=this.renderer.link(r,null,n);else if(this.inLink||!(i=this.rules.url.exec(e))){if(i=this.rules.tag.exec(e))!this.inLink&&/^<a /i.test(i[0])?this.inLink=!0:this.inLink&&/^<\/a>/i.test(i[0])&&(this.inLink=!1),e=e.substring(i[0].length),s+=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):u(i[0]):i[0];else if(i=this.rules.link.exec(e))e=e.substring(i[0].length),this.inLink=!0,s+=this.outputLink(i,{href:i[2],title:i[3]}),this.inLink=!1;else if((i=this.rules.reflink.exec(e))||(i=this.rules.nolink.exec(e))){if(e=e.substring(i[0].length),t=(i[2]||i[1]).replace(/\s+/g," "),t=this.links[t.toLowerCase()],!t||!t.href){s+=i[0].charAt(0),e=i[0].substring(1)+e;continue}this.inLink=!0,s+=this.outputLink(i,t),this.inLink=!1}else if(i=this.rules.strong.exec(e))e=e.substring(i[0].length),s+=this.renderer.strong(this.output(i[2]||i[1]));else if(i=this.rules.em.exec(e))e=e.substring(i[0].length),s+=this.renderer.em(this.output(i[2]||i[1]));else if(i=this.rules.code.exec(e))e=e.substring(i[0].length),s+=this.renderer.codespan(u(i[2],!0));else if(i=this.rules.br.exec(e))e=e.substring(i[0].length),s+=this.renderer.br();else if(i=this.rules.del.exec(e))e=e.substring(i[0].length),s+=this.renderer.del(this.output(i[1]));else if(i=this.rules.text.exec(e))e=e.substring(i[0].length),s+=this.renderer.text(u(this.smartypants(i[0])));else if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}else e=e.substring(i[0].length),n=u(i[1]),r=n,s+=this.renderer.link(r,null,n);return s},i.prototype.outputLink=function(e,t){var n=u(t.href),r=t.title?u(t.title):null;return"!"!==e[0].charAt(0)?this.renderer.link(n,r,this.output(e[1])):this.renderer.image(n,r,u(e[1]))},i.prototype.smartypants=function(e){return this.options.smartypants?e.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014\/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014\/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…"):e},i.prototype.mangle=function(e){if(!this.options.mangle)return e;for(var t,n="",r=e.length,i=0;i<r;i++)t=e.charCodeAt(i),Math.random()>.5&&(t="x"+t.toString(16)),n+="&#"+t+";";return n},s.prototype.code=function(e,t,n){if(this.options.highlight){var r=this.options.highlight(e,t);null!=r&&r!==e&&(n=!0,e=r)}return t?'<pre><code class="'+this.options.langPrefix+u(t,!0)+'">'+(n?e:u(e,!0))+"\n</code></pre>\n":"<pre><code>"+(n?e:u(e,!0))+"\n</code></pre>"},s.prototype.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},s.prototype.html=function(e){return e},s.prototype.heading=function(e,t,n){return"<h"+t+' id="'+this.options.headerPrefix+n.toLowerCase().replace(/[^\w]+/g,"-")+'">'+e+"</h"+t+">\n"},s.prototype.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},s.prototype.list=function(e,t){var n=t?"ol":"ul";return"<"+n+">\n"+e+"</"+n+">\n"},s.prototype.listitem=function(e){return"<li>"+e+"</li>\n"},s.prototype.paragraph=function(e){return"<p>"+e+"</p>\n"},s.prototype.table=function(e,t){return"<table>\n<thead>\n"+e+"</thead>\n<tbody>\n"+t+"</tbody>\n</table>\n"},s.prototype.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},s.prototype.tablecell=function(e,t){var n=t.header?"th":"td",r=t.align?"<"+n+' style="text-align:'+t.align+'">':"<"+n+">";return r+e+"</"+n+">\n"},s.prototype.strong=function(e){return"<strong>"+e+"</strong>"},s.prototype.em=function(e){return"<em>"+e+"</em>"},s.prototype.codespan=function(e){return"<code>"+e+"</code>"},s.prototype.br=function(){return this.options.xhtml?"<br/>":"<br>"},s.prototype.del=function(e){return"<del>"+e+"</del>"},s.prototype.link=function(e,t,n){if(this.options.sanitize){try{var r=decodeURIComponent(a(e)).replace(/[^\w:]/g,"").toLowerCase()}catch(e){return""}if(0===r.indexOf("javascript:")||0===r.indexOf("vbscript:"))return""}var i='<a href="'+e+'"';return t&&(i+=' title="'+t+'"'),i+=">"+n+"</a>"},s.prototype.image=function(e,t,n){var r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">"},s.prototype.text=function(e){return e},o.parse=function(e,t,n){var r=new o(t,n);return r.parse(e)},o.prototype.parse=function(e){this.inline=new i(e.links,this.options,this.renderer),this.tokens=e.reverse();for(var t="";this.next();)t+=this.tok();return t},o.prototype.next=function(){return this.token=this.tokens.pop()},o.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},o.prototype.parseText=function(){for(var e=this.token.text;"text"===this.peek().type;)e+="\n"+this.next().text;return this.inline.output(e)},o.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return this.renderer.hr();case"heading":return this.renderer.heading(this.inline.output(this.token.text),this.token.depth,this.token.text);case"code":return this.renderer.code(this.token.text,this.token.lang,this.token.escaped);case"table":var e,t,n,r,i,s="",o="";for(n="",e=0;e<this.token.header.length;e++)r={header:!0,align:this.token.align[e]},n+=this.renderer.tablecell(this.inline.output(this.token.header[e]),{header:!0,align:this.token.align[e]});for(s+=this.renderer.tablerow(n),e=0;e<this.token.cells.length;e++){for(t=this.token.cells[e],n="",i=0;i<t.length;i++)n+=this.renderer.tablecell(this.inline.output(t[i]),{header:!1,align:this.token.align[i]});o+=this.renderer.tablerow(n)}return this.renderer.table(s,o);case"blockquote_start":for(var o="";"blockquote_end"!==this.next().type;)o+=this.tok();return this.renderer.blockquote(o);case"list_start":for(var o="",u=this.token.ordered;"list_end"!==this.next().type;)o+=this.tok();return this.renderer.list(o,u);case"list_item_start":for(var o="";"list_item_end"!==this.next().type;)o+="text"===this.token.type?this.parseText():this.tok();return this.renderer.listitem(o);case"loose_item_start":for(var o="";"list_item_end"!==this.next().type;)o+=this.tok();return this.renderer.listitem(o);case"html":var a=this.token.pre||this.options.pedantic?this.token.text:this.inline.output(this.token.text);return this.renderer.html(a);case"paragraph":return this.renderer.paragraph(this.inline.output(this.token.text));case"text":return this.renderer.paragraph(this.parseText())}},l.exec=l,h.options=h.setOptions=function(e){return c(h.defaults,e),h},h.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,sanitizer:null,mangle:!0,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-",smartypants:!1,headerPrefix:"",renderer:new s,xhtml:!1},h.Parser=o,h.parser=o.parse,h.Renderer=s,h.Lexer=t,h.lexer=t.lex,h.InlineLexer=i,h.inlineLexer=i.output,h.parse=h,"undefined"!=typeof n&&"object"==typeof r?n.exports=h:"function"==typeof e&&e.amd?e(function(){return h}):this.marked=h}).call(function(){return this||("undefined"!=typeof window?window:t)}())}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(e,t,n){var r=e("codemirror");r.commands.tabAndIndentMarkdownList=function(e){var t=e.listSelections(),n=t[0].head,r=e.getStateAfter(n.line),i=r.list!==!1;if(i)return void e.execCommand("indentMore");if(e.options.indentWithTabs)e.execCommand("insertTab");else{var s=Array(e.options.tabSize+1).join(" ");e.replaceSelection(s)}},r.commands.shiftTabAndUnindentMarkdownList=function(e){var t=e.listSelections(),n=t[0].head,r=e.getStateAfter(n.line),i=r.list!==!1;if(i)return void e.execCommand("indentLess");if(e.options.indentWithTabs)e.execCommand("insertTab");else{var s=Array(e.options.tabSize+1).join(" ");e.replaceSelection(s)}}},{codemirror:5}],11:[function(e,t,n){"use strict";function r(e){return e=U?e.replace("Ctrl","Cmd"):e.replace("Cmd","Ctrl")}function i(e,t,n){e=e||{};var r=document.createElement("a");return t=void 0==t||t,e.title&&t&&(r.title=o(e.title,e.action,n),U&&(r.title=r.title.replace("Ctrl","⌘"),r.title=r.title.replace("Alt","⌥"))),r.tabIndex=-1,r.className=e.className,r}function s(){var e=document.createElement("i");return e.className="separator",e.innerHTML="|",e}function o(e,t,n){var i,s=e;return t&&(i=X(t),n[i]&&(s+=" ("+r(n[i])+")")),s}function u(e,t){t=t||e.getCursor("start");var n=e.getTokenAt(t);if(!n.type)return{};for(var r,i,s=n.type.split(" "),o={},u=0;u<s.length;u++)r=s[u],"strong"===r?o.bold=!0:"variable-2"===r?(i=e.getLine(t.line),/^\s*\d+\.\s/.test(i)?o["ordered-list"]=!0:o["unordered-list"]=!0):"atom"===r?o.quote=!0:"em"===r?o.italic=!0:"quote"===r?o.quote=!0:"strikethrough"===r?o.strikethrough=!0:"comment"===r?o.code=!0:"link"===r?o.link=!0:"tag"===r?o.image=!0:r.match(/^header(\-[1-6])?$/)&&(o[r.replace("header","heading")]=!0);return o}function a(e){var t=e.codemirror;t.setOption("fullScreen",!t.getOption("fullScreen")),t.getOption("fullScreen")?($=document.body.style.overflow,document.body.style.overflow="hidden"):document.body.style.overflow=$;var n=t.getWrapperElement();/fullscreen/.test(n.previousSibling.className)?n.previousSibling.className=n.previousSibling.className.replace(/\s*fullscreen\b/,""):n.previousSibling.className+=" fullscreen";var r=e.toolbarElements.fullscreen;/active/.test(r.className)?r.className=r.className.replace(/\s*active\s*/g,""):r.className+=" active";var i=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(i.className)&&L(e)}function f(e){D(e,"bold",e.options.blockStyles.bold)}function l(e){D(e,"italic",e.options.blockStyles.italic)}function c(e){D(e,"strikethrough","~~")}function h(e){function t(e){if("object"!=typeof e)throw"fencing_line() takes a 'line' object (not a line number, or line text).  Got: "+typeof e+": "+e;return e.styles&&e.styles[2]&&e.styles[2].indexOf("formatting-code-block")!==-1}function n(e){return e.state.base.base||e.state.base}function r(e,r,i,s,o){i=i||e.getLineHandle(r),s=s||e.getTokenAt({line:r,ch:1}),o=o||!!i.text&&e.getTokenAt({line:r,ch:i.text.length-1});var u=s.type?s.type.split(" "):[];return o&&n(o).indentedCode?"indented":u.indexOf("comment")!==-1&&(n(s).fencedChars||n(o).fencedChars||t(i)?"fenced":"single")}function i(e,t,n,r){var i=t.line+1,s=n.line+1,o=t.line!==n.line,u=r+"\n",a="\n"+r;o&&s++,o&&0===n.ch&&(a=r+"\n",s--),O(e,!1,[u,a]),e.setSelection({line:i,ch:0},{line:s,ch:0})}var s,o,u,a=e.options.blockStyles.code,f=e.codemirror,l=f.getCursor("start"),c=f.getCursor("end"),h=f.getTokenAt({line:l.line,ch:l.ch||1}),p=f.getLineHandle(l.line),d=r(f,l.line,p,h);if("single"===d){var v=p.text.slice(0,l.ch).replace("`",""),m=p.text.slice(l.ch).replace("`","");f.replaceRange(v+m,{line:l.line,ch:0},{line:l.line,ch:99999999999999}),l.ch--,l!==c&&c.ch--,f.setSelection(l,c),f.focus()}else if("fenced"===d)if(l.line!==c.line||l.ch!==c.ch){for(s=l.line;s>=0&&(p=f.getLineHandle(s),!t(p));s--);var g,y,b,w,E=f.getTokenAt({line:s,ch:1}),S=n(E).fencedChars;t(f.getLineHandle(l.line))?(g="",y=l.line):t(f.getLineHandle(l.line-1))?(g="",y=l.line-1):(g=S+"\n",y=l.line),t(f.getLineHandle(c.line))?(b="",w=c.line,0===c.ch&&(w+=1)):0!==c.ch&&t(f.getLineHandle(c.line+1))?(b="",w=c.line+1):(b=S+"\n",w=c.line+1),0===c.ch&&(w-=1),f.operation(function(){f.replaceRange(b,{line:w,ch:0},{line:w+(b?0:1),ch:0}),f.replaceRange(g,{line:y,ch:0},{line:y+(g?0:1),ch:0})}),f.setSelection({line:y+(g?1:0),ch:0},{line:w+(g?1:-1),ch:0}),f.focus()}else{var x=l.line;if(t(f.getLineHandle(l.line))&&("fenced"===r(f,l.line+1)?(s=l.line,x=l.line+1):(o=l.line,x=l.line-1)),void 0===s)for(s=x;s>=0&&(p=f.getLineHandle(s),!t(p));s--);if(void 0===o)for(u=f.lineCount(),o=x;o<u&&(p=f.getLineHandle(o),!t(p));o++);f.operation(function(){f.replaceRange("",{line:s,ch:0},{line:s+1,ch:0}),f.replaceRange("",{line:o-1,ch:0},{line:o,ch:0})}),f.focus()}else if("indented"===d){if(l.line!==c.line||l.ch!==c.ch)s=l.line,o=c.line,0===c.ch&&o--;else{for(s=l.line;s>=0;s--)if(p=f.getLineHandle(s),!p.text.match(/^\s*$/)&&"indented"!==r(f,s,p)){s+=1;break}for(u=f.lineCount(),o=l.line;o<u;o++)if(p=f.getLineHandle(o),!p.text.match(/^\s*$/)&&"indented"!==r(f,o,p)){o-=1;break}}var T=f.getLineHandle(o+1),N=T&&f.getTokenAt({line:o+1,ch:T.text.length-1}),C=N&&n(N).indentedCode;C&&f.replaceRange("\n",{line:o+1,ch:0});for(var k=s;k<=o;k++)f.indentLine(k,"subtract");f.focus()}else{var L=l.line===c.line&&l.ch===c.ch&&0===l.ch,A=l.line!==c.line;L||A?i(f,l,c,a):O(f,!1,["`","`"])}}function p(e){var t=e.codemirror;_(t,"quote")}function d(e){var t=e.codemirror;M(t,"smaller")}function v(e){var t=e.codemirror;M(t,"bigger")}function m(e){var t=e.codemirror;M(t,void 0,1)}function g(e){var t=e.codemirror;M(t,void 0,2)}function y(e){var t=e.codemirror;M(t,void 0,3)}function b(e){var t=e.codemirror;_(t,"unordered-list")}function w(e){var t=e.codemirror;_(t,"ordered-list")}function E(e){var t=e.codemirror;P(t)}function S(e){var t=e.codemirror,n=u(t),r=e.options,i="http://";return(!r.promptURLs||(i=prompt(r.promptTexts.link),!!i))&&void O(t,n.link,r.insertTexts.link,i)}function x(e){var t=e.codemirror,n=u(t),r=e.options,i="http://";return(!r.promptURLs||(i=prompt(r.promptTexts.image),!!i))&&void O(t,n.image,r.insertTexts.image,i)}function T(e){var t=e.codemirror,n=u(t),r=e.options;O(t,n.table,r.insertTexts.table)}function N(e){var t=e.codemirror,n=u(t),r=e.options;O(t,n.image,r.insertTexts.horizontalRule)}function C(e){var t=e.codemirror;t.undo(),t.focus()}function k(e){var t=e.codemirror;t.redo(),t.focus()}function L(e){var t=e.codemirror,n=t.getWrapperElement(),r=n.nextSibling,i=e.toolbarElements["side-by-side"],s=!1;/editor-preview-active-side/.test(r.className)?(r.className=r.className.replace(/\s*editor-preview-active-side\s*/g,""),i.className=i.className.replace(/\s*active\s*/g,""),n.className=n.className.replace(/\s*CodeMirror-sided\s*/g," ")):(setTimeout(function(){t.getOption("fullScreen")||a(e),r.className+=" editor-preview-active-side"},1),i.className+=" active",n.className+=" CodeMirror-sided",s=!0);var o=n.lastChild;if(/editor-preview-active/.test(o.className)){o.className=o.className.replace(/\s*editor-preview-active\s*/g,"");var u=e.toolbarElements.preview,f=n.previousSibling;u.className=u.className.replace(/\s*active\s*/g,""),f.className=f.className.replace(/\s*disabled-for-preview*/g,"")}var l=function(){r.innerHTML=e.options.previewRender(e.value(),r)};t.sideBySideRenderingFunction||(t.sideBySideRenderingFunction=l),s?(r.innerHTML=e.options.previewRender(e.value(),r),t.on("update",t.sideBySideRenderingFunction)):t.off("update",t.sideBySideRenderingFunction),t.refresh()}function A(e){var t=e.codemirror,n=t.getWrapperElement(),r=n.previousSibling,i=!!e.options.toolbar&&e.toolbarElements.preview,s=n.lastChild;s&&/editor-preview/.test(s.className)||(s=document.createElement("div"),s.className="editor-preview",n.appendChild(s)),/editor-preview-active/.test(s.className)?(s.className=s.className.replace(/\s*editor-preview-active\s*/g,""),i&&(i.className=i.className.replace(/\s*active\s*/g,""),r.className=r.className.replace(/\s*disabled-for-preview*/g,""))):(setTimeout(function(){s.className+=" editor-preview-active"},1),i&&(i.className+=" active",r.className+=" disabled-for-preview")),s.innerHTML=e.options.previewRender(e.value(),s);var o=t.getWrapperElement().nextSibling;/editor-preview-active-side/.test(o.className)&&L(e)}function O(e,t,n,r){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){var i,s=n[0],o=n[1],u=e.getCursor("start"),a=e.getCursor("end");r&&(o=o.replace("#url#",r)),t?(i=e.getLine(u.line),s=i.slice(0,u.ch),o=i.slice(u.ch),e.replaceRange(s+o,{line:u.line,ch:0})):(i=e.getSelection(),e.replaceSelection(s+i+o),u.ch+=s.length,u!==a&&(a.ch+=s.length)),e.setSelection(u,a),e.focus()}}function M(e,t,n){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var r=e.getCursor("start"),i=e.getCursor("end"),s=r.line;s<=i.line;s++)!function(r){var i=e.getLine(r),s=i.search(/[^#]/);i=void 0!==t?s<=0?"bigger"==t?"###### "+i:"# "+i:6==s&&"smaller"==t?i.substr(7):1==s&&"bigger"==t?i.substr(2):"bigger"==t?i.substr(1):"#"+i:1==n?s<=0?"# "+i:s==n?i.substr(s+1):"# "+i.substr(s+1):2==n?s<=0?"## "+i:s==n?i.substr(s+1):"## "+i.substr(s+1):s<=0?"### "+i:s==n?i.substr(s+1):"### "+i.substr(s+1),e.replaceRange(i,{line:r,ch:0},{line:r,ch:99999999999999})}(s);e.focus()}}function _(e,t){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className)){for(var n=u(e),r=e.getCursor("start"),i=e.getCursor("end"),s={quote:/^(\s*)\>\s+/,"unordered-list":/^(\s*)(\*|\-|\+)\s+/,"ordered-list":/^(\s*)\d+\.\s+/},o={quote:"> ","unordered-list":"* ","ordered-list":"1. "},a=r.line;a<=i.line;a++)!function(r){var i=e.getLine(r);i=n[t]?i.replace(s[t],"$1"):o[t]+i,e.replaceRange(i,{line:r,ch:0},{line:r,ch:99999999999999})}(a);e.focus()}}function D(e,t,n,r){if(!/editor-preview-active/.test(e.codemirror.getWrapperElement().lastChild.className)){r="undefined"==typeof r?n:r;var i,s=e.codemirror,o=u(s),a=n,f=r,l=s.getCursor("start"),c=s.getCursor("end");o[t]?(i=s.getLine(l.line),a=i.slice(0,l.ch),f=i.slice(l.ch),"bold"==t?(a=a.replace(/(\*\*|__)(?![\s\S]*(\*\*|__))/,""),f=f.replace(/(\*\*|__)/,"")):"italic"==t?(a=a.replace(/(\*|_)(?![\s\S]*(\*|_))/,""),f=f.replace(/(\*|_)/,"")):"strikethrough"==t&&(a=a.replace(/(\*\*|~~)(?![\s\S]*(\*\*|~~))/,""),f=f.replace(/(\*\*|~~)/,"")),s.replaceRange(a+f,{line:l.line,ch:0},{line:l.line,ch:99999999999999}),"bold"==t||"strikethrough"==t?(l.ch-=2,l!==c&&(c.ch-=2)):"italic"==t&&(l.ch-=1,l!==c&&(c.ch-=1))):(i=s.getSelection(),"bold"==t?(i=i.split("**").join(""),i=i.split("__").join("")):"italic"==t?(i=i.split("*").join(""),i=i.split("_").join("")):"strikethrough"==t&&(i=i.split("~~").join("")),s.replaceSelection(a+i+f),l.ch+=n.length,c.ch=l.ch+i.length),s.setSelection(l,c),s.focus()}}function P(e){if(!/editor-preview-active/.test(e.getWrapperElement().lastChild.className))for(var t,n=e.getCursor("start"),r=e.getCursor("end"),i=n.line;i<=r.line;i++)t=e.getLine(i),t=t.replace(/^[ ]*([# ]+|\*|\-|[> ]+|[0-9]+(.|\)))[ ]*/,""),e.replaceRange(t,{line:i,ch:0},{line:i,ch:99999999999999})}function H(e,t){for(var n in t)t.hasOwnProperty(n)&&(t[n]instanceof Array?e[n]=t[n].concat(e[n]instanceof Array?e[n]:[]):null!==t[n]&&"object"==typeof t[n]&&t[n].constructor===Object?e[n]=H(e[n]||{},t[n]):e[n]=t[n]);return e}function B(e){for(var t=1;t<arguments.length;t++)e=H(e,arguments[t]);return e}function j(e){var t=/[a-zA-Z0-9_\u0392-\u03c9\u0410-\u04F9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g,n=e.match(t),r=0;if(null===n)return r;for(var i=0;i<n.length;i++)r+=n[i].charCodeAt(0)>=19968?n[i].length:1;return r}function F(e){e=e||{},e.parent=this;var t=!0;if(e.autoDownloadFontAwesome===!1&&(t=!1),e.autoDownloadFontAwesome!==!0)for(var n=document.styleSheets,r=0;r<n.length;r++)n[r].href&&n[r].href.indexOf("//maxcdn.bootstrapcdn.com/font-awesome/")>-1&&(t=!1);if(t){var i=document.createElement("link");i.rel="stylesheet",i.href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css",document.getElementsByTagName("head")[0].appendChild(i)}if(e.element)this.element=e.element;else if(null===e.element)return void console.log("SimpleMDE: Error. No element was found.");if(void 0===e.toolbar){e.toolbar=[];for(var s in J)J.hasOwnProperty(s)&&(s.indexOf("separator-")!=-1&&e.toolbar.push("|"),(J[s].default===!0||e.showIcons&&e.showIcons.constructor===Array&&e.showIcons.indexOf(s)!=-1)&&e.toolbar.push(s))}e.hasOwnProperty("status")||(e.status=["autosave","lines","words","cursor"]),e.previewRender||(e.previewRender=function(e){return this.parent.markdown(e)}),e.parsingConfig=B({highlightFormatting:!0},e.parsingConfig||{}),e.insertTexts=B({},K,e.insertTexts||{}),e.promptTexts=Q,e.blockStyles=B({},G,e.blockStyles||{}),e.shortcuts=B({},W,e.shortcuts||{}),void 0!=e.autosave&&void 0!=e.autosave.unique_id&&""!=e.autosave.unique_id&&(e.autosave.uniqueId=e.autosave.unique_id),this.options=e,this.render(),!e.initialValue||this.options.autosave&&this.options.autosave.foundSavedValue===!0||this.value(e.initialValue)}function I(){if("object"!=typeof localStorage)return!1;try{localStorage.setItem("smde_localStorage",1),localStorage.removeItem("smde_localStorage")}catch(e){return!1}return!0}var q=e("codemirror");e("codemirror/addon/edit/continuelist.js"),e("./codemirror/tablist"),e("codemirror/mode/markdown/markdown.js"),e("codemirror/addon/mode/overlay.js"),e("codemirror/addon/display/placeholder.js"),e("codemirror/addon/selection/mark-selection.js");var R=e("marked"),U=/Mac/.test(navigator.platform),z={toggleBold:f,toggleItalic:l,drawLink:S,toggleHeadingSmaller:d,toggleHeadingBigger:v,drawImage:x,toggleBlockquote:p,toggleOrderedList:w,toggleUnorderedList:b,toggleCodeBlock:h,togglePreview:A,toggleStrikethrough:c,toggleHeading1:m,toggleHeading2:g,toggleHeading3:y,cleanBlock:E,drawTable:T,drawHorizontalRule:N,undo:C,redo:k,toggleSideBySide:L,toggleFullScreen:a},W={toggleBold:"Cmd-B",toggleItalic:"Cmd-I",drawLink:"Cmd-K",toggleHeadingSmaller:"Cmd-H",toggleHeadingBigger:"Shift-Cmd-H",cleanBlock:"Cmd-E",drawImage:"Cmd-Alt-I",toggleBlockquote:"Cmd-'",toggleOrderedList:"Cmd-Alt-L",toggleUnorderedList:"Cmd-L",toggleCodeBlock:"Cmd-Alt-C",togglePreview:"Cmd-P",toggleSideBySide:"F9",toggleFullScreen:"F11"},X=function(e){for(var t in z)if(z[t]===e)return t;return null},V=function(){var e=!1;return function(t){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4)))&&(e=!0)}(navigator.userAgent||navigator.vendor||window.opera),e},$="",J={bold:{name:"bold",action:f,className:"fa fa-bold",title:"Bold","default":!0},italic:{name:"italic",action:l,className:"fa fa-italic",title:"Italic","default":!0},strikethrough:{name:"strikethrough",action:c,className:"fa fa-strikethrough",title:"Strikethrough"},heading:{name:"heading",action:d,className:"fa fa-header",title:"Heading","default":!0},"heading-smaller":{name:"heading-smaller",action:d,className:"fa fa-header fa-header-x fa-header-smaller",title:"Smaller Heading"},"heading-bigger":{name:"heading-bigger",action:v,className:"fa fa-header fa-header-x fa-header-bigger",title:"Bigger Heading"},"heading-1":{name:"heading-1",action:m,className:"fa fa-header fa-header-x fa-header-1",title:"Big Heading"},"heading-2":{name:"heading-2",action:g,className:"fa fa-header fa-header-x fa-header-2",title:"Medium Heading"},"heading-3":{name:"heading-3",action:y,className:"fa fa-header fa-header-x fa-header-3",title:"Small Heading"},"separator-1":{name:"separator-1"},code:{name:"code",action:h,className:"fa fa-code",title:"Code"},quote:{name:"quote",action:p,className:"fa fa-quote-left",title:"Quote","default":!0},"unordered-list":{name:"unordered-list",action:b,className:"fa fa-list-ul",title:"Generic List","default":!0},"ordered-list":{name:"ordered-list",action:w,className:"fa fa-list-ol",title:"Numbered List","default":!0},"clean-block":{name:"clean-block",action:E,className:"fa fa-eraser fa-clean-block",title:"Clean block"},"separator-2":{name:"separator-2"},link:{name:"link",action:S,className:"fa fa-link",title:"Create Link","default":!0},image:{name:"image",action:x,className:"fa fa-picture-o",title:"Insert Image","default":!0},table:{name:"table",action:T,className:"fa fa-table",title:"Insert Table"},"horizontal-rule":{name:"horizontal-rule",action:N,className:"fa fa-minus",title:"Insert Horizontal Line"},"separator-3":{name:"separator-3"},preview:{name:"preview",action:A,className:"fa fa-eye no-disable",title:"Toggle Preview","default":!0},"side-by-side":{name:"side-by-side",action:L,className:"fa fa-columns no-disable no-mobile",title:"Toggle Side by Side","default":!0},fullscreen:{name:"fullscreen",action:a,className:"fa fa-arrows-alt no-disable no-mobile",title:"Toggle Fullscreen","default":!0},"separator-4":{name:"separator-4"},guide:{name:"guide",action:"https://simplemde.com/markdown-guide",className:"fa fa-question-circle",title:"Markdown Guide","default":!0},"separator-5":{name:"separator-5"},undo:{name:"undo",action:C,className:"fa fa-undo no-disable",title:"Undo"},redo:{name:"redo",action:k,className:"fa fa-repeat no-disable",title:"Redo"}},K={link:["[","](#url#)"],image:["![](","#url#)"],table:["","\n\n| Column 1 | Column 2 | Column 3 |\n| -------- | -------- | -------- |\n| Text     | Text     | Text     |\n\n"],horizontalRule:["","\n\n-----\n\n"]},Q={link:"URL for the link:",image:"URL of the image:"},G={bold:"**",code:"```",italic:"*"};F.prototype.markdown=function(e){if(R){var t={};return this.options&&this.options.renderingConfig&&this.options.renderingConfig.singleLineBreaks===!1?t.breaks=!1:t.breaks=!0,this.options&&this.options.renderingConfig&&this.options.renderingConfig.codeSyntaxHighlighting===!0&&window.hljs&&(t.highlight=function(e){return window.hljs.highlightAuto(e).value}),R.setOptions(t),R(e)}},F.prototype.render=function(e){if(e||(e=this.element||document.getElementsByTagName("textarea")[0]),!this._rendered||this._rendered!==e){this.element=e;var t=this.options,n=this,i={};for(var s in t.shortcuts)null!==t.shortcuts[s]&&null!==z[s]&&!function(e){i[r(t.shortcuts[e])]=function(){z[e](n)}}(s);i.Enter="newlineAndIndentContinueMarkdownList",i.Tab="tabAndIndentMarkdownList",i["Shift-Tab"]="shiftTabAndUnindentMarkdownList",i.Esc=function(e){e.getOption("fullScreen")&&a(n)},document.addEventListener("keydown",function(e){e=e||window.event,27==e.keyCode&&n.codemirror.getOption("fullScreen")&&a(n)},!1);var o,u;if(o=t.parsingConfig,o.name="gfm",o.gitHubSpice=!1,this.codemirror=q.fromTextArea(e,{mode:o,backdrop:u,theme:"paper",tabSize:void 0!=t.tabSize?t.tabSize:2,indentUnit:void 0!=t.tabSize?t.tabSize:2,indentWithTabs:t.indentWithTabs!==!1,lineNumbers:!1,autofocus:t.autofocus===!0,extraKeys:i,lineWrapping:t.lineWrapping!==!1,allowDropFileTypes:["text/plain"],placeholder:t.placeholder||e.getAttribute("placeholder")||"",styleSelectedText:void 0==t.styleSelectedText||t.styleSelectedText}),t.forceSync===!0){var f=this.codemirror;f.on("change",function(){f.save()})}this.gui={},t.toolbar!==!1&&(this.gui.toolbar=this.createToolbar()),t.status!==!1&&(this.gui.statusbar=this.createStatusbar()),void 0!=t.autosave&&t.autosave.enabled===!0&&this.autosave(),this.gui.sideBySide=this.createSideBySide(),this._rendered=this.element;var l=this.codemirror;setTimeout(function(){l.refresh()}.bind(l),0)}},F.prototype.autosave=function(){if(I()){var e=this;if(void 0==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("SimpleMDE: You must set a uniqueId to use the autosave feature");null!=e.element.form&&void 0!=e.element.form&&e.element.form.addEventListener("submit",function(){localStorage.removeItem("smde_"+e.options.autosave.uniqueId)}),this.options.autosave.loaded!==!0&&("string"==typeof localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&""!=localStorage.getItem("smde_"+this.options.autosave.uniqueId)&&(this.codemirror.setValue(localStorage.getItem("smde_"+this.options.autosave.uniqueId)),this.options.autosave.foundSavedValue=!0),this.options.autosave.loaded=!0),localStorage.setItem("smde_"+this.options.autosave.uniqueId,e.value());var t=document.getElementById("autosaved");if(null!=t&&void 0!=t&&""!=t){var n=new Date,r=n.getHours(),i=n.getMinutes(),s="am",o=r;o>=12&&(o=r-12,s="pm"),0==o&&(o=12),i=i<10?"0"+i:i,t.innerHTML="Autosaved: "+o+":"+i+" "+s}this.autosaveTimeoutId=setTimeout(function(){e.autosave()},this.options.autosave.delay||1e4)}else console.log("SimpleMDE: localStorage not available, cannot autosave")},F.prototype.clearAutosavedValue=function(){if(I()){if(void 0==this.options.autosave||void 0==this.options.autosave.uniqueId||""==this.options.autosave.uniqueId)return void console.log("SimpleMDE: You must set a uniqueId to clear the autosave value");localStorage.removeItem("smde_"+this.options.autosave.uniqueId)}else console.log("SimpleMDE: localStorage not available, cannot autosave")},F.prototype.createSideBySide=function(){var e=this.codemirror,t=e.getWrapperElement(),n=t.nextSibling;n&&/editor-preview-side/.test(n.className)||(n=document.createElement("div"),n.className="editor-preview-side",t.parentNode.insertBefore(n,t.nextSibling));var r=!1,i=!1;return e.on("scroll",function(e){if(r)return void (r=!1);i=!0;var t=e.getScrollInfo().height-e.getScrollInfo().clientHeight,s=parseFloat(e.getScrollInfo().top)/t,o=(n.scrollHeight-n.clientHeight)*s;n.scrollTop=o}),n.onscroll=function(){if(i)return void (i=!1);r=!0;var t=n.scrollHeight-n.clientHeight,s=parseFloat(n.scrollTop)/t,o=(e.getScrollInfo().height-e.getScrollInfo().clientHeight)*s;e.scrollTo(0,o)},n},F.prototype.createToolbar=function(e){if(e=e||this.options.toolbar,e&&0!==e.length){var t;for(t=0;t<e.length;t++)void 0!=J[e[t]]&&(e[t]=J[e[t]]);var n=document.createElement("div");n.className="editor-toolbar";var r=this,o={};for(r.toolbar=e,t=0;t<e.length;t++)if(("guide"!=e[t].name||r.options.toolbarGuideIcon!==!1)&&!(r.options.hideIcons&&r.options.hideIcons.indexOf(e[t].name)!=-1||("fullscreen"==e[t].name||"side-by-side"==e[t].name)&&V())){if("|"===e[t]){for(var a=!1,f=t+1;f<e.length;f++)"|"===e[f]||r.options.hideIcons&&r.options.hideIcons.indexOf(e[f].name)!=-1||(a=!0);if(!a)continue}!function(e){var t;t="|"===e?s():i(e,r.options.toolbarTips,r.options.shortcuts),e.action&&("function"==typeof e.action?t.onclick=function(t){t.preventDefault(),e.action(r)}:"string"==typeof e.action&&(t.href=e.action,t.target="_blank")),o[e.name||e]=t,n.appendChild(t)}(e[t])}r.toolbarElements=o;var l=this.codemirror;l.on("cursorActivity",function(){var e=u(l);for(var t in o)!function(t){var n=o[t];e[t]?n.className+=" active":"fullscreen"!=t&&"side-by-side"!=t&&(n.className=n.className.replace(/\s*active\s*/g,""))}(t)});var c=l.getWrapperElement();return c.parentNode.insertBefore(n,c),n}},F.prototype.createStatusbar=function(e){e=e||this.options.status;var t=this.options,n=this.codemirror;if(e&&0!==e.length){var r,i,s,o=[];for(r=0;r<e.length;r++)if(i=void 0,s=void 0,"object"==typeof e[r])o.push({className:e[r].className,defaultValue:e[r].defaultValue,onUpdate:e[r].onUpdate});else{var u=e[r];"words"===u?(s=function(e){e.innerHTML=j(n.getValue())},i=function(e){e.innerHTML=j(n.getValue())}):"lines"===u?(s=function(e){e.innerHTML=n.lineCount()},i=function(e){e.innerHTML=n.lineCount()}):"cursor"===u?(s=function(e){e.innerHTML="0:0"},i=function(e){var t=n.getCursor();e.innerHTML=t.line+":"+t.ch}):"autosave"===u&&(s=function(e){void 0!=t.autosave&&t.autosave.enabled===!0&&e.setAttribute("id","autosaved")}),o.push({className:u,defaultValue:s,onUpdate:i})}var a=document.createElement("div");for(a.className="editor-statusbar",r=0;r<o.length;r++){var f=o[r],l=document.createElement("span");l.className=f.className,"function"==typeof f.defaultValue&&f.defaultValue(l),"function"==typeof f.onUpdate&&this.codemirror.on("update",function(e,t){return function(){t.onUpdate(e)}}(l,f)),a.appendChild(l)}var c=this.codemirror.getWrapperElement();return c.parentNode.insertBefore(a,c.nextSibling),a}},F.prototype.value=function(e){return void 0===e?this.codemirror.getValue():(this.codemirror.getDoc().setValue(e),this)},F.toggleBold=f,F.toggleItalic=l,F.toggleStrikethrough=c,F.toggleBlockquote=p,F.toggleHeadingSmaller=d,F.toggleHeadingBigger=v,F.toggleHeading1=m,F.toggleHeading2=g,F.toggleHeading3=y,F.toggleCodeBlock=h,F.toggleUnorderedList=b,F.toggleOrderedList=w,F.cleanBlock=E,F.drawLink=S,F.drawImage=x,F.drawTable=T,F.drawHorizontalRule=N,F.undo=C,F.redo=k,F.togglePreview=A,F.toggleSideBySide=L,F.toggleFullScreen=a,F.prototype.toggleBold=function(){f(this)},F.prototype.toggleItalic=function(){l(this)},F.prototype.toggleStrikethrough=function(){c(this)},F.prototype.toggleBlockquote=function(){p(this)},F.prototype.toggleHeadingSmaller=function(){d(this)},F.prototype.toggleHeadingBigger=function(){v(this)},F.prototype.toggleHeading1=function(){m(this)},F.prototype.toggleHeading2=function(){g(this)},F.prototype.toggleHeading3=function(){y(this)},F.prototype.toggleCodeBlock=function(){h(this)},F.prototype.toggleUnorderedList=function(){b(this)},F.prototype.toggleOrderedList=function(){w(this)},F.prototype.cleanBlock=function(){E(this)},F.prototype.drawLink=function(){S(this)},F.prototype.drawImage=function(){x(this)},F.prototype.drawTable=function(){T(this)},F.prototype.drawHorizontalRule=function(){N(this)},F.prototype.undo=function(){C(this)},F.prototype.redo=function(){k(this)},F.prototype.togglePreview=function(){A(this)},F.prototype.toggleSideBySide=function(){L(this)},F.prototype.toggleFullScreen=function(){a(this)},F.prototype.isPreviewActive=function(){var e=this.codemirror,t=e.getWrapperElement(),n=t.lastChild;return/editor-preview-active/.test(n.className)},F.prototype.isSideBySideActive=function(){var e=this.codemirror,t=e.getWrapperElement(),n=t.nextSibling;return/editor-preview-active-side/.test(n.className)},F.prototype.isFullscreenActive=function(){var e=this.codemirror;return e.getOption("fullScreen")},F.prototype.getState=function(){var e=this.codemirror;return u(e)},F.prototype.toTextArea=function(){var e=this.codemirror,t=e.getWrapperElement();t.parentNode&&(this.gui.toolbar&&t.parentNode.removeChild(this.gui.toolbar),this.gui.statusbar&&t.parentNode.removeChild(this.gui.statusbar),this.gui.sideBySide&&t.parentNode.removeChild(this.gui.sideBySide)),e.toTextArea(),this.autosaveTimeoutId&&(clearTimeout(this.autosaveTimeoutId),this.autosaveTimeoutId=void 0,this.clearAutosavedValue())},t.exports=F},{"./codemirror/tablist":10,codemirror:5,"codemirror/addon/display/placeholder.js":1,"codemirror/addon/edit/continuelist.js":2,"codemirror/addon/mode/overlay.js":3,"codemirror/addon/selection/mark-selection.js":4,"codemirror/mode/markdown/markdown.js":6,marked:9}]},{},[11])(11)}),define("components/markdown/SingletonMarkdownObject",["require","exports","module","simplemde"],function(e,t,n){"use strict";var r=null,i=e("simplemde"),s=$("<div><textarea></textarea></div>"),o=function(){return r||(r=new i({element:$("textarea",s).get(0)})),r};return o}),define("components/markdown/MarkdownViewer",["require","exports","module","jquery","backbone-epoxy","components/markdown/SingletonMarkdownObject"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone-epoxy"),s=e("components/markdown/SingletonMarkdownObject"),o=i.View.extend({className:"markdown-viewer",events:{},initialize:function(e){this.simpleMDE=new s,this.update(e.text.escapeScript())},update:function(e){e?this.$el.html(this.simpleMDE.markdown(e.escapeScript())):this.$el.html("")}});return o}),define("components/markdown/MarkdownEditor",["require","exports","module","jquery","backbone-epoxy","simplemde","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone-epoxy"),s=e("simplemde"),o=e("util"),u=i.View.extend({className:"markdown-editor",template:"tpl-markdown-editor",events:{},initialize:function(e){var e=e||{};this.render();var t=this;e.value&&r("[data-js-text-area]",this.$el).val(e.value),this.simplemde=new s({element:r("[data-js-text-area]",this.$el).get(0),status:!1,autoDownloadFontAwesome:!1,toolbar:[{name:"heading-1",action:s.toggleHeading1,className:"icon-header-1",title:"Big Heading"},{name:"heading-2",action:s.toggleHeading2,className:"icon-header-2",title:"Medium Heading"},{name:"heading-3",action:s.toggleHeading3,className:"icon-header-3",title:"Small Heading"},{name:"clean-block",action:s.cleanBlock,className:"icon-clean-block",title:"Clean block"},"|",{name:"bold",action:s.toggleBold,className:"icon-bold",title:"Bold"},{name:"italic",action:s.toggleItalic,className:"icon-italic",title:"Italic"},{name:"strikethrough",action:s.toggleStrikethrough,className:"icon-strikethrough",title:"Strikethrough"},"|",{name:"unordered-list",action:s.toggleUnorderedList,className:"icon-unordered-list",title:"Generic List"},{name:"ordered-list",action:s.toggleOrderedList,className:"icon-ordered-list",title:"Numbered List"},"|",{name:"image",action:s.drawImage,className:"icon-image",title:"Insert Image"},{name:"link",action:s.drawLink,className:"icon-link",title:"Create Link"},"|",{name:"quote",action:s.toggleBlockquote,className:"icon-quote",title:"Quote"},{name:"code",action:s.toggleCodeBlock,className:"icon-code",title:"Code"},"|",{name:"preview",action:s.togglePreview,className:"icon-preview no-disable",title:"Toggle Preview"}],placeholder:e.placeholder||"",spellChecker:!1}),this.simplemde.codemirror.on("change",function(){t.trigger("change",t.simplemde.value())}),this.simplemde.codemirror.on("focus",function(){t.$el.addClass("focused")}),this.simplemde.codemirror.on("blur",function(){t.$el.removeClass("focused")})},render:function(){this.$el.html(o.templates(this.template,{}))},update:function(){this.setValue(this.getValue())},getValue:function(){return this.simplemde.value()},setValue:function(e){this.simplemde.value(e)}});return u}),define("modals/modalDefectEditor",["require","exports","module","filters/SingletonLaunchFilterCollection","jquery","underscore","modals/_modalView","backbone","backbone-epoxy","app","util","coreService","model/SingletonAppModel","localization","markitup","markitupset","components/markdown/MarkdownEditor","defectType/SingletonDefectTypeCollection"],function(e,t,n){"use strict";var r=e("filters/SingletonLaunchFilterCollection"),i=e("jquery"),s=e("underscore"),o=e("modals/_modalView"),u=e("backbone"),a=e("backbone-epoxy"),f=e("app"),l=e("util"),c=e("coreService"),h=e("model/SingletonAppModel"),p=e("localization"),d=e("markitup"),v=e("markitupset"),m=e("components/markdown/MarkdownEditor"),g=e("defectType/SingletonDefectTypeCollection"),y=f.getInstance(),b=new h,w=o.extend({template:"tpl-modal-defect-editor",className:"modal-defect-editor",events:{"click [data-js-save]":"updateDefectType","click [data-js-select-issue]":"selectIssueType"},initialize:function(e){this.items=e.items,this.defectTypesCollection=new g,this.defectTypesCollection.ready.done(function(){this.render()}.bind(this)),this.selectedIssue=null,this.inProcess=!1},render:function(){this.$el.html(l.templates(this.template,{item:this.items[0],isMultipleEdit:this.isMultipleEdit(),defectsGroup:y.defectsGroupSorted,subDefects:this.getSubDefects(),getIssueType:this.getIssueType,getIssueComment:this.getIssueComment,getDefectType:this.getDefectType()})),this.applyBindings(),this.setupAnchors(),this.setupMarkdownEditor()},isMultipleEdit:function(){return this.items.length>1},setupAnchors:function(){this.$type=i("[data-js-issue-name]",this.$el),this.$replaceComments=i("[data-js-replace-comment]",this.$el)},onKeySuccess:function(){this.updateDefectType()},getIssueType:function(e){var t=e.getIssue();return t.issue_type},getIssueComment:function(e){var t=e.getIssue();return t.comment?t.comment:""},getDefectType:function(){var e=this;return function(t){var n=e.getIssueType(t),r=e.defectTypesCollection.getDefectType(n);return r}},getSubDefects:function(){var e={},t=this.defectTypesCollection.toJSON();return s.each(t,function(t){var n=t.typeRef;e[n]?e[n].push(t):e[n]=[t]}),e},selectIssueType:function(e){var t=i(e.currentTarget),n=t.data("locator"),r=this.defectTypesCollection.getDefectType(n),s=t.closest(".dropdown-menu");i("label",s).removeClass("selected"),t.addClass("selected"),this.selectedIssue=n,this.$type.text(r.longName).attr("class",t.find(".badge").attr("class")),this.$type.closest("[data-js-issue-title]").data("id",this.selectedIssue),i("[data-js-noissue-name]",this.$el).hide(),i("[data-js-issue-title]",this.$el).show(),i("[data-js-issue-title] i",this.$el).css("background",r.color)},setupMarkdownEditor:function(){this.markdownEditor=new m({value:this.items.length!=1?"":this.getIssueComment(this.items[0]),placeholder:p.dialog.commentForDefect}),i("[data-js-issue-comment]",this.$el).html(this.markdownEditor.$el)},onShown:function(){this.markdownEditor.update(),this.initState={comment:this.markdownEditor.getValue(),selectedIssue:this.selectedIssue,replaceComments:this.$replaceComments.is(":checked")}},isChanged:function(){return this.initState.comment===this.markdownEditor.getValue()&&this.initState.selectedIssue===this.selectedIssue&&this.initState.replaceComments===this.$replaceComments.is(":checked")?!1:!0},updateDefectType:function(){if(this.inProcess)return;if(!this.isChanged())return this.successClose(),!0;this.inProcess=!0;var e=this.markdownEditor.getValue(),t=this.selectedIssue,n=[],r=this.$replaceComments.is(":checked");s.forEach(this.items,function(i){var s=i.getIssue();if(r&&this.isMultipleEdit()||!this.isMultipleEdit())s.comment=e;s.issue_type=t||this.getIssueType(i),n.push({test_item_id:i.get("id"),issue:s})},this);var i=this;c.updateDefect({issues:n}).done(function(){var n=this.getIssueType(this.items[0]);t&&n!==t,l.ajaxSuccessMessenger("updateDefect"),s.forEach(i.items,function(n){var i=n.getIssue();if(r&&this.isMultipleEdit()||!this.isMultipleEdit())i.comment=e;i.issue_type=t||this.getIssueType(n),n.setIssue(i)},i),this.successClose()}.bind(this)).fail(function(e){l.ajaxFailMessenger(e,"updateDefect")}).always(function(){this.inProcess=!1}.bind(this))}});return w}),define("tooltips/SimpleTooltipView",["require","exports","module","jquery","backbone-epoxy","util","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone-epoxy"),s=e("util"),o=e("localization"),u=i.View.extend({template:"tpl-launch-message-tooltip",className:"simple-tooltip",initialize:function(e){this.render(e)},render:function(e){this.$el.html(s.templates(this.template,{message:e.message})),e.width&&this.$el.css({width:e.width})},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove(),delete this}});return u}),define("launches/common/StepLogDefectTypeView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","coreService","localization","components/markdown/MarkdownViewer","coreService","defectType/SingletonDefectTypeCollection","modals/modalDefectEditor","tooltips/SimpleTooltipView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("coreService"),f=e("localization"),l=e("components/markdown/MarkdownViewer"),c=e("coreService"),h=e("defectType/SingletonDefectTypeCollection"),p=e("modals/modalDefectEditor"),d=e("tooltips/SimpleTooltipView"),v=u.getInstance(),m=s.View.extend({template:"tpl-Launch-step-log-defect-ticket",tagName:"a",events:{"click [data-js-issue-remove-ticket]":"onClickRemove",mouseenter:"onMouseEnter"},bindings:{":el":"attr: {href: url}","[data-js-ticket-id]":"text: ticketId"},initialize:function(){this.render(),this.$el.attr("target","_blank"),this.hoverAction=!1},render:function(){this.$el.html(o.templates(this.template,{}))},onClickRemove:function(e){e.stopPropagation(),e.preventDefault(),this.model.collection.remove(this.model)},onMouseEnter:function(){if(!this.hoverAction){this.hoverAction=!0;var e=this;this.model.collection.getTicketInfo(this.model.get("ticketId"),this.model.get("systemId")).done(function(t){t.summary.length>200&&r(".ui-tooltip",e.$el).width(432),r("[data-js-tooltip-message]",e.$el).html("<span>"+f.logs.summary+"</span><br>"+t.summary+" <br><br>"+"<span>"+f.logs.status+"</span><br>"+(t.status==="Closed"||t.status==="Resolved"?"<s>"+t.status+"</s>":t.status))}).fail(function(){r("[data-js-tooltip-message]",e.$el).html("<span> "+f.logs.ticketNotFound+"</span><br>"+f.logs.ticketStatusProblem)}).always(function(){r("[data-js-preloader]",e.$el).addClass("hide")})}},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove(),delete this}}),g=s.Model.extend({defaults:{submitDate:0,submitter:"",systemId:"",ticketId:"",url:""}}),y=i.Collection.extend({model:g,initialize:function(){this.cacheAnswer={}},getTicketInfo:function(e,t){var n=r.Deferred(),i=this;return this.cacheAnswer[e]&&this.cacheAnswer[e][t]?n.resolve(this.cacheAnswer[e][t]):a.getBtsTicket(e,t).done(function(r){i.cacheAnswer[e]={},i.cacheAnswer[e][t]=r,n.resolve(r)}).fail(function(){n.reject()}),n}}),b=s.View.extend({template:"tpl-launch-step-log-defect-type",events:{"click [data-js-edit-defect]":"onClickEditDefect"},bindings:{"[data-js-issue-name]":"text: issueName","[data-js-issue-color]":'attr: {style: format("background-color: $1", issueColor)}',"[data-js-issue-title]":"attr: {title: issueTitle}","[data-js-edit-defect]":"attr: {disabled: launch_isProcessing, title: editIssueTitle}, classes: {disabled: launch_isProcessing}"},computeds:{issueComment:{deps:["issue"],get:function(e){var e=this.model.getIssue();return e&&e.comment?e.comment:""}},issueName:{deps:["issue"],get:function(e){var e=this.model.getIssue();if(e&&e.issue_type){var t=this.defetTypesCollection.getDefectByLocator(e.issue_type);return t.get("longName").setMaxLength(20)}return""}},issueTitle:{deps:["issue"],get:function(e){var e=this.model.getIssue();if(e&&e.issue_type){var t=this.defetTypesCollection.getDefectByLocator(e.issue_type);return t.get("longName")}return""}},issueColor:{deps:["issue"],get:function(e){var e=this.model.getIssue();if(e&&e.issue_type){var t=this.defetTypesCollection.getDefectByLocator(e.issue_type);return t.get("color")}return""}},editIssueTitle:{deps:"launch_isProcessing",get:function(e){return e?f.launches.forbiddenIsProcessing:""}}},initialize:function(e){this.defetTypesCollection=new h;var t=this;this.defetTypesCollection.ready.done(function(){t.render(),t.ticketsView=[],t.ticketCollection=new y,t.listenTo(t.ticketCollection,"reset",t.onResetTicketCollection),t.listenTo(t.ticketCollection,"remove",t.onRemoveTicket),t.listenTo(t.model,"change:issue",t.onChangeIssue),t.onChangeIssue(),t.markdownViewer=new l({text:t.getBinding("issueComment")}),r("[data-js-issue-comment]",t.$el).html(t.markdownViewer.$el),t.listenTo(t.model,"change:issue",function(){t.markdownViewer.update(t.getBinding("issueComment"))})})},render:function(){this.$el.html(o.templates(this.template,{model:this.model.toJSON({computed:!0})})),this.applyBindings()},onResetTicketCollection:function(){var e=this;while(e.ticketsView.length)e.ticketsView.pop().destroy();var t=r("[data-js-issue-tickets]",this.$el);_.each(this.ticketCollection.models,function(n){var r=new m({model:n});t.append(r.$el),e.ticketsView.push(r)})},onChangeIssue:function(){var e=[],t=this.model.getIssue();t&&t.externalSystemIssues&&(e=t.externalSystemIssues),this.ticketCollection.reset(e)},onClickEditDefect:function(){var e=new p({items:[this.model]});e.show()},onRemoveTicket:function(e){var t=e.get("ticketId"),n=this.model.getIssue(),r=_.reject(n.externalSystemIssues,function(e){return e.ticketId===t});n.externalSystemIssues=r;var i=this;c.removeTicket({issues:[{issue:n,test_item_id:this.model.get("id")}]}).done(function(e){i.model.setIssue(n),o.ajaxSuccessMessenger("removeTicket")}).fail(function(e){o.ajaxFailMessenger(e)})},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return b}),define("modals/modalLaunchItemEdit",["require","exports","module","jquery","underscore","modals/_modalView","backbone","coreService","app","util","localization","components/markdown/MarkdownEditor"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("modals/_modalView"),o=e("backbone"),u=e("coreService"),a=e("app"),f=e("util"),l=e("localization"),c=e("components/markdown/MarkdownEditor"),h=a.getInstance(),p=s.extend({template:"tpl-modal-launch-edit",className:"modal-launch-edit",bindings:{"[data-js-launch-name]":"text: name","[data-js-description]":"value: description","[data-js-tags]":"value: tagsString"},events:{"click [data-js-save]":"onClickSave","click [data-js-close]":"onClickClose","click [data-js-cancel]":"onClickCancel"},initialize:function(e){this.itemModel=e.item,this.viewModel=new o.Model({name:this.itemModel.get("name")+" "+this.itemModel.get("numberText"),description:this.itemModel.get("description"),tags:this.itemModel.getTags(),tagsString:this.itemModel.getTags().join(",")}),this.render(),this.applyBindings(),f.bootValidator(r("[data-js-description]",this.$el),{validator:"minMaxNotRequired",type:"launchDescription",min:0,max:1024});var t=this;this.markdownEditor=new c({value:this.viewModel.get("description"),placeholder:this.isEditLaunch()?l.dialog.launchDescrPlaceholder:l.dialog.testItemDescrPlaceholder}),r("[data-js-markdown-container]",this.$el).html(this.markdownEditor.$el),this.listenTo(this.markdownEditor,"change",function(e){t.viewModel.set({description:e})});var n=[],s=null;f.setupSelect2WhithScroll(r("[data-js-tags]",this.$el),{formatInputTooShort:function(e,t){return l.ui.enterChars},tags:!0,multiple:!0,noResizeSearch:!1,dropdownCssClass:"",minimumInputLength:1,formatResultCssClass:function(e){if((n.length==0||i.indexOf(n,e.text)<0)&&r(".select2-input.select2-active").val()==e.text)return"exact-match"},initSelection:function(e,n){var r=i.map(t.viewModel.get("tags"),function(e){return e=e.trim(),{id:e,text:e}});n(r)},createSearchChoice:function(e,t){if(i.filter(t,function(t){return t.text.localeCompare(e)===0}).length===0)return{id:e,text:e}},query:function(e){if(e.term==="?")return;var t={results:[]};clearTimeout(s),s=setTimeout(function(){u.searchTags(e).done(function(n){var r=i.isObject(n)&&n.content?"user":"default",n=r=="default"?n:n.content,s=[];i.forEach(n,function(e){r=="user"?(t.results.push({id:e.userId,text:e.full_name}),e=e.full_name):t.results.push({id:e,text:e}),s.push(e)}),e.callback(t)}).fail(function(e){f.ajaxFailMessenger(e)})},h.userFilterDelay)}})},onShown:function(){this.markdownEditor.update()},onKeySuccess:function(){r("[data-js-save]",this.$el).focus().trigger("click")},isEditLaunch:function(){return this.itemModel.get("type")=="LAUNCH"},render:function(){this.$el.html(f.templates(this.template,{isEditLaunch:this.isEditLaunch()}))},onClickClose:function(e){h.trackingDispatcher.trackEventNumber(71)},onClickCancel:function(e){h.trackingDispatcher.trackEventNumber(72)},onClickSave:function(){r(".form-control",this.$el).trigger("validate");if(!r(".has-error",this.$el).length){h.trackingDispatcher.trackEventNumber(73);var e=[];this.viewModel.get("tagsString")!=""&&(e=this.viewModel.get("tagsString").split(",")),this.itemModel.set({description:this.viewModel.get("description"),tags:JSON.stringify(e)}),this.successClose()}}});return p}),define("launches/stepLevel/ParentStepItemView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","localization","launches/common/ItemDurationView","launches/common/StepLogDefectTypeView","modals/modalLaunchItemEdit"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("localization"),f=e("launches/common/ItemDurationView"),l=e("launches/common/StepLogDefectTypeView"),c=e("modals/modalLaunchItemEdit"),h=u.getInstance(),p=s.View.extend({template:"tpl-launch-step-parent",events:{},bindings:{},bindingHandlers:{},computeds:{},initialize:function(e){this.render()},render:function(){this.$el.html(o.templates(this.template,{model:this.model.toJSON(),getParentUrl:this.getParentUrl}))},getParentUrl:function(e){var t=window.location.hash;return t.split("|")[0]+"/"+e},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return p}),define("launches/common/LaunchSuiteStepItemsView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","core/components","storage/SingletonUserStorage","launches/stepLevel/ParentStepItemView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("core/components"),f=e("storage/SingletonUserStorage"),l=e("launches/stepLevel/ParentStepItemView"),c=u.getInstance(),h=s.View.extend({className:"launch-suite-step-items",template:"tpl-launch-suite-step-items",initialize:function(e){this.itemView=e.itemView,this.filterModel=e.filterModel,this.userStorage=new f,this.listenTo(this.collection,"reset",this.renderItems),this.listenTo(this.collection,"loading",this.onLoadingCollection),this.listenTo(this.collection,"change:time:format",this.onChangeTimeFormat),this.onChangeTimeFormat(!0),this.render(),this.renderedItems=[],this.pagingModel=new i.Model,this.paging=new a.PagingToolbar({el:r("[data-js-paginate-container]",this.$el),model:this.pagingModel}),this.renderItems(),this.listenTo(this.paging,"page",this.onChangePage),this.listenTo(this.paging,"count",this.onChangePageCount),this.collection.models.length||this.$el.addClass("not-found")},activateNextId:function(e){var t=this.collection.get(e);t&&t.trigger("scrollToAndHighlight")},onChangeTimeFormat:function(e){var t=this.userStorage.get("startTimeFormat");e||(t==="exact"?t="":t="exact",this.userStorage.set("startTimeFormat",t)),t?this.$el.addClass("exact-driven"):this.$el.removeClass("exact-driven")},render:function(){this.$el.html(o.templates(this.template,{}))},onLoadingCollection:function(e){if(e){this.$el.addClass("load").removeClass("not-found");return}this.$el.removeClass("load"),this.collection.models.length||this.$el.addClass("not-found")},onChangePage:function(e){this.collection.setPaging(e)},onChangePageCount:function(e){this.collection.setPaging(1,e)},renderItems:function(){var e=r("[data-js-launches-container]",this.$el),t=this.collection.validateForAllCases(),n=this;e.html("");if(t){var s={};_.each(n.collection.models,function(t){var r=n.isValidForParent(t,s);if(r){s=r;var o=new l({model:new i.Model({parentPath:s})});e.append(o.$el),n.renderedItems.push(o)}var u=new n.itemView({model:t,filterModel:n.filterModel});e.append(u.$el),n.renderedItems.push(u)})}else _.each(n.collection.models,function(t){var r=new n.itemView({model:t,filterModel:n.filterModel});e.append(r.$el),n.renderedItems.push(r)});this.pagingModel.set(this.collection.pagingData),this.paging.render()},isValidForParent:function(e,t){return _.isEmpty(t)||!_.isEqual(e.get("path_names"),t)?(t=e.get("path_names"),t):!1},destroy:function(){while(this.renderedItems.length)this.renderedItems.pop().destroy();this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove(),delete this}});return h}),define("launches/multipleActions/changeModeAction",["require","exports","module","jquery","underscore","util","modals/modalConfirm","callService","dataUrlResolver","localization","app"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("util"),o=e("modals/modalConfirm"),u=e("callService"),a=e("dataUrlResolver"),f=e("localization"),l=e("app"),c=l.getInstance(),h=function(e){var t=e.items,n=t[0].get("mode")=="DEBUG"?"DEFAULT":"DEBUG",l=t.length>1?f.ui.selectedLaunches:f.ui.launch,h=n=="DEBUG"?f.ui.debug:f.ui.allLaunches,p=new o({headerText:n=="DEBUG"?f.dialogHeader.moveToDebug:f.dialogHeader.moveToAllLaunches,bodyText:s.replaceTemplate(f.dialog.moveLaunch,l,h),cancelButtonText:f.ui.cancel,okButtonText:f.ui.move,confirmFunction:function(){c.trackingDispatcher.trackEventNumber(76);var e={};return i.each(t,function(t){e[t.get("id")]={mode:n}}),u.call("PUT",a.getLaunchUpdate(),{entities:e}).done(function(){s.ajaxSuccessMessenger(n=="DEBUG"?"switchToDebug":"switchToAllLaunches")}).fail(function(e){s.ajaxFailMessenger(e,n=="DEBUG"?"switchToDebug":"switchToAllLaunches")})}});return p.$el.on("click",function(e){var t=r(e.target);(t.is("[data-js-close]")||t.is("[data-js-close] i"))&&c.trackingDispatcher.trackEventNumber(74),t.is("[data-js-cancel]")&&c.trackingDispatcher.trackEventNumber(75)}),p.show()};return h}),define("launches/multipleActions/removeAction",["require","exports","module","jquery","underscore","util","modals/modalConfirm","callService","dataUrlResolver","localization","app"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("util"),o=e("modals/modalConfirm"),u=e("callService"),a=e("dataUrlResolver"),f=e("localization"),l=e("app"),c=l.getInstance(),h=function(e){var t=e.items,n=t.length>1?f.ui.launches:f.ui.launch,l;t[0].get("type")!="LAUNCH"?(n=t.length>1?f.ui.items:f.ui.item,l=""):l=" #"+t[0].get("number").toString().bold();var h=t.length>1?n:n+" '"+t[0].get("name").bold()+l+"'",p=new o({headerText:f.ui.delete+" "+n,bodyText:s.replaceTemplate(f.dialog.msgDeleteItems,n,h),confirmText:s.replaceTemplate(f.launches.deleteAgree,n),cancelButtonText:f.ui.cancel,okButtonText:f.ui.delete,confirmFunction:function(){c.trackingDispatcher.trackEventNumber(79);var e=i.map(t,function(e){return e.get("id")}),n=t.length>1?"deleteLaunches":"deleteLaunch",r=a.getLaunchBase();return t[0].get("type")!="LAUNCH"&&(r=a.itemBase(),n=t.length>1?"deleteTestItems":"deleteTestItem"),u.call("DELETE",r+"?ids="+e.join(",")).done(function(){s.ajaxSuccessMessenger(n)}).fail(function(e){s.ajaxFailMessenger(e,n)})}});return p.$el.on("click",function(e){var t=r(e.target);(t.is("[data-js-close]")||t.is("[data-js-close] i"))&&c.trackingDispatcher.trackEventNumber(77),t.is("[data-js-cancel]")&&c.trackingDispatcher.trackEventNumber(78)}),p.show()};return h}),define("launches/multipleActions/forceFinishAction",["require","exports","module","jquery","underscore","util","modals/modalConfirm","localization","callService","dataUrlResolver","app"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("util"),o=e("modals/modalConfirm"),u=e("localization"),a=e("callService"),f=e("dataUrlResolver"),l=e("app"),c=l.getInstance(),h=function(e){var t=e.items,n=new o({headerText:u.dialogHeader.forceFinish,bodyText:t.length>1?s.replaceTemplate(u.launches.finishWarning,u.ui.launches,u.ui.selectedLaunches):s.replaceTemplate(u.launches.finishWarning,u.ui.launch,u.ui.launch),confirmText:t.length>1?s.replaceTemplate(u.launches.finishAgree,u.ui.launches):s.replaceTemplate(u.launches.finishAgree,u.ui.launch),cancelButtonText:u.ui.cancel,okButtonText:u.ui.finish,confirmFunction:function(){var e={},n=(new Date).getTime();return i.each(t,function(t){e[t.get("id")]={end_time:n,status:c.launchStatus.stopped}}),a.call("PUT",f.getLaunchStop(),{entities:e}).done(function(){s.ajaxSuccessMessenger("finishLaunch"),i.each(t,function(e){e.set({status:c.launchStatus.stopped})})}).fail(function(e){s.ajaxFailMessenger(e,"finishLaunch")})}});return n.show()};return h}),define("launches/launchLevel/LaunchItemMenuView",["require","exports","module","jquery","backbone","backbone-epoxy","util","launchEditor","dataUrlResolver","coreService","localization","app","launches/multipleActions/changeModeAction","launches/multipleActions/removeAction","launches/multipleActions/forceFinishAction"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("launchEditor"),a=e("dataUrlResolver"),f=e("coreService"),l=e("localization"),c=e("app"),h=e("launches/multipleActions/changeModeAction"),p=e("launches/multipleActions/removeAction"),d=e("launches/multipleActions/forceFinishAction"),v=c.getInstance(),m=s.View.extend({className:"dropdown-menu launches-item-menu",tagName:"ul",template:"tpl-launch-edit-menu",events:{"click [data-js-edit-item]":"showEdit","click [data-js-start-analyze]":"startAnalyzeAction","click [data-js-finish]":"finishLaunch","click [data-js-switch-mode]":"switchLaunchMode","click [data-js-remove]":"onClickRemove","click [data-js-export-format]":"onClickExport"},bindings:{"[data-js-finish]":"attr:{title: titleForceFinish, disabled: any(titleForceFinish)}","[data-js-export-format]":"attr:{disabled:not(isExport)}","[data-js-can-match]":"attr:{disabled:not(isMatchIssues)}","[data-js-can-analyze]":"attr:{disabled:not(isAnalyze)}","[data-js-switch-mode]":"text:itemModeText, attr:{disabled:not(isChangeMode)}","[data-js-remove]":"attr: {title: removeTitle, disabled: any(removeTitle)}"},initialize:function(e){this.model=e.model,this.exportFormats={pdf:{name:"PDF",code:30},xls:{name:"XLS",code:31},html:{name:"HTML",code:32}},this.render()},computeds:{isAnalyze:{deps:["launch_isProcessing"],get:function(e){return!e}},isChangeMode:{deps:["launch_owner"],get:function(){return!this.model.validate.changeMode()}},titleForceFinish:{deps:["status","launch_owner"],get:function(){return this.model.validate.forceFinish()}},isExport:{deps:["launch_status"],get:function(e){return e!="IN_PROGRESS"}},removeTitle:{deps:["launch_owner","status"],get:function(){return this.model.validate.remove()}},itemModeText:{deps:["mode"],get:function(e){return e=="DEBUG"?l.launches.shiftToLaunches:l.launches.shiftToDebug}},isMatchIssues:{deps:["launch_status","launch_isProcessing","launch_toInvestigate"],get:function(e,t,n){return e!="IN_PROGRESS"&&!t&&n>0}}},render:function(){var e=this.model.toJSON({computed:!0});this.$el.html(o.templates(this.template,{isDebug:this.isDebug(),isCustomer:o.isCustomer(),getExportUrl:a.exportLaunchUrl,updateImagePath:o.updateImagePath,exportFormats:this.exportFormats,item:e}))},isDebug:function(){return this.model.get("mode")==="DEBUG"},startAnalyzeAction:function(e){e.preventDefault();var t=this,n=r(e.currentTarget),i=this.model.get("id"),s=n.data("analyze-type")==="analyze",u=s?"startLaunchAnalyze":"startLaunchMatch";n.hasClass("disabled")?e.stopPropagation():(v.trackingDispatcher.trackEventNumber(s?28:27),f[u](i).done(function(e){t.model.set("isProcessing",!0),o.ajaxSuccessMessenger("startAnalyzeAction")}).fail(function(e){o.ajaxFailMessenger(e,"startAnalyzeAction")}))},finishLaunch:function(){v.trackingDispatcher.trackEventNumber(26);var e=this;d({items:[this.model]}).done(function(){e.model.collection.load(!0)})},onClickRemove:function(){v.trackingDispatcher.trackEventNumber(29);var e=this;p({items:[this.model]}).done(function(){e.model.collection.load(!0)})},onClickExport:function(e){var t=r(e.currentTarget),n=t.data("js-export-format");v.trackingDispatcher.trackEventNumber(this.exportFormats[n].code)},switchLaunchMode:function(){v.trackingDispatcher.trackEventNumber(25);var e=this;h({items:[this.model]}).done(function(){e.model.collection.load(!0)})},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return m}),define("launches/common/LaunchSuiteDefectsHoverView",["require","exports","module","defectType/SingletonDefectTypeCollection","jquery","backbone-epoxy","util","localization","app"],function(e,t,n){"use strict";var r=e("defectType/SingletonDefectTypeCollection"),i=e("jquery"),s=e("backbone-epoxy"),o=e("util"),u=e("localization"),a=e("app"),f=a.getInstance(),l=s.View.extend({template:"tpl-launch-suite-defects-hover",initialize:function(e){this.type=e.type,this.noLink=e.noLink,this.render()},events:{"click [data-js-defect-total]":"onClickTotalStats"},render:function(){this.$el.html(o.templates(this.template,this.getData()))},onClickTotalStats:function(e){switch(this.type){case"product_bug":f.trackingDispatcher.trackEventNumber(55);break;case"automation_bug":f.trackingDispatcher.trackEventNumber(57);break;case"system_issue":f.trackingDispatcher.trackEventNumber(59);break;default:}},getData:function(){var e=this.getDefectByType(),t=new r,n=[],i=this.model.get("clearUrl"),s="filter.eq.has_childs=false&filter.in.issue$issue_type=";_.each(e,function(e,r){var o=t.getDefectByLocator(r);o&&n.push({color:o.get("color"),name:o.get("longName"),value:e,url:i+"|"+encodeURIComponent(s+o.get("locator"))+"?"+s+o.get("locator")})});var a=t.toJSON(),f=o.getSubDefectsLocators(this.type,a).join("%2C");return{subDefects:n,noSubDefects:this.isNoSubDefects(),noLink:this.noLink,total:{color:t.getMainColorByType(this.type),name:u.infoLine[this.type],value:e.total,url:i+"|"+encodeURIComponent(s+f)+"?"+s+f}}},isNoSubDefects:function(){var e=new r;return!e.checkForSubDefects()||this.type==="to_investigate"},getDefectByType:function(){var e=this.model.get("statistics");return e.defects[this.type]},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove(),delete this}});return l}),define("launches/common/LaunchSuiteDefectsView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","d3","nvd3","defectType/SingletonDefectTypeCollection","launches/common/LaunchSuiteDefectsHoverView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("d3"),f=e("nvd3"),l=e("defectType/SingletonDefectTypeCollection"),c=e("launches/common/LaunchSuiteDefectsHoverView"),h=u.getInstance(),p=s.View.extend({template:"tpl-launch-suite-defects",bindings:{"[data-js-defects-total]":"text: totalDefects, attr: {style: defectBorderColor}","[data-js-link]":"attr: {href: allCasesUrl}"},computeds:{totalDefects:{deps:["statistics"],get:function(e){return e&&e.defects&&e.defects[this.type]&&e.defects[this.type].total?e.defects[this.type].total:0}},allCasesUrl:function(){var e=this.model.get("clearUrl"),t="&filter.in.issue$issue_type=",n=this.defectsCollection.toJSON(),r=o.getSubDefectsLocators(this.type,n).join("%2C"),i="filter.eq.has_childs=false"+t+r;return e+"|"+encodeURIComponent(i)+"?"+i},defectBorderColor:function(){return"border-color: "+this.defectsCollection.getMainColorByType(this.type)}},events:{"mouseenter [data-js-hover-defect]":"onHoverDefectType"},initialize:function(e){this.type=e.type,this.defectsCollection=new l,this.defectsCollection.ready.done(function(){this.render()}.bind(this))},render:function(){this.applyBindings();if(this.getBinding("totalDefects")){this.$el.html(o.templates(this.template,{})),this.drawPieChart();var e=this;this.hoverView=new c({el:r("[data-js-hover-view-container]",this.$el),type:e.type,model:e.model}),this.applyBindings()}},onHoverDefectType:function(e){switch(this.type){case"product_bug":h.trackingDispatcher.trackEventNumber(54);break;case"automation_bug":h.trackingDispatcher.trackEventNumber(56);break;case"system_issue":h.trackingDispatcher.trackEventNumber(58);break;default:}},getDefectByType:function(){var e=this.model.get("statistics");return e.defects[this.type]},getStatisticsByType:function(){return parseInt(this.getDefectByType().total)},getDefectChartData:function(e){var t=[],e=this.getDefectByType();return _.each(e,function(e,n){if(n!=="total"){var r=this.defectsCollection.getDefectType(n);r&&t.push({color:r.color,key:r.longName,value:parseInt(e)})}},this),t},drawPieChart:function(){var e=44,t=44,n=this.getDefectChartData();this.chart=f.models.pie().x(function(e){return e.key}).y(function(e){return e.value}).width(e).height(t).showLabels(!1).donut(!0).growOnHover(!1).donutRatio(.4).startAngle(function(e){return e.startAngle-Math.PI/2}).endAngle(function(e){return e.endAngle-Math.PI/2}).color(function(e){return e.data.color}).valueFormat(a.format("f")),a.select(r("[data-js-chart]",this.$el).get(0)).datum([n]).call(this.chart)},destroy:function(){this.hoverView&&this.hoverView.destroy(),this.chart=null,this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove(),delete this}});return p}),define("launches/common/LaunchSuiteItemView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","localization","components/markdown/MarkdownViewer","defectType/SingletonDefectTypeCollection","launches/launchLevel/LaunchItemMenuView","launches/common/LaunchSuiteDefectsView","launches/common/ItemDurationView","filters/SingletonLaunchFilterCollection","modals/modalLaunchItemEdit","d3","nvd3"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("localization"),f=e("components/markdown/MarkdownViewer"),l=e("defectType/SingletonDefectTypeCollection"),c=e("launches/launchLevel/LaunchItemMenuView"),h=e("launches/common/LaunchSuiteDefectsView"),p=e("launches/common/ItemDurationView"),d=e("filters/SingletonLaunchFilterCollection"),v=e("modals/modalLaunchItemEdit"),m=e("d3"),g=e("nvd3"),y=u.getInstance(),b=s.View.extend({template:"tpl-launch-suite-item",className:"row rp-table-row",statusTpl:"tpl-launch-suite-item-status",events:{"click [data-js-name-link]":"onClickName","click [data-js-launch-menu]":"showItemMenu","click [data-js-time-format]":"toggleStartTimeView","click [data-js-item-edit]":"onClickEdit","click [data-js-tag]":"onClickTag","click [data-js-owner-name]":"onClickOwnerName","click [data-js-statistics-to-investigate]":"onClickToInvestigate"},bindings:{":el":'classes: {"select-state": select}',"[data-js-analize-label]":"classes: {visible: isProcessing}","[data-js-name-link]":'attr: {href: url}, classes: {"not-link": not(url)}',"[data-js-name]":"text: name, attr: {title: nameTitle}","[data-js-launch-number]":"text: numberText","[data-js-item-edit]":"classes: {hide: hideEdit}","[data-js-owner-block]":"classes: {hide: not(owner)}","[data-js-owner-name]":"text: owner","[data-js-time-from-now]":"text: startFromNow","[data-js-time-exact]":"text: startFormat","[data-js-select-item]":"checked: select, attr: {disabled: launch_isProcessing}","[data-js-tags-container]":"sortTags: tags","[data-js-statistics-total]":"text: executionTotal, attr: {href: executionTotalLink}","[data-js-statistics-failed]":"text: executionFailed, attr: {href: executionFailedLink}","[data-js-statistics-skipped]":"text: executionSkipped, attr: {href: executionSkippedLink}","[data-js-statistics-passed]":"text: executionPassed, attr: {href: executionPassedLink}","[data-js-statistics-to-investigate]":"text: defectToInvestigate"},bindingHandlers:{sortTags:{set:function(e){var t=this.view.model.get("sortTags");t.length?e.removeClass("hide"):e.addClass("hide");var n=r("[data-js-tags]",e);n.html(""),_.each(t,function(e){n.append('  <a data-js-tag="'+e+'">'+e.replaceTabs()+"</a>")})}}},computeds:{hideEdit:{deps:["launch_owner"],get:function(){return this.model.validate.edit()}},nameTitle:{deps:["url"],get:function(e){return e?"":a.launches.noItemsInside}},executionTotal:{deps:["statistics"],get:function(e){return this.getExecution(e,"total")}},executionTotalLink:function(){return this.allCasesUrl("total")},executionPassed:{deps:["statistics"],get:function(e){return this.getExecution(e,"passed")}},executionPassedLink:function(){return this.allCasesUrl("passed")},executionSkipped:{deps:["statistics"],get:function(e){return this.getExecution(e,"skipped")}},executionSkippedLink:function(){return this.allCasesUrl("skipped")},executionFailed:{deps:["statistics"],get:function(e){return this.getExecution(e,"failed")}},executionFailedLink:function(){return this.allCasesUrl("failed")},defectToInvestigate:{deps:["statistics"],get:function(e){return e.defects&&e.defects.to_investigate&&parseInt(e.defects.to_investigate.total)?e.defects.to_investigate.total:""}}},getExecution:function(e,t){return e.executions&&e.executions[t]&&parseInt(e.executions[t])?e.executions[t]:""},allCasesUrl:function(e){var t=this.model.get("url"),n="";switch(e){case"total":n="&filter.in.status=PASSED,FAILED,SKIPPED,INTERRUPTED&filter.in.type=STEP";break;case"passed":case"failed":case"skipped":n="&filter.in.status="+e.toUpperCase()+"&filter.in.type=STEP";break;default:}return t+"|"+decodeURIComponent("filter.eq.has_childs=false"+n)+"?"+"&filter.eq.has_childs=false"+n},initialize:function(e){this.statistics=[],this.filterModel=e.filterModel,this.render(),this.applyBindings();var t=new l,n=this;t.ready.done(function(){if(n.getBinding("defectToInvestigate")){var e=t.findWhere({typeRef:"TO_INVESTIGATE"});e&&r("[data-js-statistics-to-investigate]",n.$el).attr({href:n.model.get("url")+"?filter.eq.has_childs=false&filter.in.issue$issue_type="+e.get("locator")})}r("[data-js-label-pb]",n.$el).css({backgroundColor:t.getMainColorByType("product_bug")}),r("[data-js-label-ab]",n.$el).css({backgroundColor:t.getMainColorByType("automation_bug")}),r("[data-js-label-si]",n.$el).css({backgroundColor:t.getMainColorByType("system_issue")}),r("[data-js-label-ti]",n.$el).css({backgroundColor:t.getMainColorByType("to_investigate")})}),this.listenTo(this.model,"scrollToAndHighlight",this.highlightItem),this.markdownViewer=new f({text:this.model.get("description")}),r("[data-js-description]",this.$el).html(this.markdownViewer.$el),this.listenTo(this.model,"change:description",function(e,t){n.markdownViewer.update(t)})},render:function(){this.$el.html(o.templates(this.template,{type:this.model.get("type")})),this.renderDuration(),this.renderDefects()},highlightItem:function(){this.$el.prepend('<div class="highlight"></div>');var e=this;y.mainScrollElement.animate({scrollTop:this.el.offsetTop},500,function(){e.$el.addClass("hide-highlight")})},toggleStartTimeView:function(e){this.model.collection.trigger("change:time:format")},renderDuration:function(){this.duration&&this.duration.destroy(),this.duration=new p({model:this.model,el:r("[data-js-item-status]",this.$el)})},renderDefects:function(){this.productBug&&this.productBug.destroy(),this.productBug=new h({model:this.model,el:r("[data-js-statistics-product-bug]",this.$el),type:"product_bug"}),this.autoBug&&this.autoBug.destroy(),this.autoBug=new h({model:this.model,el:r("[data-js-statistics-automation-bug]",this.$el),type:"automation_bug"}),this.systemIssue&&this.systemIssue.destroy(),this.systemIssue=new h({model:this.model,el:r("[data-js-statistics-system-issue]",this.$el),type:"system_issue"})},onClickToInvestigate:function(){y.trackingDispatcher.trackEventNumber(60)},showItemMenu:function(e){y.trackingDispatcher.trackEventNumber(24);if(!r(e.currentTarget).hasClass("rendered")){var t=r(e.currentTarget);this.menu=new c({model:this.model}),t.after(this.menu.$el).addClass("rendered").dropdown()}},onClickTag:function(e){var t=r(e.currentTarget).data("js-tag");this.addFastFilter("tags",t)},onClickOwnerName:function(){this.addFastFilter("user",this.model.get("owner"))},addFastFilter:function(e,t){if(this.model.get("mode")==="DEBUG"){this.filterModel.trigger("add_entity",e,t);return}if(this.filterModel.get("id")=="all"){var n=new d,r=n.generateTempModel();y.router.navigate(r.get("url"),{trigger:!0}),r.trigger("add_entity",e,t)}else this.filterModel.trigger("add_entity",e,t)},onClickName:function(e){y.trackingDispatcher.trackEventNumber(23),e.preventDefault();var t=r(e.currentTarget).attr("href");t!=""&&(this.model.trigger("drill:item",this.model),y.router.navigate(t,{trigger:!0}))},onClickEdit:function(){y.trackingDispatcher.trackEventNumber(53);var e=new v({item:this.model});e.show()},destroy:function(){this.menu&&this.menu.destroy(),this.duration&&this.duration.destroy(),_.each(this.statistics,function(e){_.isFunction(e.destroy)&&e.destroy()}),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return b}),define("launches/launchLevel/LaunchTableView",["require","exports","module","jquery","underscore","backbone","backbone-epoxy","util","app","launches/common/LaunchSuiteStepItemsView","launches/common/LaunchSuiteItemView","filters/SingletonLaunchFilterCollection","filters/FilterModel","storage/SingletonUserStorage","core/StickyHeader","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("backbone"),o=e("backbone-epoxy"),u=e("util"),a=e("app"),f=e("launches/common/LaunchSuiteStepItemsView"),l=e("launches/common/LaunchSuiteItemView"),c=e("filters/SingletonLaunchFilterCollection"),h=e("filters/FilterModel"),p=e("storage/SingletonUserStorage"),d=e("core/StickyHeader"),v=e("localization"),m=a.getInstance(),g=o.View.extend({template:"tpl-launch-launch-table",events:{"click .rp-grid-th[data-sorter]":"onClickSorter","click .rp-grid-th[data-filter] .rp-icons-filter":"onClickFilter","change [data-js-select-all]":"onChangeSelectAll","mouseenter [data-js-launch-table-title]":"onHoverTitle"},bindings:{".launch-suite-step-items":'classes: {"exact-driven": updateTimeFormat}'},computeds:{updateTimeFormat:function(){var e=this.userStorage.get("startTimeFormat");return e=="exact"?!0:!1}},initialize:function(e){this.filterModel=e.filterModel,this.render(),this.userStorage=new p,this.collectionItems=e.collectionItems,this.tableItems=new f({collection:this.collectionItems,itemView:l,filterModel:this.filterModel}),r("[data-js-table-container]",this.$el).append(this.tableItems.$el),this.listenTo(this.filterModel,"change:newSelectionParameters",this.onChangeSelectionParameters),this.listenTo(this.collectionItems,"reset change:select",i.debounce(this.onResetCollection,100)),this.onChangeSelectionParameters(),this.setupStickyHeader()},activateNextId:function(e){this.tableItems.activateNextId(e)},onResetCollection:function(){var e=this.collectionItems.where({select:!1});e.length&&r("[data-js-select-all]",this.$el).prop("checked",!1)},setupStickyHeader:function(){this.destroyStickyHeader(),this.stickyHeader=new d({fixedBlock:r("[data-js-fixed-header]",this.$el),topMargin:0,minWidthWindow:900})},destroyStickyHeader:function(){this.stickyHeader&&this.stickyHeader.destroy()},onHoverTitle:function(e){var t=r(e.currentTarget).closest(".rp-grid-th").data("filter");switch(t){case"name":m.trackingDispatcher.trackEventNumber(33);break;case"start_time":m.trackingDispatcher.trackEventNumber(35);break;case"statistics$executions$total":m.trackingDispatcher.trackEventNumber(37);break;case"statistics$executions$passed":m.trackingDispatcher.trackEventNumber(39);break;case"statistics$executions$failed":m.trackingDispatcher.trackEventNumber(41);break;case"statistics$executions$skipped":m.trackingDispatcher.trackEventNumber(43);break;case"statistics$defects$product_bug$total":m.trackingDispatcher.trackEventNumber(45);break;case"statistics$defects$automation_bug$total":m.trackingDispatcher.trackEventNumber(47);break;case"statistics$defects$system_issue$total":m.trackingDispatcher.trackEventNumber(49);break;case"statistics$defects$to_investigate$total":m.trackingDispatcher.trackEventNumber(51);break;default:}},onChangeSelectAll:function(e){var t=!1;r(e.currentTarget).is(":checked")&&(t=!0),i.each(this.collectionItems.models,function(e){e.set({select:t})})},onClickSorter:function(e){var t=r(e.currentTarget).data("sorter"),n=this.filterModel.getParametersObj();n.sorting_column==t?n.is_asc=!n.is_asc:(n.is_asc=!0,n.sorting_column=t),this.filterModel.set({newSelectionParameters:JSON.stringify(n),curPage:1})},onClickFilter:function(e){e.stopPropagation();var t=r(e.currentTarget).closest(".rp-grid-th").data("filter");switch(t){case"name":m.trackingDispatcher.trackEventNumber(34);break;case"start_time":m.trackingDispatcher.trackEventNumber(36);break;case"statistics$executions$total":m.trackingDispatcher.trackEventNumber(38);break;case"statistics$executions$passed":m.trackingDispatcher.trackEventNumber(40);break;case"statistics$executions$failed":m.trackingDispatcher.trackEventNumber(42);break;case"statistics$executions$skipped":m.trackingDispatcher.trackEventNumber(44);break;case"statistics$defects$product_bug$total":m.trackingDispatcher.trackEventNumber(46);break;case"statistics$defects$automation_bug$total":m.trackingDispatcher.trackEventNumber(48);break;case"statistics$defects$system_issue$total":m.trackingDispatcher.trackEventNumber(50);break;case"statistics$defects$to_investigate$total":m.trackingDispatcher.trackEventNumber(52);break;default:}if(this.filterModel.get("id")=="all"){var n=new c,i=n.generateTempModel();m.router.navigate(i.get("url"),{trigger:!0}),i.trigger("add_entity",t)}else this.filterModel.trigger("add_entity",t)},onChangeSelectionParameters:function(){r("[data-sorter]",this.$el).removeClass("sorting-asc sorting-desc");var e=this.filterModel.getParametersObj(),t=r('[data-sorter="'+e.sorting_column+'"]',this.$el);t&&t.length&&t.addClass(e.is_asc?"sorting-asc":"sorting-desc")},render:function(){this.$el.html(u.templates(this.template,{}))},destroy:function(){this.destroyStickyHeader(),this.tableItems&&this.tableItems.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return g}),define("tooltips/LaunchSuiteExecutionsTooltipView",["require","exports","module","jquery","backbone-epoxy","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone-epoxy"),s=e("util"),o=i.View.extend({template:"tpl-launch-suite-executions-tooltip",className:"executions-tooltip",initialize:function(e){this.data=e.data,this.render()},render:function(){this.$el.html(s.templates(this.template,{stats:this.data}))},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove(),delete this}});return o}),define("tooltips/LaunchSuiteDurationTooltipView",["require","exports","module","jquery","backbone-epoxy","util","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone-epoxy"),s=e("util"),o=e("localization"),u=i.View.extend({template:"tpl-launch-suite-duration-tooltip",className:"duration-tooltip",initialize:function(){this.render()},render:function(){this.$el.html(s.templates(this.template,{message:o.launchesHeaders.durationSpecific}))},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove(),delete this}});return u}),define("launches/common/InfoPanelView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","launches/common/LaunchSuiteDefectsHoverView","tooltips/LaunchSuiteExecutionsTooltipView","tooltips/LaunchSuiteDurationTooltipView","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("launches/common/LaunchSuiteDefectsHoverView"),f=e("tooltips/LaunchSuiteExecutionsTooltipView"),l=e("tooltips/LaunchSuiteDurationTooltipView"),c=e("localization"),h=u.getInstance(),p=s.View.extend({template:"tpl-launch-suite-info-panel",bindings:{"[data-js-passed-progress]":"attr: {style: getPassedForProgress}","[data-js-failed-progress]":"attr: {style: getFailedForProgress}","[data-js-skipped-progress]":"attr: {style: getSkippedForProgress}","[data-js-statistics-total]":"text: totalStatistics","[data-js-statistics-passed]":"text: passedStatistics","[data-js-defect-product_bug-total]":"text: productBugTotal","[data-js-defect-automation_bug-total]":"text: automationBugTotal","[data-js-defect-system_issue-total]":"text: systemIssueTotal","[data-js-defect-no_defect-total]":"text: noDefectTotal","[data-js-defect-to_investigate-total]":"text: toInvestigateTotal","[data-js-item-duration]":"html: itemDuration"},computeds:{getPassedForProgress:function(){var e=this.getBinding("statistics");return this.getStyleForProgress(e,"passed")},getFailedForProgress:function(){var e=this.getBinding("statistics");return this.getStyleForProgress(e,"failed")},getSkippedForProgress:function(){var e=this.getBinding("statistics");return this.getStyleForProgress(e,"skipped")},totalStatistics:function(){var e=this.getBinding("statistics");return e.executions.total},passedStatistics:function(){var e=this.getBinding("statistics");return this.getExecutionStats(e,"passed")},productBugTotal:function(){var e=this.getBinding("statistics");return this.getDefectStats(e,"product_bug")},automationBugTotal:function(){var e=this.getBinding("statistics");return this.getDefectStats(e,"automation_bug")},systemIssueTotal:function(){var e=this.getBinding("statistics");return this.getDefectStats(e,"system_issue")},noDefectTotal:function(){var e=this.getBinding("statistics");return this.getDefectStats(e,"no_defect")},toInvestigateTotal:function(){var e=this.getBinding("statistics");return this.getDefectStats(e,"to_investigate")},itemDuration:function(){var e=this.getBinding("status"),t=this.getBinding("start_time"),n=this.getBinding("end_time"),r=o.timeFormat(t,n),i=o.dateFormat(n,!0),s=c.launchesHeaders.interruptedAfter+" "+r+". "+c.launchesHeaders.stoppedAt+" "+i;if(e===h.launchStatus.interrupted)return'<abbr title="'+s+'" class="text-danger"><strong>'+r+"</strong></abbr>";if(e===h.launchStatus.inProgress){var u=c.launches.inProcess;return'<span title="'+u+'" class="duration-time"><img alt="'+u+'" src="img/time-in-progress.gif"></span>'}return"<abbr>"+r+"</abbr>"}},initialize:function(e){this.defectTypes=this.getDefectTypes(),this.render(),this.listenTo(this.model,"change:statistics",this.update)},render:function(){this.$el.html(o.templates(this.template,{model:this.model.toJSON({computed:!0}),defectTypes:this.defectTypes})),this.loadDefectTooltip(),this.loadDurationTooltip(),this.loadExecutionsTooltip()},update:function(){this.loadDefectTooltip()},getExecutionStats:function(e,t){var n=e.executions,r=+n.total;return r?(+n[t]/r*100).toFixed(2):0},getDefectStats:function(e,t){var n=e.defects;return n[t].total},getDefectTypes:function(){var e=this.model.get("statistics"),t=e.defects,n={};return _.each(t,function(e,t){var r={type:t,color:o.getDefaultColor(t),longName:_.map(t.split("_"),function(e){return e.capitalize()}).join(" "),shortName:c.defectShortCutById[t.toUpperCase()]};n[t]=r},this),n},getStyleForProgress:function(e,t){var n="width: "+this.getExecutionStats(e,t)+"%;",r="background: "+o.getDefaultColor(t)+";";return n+" "+r},loadDefectTooltip:function(){var e=this.$el.find("[data-js-defect-type]"),t=this;e.each(function(e){var n=r(this),i=n.data("js-defect-type"),s=new a({el:r("[data-js-hover-element]",n),type:i,model:t.model})})},loadDurationTooltip:function(){var e=r("[data-js-duration]"),t=e.next(r("[data-js-hover-element]",this.$el));o.appendTooltip(function(){var e=new l({});return e.$el.html()},t,t)},loadExecutionsTooltip:function(){var e=r("[data-js-executions]"),t=this.model.get("statistics"),n={passed:this.getExecutionStats(t,"passed"),failed:this.getExecutionStats(t,"failed"),skipped:this.getExecutionStats(t,"skipped")},i=e.next(r("[data-js-hover-element]",this.$el));o.appendTooltip(function(){var e=new f({data:n});return e.$el.html()},i,i)},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return p}),define("launches/suiteLevel/SuiteControlView",["require","exports","module","filterEntities/FilterEntitiesView","util","jquery","backbone-epoxy","filters/FilterModel","app","launches/common/InfoPanelView","localization"],function(e,t,n){"use strict";var r=e("filterEntities/FilterEntitiesView"),i=e("util"),s=e("jquery"),o=e("backbone-epoxy"),u=e("filters/FilterModel"),a=e("app"),f=e("launches/common/InfoPanelView"),l=e("localization"),c=a.getInstance(),h=o.View.extend({events:{"click [data-js-refresh]":"onClickRefresh","click [data-js-milti-delete]":"onClickMultiDelete","click [data-js-history]":"onClickHistory"},bindings:{"[data-js-history]":"classes: {hide: not(validateForHistoryBtn)}","[data-js-refresh-counter]":"text: refreshItems, classes: {hide: not(refreshItems)}"},computeds:{validateForHistoryBtn:function(){var e=c.launchStatus.interrupted,t=this.parentModel.get("status")!==e&&this.launchModel.get("status")!==e&&!_.isEmpty(this.collectionItems.models);return t},activeMultiDelete:function(){return this.launchModel.get("status")!=c.launchStatus.inProgress},getHistoryHref:function(){return this.getHistoryLink()}},template:"tpl-launch-suite-control",initialize:function(e){this.context=e.context,this.filterModel=e.filterModel,this.parentModel=e.parentModel,this.launchModel=e.launchModel,this.collectionItems=e.collectionItems,this.render(),this.model=new(o.Model.extend({defaults:{refreshItems:0}})),this.listenTo(this.collectionItems,"change:description change:tags",this.increaseRefreshItemsCount),this.listenTo(this.collectionItems,"loading",this.resetRefreshItems),this.filterEntities=new r({el:s("[data-js-refine-entities]",this.$el),filterLevel:"suit",model:this.filterModel}),this.infoLine=new f({el:s("[data-js-info-line]",this.$el),model:this.parentModel}),this.getBinding("activeMultiDelete")||s("[data-js-milti-delete]",this.$el).attr({title:l.launches.launchNotInProgress})},render:function(){this.$el.html(i.templates(this.template,{context:this.context}))},activateMultiple:function(){s("[data-js-refresh]",this.$el).addClass("disabled"),this.getBinding("activeMultiDelete")&&(s("[data-js-milti-delete]",this.$el).removeClass("disabled").attr({title:l.launches.deleteBulk}),s("[data-js-history]",this.$el).addClass("disabled"))},onClickMultiDelete:function(){this.trigger("multi:action","remove")},disableMultiple:function(){s("[data-js-refresh]",this.$el).removeClass("disabled"),this.getBinding("activeMultiDelete")&&(s("[data-js-milti-delete]",this.$el).addClass("disabled").attr({title:l.launches.actionTitle}),s("[data-js-history]",this.$el).removeClass("disabled"))},onClickRefresh:function(){this.collectionItems.load(),this.resetRefreshItems()},increaseRefreshItemsCount:function(e){this.isAnyFilterEnabled()&&this.isFilteredAttrChanged(e)&&this.model.set({refreshItems:this.model.get("refreshItems")+1})},resetRefreshItems:function(){this.model.set({refreshItems:0})},isFilteredAttrChanged:function(e){var t=this,n=!1;return _.each(this.getFilterEntities(),function(r){_.each(t.getChangedAttrs(e),function(e,t){_.isMatch(r,{filtering_field:t})&&(n=!0)})}),n},getFilterEntities:function(){return this.filterModel.get("newEntities")!==""?JSON.parse(this.filterModel.get("newEntities")):JSON.parse(this.filterModel.get("entities"))},getChangedAttrs:function(e){var t=e.changedAttributes();return t.issue&&(JSON.parse(t.issue).issue_type!==JSON.parse(e.previousAttributes().issue).issue_type&&(t.issue$issue_type=JSON.parse(t.issue).issue_type),JSON.parse(t.issue).comment!==JSON.parse(e.previousAttributes().issue).comment&&(t.issue$issue_comment=JSON.parse(t.issue).comment),delete t.issue),t},isAnyFilterEnabled:function(){return!(this.filterModel.get("newEntities")===""&&this.filterModel.get("entities")==="[]"||this.filterModel.get("newEntities")==="[]"&&this.filterModel.get("entities")==="[]")},getHistoryLink:function(){var e=window.location.hash;return e+="&history.item="+this.parentModel.get("id"),e},onClickHistory:function(e){e.preventDefault(),s(e.currentTarget).hasClass("disabled")||c.router.navigate(this.getHistoryLink(),{trigger:!0})},destroy:function(){this.filterEntities&&this.filterEntities.destroy(),this.infoLine&&this.infoLine.destroy(),this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return h}),define("launches/suiteLevel/SuiteTableView",["require","exports","module","jquery","backbone-epoxy","util","launches/common/LaunchSuiteItemView","launches/common/LaunchSuiteStepItemsView","storage/SingletonUserStorage","core/StickyHeader"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone-epoxy"),s=e("util"),o=e("launches/common/LaunchSuiteItemView"),u=e("launches/common/LaunchSuiteStepItemsView"),a=e("storage/SingletonUserStorage"),f=e("core/StickyHeader"),l=i.View.extend({template:"tpl-launch-suite-table",events:{"click .rp-grid-th[data-sorter]":"onClickSorter","click .rp-grid-th[data-filter] .rp-icons-filter":"onClickFilter","change [data-js-select-all]":"onChangeSelectAll"},bindings:{".launch-suite-step-items":'classes: {"exact-driven": updateTimeFormat}',"[data-js-select-all]":"attr: {disabled: validateIsProcessing}"},computeds:{updateTimeFormat:function(){var e=this.userStorage.get("startTimeFormat");return e=="exact"?!0:!1},validateIsProcessing:function(){return this.getBinding("isProcessing")||this.getBinding("launch_isProcessing")||this.getBinding("parent_launch_isProcessing")}},initialize:function(e){this.filterModel=e.filterModel,this.userStorage=new a,this.collectionItems=e.collectionItems,this.render(),this.tableItems=new u({collection:this.collectionItems,itemView:o,filterModel:this.filterModel}),r("[data-js-table-container]",this.$el).append(this.tableItems.$el),this.listenTo(this.filterModel,"change:newSelectionParameters",this.onChangeSelectionParameters),this.listenTo(this.collectionItems,"reset change:select",_.debounce(this.onResetCollection,100)),this.onChangeSelectionParameters(),this.setupStickyHeader()},activateNextId:function(e){this.tableItems.activateNextId(e)},onResetCollection:function(){var e=this.collectionItems.where({select:!1});e.length&&r("[data-js-select-all]",this.$el).prop("checked",!1)},onClickSorter:function(e){var t=r(e.currentTarget).data("sorter"),n=this.filterModel.getParametersObj();n.sorting_column==t?n.is_asc=!n.is_asc:(n.is_asc=!0,n.sorting_column=t),this.filterModel.set({newSelectionParameters:JSON.stringify(n),curPage:1})},onClickFilter:function(e){e.stopPropagation();var t=r(e.currentTarget).closest(".rp-grid-th").data("filter");if(this.filterModel.get("id")=="all"){var n=new SingletonLaunchFilterCollection,i=n.generateTempModel();config.router.navigate(i.get("url"),{trigger:!0}),i.trigger("add_entity",t)}else this.filterModel.trigger("add_entity",t)},onChangeSelectAll:function(e){var t=!1;r(e.currentTarget).is(":checked")&&(t=!0),_.each(this.collectionItems.models,function(e){e.set({select:t})})},onChangeSelectionParameters:function(){r("[data-sorter]",this.$el).removeClass("sorting-asc sorting-desc");var e=this.filterModel.getParametersObj(),t=r('[data-sorter="'+e.sorting_column+'"]',this.$el);t&&t.length&&t.addClass(e.is_asc?"sorting-asc":"sorting-desc")},render:function(){this.$el.html(s.templates(this.template,{}))},setupStickyHeader:function(){this.destroyStickyHeader(),this.stickyHeader=new f({fixedBlock:r("[data-js-fixed-header]",this.$el),topMargin:0,minWidthWindow:900})},destroyStickyHeader:function(){this.stickyHeader&&this.stickyHeader.destroy()},destroy:function(){this.destroyStickyHeader(),this.tableItems&&this.tableItems.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return l}),define("launches/stepLevel/StepControlView",["require","exports","module","filterEntities/FilterEntitiesView","util","jquery","backbone-epoxy","launches/common/InfoPanelView","app","localization","model/SingletonAppModel"],function(e,t,n){"use strict";var r=e("filterEntities/FilterEntitiesView"),i=e("util"),s=e("jquery"),o=e("backbone-epoxy"),u=e("launches/common/InfoPanelView"),a=e("app"),f=e("localization"),l=e("model/SingletonAppModel"),c=a.getInstance(),h=o.View.extend({events:{"click [data-js-refresh]":"onClickRefresh","click [data-js-multi-action]":"onClickMultiAction","click [data-js-history]":"onClickHistory"},bindings:{"[data-js-history]":"classes: {hide: not(validateForHistoryBtn)}",'[data-js-multi-action="remove"]':"attr: {disabled: not(activeMultiDelete), title: multipleDeleteTooltip}",'[data-js-multi-action="loadbug"]':"attr: {disabled: any(loadBugTooltip), title: loadBugTooltip}",'[data-js-multi-action="postbug"]':"attr: {disabled: any(postBugTooltip), title: postBugTooltip}","[data-js-refresh-counter]":"text: refreshItems, classes: {hide: not(refreshItems)}"},computeds:{validateForHistoryBtn:function(){var e=c.launchStatus.interrupted,t=this.parentModel.get("status")!==e&&this.launchModel.get("status")!==e&&!this.collectionItems.validateForAllCases()&&!_.isEmpty(this.collectionItems.models);return t},getHistoryHref:function(){return this.getHistoryLink()},activeMultiDelete:function(){return this.launchModel.get("status")!=c.launchStatus.inProgress},multipleDeleteTooltip:function(){return this.getBinding("activeMultiDelete")?"":f.launches.launchNotInProgress},loadBugTooltip:function(){return this.appModel.get("isBtsAdded")?"":f.launches.configureTBSLoad},postBugTooltip:function(){return this.appModel.get("isBtsConfigure")?"":f.launches.configureTBS}},template:"tpl-launch-step-control",initialize:function(e){this.context=e.context,this.filterModel=e.filterModel,this.launchModel=e.launchModel,this.parentModel=e.parentModel,this.collectionItems=e.collectionItems,this.appModel=new l,this.model=new(o.Model.extend({defaults:{refreshItems:0}})),this.listenTo(this.collectionItems,"change:issue change:description change:tags",this.increaseRefreshItemsCount),this.listenTo(this.collectionItems,"loading",this.resetRefreshItems),this.listenTo(this.collectionItems,"change:issue",this.updateParentModel),this.render(),this.filterEntities=new r({el:s("[data-js-refine-entities]",this.$el),filterLevel:"test",model:this.filterModel}),this.infoLine=new u({el:s("[data-js-info-line]",this.$el),model:this.parentModel})},render:function(){this.$el.html(i.templates(this.template,{context:this.context}))},updateParentModel:function(){_.each(this.parentModel.collection.models,function(e){e.updateData(!0)})},activateMultiple:function(){s("[data-js-refresh], [data-js-history-view]",this.$el).addClass("disabled"),s("[data-js-multi-button]",this.$el).removeClass("disabled").attr({title:f.ui.actions}),s("[data-js-history]",this.$el).addClass("disabled")},disableMultiple:function(){s("[data-js-refresh], [data-js-history-view]",this.$el).removeClass("disabled"),s("[data-js-multi-button]",this.$el).addClass("disabled").attr({title:f.launches.actionTitle}),s("[data-js-history]",this.$el).removeClass("disabled")},onClickMultiAction:function(e){this.trigger("multi:action",s(e.currentTarget).data("js-multi-action"))},onClickRefresh:function(){this.collectionItems.load(),this.resetRefreshItems()},resetRefreshItems:function(){this.model.set({refreshItems:0})},increaseRefreshItemsCount:function(e){this.isAnyFilterEnabled()&&this.isFilteredAttrChanged(e)&&this.model.set({refreshItems:this.model.get("refreshItems")+1})},isFilteredAttrChanged:function(e){var t=this,n=!1;return _.each(this.getFilterEntities(),function(r){_.each(t.getChangedAttrs(e),function(e,t){t==="issue$issue_type"&&r.filtering_field=="issue$issue_type"?!_.contains(r.value.split(","),e)&&_.isMatch(r,{filtering_field:t})&&(n=!0):_.isMatch(r,{filtering_field:t})&&(n=!0)})}),n},getFilterEntities:function(){return this.filterModel.get("newEntities")!==""?JSON.parse(this.filterModel.get("newEntities")):JSON.parse(this.filterModel.get("entities"))},getChangedAttrs:function(e){var t=e.changedAttributes();return t.issue&&(JSON.parse(t.issue).issue_type!==JSON.parse(e.previousAttributes().issue).issue_type&&(t.issue$issue_type=JSON.parse(t.issue).issue_type),JSON.parse(t.issue).comment!==JSON.parse(e.previousAttributes().issue).comment&&(t.issue$issue_comment=JSON.parse(t.issue).comment),delete t.issue),t},isAnyFilterEnabled:function(){return!(this.filterModel.get("newEntities")===""&&this.filterModel.get("entities")==="[]"||this.filterModel.get("newEntities")==="[]"&&this.filterModel.get("entities")==="[]")},getHistoryLink:function(){var e=window.location.hash;return e+="&history.item="+this.parentModel.get("id"),e},onClickHistory:function(e){e.preventDefault(),s(e.currentTarget).hasClass("disabled")||c.router.navigate(this.getHistoryLink(),{trigger:!0})},destroy:function(){this.filterEntities&&this.filterEntities.destroy(),this.infoLine&&this.infoLine.destroy(),this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return h}),define("launches/stepLevel/StepItemView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","localization","launches/common/ItemDurationView","launches/common/StepLogDefectTypeView","modals/modalLaunchItemEdit","components/markdown/MarkdownViewer"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("localization"),f=e("launches/common/ItemDurationView"),l=e("launches/common/StepLogDefectTypeView"),c=e("modals/modalLaunchItemEdit"),h=e("components/markdown/MarkdownViewer"),p=u.getInstance(),d=s.View.extend({template:"tpl-launch-step-item",events:{"click [data-js-name-link]":"onClickName","click [data-js-time-format]":"toggleStartTimeView","click [data-js-item-edit]":"onClickEdit","click [data-js-tag]":"onClickTag"},bindings:{"[data-js-name-link]":"attr: {href: url}","[data-js-name]":"text: name","[data-js-status]":"text: status","[data-js-owner-block]":"classes: {hide: not(owner)}","[data-js-owner-name]":"text: owner","[data-js-tags-container]":"sortTags: tags","[data-js-method-type]":"text: showMethodType","[data-js-time-from-now]":"text: startFromNow","[data-js-time-exact]":"text: startFormat","[data-js-status-class]":'classes: {failed: highlightedFailed, "select-state": select, "collapse-method": validateForCollapsed}',"[data-js-select-item]":"checked:select, attr: {disabled: launch_isProcessing}"},bindingHandlers:{sortTags:{set:function(e){var t=this.view.model.get("sortTags");t.length?e.removeClass("hide"):e.addClass("hide");var n=r("[data-js-tags]",e);n.html(""),_.each(t,function(e){n.append('  <a data-js-tag="'+e+'">'+e.replaceTabs()+"</a>")})}}},computeds:{showMethodType:{deps:["type"],get:function(e){return a.testTableMethodTypes[e]}},highlightedFailed:{deps:["status"],get:function(e){return e=="FAILED"}},validateForCollapsed:{deps:["status","type"],get:function(e,t){return(t.indexOf("METHOD")>=0||t.indexOf("CLASS")>=0)&&e!=="FAILED"}}},initialize:function(e){this.noIssue=e.noIssue,this.filterModel=e.filterModel,this.render(),this.listenTo(this.model,"scrollToAndHighlight",this.highlightItem);var t=this;this.markdownViewer=new h({text:this.model.get("description")}),r("[data-js-description]",this.$el).html(this.markdownViewer.$el),this.listenTo(this.model,"change:description",function(e,n){t.markdownViewer.update(n)})},render:function(){this.$el.html(o.templates(this.template,{model:this.model.toJSON({computed:!0}),noIssue:this.noIssue,isCollapsedMethod:this.isCollapsedMethod()})),this.renderDuration(),this.hasIssue()&&!this.noIssue&&this.renderIssue()},highlightItem:function(){r("[data-js-status-class]",this.$el).prepend('<div class="highlight"></div>');var e=this;p.mainScrollElement.animate({scrollTop:this.el.offsetTop},500,function(){r("[data-js-status-class]",e.$el).addClass("hide-highlight")})},renderDuration:function(){this.duration&&this.duration.destroy(),this.duration=new f({model:this.model,el:r("[data-js-item-status]",this.$el)})},toggleStartTimeView:function(e){this.model.collection.trigger("change:time:format")},isCollapsedMethod:function(){return this.model.get("type")!=="STEP"&&this.model.get("status")!=="FAILED"},hasIssue:function(){var e=this.model.get("issue");return e?!0:!1},renderIssue:function(){this.issueView=new l({model:this.model,el:r("[data-js-step-issue]",this.$el)})},onClickTag:function(e){var t=r(e.currentTarget).data("js-tag");this.addFastFilter("tags",t)},addFastFilter:function(e,t){this.filterModel.trigger("add_entity",e,t)},onClickName:function(e){e.preventDefault(),p.trackingDispatcher.trackEventNumber(23);var t=r(e.currentTarget).attr("href");if(t!="")this.model.trigger("drill:item",this.model),p.router.navigate(t,{trigger:!0});else{var n=window.location.hash;n+="&log.item="+this.model.get("id"),p.router.navigate(n,{trigger:!0})}},onClickEdit:function(){var e=new c({item:this.model});e.show()},destroy:function(){this.issueView&&this.issueView.destroy(),this.duration&&this.duration.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return d}),define("launches/stepLevel/StepTableView",["require","exports","module","jquery","backbone-epoxy","util","localization","launches/stepLevel/StepItemView","launches/common/LaunchSuiteStepItemsView","storage/SingletonUserStorage","app","core/StickyHeader"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone-epoxy"),s=e("util"),o=e("localization"),u=e("launches/stepLevel/StepItemView"),a=e("launches/common/LaunchSuiteStepItemsView"),f=e("storage/SingletonUserStorage"),l=e("app"),c=e("core/StickyHeader"),h=l.getInstance(),p=i.View.extend({template:"tpl-launch-step-table",events:{"click .rp-grid-th[data-sorter]":"onClickSorter","click .rp-grid-th[data-filter] .rp-icons-filter":"onClickFilter","click [data-js-collapse-label]":"clickCollapseInput","change [data-js-select-all]":"onChangeSelectAll","change [data-js-collapse-input]":function(e){this.onChangeCollapseInput(r(e.currentTarget))}},bindings:{"[data-js-table-container]":'classes: {"exact-driven": updateTimeFormat}',"[data-js-select-all]":"attr: {disabled: validateIsProcessing}"},computeds:{updateTimeFormat:function(){var e=this.userStorage.get("startTimeFormat");return e=="exact"?!0:!1},validateIsProcessing:function(){return this.getBinding("isProcessing")||this.getBinding("launch_isProcessing")||this.getBinding("parent_launch_isProcessing")}},initialize:function(e){this.filterModel=e.filterModel,this.collectionItems=e.collectionItems,this.render(),this.tableItems=new a({collection:this.collectionItems,itemView:u,filterModel:this.filterModel}),r("[data-js-table-container]",this.$el).append(this.tableItems.$el),this.listenTo(this.filterModel,"change:newSelectionParameters",this.onChangeSelectionParameters),this.listenTo(this.collectionItems,"reset change:select",_.debounce(this.onResetCollection,100)),this.onChangeSelectionParameters(),this.userStorage=new f;var t=this;this.userStorage.ready.done(function(){t.applyPreconditionsStatus()}),this.setupStickyHeader()},activateNextId:function(e){this.tableItems.activateNextId(e)},onResetCollection:function(){var e=this.collectionItems.where({select:!1});e.length&&r("[data-js-select-all]",this.$el).prop("checked",!1)},clickCollapseInput:function(e){e.stopPropagation()},onChangeCollapseInput:function(e,t){var n=e.is(":checked");this.userStorage.set("statusPreconditions",n);var i=o.launches.showPreconditionMethods;n?(i=o.launches.hidePreconditionMethods,r("[data-js-table-container]",this.$el).addClass("hide-collapsed-methods")):r("[data-js-table-container]",this.$el).removeClass("hide-collapsed-methods"),!t,r("[data-js-collapse-label]",this.$el).attr("title",i)},applyPreconditionsStatus:function(){var e=r("[data-js-collapse-input]",this.$el);e.prop("checked",this.userStorage.get("statusPreconditions")),this.onChangeCollapseInput(e,!0)},onChangeSelectAll:function(e){var t=!1;r(e.currentTarget).is(":checked")&&(t=!0),_.each(this.collectionItems.models,function(e){e.set({select:t})})},onClickSorter:function(e){var t=r(e.currentTarget).data("sorter"),n=this.filterModel.getParametersObj();n.sorting_column==t?n.is_asc=!n.is_asc:(n.is_asc=!0,n.sorting_column=t),this.filterModel.set({newSelectionParameters:JSON.stringify(n),curPage:1})},onClickFilter:function(e){e.stopPropagation();var t=r(e.currentTarget).closest(".rp-grid-th").data("filter");if(this.filterModel.get("id")=="all"){var n=new SingletonLaunchFilterCollection,i=n.generateTempModel();h.router.navigate(i.get("url"),{trigger:!0}),i.trigger("add_entity",t)}else this.filterModel.trigger("add_entity",t)},onChangeSelectionParameters:function(){r("[data-sorter]",this.$el).removeClass("sorting-asc sorting-desc");var e=this.filterModel.getParametersObj(),t=r('[data-sorter="'+e.sorting_column+'"]',this.$el);t&&t.length&&t.addClass(e.is_asc?"sorting-asc":"sorting-desc")},render:function(){this.$el.html(s.templates(this.template,{preconditionsStatusCls:this.statusPreconditions=="ON"?"":"hide-collapsed-methods"}))},setupStickyHeader:function(){this.destroyStickyHeader(),this.stickyHeader=new c({fixedBlock:r("[data-js-fixed-header]",this.$el),topMargin:0,minWidthWindow:900})},destroyStickyHeader:function(){this.stickyHeader&&this.stickyHeader.destroy()},destroy:function(){this.destroyStickyHeader(),this.tableItems&&this.tableItems.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return p}),define("launches/logLevel/LogControlView",["require","exports","module","jquery","underscore","backbone","backbone-epoxy","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("backbone"),o=e("backbone-epoxy"),u=e("util"),a=o.View.extend({events:{"click [data-js-button-prev]":"onClickNavigation","click [data-js-button-next]":"onClickNavigation","click [data-js-button-refresh]":"onClickRefresh"},template:"tpl-launch-log-control",initialize:function(e){this.collectionItems=e.collectionItems,this.render(),this.updateNavButton(this.collectionItems.logOptions.item)},updateNavButton:function(e){var t=0;i.each(this.collectionItems.models,function(n,r){if(n.get("id")==e){t=r;return}}),this.setButtonState(r("[data-js-button-prev]",this.$el),this.collectionItems.at(t-1)),this.setButtonState(r("[data-js-button-next]",this.$el),this.collectionItems.at(t+1))},setButtonState:function(e,t){if(!t){e.addClass("disabled"),e.removeAttr("href"),e.attr({title:"",disabled:"disabled"});return}e.removeClass("disabled"),e.removeAttr("disabled"),e.attr({href:this.collectionItems.getPathByLogItemId(t.get("id")),title:t.get("name")}).data({id:t.get("id")})},onClickNavigation:function(e){e.preventDefault();var t=r(e.currentTarget);this.collectionItems.setLogItem(t.data("id")),this.updateNavButton(t.data("id"))},onClickRefresh:function(){this.collectionItems.trigger("update:logs")},render:function(){this.$el.html(u.templates(this.template,{}))},destroy:function(){this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return a}),define("launches/common/LaunchSuiteStepItemModel",["require","exports","module","backbone-epoxy","underscore","util","app","coreService","localization","model/SingletonAppModel","model/UserModel"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("underscore"),s=e("util"),o=e("app"),u=e("coreService"),a=e("localization"),f=o.getInstance(),l=e("model/SingletonAppModel"),c=e("model/UserModel"),h=r.Model.extend({defaults:{approximateDuration:0,description:"",id:"",isProcessing:!1,isShared:!1,mode:"",name:"",number:0,owner:"",start_time:0,end_time:0,statistics:{defects:{},executions:{}},status:"",tags:"",type:"",has_childs:!0,issue:"",select:!1,invalidMessage:"",parent_launch_owner:null,parent_launch_status:null,parent_launch_isProcessing:null,parent_launch_investigate:null},computeds:{launch_owner:{deps:["owner","parent_launch_owner"],get:function(e,t){return t||e}},launch_status:{deps:["status","parent_launch_status"],get:function(e,t){return t||e}},launch_isProcessing:{deps:["isProcessing","parent_launch_isProcessing"],get:function(e,t){return t!=null?t:e}},launch_toInvestigate:{deps:["parent_launch_investigate","statistics"],get:function(e,t){if(e!=null)return e;var t=this.get("statistics");return t&&t.defects&&t.defects.to_investigate?t.defects.to_investigate.total:0}},url:{deps:["id","has_childs"],get:function(e,t){return t?window.location.hash.split("?")[0]+"/"+e:""}},clearUrl:{deps:["url"],get:function(e){return e.split("|")[0]}},numberText:{deps:["number"],get:function(e){return e?" #"+e:""}},sortTags:{deps:["tags"],get:function(){return i.sortBy(this.getTags(),function(e){return e.toUpperCase()==="BUILD"||e.indexOf("uild")!==-1})}},startFormat:{deps:["start_time"],get:function(e){return s.dateFormat(e)}},startFromNow:{deps:["startFormat"],get:function(e){return s.fromNowFormat(e)}},formatEndTime:{deps:["end_time"],get:function(e){return s.dateFormat(e,!0)}}},initialize:function(){this.validate=this.getValidate(),this.listenTo(this,"change:description change:tags",i.debounce(this.onChangeItemInfo,10)),this.appModel=new l,this.userModel=new c},restorePath:function(){this.initComputeds()},getIssue:function(){try{return JSON.parse(this.get("issue"))}catch(e){return{}}},setIssue:function(e){this.set({issue:JSON.stringify(e)})},getTags:function(){try{return JSON.parse(this.get("tags"))}catch(e){return[]}},setTags:function(e){this.set({issue:JSON.stringify(e)})},getValidate:function(){var e=this,t=function(){return e.userModel.get("isAdmin")||e.userModel.getRoleForCurrentProject()==f.projectRolesEnum.lead||e.userModel.getRoleForCurrentProject()==f.projectRolesEnum.project_manager},n={edit:function(){return e.get("launch_owner")!=f.userModel.get("name")&&!t()?"You are not a launch owner":""},merge:function(){return e.get("launch_owner")!=f.userModel.get("name")&&!t()?"You are not a launch owner":e.get("launch_status")=="IN_PROGRESS"?"Launch should not be in the status IN PROGRESS":e.get("launch_isProcessing")?"Launch should not be processing by Auto Analysis":""},changeMode:function(){return e.get("launch_owner")!=f.userModel.get("name")&&!t()?"You are not a launch owner":""},forceFinish:function(){return e.get("status")!="IN_PROGRESS"?"Launch is already finished":e.get("launch_owner")!=f.userModel.get("name")&&!t()?"You are not a launch owner":""},editDefect:function(){return e.get("issue")?"":"Item not has issue for edit"},remove:function(){return e.get("launch_owner")!=f.userModel.get("name")&&!t()?"You are not a launch owner":e.get("launch_status")=="IN_PROGRESS"?"Launch should not be in the status IN PROGRESS":""},loadbug:function(){var t=e.getIssue();return!t||!t.issue_type?a.launches.noIssuesLoad:e.appModel.get("isBtsAdded")?"":a.launches.configureTBSLoad},postbug:function(){var t=e.getIssue();return!t||!t.issue_type?a.launches.noIssues:e.appModel.get("isBtsConfigure")?"":a.launches.configureTBS}};return n},onChangeItemInfo:function(){var e="updateLaunch";this.get("type")!="LAUNCH"&&(e="updateTestItem"),u[e]({description:this.get("description"),tags:this.getTags()},this.get("id")).done(function(){s.ajaxSuccessMessenger(e)}).fail(function(e){s.ajaxFailMessenger(e)})}});return h}),define("launches/logLevel/LogHistoryLine",["require","exports","module","jquery","underscore","backbone","backbone-epoxy","coreService","launches/common/LaunchSuiteStepItemModel","defectType/SingletonDefectTypeCollection","util","app","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("backbone"),o=e("backbone-epoxy"),u=e("coreService"),a=e("launches/common/LaunchSuiteStepItemModel"),f=e("defectType/SingletonDefectTypeCollection"),l=e("util"),c=e("app"),h=e("localization"),p=c.getInstance(),d=s.Collection.extend({model:a,initialize:function(e){this.launchModel=e.launchModel,this.launchId=e.launchId,this.listenTo(this,"activate",this.activateItem)},activateItem:function(e){i.each(this.models,function(e){e.set({active:!1})}),e.set({active:!0})},load:function(e,t){var n=this;return u.loadHistory(e).done(function(e){n.reset(n.parse(e,t))})},parse:function(e,t){var n=this,r=i.map(e,function(e,r){var s={launchNumber:e.launchNumber,active:!1,parent_launch_status:e.launchStatus};return i.each(e.resources,function(e){e.id==t&&(s.active=!0)}),e.launchId==n.launchModel.get("id")||r==0&&n.launchModel.get("failLoad")?(s.parent_launch_investigate=n.launchModel.getToInvestigate(),s.active?i.each(e.resources,function(e){e.id==t&&(s=i.extend(s,n.updateDataForModel(e)))}):s=i.extend(s,n.updateDataForModel(e.resources[0]))):e.resources.length==1?s=i.extend(s,n.updateDataForModel(e.resources[0])):e.resources.length==0?s.status="NOT_FOUND":s.status="MANY",s});return r.reverse()},updateDataForModel:function(e){return e.issue&&(e.issue=JSON.stringify(e.issue)),e.tags&&(e.tags=JSON.stringify(e.tags)),e}}),v=o.View.extend({template:"tpl-launch-log-history-line-item",className:"history-line-item",events:{click:"onClickItem"},bindings:{"[data-js-launch-number]":"text: launchNumber",":el":"classes: {active: active}","[data-js-tooltip-item]":"attr: {title: statusTitle}"},computeds:{statusTitle:{deps:["status"],get:function(e){return h.historyLine.tooltips[e]}}},isAction:function(){return this.model.get("status")!="MANY"&&this.model.get("status")!="NOT_FOUND"},initialize:function(){this.render(),this.$el.addClass("status-"+this.model.get("status")),this.defectTypeCollection=new f,this.updateIssue(),this.listenTo(this.model,"change:issue",this.updateIssue),this.model.get("parent_launch_status")=="IN_PROGRESS"&&this.$el.addClass("launch-is-progress")},updateIssue:function(){var e=this,t=this.model.getIssue();t.comment?r("[data-js-comment]",this.$el).removeClass("hide"):r("[data-js-comment]",this.$el).addClass("hide"),t.issue_type?this.defectTypeCollection.ready.done(function(){var n=e.defectTypeCollection.getDefectByLocator(t.issue_type);r("[data-js-issue-type]",e.$el).removeClass("hide").css({backgroundColor:n.get("color"),color:n.get("reverseColor"),boxShadow:"0 0 1px "+n.get("reverseColor")}).text(n.get("shortName"))}):r("[data-js-issue-type]",e.$el).addClass("hide"),t.externalSystemIssues&&t.externalSystemIssues.length?r("[data-js-ticket]",this.$el).removeClass("hide"):r("[data-js-ticket]",this.$el).addClass("hide")},onClickItem:function(){!this.model.get("active")&&this.isAction()&&(this.model.trigger("activate",this.model),this.model.trigger("hover:false"))},render:function(){this.$el.html(l.templates(this.template,this.model.toJSON()))},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove(),delete this}}),m=o.View.extend({template:"tpl-launch-log-history-line",initialize:function(e){this.collectionItems=e.collectionItems,this.launchModel=e.launchModel,this.renderedItems=[],this.collection=new d({launchModel:this.launchModel}),this.listenTo(this.collection,"reset",this.onResetHistoryItems),this.listenTo(this.collection,"hover:true",this.onHoverItem),this.listenTo(this.collection,"hover:false",this.onOutItem),this.render();var t=this,n=this.collectionItems.getInfoLog().item,r=this.collectionItems.get(n);r&&(this.load=this.collection.load(n,this.collectionItems.getInfoLog().history||n).always(function(){t.trigger("load:history");var e=t.collection.where({active:!0});e.length==1&&t.trigger("activate:item",e[0],!0)})),this.listenTo(this.collection,"activate",function(e){t.trigger("activate:item",e)})},render:function(){this.$el.html(l.templates(this.template,{}))},onResetHistoryItems:function(){var e=r("[data-js-history-container]",this.$el),t=this;i.each(this.collection.models,function(n){var r=new v({model:n});e.append(r.$el),t.renderedItems.push(r)})},destroy:function(){this.load&&this.load.abort();while(this.renderedItems.length)this.renderedItems.pop().destroy();this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return m}),define("launches/logLevel/LogItemModel",["require","exports","module","jquery","backbone-epoxy","util","dataUrlResolver"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone-epoxy"),s=e("util"),o=e("dataUrlResolver"),u=i.Model.extend({defaults:{binary_content:null,message:"",time:0,level:null},computeds:{timeString:{deps:["time"],get:function(e){return s.dateFormat(e)}},imagePath:{deps:["binary_content"],get:function(e){return e?~e.content_type.search("image/")?o.getFileById(e.thumbnail_id):"img/launch/attachment.png":""}}}});return u}),define("launches/logLevel/LogItemCollection",["require","exports","module","jquery","backbone","launches/logLevel/LogItemModel","callService","dataUrlResolver"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("launches/logLevel/LogItemModel"),o=e("callService"),u=e("dataUrlResolver"),a=o.call,f=i.Collection.extend({model:s,initialize:function(e){this.filterModel=e.filterModel,this.itemModel=e.itemModel,this.listenTo(this.filterModel,"change:newSelectionParameters change:newEntities",this.onChangeFilter),this.pagingPage=e.pagingPage||1,this.pagingSize=e.pagingSize||50,this.loadDebounce=_.debounce(this.load.bind(this),10)},onChangeFilter:function(){this.pagingPage=1,this.loadDebounce(),this.trigger("change:options",this.getParamsForUrl())},load:function(){this.trigger("loading:true");var e=u.getLogsUrl()+"?"+this.getParamsForRequest().join("&"),t=this;return this.request&&this.request.abort(),this.request=a("GET",e).done(function(e){t.trigger("change:paging",e.page),t.reset(e.content)}).always(function(){t.trigger("loading:false")}),this.request},setPaging:function(e,t){this.pagingPage=e,t&&(this.pagingSize=t);var n=this.loadDebounce();return this.trigger("change:options",this.getParamsForUrl()),n},getParamsForRequest:function(e){var t=["filter.eq.item="+this.itemModel.get("id")];return!e&&t.push("page.page="+this.pagingPage),t.push("page.size="+this.pagingSize),t=t.concat(this.filterModel.getOptions()),t},getParamsForUrl:function(){var e=[];e.push("log.page.page="+this.pagingPage),e.push("log.page.size="+this.pagingSize);var t=_.map(this.filterModel.getOptions(),function(e){return"log."+e});return e=e.concat(t),e},findLogPage:function(e,t){var n=r.Deferred(),i=u.getLogsUrl()+"/"+e+"/page",s=this.getParamsForRequest();if(t){var o=[];_.each(s,function(e){~e.search(/(binary_content|in\.level|cnt\.message)/)||o.push(e)}),s=o}return i+="?"+s.join("&"),a("GET",i).done(function(e){n.resolve(e.number)}).fail(function(){n.reject()}),n}});return f}),define("launches/logLevel/LogItemInfoStackTraceView",["require","exports","module","jquery","backbone","backbone-epoxy","util","filters/FilterModel","launches/logLevel/LogItemCollection"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("filters/FilterModel"),a=e("launches/logLevel/LogItemCollection"),f=s.View.extend({className:"stack-trace-item",bindings:{":el":"text: message"},initialize:function(){}}),l=s.View.extend({template:"tpl-launch-log-item-info-stack-trace",events:{"click [data-js-close]":"onClickClose","click [data-js-go-to-log]":"onClickGoToLog"},initialize:function(e){this.render(),this.isLoad=!1,this.itemModel=e.itemModel,this.parentModel=e.parentModel,this.listenTo(this.parentModel,"change:stackTrace",this.onShow);var t=new u({temp:!0,entities:'[{"filtering_field":"level","condition":"in","value":"ERROR"}]',selection_parameters:'{"is_asc": false, "sorting_column": "time"}'});this.collection=new a({filterModel:t,itemModel:this.itemModel}),this.listenTo(this.collection,"loading:true",this.onStartLoading),this.listenTo(this.collection,"loading:false",this.onStopLoading),this.listenTo(this.collection,"reset",this.onResetCollection)},onClickClose:function(){this.parentModel.set({stackTrace:!1})},render:function(){this.$el.html(o.templates(this.template),{})},onShow:function(e,t){t&&!this.isLoad&&(this.isLoad=!0,this.load())},onResetCollection:function(){this.collection.models.length?(r("[data-js-stack-trace-wrapper]",this.$el).removeClass("not-found"),r("[data-js-stack-trace-container]",this.$el).append((new f({model:this.collection.models[0]})).$el)):(r("[data-js-stack-trace-container]",this.$el).html(""),r("[data-js-stack-trace-wrapper]",this.$el).addClass("not-found"))},onStartLoading:function(){r("[data-js-stack-trace-wrapper]",this.$el).addClass("load")},onStopLoading:function(){r("[data-js-stack-trace-wrapper]",this.$el).removeClass("load")},onClickGoToLog:function(){r("[data-js-stack-trace-wrapper]",this.$el).addClass("load-go-to-log"),this.trigger("goToLog",this.collection.models[0].get("id"))},endGoToLog:function(){r("[data-js-stack-trace-wrapper]",this.$el).removeClass("load-go-to-log")},load:function(){this.collection.setPaging(1,1)},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return l}),define("launches/logLevel/LogItemInfoDetailsView",["require","exports","module","jquery","backbone","backbone-epoxy","util","launches/stepLevel/StepItemView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("launches/stepLevel/StepItemView"),a=s.View.extend({template:"tpl-launch-log-item-info-details",events:{"click [data-ja-close]":"onClickClose"},initialize:function(e){this.render(),this.itemModel=e.itemModel,this.parentModel=e.parentModel,this.itemView=new u({el:r("[data-js-item-detail-container]",this.$el),noIssue:!0,model:this.itemModel})},render:function(){this.$el.html(o.templates(this.template),{})},onClickClose:function(){this.parentModel.set({itemDetails:!1})},destroy:function(){this.itemView.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return a}),define("launches/logLevel/LogItemInfoActivity",["require","exports","module","jquery","backbone","backbone-epoxy","util","coreService","moment","components/markdown/MarkdownViewer"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("coreService"),a=e("moment"),f=e("components/markdown/MarkdownViewer"),l=s.Model.extend({defaults:{lastModifiedDate:0,userRef:"",history:{},actionType:""},computeds:{fullTime:{deps:["lastModifiedDate"],get:function(e){return o.dateFormat(e)}},momentTime:{deps:["lastModifiedDate"],get:function(e){return a(o.dateFormat(e)).fromNow()}},fullName:{deps:["userRef"],get:function(e){return e.replace("_"," ")}},actionName:{deps:["history","actionType"],get:function(e,t){var n=_.size(e)>1?"issue":_.first(Object.keys(e)).split("_").join(" "),r=t.split("_");return r[0]=r[0].match("e$")?r[0]+"d":r[0]+"ed",r.join(" ")+" "+n}},actionsHtml:{deps:["history"],get:function(e){var t="";return _.each(e,function(e,n){t+='<div class="action-row">',n=="ticketId"?t+='<div class="action-item"><span>FROM: </span>'+this.getActionTicketsHtml(e.oldValue)+"</div>"+'<div class="separate-items"><i class="material-icons">keyboard_arrow_right</i></div>'+'<div class="action-item"><span>TO: </span>'+this.getActionTicketsHtml(e.newValue)+"</div>":t+='<div class="action-item"><span>FROM: </span>'+this.getActionValueHtml(e.oldValue)+"</div>"+'<div class="separate-items"><i class="material-icons">keyboard_arrow_right</i></div>'+'<div class="action-item"><span>TO: </span>'+this.getActionValueHtml(e.newValue)+"</div>",t+="</div>"},this),t}}},getActionTicketsHtml:function(e){var e=e||"",t=e.split(","),n=[];return _.each(t,function(e){var t=o.getTicketUrlId(e);n.push(t.url?'<a target="_blank" class="rp-blue-link-undrl" href="'+t.url+'">'+t.id+"</a>":t.id)}),n.join(",")},getActionValueHtml:function(e){var t=new f({text:e});return t.$el.wrap("<p/>").parent().html()}}),c=s.View.extend({template:"tpl-launch-log-item-info-activity-item",className:"activity-row",bindings:{"[data-js-user-name]":"text: userRef","[data-js-action-name]":"text: actionName","[data-js-moment-time]":"text: momentTime","[data-js-full-time]":"text: fullTime","[data-js-difference]":"html: actionsHtml"},initialize:function(){this.render()},render:function(){this.$el.html(o.templates(this.template,{}))}}),h=s.View.extend({template:"tpl-launch-log-item-info-activity",events:{"click [data-js-close]":"onClickClose"},initialize:function(e){this.render(),this.isLoad=!1,this.itemModel=e.itemModel,this.parentModel=e.parentModel,this.listenTo(this.parentModel,"change:activity",this.onShow)},onShow:function(e,t){t&&!this.isLoad&&(this.isLoad=!0,this.listenTo(this.itemModel,"change:issue",this.load),this.load())},load:function(){r("[data-js-activity-container]",this.$el).html(""),r("[data-js-activity-wrapper]",this.$el).addClass("load"),r("[data-js-activity-wrapper]",this.$el).removeClass("not-found");var e=this;u.loadActivityItems(this.itemModel.get("id")).done(function(t){e.parse(t)}).fail(function(){r("[data-js-activity-wrapper]",e.$el).addClass("not-found")}).always(function(){r("[data-js-activity-wrapper]",e.$el).removeClass("load")})},parse:function(e){var t=this,n=r("[data-js-activity-container]",this.$el);if(e.length==0){r("[data-js-activity-wrapper]",t.$el).addClass("not-found");return}r("[data-js-activity-wrapper]",t.$el).removeClass("not-found"),_.each(e,function(e){var t=new l(e);n.append((new c({model:t})).$el)})},render:function(){this.$el.html(o.templates(this.template),{})},onClickClose:function(){this.parentModel.set({activity:!1})},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return h}),function(e,t,n,r){"use strict";function l(e,t,n){return setTimeout(y(e,n),t)}function c(e,t,n){return Array.isArray(e)?(h(e,n[t],n),!0):!1}function h(e,t,n){var i;if(!e)return;if(e.forEach)e.forEach(t,n);else if(e.length!==r){i=0;while(i<e.length)t.call(n,e[i],i,e),i++}else for(i in e)e.hasOwnProperty(i)&&t.call(n,e[i],i,e)}function p(t,n,r){var i="DEPRECATED METHOD: "+n+"\n"+r+" AT \n";return function(){var n=new Error("get-stack-trace"),r=n&&n.stack?n.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",s=e.console&&(e.console.warn||e.console.log);return s&&s.call(e.console,i,r),t.apply(this,arguments)}}function g(e,t,n){var r=t.prototype,i;i=e.prototype=Object.create(r),i.constructor=e,i._super=r,n&&d(i,n)}function y(e,t){return function(){return e.apply(t,arguments)}}function b(e,t){return typeof e==o?e.apply(t?t[0]||r:r,t):e}function w(e,t){return e===r?t:e}function E(e,t,n){h(N(t),function(t){e.addEventListener(t,n,!1)})}function S(e,t,n){h(N(t),function(t){e.removeEventListener(t,n,!1)})}function x(e,t){while(e){if(e==t)return!0;e=e.parentNode}return!1}function T(e,t){return e.indexOf(t)>-1}function N(e){return e.trim().split(/\s+/g)}function C(e,t,n){if(e.indexOf&&!n)return e.indexOf(t);var r=0;while(r<e.length){if(n&&e[r][n]==t||!n&&e[r]===t)return r;r++}return-1}function k(e){return Array.prototype.slice.call(e,0)}function L(e,t,n){var r=[],i=[],s=0;while(s<e.length){var o=t?e[s][t]:e[s];C(i,o)<0&&r.push(e[s]),i[s]=o,s++}return n&&(t?r=r.sort(function(n,r){return n[t]>r[t]}):r=r.sort()),r}function A(e,t){var n,s,o=t[0].toUpperCase()+t.slice(1),u=0;while(u<i.length){n=i[u],s=n?n+o:t;if(s in e)return s;u++}return r}function M(){return O++}function _(t){var n=t.ownerDocument||t;return n.defaultView||n.parentWindow||e}function nt(e,t){var n=this;this.manager=e,this.callback=t,this.element=e.element,this.target=e.options.inputTarget,this.domHandler=function(t){b(e.options.enable,[e])&&n.handler(t)},this.init()}function rt(e){var t,n=e.options.inputClass;return n?t=n:H?t=Tt:B?t=_t:P?t=Pt:t=bt,new t(e,it)}function it(e,t,n){var r=n.pointers.length,i=n.changedPointers.length,s=t&U&&r-i===0,o=t&(W|X)&&r-i===0;n.isFirst=!!s,n.isFinal=!!o,s&&(e.session={}),n.eventType=t,st(e,n),e.emit("hammer.input",n),e.recognize(n),e.session.prevInput=n}function st(e,t){var n=e.session,r=t.pointers,i=r.length;n.firstInput||(n.firstInput=at(t)),i>1&&!n.firstMultiple?n.firstMultiple=at(t):i===1&&(n.firstMultiple=!1);var s=n.firstInput,o=n.firstMultiple,u=o?o.center:s.center,l=t.center=ft(r);t.timeStamp=f(),t.deltaTime=t.timeStamp-s.timeStamp,t.angle=pt(u,l),t.distance=ht(u,l),ot(n,t),t.offsetDirection=ct(t.deltaX,t.deltaY);var c=lt(t.deltaTime,t.deltaX,t.deltaY);t.overallVelocityX=c.x,t.overallVelocityY=c.y,t.overallVelocity=a(c.x)>a(c.y)?c.x:c.y,t.scale=o?vt(o.pointers,r):1,t.rotation=o?dt(o.pointers,r):0,t.maxPointers=n.prevInput?t.pointers.length>n.prevInput.maxPointers?t.pointers.length:n.prevInput.maxPointers:t.pointers.length,ut(n,t);var h=e.element;x(t.srcEvent.target,h)&&(h=t.srcEvent.target),t.target=h}function ot(e,t){var n=t.center,r=e.offsetDelta||{},i=e.prevDelta||{},s=e.prevInput||{};if(t.eventType===U||s.eventType===W)i=e.prevDelta={x:s.deltaX||0,y:s.deltaY||0},r=e.offsetDelta={x:n.x,y:n.y};t.deltaX=i.x+(n.x-r.x),t.deltaY=i.y+(n.y-r.y)}function ut(e,t){var n=e.lastInterval||t,i=t.timeStamp-n.timeStamp,s,o,u,f;if(t.eventType!=X&&(i>R||n.velocity===r)){var l=t.deltaX-n.deltaX,c=t.deltaY-n.deltaY,h=lt(i,l,c);o=h.x,u=h.y,s=a(h.x)>a(h.y)?h.x:h.y,f=ct(l,c),e.lastInterval=t}else s=n.velocity,o=n.velocityX,u=n.velocityY,f=n.direction;t.velocity=s,t.velocityX=o,t.velocityY=u,t.direction=f}function at(e){var t=[],n=0;while(n<e.pointers.length)t[n]={clientX:u(e.pointers[n].clientX),clientY:u(e.pointers[n].clientY)},n++;return{timeStamp:f(),pointers:t,center:ft(t),deltaX:e.deltaX,deltaY:e.deltaY}}function ft(e){var t=e.length;if(t===1)return{x:u(e[0].clientX),y:u(e[0].clientY)};var n=0,r=0,i=0;while(i<t)n+=e[i].clientX,r+=e[i].clientY,i++;return{x:u(n/t),y:u(r/t)}}function lt(e,t,n){return{x:t/e||0,y:n/e||0}}function ct(e,t){return e===t?V:a(e)>=a(t)?e<0?$:J:t<0?K:Q}function ht(e,t,n){n||(n=et);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.sqrt(r*r+i*i)}function pt(e,t,n){n||(n=et);var r=t[n[0]]-e[n[0]],i=t[n[1]]-e[n[1]];return Math.atan2(i,r)*180/Math.PI}function dt(e,t){return pt(t[1],t[0],tt)+pt(e[1],e[0],tt)}function vt(e,t){return ht(t[0],t[1],tt)/ht(e[0],e[1],tt)}function bt(){this.evEl=gt,this.evWin=yt,this.allow=!0,this.pressed=!1,nt.apply(this,arguments)}function Tt(){this.evEl=St,this.evWin=xt,nt.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function Lt(){this.evTarget=Ct,this.evWin=kt,this.started=!1,nt.apply(this,arguments)}function At(e,t){var n=k(e.touches),r=k(e.changedTouches);return t&(W|X)&&(n=L(n.concat(r),"identifier",!0)),[n,r]}function _t(){this.evTarget=Mt,this.targetIds={},nt.apply(this,arguments)}function Dt(e,t){var n=k(e.touches),r=this.targetIds;if(t&(U|z)&&n.length===1)return r[n[0].identifier]=!0,[n,n];var i,s,o=k(e.changedTouches),u=[],a=this.target;s=n.filter(function(e){return x(e.target,a)});if(t===U){i=0;while(i<s.length)r[s[i].identifier]=!0,i++}i=0;while(i<o.length)r[o[i].identifier]&&u.push(o[i]),t&(W|X)&&delete r[o[i].identifier],i++;if(!u.length)return;return[L(s.concat(u),"identifier",!0),u]}function Pt(){nt.apply(this,arguments);var e=y(this.handler,this);this.touch=new _t(this.manager,e),this.mouse=new bt(this.manager,e)}function zt(e,t){this.manager=e,this.set(t)}function Wt(e){if(T(e,qt))return qt;var t=T(e,Rt),n=T(e,Ut);return t&&n?qt:t||n?t?Rt:Ut:T(e,It)?It:Ft}function Yt(e){this.options=d({},this.defaults,e||{}),this.id=M(),this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=Xt,this.simultaneous={},this.requireFail=[]}function Zt(e){return e&Qt?"cancel":e&Jt?"end":e&$t?"move":e&Vt?"start":""}function en(e){return e==Q?"down":e==K?"up":e==$?"left":e==J?"right":""}function tn(e,t){var n=t.manager;return n?n.get(e):e}function nn(){Yt.apply(this,arguments)}function rn(){nn.apply(this,arguments),this.pX=null,this.pY=null}function sn(){nn.apply(this,arguments)}function on(){Yt.apply(this,arguments),this._timer=null,this._input=null}function un(){nn.apply(this,arguments)}function an(){nn.apply(this,arguments)}function fn(){Yt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function ln(e,t){return t=t||{},t.recognizers=w(t.recognizers,ln.defaults.preset),new pn(e,t)}function pn(e,t){this.options=d({},ln.defaults,t||{}),this.options.inputTarget=this.options.inputTarget||e,this.handlers={},this.session={},this.recognizers=[],this.element=e,this.input=rt(this),this.touchAction=new zt(this,this.options.touchAction),dn(this,!0),h(this.options.recognizers,function(e){var t=this.add(new e[0](e[1]));e[2]&&t.recognizeWith(e[2]),e[3]&&t.requireFailure(e[3])},this)}function dn(e,t){var n=e.element;if(!n.style)return;h(e.options.cssProps,function(e,r){n.style[A(n.style,r)]=t?e:""})}function vn(e,n){var r=t.createEvent("Event");r.initEvent(e,!0,!0),r.gesture=n,n.target.dispatchEvent(r)}var i=["","webkit","Moz","MS","ms","o"],s=t.createElement("div"),o="function",u=Math.round,a=Math.abs,f=Date.now,d;typeof Object.assign!="function"?d=function(t){if(t===r||t===null)throw new TypeError("Cannot convert undefined or null to object");var n=Object(t);for(var i=1;i<arguments.length;i++){var s=arguments[i];if(s!==r&&s!==null)for(var o in s)s.hasOwnProperty(o)&&(n[o]=s[o])}return n}:d=Object.assign;var v=p(function(t,n,i){var s=Object.keys(n),o=0;while(o<s.length){if(!i||i&&t[s[o]]===r)t[s[o]]=n[s[o]];o++}return t},"extend","Use `assign`."),m=p(function(t,n){return v(t,n,!0)},"merge","Use `assign`."),O=1,D=/mobile|tablet|ip(ad|hone|od)|android/i,P="ontouchstart"in e,H=A(e,"PointerEvent")!==r,B=P&&D.test(navigator.userAgent),j="touch",F="pen",I="mouse",q="kinect",R=25,U=1,z=2,W=4,X=8,V=1,$=2,J=4,K=8,Q=16,G=$|J,Y=K|Q,Z=G|Y,et=["x","y"],tt=["clientX","clientY"];nt.prototype={handler:function(){},init:function(){this.evEl&&E(this.element,this.evEl,this.domHandler),this.evTarget&&E(this.target,this.evTarget,this.domHandler),this.evWin&&E(_(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(_(this.element),this.evWin,this.domHandler)}};var mt={mousedown:U,mousemove:z,mouseup:W},gt="mousedown",yt="mousemove mouseup";g(bt,nt,{handler:function(t){var n=mt[t.type];n&U&&t.button===0&&(this.pressed=!0),n&z&&t.which!==1&&(n=W);if(!this.pressed||!this.allow)return;n&W&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[t],changedPointers:[t],pointerType:I,srcEvent:t})}});var wt={pointerdown:U,pointermove:z,pointerup:W,pointercancel:X,pointerout:X},Et={2:j,3:F,4:I,5:q},St="pointerdown",xt="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(St="MSPointerDown",xt="MSPointerMove MSPointerUp MSPointerCancel"),g(Tt,nt,{handler:function(t){var n=this.store,r=!1,i=t.type.toLowerCase().replace("ms",""),s=wt[i],o=Et[t.pointerType]||t.pointerType,u=o==j,a=C(n,t.pointerId,"pointerId");s&U&&(t.button===0||u)?a<0&&(n.push(t),a=n.length-1):s&(W|X)&&(r=!0);if(a<0)return;n[a]=t,this.callback(this.manager,s,{pointers:n,changedPointers:[t],pointerType:o,srcEvent:t}),r&&n.splice(a,1)}});var Nt={touchstart:U,touchmove:z,touchend:W,touchcancel:X},Ct="touchstart",kt="touchstart touchmove touchend touchcancel";g(Lt,nt,{handler:function(t){var n=Nt[t.type];n===U&&(this.started=!0);if(!this.started)return;var r=At.call(this,t,n);n&(W|X)&&r[0].length-r[1].length===0&&(this.started=!1),this.callback(this.manager,n,{pointers:r[0],changedPointers:r[1],pointerType:j,srcEvent:t})}});var Ot={touchstart:U,touchmove:z,touchend:W,touchcancel:X},Mt="touchstart touchmove touchend touchcancel";g(_t,nt,{handler:function(t){var n=Ot[t.type],r=Dt.call(this,t,n);if(!r)return;this.callback(this.manager,n,{pointers:r[0],changedPointers:r[1],pointerType:j,srcEvent:t})}}),g(Pt,nt,{handler:function(t,n,r){var i=r.pointerType==j,s=r.pointerType==I;if(i)this.mouse.allow=!1;else if(s&&!this.mouse.allow)return;n&(W|X)&&(this.mouse.allow=!0),this.callback(t,n,r)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Ht=A(s.style,"touchAction"),Bt=Ht!==r,jt="compute",Ft="auto",It="manipulation",qt="none",Rt="pan-x",Ut="pan-y";zt.prototype={set:function(e){e==jt&&(e=this.compute()),Bt&&this.manager.element.style&&(this.manager.element.style[Ht]=e),this.actions=e.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var e=[];return h(this.manager.recognizers,function(t){b(t.options.enable,[t])&&(e=e.concat(t.getTouchAction()))}),Wt(e.join(" "))},preventDefaults:function(e){if(Bt)return;var t=e.srcEvent,n=e.offsetDirection;if(this.manager.session.prevented){t.preventDefault();return}var r=this.actions,i=T(r,qt),s=T(r,Ut),o=T(r,Rt);if(i){var u=e.pointers.length===1,a=e.distance<2,f=e.deltaTime<250;if(u&&a&&f)return}if(o&&s)return;if(i||s&&n&G||o&&n&Y)return this.preventSrc(t)},preventSrc:function(e){this.manager.session.prevented=!0,e.preventDefault()}};var Xt=1,Vt=2,$t=4,Jt=8,Kt=Jt,Qt=16,Gt=32;Yt.prototype={defaults:{},set:function(e){return d(this.options,e),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(e){if(c(e,"recognizeWith",this))return this;var t=this.simultaneous;return e=tn(e,this),t[e.id]||(t[e.id]=e,e.recognizeWith(this)),this},dropRecognizeWith:function(e){return c(e,"dropRecognizeWith",this)?this:(e=tn(e,this),delete this.simultaneous[e.id],this)},requireFailure:function(e){if(c(e,"requireFailure",this))return this;var t=this.requireFail;return e=tn(e,this),C(t,e)===-1&&(t.push(e),e.requireFailure(this)),this},dropRequireFailure:function(e){if(c(e,"dropRequireFailure",this))return this;e=tn(e,this);var t=C(this.requireFail,e);return t>-1&&this.requireFail.splice(t,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(e){return!!this.simultaneous[e.id]},emit:function(e){function r(n){t.manager.emit(n,e)}var t=this,n=this.state;n<Jt&&r(t.options.event+Zt(n)),r(t.options.event),e.additionalEvent&&r(e.additionalEvent),n>=Jt&&r(t.options.event+Zt(n))},tryEmit:function(e){if(this.canEmit())return this.emit(e);this.state=Gt},canEmit:function(){var e=0;while(e<this.requireFail.length){if(!(this.requireFail[e].state&(Gt|Xt)))return!1;e++}return!0},recognize:function(e){var t=d({},e);if(!b(this.options.enable,[this,t])){this.reset(),this.state=Gt;return}this.state&(Kt|Qt|Gt)&&(this.state=Xt),this.state=this.process(t),this.state&(Vt|$t|Jt|Qt)&&this.tryEmit(t)},process:function(e){},getTouchAction:function(){},reset:function(){}},g(nn,Yt,{defaults:{pointers:1},attrTest:function(e){var t=this.options.pointers;return t===0||e.pointers.length===t},process:function(e){var t=this.state,n=e.eventType,r=t&(Vt|$t),i=this.attrTest(e);if(r&&(n&X||!i))return t|Qt;if(r||i)return n&W?t|Jt:t&Vt?t|$t:Vt;return Gt}}),g(rn,nn,{defaults:{event:"pan",threshold:10,pointers:1,direction:Z},getTouchAction:function(){var e=this.options.direction,t=[];return e&G&&t.push(Ut),e&Y&&t.push(Rt),t},directionTest:function(e){var t=this.options,n=!0,r=e.distance,i=e.direction,s=e.deltaX,o=e.deltaY;return i&t.direction||(t.direction&G?(i=s===0?V:s<0?$:J,n=s!=this.pX,r=Math.abs(e.deltaX)):(i=o===0?V:o<0?K:Q,n=o!=this.pY,r=Math.abs(e.deltaY))),e.direction=i,n&&r>t.threshold&&i&t.direction},attrTest:function(e){return nn.prototype.attrTest.call(this,e)&&(this.state&Vt||!(this.state&Vt)&&this.directionTest(e))},emit:function(e){this.pX=e.deltaX,this.pY=e.deltaY;var t=en(e.direction);t&&(e.additionalEvent=this.options.event+t),this._super.emit.call(this,e)}}),g(sn,nn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[qt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||this.state&Vt)},emit:function(e){if(e.scale!==1){var t=e.scale<1?"in":"out";e.additionalEvent=this.options.event+t}this._super.emit.call(this,e)}}),g(on,Yt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ft]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime>t.time;this._input=e;if(!r||!n||e.eventType&(W|X)&&!i)this.reset();else if(e.eventType&U)this.reset(),this._timer=l(function(){this.state=Kt,this.tryEmit()},t.time,this);else if(e.eventType&W)return Kt;return Gt},reset:function(){clearTimeout(this._timer)},emit:function(e){if(this.state!==Kt)return;e&&e.eventType&W?this.manager.emit(this.options.event+"up",e):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input))}}),g(un,nn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[qt]},attrTest:function(e){return this._super.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||this.state&Vt)}}),g(an,nn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:G|Y,pointers:1},getTouchAction:function(){return rn.prototype.getTouchAction.call(this)},attrTest:function(e){var t=this.options.direction,n;return t&(G|Y)?n=e.overallVelocity:t&G?n=e.overallVelocityX:t&Y&&(n=e.overallVelocityY),this._super.attrTest.call(this,e)&&t&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers==this.options.pointers&&a(n)>this.options.velocity&&e.eventType&W},emit:function(e){var t=en(e.offsetDirection);t&&this.manager.emit(this.options.event+t,e),this.manager.emit(this.options.event,e)}}),g(fn,Yt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[It]},process:function(e){var t=this.options,n=e.pointers.length===t.pointers,r=e.distance<t.threshold,i=e.deltaTime<t.time;this.reset();if(e.eventType&U&&this.count===0)return this.failTimeout();if(r&&i&&n){if(e.eventType!=W)return this.failTimeout();var s=this.pTime?e.timeStamp-this.pTime<t.interval:!0,o=!this.pCenter||ht(this.pCenter,e.center)<t.posThreshold;this.pTime=e.timeStamp,this.pCenter=e.center,!o||!s?this.count=1:this.count+=1,this._input=e;var u=this.count%t.taps;if(u===0)return this.hasRequireFailures()?(this._timer=l(function(){this.state=Kt,this.tryEmit()},t.interval,this),Vt):Kt}return Gt},failTimeout:function(){return this._timer=l(function(){this.state=Gt},this.options.interval,this),Gt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Kt&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),ln.VERSION="2.0.6",ln.defaults={domEvents:!1,touchAction:jt,enable:!0,inputTarget:null,inputClass:null,preset:[[un,{enable:!1}],[sn,{enable:!1},["rotate"]],[an,{direction:G}],[rn,{direction:G},["swipe"]],[fn],[fn,{event:"doubletap",taps:2},["tap"]],[on]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var cn=1,hn=2;pn.prototype={set:function(e){return d(this.options,e),e.touchAction&&this.touchAction.update(),e.inputTarget&&(this.input.destroy(),this.input.target=e.inputTarget,this.input.init()),this},stop:function(e){this.session.stopped=e?hn:cn},recognize:function(e){var t=this.session;if(t.stopped)return;this.touchAction.preventDefaults(e);var n,r=this.recognizers,i=t.curRecognizer;if(!i||i&&i.state&Kt)i=t.curRecognizer=null;var s=0;while(s<r.length)n=r[s],t.stopped!==hn&&(!i||n==i||n.canRecognizeWith(i))?n.recognize(e):n.reset(),!i&&n.state&(Vt|$t|Jt)&&(i=t.curRecognizer=n),s++},get:function(e){if(e instanceof Yt)return e;var t=this.recognizers;for(var n=0;n<t.length;n++)if(t[n].options.event==e)return t[n];return null},add:function(e){if(c(e,"add",this))return this;var t=this.get(e.options.event);return t&&this.remove(t),this.recognizers.push(e),e.manager=this,this.touchAction.update(),e},remove:function(e){if(c(e,"remove",this))return this;e=this.get(e);if(e){var t=this.recognizers,n=C(t,e);n!==-1&&(t.splice(n,1),this.touchAction.update())}return this},on:function(e,t){var n=this.handlers;return h(N(e),function(e){n[e]=n[e]||[],n[e].push(t)}),this},off:function(e,t){var n=this.handlers;return h(N(e),function(e){t?n[e]&&n[e].splice(C(n[e],t),1):delete n[e]}),this},emit:function(e,t){this.options.domEvents&&vn(e,t);var n=this.handlers[e]&&this.handlers[e].slice();if(!n||!n.length)return;t.type=e,t.preventDefault=function(){t.srcEvent.preventDefault()};var r=0;while(r<n.length)n[r](t),r++},destroy:function(){this.element&&dn(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},d(ln,{INPUT_START:U,INPUT_MOVE:z,INPUT_END:W,INPUT_CANCEL:X,STATE_POSSIBLE:Xt,STATE_BEGAN:Vt,STATE_CHANGED:$t,STATE_ENDED:Jt,STATE_RECOGNIZED:Kt,STATE_CANCELLED:Qt,STATE_FAILED:Gt,DIRECTION_NONE:V,DIRECTION_LEFT:$,DIRECTION_RIGHT:J,DIRECTION_UP:K,DIRECTION_DOWN:Q,DIRECTION_HORIZONTAL:G,DIRECTION_VERTICAL:Y,DIRECTION_ALL:Z,Manager:pn,Input:nt,TouchAction:zt,TouchInput:_t,MouseInput:bt,PointerEventInput:Tt,TouchMouseInput:Pt,SingleTouchInput:Lt,Recognizer:Yt,AttrRecognizer:nn,Tap:fn,Pan:rn,Swipe:an,Pinch:sn,Rotate:un,Press:on,on:E,off:S,each:h,merge:m,extend:v,assign:d,inherit:g,bindFn:y,prefixed:A});var mn=typeof e!="undefined"?e:typeof self!="undefined"?self:{};mn.Hammer=ln,typeof define=="function"&&define.amd?define("Hammer",[],function(){return ln}):typeof module!="undefined"&&module.exports?module.exports=ln:e[n]=ln}(window,document,"Hammer"),function(){var e;e=function(e){var t;return t=function(){function t(t){var n,r;this.options=$.extend({selector:null,activeSlide:0,countSwitchingSlides:1,loop:!1,elementsOnSide:1,positionActive:"auto",percentageSwipeElement:.3,lock:!1,getHtmlItem:function(e){return""},onChange:function(e,t,n,r){},onRender:function(e,t,n){},onUpdate:function(e,t,n){},events:!0,mouseEvents:!1,fastSwipe:!0},t),n=["ms","moz","webkit","o"],r=0;while(r<n.length&&!window.requestAnimationFrame)window.requestAnimationFrame=window[n[r]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[r]+"CancelAnimationFrame"]||window[n[r]+"CancelRequestAnimationFrame"],++r;window.requestAnimationFrame?this.requestAnimationFrame=$.proxy(window.requestAnimationFrame,window):this.requestAnimationFrame=function(e){return e()},window.cancelAnimationFrame?this.cancelAnimationFrame=$.proxy(window.cancelAnimationFrame,window):this.cancelAnimationFrame=function(){},this.options.selector&&$(this.options.selector).size()!==0?(this.lockGallery=!1,this.container=$(this.options.selector),this.containerContent=$(">.ul_overflow",this.container),this.gallery=$(">ul",this.containerContent),this.galleryItems=$(">*",this.gallery),this.appendControls(),this.arrowLeft=$(">.arrow_left",this.container),this.arrowRight=$(">.arrow_right",this.container),this.controlsContainer=$(">.controls_overflow .controls",this.container),this.requestAnimationId=1,this.startPx=0,this.endPx=0,this.currentActive=this.options.activeSlide,this.currentLeft=0,this.controlItems=null,this.galerySize=0,this.galleryWidth=0,this.showLoop=this.options.loop,this.has3d()?this.styleLeft=function(e){return function(t){return e.gallery.css("transform","translate3d("+t+"px,0,0)")}}(this):this.styleLeft=function(e){return function(t){return e.gallery.css({left:t+"px"})}}(this),this.update(),this.options.events&&(this.hammerManager=new e.Manager(this.containerContent[0]),this.hammerManager.add(new e.Pan({direction:e.DIRECTION_HORIZONTAL,threshold:0})),this.hammerManager.on("panstart panleft panright panend pancancel",$.proxy(this.handleHammer,this))),this.itemsMas.length>0&&this.itemsMas[this.currentActive].selector.addClass("active"),this.options.onRender(this.currentActive,this.galerySize-1,this.itemsMas)):console.log("SwipeGallery: Селектор не может быть пустым")}return t.prototype.updateOptions=function(t){t==null&&(t={}),this.options=$.extend(this.options,t),t.activeSlide&&(this.currentActive=t.activeSlide),this.update();if(this.options.events)return this.hammerManager&&this.hammerManager.destroy(),this.hammerManager=new e.Manager(this.containerContent[0]),this.hammerManager.add(new e.Pan({direction:e.DIRECTION_HORIZONTAL,threshold:0})),this.hammerManager.on("panstart panleft panright panend pancancel",$.proxy(this.handleHammer,this));if(this.hammerManager)return this.hammerManager.destroy()},t.prototype.lock=function(){return this.lockGallery=!0,this.updateControllState(),this.updateArrow()},t.prototype.unLock=function(){return this.lockGallery=!1,this.updateControllState(),this.updateArrow()},t.prototype.createItemsMas=function(){var e,t;return t=this,t.itemsMas&&t.itemsMas.length>0&&(t.currentActive=t.itemsMas[t.currentActive].index),t.itemsMas=[],e=0,t.galleryItems.each(function(n){return t.itemsMas.push({index:n,selector:$(this),width:$(this).width(),left:e}),e+=$(this).width()})},t.prototype.updateWidthGallery=function(){var e;e=0,$.each(this.itemsMas,function(t){return this.selector.css({left:this.left}),e+=this.width}),this.galleryWidth=this.containerContent.width();if(this.options.positionActive==="auto")return this.galleryWidth>=e?this.centerLeft=parseInt(this.galleryWidth/2-e/2,10):this.centerLeft=0,this.maxLeft=0-(this.itemsMas[this.itemsMas.length-1].left-this.galleryWidth+this.itemsMas[this.itemsMas.length-1].width)},t.prototype.updateControllState=function(){return this.lockGallery?this.controlsContainer.addClass("lock"):this.controlsContainer.removeClass("lock"),this.controlItems.removeClass("active"),this.controlItems.eq(this.itemsMas[this.currentActive].index).addClass("active")},t.prototype.appendControls=function(){return this.container.append('<div class="controls_overflow">                            <div class="controls"></div>                           </div>                           <div class="arrow_left"><i class="material-icons">keyboard_arrow_left</i></div>                           <div class="arrow_right"><i class="material-icons">keyboard_arrow_right</i></div>')},t.prototype.destroy=function(){return this.hammerManager&&this.hammerManager.destroy(),$(">.controls_overflow, >.arrow_left, >.arrow_right",this.container).remove()},t.prototype.update=function(e){var t,n;this.containerContent=$(">.ul_overflow",this.container),this.gallery=$(">ul",this.containerContent),this.galleryItems=$(">*",this.gallery),this.createItemsMas(),this.controlsContainer.html(""),this.galerySize=this.galleryItems.size(),t="",n=0;while(n<this.galerySize)t+='<div class="control">'+this.options.getHtmlItem(n)+"</div>",n++;return this.controlsContainer.append(t),this.controlItems=$(">.control",this.controlsContainer),this.options.loop&&this.galerySize>=this.options.elementsOnSide*2+1?this.showLoop=!0:this.showLoop=!1,this.itemsMas.length>0&&(this.updateControllState(),this.updateWidthGallery(),e?this.updateArrow():this.showPane(this.currentActive,!1)),this.options.onUpdate(this.currentActive,this.galerySize-1,this.itemsMas)},t.prototype.updateArrow=function(){return this.lockGallery?(this.arrowLeft.addClass("lock"),this.arrowRight.addClass("lock")):(this.arrowLeft.removeClass("lock"),this.arrowRight.removeClass("lock")),this.currentActive===0?this.arrowLeft.addClass("disable"):this.arrowLeft.removeClass("disable"),this.currentActive>=this.galerySize-this.options.countSwitchingSlides?this.arrowRight.addClass("disable"):this.arrowRight.removeClass("disable"),this.galerySize<=this.options.countSwitchingSlides?(this.arrowLeft.addClass("hide"),this.arrowRight.addClass("hide")):(this.arrowLeft.removeClass("hide"),this.arrowRight.removeClass("hide"))},t.prototype.handleHammer=function(e){var t;if(!this.options.mouseEvents&&e.pointerType==="mouse")return!1;switch(e.type){case"panstart":return this.gallery.removeClass("animate");case"panleft":case"panright":return this.sliderMoveFast(this.currentLeft+e.deltaX);case"panend":case"pancancel":return t=Math.abs(e.velocityX),t<1&&(t=1),this.showPane(this.detectActiveSlideWithPosition(e.deltaX*t,e.deltaTime),!0)}},t.prototype.detectActiveSlideWithPosition=function(e,t){return this.detectActiveSlide(e)},t.prototype.detectActiveSlide=function(e){var t,n;t=this.currentActive,n=0;if(!this.lockGallery){if(e>0){t--;while(this.itemsMas[t]&&e-this.itemsMas[t].width*this.options.percentageSwipeElement-n>=0)n+=this.itemsMas[t].width,t--;return t+1}while(this.itemsMas[t]&&e+this.itemsMas[t].width*this.options.percentageSwipeElement+n<=0)n+=this.itemsMas[t].width,t++;return t}return t},t.prototype.elementMoveLeft=function(){var e;return e=this.itemsMas.pop(),e.left=this.itemsMas[0].left-e.width,this.itemsMas.unshift(e),this.currentActive++,this.setLeft(0)},t.prototype.elementMoveRight=function(){var e;return e=this.itemsMas.shift(),e.left=this.itemsMas[this.galerySize-2].left+this.itemsMas[this.galerySize-2].width,this.itemsMas.push(e),this.currentActive--,this.setLeft(this.galerySize-1)},t.prototype.setLeft=function(e){var t;t=this.itemsMas[e];if(t)return t.selector.css({left:t.left+"px"})},t.prototype.next=function(){if(!this.lockGallery)return this.showPane(this.currentActive+this.options.countSwitchingSlides,!0)},t.prototype.prev=function(){if(!this.lockGallery)return this.showPane(this.currentActive-this.options.countSwitchingSlides,!0)},t.prototype.goTo=function(e){var t;if(!this.lockGallery)return t=0,$.each(this.itemsMas,function(n){if(this.index===e)return t=n}),this.showPane(t,!0)},t.prototype.showPane=function(e,t){var n,r;return e=Math.max(0,Math.min(e,this.galerySize-1)),r="left",n=!1,this.currentActive!==e&&(n=!0,e>this.currentActive&&(r="right"),$(">li.active",this.gallery).removeClass("active"),this.itemsMas[e].selector.addClass("active")),this.currentActive=e,this.updateControllState(),this.options.positionActive==="auto"?(this.currentLeft=0-this.itemsMas[e].left,this.centerLeft!==0?this.currentLeft=this.centerLeft:this.setPositionElement(),this.updateArrow(),!this.showLoop&&Math.abs(this.currentLeft)>Math.abs(this.maxLeft)&&(this.currentLeft=this.maxLeft)):(this.options.positionActive==="left"?this.currentLeft=0-this.itemsMas[e].left:this.options.positionActive==="center"?this.currentLeft=this.galleryWidth/2-this.itemsMas[e].left-this.itemsMas[e].width/2:this.options.positionActive==="right"&&(this.currentLeft=this.galleryWidth-this.itemsMas[e].width-this.itemsMas[e].left),this.setPositionElement(),this.updateArrow()),n&&this.options.onChange(this.currentActive,this.galerySize-1,this.itemsMas,r),this.slidersMove(this.currentLeft,t)},t.prototype.setPositionElement=function(){var e,t;if(this.showLoop){e=this.currentActive;while(e<this.options.elementsOnSide)this.elementMoveLeft(),e++;e=this.currentActive,t=[];while(e>this.galerySize-1-this.options.elementsOnSide)this.elementMoveRight(),t.push(e--);return t}},t.prototype.slidersMove=function(e,t){return this.cancelAnimationFrame(this.requestAnimationId),t?this.gallery.addClass("animate"):this.gallery.removeClass("animate"),this.gallery.width(),this.styleLeft(e)},t.prototype.sliderMoveFast=function(e){return this.cancelAnimationFrame(this.requestAnimationId),this.startPx=this.currentLeft,this.endPx=e,this.requestAnimationId=this.requestAnimationFrame($.proxy(this.moveRequestAnimation,this))},t.prototype.moveRequestAnimation=function(e,t){if(this.startPx!==this.endPx)return this.styleLeft(this.endPx),this.startPx=this.endPx,this.requestAnimationId=this.requestAnimationFrame($.proxy(this.moveRequestAnimation,this))},t.prototype.has3d=function(){var e,t,n,r;e=document.createElement("p"),t=void 0,r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"},document.body.insertBefore(e,null);for(n in r)e.style[n]!==undefined&&(e.style[n]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(r[n]));return document.body.removeChild(e),t!==undefined&&t.length>0&&t!=="none"},t}()},typeof define=="function"&&typeof define.amd=="object"&&define.amd?define("SwipeGallery",["require","exports","module","Hammer"],function(t,n,r){var i;return i=t("Hammer"),e(i)}):window.SwipeGallery=e(Hammer)}.call(this),define("components/SwipeGalleryComponent",["require","exports","module","jquery","backbone","backbone-epoxy","SwipeGallery","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("SwipeGallery"),u=e("util"),a=s.View.extend({template:"tpl-component-swipe-gallery",events:{"click .controls_overflow .control":"onControlClick","click .arrow_left":"onClickLeft","click .arrow_right":"onClickRight"},initialize:function(e){this.render(),this.itemView=e.itemView,this.collection=e.collection,e.options=e.options||{},this.options=_.extend(e.options,{selector:r("[data-js-block]",this.$el),onChange:_.bind(this.onSliderChange,this)}),this.renderAsync=r.Deferred(),this.initCollection(),this.items={},this.collection.length!==0&&this.renderAll(this.collection),this.bindResize=this.resize.bind(this),r.subscribe("window:resize",this.bindResize)},setRenderStatus:function(){this.renderAsync.resolve()},resize:function(e,t){this.gallery&&this.gallery.update()},initCollection:function(){return this.collection==null&&(this.collection=new SwipeGalleryCollection),this.listenTo(this.collection,"reset",this.onResetCollection),this.listenTo(this.collection,"add",this.onAddCollection),this.listenTo(this.collection,"remove",this.onRemoveCollection)},onAddCollection:function(e){var t=this;this.renderAsync.done(function(){t.renderItem(e),t.refreshPlugin()})},renderItem:function(e){var t=new this.itemView({model:e,parentView:this});this.items[e.cid]=t,r("[data-js-list]",this.$el).append(t.$el)},onRemoveCollection:function(e){var t=this;this.renderAsync.done(function(){t.items[e.cid].remove(),t.refreshPlugin()})},onResetCollection:function(e){var t=this;this.renderAsync.done(function(){t.renderAll(e)})},renderAll:function(e){var t=this;this.renderAsync.done(function(){_.each(t.items,function(e){e.remove()}),t.items={},_.each(e.models,function(e){t.renderItem(e)}),t.gallery&&t.gallery.destroy(),t.gallery=new o(t.options)})},onSliderChange:function(e,t,n,r){var i=this,s=[];_.each(n,function(e){s.push(i.collection.models[e.index])}),this.state={index:e,galleryModels:s,dirrection:r},this.trigger("change:slide",this.state)},refreshPlugin:function(){this.gallery?this.gallery.update():this.gallery=new o(this.options)},setOptions:function(e){_.extend(this.options,e)},updateOptions:function(e){this.gallery&&this.gallery.updateOptions(e)},prev:function(){this.gallery&&this.gallery.prev()},next:function(){this.gallery&&this.gallery.next()},lock:function(){this.gallery&&this.gallery.lock()},unlock:function(){this.gallery&&this.gallery.unlock()},onControlClick:function(e){this.gallery&&this.gallery.goTo(r(e.currentTarget).index())},onClickLeft:function(){this.trigger("before:click:left",this.state),this.gallery&&this.gallery.prev(),this.trigger("after:click:left",this.state)},onClickRight:function(){this.trigger("before:click:right",this.state),this.gallery&&this.gallery.next(),this.trigger("after:click:right",this.state)},render:function(){this.$el.html(u.templates(this.template,{}))},destroy:function(){this.gallery&&this.gallery.destroy(),r.unsubscribe("window:resize",this.bindResize),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return a}),define("launches/logLevel/LogItemInfoAttachments",["require","exports","module","jquery","backbone","backbone-epoxy","util","components/SwipeGalleryComponent","callService","dataUrlResolver"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("components/SwipeGalleryComponent"),a=e("callService"),f=e("dataUrlResolver"),l=a.call,c=6,h=s.Model.extend({defaults:{pageNumber:1,totalPages:1,itemId:"",content:[],itemModels:[]},initialize:function(e){!e.notLoad&&this.get("content").length==0&&this.load(),this.listenTo(this,"change:pageNumber",this.load)},load:function(){var e=r.Deferred();this.trigger("load:true",!0);var t=this;e.always(function(){t.trigger("load:false",!1)});if(this.get("pageNumber")<1||this.get("pageNumber")>this.get("totalPages"))this.set({content:[]}),e.resolve();else{var n=f.getLogsUrl()+"?"+this.getParamsUrl().join("&");this.request&&this.request.abort(),this.request=l("GET",n).done(function(n){if(n.content.length==0){e.reject();return}t.set({content:n.content}),e.resolve(n)}).fail(function(){e.reject()})}return e.promise()},getParamsUrl:function(){var e=["filter.ex.binary_content=true"];return e.push("filter.eq.item="+this.get("itemId")),e.push("page.page="+this.get("pageNumber")),e.push("page.size="+c),e}}),p=s.View.extend({tagName:"li",template:"tpl-launch-log-item-info-attachments-items",initialize:function(){this.render(),this.listenTo(this.model,"load",this.onLoad),this.collection=new i.Collection([],{model:d}),this.listenTo(this.model,"change:content",this.onChangeContent),this.listenTo(this.collection,"reset",this.onResetCollection),this.onChangeContent()},onLoad:function(e){if(e){this.$el.addClass("load");return}this.$el.removeClass("load")},onChangeContent:function(){var e=this,t=this.model.get("content");_.each(t,function(t,n){t.pageNumber=e.model.get("pageNumber"),t.pageIndex=n}),this.collection.reset(t),this.model.set({itemModels:this.collection.models})},onResetCollection:function(){var e=r("[data-js-items-list]",this.$el);e.html(""),_.each(this.collection.models,function(t){e.append((new v({model:t})).$el)},this)},render:function(){this.$el.html(o.templates(this.template,{}))}}),d=s.Model.extend({defaults:{binary_content:{id:"",thumbnail_id:"",content_type:"image/png"},message:"",test_item:"",time:0,active:!1,empty:!1},computeds:{previewImg:{deps:["binary_content"],get:function(e){if(e&&e.id){if(!~e.content_type.search("image/"))return"img/launch/attachment.png";if(e.thumbnail_id)return f.getFileById(e.thumbnail_id)}return"#"}},mainImg:{deps:["binary_content"],get:function(e){return e&&e.id?~e.content_type.search("image/")?f.getFileById(e.id):"img/launch/attachment-big.png":""}},shortId:{deps:["id"],get:function(e){return e.substr(20)}}}}),v=s.View.extend({className:"gallery-preview",events:{"click [data-js-gallery-image]":"onClickGalleryImage"},bindings:{"[data-js-gallery-image]":"attr: {src:  previewImg}",":el":"classes: {active: active}"},initialize:function(){this.$el.html('<div class="gallery-image"><img data-js-gallery-image></div>')},onClickGalleryImage:function(){this.model.trigger("click:min:item",this.model),this.model.trigger("change:active:slide",this.model)}}),m=s.View.extend({tagName:"li",template:"tpl-launch-log-item-info-attachments-main-item",events:{"click [data-js-rotate]":"onClickRotate"},bindings:{"[data-js-main-image]":'html: format("<img src=$1>", mainImg)'},initialize:function(){this.rotate=0,this.render(),this.listenTo(this.model,"change:id",this.onChangeId)},onClickRotate:function(){this.rotate+=90,r("[data-js-main-image] img",this.$el).css("transform","rotate("+this.rotate+"deg)")},onChangeId:function(e,t){this.rotate=0,t?this.$el.removeClass("hide-content"):this.$el.addClass("hide-content")},render:function(){this.$el.html(o.templates(this.template,{}))}}),g=s.View.extend({template:"tpl-launch-log-item-info-attachments",events:{"click [data-js-close]":"onClickClose","click [data-js-destroy-main-gallery]":"destroyMainGallery"},bindings:{"[data-js-main-gallery-current]":"text: currentElement","[data-js-main-gallery-size]":"text: totalElements"},initialize:function(e){this.model=new(s.Model.extend({defaults:{currentElement:0,totalElements:0}})),this.render(),this.isLoad=!1,this.$main=r("[data-js-attachments-container]",this.$el),this.itemModel=e.itemModel,this.parentModel=e.parentModel,this.listenTo(this.parentModel,"change:attachments",this.onShow),this.pageSize=6,this.collectionPreviews=new i.Collection([],{model:h}),this.sortPreviewModels=this.collectionPreviews,this.collectionMain=new i.Collection([],{model:d}),this.currentLoadCollection=new i.Collection,this.totalPages=1,this.curPage=1,this.galleryPreviews=new u({el:r("[data-js-min-gallery]",self.$el),collection:this.collectionPreviews,itemView:p,options:{loop:!0}}),this.listenTo(this.collectionPreviews,"change:itemModels",this.updateLoadItems),this.listenTo(this.galleryPreviews,"change:slide",this.onChangeSlide),this.listenTo(this.currentLoadCollection,"change:active:slide",this.onChangeMainActiveSlide),this.listenTo(this.currentLoadCollection,"click:min:item",this.activateMainGallery),this.listenTo(this.galleryPreviews,"after:click:right after:click:left",this.onClickPreviewNav)},onShow:function(e,t){t&&!this.isLoad&&(this.isLoad=!0,this.load())},goToAttachmentsPrev:function(){this.isLoad=!0},goToAttachments:function(e){if(this.activateAttachment(e))return!0;this.$main.addClass("load");var t=this;this.findLogPage(e).done(function(e){t.curPage=e,t.totalPages=e}).always(function(){t.load().done(function(){t.activateAttachment(e)})})},activateAttachment:function(e){var t=this.currentLoadCollection.get(e);return t?(t.trigger("click:min:item",t),t.trigger("change:active:slide",t),!0):!1},findLogPage:function(e){var t=r.Deferred(),n=f.getLogsUrl()+"/"+e+"/page?filter.eq.item="+this.itemModel.get("id")+"&page.size="+c+"&filter.ex.binary_content=true";return l("GET",n).done(function(e){t.resolve(e.number)}).fail(function(){t.reject()}),t},activateMainGallery:function(){this.galleryMain||(this.galleryMain=new u({el:r("[data-js-main-gallery]",this.$el),collection:this.collectionMain,itemView:m,options:{loop:!0}}),this.listenTo(this.galleryMain,"change:slide",this.onChangeGalleryMainSlide),this.galleryMain.setRenderStatus()),r("[data-js-gallery-main-head]",this.$el).addClass("activate")},destroyMainGallery:function(){this.galleryMain&&(this.stopListening(this.galleryMain),this.galleryMain.destroy(),this.galleryMain=null,r("[data-js-gallery-main-head]",this.$el).removeClass("activate"))},onChangeMainActiveSlide:function(e){if(!e)return;this.model.set({currentElement:(e.get("pageNumber")-1)*c+e.get("pageIndex")+1});var t=0;_.each(this.currentLoadCollection.models,function(n,r){n.set({active:!1}),n.get("id")==e.get("id")&&(t=r)}),e.set({active:!0}),this.collectionMain.reset([this.currentLoadCollection.at(t).toJSON()]),this.currentLoadCollection.length>1&&(this.currentLoadCollection.at(t+1)?this.collectionMain.add(this.currentLoadCollection.at(t+1).toJSON()):this.collectionMain.add({id:""}),this.currentLoadCollection.at(t-1)?this.collectionMain.add(this.currentLoadCollection.at(t-1).toJSON()):this.collectionMain.add({id:""}))},updateLoadItems:function(){var e=this;e.currentLoadCollection.reset([]),_.each(this.sortPreviewModels.models,function(t){e.currentLoadCollection.push(t.get("itemModels"))});var t=this.currentLoadCollection.where({active:!0})[0];(!t||t.get("pageNumber")!=this.curPage)&&_.each(this.currentLoadCollection.models,function(t,n){if(t.get("pageNumber")==e.curPage)return e.onChangeMainActiveSlide(t),e.updateArrowMainGallery(n),!1})},onClickPreviewNav:function(e){e.galleryModels.length<3&&this.updateLoadItems()},load:function(){this.$main.addClass("load");var e=new h({pageNumber:this.curPage,totalPages:this.totalPages,itemId:this.itemModel.get("id"),notLoad:!0}),t=this;return e.load().done(function(n){t.model.set({totalElements:n.page.totalElements}),t.totalPages=n.page.totalPages,e.set({totalPages:t.totalPages});var r=[e];t.totalPages>1&&(r.push({pageNumber:t.curPage+1,itemId:t.itemModel.get("id"),totalPages:t.totalPages}),t.totalPages>2&&r.push({pageNumber:t.curPage-1,itemId:t.itemModel.get("id"),totalPages:t.totalPages})),t.collectionPreviews.reset(r),t.$main.removeClass("load"),t.galleryPreviews.setRenderStatus(),t.galleryMain&&t.galleryMain.setRenderStatus(),t.updateArrowState(t.curPage),t.updateArrowMainGallery(0)}).fail(function(){t.$main.removeClass("load"),t.$main.addClass("not-found")})},updateArrowMainGallery:function(e){this.currentLoadCollection.at(e+1)?r("[data-js-main-gallery] .arrow_right").removeClass("disabled"):r("[data-js-main-gallery] .arrow_right").addClass("disabled"),this.currentLoadCollection.at(e-1)?r("[data-js-main-gallery] .arrow_left").removeClass("disabled"):r("[data-js-main-gallery] .arrow_left").addClass("disabled")},onChangeGalleryMainSlide:function(e){var t=0,n=e.galleryModels[e.index];this.model.set({currentElement:(n.get("pageNumber")-1)*c+n.get("pageIndex")+1});if(n.get("id")==""){e.dirrection=="right"?this.galleryMain.prev():this.galleryMain.next();return}_.each(this.currentLoadCollection.models,function(e,r){e.set({active:!1}),e.get("id")==n.get("id")&&(e.set({active:!0}),t=r)}),this.updateArrowMainGallery(t);if(e.dirrection=="right"){if(!this.currentLoadCollection.at(t+1)){e.galleryModels[e.index+1].set({id:""});return}e.galleryModels[e.index+1].set(this.currentLoadCollection.at(t+1).toJSON()),e.galleryModels[e.index-1].get("pageNumber")&&e.galleryModels[e.index-1].get("pageNumber")!=e.galleryModels[e.index].get("pageNumber")&&this.galleryPreviews.next();return}if(!this.currentLoadCollection.at(t-1)){e.galleryModels[e.index-1].set({id:""});return}e.galleryModels[e.index-1].set(this.currentLoadCollection.at(t-1).toJSON()),e.galleryModels[e.index+1].get("pageNumber")!=e.galleryModels[e.index].get("pageNumber")&&this.galleryPreviews.prev()},onChangeSlide:function(e){this.sortPreviewModels={models:e.galleryModels};var t=e.galleryModels[e.index],n=t.get("pageNumber");this.curPage=n,this.updateArrowState(n);if(n<1||n>this.totalPages){e.dirrection=="left"?this.galleryPreviews.next():this.galleryPreviews.prev();return}if(e.dirrection=="right"){e.galleryModels[e.index+1]&&e.galleryModels[e.index+1].set({pageNumber:n+1});return}e.galleryModels[e.index-1]&&e.galleryModels[e.index-1].set({pageNumber:n-1})},updateArrowState:function(e){e<=1?r("[data-js-min-gallery] .arrow_left",this.$el).addClass("disabled"):r("[data-js-min-gallery] .arrow_left",this.$el).removeClass("disabled"),e>=this.totalPages?r("[data-js-min-gallery] .arrow_right",this.$el).addClass("disabled"):r("[data-js-min-gallery] .arrow_right",this.$el).removeClass("disabled")},onClickClose:function(){this.parentModel.set({attachments:!1})},render:function(){this.$el.html(o.templates(this.template),{})},destroy:function(){this.galleryMain&&this.galleryMain.destroy(),this.galleryPreviews&&this.galleryPreviews.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return g}),define("modals/modalPostBug",["require","exports","module","jquery","underscore","modals/_modalView","core/components","util","model/SingletonAppModel","app","helpers","storageService","model/UserModel","coreService"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("modals/_modalView"),o=e("core/components"),u=e("util"),a=e("model/SingletonAppModel"),f=e("app"),l=e("helpers"),c=e("storageService"),h=e("model/UserModel"),p=e("coreService"),d=f.getInstance(),v=s.extend({contentBody:"tpl-modal-post-bug",fieldsTpl:"tpl-dynamic-fields",authTpl:"tpl-bts-auth-type",className:"modal-post-bug",events:{"click .option-selector":"handleDropDown","click .auth-type":"handleDropDown","click [data-js-post]":"submit","keyup .required-value":"clearRequiredError","click .project-name":"updateFieldSet"},initialize:function(e){this.appModel=new a,this.items=e.items,this.isMultiply=this.items.length>1,this.systems=this.appModel.getArr("externalSystem"),this.settings=d.forSettings,this.systemSettings=this.settings["bts"+this.systems[0].systemType],this.user={},this.systemType=this.systems[0].systemType,this.systemAuth=this.systems[0].systemAuth,this.setUserBts(),this.render()},handleDropDown:function(e){u.dropDownHandler(e)},render:function(){return this.$el.html(u.templates(this.contentBody,{isMultiply:this.isMultiply,source:u.getExternalSystem(!0),systems:this.systems,authorizationTypes:this.settings["bts"+this.systemType].authorizationType,collapse:this.user.bts.hash[this.user.bts.current.id].submits>0,showCredentialsSoft:this.settings["bts"+this.systemType].canUseRPAuthorization,current:this.user.bts.current})),this.setupAnchors(),r("[data-js-is-included]",this.$includesBlock).attr("checked","checked"),this.renderFields(),this.renderCredentials(),this.delegateEvents(),this},setupAnchors:function(){this.$dynamicContent=r("#dynamicContent",this.$el),this.$includesBlock=r("#includesBlock",this.$el),this.$includeLogs=r("#include_logs > [data-js-is-included]",this.$includesBlock),this.$includeData=r("#include_data > [data-js-is-included]",this.$includesBlock),this.$includeComments=r("#include_comments > [data-js-is-included]",this.$includesBlock),this.$postToUrl=r("#postToUrl",this.$el),this.$actionBtn=r("[data-js-ok]",this.$el),this.$credentialsLink=r("#credentialsLink",this.$el),this.$collapseCredentials=r("#collapseCredentials",this.$el),this.$authorizationType=r("#authorizationType",this.$el),this.$requiredFieldsWarning=r("#requiredFields",this.$el),this.$credentialsSoftWarning=r("#credentialsSoft",this.$el),this.$credentialsWrongWarning=r("#credentialsWrong",this.$el)},setUserBts:function(){this.user.bts?this.user.bts.current?this.user.bts.current=i.find(this.systems,{id:this.user.bts.current.id}):this.user.bts.current=this.systems[0]:(this.user.bts={hash:{},current:null},this.user.bts.current=this.systems[0],this.updateHash())},updateHash:function(){this.user.bts.hash[this.user.bts.current.id]||(this.user.bts.hash[this.user.bts.current.id]={type:this.systemType,id:this.user.bts.current.id,submits:0})},updateFieldSet:function(e){e.preventDefault();if(r(e.currentTarget).parent().hasClass("active"))return;u.dropDownHandler(e),this.user.bts.current=i.find(this.systems,{id:r(e.currentTarget).attr("id")}),this.updateHash(),this.renderFields(),this.renderCredentials(),this.$postToUrl.text(this.user.bts.current.url),this.$requiredFieldsWarning.hide(),this.$credentialsLink.removeClass("collapsed"),this.$collapseCredentials.addClass("in")},renderFields:function(){this.$dynamicContent.html(u.templates(this.fieldsTpl,{collection:this.user.bts.current.fields,disabled:this.systemSettings.disabledForEdit,update:!1,access:!0,popup:!0})),this.user.bts.current.fields?(l.applyTypeForBtsFields(this.user.bts.current.fields,this.$dynamicContent),this.$actionBtn.prop("disabled",!1)):this.$actionBtn.prop("disabled",!0)},renderCredentials:function(){var e={systemAuth:this.systemAuth,access:!0,post:!0},t=c.getBtsCredentials()||{},n=this.user.bts.current.id;i.extend(e,this.user.bts.hash[n],t[n]),e.hasPassword=!!this.user.bts.hash[n].password,e.defaultPassword=this.settings.defaultPassword,this.$authorizationType.html(u.templates(this.authTpl,e))},onKeySuccess:function(){r("[data-js-post]",this.$el).trigger("click")},submit:function(){var e=this.getData(),t=this,n=function(e){e.status!==401&&t.parseError(e),t.hideLoading()};e&&(this.showLoading(),this.inSubmit=!0,p.postBugToBts(e,this.user.bts.current.id).done(function(e){var r=t.bindTicketToIssues(t.items,e);p.updateDefect({issues:r}).done(function(){i.each(t.items,function(e){i.each(r,function(n){e.id==n.test_item_id&&t.addIssuesToItem(e,n.issue.externalSystemIssues)})}),u.ajaxSuccessMessenger("addTicket"),t.successClose()}).fail(function(e){n(e)}),t.persistCredentials()}).fail(function(e){n(e)}).always(function(){t.inSubmit=!1}))},bindTicketToIssues:function(e,t){var n=[];return i.forEach(e,function(e,i){var s=r(".inline-editor .rp-defect-type-dropdown .pr-defect-type-badge"),o=s.length>0?s.data("id"):null,u={issue_type:o?o:JSON.parse(e.get("issue")).issue_type,comment:e.get("issue").comment,externalSystemIssues:e.getIssue().externalSystemIssues||[]};r("#replaceComments").prop("checked")&&(u.comment=r(".markItUpEditor").val().length>0?r(".markItUpEditor").val():e.issue.comment);if(e.id==r(".editor-row").closest(".selected").attr("id")){var a=r(".markItUpEditor").val(),f=e.issue.comment;u.comment=f&&a.trim()===f.trim()?f:a}u.externalSystemIssues.push({ticketId:t.id,systemId:this.user.bts.current.id,url:t.url}),n.push({issue:u,test_item_id:e.id})},this),n},addIssuesToItem:function(e,t){var n=this,r=e.getIssue();r.externalSystemIssues||(r.externalSystemIssues=[]);var s=i.map(t,function(e){return e.ticketId}),o=[];i.each(r.externalSystemIssues,function(e){i.contains(s,e.ticketId)||o.push(e)},this),i.each(t,function(e){o.push({systemId:e.systemId,ticketId:e.ticketId,url:e.url})},this),r.externalSystemIssues=o,e.setIssue(r)},persistCredentials:function(){var e=this.user.bts.hash[this.user.bts.current.id];e.submits+=1;var t={username:e.username,id:e.id};e.domain&&(t.domain=e.domain),c.setBtsCredentials(t)},parseError:function(e){if(e.responseText){this.$credentialsSoftWarning.hide();try{var t=JSON.parse(e.responseText);t.message.indexOf(this.systemSettings.credentialsErrorPattern)!==-1&&this.highlightCredentials(!0);if(d.patterns.htmlError.test(t.message)){var n=t.message.match(d.patterns.getBodyContent).map(function(e){return e.replace(d.patterns.replaceBodyTag,"")});this.$credentialsWrongWarning.html(n[0]).show(),this.validateBtsHomeLink()}else console.log(e.responseText),this.$credentialsWrongWarning.text(this.$credentialsWrongWarning.data("general")+e.responseText).show()}catch(r){this.$credentialsWrongWarning.text(this.$credentialsWrongWarning.data("general")+e.responseText).show()}return}this.$el.modal("hide"),u.ajaxFailMessenger(null,"postTicketToBts")},getData:function(){var e=!1,t=[],n,s=this.systemType===d.btsEnum.rally;i.forEach(r(".default-value, select",this.$dynamicContent),function(n){var i=r(n),o=!1;if(i.hasClass("users-typeahead")){if(i.is("div"))return;o=!0}var u=i.hasClass("required-value"),a=i.hasClass("rp-btn")?r(".select-value",i).text():i.val().trim();if(o){var f=a.split(",");a=f[0]===""?[]:f}else a=a?[a]:[];u&&!a.length&&(e=!0,i.closest(".rp-form-group").addClass("has-error")),!u&&!e&&(e=i.closest(".rp-form-group").hasClass("has-error"));var l={value:a,required:u,id:i.attr("id"),fieldType:i.data("type")};s&&(l.fieldName=i.data("name")),t.push(l)});if(!this.validateCredentials()||e){e&&this.$requiredFieldsWarning.show();return}this.$requiredFieldsWarning.hide(),n={fields:t,backLinks:this.getLinks(),item:this.items[0].id,log_quantity:this.systemSettings.logsAmount};var o=this.user.bts.hash[this.user.bts.current.id];return o.username&&(n.username=o.username,n.password=o.password,o.domain&&(n.domain=o.domain)),o.accessKey&&(n.token=o.accessKey),n.include_logs=this.isMultiply?!1:this.$includeLogs.is(":checked"),n.include_data=this.isMultiply?!1:this.$includeData.is(":checked"),n.include_comments=this.isMultiply?!1:this.$includeComments.is(":checked"),n},validateCredentials:function(){var e=!1,t=this.user.bts.hash[this.user.bts.current.id],n=function(){delete t.username,delete t.password,delete t.domain}.bind(this);this.$authorizationType.find(".has-error").removeClass("has-error");switch(this.systemAuth){case"BASIC":case"NTLM":delete t.accessKey;var s=r(".bts-property",this.$authorizationType),o=i.every(s,function(e){return!e.value}),u=i.every(s,function(e){return e.value});u||o&&t.type!="JIRA"?(e=!0,o&&n(),s[0].value&&i.forEach(s,function(e){if(e.id==="password"&&e.value===this.settings.defaultPassword)return;t[e.id]=e.value}.bind(this))):(n(),i.forEach(s,function(e){e.value?r(e).closest(".rp-form-group").removeClass("has-error"):r(e).closest(".rp-form-group").addClass("has-error")}),this.$credentialsWrongWarning.text(this.$credentialsWrongWarning.data("fill")).show());break;case"APIKEY":n();var a=r("#accessKey",this.$authorizationType);a.val().length?(t.accessKey=a.val(),e=!0):(a.parent().addClass("has-error"),this.$credentialsWrongWarning.text(this.$credentialsWrongWarning.data("fill")).show());default:}return e&&this.$credentialsWrongWarning.hide(),e},getLinks:function(){var e={},t=window.location.protocol+"//"+window.location.host+"/ui/#"+this.appModel.get("projectId")+"/launches/all",n;if(this.items.length>1)i.forEach(this.items,function(r){n="/"+r.get("launchId");for(var i in r.get("path_names"))n+="/"+i;e[r.id]=t+n+"?log.item="+r.id});else{var r=this.items[0].id;n="/"+this.items[0].get("launchId");for(var s in this.items[0].get("path_names"))n+="/"+s;e[r]=t+n+"?log.item="+r}return e}});return v}),define("launches/multipleActions/postBugAction",["require","exports","module","modals/modalPostBug"],function(e,t,n){"use strict";var r=e("modals/modalPostBug"),i=function(e){var t=e.items,n=new r({items:t});return n.show()};return i}),define("modals/modalLoadBug",["require","exports","module","filters/SingletonLaunchFilterCollection","jquery","underscore","modals/_modalView","backbone","backbone-epoxy","app","util","coreService","model/SingletonAppModel"],function(e,t,n){"use strict";var r=e("filters/SingletonLaunchFilterCollection"),i=e("jquery"),s=e("underscore"),o=e("modals/_modalView"),u=e("backbone"),a=e("backbone-epoxy"),f=e("app"),l=e("util"),c=e("coreService"),h=e("model/SingletonAppModel"),p=f.getInstance(),d=new h,v=a.Model.extend({defaults:{url:"",ticketId:""}}),m=u.Collection.extend({model:v}),g=a.View.extend({template:"tpl-model-load-bug-item",className:"ticket-row-view",events:{"click [data-js-remove-row]":"onClickRemove","blur [data-js-link-input]":"onBlurLinkInput"},bindings:{"[data-js-link-input]":"value: url","[data-js-issue-input]":"value: ticketId"},initialize:function(){var e=d.getArr("externalSystem");this.externalSystemType="",e[0]&&e[0].systemType&&(this.externalSystemType=e[0].systemType),this.render(),this.listenTo(this.model.collection,"add remove",this.onChangeCollection),this.onChangeCollection(),l.hintValidator(i("[data-js-issue-input]",this.$el),{validator:"minMaxRequired",type:"issueId",min:1,max:128}),l.hintValidator(i("[data-js-link-input]",this.$el),[{validator:"matchRegex",type:"issueLinkRegex",pattern:p.patterns.urlT,arg:"i"}])},onBlurLinkInput:function(){var e=i("[data-js-link-input]",this.$el),t=i("[data-js-issue-input]",this.$el);if(e.parent().hasClass("validate-error")||i.trim(t.val()))return;var n="";this.externalSystemType=="JIRA"&&(n=e.val().split("/"),n=n[n.length-1]),this.externalSystemType=="TFS"&&(n=e.val().split("id=")[1],n=n?n.split("&")[0]:""),this.model.set({ticketId:n}),t.trigger("validate")},onChangeCollection:function(){this.model.collection.models.length<=1?i("[data-js-remove-row]",this.$el).addClass("hide"):i("[data-js-remove-row]",this.$el).removeClass("hide")},render:function(){this.$el.html(l.templates(this.template,{}))},onClickRemove:function(){this.model.collection.remove(this.model),this.destroy()},destroy:function(){this.$el.remove(),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}}),y=o.extend({template:"tpl-modal-load-bug",className:"modal-load-bug",events:{"click [data-bts-select-item]":"onClickBts","click [data-js-add-ticket]":"onClickAddTicket","click [data-js-load]":"onClickLoad"},initialize:function(e){this.externalSystems=d.getArr("externalSystem");if(!this.externalSystems.length){console.log("No bts found"),this.hide();return}this.itemModels=e.items,this.testItemsIds=s.map(this.itemModels,function(e){return e.get("id")}),this.render(),this.selectBts(this.externalSystems[0].id),this.collection=new m,this.listenTo(this.collection,"add",this.onAddTicket),this.collection.add({})},onKeySuccess:function(){i("[data-js-load]",this.$el).trigger("click")},onClickAddTicket:function(){this.collection.add({})},onClickLoad:function(){var e=this;i(".form-control",this.$el).trigger("validate");if(!i(".validate-error",this.$el).length){var t=s.map(this.collection.models,function(e){return{ticketId:e.get("ticketId"),url:e.get("url")}}),n={systemId:this.currentBts.id,issues:t,testItemIds:this.testItemsIds};c.loadBugs(n).done(function(t){l.ajaxSuccessMessenger("submitKeys"),s.each(e.itemModels,function(t){e.addIssuesToItem(t,n.issues)})}).fail(function(e){l.ajaxFailMessenger(e,"submitKeys")}).always(function(){e.successClose()})}},addIssuesToItem:function(e,t){var n=this,r=e.getIssue();r.externalSystemIssues||(r.externalSystemIssues=[]);var i=s.map(t,function(e){return e.ticketId}),o=[];s.each(r.externalSystemIssues,function(e){s.contains(i,e.ticketId)||o.push(e)}),s.each(t,function(e){o.push({systemId:n.currentBts.id,ticketId:e.ticketId,url:e.url})}),r.externalSystemIssues=o,e.setIssue(r)},onAddTicket:function(e){i("[data-js-load-items-container]",this.$el).append((new g({model:e})).$el)},onClickBts:function(e){e.preventDefault(),this.selectBts(i(e.currentTarget).data("bts-select-item"))},selectBts:function(e){var t=null;s.each(this.externalSystems,function(n){if(n.id==e)return t=n,!1});if(!t)return;this.currentBts=t,i("[data-js-bts-value]",this.$el).text(t.project),i("[data-js-bts-link]",this.$el).text(t.url)},render:function(){this.$el.html(l.templates(this.template,{externalSystems:this.externalSystems}))}});return y}),define("launches/multipleActions/loadBugAction",["require","exports","module","modals/modalLoadBug"],function(e,t,n){"use strict";var r=e("modals/modalLoadBug"),i=function(e){var t=e.items,n=new r({items:t});return n.show()};return i}),define("launches/logLevel/LogItemInfoView",["require","exports","module","jquery","backbone","backbone-epoxy","util","launches/common/StepLogDefectTypeView","launches/logLevel/LogItemInfoStackTraceView","launches/logLevel/LogItemInfoDetailsView","launches/logLevel/LogItemInfoActivity","launches/logLevel/LogItemInfoAttachments","app","launches/multipleActions/postBugAction","launches/multipleActions/loadBugAction","model/SingletonAppModel","localization","callService","dataUrlResolver"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("launches/common/StepLogDefectTypeView"),a=e("launches/logLevel/LogItemInfoStackTraceView"),f=e("launches/logLevel/LogItemInfoDetailsView"),l=e("launches/logLevel/LogItemInfoActivity"),c=e("launches/logLevel/LogItemInfoAttachments"),h=e("app"),p=e("launches/multipleActions/postBugAction"),d=e("launches/multipleActions/loadBugAction"),v=e("model/SingletonAppModel"),m=e("localization"),g=e("callService"),y=e("dataUrlResolver"),b=g.call,w=h.getInstance(),E=s.View.extend({template:"tpl-launch-log-item-info",events:{"click [data-js-item-stack-trace-label]":function(){this.toggleModelField("stackTrace")},"click [data-js-item-gallery-label]":function(){this.toggleModelField("attachments")},"click [data-js-item-details-label]":function(){this.toggleModelField("itemDetails")},"click [data-js-item-activity-label]":function(){this.toggleModelField("activity")},"click [data-js-match]":"onClickMatch","click [data-js-post-bug]":"onClickPostBug","click [data-js-load-bug]":"onClickLoadBug"},bindings:{"[data-js-item-stack-trace-label]":"classes: {active: stackTrace}","[data-js-item-gallery-label]":"classes: {active: attachments}","[data-js-item-details-label]":"classes: {active: itemDetails}","[data-js-item-activity-label]":"classes: {active: activity}","[data-js-item-stack-trace]":"classes: {hide: not(stackTrace)}","[data-js-item-gallery]":"classes: {hide: not(attachments)}","[data-js-item-details]":"classes: {hide: not(itemDetails)}","[data-js-item-activity]":"classes: {hide: not(activity)}","[data-js-match]":"classes: {hide: not(parent_launch_investigate), disabled: parent_launch_isProcessing}","[data-js-post-bug]":"classes: {disabled: validatePostBug}, attr: {title: postBugTitle}","[data-js-load-bug]":"classes: {disabled: validateLoadBug}, attr: {title: loadBugTitle}"},computeds:{validateLoadBug:{deps:[],get:function(){return this.viewModel.validate.loadbug()}},validatePostBug:{deps:[],get:function(){return this.viewModel.validate.postbug()}},postBugTitle:{deps:["issue","validatePostBug"],get:function(e,t){return t?t:m.launches.postBug}},loadBugTitle:{deps:["issue","validateLoadBug"],get:function(e,t){return t?t:m.launches.loadBug}}},initialize:function(e){this.context=e.context,this.appModel=new v,this.viewModel=e.itemModel,this.launchModel=e.launchModel,this.model=new(s.Model.extend({defaults:{stackTrace:!1,attachments:!1,itemDetails:!1,activity:!1}})),this.listenTo(this.model,"change:stackTrace change:attachments change:itemDetails change:activity",this.onChangeTabModel),this.listenTo(this.launchModel,"change:isProcessing",this.onChangeLaunchProcessing),this.listenTo(this.viewModel,"change:issue",this.onChangeIssue),this.onChangeLaunchProcessing(),this.render(),this.validateForIssue()&&(this.issueView=new u({model:this.viewModel,el:r("[data-js-step-issue]",this.$el)})),this.stackTrace=new a({el:r("[data-js-item-stack-trace]",this.$el),itemModel:this.viewModel,parentModel:this.model}),this.details=new f({el:r("[data-js-item-details]",this.$el),itemModel:this.viewModel,parentModel:this.model}),this.activity=new l({el:r("[ data-js-item-activity]",this.$el),itemModel:this.viewModel,parentModel:this.model}),this.attachments=new c({el:r("[data-js-item-gallery]",this.$el),itemModel:this.viewModel,parentModel:this.model}),this.listenTo(this.stackTrace,"goToLog",this.goToLog)},goToLog:function(e){this.trigger("goToLog",e)},endGoToLog:function(){this.stackTrace.endGoToLog()},goToAttachment:function(e){var t=this;w.mainScrollElement.animate({scrollTop:this.el.offsetTop},500,function(){t.attachments.goToAttachmentsPrev(),t.model.set({attachments:!0}),t.attachments.goToAttachments(e)})},onChangeIssue:function(){this.trigger("change:issue")},onChangeLaunchProcessing:function(){this.viewModel.set({parent_launch_isProcessing:this.launchModel.get("isProcessing")})},validateForIssue:function(){return!!this.viewModel.get("issue")},onClickPostBug:function(){p({items:[this.viewModel]})},onClickLoadBug:function(){d({items:[this.viewModel]})},onClickMatch:function(){var e=this;b("POST",y.launchMatchUrl(this.viewModel.get("launchId"))).done(function(t){e.launchModel.set({isProcessing:!0}),o.ajaxSuccessMessenger("startAnalyzeAction")}).fail(function(e){o.ajaxFailMessenger(e,"startAnalyzeAction")})},onChangeTabModel:function(e,t){t&&this.model.set(_.extend(_.clone(this.model.defaults),e.changed))},toggleModelField:function(e){this.model.set(e,!this.model.get(e))},render:function(){this.$el.html(o.templates(this.template,{context:this.context}))},destroy:function(){this.issueView&&this.issueView.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return E}),define("modals/modalLogAttachmentImage",["require","exports","module","jquery","underscore","modals/_modalView","backbone","backbone-epoxy","util","dataUrlResolver"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("modals/_modalView"),o=e("backbone"),u=e("backbone-epoxy"),a=e("util"),f=e("dataUrlResolver"),l=s.extend({tpl:"tpl-modal-log-attachment-image",className:"modal-log-attachment-image",events:{"click [data-js-image]":"openImgInNewWindow"},initialize:function(e){this.imageSrc=f.getFileById(e.imageId),this.render()},onShow:function(){this.$modalWrapper.addClass("loading")},render:function(){var e=this;this.$el.html(a.templates(this.tpl,{imageSrc:this.imageSrc})),r("[data-js-image]",this.$el).load(function(){e.$modalWrapper.removeClass("loading")})},openImgInNewWindow:function(){window.open(this.imageSrc)}});return l}),define("components/CodeBlockWithHighlightComponent",["require","exports","module","jquery","backbone","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=i.View.extend({className:"code-highlighter",template:"tpl-component-code-highlighter",initialize:function(e){var t=this;this.language=e.language,this.binaryContent=e.binaryContent,this.loadHighlightJS().done(function(){t.loadLanguage(t.language).done(function(){hljs.registerLanguage(t.language,window["hljs_"+t.language]),t.render({binaryContent:t.binaryContent})})})},render:function(e){this.$el.html(s.templates(this.template,{binaryContent:e.binaryContent})),r("[data-js-code]",this.$el).addClass(this.language),hljs.highlightBlock(r("[data-js-code]",this.$el)[0])},loadHighlightJS:function(){var e=r.Deferred();if(typeof hljs!="undefined")return e.resolve(),e;var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="js/lib/highlightJS/highlight.min.js",t.onload=function(){e.resolve()},t.onerror=function(t){e.resolve()};var n=document.getElementsByTagName("script")[0];return n.parentNode.insertBefore(t,n),e},loadLanguage:function(e){var t=r.Deferred(),n=document.createElement("script");n.type="text/javascript",n.async=!0,n.src="js/lib/highlightJS/languages/"+e+".js",n.onload=function(){t.resolve()},n.onerror=function(e){t.resolve()};var i=document.getElementsByTagName("script")[0];return i.parentNode.insertBefore(n,i),t}});return o}),define("modals/modalLogAttachmentBinary",["require","exports","module","jquery","underscore","modals/_modalView","backbone","backbone-epoxy","util","dataUrlResolver","components/CodeBlockWithHighlightComponent"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("modals/_modalView"),o=e("backbone"),u=e("backbone-epoxy"),a=e("util"),f=e("dataUrlResolver"),l=e("components/CodeBlockWithHighlightComponent"),c=s.extend({tpl:"tpl-modal-log-attachment-binary",className:"modal-log-attachment-binary",initialize:function(e){var t=this;this.binaryId=e.binaryId,this.language=e.language,this.binarySource=f.getFileById(e.binaryId),this.loadData().done(function(e){var n=new l({language:t.language,binaryContent:e});r("[data-js-binary-holder]",t.$el).html(n.el),t.$modalWrapper.removeClass("loading")}),this.render()},render:function(){this.$el.html(a.templates(this.tpl))},onShow:function(){this.$modalWrapper.addClass("loading")},loadData:function(){var e=r.Deferred(),t=this;return r.ajax({url:t.binarySource,type:"GET",dataType:"text",async:!0,success:function(t){e.resolve(t)}}),e}});return c}),define("launches/logLevel/LogItemLogsItem",["require","exports","module","jquery","backbone-epoxy","util","app","components/markdown/MarkdownViewer","modals/modalLogAttachmentImage","modals/modalLogAttachmentBinary"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone-epoxy"),s=e("util"),o=e("app"),u=e("components/markdown/MarkdownViewer"),a=e("modals/modalLogAttachmentImage"),f=e("modals/modalLogAttachmentBinary"),l=o.getInstance(),c=i.View.extend({className:"rp-table-row",template:"tpl-launch-log-item-logs-item",events:{"click [data-js-toggle-open]":"onClickOpen","click [data-js-image]":"onClickImg"},bindings:{"[data-js-time]":"text: timeString","[data-js-image]":"attr: {src: imagePath}, classes: {hide: not(binary_content)}",":el":"levelClass: level"},bindingHandlers:{levelClass:{set:function(e,t){if(!t)return;e.addClass("level-"+t)}}},onClickOpen:function(){this.$el.toggleClass("open")},initialize:function(){this.render(),this.listenTo(this.model,"scrollTo",this.scrollTo);var e=new u({text:this.model.get("message")});r("[data-js-message]",this.$el).html(e.$el)},resize:function(){this.activateAccordion()},scrollTo:function(){l.mainScrollElement.animate({scrollTop:this.$el.offset().top},500)},render:function(){this.$el.html(s.templates(this.template,{}))},onClickImg:function(){var e,t=this.model.get("binary_content").content_type,n=this.model.get("binary_content").id;if(~t.indexOf("image/"))e=new a({imageId:n}),e.show();else{var r=t.split("/")[1];e=new f({binaryId:n,language:r}),e.show()}},activateAccordion:function(){this.$el.innerHeight()>128?this.$el.addClass("show-accordion"):this.$el.removeClass("show-accordion")}});return c}),define("launches/logLevel/LogItemNextError/LogItemNextErrorCollection",["require","exports","module","jquery","backbone","util","app","localization","callService","dataUrlResolver","launches/logLevel/LogItemModel"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("app"),u=e("localization"),a=e("callService"),f=e("dataUrlResolver"),l=a.call,c=e("launches/logLevel/LogItemModel"),h=o.getInstance(),p=i.Collection.extend({model:c,initialize:function(e){this.filterModel=e.filterModel,this.itemModel=e.itemModel},load:function(){var e=f.getLogsUrl()+"?"+this.getParamsForRequest().join("&"),t=this;return this.request&&this.request.abort(),this.request=l("GET",e).done(function(e){t.reset(e.content)}),this.request},getParamsForRequest:function(){var e=["filter.eq.item="+this.itemModel.get("id")];e.push("page.page=1"),e.push("page.size=100");var t=this.filterModel.getOptions();return _.each(t,function(t){~t.search("filter.in.level")||e.push(t)}),e.push("filter.in.level=ERROR"),e}});return p}),define("launches/logLevel/LogItemNextError/LogItemNextErrorView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","launches/logLevel/LogItemNextError/LogItemNextErrorCollection","localization","callService","dataUrlResolver"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("launches/logLevel/LogItemNextError/LogItemNextErrorCollection"),f=e("localization"),l=e("callService"),c=e("dataUrlResolver"),h=l.call,p=u.getInstance(),d=s.View.extend({template:"tpl-launch-log-item-next-error",className:"log-item-next-error",events:{"click [data-js-next-error]":"onClickNextError"},bindings:{"[data-js-next-error]":"attr: { disabled: disable}, classes: {load: load}"},computeds:{},initialize:function(e){this.model=new s.Model({disable:!1,load:!0}),this.pagingModel=e.pagingModel,this.collectionLogs=e.collectionLogs,this.filterModel=e.filterModel,this.collection=new a({filterModel:this.filterModel,itemModel:e.itemModel}),this.currentLastPage=this.pagingModel.get("number"),this.render(),this.listenTo(this.filterModel,"change:newSelectionParameters change:newEntities",this.onChangeFilter);var t=this;this.onChangeFilter().done(function(){t.listenTo(t.pagingModel,"change",t.onChangePaging)})},render:function(){this.$el.html(o.templates(this.template,{}))},onClickNextError:function(e){var t=this;if(!r(e.currentTarget).hasClass("load")){var n=this.collectionLogs.where({level:"ERROR"});if(n.length){var i=n[n.length-1].get("id"),s=-1;_.each(this.collection.models,function(e,t){if(e.get("id")==i)return s=t,!1});if(s>=0&&s<=this.collection.models.length-2){var o=this.collection.models[s+1].get("id");this.model.set({disable:!1,load:!0}),this.collectionLogs.findLogPage(o).done(function(e){t.model.set({disable:!1,load:!1}),t.goToLog(e,o)})}else this.model.set({disable:!0,load:!1})}else this.model.set({disable:!1,load:!0}),this.findNextError().done(function(e,n){t.model.set({disable:!1,load:!1}),t.goToLog(e,n)})}},findNextError:function(e,t){e||(e=r.Deferred()),typeof t=="undefined"&&(t=0);var n=this;return this.collectionLogs.findLogPage(this.collection.models[t].get("id")).done(function(r){r<=n.pagingModel.get("number")?n.findNextError(e,t+1):e.resolve(r,n.collection.models[t].get("id"))}),e},goToLog:function(e,t){this.collectionLogs.setPaging(e);var n=this;this.listenToOnce(this.collectionLogs,"loading:false",function(){n.collectionLogs.get(t)&&n.collectionLogs.get(t).trigger("scrollTo")})},onChangePaging:function(e){var t=this;this.collection.length&&(e.changed.size?(t.model.set({load:!0}),this.checkLastLog().done(function(){t.model.set({load:!1}),t.checkPage()})):this.checkPage())},checkPage:function(){this.pagingModel.get("number")>=this.currentLastPage||!this.currentLastPage?this.model.set({disable:!0}):this.model.set({disable:!1})},onChangeFilter:function(){var e=r.Deferred(),t=!1;_.each(this.filterModel.getEntitiesObj(),function(e){e.filtering_field=="level"&&(~e.value.search(/ERROR/)||e.value=="")&&(t=!0)});if(t){this.model.set({disable:!1,load:!0});var n=this;this.collection.load().done(function(){if(!n.collection.models.length){n.model.set({disable:!0,load:!1});return}n.checkLastLog().done(function(){n.model.set({load:!1}),n.checkPage()})}).always(function(){e.resolve()})}else this.model.set({disable:!0,load:!1}),this.collection.reset([]),e.resolve();return e},checkLastLog:function(){var e=this;return this.collectionLogs.findLogPage(this.collection.models[this.collection.models.length-1].get("id")).done(function(t){e.currentLastPage=t})}});return d}),define("launches/logLevel/LogItemLogsTable",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","filters/FilterModel","filterEntities/FilterEntities","launches/logLevel/LogItemCollection","core/components","core/StickyHeader","launches/logLevel/LogItemLogsItem","storage/SingletonUserStorage","launches/logLevel/LogItemNextError/LogItemNextErrorView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("filters/FilterModel"),f=e("filterEntities/FilterEntities"),l=e("launches/logLevel/LogItemCollection"),c=e("core/components"),h=e("core/StickyHeader"),p=e("launches/logLevel/LogItemLogsItem"),d=e("storage/SingletonUserStorage"),v=e("launches/logLevel/LogItemNextError/LogItemNextErrorView"),m=u.getInstance(),g=s.View.extend({template:"tpl-launch-log-item-logs-table",events:{"change [data-js-attachments-filter]":"onChangeFilter","click .rp-grid-th[data-sorter]":"onClickSorter"},initialize:function(e){this.itemModel=e.itemModel,this.mainPath=e.mainPath,this.collectionItems=e.collectionItems,this.userStorage=new d;var t=e.options,n="true";t["page.sort"]&&~t["page.sort"].indexOf("DESC")&&(n="false"),this.filterModel=new a({temp:!0,selection_parameters:'{"is_asc": '+n+', "sorting_column": "time"}'}),this.pagingModel=new i.Model,this.selectModel=new f.EntitySelectModel({id:"level",condition:"in",values:[{name:"All",value:"All"},{name:"Trace",value:"TRACE"},{name:"Debug",value:"DEBUG"},{name:"Info",value:"INFO"},{name:"Warn",value:"WARN"},{name:"Error",value:"ERROR"}],value:t["filter.in.level"]&&decodeURIComponent(t["filter.in.level"])||"All"}),this.nameModel=new f.EntityInputModel({id:"message",condition:"cnt",valueMinLength:3,valueMaxLength:55,valueOnlyDigits:!1,value:t["filter.cnt.message"]||""}),this.render(),t["filter.ex.binary_content"]&&t["filter.ex.binary_content"]=="true"&&r("[data-js-attachments-filter]",this.$el).prop("checked",!0),this.onChangeFilter(),this.collection=new l({filterModel:this.filterModel,itemModel:this.itemModel,pagingPage:t["page.page"]&&parseInt(t["page.page"]),pagingSize:t["page.size"]&&parseInt(t["page.size"])||this.userStorage.get("launchLogPageCount")}),this.nextErrorView=new v({filterModel:this.filterModel,itemModel:this.itemModel,collectionLogs:this.collection,pagingModel:this.pagingModel}),r("[data-js-next-error-container]",this.$el).html(this.nextErrorView.$el),this.listenTo(this.collection,"change:paging",this.onChangePaging),this.listenTo(this.collection,"loading:true",this.onStartLoading),this.listenTo(this.collection,"loading:false",this.onStopLoading),this.listenTo(this.collection,"change:options",this.onChangeOptionsFilter),this.collection.load(),this.listenTo(this.collection,"reset",this.onResetCollection),this.listenTo(this.selectModel,"change:condition change:value",this.onChangeFilter),this.listenTo(this.nameModel,"change:value",this.onChangeFilter),this.listenTo(this.filterModel,"change:newSelectionParameters",this.onChangeSelectionParameters),this.onChangeSelectionParameters(),this.listenTo(this.paging,"page",this.onChangePage),this.listenTo(this.minPaging,"page",this.onChangePage),this.listenTo(this.paging,"count",this.onChangePageCount),this.setupStickyHeader();var s=this;r(window).off("resize.logItems").on("resize.logItems",_.debounce(s.resize.bind(s),100))},resetFilters:function(){this.nameModel.set({value:""}),this.selectModel.set({value:""}),r("[data-js-attachments-filter]",this.$el).prop("checked",!1),this.selectModel.trigger("changeState")},setupStickyHeader:function(){this.destroyStickyHeader(),this.stickyHeader=new h({fixedBlock:r("[data-js-fixed-header]",this.$el),topMargin:0,minWidthWindow:720})},destroyStickyHeader:function(){this.stickyHeader&&this.stickyHeader.destroy()},resize:function(){_.each(this.items,function(e){e.resize()})},render:function(){this.$el.html(o.templates(this.template),{}),r("[data-js-select-filter]",this.$el).html((new this.selectModel.view({model:this.selectModel})).$el),r("[data-js-name-filter]",this.$el).html((new this.nameModel.view({model:this.nameModel})).$el),this.paging=new c.PagingToolbar({el:r("[data-js-paginate-container]",this.$el),model:this.pagingModel}),this.minPaging=new c.PagingToolbar({el:r("[data-js-paginate-min-container]",this.$el),model:this.pagingModel,minMode:!0})},onChangeOptionsFilter:function(e){m.router.navigate(this.mainPath+"&"+e.join("&"),{trigger:!1});var t={};_.each(e,function(e){e=e.replace("log.","");var n=e.split("=");t[n[0]]=n[1]}),t.item=this.collectionItems.getInfoLog().item,t.history=this.collectionItems.getInfoLog().history,this.collectionItems.setInfoLog(t)},onStartLoading:function(){r("[data-js-logs-wrapper]",this.$el).addClass("load")},onStopLoading:function(){r("[data-js-logs-wrapper]",this.$el).removeClass("load"),_.each(this.items,function(e){var t=e.model.get("level");(t=="ERROR"||t=="TRACE"||t=="DEBUG")&&e.activateAccordion()})},onChangePage:function(e){return this.collection.setPaging(e)},onChangePageCount:function(e){this.collection.setPaging(1,e),this.userStorage.set({launchLogPageCount:e})},onChangePaging:function(e){this.pagingModel.set(e),this.paging.render(),this.minPaging.render(),r("[data-js-next-error]",this.$el).removeClass("hide")},onChangeFilter:function(){var e=[];e.push(this.selectModel.getInfo()),e.push(this.nameModel.getInfo()),r("[data-js-attachments-filter]",this.$el).is(":checked")&&e.push({condition:"ex",filtering_field:"binary_content",value:"true"}),this.filterModel.set({newEntities:JSON.stringify(e)})},onClickSorter:function(e){var t=r(e.currentTarget).data("sorter"),n=this.filterModel.getParametersObj();n.sorting_column==t?n.is_asc=!n.is_asc:(n.is_asc=!0,n.sorting_column=t),this.filterModel.set({newSelectionParameters:JSON.stringify(n),curPage:1})},onChangeSelectionParameters:function(){r("[data-sorter]",this.$el).removeClass("sorting-asc sorting-desc");var e=this.filterModel.getParametersObj(),t=r('[data-sorter="'+e.sorting_column+'"]',this.$el);t&&t.length&&t.addClass(e.is_asc?"sorting-asc":"sorting-desc")},onResetCollection:function(){var e=r("[data-js-table-container]",this.$el),t=this;e.html(""),this.collection.models.length?r("[data-js-logs-wrapper]",this.$el).removeClass("not-found"):r("[data-js-logs-wrapper]",this.$el).addClass("not-found"),this.items=[],_.each(this.collection.models,function(n){var r=new p({model:n});e.append(r.$el),t.items.push(r)})},goToLog:function(e){if(this.collection.get(e))this.collection.get(e).trigger("scrollTo"),this.trigger("goToLog:end");else{var t=this;this.collection.findLogPage(e,!0).done(function(n){t.resetFilters(),t.onChangeFilter(),t.onChangePage(n),t.listenToOnce(t.collection,"loading:false",function(){t.collection.get(e)&&t.collection.get(e).trigger("scrollTo"),t.trigger("goToLog:end")})})}},destroy:function(){r(window).off("resize.logItems"),this.items=null,this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return g}),define("launches/logLevel/LogBodyView",["require","exports","module","jquery","underscore","backbone","backbone-epoxy","util","app","launches/logLevel/LogHistoryLine","launches/logLevel/LogItemInfoView","launches/logLevel/LogItemLogsTable"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("backbone"),o=e("backbone-epoxy"),u=e("util"),a=e("app"),f=e("launches/logLevel/LogHistoryLine"),l=e("launches/logLevel/LogItemInfoView"),c=e("launches/logLevel/LogItemLogsTable"),h=a.getInstance(),p=o.View.extend({template:"tpl-launch-log-body",initialize:function(e){this.context=e.context,this.collectionItems=e.collectionItems,this.launchModel=e.launchModel,this.render(),this.listenTo(this.collectionItems,"change:log:item",this.onChangeLogItem),this.listenTo(this.collectionItems,"update:logs",this.onChangeLogItem),this.onChangeLogItem(),this.context==="userdebug"&&this.$el.find("[data-js-log-item-container]").addClass("debug-mode")},onChangeLogItem:function(){r("[data-js-log-item-container]",this.$el).removeClass("not-found"),r("[data-js-log-item-container]",this.$el).addClass("load"),this.history&&this.off(this.history),this.history&&this.history.destroy(),this.historyItem&&this.historyItem.destroy(),this.logsItem&&this.logsItem.destroy(),this.collectionItems.get(this.collectionItems.getInfoLog().item)?(this.history=new f({el:r("[data-js-history-line]",this.$el),collectionItems:this.collectionItems,launchModel:this.launchModel}),this.listenTo(this.history,"load:history",this.onLoadHistory),this.listenTo(this.history,"activate:item",this.selectHistoryItem)):(r("[data-js-log-item-container]",this.$el).addClass("not-found"),r("[data-js-log-item-container]",this.$el).removeClass("load"))},onLoadHistory:function(){r("[data-js-log-item-container]",this.$el).removeClass("load")},selectHistoryItem:function(e,t){var n=this.collectionItems.getInfoLog();n.history=e.get("id"),!t&&n["page.page"],this.collectionItems.setInfoLog(n),!t&&h.router.navigate(this.collectionItems.getPathByLogItemId(n.item),{trigger:!1});var i=this.collectionItems.get(e.id);i&&e.set("path_names",i.get("path_names")),this.historyItem&&this.stopListening(this.historyItem)&&this.historyItem.destroy(),this.historyItem=new l({el:r("[data-js-item-info]",this.$el),context:this.context,itemModel:e,launchModel:this.launchModel}),this.listenTo(this.historyItem,"goToLog",this.goToLog),this.listenTo(this.historyItem,"change:issue",this.onChangeItemIssue),this.logsItem&&this.stopListening(this.logsItem)&&this.logsItem.destroy(),this.logsItem=new c({el:r("[data-js-item-logs]",this.$el),itemModel:e,collectionItems:this.collectionItems,mainPath:this.collectionItems.getPathByLogItemId(n.item),options:this.collectionItems.getInfoLog()}),this.listenTo(this.logsItem,"goToLog:end",this.onEndGoToLog)},onChangeItemIssue:function(){i.each(this.launchModel.collection.models,function(e){e.get("level")&&e.updateData(!0)})},goToLog:function(e){this.logsItem&&this.logsItem.goToLog(e)},onGoToAttachment:function(e){this.historyItem.goToAttachment(e)},onEndGoToLog:function(){this.historyItem.endGoToLog()},render:function(){this.$el.html(u.templates(this.template,{context:this.context}))},destroy:function(){this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return p}),define("launches/historyGrid/HistoryControlView",["require","exports","module","filterEntities/FilterEntitiesView","util","jquery","backbone-epoxy","launches/common/InfoPanelView","app","localization"],function(e,t,n){"use strict";var r=e("filterEntities/FilterEntitiesView"),i=e("util"),s=e("jquery"),o=e("backbone-epoxy"),u=e("launches/common/InfoPanelView"),a=e("app"),f=e("localization"),l=a.getInstance(),c=o.View.extend({events:{"click [data-js-refresh]":"onClickRefresh"},template:"tpl-launch-history-control",initialize:function(e){this.parentModel=e.parentModel,this.collectionItems=e.collectionItems,this.render(),this.infoLine=new u({el:s("[data-js-info-line]",this.$el),model:this.parentModel})},render:function(){this.$el.html(i.templates(this.template,{}))},onClickRefresh:function(){this.trigger("refresh::history")},destroy:function(){this.infoLine&&this.infoLine.destroy(),this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return c}),define("launches/historyGrid/HistoryItemCellView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","defectType/SingletonDefectTypeCollection","launches/common/LaunchSuiteDefectsHoverView","tooltips/SimpleTooltipView","components/markdown/MarkdownViewer"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("defectType/SingletonDefectTypeCollection"),f=e("launches/common/LaunchSuiteDefectsHoverView"),l=e("tooltips/SimpleTooltipView"),c=e("components/markdown/MarkdownViewer"),h=u.getInstance(),p=s.View.extend({template:"tpl-launch-history-item-cell",issueTpl:"tpl-launch-history-item-issue",statisticsTpl:"tpl-launch-history-item-stats",attributes:function(){return{"data-js-history-cell":""}},bindings:{"[data-js-history-cell]":"getClass: status","[data-js-history-statistics]":"getStatistics: statistics","[data-js-history-issue]":"getIssue: issue"},bindingHandlers:{getClass:{set:function(e,t){var n=this.view.getCellWidth(),r="history-status-"+t;e.css("width",n+"%"),e.addClass("history-col "+r)}},getStatistics:{set:function(e,t){var n=this.view.model,r=n.get("issue");if(!r){e.html("");var i=t.defects,s={};_.each(i,function(e,t){if(e.total!=0){var n=h.patterns.defectsLocator,r=_.findKey(e,function(e,t){return n.test(t)});if(r){var i=this.view.defectsCollection.getDefectType(r);i&&(s[t]={shortName:i.shortName,fullName:i.longName,color:i.color||o.getDefaultColor(t),cls:o.getDefectCls(t)})}}},this),e.append(o.templates(this.view.statisticsTpl,{stats:s}))}return""}},getIssue:{set:function(e){function t(e){var t=new c({text:e});return t.$el.wrap("<p/>").parent().html()}var n=this.view.model,r=n.get("issue");if(r){e.html("");var i=n.getIssue(),s=this.view.defectsCollection.getDefectType(i.issue_type),u={tickets:_.map(i.externalSystemIssues,function(e){return e.ticketId}).join(", "),comment:i.comment?t(i.comment.setMaxLength(256)):"",issueType:s,cls:o.getDefectCls(s.typeRef.toLocaleLowerCase())};e.append(o.templates(this.view.issueTpl,{stats:u}))}return""}}},initialize:function(e){this.cellWidth=e.cellWidth,this.$container=e.container,this.defectsCollection=new a,this.defectsCollection.ready.done(function(){this.render()}.bind(this))},events:{"mouseenter [data-tooltip-type]":"showTooltip"},render:function(){this.$container.append(this.$el.addClass().html(o.templates(this.template,{})))},getCellWidth:function(){return this.cellWidth},showTooltip:function(e){var t=r(e.currentTarget),n=t.data("tooltipType");t.data("tooltip")||(t.data("tooltip","tooltip"),this.createTooltip(t,n))},createTooltip:function(e,t){if(t=="warning"||t=="comment"||t=="tickets"||t=="issue"){var n=e;o.appendTooltip(function(){var t=new l({message:e.data("tooltip-content")});return t.$el.html()},n,n),e.uitooltip("option","position",{my:"center+7.5 top+10",collision:"flipfit"}).uitooltip("open")}else var i=new f({el:r("[data-js-defect-hover]",e),type:t,noLink:!0,model:this.model})},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return p}),define("launches/historyGrid/HistoryItemView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","launches/common/LaunchSuiteStepItemModel","launches/historyGrid/HistoryItemCellView","components/markdown/MarkdownViewer"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("launches/common/LaunchSuiteStepItemModel"),f=e("launches/historyGrid/HistoryItemCellView"),l=e("components/markdown/MarkdownViewer"),c=u.getInstance(),h=s.View.extend({template:"tpl-launch-history-item",className:"history-grid-row",events:{"click [data-js-name]":"onClickName"},bindings:{"[data-js-name]":"text: name, attr: {href: getUrl}","[data-js-tags-container]":"getTags: tags"},computeds:{getUrl:{deps:["launches"],get:function(e){var t=window.location.hash,n=t.split("?")[0],i=_.last(this.launches.models),s=e[i.get("launchNumber")],o=_.isEmpty(s)?null:s[0];return!o||o.status===c.launchStatus.reseted?(r("[data-js-name]",this.$el).addClass("not-link"),""):n+(o.has_childs?"/":"?log.item=")+o.id}}},bindingHandlers:{getTags:{set:function(e){var t=this.view.model.get("tags"),n=t&&t.length?"remove":"add",i=r("[data-js-tags]",e);e[n+"Class"]("hide"),i.html(""),_.each(t,function(e){i.append(' <span data-tag="'+e+'">'+e+"</span>")})}}},initialize:function(e){this.launches=e.launches,this.renderedItems=[],this.render(),this.applyBindings();var t=new l({text:this.model.get("description")});r("[data-js-description]",this.$el).html(t.$el)},render:function(){this.$el.html(o.templates(this.template,{nameWidth:this.getNameCellWidth(),item:this.model.toJSON()})),this.renderItems()},getNameCellWidth:function(){var e=this.launches.length;if(e>10)return 8;if(e>5)return 20;if(e>=3&&e<=5)return 35;if(e<=2)return 50},renderItems:function(){var e=this.model.get("launches");_.each(this.launches.models,function(t){var n=t.get("launchNumber"),r={launchNumber:n,parent_launch_status:t.get("launchStatus")},i=e[n];i?i.length==1?r=_.extend(r,this.updateDataForModel(i[0])):r.status="MANY":r.status="NOT_FOUND";var s=new f({launchesSize:this.launches.length,container:this.$el,cellWidth:(100-this.getNameCellWidth())/(this.launches.length||1),model:new a(r)});this.renderedItems.push(s)},this)},updateDataForModel:function(e){return e.issue&&(e.issue=JSON.stringify(e.issue)),e.tags&&(e.tags=JSON.stringify(e.tags)),e},onClickName:function(e){e.preventDefault();var t=r(e.currentTarget).attr("href");t&&c.router.navigate(t,{trigger:!0})},destroy:function(){while(this.renderedItems.length)this.renderedItems.pop().destroy();this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return h}),define("launches/historyGrid/HistoryTableView",["require","exports","module","jquery","backbone-epoxy","util","launches/historyGrid/HistoryItemView","app","baron"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone-epoxy"),s=e("util"),o=e("launches/historyGrid/HistoryItemView"),u=e("app");e("baron");var a=u.getInstance(),f=i.View.extend({template:"tpl-launch-history-table",events:{},initialize:function(e){this.filterModel=e.filterModel,this.launches=e.launches,this.items=e.items,this.renderedItems=[],this.render()},render:function(){this.$el.html(s.templates(this.template,{launches:this.launches.toJSON()})),this.renderItems(),r("[data-js-history-scroll]",this.$el).baron({direction:"h"})},renderItems:function(){var e=r("[data-js-history-content]",this.$el);_.each(this.items.models,function(t){var n=new o({model:t,launches:this.launches});e.append(n.$el),this.renderedItems.push(n)},this)},destroy:function(){while(this.renderedItems.length)this.renderedItems.pop().destroy();this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return f}),define("launches/historyGrid/HistoryBodyView",["require","exports","module","jquery","backbone","backbone-epoxy","util","localization","coreService","launches/historyGrid/HistoryTableView","filters/FilterModel","filterEntities/FilterEntities","app"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("localization"),a=e("coreService"),f=e("launches/historyGrid/HistoryTableView"),l=e("filters/FilterModel"),c=e("filterEntities/FilterEntities"),h=e("app"),p=h.getInstance(),d=s.View.extend({template:"tpl-launch-history-body",events:{"click [data-js-load-more]":"onLoadMore"},initialize:function(e){this.filterModel=e.filterModel,this.collectionItems=e.collectionItems,this.conrol=e.control,this.depth="10",this.qty=p.historyItemsToLoad,this.ids=_.map(this.collectionItems.models,function(e){return e.get("id")}),this.resetGrid(),this.depthFilterModel=new c.EntityDropDownModel({name:"History Depth",id:"history_depth",noConditions:!0,required:!0,options:[{value:"3",name:"3"},{value:"5",name:"5"},{value:"10",name:"10"},{value:"15",name:"15"},{value:"20",name:"20"},{value:"25",name:"25"},{value:"30",name:"30"}],value:this.depth}),this.listenTo(this.depthFilterModel,"change:value",this.onChangeDepth),this.listenTo(this.conrol,"refresh::history",this.onRefreshGrid),this.render(),this.load()},render:function(){this.$el.html(o.templates(this.template,{})),r("[data-js-depth-filter]",this.$el).html((new this.depthFilterModel.view({model:this.depthFilterModel})).$el)},updateHistory:function(){this.table=new f({el:r("[data-js-history-table]",this.$el),launches:this.launches,items:this.items})},load:function(){this.table&&this.table.destroy(),this.toggleIsLoad("show"),a.getHistoryData(this.getItemsForLoad(),this.depth).done(function(e){this.parseHistoryItems(e),this.loaded+=this.toLoadIds.length,this.updateHistory(),this.toggleIsLoad("hide")}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"loadHistory")})},parseHistoryItems:function(e){var t=[],n=[];_.forEach(e,function(e){var r=e.launchNumber;_.forEach(e.resources,function(e){var t={name:e.name,description:e.description||"",tags:e.tags,launches:{}};t.launches[r]=[e];if(_.isEmpty(n))n.push(t);else{var i=_.find(n,function(e){var n=e.name===t.name,r=e.description===t.description,i=_.size(e.tags)===_.size(t.tags)&&_.every(e.tags,function(e){return _.contains(t.tags,e)});return n&&r&&i});i?i.launches[r]?i.launches[r].push(e):i.launches[r]=[e]:n.push(t)}}),delete e.resources,t.push(e)}),t.sort(function(e,t){return parseInt(e.startTime)-parseInt(t.startTime)}),this.launches.add(t,{merge:!0}),this.items.add(n,{merge:!0})},onLoadMore:function(e){r(e.currentTarget).hasClass("disabled")||(e.preventDefault(),this.load())},resetGrid:function(){this.launches=new i.Collection,this.items=new i.Collection,this.loaded=0,this.toLoadIds=[]},onRefreshGrid:function(){this.resetGrid(),this.load()},onChangeDepth:function(){var e=this.depthFilterModel.getInfo();this.depth=e.value,this.onRefreshGrid()},getItemsForLoad:function(){return this.toLoadIds=this.ids.slice(this.loaded,this.loaded+this.qty),this.toLoadIds},toggleIsLoad:function(e){var t=r("[data-js-load-more]",this.$el),n=r("[data-js-history-loader]",this.$el);t[(e=="hide"?"remove":"add")+"Class"]("disabled"),n[e](),this.loaded>=this.ids.length&&t.hide()},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return d}),define("launches/common/LaunchSuiteStepItemCollection",["require","exports","module","backbone","jquery","underscore","filters/SingletonLaunchFilterCollection","filters/FilterModel","launches/common/LaunchSuiteStepItemModel","storage/SingletonUserStorage","callService","dataUrlResolver"],function(e,t,n){"use strict";var r=e("backbone"),i=e("jquery"),s=e("underscore"),o=e("filters/SingletonLaunchFilterCollection"),u=e("filters/FilterModel"),a=e("launches/common/LaunchSuiteStepItemModel"),f=e("storage/SingletonUserStorage"),l=e("callService"),c=e("dataUrlResolver"),h=l.call,p=r.Collection.extend({model:a,initialize:function(e){this.listenTo(this,"remove",this.onRemove),this.userStorage=new f,this.pagingPage=1,this.pagingTotalPages=1,this.pagingSize=this.userStorage.get("launchPageSize")||50,this.noChildFilter=!1,this.context=e.context},update:function(e,t,n){this.pagingPage=1,this.pagingTotalPages=1;var r=i.Deferred();this.launchModel=e,this.parentModel=t;var n=n||"",s=this.calculateFilterOptions(n),a=this;if(!e&&!t){var f=new o;f.ready.done(function(){var e=f.where({active:!0})[0];e||(e=new u({temp:!0,id:"all"})),a.setSelfModels(e).done(function(){r.resolve(e)}).fail(function(){r.reject(e)})})}else{s.temp=!0;var l=new u(s);s.selection_parameters||l.set("selection_parameters",'{"is_asc": true, "sorting_column": "start_time"}'),t&&!t.get("has_childs")?(a.reset([{type:"LOG"}]),r.resolve(l)):a.setSelfModels(l).done(function(){r.resolve(l)}).fail(function(){r.reject(l)})}return r.promise()},restorePath:function(){s.each(this.models,function(e){e.restorePath()})},getPathByLogItemId:function(e){var t=this.getParamsFilter();t.push("log.item="+e),this.logOptions.history&&t.push("log.history="+this.logOptions.history);var n=window.location.hash.split("?")[0];return n+"?"+t.join("&")},setPaging:function(e,t){this.pagingPage=e,this.pagingTotalPages=e,t&&(this.pagingSize=t,this.userStorage.set("launchPageSize",t)),this.activateChangeParamsTrigger(),this.load()},setLogItem:function(e,t){if(!this.get(e)){console.log("log item not found");return}this.logOptions={item:e,history:e},!t&&this.trigger("change:log:item",e)},setSelfModels:function(e){return this.stopListening(this.filterModel),this.filterModel=e,this.listenTo(this.filterModel,"change:newEntities",this.changeFilterOptions),this.listenTo(this.filterModel,"change:newSelectionParameters",this.changeSelectionParameters),this.activateChangeParamsTrigger(),this.load()},activateLogsItem:function(e){var t=this.get(e);t&&this.trigger("activate:log",t)},calculateFilterOptions:function(e){var t=e.split("&"),n=[];this.noChildFilter=!1;var r={};return this.logOptions={},this.historyOptions={},s.each(t,function(e){var t=e.split("="),i=t[0].split("."),s=i[0];s=="filter"&&(t[0]=="filter.eq.has_childs"&&(this.noChildFilter=!0),n.push({condition:i[1],filtering_field:i[2],value:decodeURIComponent(t[1])}));if(s=="page")if(i[1]=="page")this.pagingPage=parseInt(t[1]);else if(i[1]=="size")this.pagingSize=parseInt(t[1]);else if(i[1]=="sort"){var o=t[1].split("%2C");r.selection_parameters=JSON.stringify({sorting_column:o[0],is_asc:o[1]=="ASC"})}i.shift();var u=i.join(".");s=="log"&&(this.logOptions[u]=t[1]),s=="history"&&(this.historyOptions[u]=t[1])},this),r.entities=JSON.stringify(n),r},changeSelectionParameters:function(){this.load(),this.activateChangeParamsTrigger()},changeFilterOptions:function(e,t){if(t!=""||!e.changed.entities)this.pagingPage=1,this.load();this.activateChangeParamsTrigger()},getInfoByCollection:function(){var e=i.Deferred(),t=this;return this.checkType().done(function(n){e.resolve({filterModel:t.filterModel,parentModel:t.parentModel,launchModel:t.launchModel,type:n})}),e},getInfoLog:function(){return this.logOptions},setInfoLog:function(e){this.logOptions=e},checkType:function(e){var e=e||this.toJSON(),t=i.Deferred(),n=this;if(this.logOptions.item)return t.resolve("LOG"),t;if(this.historyOptions.item)return t.resolve("HISTORY"),t;var r={};s.each(e,function(e){r[e.type]=!0});var o=s.keys(r);if(o.length==0)this.launchModel?this.noChildFilter?t.resolve("STEP"):this.launchModel&&!this.parentModel?t.resolve("SUITE"):this.loadSuiteStepChildren().done(function(e){e.content.length?n.checkType(e.content).done(function(e){t.resolve(e)}):t.resolve("STEP")}):t.resolve("LAUNCH");else if(o.length==1)t.resolve(o[0]||"LAUNCH");else{var u=["SUITE","STORY","TEST","SCENARIO","STEP","BEFORE_CLASS","BEFORE_GROUPS","BEFORE_METHOD","BEFORE_SUITE","BEFORE_TEST","AFTER_CLASS","AFTER_GROUPS","AFTER_METHOD","AFTER_SUITE","AFTER_TEST"];t.resolve(o[0])}return t},getParamsFilter:function(e){var t=[];return t.push("page.page="+this.pagingPage),t.push("page.size="+this.pagingSize),e?t:(t=t.concat(this.filterModel.getOptions()),t)},activateChangeParamsTrigger:function(){if(!this.historyOptions.item&&!this.logOptions.item){this.launchModel||this.trigger("change:params",this.getParamsFilter(!0).join("&"));var e=this.getParamsFilter();if(this.launchModel){var t=[];s.each(this.logOptions,function(e,n){t.push("log."+n+"="+e)}),t=t.concat(e),this.trigger("change:params",t.join("&"))}}},load:function(e){var t=this,n=c.getGridUrl("launch",this.context=="userdebug"),r=this.getParamsFilter();this.launchModel&&(n=c.getGridUrl("suit"),!this.launchModel.get("failLoad")&&r.push("filter.eq.launch="+this.launchModel.get("id")),this.parentModel?(this.noChildFilter&&r.push("filter.in.path="+this.parentModel.get("id")),!this.noChildFilter&&r.push("filter.eq.parent="+this.parentModel.get("id"))):!this.noChildFilter&&r.push("filter.size.path=0")),r&&r.length&&(n+="?"+r.join("&")),this.request&&this.request.abort(),this.trigger("loading",!0),this.reset([]);var s=i.Deferred();return this.request=h("GET",n).done(function(n){if(!n.content.length&&e&&n.page.totalPages!=0)return t.setPaging(n.page.totalPages),!1;t.pagingData=n.page,t.parse(n),t.afterLoadActions(),s.resolve(n)}).fail(function(e,n){n=="abort"?s.resolve():s.reject(),t.afterLoadActions()}),s},afterLoadActions:function(){this.logOptions&&this.logOptions.item&&this.trigger("set:log:item",this.logOptions.item),this.trigger("loading",!1)},loadSuiteStepChildren:function(){var e=c.getGridUrl("suit")+"?filter.eq.launch="+this.launchModel.get("id")+"&filter.eq.parent="+this.parentModel.get("id");return h("GET",e)},onRemove:function(){this.load(this.lastParams)},validateForAllCases:function(){var e=this.filterModel.getEntitiesObj(),t=s.find(e,function(e){return e.filtering_field=="has_childs"});return!!t},parse:function(e){var t=this;s.each(e.content,function(n){n.issue&&(n.issue=JSON.stringify(n.issue)),n.tags&&(n.tags=JSON.stringify(n.tags)),t.launchModel?(n.parent_launch_owner=t.launchModel.get("owner"),n.parent_launch_status=t.launchModel.get("status"),n.parent_launch_isProcessing=t.launchModel.get("isProcessing"),n.parent_launch_number=t.launchModel.get("number"),n.parent_launch_investigate=t.launchModel.getToInvestigate()):s.each(e.content,function(e){e.type="LAUNCH"})});if(this.validateForAllCases()){var n=s(e.content).chain().sortBy(function(e){var t=s.keys(e.path_names);return e.path_names[t[1]]}).sortBy(function(e){var t=s.keys(e.path_names);return e.path_names[t[0]]}).value();this.reset(e.content)}else this.reset(e.content)}});return p}),define("modals/modalLaunchesMerge",["require","exports","module","filters/SingletonLaunchFilterCollection","jquery","underscore","modals/_modalView","app","util","coreService","model/SingletonAppModel"],function(e,t,n){"use strict";var r=e("filters/SingletonLaunchFilterCollection"),i=e("jquery"),s=e("underscore"),o=e("modals/_modalView"),u=e("app"),a=e("util"),f=e("coreService"),l=e("model/SingletonAppModel"),c=u.getInstance(),h=new l,p=o.extend({template:"tpl-modal-launches-merge",className:"modal-launches-merge",initialize:function(e){this.launches=e.items,this.ids=[],this.walkThroughLaunches(),this.render()},events:{"click [data-js-submit]":"submit","change #mergeName":"validate","change #mergeDescription":"validate","click [data-js-close]":"onClickClose","click [data-js-cancel]":"onClickCancel"},walkThroughLaunches:function(){this.renderObject={description:[],endTime:0,startTime:Number.POSITIVE_INFINITY,tags:[],dateFormat:a.dateFormat,owner:c.userModel.get("name").replace("_"," ").capitalize(),name:this.launches[0].get("name")},s.forEach(this.launches,function(e){this.renderObject.tags.push(e.getTags());var t=e.get("start_time"),n=e.get("end_time"),r=e.get("description");t<this.renderObject.startTime&&(this.renderObject.startTime=t,this.lastLaunch=e.get("id")),n>this.renderObject.endTime&&(this.renderObject.endTime=n),this.ids.push(e.get("id")),r&&this.renderObject.description.push(r.trim())},this),this.renderObject.description=this.renderObject.description.join(c.commentsSeparator),this.commonTags=s.intersection.apply(this,this.renderObject.tags),this.renderObject.tags=s.union.apply(this,this.renderObject.tags)},render:function(){this.$el.html(a.templates(this.template,this.renderObject)),this.setupAnchors(),a.bootValidator(this.$name,{validator:"minMaxRequired",type:"mergeName",min:3,max:256}),a.bootValidator(this.$description,{validator:"minMaxNotRequired",type:"launchDescription",min:0,max:1024}),this.$description.trigger("validate"),a.setupSelect2Tags(this.$tags),this.validate(),this.delegateEvents()},onKeySuccess:function(){this.submit()},setupAnchors:function(){this.$actionBtn=i("[data-js-submit]",this.$el),this.$name=i("#mergeName",this.$el),this.$description=i("[data-js-description]",this.$el),this.$loader=i(".preloader",this.$el),this.$tags=i("#mergeTags",this.$el),this.$extendWithOriginal=i("#extendWithOriginal",this.$el)},validate:function(){var e=i(".has-error",this.$el).length?!1:!0,t=e?"remove":"add";this.$actionBtn[t+"Class"]("disabled")},onClickClose:function(){c.trackingDispatcher.trackEventNumber(80)},onClickCancel:function(){c.trackingDispatcher.trackEventNumber(81)},submit:function(){if(!i(".has-error",this.$el).length){c.trackingDispatcher.trackEventNumber(82);var e={tags:this.$tags.val().trim().split(","),start_time:(new Date).valueOf(),name:this.$name.val(),description:this.$description.val(),launches:this.ids,extendSuitesDescription:this.$extendWithOriginal.is(":checked")},t=this;this.$loader.show(),f.mergeLaunches(e).done(function(e){t.successClose(e,t.lastLaunch),a.ajaxSuccessMessenger("mergeLaunches"),c.router.navigate("#"+h.get("projectId")+"/launches/all/"+e.id,{trigger:!0})}).fail(function(e){a.ajaxFailMessenger(e,"mergeLaunches"),t.hide()})}}});return p}),define("launches/multipleActions/mergeAction",["require","exports","module","jquery","underscore","util","core/components","coreService","app","backbone-epoxy","modals/modalLaunchesMerge"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("util"),o=e("core/components"),u=e("coreService"),a=e("app"),f=e("backbone-epoxy"),l=e("modals/modalLaunchesMerge"),c=a.getInstance(),h=f.View.extend({initialize:function(e){var t=new l({items:e.items});this.async=t.show()},getAsync:function(){return this.async}});return h}),define("modals/modalLaunchesCompare",["require","exports","module","filters/SingletonLaunchFilterCollection","jquery","underscore","modals/_modalView","app","util","coreService","widget/widgetsConfig","widgets"],function(e,t,n){"use strict";var r=e("filters/SingletonLaunchFilterCollection"),i=e("jquery"),s=e("underscore"),o=e("modals/_modalView"),u=e("app"),a=e("util"),f=e("coreService"),l=e("widget/widgetsConfig"),c=e("widgets"),h=u.getInstance(),p=o.extend({template:"tpl-modal-launches-compare",className:"modal-launches-compare",initialize:function(e){this.ids=s.map(e.items,function(e){return e.get("id")}),this.$el.addClass("load"),this.render(),this.load()},load:function(){var e=this;f.getCompare(this.ids.join(",")).done(function(t){e.$el.removeClass("load"),e.createChart(t)}).fail(function(t){a.ajaxFailMessenger(t,"errorUpdateWidget"),e.hide()})},onKeySuccess:function(){return},createChart:function(e){var t="launches_comparison_chart",n=i("[data-js-widget-content]",this.$el),r=l.getInstance(),o=r.widgetTypes[t].staticCriteria;delete o.statistics$defects$no_defect$total,this.widget=new c.LaunchesComparisonChart({container:n,param:{gadget:t,content:e,content_fields:s.keys(r.widgetTypes[t].staticCriteria),height:h.defaultWidgetHeight}}),this.$el.addClass("ready");var u=this;setTimeout(function(){u.widget.render()},500)},render:function(){this.$el.html(a.templates(this.template,{}))}});return p}),define("launches/multipleActions/compareAction",["require","exports","module","jquery","underscore","backbone-epoxy","util","core/components","coreService","app","modals/modalLaunchesCompare"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("backbone-epoxy"),o=e("util"),u=e("core/components"),a=e("coreService"),f=e("app"),l=e("modals/modalLaunchesCompare"),c=f.getInstance(),h=s.View.extend({initialize:function(e){var t=new l({items:e.items});this.async=t.show()},getAsync:function(){return this.async}});return h}),define("launches/multipleActions/editDefectAction",["require","exports","module","jquery","underscore","backbone-epoxy","util","core/components","coreService","app","modals/modalDefectEditor"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("backbone-epoxy"),o=e("util"),u=e("core/components"),a=e("coreService"),f=e("app"),l=e("modals/modalDefectEditor"),c=f.getInstance(),h=s.View.extend({initialize:function(e){var t=this;this.async=r.Deferred();var n=new l({items:e.items});n.show().always(function(){t.async.resolve()})},getAsync:function(){return this.async}});return h}),define("launches/LaunchMultipleSelect",["require","exports","module","filters/SingletonLaunchFilterCollection","jquery","underscore","backbone","backbone-epoxy","app","launches/common/LaunchSuiteStepItemModel","util","launches/multipleActions/mergeAction","launches/multipleActions/compareAction","launches/multipleActions/editDefectAction","launches/multipleActions/forceFinishAction","launches/multipleActions/removeAction","launches/multipleActions/changeModeAction","launches/multipleActions/postBugAction","launches/multipleActions/loadBugAction"],function(e,t,n){"use strict";var r=e("filters/SingletonLaunchFilterCollection"),i=e("jquery"),s=e("underscore"),o=e("backbone"),u=e("backbone-epoxy"),a=e("app"),f=e("launches/common/LaunchSuiteStepItemModel"),l=e("util"),c=e("launches/multipleActions/mergeAction"),h=e("launches/multipleActions/compareAction"),p=e("launches/multipleActions/editDefectAction"),d=e("launches/multipleActions/forceFinishAction"),v=e("launches/multipleActions/removeAction"),m=e("launches/multipleActions/changeModeAction"),g=e("launches/multipleActions/postBugAction"),y=e("launches/multipleActions/loadBugAction"),b=a.getInstance(),w=u.View.extend({className:"multi-select-item",template:"tpl-launch-multiple-selected-item",events:{"click [data-ja-close-item]":"onClickClose"},bindings:{"[data-js-item-name]":'text: format("$1$2", name, numberText)',":el":'attr: {title: invalidMessage}, classes: {"error-validate": invalidMessage}'},initialize:function(){this.render(),this.listenTo(this.model,"remove",this.destroy)},render:function(){this.$el.html(l.templates(this.template,{}))},onClickClose:function(){this.model.get("invalidMessage")?b.trackingDispatcher.trackEventNumber(69):b.trackingDispatcher.trackEventNumber(67),this.model.set({select:!1,invalidMessage:""})},destroy:function(){this.$el.remove(),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}}),E=o.Collection.extend({model:f}),S=u.View.extend({template:"tpl-launch-multiple-selected",events:{"click [data-ja-close]":"onClickClose","click [data-js-proceed]":"onClickProceed"},actionValidators:{merge:function(){s.each(this.collection.models,function(e){e.set({invalidMessage:e.validate.merge()})})},compare:function(){s.each(this.collection.models,function(e){e.set({invalidMessage:""})})},editdefect:function(){s.each(this.collection.models,function(e){e.set({invalidMessage:e.validate.editDefect()})})},changemode:function(){s.each(this.collection.models,function(e){e.set({invalidMessage:e.validate.changeMode()})})},forcefinish:function(){s.each(this.collection.models,function(e){e.set({invalidMessage:e.validate.forceFinish()})})},remove:function(){s.each(this.collection.models,function(e){e.set({invalidMessage:e.validate.remove()})})},postbug:function(){s.each(this.collection.models,function(e){e.set({invalidMessage:e.validate.postbug()})})},loadbug:function(){s.each(this.collection.models,function(e){e.set({invalidMessage:e.validate.loadbug()})})}},actionCall:{merge:function(){var e=this;this.mergeAction=new c({items:this.collection.models}),this.mergeAction.getAsync().done(function(){e.collectionItems.load(),e.mergeAction=null,e.reset()})},compare:function(){var e=this;this.compareAction=new h({items:this.collection.models}),this.compareAction.getAsync().done(function(){e.compareAction=null,e.reset()})},editdefect:function(){var e=this;this.editDefectAction=new p({items:this.collection.models}),this.editDefectAction.getAsync().done(function(){e.editDefectAction=null,e.reset()})},changemode:function(){var e=this;m({items:this.collection.models}).done(function(){e.collectionItems.load(!0),e.reset()})},forcefinish:function(){var e=this;d({items:this.collection.models}).done(function(){e.collectionItems.load(),e.reset()})},remove:function(){var e=this;v({items:this.collection.models}).done(function(){e.compareAction=null,e.collectionItems.load(!0);var t=e.collectionItems.parentModel||e.collectionItems.launchModel;t&&t.updateData(!0),e.reset()})},postbug:function(){var e=this;g({items:this.collection.models}).done(function(){e.reset()})},loadbug:function(){var e=this;y({items:this.collection.models}).done(function(){e.reset()})}},initialize:function(e){this.collectionItems=e.collectionItems,this.collection=new E,this.activate=!1,this.render(),this.listenTo(this.collectionItems,"change:select",this.onChangeSelect),this.listenTo(this.collectionItems,"reset",this.onResetCollectionItems),this.listenTo(this.collection,"change:select",this.onUnCheckItem),this.listenTo(this.collection,"add",this.onAddItem),this.currentAction=""},onChangeSelect:function(e,t){t?!this.collection.get(e.get("id"))&&this.collection.add(e):this.collection.remove(e.get("id")),this.checkStatus()},onResetCollectionItems:function(){var e=this;s.each(this.collection.models,function(t){var n=e.collectionItems.get(t.get("id"));n&&n.set({select:!0})})},checkStatus:function(){this.collection.models.length&&!this.activate&&(this.trigger("activate:true"),this.activate=!0),!this.collection.models.length&&this.activate&&(this.trigger("activate:false"),this.activate=!1)},onUnCheckItem:function(e){var t=this.collectionItems.get(e.get("id"));e.set({invalidMessage:""}),t||(this.collection.remove(e),this.checkStatus()),this.currentAction&&(this.actionValidators[this.currentAction].call(this),this.checkInvalidStatus())},checkInvalidStatus:function(){var e=!0;s.each(this.collection.models,function(t){if(t.get("invalidMessage")!="")return e=!1,!1});if(e)this.$el.removeClass("invalid-state"),this.currentAction="";else{var t=i("[data-js-proceed]",this.$el),n=s.every(this.collection.toJSON(),function(e){return e.invalidMessage})?"addClass":"removeClass";t[n]("disabled"),this.$el.addClass("invalid-state")}return e},setAction:function(e){this.actionValidators[e]&&(this.actionValidators[e].call(this),this.currentAction=e,this.checkInvalidStatus()&&this.actionCall[e].call(this))},reset:function(){while(this.collection.models.length)this.collection.at(0).set({select:!1})},onClickProceed:function(){b.trackingDispatcher.trackEventNumber(70);var e=s.filter(this.collection.models,function(e){return e.get("invalidMessage")!=""});s.each(e,function(e){e.set({select:!1})}),this.setAction(this.currentAction)},onClickClose:function(){b.trackingDispatcher.trackEventNumber(68),this.reset()},render:function(){this.$el.html(l.templates(this.template,{}))},onAddItem:function(e){i("[data-js-multi-select-items]",this.$el).append((new w({model:e})).$el)},destroy:function(){this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return S}),define("launches/LaunchCrumbs",["require","exports","module","filters/SingletonLaunchFilterCollection","jquery","underscore","backbone","backbone-epoxy","app","util","filters/FilterModel","callService","dataUrlResolver","launches/common/LaunchSuiteStepItemModel"],function(e,t,n){"use strict";var r=e("filters/SingletonLaunchFilterCollection"),i=e("jquery"),s=e("underscore"),o=e("backbone"),u=e("backbone-epoxy"),a=e("app"),f=e("util"),l=e("filters/FilterModel"),c=e("callService"),h=e("dataUrlResolver"),p=c.call,d=e("launches/common/LaunchSuiteStepItemModel"),v=a.getInstance(),m=u.Model.extend({defaults:{id:"",name:"",url:"",partUrl:"",level:"",type:"FILTER",isProcessing:!1,number:"",listView:!1,failLoad:!1,nextModelId:""},computeds:{fullName:{deps:["name","number"],get:function(e,t){return t?e+" #"+t:e}},clearUrl:{deps:["url"],get:function(e){return e.split("|")[0]}}},initialize:function(){this.ready=i.Deferred();var e=this;this.listenTo(this,"change:id",this.onChangeId),this.updateData()},getToInvestigate:function(){if(this.get("parent_launch_investigate"))return this.get("parent_launch_investigate");var e=this.get("statistics");return e&&e.defects&&e.defects.to_investigate?e.defects.to_investigate.total:0},onChangeId:function(){this.ready&&this.ready.resolve(),this.ready=i.Deferred(),this.updateData()},updateData:function(e){var t=this;if(this.get("level")=="filter"){if(this.get("id")=="all")this.set({name:"All"});else{var n=new r;n.ready.done(function(){var e=n.get(t.get("id"));t.set({name:e.get("name"),failLoad:!1})})}this.ready.resolve()}else{if(!e){if(this.collection.cacheModel&&this.collection.cacheModel.get("id")==this.get("id")){this.set(this.collection.cacheModel.toJSON()),this.ready.resolve();return}if(this.collection.lastLogItem&&this.collection.lastLogItem==this.get("id")){this.ready.resolve();return}}var i=h.getProjectBase()+"/"+this.get("level")+"/"+this.get("id");p("GET",i).done(function(e){e.type=e.type||"LAUNCH",e.failLoad=!1,t.set(e),t.ready.resolve()}).fail(function(){t.set({failLoad:!0}),t.ready.resolve()})}}}),g=o.Collection.extend({model:m,initialize:function(e,t){this.context=t.context},updateUrlModels:function(){var e="";s.each(this.models,function(t){e+=t.get("partUrl"),t.set({url:e})})},update:function(e,t){this.cacheModel=t;var n=i.Deferred(),r=[];s.each(this.models,function(e){r.push(e.get("id"))});for(var o=0;o<Math.max(e.length,r.length);o++)if(e[o]){var u=!1,a="",f="item",c=e[o].split("|"),h=c[0];o==0?(f="filter",a=(new l({id:e[0],context:this.context})).get("url")):(a+="/"+h,c[1]&&(a+="|"+c[1]+"?"+decodeURIComponent(c[1]),u=!0),f=o==1?"launch":"item"),r[o]?this.get(r[o]).set({id:h,level:f,partUrl:a,listView:u}):this.add({id:h,level:f,partUrl:a,listView:u}),o>0&&this.models[o-1].set({nextModelId:h})}else this.remove(r[o]);this.updateUrlModels();var p=this.models[this.models.length-1],d=null,v=null;if(this.models.length<=1)this.trigger("lost:launch",!1),n.resolve(d,v);else{var m=this;this.models[1].ready.always(function(){d=m.models[1],m.models.length>2?p.ready.always(function(){v=p,d.get("failLoad")?p.get("failLoad")?n.reject(1):m.checkLostLaunch(n,d,v):(m.trigger("lost:launch",!1),p.get("failLoad")?n.reject(2):n.resolve(d,v))}):d.get("failLoad")?n.reject(1):n.resolve(d,v)})}return n.promise()},checkLostLaunch:function(e,t,n){var r=this;i.when.apply(this,s.map(this.models,function(e){return e.ready})).always(function(){var t=r.where({failLoad:!0});t.length==1&&t[0].get("level")=="launch"&&r.models.length>2&&r.models[1].set("id",r.models[2].get("launchId")).ready.done(function(){var t=r.models[1].get("partUrl").split("|");t[0]="/"+r.models[1].get("id"),r.models[1].set({partUrl:t.join("|")}),r.updateUrlModels(),e.resolve(r.models[1],n),r.trigger("lost:launch",!0)}).fail(function(){e.reject(1)})})}}),y=u.View.extend({tagName:"li",className:"crumb",template:"tpl-launch-crumb",bindings:{"[data-js-name]":"text: fullName","[data-js-link]":"text: fullName, attr: {href: url}","[data-js-auto-analize]":"classes: {visible: isProcessing}","[data-js-list-view-icon]":"classes: {hide: not(listView)}",":el":'classes: {"fail-load": failLoad}'},initialize:function(){this.render(),this.listenTo(this.model,"remove",this.onRemove)},render:function(){this.$el.html(f.templates(this.template,{failLoad:this.model.get("failLoad")}))},onRemove:function(){this.destroy()},destroy:function(){this.$el.remove(),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}}),b=u.View.extend({template:"tpl-launch-crumbs",events:{"click [data-js-switch-mode]":"onClickSwitchMode","click [data-js-restore-lost-path]":"onClickRestorePath"},initialize:function(e){var t=this;this.context=e.context,this.lastModel=null,this.collection=new g([],{context:this.context}),this.listenTo(this.collection,"add",this.onAddCrumb),this.listenTo(this.collection,"lost:launch",function(e){e?i("[data-js-crumbs-container]",t.$el).addClass("lost-path"):i("[data-js-crumbs-container]",this.$el).removeClass("lost-path")}),this.render()},render:function(){this.$el.html(f.templates(this.template,{}))},cacheItem:function(e){this.cacheModel=e},update:function(e,t){i("#breadCrumbs",this.$el).addClass("load");var n=this;this.collection.update(e,this.cacheModel).done(function(e,r){i("#breadCrumbs",n.$el).removeClass("load"),n.lastModel=r,n.trigger("change:path",e,r,t,n.collection.models[n.collection.models.length-1].get("nextModelId"))}).fail(function(e){n.trigger("fail:load",e)})},setLogItem:function(e,t){e?(this.collection.lastLogItem&&this.collection.remove(this.collection.lastLogItem),this.collection.lastLogItem=e.get("id"),this.collection.add(e.toJSON())):(this.collection.lastLogItem=t,this.collection.add({id:t,failLoad:!0}));var n=this.collection.models;n.length>1&&n[n.length-2].set({nextModelId:t})},onAddCrumb:function(e){i("[data-js-crumbs-container]",this.$el).append((new y({model:e})).$el)},onClickSwitchMode:function(){i("[data-js-crumbs-container]",this.$el).toggleClass("min-size")},onClickRestorePath:function(){var e=window.location.hash.split("?"),t=e[1]?"?"+e[1]:"";v.router.navigate(this.lastModel.get("url")+t,{trigger:!1}),this.trigger("restore:path"),i("[data-js-crumbs-container]",this.$el).removeClass("lost-path")},destroy:function(){this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return b}),define("launches/LaunchBodyView",["require","exports","module","defectType/SingletonDefectTypeCollection","jquery","backbone","backbone-epoxy","app","launches/launchLevel/LaunchControlView","launches/launchLevel/LaunchTableView","launches/suiteLevel/SuiteControlView","launches/suiteLevel/SuiteTableView","launches/stepLevel/StepControlView","launches/stepLevel/StepTableView","launches/logLevel/LogControlView","launches/logLevel/LogBodyView","launches/historyGrid/HistoryControlView","launches/historyGrid/HistoryBodyView","launches/common/LaunchSuiteStepItemCollection","launches/LaunchMultipleSelect","launches/LaunchCrumbs","util","core/StickyHeader"],function(e,t,n){"use strict";var r=e("defectType/SingletonDefectTypeCollection"),i=e("jquery"),s=e("backbone"),o=e("backbone-epoxy"),u=e("app"),a=e("launches/launchLevel/LaunchControlView"),f=e("launches/launchLevel/LaunchTableView"),l=e("launches/suiteLevel/SuiteControlView"),c=e("launches/suiteLevel/SuiteTableView"),h=e("launches/stepLevel/StepControlView"),p=e("launches/stepLevel/StepTableView"),d=e("launches/logLevel/LogControlView"),v=e("launches/logLevel/LogBodyView"),m=e("launches/historyGrid/HistoryControlView"),g=e("launches/historyGrid/HistoryBodyView"),y=e("launches/common/LaunchSuiteStepItemCollection"),b=e("launches/LaunchMultipleSelect"),w=e("launches/LaunchCrumbs"),E=e("util"),S=e("core/StickyHeader"),x=u.getInstance(),T=o.View.extend({template:"tpl-launch-body",initialize:function(e){this.context=e.context,this.render(),this.crumbs=new w({el:i("[data-js-crumbs]",this.$el),context:this.context}),this.currentLevel="",this.collectionItems=new y({context:e.context}),this.multipleSelected=new b({el:i("[data-js-multiple-selected]",this.$el),collectionItems:this.collectionItems}),this.listenTo(this.collectionItems,"change:params",this.onChangeParamsFilter),this.listenTo(this.collectionItems,"drill:item",this.onDrillItem),this.listenTo(this.collectionItems,"change:log:item",this.onChangeLogItem),this.listenTo(this.collectionItems,"set:log:item",this.onSetLogItem),this.listenTo(this.crumbs,"change:path",this.onChangeItemCrumbs),this.listenTo(this.crumbs,"restore:path",this.onRestoreItemCrumbs),this.listenTo(this.crumbs,"fail:load",this.onFailCrumbs),this.listenTo(this.multipleSelected,"activate:true",this.onActivateMultipleSelect),this.listenTo(this.multipleSelected,"activate:false",this.onDisableMultipleSelect)},onActivateMultipleSelect:function(){this.trigger("change:level","MULTIPLE"),this.body&&this.body.destroyStickyHeader(),this.stickyHeader&&this.stickyHeader.destroy(),i("[data-js-header-bar]",this.$el).addClass("multiple-select"),this.stickyHeader=new S({fixedBlock:i("[data-js-header-bar]",this.$el),topMargin:0}),this.control&&this.control.activateMultiple()},onDisableMultipleSelect:function(){this.trigger("change:level",this.currentLevel),i("[data-js-header-bar]",this.$el).removeClass("multiple-select"),this.body&&this.body.setupStickyHeader(),this.stickyHeader&&this.stickyHeader.destroy(),this.control&&this.control.disableMultiple()},onMultiAction:function(e){this.multipleSelected.setAction(e)},onChangeParamsFilter:function(e){var t=window.location.hash.split("?")[0];setTimeout(function(){x.router.navigate(t+"?"+e,{trigger:!1,replace:!0})})},onChangeLogItem:function(e){this.crumbs.setLogItem(this.collectionItems.get(e)),x.router.navigate(this.collectionItems.getPathByLogItemId(e),{trigger:!1})},onSetLogItem:function(e){var t=this.collectionItems.get(e);this.crumbs.setLogItem(t,e)},onDrillItem:function(e){this.crumbs.cacheItem(e)},onChangeItemCrumbs:function(e,t,n,r){var s=this;this.collectionItems.update(e,t,n).done(function(){s.onChangePathId()}).always(function(){i("[data-js-preloader-launch-body]",s.$el).removeClass("rp-display-block"),r&&n&&s.body&&s.body.activateNextId&&s.body.activateNextId(r)}).fail(function(){x.router.show404Page()})},onRestoreItemCrumbs:function(){this.collectionItems.restorePath()},onFailCrumbs:function(e){i("[data-js-preloader-launch-body]",this.$el).removeClass("rp-display-block");switch(e){case 1:i("[data-js-launch-not-found]",this.$el).addClass("rp-display-block"),this.trigger("change:level","SUITE"),this.currentLevel="SUITE";break;case 2:i("[data-js-item-not-found]",this.$el).addClass("rp-display-block"),this.trigger("change:level","SUITE"),this.currentLevel="SUITE"}},render:function(){this.$el.html(E.templates(this.template,{}))},update:function(e,t){this.multipleSelected.reset(),this.body&&this.body.destroy(),this.control&&this.stopListening(this.control)&&this.control.destroy(),i("[data-js-preloader-launch-body]",this.$el).addClass("rp-display-block"),i("[data-js-launch-not-found]",this.$el).removeClass("rp-display-block"),i("[data-js-item-not-found]",this.$el).removeClass("rp-display-block"),this.crumbs.update(e,t)},onChangePathId:function(){this.collectionItems.getInfoByCollection().done(function(e){switch(e.type){case"LAUNCH":this.renderLaunchLevel(e.filterModel),this.trigger("change:level","LAUNCH"),this.currentLevel="LAUNCH";break;case"SUITE":case"STORY":case"TEST":case"SCENARIO":this.renderSuiteLevel(e),this.trigger("change:level","SUITE"),this.currentLevel="SUITE";break;case"STEP":case"BEFORE_CLASS":case"BEFORE_GROUPS":case"BEFORE_METHOD":case"BEFORE_SUITE":case"BEFORE_TEST":case"AFTER_CLASS":case"AFTER_GROUPS":case"AFTER_METHOD":case"AFTER_SUITE":case"AFTER_TEST":this.renderStepLevel(e),this.trigger("change:level","STEP"),this.currentLevel="STEP";break;case"HISTORY":this.trigger("change:level","HISTORY"),this.currentLevel="HISTORY",this.renderHistory(e);break;case"LOG":this.trigger("change:level","LOG"),this.currentLevel="LOG",this.renderLogLevel(e)}this.listenTo(this.control,"multi:action",this.onMultiAction)}.bind(this))},renderLogLevel:function(e){this.control=new d({el:i("[data-js-controls-container]",this.$el),collectionItems:this.collectionItems}),this.body=new v({el:i("[data-js-info-container]",this.$el),context:this.context,collectionItems:this.collectionItems,launchModel:e.launchModel})},renderHistory:function(e){this.control=new m({el:i("[data-js-controls-container]",this.$el),filterModel:e.filterModel,parentModel:e.parentModel||e.launchModel,collectionItems:this.collectionItems}),this.body=new g({el:i("[data-js-info-container]",this.$el),filterModel:e.filterModel,control:this.control,collectionItems:this.collectionItems})},renderStepLevel:function(e){this.control=new h({el:i("[data-js-controls-container]",this.$el),context:this.context,filterModel:e.filterModel,launchModel:e.launchModel,parentModel:e.parentModel||e.launchModel,collectionItems:this.collectionItems}),this.body=new p({el:i("[data-js-info-container]",this.$el),filterModel:e.filterModel,model:e.parentModel||e.launchModel,collectionItems:this.collectionItems})},renderSuiteLevel:function(e){this.control=new l({context:this.context,filterModel:e.filterModel,launchModel:e.launchModel,parentModel:e.parentModel||e.launchModel,el:i("[data-js-controls-container]",this.$el),collectionItems:this.collectionItems}),this.body=new c({el:i("[data-js-info-container]",this.$el),filterModel:e.filterModel,model:e.parentModel||e.launchModel,collectionItems:this.collectionItems})},renderLaunchLevel:function(e){this.control=new a({el:i("[data-js-controls-container]",this.$el),collectionItems:this.collectionItems,context:this.context,filterModel:e}),this.body=new f({el:i("[data-js-info-container]",this.$el),filterModel:e,collectionItems:this.collectionItems})},destroy:function(){this.stickyHeader&&this.stickyHeader.destroy(),this.multipleSelected.destroy(),this.control&&this.control.destroy(),this.body&&this.body.destroy(),this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return T}),define("launches/LaunchPage",["require","exports","module","defectType/SingletonDefectTypeCollection","filters/SingletonLaunchFilterCollection","jquery","backbone","backbone-epoxy","app","launches/LaunchHeaderView","launches/LaunchBodyView"],function(e,t,n){"use strict";var r=e("defectType/SingletonDefectTypeCollection"),i=e("filters/SingletonLaunchFilterCollection"),s=e("jquery"),o=e("backbone"),u=e("backbone-epoxy"),a=e("app"),f=e("launches/LaunchHeaderView"),l=e("launches/LaunchBodyView"),c=a.getInstance(),h=u.View.extend({initialize:function(e){this.contextName=e.contextName,this.launchFilterCollection=new i,this.context=e.context,this.header=new f({el:this.context.getMainView().$header}),this.body=new l({el:this.context.getMainView().$body}),this.listenTo(this.launchFilterCollection,"remove",this.onRemoveFilter),this.listenTo(this.body,"change:level",this.onChangeLevel),this.update({subContext:e.subContext})},render:function(){return this},onChangeLevel:function(e){this.header.setState(e)},update:function(e){this.filterId=e.subContext[1];var t=[this.filterId],n=e.subContext[3];e.subContext[2]&&(t=t.concat(e.subContext[2].split("/"))),t.length<=1&&this.onChangeLevel("LAUNCH");var r=this;this.filterId=="all"?(this.launchFilterCollection.activateFilter(this.filterId),r.body.update(t,n)):this.launchFilterCollection.activateFilter(this.filterId).fail(function(){setTimeout(function(){c.router.navigate(r.header.model.get("url")+(e.subContext[2]||""),{trigger:!0})}),r.header.onChangeActiveFilter()}).done(function(){r.body.update(t,n)})},onRemoveFilter:function(){var e=this;setTimeout(function(){c.router.navigate(e.header.model.get("url"),{trigger:!0})})},destroy:function(){this.header.destroy(),this.body.destroy(),this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return{ContentView:h}}),define("launches/LaunchDebugPage",["require","exports","module","defectType/SingletonDefectTypeCollection","filters/SingletonLaunchFilterCollection","jquery","backbone","backbone-epoxy","app","launches/LaunchHeaderView","launches/LaunchBodyView"],function(e,t,n){"use strict";var r=e("defectType/SingletonDefectTypeCollection"),i=e("filters/SingletonLaunchFilterCollection"),s=e("jquery"),o=e("backbone"),u=e("backbone-epoxy"),a=e("app"),f=e("launches/LaunchHeaderView"),l=e("launches/LaunchBodyView"),c=a.getInstance(),h=u.View.extend({initialize:function(e){this.contextName=e.contextName,this.launchFilterCollection=new i,this.context=e.context,this.body=new l({el:this.context.getMainView().$body,context:this.contextName}),this.listenTo(this.launchFilterCollection,"remove",this.onRemoveFilter),this.listenTo(this.body,"change:level",this.onChangeLevel),this.update({subContext:e.subContext})},render:function(){return this},update:function(e){this.filterId=e.subContext[1];var t=[this.filterId],n=e.subContext[3];e.subContext[2]&&(t=t.concat(e.subContext[2].split("/")));var r=this;this.filterId=="all"?(this.launchFilterCollection.activateFilter(this.filterId),r.body.update(t,n)):this.launchFilterCollection.activateFilter(this.filterId).fail(function(){}).done(function(){r.body.update(t,n)})},destroy:function(){this.body.destroy(),this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return{ContentView:h}}),define("dashboard/DashboardHeaderListItemView",["require","exports","module","util","jquery","backbone-epoxy","app"],function(e,t,n){"use strict";var r=e("util"),i=e("jquery"),s=e("backbone-epoxy"),o=e("app"),u=o.getInstance(),a=s.View.extend({className:"dashboard-header-list-item",tagName:"li",template:"tpl-dashboard-header-list-item",events:{click:"onClickDashboard"},bindings:{"[data-js-dashboard-name]":"text: name",":el":"classes: {active: active}"},initialize:function(){this.render()},render:function(){this.$el.html(r.templates(this.template,{}))},onClickDashboard:function(){u.router.navigate(this.model.get("url"),{trigger:!0})},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove()}});return a}),define("dashboard/DashboardHeaderView",["require","exports","module","util","jquery","backbone-epoxy","components/MainBreadcrumbsComponent","dashboard/DashboardHeaderListItemView","app","localization"],function(e,t,n){"use strict";var r=e("util"),i=e("jquery"),s=e("backbone-epoxy"),o=e("components/MainBreadcrumbsComponent"),u=e("dashboard/DashboardHeaderListItemView"),a=e("app"),f=e("localization"),l=a.getInstance(),c=s.View.extend({className:"dashboard-header",template:"tpl-dashboard-header",events:{"click [data-js-add-dashboard]":"onClickAddDashboard"},initialize:function(e){this.render(),this.listenModel=null,this.mainBreadcrumbs=new o({data:[{name:f.dashboard.allDashboards,link:this.collection.defaultPath}]}),i("[data-js-main-breadcrumbs]",this.$el).append(this.mainBreadcrumbs.$el);var t=this;this.collection.ready.done(function(){t.listenTo(t.collection,"change:active",t.onChangeActive),t.listenTo(t.collection,"reset:active",t.changeActive),t.activateDashboardList(),t.changeActive()})},render:function(){this.$el.html(r.templates(this.template,{}))},activateDashboardList:function(){var e=this;_.each(this.collection.models,function(t){var n=new u({model:t});i("[data-js-dashboard-list-mobile]",e.$el).append(n.$el)})},onClickAddDashboard:function(e){this.collection.createNewDashboard()},onChangeActive:function(e,t){t&&this.changeActive()},changeActive:function(){var e=this.collection.where({active:!0}),t=[{name:f.dashboard.allDashboards,link:this.collection.defaultPath}];this.listenModel&&this.stopListening(this.listenModel);if(e.length){this.listenModel=e[0],i("[data-js-active-dashboard]",this.$el).text(this.listenModel.get("name")),t.push({name:this.listenModel.get("name"),link:""});var n=this;this.listenTo(this.listenModel,"change:name",function(e,t){n.mainBreadcrumbs.collection.models[1].set({name:t}),i("[data-js-active-dashboard]",n.$el).text(t)})}else i("[data-js-active-dashboard]",this.$el).text(f.dashboard.allDashboards);this.mainBreadcrumbs.collection.reset(t)},destroy:function(){this.mainBreadcrumbs&&this.mainBreadcrumbs.destroy(),this.$el.empty(),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return c}),define("dashboard/DashboardListItemView",["require","exports","module","util","jquery","backbone","backbone-epoxy","app","modals/modalEditDashboard","modals/modalConfirm","localization"],function(e,t,n){"use strict";var r=e("util"),i=e("jquery"),s=e("backbone"),o=e("backbone-epoxy"),u=e("app"),a=e("modals/modalEditDashboard"),f=e("modals/modalConfirm"),l=e("localization"),c=u.getInstance(),h=o.View.extend({className:"dashboard-list-item-view",template:"tpl-dashboard-list-item",events:{"click [data-js-edit]":"onClickEdit","click [data-js-remove]":"onClickRemove",click:"onClickItem"},bindings:{"[data-js-name]":"html: getName","[data-js-description]":"text: displayingDescription","[data-js-share-icon]":"classes: {hide: not(isMy)}, attr: {title: sharedTitle}","[data-js-global-icon]":"classes: {hide: isMy}, attr: {title: sharedTitle}","[data-js-icon-description]":"text: sharedTitle","[data-js-shared-container]":"classes: {hide: not(isShared)}","[data-js-edit]":"classes: {hide: not(isMy)}","[data-js-remove]":"classes: {hide: not(isMy)}"},computeds:{displayingDescription:{deps:["description"],get:function(e){return e===null?"":e}},getName:{deps:["name","search"],get:function(e,t){return(t?r.textWrapper(e,t):e).escapeScript()}}},initialize:function(e){this.render()},render:function(){this.$el.html(r.templates(this.template,{}))},onClickEdit:function(e){e.stopPropagation();var t=this;(new a({dashboardCollection:this.model.collection,dashboardModel:this.model,mode:"edit"})).show().done(function(e){t.model.set(e.toJSON())})},onClickRemove:function(e){e.stopPropagation();var t=this;(new f({headerText:l.dialogHeader.dashboardDelete,bodyText:r.replaceTemplate(l.dialog.dashboardDelete,this.model.get("name")),okButtonDanger:!0,cancelButtonText:l.ui.cancel,okButtonText:l.ui.delete})).show().done(function(){t.model.collection.remove(t.model),t.destroy()})},onClickItem:function(){c.router.navigate(this.model.get("url"),{trigger:!0})},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove()}});return h}),define("dashboard/DashboardListView",["require","exports","module","util","jquery","backbone","backbone-epoxy","app","localization","dashboard/DashboardListItemView"],function(e,t,n){"use strict";var r=e("util"),i=e("jquery"),s=e("backbone"),o=e("backbone-epoxy"),u=e("app"),a=e("localization"),f=e("dashboard/DashboardListItemView"),l=u.getInstance(),c=o.View.extend({className:"dashboard-list-view",template:"tpl-dashboard-list",events:{"validation:success [data-js-filter-name]":"onChangeDashboardName","click [data-js-add-dashboard]":"onClickAddDashboard"},bindings:{"[data-js-search-text]":"text: search",":el":"classes: {search: any(search)}"},initialize:function(){this.model=new(o.Model.extend({defaults:{search:""}})),this.render(),this.myDashboardCollection=new s.Collection,this.myDashboardViews=[],this.sharedDashboardCollectoin=new s.Collection,this.sharedDashboardViews=[];var e=this;this.listenTo(this.myDashboardCollection,"reset",this.renderMyDashboards),this.listenTo(this.sharedDashboardCollectoin,"reset",this.renderSharedDashboards),this.collection.ready.done(function(){e.collection.models.length||i("[data-js-filter-name]",e.$el).prop({disabled:"disabled"}),e.listenTo(e.collection,"change:owner change:name reset",e.changeCollection),e.listenTo(e.collection,"add",e.onAddCollection),e.listenTo(e.collection,"remove",e.onRemoveCollection),e.changeCollection()})},onAddCollection:function(){i("[data-js-filter-name]",this.$el).prop({disabled:null}),this.changeCollection()},onRemoveCollection:function(e){this.myDashboardCollection.remove(e),this.myDashboardCollection.models.length||this.changeCollection()},changeCollection:function(){i("[data-js-dashboard-not-found]",this.$el).removeClass("rp-display-block"),i("[data-js-shared-dashboard-not-found]",this.$el).removeClass("rp-display-block");var e=[],t=[],n=this;_.each(this.collection.models,function(r){if(n.model.get("search")&&~r.get("name").toLowerCase().indexOf(n.model.get("search").toLowerCase())||!n.model.get("search"))r.get("owner")==l.userModel.get("name")?e.push(r):t.push(r)}),this.myDashboardCollection.reset(e),this.sharedDashboardCollectoin.reset(t),e.length||i("[data-js-dashboard-not-found]",this.$el).addClass("rp-display-block"),t.length||i("[data-js-shared-dashboard-not-found]",this.$el).addClass("rp-display-block")},render:function(){this.$el.html(r.templates(this.template,{})),r.hintValidator(i("[data-js-filter-name]",this.$el),[{validator:"minMaxNotRequired",type:"dashboardName",min:3,max:128}])},onClickAddDashboard:function(){this.collection.createNewDashboard()},onChangeDashboardName:function(e){i(e.currentTarget).val(i(e.currentTarget).val().trim()),this.model.set({search:i(e.currentTarget).val().trim()}),this.changeCollection()},renderMyDashboards:function(){_.each(this.myDashboardViews,function(e){e.destroy()}),this.myDashboardViews=[],this.myDashboardCollection.models=this.sortDashboardCollectionByASC(this.myDashboardCollection.models);var e=this;_.each(this.myDashboardCollection.models,function(t){var n=new f({model:t,viewModel:e.model});e.myDashboardViews.push(n),i("[data-js-my-dashboards-container]",e.$el).append(n.$el)})},renderSharedDashboards:function(){_.each(this.sharedDashboardViews,function(e){e.destroy()}),this.sharedDashboardViews=[],this.sharedDashboardCollectoin.models=this.sortDashboardCollectionByASC(this.sharedDashboardCollectoin.models);var e=this;_.each(this.sharedDashboardCollectoin.models,function(t){var n=new f({model:t});e.sharedDashboardViews.push(n),i("[data-js-shared-dashboards-container]",e.$el).append(n.$el)})},sortDashboardCollectionByASC:function(e){return _.sortBy(e,function(e){return e.get("name").toUpperCase()})},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return c}),define("modals/addSharedWidget/SharedWidgetItem",["require","exports","module","jquery","backbone","backbone-epoxy","util","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("localization"),a=s.View.extend({className:"shared-widget-item",template:"tpl-modal-add-shared-widget-item",bindings:{"[data-js-widget-select]":"checked: active, disabled: added",":el":'classes: {"widget-already-added": added}, attr: {title: getAddedTitle}',"[data-js-widget-name]":"text: name","[data-js-gadget-name]":"text: gadgetName","[data-js-owner-name]":"text: owner","[data-js-description]":"text: description"},computeds:{getAddedTitle:{deps:["added"],get:function(e){return e?u.wizard.sharedWidgetAdded:""}}},initialize:function(e){this.render()},render:function(){this.$el.html(o.templates(this.template,{}))},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove()}});return a}),define("modals/addSharedWidget/modalAddSharedWidget",["require","exports","module","backbone-epoxy","backbone","modals/_modalView","modals/addSharedWidget/SharedWidgetItem","newWidgets/PreviewWidgetView","util","jquery","coreService","widget/widgetsConfig","app"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("backbone"),s=e("modals/_modalView"),o=e("modals/addSharedWidget/SharedWidgetItem"),u=e("newWidgets/PreviewWidgetView"),a=e("util"),f=e("jquery"),l=e("coreService"),c=e("widget/widgetsConfig"),h=e("app"),p=h.getInstance(),d=c.getInstance(),v=r.Model.extend({defaults:{active:!1,added:!1,id:"",name:"",owner:"",description:"",content_fields:"[]",widgetOptions:"{}"},computeds:{gadgetName:{deps:["gadget"],get:function(e){return e?d.widgetTypes[e].gadget_name:""}}}}),m=i.Collection.extend({model:v,initialize:function(){this.listenTo(this,"change:active",this.onChangeActive)},onChangeActive:function(e,t){t&&_.each(this.models,function(t){t!=e&&t.set({active:!1})})},load:function(){var e=this;return l.getSharedWidgets().done(function(t){e.reset(_.map(t,function(e){return{id:e.id,gadget:e.content_parameters.gadget,name:e.name,owner:e.owner,description:e.description,content_fields:e.content_parameters.content_fields?JSON.stringify(e.content_parameters.content_fields):"[]",widgetOptions:e.content_parameters.widgetOptions?JSON.stringify(e.content_parameters.widgetOptions):"{}"}}))}).fail(function(){a.ajaxFailMessenger(null,"connectToServer")})}}),g=s.extend({template:"tpl-modal-add-shared-widget",className:"modal-add-shared-widget",events:{"click [data-js-add-widget]":"onClickAddWidget"},bindings:{"[data-js-preview-block]":"classes: {hide: not(name)}","[data-js-active-widget-name]":"text: name","[data-js-add-widget]":"attr: {disabled: not(name)}"},initialize:function(e){this.render(),f("[data-js-action-block]",this.$el).addClass("load"),this.dashboardModel=e.dashboardModel,this.collection=new m,this.listenTo(this.collection,"change:active",this.onChangeActive)},render:function(){this.$el.html(a.templates(this.template,{}))},renderViews:function(){this.destroyViews();var e=f("[data-js-widgets-list]",this.$el);if(this.collection.isEmpty()){f("[data-js-widgets-empty]",this.$el).removeClass("hide");return}var t=this;_.each(this.collection.models,function(n){_.find(t.dashboardModel.getWidgets(),function(e){return e.widgetId===n.get("id")})&&n.set("added",!0);var r=new o({model:n,dashboardModel:t.dashboardModel});t.renderedViews.push(r),e.append(r.$el)})},onShown:function(){var e=this;this.collection.load().done(function(){e.renderViews()}).always(function(){f("[data-js-action-block]",e.$el).removeClass("load"),e.baronScroll=a.setupBaronScroll(f("[data-js-widgets-list-scroll]",e.$el)),a.setupBaronScrollSize(e.baronScroll,{maxHeight:480})})},destroyViews:function(){this.renderedViews&&this.renderedViews.length&&_.each(this.renderedViews,function(e){e.destroy()}),this.renderedViews=[]},onChangeActive:function(e,t){t&&(this.model.set({name:e.get("name"),id:e.get("id")}),this.previewWidgetView&&this.previewWidgetView.destroy(),this.previewWidgetView=new u({sharedWidgetModel:e}),f("[data-js-widget-preview]",this.$el).html(this.previewWidgetView.$el))},onClickAddWidget:function(){this.dashboardModel.addWidget(this.model),this.successClose({widgetId:this.model.get("id")})},onDestroy:function(){this.destroyViews()}});return g}),define("dashboard/GadgetCollection",["require","exports","module","jquery","backbone","backbone-epoxy","app","dashboard/GadgetModel","coreService","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("app"),u=e("dashboard/GadgetModel"),a=e("coreService"),f=e("util"),l=o.getInstance(),c=i.Collection.extend({model:u,initialize:function(e,t){this.dashboardModel=t.dashboardModel,this.listenTo(this,"change:x change:y change:width change:height",_.debounce(this.onChangePosition,10)),this.listenTo(this,"remove",this.onRemoveGadget),this.listenTo(this,"add",this.onAddGadget)},onChangePosition:function(){this.dashboardModel.setWidgets(this.getGadgetsData())},getGadgetsData:function(){var e=[];return _.each(this.models,function(t){e.push({widgetId:t.get("id"),widgetPosition:[t.get("x"),t.get("y")],widgetSize:[t.get("width"),t.get("height")]})}),e},onRemoveGadget:function(e){this.dashboardModel.setWidgets(this.getGadgetsData()),a.updateDashboard(this.dashboardModel.get("id"),{deleteWidget:e.get("id")}).done(function(){f.ajaxSuccessMessenger("deletedWidget")}).fail(function(e){f.ajaxFailMessenger(e,"updateDashboard")})},onAddGadget:function(e){},comparator:function(e,t){return e.get("y")-t.get("y")},parse:function(e){return _.map(e,function(e){return{id:e.widgetId,x:e.widgetPosition[0],y:e.widgetPosition[1],width:e.widgetSize[0],height:e.widgetSize[1]}})}});return c}),define("modals/addWidget/SelectedFilterView",["require","exports","module","jquery","backbone","backbone-epoxy","util","modals/addWidget/FilterSearchItemView","filters/FilterModel"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("modals/addWidget/FilterSearchItemView"),a=e("filters/FilterModel"),f=s.View.extend({className:"modal-add-widget-selected-filter",template:"tpl-modal-add-widget-selected-filter",events:{"click [data-js-filter-edit]":"onClickFilterEdit"},initialize:function(){this.async=r.Deferred(),this.render();var e=this;this.filterModel=new a({id:this.model.get("filter_id"),temp:!0,active:!0}),this.$el.addClass("load"),this.filterModel.load().always(function(){e.$el.removeClass("load"),e.filterView=new u({model:e.filterModel}),r("[data-js-filter-info]",e.$el).html(e.filterView.$el),e.async.resolve()})},getFilterModel:function(){return this.filterModel},getAsync:function(){return this.async},setFilterModel:function(e){this.filterView&&this.filterView.destroy(),this.filterView=new u({model:e}),r("[data-js-filter-info]",this.$el).html(this.filterView.$el)},getSelectedFilterModel:function(){return this.filterModel},render:function(){this.$el.html(o.templates(this.template,{}))},onClickFilterEdit:function(){this.trigger("edit",this.filterModel)},destroy:function(){this.filterView&&this.filterView.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove()}});return f}),define("modals/addWidget/modalEditWidget",["require","exports","module","backbone-epoxy","modals/_modalView","util","jquery","widget/widgetsConfig","modals/addWidget/WidgetSettingsView","modals/addWidget/SaveWidgetView","modals/addWidget/SelectedFilterView","newWidgets/PreviewWidgetView","modals/addWidget/FilterSearchView","dashboard/GadgetModel","coreService","app"],function(e,t,n){"use strict";var r=e("backbone-epoxy"),i=e("modals/_modalView"),s=e("util"),o=e("jquery"),u=e("widget/widgetsConfig"),a=e("modals/addWidget/WidgetSettingsView"),f=e("modals/addWidget/SaveWidgetView"),l=e("modals/addWidget/SelectedFilterView"),c=e("newWidgets/PreviewWidgetView"),h=e("modals/addWidget/FilterSearchView"),p=e("dashboard/GadgetModel"),d=e("coreService"),v=e("app"),m=v.getInstance(),g=i.extend({template:"tpl-modal-edit-widget",className:"modal-edit-widget",events:{"click [data-js-save]":"onClickSaveWidget","click [data-js-cancel-filter]":"onClickCancelFilterEdit","click [data-js-save-filter]":"onClickSaveFilterEdit"},bindings:{"[data-js-widget-type]":"text: gadgetName","[data-js-widget-description]":"html: gadgetDescription"},initialize:function(e){if(!e.model)return!1;this.originalModel=e.model,this.model=this.originalModel.clone(),this.widgetConfig=u.getInstance(),this.render(),this.widgetSettingsView=new a({model:this.model}),o("[data-js-widget-settings]",this.$el).html(this.widgetSettingsView.$el),this.saveWidget=new f({model:this.model,dashboardModel:this.dashboardModel}),o("[data-js-widget-save]",this.$el).html(this.saveWidget.$el),this.listenTo(this.model,"change",_.debounce(this.onChangeModel,10)),this.filterReadyAsync=o.Deferred();var t=this;this.model.get("filter_id")?(this.selectedFilterView=new l({model:this.model}),o("[data-js-widget-filter]",this.$el).html(this.selectedFilterView.$el),this.listenTo(this.selectedFilterView,"edit",this.onEditFilter),this.selectedFilterView.getAsync().done(function(){t.filterReadyAsync.resolve()})):this.filterReadyAsync.resolve()},onChangeModel:function(e){},onChangePreview:function(){this.previewWidgetView&&this.previewWidgetView.destroy();var e=null;this.model.get("gadgetIsFilter")&&(e=this.selectedFilterView.getSelectedFilterModel(),this.filterSelectView&&(e=this.filterSelectView.getSelectedFilterModel())),this.previewWidgetView=new c({model:this.model,filterModel:e}),o("[data-js-widget-preview]",this.$el).html(this.previewWidgetView.$el)},onEditFilter:function(e){this.$el.addClass("filter-edit-state"),this.destroyFilterSelect(),this.filterSelectView=new h({model:this.model}),this.listenTo(this.filterSelectView,"disable:navigation",this.onChangefilterSelectState),o("[data-js-filter-search]",this.$el).html(this.filterSelectView.$el),this.filterSelectView.setFilterModel(e),this.filterSelectView.activate()},destroyFilterSelect:function(){this.filterSelectView&&(this.stopListening(this.filterSelectView),this.filterSelectView.destroy())},closeFilterEdit:function(){this.$el.removeClass("filter-edit-state")},onShown:function(){var e=this;this.filterReadyAsync.done(function(){e.listenTo(e.model,"change:gadget change:widgetOptions change:content_fields change:filter_id change:itemsCount",_.debounce(e.onChangePreview,10)),e.onChangePreview()})},onShow:function(){this.widgetSettingsView.activate()},render:function(){this.$el.html(s.templates(this.template,{}))},onClickCancelFilterEdit:function(){this.model.set({filter_id:this.selectedFilterView.getFilterModel().get("id")}),this.destroyFilterSelect(),this.closeFilterEdit()},onClickSaveFilterEdit:function(){this.filterSelectView&&this.filterSelectView.getSelectedFilterModel()&&this.selectedFilterView.setFilterModel(this.filterSelectView.getSelectedFilterModel()),this.destroyFilterSelect(),this.closeFilterEdit()},onChangefilterSelectState:function(e){e?this.$el.addClass("select-filter-edit-state"):this.$el.removeClass("select-filter-edit-state")},onKeySuccess:function(){o("[data-js-save]",this.$el).focus().trigger("click")},onClickSaveWidget:function(){if(this.saveWidget.validate()&&this.widgetSettingsView.validate()){this.$el.addClass("load");var e=this,t=this.widgetConfig.widgetTypes[this.model.get("gadget")],n={};_.contains(["unique_bug_table","activity_stream","launches_table"],this.model.get("gadget"))||(n.metadata_fields=["name","number","start_time"]),this.model.get("gadget")=="most_failed_test_cases"&&(n.metadata_fields=["name","start_time"]),n.type=t.widget_type,n.gadget=this.model.get("gadget"),n.itemsCount=this.model.get("itemsCount"),this.model.getContentFields().length&&(n.content_fields=this.model.getContentFields()),n.widgetOptions=this.model.getWidgetOptions();var r={name:this.model.get("name"),share:this.model.get("isShared"),content_parameters:n};this.model.get("filter_id")&&(r.filter_id=this.model.get("filter_id")),this.model.get("description")&&(r.description=this.model.get("description")),d.updateWidget(r,this.model.get("id")).done(function(t){e.originalModel.set(e.model.toJSON()),e.successClose(t.id)}).fail(function(e){s.ajaxFailMessenger(null,"widgetSave")})}},onDestroy:function(){this.filterSelectView&&this.filterSelectView.destroy(),this.selectedFilterView&&this.selectedFilterView.destroy(),this.widgetSettingsView&&this.widgetSettingsView.destroy(),this.saveWidget&&this.saveWidget.destroy()}});return g}),define("dashboard/GadgetView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","modals/modalConfirm","localization","newWidgets/WidgetModel","newWidgets/WidgetView","modals/addWidget/modalEditWidget","tooltips/SimpleTooltipView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("modals/modalConfirm"),f=e("localization"),l=e("newWidgets/WidgetModel"),c=e("newWidgets/WidgetView"),h=e("modals/addWidget/modalEditWidget"),p=e("tooltips/SimpleTooltipView"),d=u.getInstance(),v=s.View.extend({className:"gadget-view grid-stack-item",template:"tpl-gadget-view",errorTpl:"tpl-gadget-unable-load",events:{"click [data-js-gadget-refresh]":"onClickRefresh","click [data-js-gadget-remove]":"onClickRemove","click [data-js-gadget-edit]":"onClickGadgetEdit"},bindings:{"[data-js-name]":"text: name","[data-js-comment]":"classes: {hide: not(description)}","[data-js-shared]":"classes: {hide: any(not(isShared), not(isMy))}","[data-js-widget-type]":"text: gadgetName","[data-js-public]":"classes: {hide: isMy}, attr: {title: sharedTitle}","[data-js-gadget-remove]":"classes: {hide: not(isMyDashboard)}","[data-js-gadget-edit]":"classes: {hide: not(isMy)}","[data-js-timeline]":"classes: {hide: not(isTimeline)}"},initialize:function(){this.activate=!1,this.render(),this.$el.addClass("load"),this.$el.attr({"data-id":this.model.get("id"),"data-gs-min-width":d.minWidgetWidth,"data-gs-min-height":d.minWidgetHeight}),this.el.backboneView=this,this.listenTo(this.model,"update:timer",this.updateTimer)},render:function(){this.$el.html(o.templates(this.template,{}))},appendTooltip:function(){var e=this.model.get("description"),t=r("[data-js-comment]",this.$el);e&&o.appendTooltip(function(){var t=new p({message:e});return t.$el.html()},t,t)},onClickRefresh:function(){this.update()},startResize:function(){this.$el.addClass("hide-widget")},stopResize:function(){this.widgetView&&this.widgetView.resize(),this.$el.removeClass("hide-widget")},update:function(e){!e&&this.$el.addClass("load");var t=this;this.model.update().done(function(){t.updateWidget()}).fail(function(e){t.onLoadDataError(e)}).always(function(){!e&&t.$el.removeClass("load")})},updateTimer:function(){this.activate&&this.update(!0)},updateWidget:function(){this.widgetView&&this.widgetView.destroy();if(!this.model.get("gadget")){this.onLoadDataError();return}this.widgetView=new c({model:new l(this.model.get("widgetData"))}),r("[data-js-widget-container]",this.$el).html(this.widgetView.$el),this.appendTooltip()},onLoadDataError:function(e){var t=f.widgets.unableLoadData;if(e&&e.status==404)t=f.widgets.widgetNotFound;else{var n=this.model.get("owner"),i=this.model.get("isShared");!i&&n!==d.userModel.get("name")&&(t=f.widgets.unsharedWidget)}r("[data-js-widget-container]",this.$el).html(o.templates(this.errorTpl,{message:t}))},onClickRemove:function(e){e.stopPropagation();var t=this;(new a({headerText:f.dialogHeader.deletedWidget,bodyText:o.replaceTemplate(f.dialog.deletedWidget,this.model.get("name")),okButtonDanger:!0,cancelButtonText:f.ui.cancel,okButtonText:f.ui.delete})).show().done(function(){t.model.trigger("remove:view",t),t.model.collection.remove(t.model),t.destroy()})},activateGadget:function(){this.activate=!0,this.update()},onClickGadgetEdit:function(){var e=this;(new h({model:this.model})).show().done(function(){e.update()})},getDataForGridStack:function(){return[this.el,this.model.get("x"),this.model.get("y"),this.model.get("width"),this.model.get("height")]},destroy:function(){this.$el.remove(),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return v}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/version",["jquery"],e):e(jQuery)}(function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/data",["jquery","./version"],e):e(jQuery)}(function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])}})}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/disable-selection",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({disableSelection:function(){var e="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.on(e+".ui-disableSelection",function(e){e.preventDefault()})}}(),enableSelection:function(){return this.off(".ui-disableSelection")}})}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/focusable",["jquery","./version"],e):e(jQuery)}(function(e){function t(e){var t=e.css("visibility");while(t==="inherit")e=e.parent(),t=e.css("visibility");return t!=="hidden"}return e.ui.focusable=function(n,r){var i,s,o,u,a,f=n.nodeName.toLowerCase();return"area"===f?(i=n.parentNode,s=i.name,!n.href||!s||i.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap='#"+s+"']"),o.length>0&&o.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(f)?(u=!n.disabled,u&&(a=e(n).closest("fieldset")[0],a&&(u=!a.disabled))):"a"===f?u=n.href||r:u=r,u&&e(n).is(":visible")&&t(e(n)))},e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,e.attr(t,"tabindex")!=null)}}),e.ui.focusable}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/form",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.form=function(){return typeof this[0].form=="string"?this.closest("form"):e(this[0].form)}}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/ie",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/keycode",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/escape-selector",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.escapeSelector=function(){var e=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g;return function(t){return t.replace(e,"\\$1")}}()}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/labels",["jquery","./version","./escape-selector"],e):e(jQuery)}(function(e){return e.fn.labels=function(){var t,n,r,i,s;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(i=this.eq(0).parents("label"),r=this.attr("id"),r&&(t=this.eq(0).parents().last(),s=t.add(t.length?t.siblings():this.siblings()),n="label[for='"+e.ui.escapeSelector(r)+"']",i=i.add(s.find(n).addBack(n))),this.pushStack(i))}}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/jquery-1-7",["jquery","./version"],e):e(jQuery)}(function(e){e.fn.jquery.substring(0,3)==="1.7"&&(e.each(["Width","Height"],function(t,n){function o(t,n,i,s){return e.each(r,function(){n-=parseFloat(e.css(t,"padding"+this))||0,i&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var r=n==="Width"?["Left","Right"]:["Top","Bottom"],i=n.toLowerCase(),s={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+n]=function(t){return t===undefined?s["inner"+n].call(this):this.each(function(){e(this).css(i,o(this,t)+"px")})},e.fn["outer"+n]=function(t,r){return typeof t!="number"?s["outer"+n].call(this,t):this.each(function(){e(this).css(i,o(this,t,!0,r)+"px")})}}),e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))})}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/plugin",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.plugin={add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n,r){var i,s=e.plugins[t];if(!s)return;if(!r&&(!e.element[0].parentNode||e.element[0].parentNode.nodeType===11))return;for(i=0;i<s.length;i++)e.options[s[i][0]]&&s[i][1].apply(e.element,n)}}}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/safe-active-element",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(n){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/safe-blur",["jquery","./version"],e):e(jQuery)}(function(e){return e.ui.safeBlur=function(t){t&&t.nodeName.toLowerCase()!=="body"&&e(t).trigger("blur")}}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/scroll-parent",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.scrollParent=function(t){var n=this.css("position"),r=n==="absolute",i=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return r&&t.css("position")==="static"?!1:i.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return n==="fixed"||!s.length?e(this[0].ownerDocument||document):s}}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/tabbable",["jquery","./version","./focusable"],e):e(jQuery)}(function(e){return e.extend(e.expr[":"],{tabbable:function(t){var n=e.attr(t,"tabindex"),r=n!=null;return(!r||n>=0)&&e.ui.focusable(t,r)}})}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/unique-id",["jquery","./version"],e):e(jQuery)}(function(e){return e.fn.extend({uniqueId:function(){var e=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}})}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/widget",["jquery","./version"],e):e(jQuery)}(function(e){var t=0,n=Array.prototype.slice;return e.cleanData=function(t){return function(n){var r,i,s;for(s=0;(i=n[s])!=null;s++)try{r=e._data(i,"events"),r&&r.remove&&e(i).triggerHandler("remove")}catch(o){}t(n)}}(e.cleanData),e.widget=function(t,n,r){var i,s,o,u={},a=t.split(".")[0];t=t.split(".")[1];var f=a+"-"+t;return r||(r=n,n=e.Widget),e.isArray(r)&&(r=e.extend.apply(null,[{}].concat(r))),e.expr[":"][f.toLowerCase()]=function(t){return!!e.data(t,f)},e[a]=e[a]||{},i=e[a][t],s=e[a][t]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},e.extend(s,i,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),o=new n,o.options=e.widget.extend({},o.options),e.each(r,function(t,r){if(!e.isFunction(r)){u[t]=r;return}u[t]=function(){function e(){return n.prototype[t].apply(this,arguments)}function i(e){return n.prototype[t].apply(this,e)}return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),s.prototype=e.widget.extend(o,{widgetEventPrefix:i?o.widgetEventPrefix||t:t},u,{constructor:s,namespace:a,widgetName:t,widgetFullName:f}),i?(e.each(i._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,s,n._proto)}),delete i._childConstructors):n._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){var r=n.call(arguments,1),i=0,s=r.length,o,u;for(;i<s;i++)for(o in r[i])u=r[i][o],r[i].hasOwnProperty(o)&&u!==undefined&&(e.isPlainObject(u)?t[o]=e.isPlainObject(t[o])?e.widget.extend({},t[o],u):e.widget.extend({},u):t[o]=u);return t},e.widget.bridge=function(t,r){var i=r.prototype.widgetFullName||t;e.fn[t]=function(s){var o=typeof s=="string",u=n.call(arguments,1),a=this;return o?!this.length&&s==="instance"?a=undefined:this.each(function(){var n,r=e.data(this,i);if(s==="instance")return a=r,!1;if(!r)return e.error("cannot call methods on "+t+" prior to initialization; "+"attempted to call method '"+s+"'");if(!e.isFunction(r[s])||s.charAt(0)==="_")return e.error("no such method '"+s+"' for "+t+" widget instance");n=r[s].apply(r,u);if(n!==r&&n!==undefined)return a=n&&n.jquery?a.pushStack(n.get()):n,!1}):(u.length&&(s=e.widget.extend.apply(null,[s].concat(u))),this.each(function(){var t=e.data(this,i);t?(t.option(s||{}),t._init&&t._init()):e.data(this,i,new r(s,this))})),a}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(n,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),n),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,n){t._removeClass(n,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,n){var r=t,i,s,o;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof t=="string"){r={},i=t.split("."),t=i.shift();if(i.length){s=r[t]=e.widget.extend({},this.options[t]);for(o=0;o<i.length-1;o++)s[i[o]]=s[i[o]]||{},s=s[i[o]];t=i.pop();if(arguments.length===1)return s[t]===undefined?null:s[t];s[t]=n}else{if(arguments.length===1)return this.options[t]===undefined?null:this.options[t];r[t]=n}}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return e==="classes"&&this._setOptionClasses(t),this.options[e]=t,e==="disabled"&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var n,r,i;for(n in t){i=this.classesElementLookup[n];if(t[n]===this.options.classes[n]||!i||!i.length)continue;r=e(i.get()),this._removeClass(i,n),r.addClass(this._classes({element:r,keys:n,classes:t,add:!0}))}},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){function i(i,s){var o,u;for(u=0;u<i.length;u++)o=r.classesElementLookup[i[u]]||e(),t.add?o=e(e.unique(o.get().concat(t.element.get()))):o=e(o.not(t.element).get()),r.classesElementLookup[i[u]]=o,n.push(i[u]),s&&t.classes[i[u]]&&n.push(t.classes[i[u]])}var n=[],r=this;return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&i(t.keys.match(/\S+/g)||[],!0),t.extra&&i(t.extra.match(/\S+/g)||[]),n.join(" ")},_untrackClassesElement:function(t){var n=this;e.each(n.classesElementLookup,function(r,i){e.inArray(t.target,i)!==-1&&(n.classesElementLookup[r]=e(i.not(t.target).get()))})},_removeClass:function(e,t,n){return this._toggleClass(e,t,n,!1)},_addClass:function(e,t,n){return this._toggleClass(e,t,n,!0)},_toggleClass:function(e,t,n,r){r=typeof r=="boolean"?r:n;var i=typeof e=="string"||e===null,s={extra:i?t:n,keys:i?e:t,element:i?this.element:e,add:r};return s.element.toggleClass(this._classes(s),r),this},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^([\w:-]*)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.on(f,l,u):n.on(f,u)})},_off:function(t,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(n).off(n),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.widget}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/widgets/mouse",["jquery","../ie","../version","../widget"],e):e(jQuery)}(function(e){var t=!1;return e(document).on("mouseup",function(){t=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(n){if(t)return;this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(n),this._mouseDownEvent=n;var r=this,i=n.which===1,s=typeof this.options.cancel=="string"&&n.target.nodeName?e(n.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(n))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(n)&&this._mouseDelayMet(n)){this._mouseStarted=this._mouseStart(n)!==!1;if(!this._mouseStarted)return n.preventDefault(),!0}return!0===e.data(n.target,this.widgetName+".preventClickEvent")&&e.removeData(n.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),n.preventDefault(),t=!0,!0},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}if(t.which||t.button)this._mouseMoved=!0;return this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(n){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,n.target===this._mouseDownEvent.target&&e.data(n.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(n)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,n.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/widgets/draggable",["jquery","./mouse","../data","../plugin","../safe-active-element","../safe-blur","../scroll-parent","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),e==="handle"&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){if((this.helper||this.element).is(".ui-draggable-dragging")){this.destroyOnClear=!0;return}this._removeHandleClassName(),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(this._blurActiveElement(t),this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var n=e.ui.safeActiveElement(this.document[0]),r=e(t.target);if(r.closest(n).length)return;e.ui.safeBlur(n)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return e(this).css("position")==="fixed"}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,n){this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=r.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=this,r=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(r=e.ui.ddmanager.drop(this,t)),this.dropped&&(r=this.dropped,this.dropped=!1),this.options.revert==="invalid"&&!r||this.options.revert==="valid"&&r||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,r)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",t)!==!1&&n._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return this.options.handle?!!e(t.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper),i=r?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r&&i[0]===this.element[0]&&this._setPositionRelative(),i[0]!==this.element[0]&&!/(fixed|absolute)/.test(i.css("position"))&&i.css("position","absolute"),i},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),n=this.document[0];return this.cssPosition==="absolute"&&this.scrollParent[0]!==n&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition!=="relative")return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options,s=this.document[0];this.relativeContainer=null;if(!i.containment){this.containment=null;return}if(i.containment==="window"){this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment==="document"){this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];return}if(i.containment.constructor===Array){this.containment=i.containment;return}i.containment==="parent"&&(i.containment=this.helper[0].parentNode),n=e(i.containment),r=n[0];if(!r)return;t=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n},_convertPositionTo:function(e,t){t||(t=this.position);var n=e==="absolute"?1:-1,r=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*n+this.offset.parent.top*n-(this.cssPosition==="fixed"?-this.offset.scroll.top:r?0:this.offset.scroll.top)*n,left:t.left+this.offset.relative.left*n+this.offset.parent.left*n-(this.cssPosition==="fixed"?-this.offset.scroll.left:r?0:this.offset.scroll.left)*n}},_generatePosition:function(e,t){var n,r,i,s,o=this.options,u=this._isRootNode(this.scrollParent[0]),a=e.pageX,f=e.pageY;if(!u||!this.offset.scroll)this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()};return t&&(this.containment&&(this.relativeContainer?(r=this.relativeContainer.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,e.pageX-this.offset.click.left<n[0]&&(a=n[0]+this.offset.click.left),e.pageY-this.offset.click.top<n[1]&&(f=n[1]+this.offset.click.top),e.pageX-this.offset.click.left>n[2]&&(a=n[2]+this.offset.click.left),e.pageY-this.offset.click.top>n[3]&&(f=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((f-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,f=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,a=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s),o.axis==="y"&&(a=this.originalPageX),o.axis==="x"&&(f=this.originalPageY)),{top:f-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.offset.scroll.top:u?0:this.offset.scroll.top),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.offset.scroll.left:u?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),r.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n,r){var i=e.extend({},n,{item:r.element});r.sortables=[],e(r.options.connectToSortable).each(function(){var n=e(this).sortable("instance");n&&!n.options.disabled&&(r.sortables.push(n),n.refreshPositions(),n._trigger("activate",t,i))})},stop:function(t,n,r){var i=e.extend({},n,{item:r.element});r.cancelHelperRemoval=!1,e.each(r.sortables,function(){var e=this;e.isOver?(e.isOver=0,r.cancelHelperRemoval=!0,e.cancelHelperRemoval=!1,e._storedCSS={position:e.placeholder.css("position"),top:e.placeholder.css("top"),left:e.placeholder.css("left")},e._mouseStop(t),e.options.helper=e.options._helper):(e.cancelHelperRemoval=!0,e._trigger("deactivate",t,i))})},drag:function(t,n,r){e.each(r.sortables,function(){var i=!1,s=this;s.positionAbs=r.positionAbs,s.helperProportions=r.helperProportions,s.offset.click=r.offset.click,s._intersectsWith(s.containerCache)&&(i=!0,e.each(r.sortables,function(){return this.positionAbs=r.positionAbs,this.helperProportions=r.helperProportions,this.offset.click=r.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(i=!1),i})),i?(s.isOver||(s.isOver=1,r._parent=n.helper.parent(),s.currentItem=n.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return n.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=r.offset.click.top,s.offset.click.left=r.offset.click.left,s.offset.parent.left-=r.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=r.offset.parent.top-s.offset.parent.top,r._trigger("toSortable",t),r.dropped=s.element,e.each(r.sortables,function(){this.refreshPositions()}),r.currentItem=r.element,s.fromOutside=r),s.currentItem&&(s._mouseDrag(t),n.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),n.helper.appendTo(r._parent),r._refreshOffsets(t),n.position=r._generatePosition(t,!0),r._trigger("fromSortable",t),r.dropped=!1,e.each(r.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n,r){var i=e("body"),s=r.options;i.css("cursor")&&(s._cursor=i.css("cursor")),i.css("cursor",s.cursor)},stop:function(t,n,r){var i=r.options;i._cursor&&e("body").css("cursor",i._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("opacity")&&(s._opacity=i.css("opacity")),i.css("opacity",s.opacity)},stop:function(t,n,r){var i=r.options;i._opacity&&e(n.helper).css("opacity",i._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&n.scrollParentNotHidden[0].tagName!=="HTML"&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(t,n,r){var i=r.options,s=!1,o=r.scrollParentNotHidden[0],u=r.document[0];if(o!==u&&o.tagName!=="HTML"){if(!i.axis||i.axis!=="x")r.overflowOffset.top+o.offsetHeight-t.pageY<i.scrollSensitivity?o.scrollTop=s=o.scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(o.scrollTop=s=o.scrollTop-i.scrollSpeed);if(!i.axis||i.axis!=="y")r.overflowOffset.left+o.offsetWidth-t.pageX<i.scrollSensitivity?o.scrollLeft=s=o.scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(o.scrollLeft=s=o.scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!=="x")t.pageY-e(u).scrollTop()<i.scrollSensitivity?s=e(u).scrollTop(e(u).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(u).scrollTop())<i.scrollSensitivity&&(s=e(u).scrollTop(e(u).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!=="y")t.pageX-e(u).scrollLeft()<i.scrollSensitivity?s=e(u).scrollLeft(e(u).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(u).scrollLeft())<i.scrollSensitivity&&(s=e(u).scrollLeft(e(u).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n,r){var i=r.options;r.snapElements=[],e(i.snap.constructor!==String?i.snap.items||":data(ui-draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!==r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n,r){var i,s,o,u,a,f,l,c,h,p,d=r.options,v=d.snapTolerance,m=n.offset.left,g=m+r.helperProportions.width,y=n.offset.top,b=y+r.helperProportions.height;for(h=r.snapElements.length-1;h>=0;h--){a=r.snapElements[h].left-r.margins.left,f=a+r.snapElements[h].width,l=r.snapElements[h].top-r.margins.top,c=l+r.snapElements[h].height;if(g<a-v||m>f+v||b<l-v||y>c+v||!e.contains(r.snapElements[h].item.ownerDocument,r.snapElements[h].item)){r.snapElements[h].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=!1;continue}d.snapMode!=="inner"&&(i=Math.abs(l-b)<=v,s=Math.abs(c-y)<=v,o=Math.abs(a-g)<=v,u=Math.abs(f-m)<=v,i&&(n.position.top=r._convertPositionTo("relative",{top:l-r.helperProportions.height,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a-r.helperProportions.width}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f}).left)),p=i||s||o||u,d.snapMode!=="outer"&&(i=Math.abs(l-y)<=v,s=Math.abs(c-b)<=v,o=Math.abs(a-m)<=v,u=Math.abs(f-g)<=v,i&&(n.position.top=r._convertPositionTo("relative",{top:l,left:0}).top),s&&(n.position.top=r._convertPositionTo("relative",{top:c-r.helperProportions.height,left:0}).top),o&&(n.position.left=r._convertPositionTo("relative",{top:0,left:a}).left),u&&(n.position.left=r._convertPositionTo("relative",{top:0,left:f-r.helperProportions.width}).left)),!r.snapElements[h].snapping&&(i||s||o||u||p)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[h].item})),r.snapElements[h].snapping=i||s||o||u||p}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n,r){var i,s=r.options,o=e.makeArray(e(s.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!o.length)return;i=parseInt(e(o[0]).css("zIndex"),10)||0,e(o).each(function(t){e(this).css("zIndex",i+t)}),this.css("zIndex",i+o.length)}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n,r){var i=e(n.helper),s=r.options;i.css("zIndex")&&(s._zIndex=i.css("zIndex")),i.css("zIndex",s.zIndex)},stop:function(t,n,r){var i=r.options;i._zIndex&&e(n.helper).css("zIndex",i._zIndex)}}),e.ui.draggable}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/widgets/droppable",["jquery","./draggable","./mouse","../version","../widget"],e):e(jQuery)}(function(e){e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,n=this.options,r=n.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(r)?r:function(e){return e.is(r)},this.proportions=function(){if(!arguments.length)return t?t:t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight};t=arguments[0]},this._addToManager(n.scope),n.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){var t=0;for(;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,n){if(t==="accept")this.accept=e.isFunction(n)?n:function(e){return e.is(n)};else if(t==="scope"){var r=e.ui.ddmanager.droppables[this.options.scope];this._splice(r),this._addToManager(n)}this._super(t,n)},_activate:function(t){var n=e.ui.ddmanager.current;this._addActiveClass(),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this._removeActiveClass(),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(n)))},_drop:function(n,r){var i=r||e.ui.ddmanager.current,s=!1;return!i||(i.currentItem||i.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var r=e(this).droppable("instance");if(r.options.greedy&&!r.options.disabled&&r.options.scope===i.options.scope&&r.accept.call(r.element[0],i.currentItem||i.element)&&t(i,e.extend(r,{offset:r.element.offset()}),r.options.tolerance,n))return s=!0,!1}),s?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",n,this.ui(i)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var t=e.ui.intersect=function(){function e(e,t,n){return e>=t&&e<t+n}return function(t,n,r,i){if(!n.offset)return!1;var s=(t.positionAbs||t.position.absolute).left+t.margins.left,o=(t.positionAbs||t.position.absolute).top+t.margins.top,u=s+t.helperProportions.width,a=o+t.helperProportions.height,f=n.offset.left,l=n.offset.top,c=f+n.proportions().width,h=l+n.proportions().height;switch(r){case"fit":return f<=s&&u<=c&&l<=o&&a<=h;case"intersect":return f<s+t.helperProportions.width/2&&u-t.helperProportions.width/2<c&&l<o+t.helperProportions.height/2&&a-t.helperProportions.height/2<h;case"pointer":return e(i.pageY,l,n.proportions().height)&&e(i.pageX,f,n.proportions().width);case"touch":return(o>=l&&o<=h||a>=l&&a<=h||o<l&&a>h)&&(s>=f&&s<=c||u>=f&&u<=c||s<f&&u>c);default:return!1}}}();return e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions().height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions({width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight})}},drop:function(n,r){var i=!1;return e.each((e.ui.ddmanager.droppables[n.options.scope]||[]).slice(),function(){if(!this.options)return;!this.options.disabled&&this.visible&&t(n,this,this.options.tolerance,r)&&(i=this._drop.call(this,r)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,r))}),i},dragStart:function(t,n){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(n,r){n.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(n,r),e.each(e.ui.ddmanager.droppables[n.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var i,s,o,u=t(n,this,this.options.tolerance,r),a=!u&&this.isover?"isout":u&&!this.isover?"isover":null;if(!a)return;this.options.greedy&&(s=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===s}),o.length&&(i=e(o[0]).droppable("instance"),i.greedyChild=a==="isover")),i&&a==="isover"&&(i.isover=!1,i.isout=!0,i._out.call(i,r)),this[a]=!0,this[a==="isout"?"isover":"isout"]=!1,this[a==="isover"?"_over":"_out"].call(this,r),i&&a==="isout"&&(i.isout=!1,i.isover=!0,i._over.call(i,r))})},dragStop:function(t,n){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}},e.uiBackCompat!==!1&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),e.ui.droppable}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/widgets/resizable",["jquery","./mouse","../disable-selection","../plugin","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},_create:function(){var t,n=this.options,r=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),n.autoHide&&e(this.element).on("mouseenter",function(){if(n.disabled)return;r._removeClass("ui-resizable-autohide"),r._handles.show()}).on("mouseleave",function(){if(n.disabled)return;r.resizing||(r._addClass("ui-resizable-autohide"),r._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_setOption:function(e,t){this._super(e,t);switch(e){case"handles":this._removeHandles(),this._setupHandles();break;default:}},_setupHandles:function(){var t=this.options,n,r,i,s,o,u=this;this.handles=t.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e();if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),i=this.handles.split(","),this.handles={};for(r=0;r<i.length;r++)n=e.trim(i[r]),s="ui-resizable-"+n,o=e("<div>"),this._addClass(o,"ui-resizable-handle "+s),o.css({zIndex:t.zIndex}),this.handles[n]=".ui-resizable-"+n,this.element.append(o)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){if(this.handles[n].constructor===String)this.handles[n]=this.element.children(this.handles[n]).first().show();else if(this.handles[n].jquery||this.handles[n].nodeType)this.handles[n]=e(this.handles[n]),this._on(this.handles[n],{mousedown:u._mouseDown});this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[n])}},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){u.resizing||(this.className&&(o=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),u.axis=o&&o[1]?o[1]:"se")}),t.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var n,r,i,s=this.options,o=this.element;return this.resizing=!0,this._renderProxy(),n=this._num(this.helper.css("left")),r=this._num(this.helper.css("top")),s.containment&&(n+=e(s.containment).scrollLeft()||0,r+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:n,top:r},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:o.width(),height:o.height()},this.originalSize=this._helper?{width:o.outerWidth(),height:o.outerHeight()}:{width:o.width(),height:o.height()},this.sizeDiff={width:o.outerWidth()-o.width(),height:o.outerHeight()-o.height()},this.originalPosition={left:n,top:r},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof s.aspectRatio=="number"?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,i=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",i==="auto"?this.axis+"-resize":i),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r,i=this.originalMousePosition,s=this.axis,o=t.pageX-i.left||0,u=t.pageY-i.top||0,a=this._change[s];this._updatePrevProperties();if(!a)return!1;n=a.apply(this,[t,o,u]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),r=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(r)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&this._hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseFloat(l.element.css("left"))+(l.position.left-l.originalPosition.left)||null,a=parseFloat(l.element.css("top"))+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,n,r,i,s,o=this.options;s={minWidth:this._isNumber(o.minWidth)?o.minWidth:0,maxWidth:this._isNumber(o.maxWidth)?o.maxWidth:Infinity,minHeight:this._isNumber(o.minHeight)?o.minHeight:0,maxHeight:this._isNumber(o.maxHeight)?o.maxHeight:Infinity};if(this._aspectRatio||e)t=s.minHeight*this.aspectRatio,r=s.minWidth/this.aspectRatio,n=s.maxHeight*this.aspectRatio,i=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),r>s.minHeight&&(s.minHeight=r),n<s.maxWidth&&(s.maxWidth=n),i<s.maxHeight&&(s.maxHeight=i);this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,r=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),r==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),r==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,r=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,i=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,o=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,u=this.originalPosition.left+this.originalSize.width,a=this.originalPosition.top+this.originalSize.height,f=/sw|nw|w/.test(n),l=/nw|ne|n/.test(n);return s&&(e.width=t.minWidth),o&&(e.height=t.minHeight),r&&(e.width=t.maxWidth),i&&(e.height=t.maxHeight),s&&f&&(e.left=u-t.minWidth),r&&f&&(e.left=u-t.maxWidth),o&&l&&(e.top=a-t.minHeight),i&&l&&(e.top=a-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_getPaddingPlusBorderDimensions:function(e){var t=0,n=[],r=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],i=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];for(;t<4;t++)n[t]=parseFloat(r[t])||0,n[t]+=parseFloat(i[t])||0;return{height:n[0]+n[2],width:n[1]+n[3]}},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t=0,n=this.helper||this.element;for(;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:n.height()-this.outerDimensions.height||0,width:n.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).resizable("instance"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&n._hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseFloat(n.element.css("left"))+(n.position.left-n.originalPosition.left)||null,l=parseFloat(n.element.css("top"))+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseFloat(n.element.css("width")),height:parseFloat(n.element.css("height")),top:parseFloat(n.element.css("top")),left:parseFloat(n.element.css("left"))};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,n,r,i,s,o,u,a=e(this).resizable("instance"),f=a.options,l=a.element,c=f.containment,h=c instanceof e?c.get(0):/parent/.test(c)?l.parent().get(0):c;if(!h)return;a.containerElement=e(h),/document/.test(c)||c===document?(a.containerOffset={left:0,top:0},a.containerPosition={left:0,top:0},a.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),n=[],e(["Top","Right","Left","Bottom"]).each(function(e,r){n[e]=a._num(t.css("padding"+r))}),a.containerOffset=t.offset(),a.containerPosition=t.position(),a.containerSize={height:t.innerHeight()-n[3],width:t.innerWidth()-n[1]},r=a.containerOffset,i=a.containerSize.height,s=a.containerSize.width,o=a._hasScroll(h,"left")?h.scrollWidth:s,u=a._hasScroll(h)?h.scrollHeight:i,a.parentData={element:h,left:r.left,top:r.top,width:o,height:u})},resize:function(t){var n,r,i,s,o=e(this).resizable("instance"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio,p=!1),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio,p=!1),o.position.top=o._helper?a.top:0),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s?(o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top):(o.offset.left=o.element.offset().left,o.offset.top=o.element.offset().top),n=Math.abs(o.sizeDiff.width+(o._helper?o.offset.left-c.left:o.offset.left-a.left)),r=Math.abs(o.sizeDiff.height+(o._helper?o.offset.top-c.top:o.offset.top-a.top)),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio,p=!1)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio,p=!1)),p||(o.position.left=o.prevPosition.left,o.position.top=o.prevPosition.top,o.size.width=o.prevSize.width,o.size.height=o.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance"),n=t.options;e(n.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,n){var r=e(this).resizable("instance"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0};e(i.alsoResize).each(function(){var t=e(this),r=e(this).data("ui-resizable-alsoresize"),i={},s=t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var n=(r[t]||0)+(u[t]||0);n&&n>=0&&(i[t]=n||null)}),t.css(i)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),n=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:n.height,width:n.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),e.uiBackCompat!==!1&&typeof t.options.ghost=="string"&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,n=e(this).resizable("instance"),r=n.options,i=n.size,s=n.originalSize,o=n.originalPosition,u=n.axis,a=typeof r.grid=="number"?[r.grid,r.grid]:r.grid,f=a[0]||1,l=a[1]||1,c=Math.round((i.width-s.width)/f)*f,h=Math.round((i.height-s.height)/l)*l,p=s.width+c,d=s.height+h,v=r.maxWidth&&r.maxWidth<p,m=r.maxHeight&&r.maxHeight<d,g=r.minWidth&&r.minWidth>p,y=r.minHeight&&r.minHeight>d;r.grid=a,g&&(p+=f),y&&(d+=l),v&&(p-=f),m&&(d-=l);if(/^(se|s|e)$/.test(u))n.size.width=p,n.size.height=d;else if(/^(ne)$/.test(u))n.size.width=p,n.size.height=d,n.position.top=o.top-h;else if(/^(sw)$/.test(u))n.size.width=p,n.size.height=d,n.position.left=o.left-c;else{if(d-l<=0||p-f<=0)t=n._getPaddingPlusBorderDimensions(this);d-l>0?(n.size.height=d,n.position.top=o.top-h):(d=l-t.height,n.size.height=d,n.position.top=o.top+s.height-d),p-f>0?(n.size.width=p,n.position.left=o.left-c):(p=f-t.width,n.size.width=p,n.position.left=o.left+s.width-p)}}}),e.ui.resizable}),function(e){if(typeof define=="function"&&define.amd)define("gridstackUi",["jquery","underscore","gridstack","jquery-ui/data","jquery-ui/disable-selection","jquery-ui/focusable","jquery-ui/form","jquery-ui/ie","jquery-ui/keycode","jquery-ui/labels","jquery-ui/jquery-1-7","jquery-ui/plugin","jquery-ui/safe-active-element","jquery-ui/safe-blur","jquery-ui/scroll-parent","jquery-ui/tabbable","jquery-ui/unique-id","jquery-ui/version","jquery-ui/widget","jquery-ui/widgets/mouse","jquery-ui/widgets/draggable","jquery-ui/widgets/droppable","jquery-ui/widgets/resizable"],e);else if(typeof exports!="undefined"){try{jQuery=require("jquery")}catch(t){}try{_=require("lodash")}catch(t){}try{GridStackUI=require("gridstack")}catch(t){}e(jQuery,_,GridStackUI)}else e(jQuery,_,GridStackUI)}(function(e,t,n){function i(e){n.GridStackDragDropPlugin.call(this,e)}var r=window;return n.GridStackDragDropPlugin.registerPlugin(i),i.prototype=Object.create(n.GridStackDragDropPlugin.prototype),i.prototype.constructor=i,i.prototype.resizable=function(n,r){n=e(n);if(r==="disable"||r==="enable")n.resizable(r);else if(r==="option"){var i=arguments[2],s=arguments[3];n.resizable(r,i,s)}else n.resizable(t.extend({},this.grid.opts.resizable,{start:r.start||function(){},stop:r.stop||function(){},resize:r.resize||function(){}}));return this},i.prototype.draggable=function(n,r){return n=e(n),r==="disable"||r==="enable"?n.draggable(r):n.draggable(t.extend({},this.grid.opts.draggable,{containment:this.grid.opts.isNested?this.grid.container.parent():null,start:r.start||function(){},stop:r.stop||function(){},drag:r.drag||function(){}})),this},i.prototype.droppable=function(t,n){return t=e(t),n==="disable"||n==="enable"?t.droppable(n):t.droppable({accept:n.accept}),this},i.prototype.isDroppable=function(t,n){return t=e(t),Boolean(t.data("droppable"))},i.prototype.on=function(t,n,r){return e(t).on(n,r),this},i}),define("dashboard/DashboardItemView",["require","exports","module","util","jquery","backbone","backbone-epoxy","app","modals/modalEditDashboard","modals/modalConfirm","modals/addWidget/modalAddWidget","modals/addSharedWidget/modalAddSharedWidget","localization","dashboard/GadgetCollection","dashboard/GadgetView","dashboard/GadgetModel","newWidgets/WidgetModel","widget/widgetsConfig","gridstackUi","fullscreen"],function(e,t,n){"use strict";function w(e){this.blocks=e,this.scrollMap=[],this.documentHeight=0,this._createScrollMap=function(){this.scrollMap=[],this.documentHeight=document.documentElement.clientHeight;for(var e=0;e<this.blocks.length;e++)this.scrollMap.push({scrollStart:this.blocks[e].el.offsetTop,scrollEnd:this.blocks[e].el.offsetTop+this.blocks[e].el.offsetHeight})},this.activateScroll=function(e){var t=e+this.documentHeight,n=[];for(var r=0;r<this.scrollMap.length;r++)if(this.scrollMap[r].scrollStart<=t&&e<this.scrollMap[r].scrollStart||this.scrollMap[r].scrollEnd<=t&&e<this.scrollMap[r].scrollEnd||this.scrollMap[r].scrollEnd>t&&e>=this.scrollMap[r].scrollStart)n.push(r),this.blocks[r].activate||(this.blocks[r].activate=!0,this.blocks[r].activateGadget());if(n.length!=2)return n[parseInt(n.length/2)];var i=t-this.documentHeight/2,s=this.scrollMap[n[0]].scrollEnd;return s>i?n[0]:n[1]},this.resize=function(){this._createScrollMap(),this.activateScroll(y.mainScrollElement.scrollTop())},this._createScrollMap()}var r=e("util"),i=e("jquery"),s=e("backbone"),o=e("backbone-epoxy"),u=e("app"),a=e("modals/modalEditDashboard"),f=e("modals/modalConfirm"),l=e("modals/addWidget/modalAddWidget"),c=e("modals/addSharedWidget/modalAddSharedWidget"),h=e("localization"),p=e("dashboard/GadgetCollection"),d=e("dashboard/GadgetView"),v=e("dashboard/GadgetModel"),m=e("newWidgets/WidgetModel"),g=e("widget/widgetsConfig");e("gridstackUi"),e("fullscreen");var y=u.getInstance(),b=o.View.extend({className:"dashboard-item-view",template:"tpl-dashboard-item",events:{"click [data-js-edit]":"onClickEdit","click [data-js-remove]":"onClickRemove","click [data-js-full-screen]":"onClickFullScreen","click [data-js-close-fullscreen]":"onClickExitFullScreen","click [data-js-add-widget]":"onClickAddWidget","click [data-js-add-shared-widget]":"onClickAddSharedWidget"},bindings:{":el":'classes: {"not-my": not(isMy)}',"[data-js-owner-name]":"text: owner","[data-js-add-widget]":"classes: {disabled: not(validateForAddWidget)}, attr: {title: getAddBtnTitle}","[data-js-add-shared-widget]":"classes: {disabled: not(validateForAddWidget)}, attr: {title: getAddBtnTitle}"},computeds:{validateForAddWidget:{deps:["widgets"],get:function(e){return e=this.model.getWidgets(),e.length<y.maxWidgetsOnDashboard}},getAddBtnTitle:{deps:["widgets"],get:function(e){return e=this.model.getWidgets(),e.length>=y.maxWidgetsOnDashboard?h.dashboard.maxWidgetsAdded:""}}},initialize:function(e){this.gadgetViews=[],this.scrollElement=y.mainScrollElement,this.onShowAsync=i.Deferred(),this.render();var t=this;this.model.get("notLoad")?(this.$el.addClass("load"),this.model.update().done(function(){t.$el.removeClass("load"),t.postInit(),t.applyBindings()})):this.postInit()},postInit:function(){var e=this;g.updateInstance().done(function(){e.gadgetCollection=new p([],{dashboardModel:e.model}),e.listenTo(e.gadgetCollection,"add",e.onAddGadget),e.listenTo(e.gadgetCollection,"remove:view",e.onRemoveGadget),e.listenTo(e.gadgetCollection,"remove",e.checkEmptyDashboard),e.activateGridStack(),e.listenTo(e.model,"add:widget",e.onAddNewGadget),e.listenTo(e.model,"change:isShared",e.onShareDashboard)})},render:function(){this.$el.html(r.templates(this.template,{}))},onAddNewGadget:function(e){this.checkEmptyDashboard(),this.gadgetCollection.add(e),this.updateScroll()},onShareDashboard:function(){this.model.get("isShared")&&_.each(this.gadgetViews,function(e){e.model.set("isShared",!0)},this)},activateGridStack:function(){var e=i("[data-js-grid-stack]",this.$el);e.gridstack({cellHeight:y.widgetGridCellHeight,verticalMargin:y.widgetGridVerticalMargin,draggable:{handle:"[data-js-drag-handle]"},resizable:{handles:"se, sw"},disableDrag:!this.model.get("isMy"),disableResize:!this.model.get("isMy")}),this.gridStack=e.data("gridstack"),this.createGadgets();var t=this;e.on("change",function(e,n){_.each(n,function(e){var n=e.el.data("id");if(!n)return;var r=t.gadgetCollection.get(n);if(!r)return;r.set({x:e.x,y:e.y,width:e.width,height:e.height})}),t.gadgetCollection.sort(),t.updateScroll()}),e.on("resizestart",function(e,t){var n=e.target.backboneView;n&&n.startResize()}),e.on("resizestop",function(e,t){var n=e.target.backboneView;setTimeout(function(){n&&n.stopResize()},300)})},onClickFullScreen:function(e){e.preventDefault(),i("body").fullscreen({toggleClass:"fullscreen"}),this.updateGadgetsTimer()},onAddGadget:function(e){var t=new d({model:e,dashboardModel:this.model});this.gridStack.addWidget.apply(this.gridStack,t.getDataForGridStack()),this.gadgetViews.push(t)},onRemoveGadget:function(e){this.gridStack.removeWidget(e.el)},checkEmptyDashboard:function(){this.model.getWidgets().length?this.$el.removeClass("not-found"):this.$el.addClass("not-found")},createGadgets:function(){this.checkEmptyDashboard(),this.gadgetCollection.add(this.model.getWidgets(),{silent:!0,parse:!0}),this.gadgetCollection.forEach(function(e){this.onAddGadget(e)},this),this.updateScroll();var e=this;this.$el.on("resize",function(){e.scrollerAnimate.resize()})},updateScroll:function(){var e=this;this.onShowAsync.done(function(){e.scrollerAnimate=new w(e.gadgetViews),e.scrollElement.off("scroll.dashboardPage").on("scroll.dashboardPage",function(t){e.onScroll()}),e.onScroll()})},onShow:function(){this.onShowAsync.resolve()},onScroll:function(){var e=this.scrollElement.scrollTop();this.scrollerAnimate.activateScroll(e)},onClickEdit:function(e){e.preventDefault(),e.stopPropagation();var t=this;(new a({dashboardCollection:this.model.collection,dashboardModel:this.model,mode:"edit"})).show().done(function(e){t.model.set(e.toJSON())})},onClickRemove:function(e){e.preventDefault(),e.stopPropagation();var t=this;(new f({headerText:h.dialogHeader.dashboardDelete,bodyText:r.replaceTemplate(h.dialog.dashboardDelete,this.model.get("name")),okButtonDanger:!0,cancelButtonText:h.ui.cancel,okButtonText:h.ui.delete})).show().done(function(){var e=t.model.collection;t.model.collection.remove(t.model),t.destroy(),e.resetActive()})},onClickExitFullScreen:function(e){clearTimeout(this.updateTimer),e.preventDefault(),e.stopPropagation(),i.fullscreen.exit()},updateGadgetsTimer:function(){clearTimeout(this.updateTimer);var e=this;this.updateTimer=setTimeout(function(){_.each(e.gadgetCollection.models,function(e){e.trigger("update:timer")}),e.updateGadgetsTimer()},6e4)},onClickAddWidget:function(e){e.preventDefault(),e.stopPropagation(),(new l({model:new v,dashboardModel:this.model})).show()},onClickAddSharedWidget:function(e){e.preventDefault(),e.stopPropagation(),(new c({model:new v,dashboardModel:this.model})).show()},destroy:function(){clearTimeout(this.updateTimer),i.fullscreen.exit(),this.undelegateEvents(),this.gridStack&&this.gridStack.destroy(),this.$el.off("resize"),this.scrollElement.off("scroll.dashboardPage"),this.stopListening(),this.unbind(),this.$el.remove()}});return b}),define("dashboard/DashboardBodyView",["require","exports","module","util","jquery","backbone-epoxy","dashboard/DashboardListView","dashboard/DashboardItemView","app","localization"],function(e,t,n){"use strict";var r=e("util"),i=e("jquery"),s=e("backbone-epoxy"),o=e("dashboard/DashboardListView"),u=e("dashboard/DashboardItemView"),a=e("app"),f=e("localization"),l=a.getInstance(),c=s.View.extend({className:"dashboard-body",template:"tpl-dashboard-body",events:{},initialize:function(e){this.onShowAsync=i.Deferred(),this.$el.addClass("load"),this.render(),this.$container=i("[data-js-dashboard-content]",this.$el),this.content=null;var t=this;this.listenTo(this.collection,"reset:active",this.activate),this.listenTo(this.collection,"change:active",this.onChangeActive),this.collection.ready.done(function(){t.$el.removeClass("load"),t.activate()})},render:function(){this.$el.html(r.templates(this.template,{}))},onShow:function(){this.onShowAsync.resolve()},onChangeActive:function(e,t){t&&this.activate()},activate:function(){var e=this.collection.where({active:!0});this.content&&this.content.destroy(),e.length?this.content=new u({model:e[0]}):this.content=new o({collection:this.collection}),this.$container.html(this.content.$el);var t=this;this.onShowAsync.done(function(){t.content.onShow&&t.content.onShow()})},destroy:function(){this.content&&this.content.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return c}),define("dashboard/DashboardPage",["require","exports","module","jquery","backbone","backbone-epoxy","app","dashboard/DashboardHeaderView","dashboard/DashboardBodyView","dashboard/DashboardCollection"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("app"),u=e("dashboard/DashboardHeaderView"),a=e("dashboard/DashboardBodyView"),f=e("dashboard/DashboardCollection"),l=o.getInstance(),c=s.View.extend({initialize:function(e){this.contextName=e.contextName,this.context=e.context,this.collection=new f({startId:e.subContext}),this.header=new u({collection:this.collection}),this.body=new a({collection:this.collection}),this.context.getMainView().$header.html(this.header.$el),this.context.getMainView().$body.html(this.body.$el),this.body.onShow&&this.body.onShow()},update:function(e){this.collection.resetActive(),e.subContext&&(this.collection.get(e.subContext)?this.collection.get(e.subContext).set({active:!0}):console.log("dashboard not found"))},render:function(){return this},destroy:function(){this.header.destroy(),this.body.destroy(),this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return{ContentView:c}}),define("DemoDataSettingsView",["require","exports","module","jquery","backbone","util","core/components","app","coreService","localization","model/SingletonAppModel"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("core/components"),u=e("app"),a=e("coreService"),f=e("localization"),l=e("model/SingletonAppModel"),c=u.getInstance(),h=o.BaseView.extend({initialize:function(e){this.$el=e.holder},events:{"click [data-js-demo-data-submit]":"submitSettings","input [data-js-demo-data-postfix]":"validate","keypress [data-js-demo-data-postfix]":"onEnterActions"},tpl:"tpl-project-settings-demo-data",render:function(){return this.$el.html(s.templates(this.tpl)),this.setupAnchors(),this.initValidators(),this},setupAnchors:function(){this.$submitSettings=r("[data-js-demo-data-submit]",this.$el),this.$postfixInput=r("[data-js-demo-data-postfix]",this.$el),this.$alertLoaderBlock=r("[data-js-demo-data-loader]",this.$el)},toggleDisableForm:function(e){this.$postfixInput.prop("disabled",e),this.$submitSettings.prop("disabled",e)},initValidators:function(){var e=this;s.hintValidator(this.$postfixInput,[{type:"postfix",validator:"minMaxRequired",min:1,max:90}])},validate:function(){this.$postfixInput.trigger("validate")},onEnterActions:function(e){if(e.keyCode===13)return this.submitSettings(),!1},showFormError:function(e){var t=null,n="";if(e){try{t=JSON.parse(e.responseText)}catch(i){n=f.failMessages.defaults}e.status===409?n=f.project.posfixUniq:t&&t.message&&(t.message.indexOf("You couldn't create the duplicate")>=0?n=f.project.posfixUniq:n=t.message.replace("{}",""))}var s=this.$postfixInput.closest(".rp-form-group");s.addClass("has-error"),r(".help-inline",s).text(n)},hideFormError:function(){var e=this.$postfixInput.closest(".rp-form-group");e.removeClass("has-error"),r(".help-inline",e).text("")},toggleLoader:function(e){this.$alertLoaderBlock[e]()},submitSettings:function(e){this.validate();if(r(".validate-error",this.$el).length)return;this.hideFormError();var t=this.$postfixInput.val(),n={isCreateDashboard:"true",postfix:t};this.toggleDisableForm(!0),this.toggleLoader("show"),a.generateDemoData(n).done(function(e){this.$postfixInput.val(""),s.ajaxSuccessMessenger("generateDemoData")}.bind(this)).fail(function(e){this.showFormError(e);if(e.status===409){var t=f.project.posfixUniq;s.ajaxFailMessenger(null,"dublPostFix")}else s.ajaxFailMessenger(e)}.bind(this)).always(function(){this.toggleLoader("hide"),this.toggleDisableForm(!1)}.bind(this))},destroy:function(){o.RemovableView.prototype.destroy.call(this)}});return h}),function(e){"use strict";typeof define=="function"&&define.amd?define("spectrum",["jquery"],e):typeof exports=="object"&&typeof module=="object"?module.exports=e(require("jquery")):e(jQuery)}(function(e,t){"use strict";function a(t,n,r,i){var o=[];for(var u=0;u<t.length;u++){var a=t[u];if(a){var f=tinycolor(a),l=f.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";l+=tinycolor.equals(n,a)?" sp-thumb-active":"";var c=f.toString(i.preferredFormat||"rgb"),h=s?"background-color:"+f.toRgbString():"filter:"+f.toFilter();o.push('<span title="'+c+'" data-color="'+f.toRgbString()+'" class="'+l+'"><span class="sp-thumb-inner" style="'+h+';" /></span>')}else{var p="sp-clear-display";o.push(e("<div />").append(e('<span data-color="" style="background-color:transparent;" class="'+p+'"></span>').attr("title",i.noColorSelectedText)).html())}}return"<div class='sp-cf "+r+"'>"+o.join("")+"</div>"}function f(){for(var e=0;e<r.length;e++)r[e]&&r[e].hide()}function l(t,r){var i=e.extend({},n,t);return i.callbacks={move:v(i.move,r),change:v(i.change,r),show:v(i.show,r),hide:v(i.hide,r),beforeShow:v(i.beforeShow,r)},i}function c(n,c){function Tt(){p.showPaletteOnly&&(p.showPalette=!0),ct.text(p.showPaletteOnly?p.togglePaletteMoreText:p.togglePaletteLessText);if(p.palette){F=p.palette.slice(0),I=e.isArray(F[0])?F:[F],q={};for(var t=0;t<I.length;t++)for(var n=0;n<I[t].length;n++){var r=tinycolor(I[t][n]).toRgbString();q[r]=!0}}Q.toggleClass("sp-flat",v),Q.toggleClass("sp-input-disabled",!p.showInput),Q.toggleClass("sp-alpha-enabled",p.showAlpha),Q.toggleClass("sp-clear-enabled",xt),Q.toggleClass("sp-buttons-disabled",!p.showButtons),Q.toggleClass("sp-palette-buttons-disabled",!p.togglePaletteOnly),Q.toggleClass("sp-palette-disabled",!p.showPalette),Q.toggleClass("sp-palette-only",p.showPaletteOnly),Q.toggleClass("sp-initial-disabled",!p.showInitial),Q.addClass(p.className).addClass(p.containerClassName),$t()}function Nt(){function n(t){return t.data&&t.data.ignore?(qt(e(t.target).closest(".sp-thumb-el").data("color")),zt()):(qt(e(t.target).closest(".sp-thumb-el").data("color")),zt(),Vt(!0),p.hideAfterPaletteSelect&&Ft()),!1}i&&Q.find("*:not(input)").attr("unselectable","on"),Tt(),dt&&J.after(vt).hide(),xt||ft.hide();if(v)J.after(Q).hide();else{var t=p.appendTo==="parent"?J.parent():e(p.appendTo);t.length!==1&&(t=e("body")),t.append(Q)}Ct(),mt.bind("click.spectrum touchstart.spectrum",function(t){K||Pt(),t.stopPropagation(),e(t.target).is("input")||t.preventDefault()}),(J.is(":disabled")||p.disabled===!0)&&Gt(),Q.click(d),st.change(Dt),st.bind("paste",function(){setTimeout(Dt,1)}),st.keydown(function(e){e.keyCode==13&&Dt()}),at.text(p.cancelText),at.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),It(),Ft()}),ft.attr("title",p.clearText),ft.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),St=!0,zt(),v&&Vt(!0)}),lt.text(p.chooseText),lt.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),i&&st.is(":focus")&&st.trigger("change"),Ut()&&(Vt(!0),Ft())}),ct.text(p.showPaletteOnly?p.togglePaletteMoreText:p.togglePaletteLessText),ct.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),p.showPaletteOnly=!p.showPaletteOnly,!p.showPaletteOnly&&!v&&Q.css("left","-="+(G.outerWidth(!0)+5)),Tt()}),m(rt,function(e,t,n){j=e/M,St=!1,n.shiftKey&&(j=Math.round(j*10)/10),zt()},Mt,_t),m(et,function(e,t){P=parseFloat(t/A),St=!1,p.showAlpha||(j=1),zt()},Mt,_t),m(Y,function(e,t,n){if(!n.shiftKey)W=null;else if(!W){var r=H*C,i=k-B*k,s=Math.abs(e-r)>Math.abs(t-i);W=s?"x":"y"}var o=!W||W==="x",u=!W||W==="y";o&&(H=parseFloat(e/C)),u&&(B=parseFloat((k-t)/k)),St=!1,p.showAlpha||(j=1),zt()},Mt,_t),yt?(qt(yt),Wt(),wt=p.preferredFormat||tinycolor(yt).format,kt(yt)):Wt(),v&&Ht();var r=i?"mousedown.spectrum":"click.spectrum touchstart.spectrum";ot.delegate(".sp-thumb-el",r,n),ut.delegate(".sp-thumb-el:nth-child(1)",r,{ignore:!0},n)}function Ct(){if(w&&window.localStorage){try{var t=window.localStorage[w].split(",#");t.length>1&&(delete window.localStorage[w],e.each(t,function(e,t){kt(t)}))}catch(n){}try{R=window.localStorage[w].split(";")}catch(n){}}}function kt(t){if(b){var n=tinycolor(t).toRgbString();if(!q[n]&&e.inArray(n,R)===-1){R.push(n);while(R.length>U)R.shift()}if(w&&window.localStorage)try{window.localStorage[w]=R.join(";")}catch(r){}}}function Lt(){var e=[];if(p.showPalette)for(var t=0;t<R.length;t++){var n=tinycolor(R[t]).toRgbString();q[n]||e.push(R[t])}return e.reverse().slice(0,p.maxSelectionSize)}function At(){var t=Rt(),n=e.map(I,function(e,n){return a(e,t,"sp-palette-row sp-palette-row-"+n,p)});Ct(),R&&n.push(a(Lt(),t,"sp-palette-row sp-palette-row-selection",p)),ot.html(n.join(""))}function Ot(){if(p.showInitial){var e=bt,t=Rt();ut.html(a([e,t],t,"sp-palette-row-initial",p))}}function Mt(){(k<=0||C<=0||A<=0)&&$t(),N=!0,Q.addClass(z),W=null,J.trigger("dragstart.spectrum",[Rt()])}function _t(){N=!1,Q.removeClass(z),J.trigger("dragstop.spectrum",[Rt()])}function Dt(){var e=st.val();if(e!==null&&e!==""||!xt){var t=tinycolor(e);t.isValid()?(qt(t),Vt(!0)):st.addClass("sp-validation-error")}else qt(null),Vt(!0)}function Pt(){T?Ft():Ht()}function Ht(){var t=e.Event("beforeShow.spectrum");if(T){$t();return}J.trigger(t,[Rt()]);if(S.beforeShow(Rt())===!1||t.isDefaultPrevented())return;f(),T=!0,e(X).bind("keydown.spectrum",Bt),e(X).bind("click.spectrum",jt),e(window).bind("resize.spectrum",x),vt.addClass("sp-active"),Q.removeClass("sp-hidden"),$t(),Wt(),bt=Rt(),Ot(),S.show(bt),J.trigger("show.spectrum",[bt])}function Bt(e){e.keyCode===27&&Ft()}function jt(e){if(e.button==2)return;if(N)return;Et?Vt(!0):It(),Ft()}function Ft(){if(!T||v)return;T=!1,e(X).unbind("keydown.spectrum",Bt),e(X).unbind("click.spectrum",jt),e(window).unbind("resize.spectrum",x),vt.removeClass("sp-active"),Q.addClass("sp-hidden"),S.hide(Rt()),J.trigger("hide.spectrum",[Rt()])}function It(){qt(bt,!0)}function qt(e,t){if(tinycolor.equals(e,Rt())){Wt();return}var n,r;!e&&xt?St=!0:(St=!1,n=tinycolor(e),r=n.toHsv(),P=r.h%360/360,H=r.s,B=r.v,j=r.a),Wt(),n&&n.isValid()&&!t&&(wt=p.preferredFormat||n.getFormat())}function Rt(e){return e=e||{},xt&&St?null:tinycolor.fromRatio({h:P,s:H,v:B,a:Math.round(j*100)/100},{format:e.format||wt})}function Ut(){return!st.hasClass("sp-validation-error")}function zt(){Wt(),S.move(Rt()),J.trigger("move.spectrum",[Rt()])}function Wt(){st.removeClass("sp-validation-error"),Xt();var e=tinycolor.fromRatio({h:P,s:1,v:1});Y.css("background-color",e.toHexString());var t=wt;j<1&&(j!==0||t!=="name")&&(t==="hex"||t==="hex3"||t==="hex6"||t==="name")&&(t="rgb");var n=Rt({format:t}),r="";gt.removeClass("sp-clear-display"),gt.css("background-color","transparent");if(!n&&xt)gt.addClass("sp-clear-display");else{var o=n.toHexString(),u=n.toRgbString();s||n.alpha===1?gt.css("background-color",u):(gt.css("background-color","transparent"),gt.css("filter",n.toFilter()));if(p.showAlpha){var a=n.toRgb();a.a=0;var f=tinycolor(a).toRgbString(),l="linear-gradient(left, "+f+", "+o+")";i?nt.css("filter",tinycolor(f).toFilter({gradientType:1},o)):(nt.css("background","-webkit-"+l),nt.css("background","-moz-"+l),nt.css("background","-ms-"+l),nt.css("background","linear-gradient(to right, "+f+", "+o+")"))}r=n.toString(t)}p.showInput&&st.val(r),p.showPalette&&At(),Ot()}function Xt(){var e=H,t=B;if(xt&&St)it.hide(),tt.hide(),Z.hide();else{it.show(),tt.show(),Z.show();var n=e*C,r=k-t*k;n=Math.max(-L,Math.min(C-L,n-L)),r=Math.max(-L,Math.min(k-L,r-L)),Z.css({top:r+"px",left:n+"px"});var i=j*M;it.css({left:i-_/2+"px"});var s=P*A;tt.css({top:s-D+"px"})}}function Vt(e){var t=Rt(),n="",r=!tinycolor.equals(t,bt);t&&(n=t.toString(wt),kt(t)),ht&&J.val(n),e&&r&&(S.change(t),J.trigger("change",[t]))}function $t(){if(!T)return;C=Y.width(),k=Y.height(),L=Z.height(),O=et.width(),A=et.height(),D=tt.height(),M=rt.width(),_=it.width(),v||(Q.css("position","absolute"),p.offset?Q.offset(p.offset):Q.offset(h(Q,mt))),Xt(),p.showPalette&&At(),J.trigger("reflow.spectrum")}function Jt(){J.show(),mt.unbind("click.spectrum touchstart.spectrum"),Q.remove(),vt.remove(),r[Zt.id]=null}function Kt(n,r){if(n===t)return e.extend({},p);if(r===t)return p[n];p[n]=r,n==="preferredFormat"&&(wt=p.preferredFormat),Tt()}function Qt(){K=!1,J.attr("disabled",!1),mt.removeClass("sp-disabled")}function Gt(){Ft(),K=!0,J.attr("disabled",!0),mt.addClass("sp-disabled")}function Yt(e){p.offset=e,$t()}var p=l(c,n),v=p.flat,b=p.showSelectionPalette,w=p.localStorageKey,E=p.theme,S=p.callbacks,x=g($t,10),T=!1,N=!1,C=0,k=0,L=0,A=0,O=0,M=0,_=0,D=0,P=0,H=0,B=0,j=1,F=[],I=[],q={},R=p.selectionPalette.slice(0),U=p.maxSelectionSize,z="sp-dragging",W=null,X=n.ownerDocument,V=X.body,J=e(n),K=!1,Q=e(u,X).addClass(E),G=Q.find(".sp-picker-container"),Y=Q.find(".sp-color"),Z=Q.find(".sp-dragger"),et=Q.find(".sp-hue"),tt=Q.find(".sp-slider"),nt=Q.find(".sp-alpha-inner"),rt=Q.find(".sp-alpha"),it=Q.find(".sp-alpha-handle"),st=Q.find(".sp-input"),ot=Q.find(".sp-palette"),ut=Q.find(".sp-initial"),at=Q.find(".sp-cancel"),ft=Q.find(".sp-clear"),lt=Q.find(".sp-choose"),ct=Q.find(".sp-palette-toggle"),ht=J.is("input"),pt=ht&&J.attr("type")==="color"&&y(),dt=ht&&!v,vt=dt?e(o).addClass(E).addClass(p.className).addClass(p.replacerClassName):e([]),mt=dt?vt:J,gt=vt.find(".sp-preview-inner"),yt=p.color||ht&&J.val(),bt=!1,wt=p.preferredFormat,Et=!p.showButtons||p.clickoutFiresChange,St=!yt,xt=p.allowEmpty&&!pt;Nt();var Zt={show:Ht,hide:Ft,toggle:Pt,reflow:$t,option:Kt,enable:Qt,disable:Gt,offset:Yt,set:function(e){qt(e),Vt()},get:Rt,destroy:Jt,container:Q};return Zt.id=r.push(Zt)-1,Zt}function h(t,n){var r=0,i=t.outerWidth(),s=t.outerHeight(),o=n.outerHeight(),u=t[0].ownerDocument,a=u.documentElement,f=a.clientWidth+e(u).scrollLeft(),l=a.clientHeight+e(u).scrollTop(),c=n.offset();return c.top+=o,c.left-=Math.min(c.left,c.left+i>f&&f>i?Math.abs(c.left+i-f):0),c.top-=Math.min(c.top,c.top+s>l&&l>s?Math.abs(s+o-r):r),c}function p(){}function d(e){e.stopPropagation()}function v(e,t){var n=Array.prototype.slice,r=n.call(arguments,2);return function(){return e.apply(t,r.concat(n.call(arguments)))}}function m(t,n,r,s){function p(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function d(e){if(u){if(i&&o.documentMode<9&&!e.button)return m();var r=e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0],s=r&&r.pageX||e.pageX,h=r&&r.pageY||e.pageY,d=Math.max(0,Math.min(s-a.left,l)),v=Math.max(0,Math.min(h-a.top,f));c&&p(e),n.apply(t,[d,v,e])}}function v(n){var i=n.which?n.which==3:n.button==2;!i&&!u&&r.apply(t,arguments)!==!1&&(u=!0,f=e(t).height(),l=e(t).width(),a=e(t).offset(),e(o).bind(h),e(o.body).addClass("sp-dragging"),d(n),p(n))}function m(){u&&(e(o).unbind(h),e(o.body).removeClass("sp-dragging"),setTimeout(function(){s.apply(t,arguments)},0)),u=!1}n=n||function(){},r=r||function(){},s=s||function(){};var o=document,u=!1,a={},f=0,l=0,c="ontouchstart"in window,h={};h.selectstart=p,h.dragstart=p,h["touchmove mousemove"]=d,h["touchend mouseup"]=m,e(t).bind("touchstart mousedown",v)}function g(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null,e.apply(i,s)};n&&clearTimeout(r);if(n||!r)r=setTimeout(o,t)}}function y(){return e.fn.spectrum.inputTypeColorSupport()}var n={beforeShow:p,move:p,change:p,show:p,hide:p,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},r=[],i=!!/msie/i.exec(window.navigator.userAgent),s=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div"),n=t.style;return n.cssText="background-color:rgba(0,0,0,.5)",e(n.backgroundColor,"rgba")||e(n.backgroundColor,"hsla")}(),o=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),u=function(){var e="";if(i)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),b="spectrum.id";e.fn.spectrum=function(t,n){if(typeof t=="string"){var i=this,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=r[e(this).data(b)];if(n){var o=n[t];if(!o)throw new Error("Spectrum: no such method: '"+t+"'");t=="get"?i=n.get():t=="container"?i=n.container:t=="option"?i=n.option.apply(n,s):t=="destroy"?(n.destroy(),e(this).removeData(b)):o.apply(n,s)}}),i}return this.spectrum("destroy").each(function(){var n=e.extend({},t,e(this).data()),r=c(this,n);e(this).data(b,r.id)})},e.fn.spectrum.load=!0,e.fn.spectrum.loadOpts={},e.fn.spectrum.draggable=m,e.fn.spectrum.defaults=n,e.fn.spectrum.inputTypeColorSupport=function w(){if(typeof w._cachedResult=="undefined"){var t=e("<input type='color'/>")[0];w._cachedResult=t.type==="color"&&t.value!==""}return w._cachedResult},e.spectrum={},e.spectrum.localization={},e.spectrum.palettes={},e.fn.spectrum.processNativeColorInputs=function(){var t=e("input[type=color]");t.length&&!y()&&t.spectrum({preferredFormat:"hex6"})},function(){function f(e){var t={r:0,g:0,b:0},n=1,r=!1,i=!1;return typeof e=="string"&&(e=W(e)),typeof e=="object"&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(t=l(e.r,e.g,e.b),r=!0,i=String(e.r).substr(-1)==="%"?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=q(e.s),e.v=q(e.v),t=d(e.h,e.s,e.v),r=!0,i="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=q(e.s),e.l=q(e.l),t=h(e.h,e.s,e.l),r=!0,i="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=D(n),{ok:r,format:e.format||i,r:s(255,o(t.r,0)),g:s(255,o(t.g,0)),b:s(255,o(t.b,0)),a:n}}function l(e,t,n){return{r:P(e,255)*255,g:P(t,255)*255,b:P(n,255)*255}}function c(e,t,n){e=P(e,255),t=P(t,255),n=P(n,255);var r=o(e,t,n),i=s(e,t,n),u,a,f=(r+i)/2;if(r==i)u=a=0;else{var l=r-i;a=f>.5?l/(2-r-i):l/(r+i);switch(r){case e:u=(t-n)/l+(t<n?6:0);break;case t:u=(n-e)/l+2;break;case n:u=(e-t)/l+4}u/=6}return{h:u,s:a,l:f}}function h(e,t,n){function o(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var r,i,s;e=P(e,360),t=P(t,100),n=P(n,100);if(t===0)r=i=s=n;else{var u=n<.5?n*(1+t):n+t-n*t,a=2*n-u;r=o(a,u,e+1/3),i=o(a,u,e),s=o(a,u,e-1/3)}return{r:r*255,g:i*255,b:s*255}}function p(e,t,n){e=P(e,255),t=P(t,255),n=P(n,255);var r=o(e,t,n),i=s(e,t,n),u,a,f=r,l=r-i;a=r===0?0:l/r;if(r==i)u=0;else{switch(r){case e:u=(t-n)/l+(t<n?6:0);break;case t:u=(n-e)/l+2;break;case n:u=(e-t)/l+4}u/=6}return{h:u,s:a,v:f}}function d(e,t,n){e=P(e,360)*6,t=P(t,100),n=P(n,100);var i=r.floor(e),s=e-i,o=n*(1-t),u=n*(1-s*t),a=n*(1-(1-s)*t),f=i%6,l=[n,u,o,o,a,n][f],c=[a,n,n,u,o,o][f],h=[o,o,a,n,n,u][f];return{r:l*255,g:c*255,b:h*255}}function v(e,t,n,r){var s=[I(i(e).toString(16)),I(i(t).toString(16)),I(i(n).toString(16))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function m(e,t,n,r){var s=[I(R(r)),I(i(e).toString(16)),I(i(t).toString(16)),I(i(n).toString(16))];return s.join("")}function g(e,t){t=t===0?0:t||10;var n=a(e).toHsl();return n.s-=t/100,n.s=H(n.s),a(n)}function y(e,t){t=t===0?0:t||10;var n=a(e).toHsl();return n.s+=t/100,n.s=H(n.s),a(n)}function b(e){return a(e).desaturate(100)}function w(e,t){t=t===0?0:t||10;var n=a(e).toHsl();return n.l+=t/100,n.l=H(n.l),a(n)}function E(e,t){t=t===0?0:t||10;var n=a(e).toRgb();return n.r=o(0,s(255,n.r-i(255*-(t/100)))),n.g=o(0,s(255,n.g-i(255*-(t/100)))),n.b=o(0,s(255,n.b-i(255*-(t/100)))),a(n)}function S(e,t){t=t===0?0:t||10;var n=a(e).toHsl();return n.l-=t/100,n.l=H(n.l),a(n)}function x(e,t){var n=a(e).toHsl(),r=(i(n.h)+t)%360;return n.h=r<0?360+r:r,a(n)}function T(e){var t=a(e).toHsl();return t.h=(t.h+180)%360,a(t)}function N(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+120)%360,s:t.s,l:t.l}),a({h:(n+240)%360,s:t.s,l:t.l})]}function C(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+90)%360,s:t.s,l:t.l}),a({h:(n+180)%360,s:t.s,l:t.l}),a({h:(n+270)%360,s:t.s,l:t.l})]}function k(e){var t=a(e).toHsl(),n=t.h;return[a(e),a({h:(n+72)%360,s:t.s,l:t.l}),a({h:(n+216)%360,s:t.s,l:t.l})]}function L(e,t,n){t=t||6,n=n||30;var r=a(e).toHsl(),i=360/n,s=[a(e)];for(r.h=(r.h-(i*t>>1)+720)%360;--t;)r.h=(r.h+i)%360,s.push(a(r));return s}function A(e,t){t=t||6;var n=a(e).toHsv(),r=n.h,i=n.s,s=n.v,o=[],u=1/t;while(t--)o.push(a({h:r,s:i,v:s})),s=(s+u)%1;return o}function _(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function D(e){e=parseFloat(e);if(isNaN(e)||e<0||e>1)e=1;return e}function P(e,t){j(e)&&(e="100%");var n=F(e);return e=s(t,o(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),r.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function H(e){return s(1,o(0,e))}function B(e){return parseInt(e,16)}function j(e){return typeof e=="string"&&e.indexOf(".")!=-1&&parseFloat(e)===1}function F(e){return typeof e=="string"&&e.indexOf("%")!=-1}function I(e){return e.length==1?"0"+e:""+e}function q(e){return e<=1&&(e=e*100+"%"),e}function R(e){return Math.round(parseFloat(e)*255).toString(16)}function U(e){return B(e)/255}function W(n){n=n.replace(e,"").replace(t,"").toLowerCase();var r=!1;if(O[n])n=O[n],r=!0;else if(n=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var i;return(i=z.rgb.exec(n))?{r:i[1],g:i[2],b:i[3]}:(i=z.rgba.exec(n))?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=z.hsl.exec(n))?{h:i[1],s:i[2],l:i[3]}:(i=z.hsla.exec(n))?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=z.hsv.exec(n))?{h:i[1],s:i[2],v:i[3]}:(i=z.hsva.exec(n))?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=z.hex8.exec(n))?{a:U(i[1]),r:B(i[2]),g:B(i[3]),b:B(i[4]),format:r?"name":"hex8"}:(i=z.hex6.exec(n))?{r:B(i[1]),g:B(i[2]),b:B(i[3]),format:r?"name":"hex"}:(i=z.hex3.exec(n))?{r:B(i[1]+""+i[1]),g:B(i[2]+""+i[2]),b:B(i[3]+""+i[3]),format:r?"name":"hex"}:!1}var e=/^[\s,#]+/,t=/\s+$/,n=0,r=Math,i=r.round,s=r.min,o=r.max,u=r.random,a=function(e,t){e=e?e:"",t=t||{};if(e instanceof a)return e;if(!(this instanceof a))return new a(e,t);var r=f(e);this._originalInput=e,this._r=r.r,this._g=r.g,this._b=r.b,this._a=r.a,this._roundA=i(100*this._a)/100,this._format=t.format||r.format,this._gradientType=t.gradientType,this._r<1&&(this._r=i(this._r)),this._g<1&&(this._g=i(this._g)),this._b<1&&(this._b=i(this._b)),this._ok=r.ok,this._tc_id=n++};a.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},setAlpha:function(e){return this._a=D(e),this._roundA=i(100*this._a)/100,this},toHsv:function(){var e=p(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=p(this._r,this._g,this._b),t=i(e.h*360),n=i(e.s*100),r=i(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=c(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=c(this._r,this._g,this._b),t=i(e.h*360),n=i(e.s*100),r=i(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return v(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return m(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:i(this._r),g:i(this._g),b:i(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+i(this._r)+", "+i(this._g)+", "+i(this._b)+")":"rgba("+i(this._r)+", "+i(this._g)+", "+i(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:i(P(this._r,255)*100)+"%",g:i(P(this._g,255)*100)+"%",b:i(P(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+i(P(this._r,255)*100)+"%, "+i(P(this._g,255)*100)+"%, "+i(P(this._b,255)*100)+"%)":"rgba("+i(P(this._r,255)*100)+"%, "+i(P(this._g,255)*100)+"%, "+i(P(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:M[v(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+m(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var i=a(e);n=i.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,i=!t&&r&&(e==="hex"||e==="hex6"||e==="hex3"||e==="name");if(i)return e==="name"&&this._a===0?this.toName():this.toRgbString();e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString());if(e==="hex"||e==="hex6")n=this.toHexString();return e==="hex3"&&(n=this.toHexString(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString()},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(E,arguments)},darken:function(){return this._applyModification(S,arguments)},desaturate:function(){return this._applyModification(g,arguments)},saturate:function(){return this._applyModification(y,arguments)},greyscale:function(){return this._applyModification(b,arguments)},spin:function(){return this._applyModification(x,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(L,arguments)},complement:function(){return this._applyCombination(T,arguments)},monochromatic:function(){return this._applyCombination(A,arguments)},splitcomplement:function(){return this._applyCombination(k,arguments)},triad:function(){return this._applyCombination(N,arguments)},tetrad:function(){return this._applyCombination(C,arguments)}},a.fromRatio=function(e,t){if(typeof e=="object"){var n={};for(var r in e)e.hasOwnProperty(r)&&(r==="a"?n[r]=e[r]:n[r]=q(e[r]));e=n}return a(e,t)},a.equals=function(e,t){return!e||!t?!1:a(e).toRgbString()==a(t).toRgbString()},a.random=function(){return a.fromRatio({r:u(),g:u(),b:u()})},a.mix=function(e,t,n){n=n===0?0:n||50;var r=a(e).toRgb(),i=a(t).toRgb(),s=n/100,o=s*2-1,u=i.a-r.a,f;o*u==-1?f=o:f=(o+u)/(1+o*u),f=(f+1)/2;var l=1-f,c={r:i.r*f+r.r*l,g:i.g*f+r.g*l,b:i.b*f+r.b*l,a:i.a*s+r.a*(1-s)};return a(c)},a.readability=function(e,t){var n=a(e),r=a(t),i=n.toRgb(),s=r.toRgb(),o=n.getBrightness(),u=r.getBrightness(),f=Math.max(i.r,s.r)-Math.min(i.r,s.r)+Math.max(i.g,s.g)-Math.min(i.g,s.g)+Math.max(i.b,s.b)-Math.min(i.b,s.b);return{brightness:Math.abs(o-u),color:f}},a.isReadable=function(e,t){var n=a.readability(e,t);return n.brightness>125&&n.color>500},a.mostReadable=function(e,t){var n=null,r=0,i=!1;for(var s=0;s<t.length;s++){var o=a.readability(e,t[s]),u=o.brightness>125&&o.color>500,f=3*(o.brightness/125)+o.color/500;if(u&&!i||u&&i&&f>r||!u&&!i&&f>r)i=u,r=f,n=a(t[s])}return n};var O=a.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},M=a.hexNames=_(O),z=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+i),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+i),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+i),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=a}(),e(function(){e.fn.spectrum.load&&e.fn.spectrum.processNativeColorInputs()})}),define("components/ColorPicker",["require","exports","module","jquery","backbone","util","spectrum"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util");e("spectrum");var o=i.View.extend({className:"colorpicker-spectrum",template:"tpl-component-colorpicker",initialize:function(e){this.initColor=e.initColor||"#000000",this.render()},render:function(){this.$el.html(s.templates(this.template)),this.colorPicker=r("[data-js-colorpicker-holder]",this.$el).spectrum(this.config())},config:function(){var e=this;return{color:e.initColor,showInput:!0,allowEmpty:!1,showPalette:!0,showSelectionPalette:!1,clickoutFiresChange:!0,showInitial:!1,showButtons:!1,preferredFormat:"hex",appendTo:e.el,palette:[["#f48fb1","#cc92d6","#b39ddb","#81d4fa","#8de1ec","#80cbc4","#c5e1a5","#e6ee9c","#ffcc80","#ffab91"],["#f50057","#d500f9","#651fff","#00b0ff","#00e5ff","#1de9b6","#76ff03","#c6ff00","#ffc400","#ff3d00"],["#ad1457","#6a1b9a","#4527a0","#0277bd","#00838f","#00695c","#558b2f","#9e9d24","#ff8f00","#d84315"]],show:function(t){e.colorPicker.spectrum("set",e.initColor)},hide:function(t){e.trigger("change:color",t.toHexString())}}},getColor:function(){return this.colorPicker.spectrum("get").toHexString()},setColor:function(e){this.colorPicker.spectrum("set",e)}});return o}),define("project",["require","exports","module","jquery","backbone","util","core/components","dataUrlResolver","app","localization","coreService","helpers","d3","nvd3","model/SingletonAppModel","defectType/SingletonDefectTypeCollection","defectType/DefectTypeModel","DemoDataSettingsView","modals/modalConfirm","components/ColorPicker"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("core/components"),u=e("dataUrlResolver"),a=e("app"),f=e("localization"),l=e("coreService"),c=e("helpers"),h=e("d3"),p=e("nvd3"),d=e("model/SingletonAppModel"),v=e("defectType/SingletonDefectTypeCollection"),m=e("defectType/DefectTypeModel"),g=e("DemoDataSettingsView"),y=e("modals/modalConfirm"),b=e("components/ColorPicker"),w=a.getInstance(),E=i.View.extend({initialize:function(e){this.contextName=e.contextName,this.context=e.context,this.subContext=e.subContext},render:function(){return this.$header=(new S({header:this.context.getMainView().$header})).render(),this.$body=(new x({context:this.context,body:this.context.getMainView().$body,tab:this.subContext})).render(),this},update:function(e){this.$body.update(e.subContext)},destroy:function(){this.$header.destroy(),this.$body.destroy(),this.undelegateEvents(),this.unbind(),r(".select2-drop-active").remove(),delete this}}),S=o.BaseView.extend({tpl:"tpl-project-settings-header",initialize:function(e){this.$el=e.header},render:function(){return this.$el.html(s.templates(this.tpl)),this}}),x=o.BaseView.extend({initialize:function(e){this.context=e.context,this.$el=e.body,this.tab=e.tab},render:function(){return this.projectSettings=(new C({holder:this.$el,projectId:w.project.projectId,tab:this.tab})).render(),this},update:function(e){this.tab=e,this.projectSettings.update(this.tab)},destroy:function(){this.projectSettings&&this.projectSettings.destroy(),o.BaseView.prototype.destroy.call(this)}}),T=i.Model.extend({defaults:{interruptedJob:w.forSettings.interruptedJob[0].value,isAutoAnalyzerEnabled:!0,keepLogs:w.forSettings.keepLogs[0].value,keepScreenshots:w.forSettings.keepScreenshots[0].value,projectSpecific:w.forSettings.projectSpecific[0].value},getProjectSettings:function(){var e={interruptedJob:this.get("interruptedJob"),isAutoAnalyzerEnabled:this.get("isAutoAnalyzerEnabled"),keepLogs:this.get("keepLogs"),keepScreenshots:this.get("keepScreenshots"),projectSpecific:this.get("projectSpecific")};return{configuration:e}}}),N=i.Model.extend({defaults:{emailEnabled:!1,fromAddress:"reportportal@epam.com",emailCases:[]},getProjectSettings:function(e){var t=JSON.parse(JSON.stringify(this.get("emailCases")));t=r.grep(t,function(t){return r.inArray(t.id,e)==-1}),_.each(t,function(e){delete e.id});var n={emailEnabled:this.get("emailEnabled"),fromAddress:this.get("fromAddress"),emailCases:t};return{configuration:n}}}),C=o.BaseView.extend({initialize:function(e){this.$el=e.holder,this.adminPage=e.adminPage,this.projectId=e.projectId,this.tab=e.tab||"general",this.appModel=new d},tpl:"tpl-project-settings-shell",render:function(){return this.$el.html(s.templates(this.tpl,{tab:this.tab,projectId:this.projectId,generateDemoDataAccess:s.isInPrivilegedGroup()||this.isPersonalProjectOwner(),adminPage:this.adminPage})),this.$generalHolder=r("#generalSettings",this.$el),this.$notificationsHolder=r("#notificationsSettings",this.$el),this.$btslHolder=r("#btsSettings",this.$el),this.$defect=r("#defectTypes",this.$el),this.$demoDataHolder=r("[data-js-demo-data]",this.$el),this[this.tab+"Render"](),this},update:function(e,t){r(".users-typeahead.launches").select2("close"),r(".users-typeahead.tags").select2("close"),r(".users-typeahead.recipients").select2("close"),this.tab=e||"general",t||r("[data-action="+this.tab+"]",this.$el).tab("show"),this[this.tab+"Render"]()},generalRender:function(){this.generalSettings||(this.generalSettings=(new k({holder:this.$generalHolder})).render())},isPersonalProjectOwner:function(){var e=w.userModel.get("name"),t=this.appModel.get("projectId"),n=this.appModel.isPersonalProject();return n&&t===e+"_personal"},notificationsRender:function(){this.notificationsView||(this.notificationsView=(new L({holder:this.$notificationsHolder})).render())},btsRender:function(){this.btsView||(this.btsView=(new O({holder:this.$btslHolder,externalSystems:w.project.configuration.externalSystem,settings:w.forSettings,access:s.isInPrivilegedGroup()})).render())},defectRender:function(){var e=w.userModel.get("projects");this.defectView||(this.defectView=(new H({holder:this.$defect,settings:w.project,roles:e[this.appModel.get("projectId")],userRole:w.userModel.get("userRole")})).render())},demoDataRender:function(){this.demoDataView||(this.demoDataView=(new g({holder:this.$demoDataHolder})).render())},events:{"click .tab.settings":"renderTab"},renderTab:function(e){var t=r(e.currentTarget),n=t.data("action");w.router.navigate(t.attr("href"),{silent:!0}),this.update(n,!0)},destroy:function(){this.generalSettings&&this.generalSettings.destroy(),this.generalSettings=null,this.notificationsView&&this.notificationsView.destroy(),this.notificationsView=null,this.btsView&&this.btsView.destroy(),this.btsView=null,this.defectView&&this.defectView.destroy(),this.defectView=null,this.demoDataView&&this.demoDataView.destroy(),this.demoDataView=null,i.Events.off(null,null,this),o.BaseView.prototype.destroy.call(this)}}),k=o.BaseView.extend({initialize:function(e){this.$el=e.holder,this.model=new T(w.project.configuration)},tpl:"tpl-project-settings-general",render:function(){var e=_.merge(this.model.toJSON(),{edit:w.project&&w.project.projectId,currentProject:w.project.projectId,access:w.userModel.hasPermissions(),settings:w.forSettings});return this.$el.html(s.templates(this.tpl,e)),this},events:{"click #submit-settings":"submitSettings","click .dropdown-menu a":"selectProp"},selectProp:function(e){e.preventDefault();var t=r(e.target),n=t.closest(".open").find(".dropdown-toggle"),i=t.data("value")?t.data("value"):t.text(),s=n.attr("id");s==="isAutoAnalyzerEnabled"&&(i=i==="ON"),this.model.set(s,i),r(".select-value",n).text(t.text())},clearFormErrors:function(){r("div.error-block",this.$el).is(":visible")&&(r(".rp-form-group",this.$el).removeClass("has-error"),r("div.error-block",this.$el).empty().hide())},showFormErrors:function(e,t){var n=e.closest(".rp-form-group");n.addClass("has-error"),r("div.error-block",n).empty().html(t).show()},hideFormsErrors:function(e){var t=e.closest(".rp-form-group");t.removeClass("has-error"),r("div.error-block",t).empty().hide()},submitSettings:function(e){var t=this.model.getProjectSettings();this.clearFormErrors(),l.updateProject(t).done(function(e){_.merge(w.project.configuration,t.configuration),s.ajaxSuccessMessenger("updateProjectSettings")}).fail(function(e){s.ajaxFailMessenger(e,"updateProjectSettings")})},destroy:function(){r("body > #select2-drop-mask, body > .select2-sizer").remove(),o.RemovableView.prototype.destroy.call(this)}}),L=o.BaseView.extend({initialize:function(e){this.$el=e.holder,this.updateIds(),this.model=new N(w.project.configuration.emailConfiguration),this.users=[],this.isValidEmail=!0},emailCaseId:0,tpl:"tpl-project-settings-notifications",tplItem:"tpl-project-settings-notifications-item",updateIds:function(e){var t=e||w.project.configuration.emailConfiguration.emailCases;for(var n=0;n<t.length;n++)t[n].id=this.emailCaseId,this.emailCaseId++},render:function(){var e=_.merge(this.model.toJSON(),{edit:w.project&&w.project.projectId,currentProject:w.project.projectId,access:w.userModel.hasPermissions(),settings:w.forSettings});return this.$el.html(s.templates(this.tpl,e)),this.$notificationArray=r("#notificationArray",this.$el),this.$notificationArray.html(s.templates(this.tplItem,e)),this.$emailBlock=r("#emailNotificationsSettings",this.$el),this.model.get("emailEnabled")&&this.$emailBlock.show(),this.renderEmailCases(),this},initValidators:function(){var e=this;s.bootValidator(r("#from",this.$el),[{validator:"required"},{validator:"matchRegex",type:"emailMatchRegex",pattern:w.patterns.email},{validator:"minMaxRequired",type:"emailNotification",min:5,max:256}]),r("#from",this.$el).on("validation::change",function(t,n){n.valid&&e.model.set("fromAddress",n.value)})},renderEmailCases:function(){var e=this;r(".email-case-item").each(function(t,n){s.isCustomer()&&!s.isAdmin()?e.setupDisabledRecipients(t):e.filterMembers(!0,t),e.model.get("emailEnabled")&&(e.filterLaunches(t),e.filterTags(t))}),e.initValidators(),e.updateRules(),e.validateRecipients()},setupDisabledRecipients:function(e){var t=this,n=t.getRecipients(e);t.$recipients=r("input.recipients"),t.$launchOwner=r("input.launchOwner"),t.$recipients&&t.$recipients.length&&(s.setupSelect2WhithScroll(t.$recipients.eq(e),{tags:n}),t.$recipients.eq(e).select2("val",_.pluck(n,"id")),t.$recipients.eq(e).prop("disabled",!0)),t.$launchOwner.eq(e).prop("disabled",!0)},events:{"click #submit-notifications":"submitNotifications","click .dropdown-menu a":"selectProp","click .launchOwner":"selectOwner","click #add-notification-rule":"addRule","click .remove-email-item":"removeRule","click .email-case-label":"removeRule"},addRule:function(){var e=this,t=_.merge(this.model.toJSON(),{edit:w.project&&w.project.projectId,currentProject:w.project.projectId,access:w.userModel.hasPermissions(),settings:w.forSettings});t.addRule=!0;var n=this.model.get("emailCases"),i={launchNames:[],recipients:["OWNER"],sendCase:"ALWAYS",tags:[],id:e.emailCaseId};t.newCase=i,n.push(i),this.model.set("emailCases",n),this.$notificationArray.append(s.templates(this.tplItem,t)),e.updateRules(),e.emailCaseId++;var o=r("input.recipients").length-1,u=r(".email-case-item").last().find("input.recipients");this.filterMembers(!0,o),this.filterLaunches(o),this.filterTags(o)},updateRules:function(){var e=r(".email-case-item",this.$el).length,t=r(".email-case-item",this.$el).find(".remove-email-case:checked").length;if(!w.userModel.hasPermissions())return;if(r(".email-case-item",this.$el).length>1&&e-t>1)r(".remove-email-case",this.$el).prop("disabled",!1),r(".email-case-item",this.$el).prop("disabled",!0).removeClass("the-only");else{r(".remove-email-case:not(:checked)",this.$el).prop("disabled",!0).closest(".email-case-item").addClass("the-only");if(e==t){var n=r(".email-case-item",this.$el).eq(0);this.updateEmailCase(n,"remove"),r(".remove-email-case",n).prop("disabled",!0),n.addClass("the-only")}}},rulesToDelete:[],updateEmailCase:function(e,t){var n=e.find(".remove-email-case"),i=r(".ruleName",e),s=r(".duplicate-error",e);t=="add"?(i.text(f.project.deleteRule),s.text(f.project.ruleDeleted).show(),n.closest(".remove-email-item").addClass("checked"),e.addClass("will-delete"),n.attr("checked","checked").prop("checked",!0),this.rulesToDelete.push(e.data("email-case-id"))):(n.closest(".remove-email-item").removeClass("checked"),e.removeClass("will-delete"),n.attr("checked",!1).prop("checked",!1),i.text(f.project.rule),s.empty().hide(),this.rulesToDelete=r.grep(this.rulesToDelete,function(t){return t!=e.data("email-case-id")}))},removeRule:function(e){var t=this,n=r(e.target).closest(".email-case-item");if(!w.userModel.hasPermissions())return;if(n.hasClass("local-item")){var i=_.reject(this.model.get("emailCases"),function(e){return e.id==n.data("email-case-id")});this.model.set("emailCases",i),n.fadeOut(function(){n.remove(),t.updateRules()});var s=t.model.getProjectSettings();w.project.configuration.emailConfiguration=s.configuration,this.checkCases()}else if(!n.hasClass("the-only")){var o=n.find(".remove-email-case"),u=r(".ruleName",n),a=r(".duplicate-error",n);o.is(":checked")?(this.updateEmailCase(n,"add"),this.checkCases(),this.updateRules()):(this.updateEmailCase(n,"remove"),this.updateRules(),this.checkCases())}},filterMembers:function(e,t,n){this.$recipients=r("input.recipients"),this.$launchOwner=r("input.launchOwner"),s.isInPrivilegedGroup()&&(this.$recipients.prop("disabled",!1),this.$launchOwner.prop("disabled",!1));var i=r(".email-case-item").eq(t||0),o=i.find("input.recipients"),u=[],a=this.getRecipients(t),c=w.forms.filterUser,h=!1,p=this;if(e||!o.hasClass("select2-offscreen"))s.setupSelect2WhithScroll(o,{multiple:!0,minimumInputLength:1,formatInputTooShort:function(e,t){return f.ui.minPrefix+c+f.ui.minSufixAuto},formatResultCssClass:function(e){if((u.length==0||_.indexOf(u,e.text)<0)&&r(".users-typeahead.recipients:not(input)").eq(t).find("input").val()==e.text)return"exact-match"},allowClear:!0,createSearchChoice:function(e,t){if(r(t).filter(function(){return this.text.localeCompare(e)===0}).length===0)return s.validateEmail(e)?{id:e,text:e}:null},initSelection:function(e,t){t({id:e.val(),text:e.val()})},formatNoMatches:function(){return f.project.notFoundRecipients},query:function(e){h=!1;var t=e.term.length,n={results:[]};t>=c?t>256?p.validateRecipients():(t<=256&&p.validateRecipients(),l.getProjectUsersById(e.term).done(function(t){u=[],_.each(t,function(t){t==e.term&&(h=!0),u.push(t),n.results.push({id:t,text:t})}),e.callback(n)}).fail(function(e){s.ajaxFailMessenger(e)})):(u=[],n.results.push({id:e.term,text:e.term}),e.callback(n))}}),this.$recipients.eq(t).on("select2-open",function(){r(".select2-drop-mask").remove()}).on("select2-loaded",function(e){r(".select2-drop-active").removeClass("select2-drop-above"),p.$recipients.eq(t).select2("positionDropdown")}).on("change",function(){var e=r(this).select2("data");p.onChangeRicipients(e,r(this).closest(".email-case-item"))}).select2("data",a),r("#notificationsSettings").on("mousedown.recipients",function(){r(".users-typeahead.recipients").select2("close"),r(".select2-container.recipients").each(function(){var e=r(this);e.find(".select2-input").val().length<=256&&p.validateRecipients()})})},parseUsers:function(e){var t=_.map(e.content,function(e){return{id:e.userId,text:e.userId}});this.users=this.users.concat(t)},onChangeRicipients:function(e,t){var n=_.map(e,function(e){return e.id}),r=t.find(".launchOwner").is(":checked"),i=[];this.hideFormsErrors(t.find(".select2-container.recipients")),this.isValidEmail=!0,_.isEmpty(n)&&!r&&this.showFormErrors(t.find(".select2-container.recipients"),f.project.emptyRecipients),_.each(n,function(e){var t=_.find(this.users,function(t){return t.id===e});t?(i.push(t.id),this.isValidEmail=!0):i.push(e)},this),r&&i.push(t.find(".launchOwner").val());var s=_.findWhere(this.model.get("emailCases"),{id:t.data("email-case-id")});s&&(s.recipients=i),this.checkCases()},onChangeLaunchNames:function(e,t){var n=_.map(e,function(e){return e.id}),r=_.findWhere(this.model.get("emailCases"),{id:t.data("email-case-id")});r.launchNames=n,this.checkCases()},onChangeTags:function(e,t){var n=e?e.trim().split(","):[];this.validateTags(n);var r=_.findWhere(this.model.get("emailCases"),{id:t.data("email-case-id")});r.tags=n,this.checkCases()},getRecipients:function(e){if(this.model){if(e!=undefined){this.$launchOwner=r(".launchOwner");var t=this.model.get("emailCases")[e],n=t.recipients||[],i=[],s=_.reject(n,function(t){return t===this.$launchOwner.eq(e).val()},this);return _.each(s,function(e){var t=_.find(this.users,function(t){return t.id===e});t?i.push(t):i.push({id:e,text:e})},this),i}var n=this.model.get("recipients"),i=[],s=_.reject(n,function(e){return e===this.$launchOwner.val()},this);return _.each(s,function(e){var t=_.find(this.users,function(t){return t.id===e});t?i.push(t):i.push({id:e,text:e})},this),i}},filterTags:function(e){var t=this,n=[],i=[],o=!1;_.each(this.model.get("emailCases")[e].tags,function(e){n.push({id:e,text:e})}),this.$tagsContainer=r("input.users-typeahead.tags"),this.$tagsContainer.eq(e)&&(s.setupSelect2WhithScroll(this.$tagsContainer.eq(e),{multiple:!0,minimumInputLength:1,formatInputTooShort:function(e,t){return f.ui.enterChars},formatResultCssClass:function(t){if((i.length==0||_.indexOf(i,t.text)<0)&&r(".users-typeahead.tags:not(input)").eq(e).find("input").val()==t.text)return"exact-match"},tags:!0,initSelection:function(e,t){var n=e.val().split(","),r=_.map(n,function(e){return e=e.trim(),{id:e,text:e}});t(r)},createSearchChoice:function(e,t){if(r(t).filter(function(){return this.text.localeCompare(e)===0}).length===0)return{id:e,text:e}},query:function(e){o=!1;var n=e.term.length,r={results:[]};n>=1?n>256?t.validateTags(null,!0):(n==256&&t.validateTags(null,!0),l.searchTags(e).done(function(t){i=[],_.each(t,function(t){t==e.term&&(o=!0),i.push(t),r.results.push({id:t,text:t})}),e.callback(r)}).fail(function(e){s.ajaxFailMessenger(e)})):(i=[],r.results.push({id:e.term,text:e.term}),e.callback(r))}}),this.$tagsContainer.eq(e).on("select2-loaded",function(n){r(".select2-drop-active").removeClass("select2-drop-above"),t.$tagsContainer.eq(e).select2("positionDropdown")}).on("select2-open",function(){r(".select2-drop-mask").remove()}).on("change",function(){t.onChangeTags(r(this).val(),r(this).closest(".email-case-item"))}).select2("data",n)),r("#notificationsSettings").on("mousedown.tags",function(){r(".users-typeahead.tags").select2("close");var e=r(".users-typeahead.tags").find(".select2-input");e&&e.length&&e.val().length<=256&&t.validateTags()}),!s.isInPrivilegedGroup()&&this.$tagsContainer&&this.$tagsContainer.select2("disable")},filterLaunches:function(e){var t=this,n=[],i=[],o=!1;_.each(this.model.get("emailCases")[e].launchNames,function(e){i.push({id:e,text:e})}),this.$launchContainer=r("input.users-typeahead.launches"),this.$launchContainer.eq(e)&&(s.setupSelect2WhithScroll(this.$launchContainer.eq(e),{multiple:!0,minimumInputLength:1,formatInputTooShort:function(e,t){return f.ui.minPrefix+"3"+f.ui.minSufixAuto},formatResultCssClass:function(t){if((n.length==0||_.indexOf(n,t.text)<0)&&r(".users-typeahead.launches:not(input)").eq(e).find("input").val()==t.text)return"exact-match"},allowClear:!0,createSearchChoice:function(e,t){if(r(t).filter(function(){return this.text.localeCompare(e)===0}).length===0)return{id:e,text:e}},initSelection:function(e,t){t({id:e.val(),text:e.val()})},query:function(r){o=!1;var i=r.term.length,u={results:[]};i>=3?i>256?t.toggleLaunchNamesErrors(!0,!1,t.$launchContainer.eq(e)):(i==256&&t.toggleLaunchNamesErrors(!1,!1,t.$launchContainer.eq(e)),l.searchLaunches(r).done(function(e){n=[],_.each(e,function(e){e==r.term&&(o=!0),n.push(e),u.results.push({id:e,text:e})}),r.callback(u)}).fail(function(e){s.ajaxFailMessenger(e)})):(n=[],u.results.push({id:r.term,text:r.term}),r.callback(u))}}),this.$launchContainer.eq(e).on("select2-open",function(){r(".select2-drop-mask").remove()}).on("select2-loaded",function(n){r(".select2-drop-active").removeClass("select2-drop-above"),t.$launchContainer.eq(e).select2("positionDropdown")}).on("change",function(){var n=t.$launchContainer.eq(e).select2("data");t.onChangeLaunchNames(n,r(this).closest(".email-case-item"))}).select2("data",i)),r("#notificationsSettings").on("mousedown.launches",function(){r(".users-typeahead.launches").select2("close"),r(".select2-container.launches").each(function(){var e=r(this);e.find(".select2-input").val().length<=256&&t.toggleLaunchNamesErrors(!1,!0,e)})}),!s.isInPrivilegedGroup()&&this.$launchContainer&&this.$launchContainer.select2("disable")},validateTags:function(e,t){var n=!0,i=this;return r(".email-case-item").each(function(e,s){var o=r(s).find(".select2-container.tags"),u=_.findWhere(i.model.get("emailCases"),{id:r(s).data("email-case-id")}),a=a||(u?u.tags:[]);return t&&r.inArray(r(s).data("email-case-id"),i.rulesToDelete)==-1?(i.showFormErrors(o,f.ui.maxPrefix+"256"+f.ui.maxSufix),r(".select2-drop-active").hide(),r(".select2-input.select2-active").removeClass("select2-active"),n=!1,!1):(i.hideFormsErrors(o),!0)}),n},checkCases:function(){var e=!1,t=this.model.get("emailCases");r(".email-case-item").removeClass("duplicate");if(t.length==1)return!1;for(var n=0;n<t.length;n++){var i=t[n];for(var s=n+1;s<t.length;s++)if(this.isCasesEqual(i,t[s])){var o=r(".email-case-item[data-email-case-id="+t[s].id+"]"),u=r(".email-case-item[data-email-case-id="+i.id+"]");!o.hasClass("will-delete")&&!u.hasClass("will-delete")&&(o.addClass("duplicate"),e=!0)}}return e},isCasesEqual:function(e,t){return e.sendCase!=t.sendCase?!1:e.tags.length!=t.tags.length?!1:e.launchNames.length!=t.launchNames.length?!1:e.recipients.length!=t.recipients.length?!1:_.sortBy(e.tags).equals(_.sortBy(t.tags))&&_.sortBy(e.launchNames).equals(_.sortBy(t.launchNames))&&_.sortBy(e.recipients).equals(_.sortBy(t.recipients))?!0:!1},selectOwner:function(e){var t=r(e.target),n=t.closest(".email-case-item"),i=t.val(),s=_.findWhere(this.model.get("emailCases"),{id:n.data("email-case-id")}),o=s.recipients||[];t.is(":checked")?(o.push(i),o.length&&this.hideFormsErrors(n.find(".select2-container.recipients")),this.validateRecipients()):(o=_.reject(o,function(e){return e===i}),s&&(s.recipients=o),!o.length&&this.showFormErrors(n.find(".select2-container.recipients"),f.project.emptyRecipients),this.validateRecipients()),o.recipients=o,this.checkCases()},selectProp:function(e){e.preventDefault();var t=this,n=r(e.target),i=n.closest(".open").find(".dropdown-toggle"),s=n.data("value")?n.data("value"):n.text(),o=i.attr("id");if(o==="emailEnabled"){s=s==="ON";var u=s?"show":"hide";this.$emailBlock[u](),s?(t.model.set("emailEnabled",!0),r(".email-case-item").each(function(e,n){t.filterLaunches(e),t.filterTags(e)})):t.model.set("emailEnabled",!1),this.model.set(o,s),this.updateRules()}else{var a=_.findWhere(this.model.get("emailCases"),{id:i.closest(".email-case-item").data("email-case-id")});a&&(a.sendCase=s),this.checkCases()}r(".select-value",i).text(n.text())},setEmailToDefault:function(){var e=this;r(".email-case-item").each(function(t,n){var i=_.findWhere(e.model.get("emailCases"),{id:r(n).data("email-case-id")}),s=w.forSettings.emailInCase[0];r(n).find(".launchOwner").attr("checked","checked").prop("checked","checked"),r(n).find(".select-value").text(s.name).val(s.value),r(n).find(".recipients").val(""),i.recipients=[r(n).find(".launchOwner").val()],i.sendCase=s.value})},clearFormErrors:function(){r("div.error-block",this.$el).is(":visible")&&(r(".rp-form-group",this.$el).removeClass("has-error"),r("div.error-block",this.$el).empty().hide())},showFormErrors:function(e,t){var n=e.closest(".rp-form-group");n.addClass("has-error"),r("div.error-block",n).empty().html(t).show()},hideFormsErrors:function(e){var t=e.closest(".rp-form-group");t.removeClass("has-error"),r("div.error-block",t).empty().hide()},validateRecipients:function(){var e=this,t=!1,n=!0;return r(".email-case-item").each(function(i,s){var o=!0,u=_.findWhere(e.model.get("emailCases"),{id:r(s).data("email-case-id")}),a=r.inArray(r(s).data("email-case-id"),e.rulesToDelete)!=-1;!t&&u&&!a&&(t=_.isEmpty(u.recipients)),u&&_.isEmpty(u.recipients)&&!a&&e.showFormErrors(r(s).find("input.recipients"),f.project.emptyRecipients),u&&!a&&(o&&(o=_.isEmpty(u.recipients)?!1:!0),n=o,o||e.showFormErrors(r(s).find("input.recipients"),f.project.invalidRecipients))}),this.model.get("emailEnabled")&&(t||!n)},toggleLaunchNamesErrors:function(e,t,n){var i=n;e?(this.showFormErrors(i,f.ui.maxPrefix+"256"+f.ui.maxSufix),r(".select2-drop-active").hide(),r(".select2-input.select2-active").removeClass("select2-active")):(this.hideFormsErrors(i),t||(r(".select2-drop-active").last().show(),i.find(".select2-input").addClass("select2-active")))},checkTagsAndLaunches:function(e){var t=e.configuration;return t.launchNames&&t.launchNames.length==0&&delete t.launchNames,t.tags&&t.tags.length==0&&delete t.tags,e.configuration=t,e},submitNotifications:function(e){var t=this,n=r("#from",this.$el),i=this.model.getProjectSettings(this.rulesToDelete);if(this.model.get("emailEnabled")){if(!this.validateTags())return!1;if(this.validateRecipients())return!1;if(r(".email-case-item:not(.will-delete)").find(".has-error").length>0)return!1;if(this.checkCases())return!1;this.clearFormErrors();if(!s.validateEmail(n.val()))return n.trigger("validate"),!1}else{var o=[{launchNames:[],recipients:["OWNER"],sendCase:"ALWAYS",tags:[],id:0}];t.model.set("emailEnabled",!1),t.model.set("emailCases",o),r(".email-case-item").remove(),t.model.set("fromAddress","reportportal@example.com"),i=t.model.getProjectSettings()}i=this.checkTagsAndLaunches(i),l.updateEmailProjectSettings(i).done(function(e){w.project.configuration.emailConfiguration=i.configuration,t.emailCaseId=0,t.rulesToDelete.length=0,t.updateIds(),t.model=new N(w.project.configuration.emailConfiguration),t.render(),s.ajaxSuccessMessenger("updateProjectSettings")}).fail(function(e){s.ajaxFailMessenger(e,"updateProjectSettings")})},destroy:function(e){this.$recipients=r("input.recipients"),this.$launchContainer=r("input.launchNames"),this.$tagsContainer=r("input.tags"),this.$recipients&&this.$recipients.length&&(this.$recipients.select2("destroy"),this.$recipients=null),this.$launchContainer&&this.$launchContainer.length&&(this.$launchContainer.select2("destroy"),this.$launchContainer=null),this.$tagsContainer&&this.$tagsContainer&&(this.$tagsContainer.select2("destroy"),this.$tagsContainer=null),this.undelegateEvents(),r("body > #select2-drop-mask, body > .select2-sizer").remove(),o.RemovableView.prototype.destroy.call(this)}}),A=i.Model.extend({defaults:{id:0,url:"",project:"",systemType:"",systemAuth:"",username:"",password:w.forSettings.defaultPassword,accessKey:"",fields:[],domain:"",mode:"",modelCache:null,restorable:["url","project","domain"]},initialize:function(e){if(!e){var t=w.forSettings.btsList[0];if(!t)return;this.set({systemType:t.name})}var n;this.get("systemAuth")||(n=w.forSettings["bts"+this.get("systemType")].authorizationType[0].value,this.set("systemAuth",n))},isValid:function(){var e=!!this.get("url")&&!!this.get("project"),t;return this.validForBasic()?this.get("id")?t=this.hasCredentials():t=this.hasCredentials()&&this.get("password")!==w.forSettings.defaultPassword:t=!!this.get("accessKey"),this.isTFS()&&(e=e&&!!this.get("domain")),e&&t},hasCredentials:function(){return!!this.get("username")&&!!this.get("password")},shouldClearPassword:function(e){return!this.get("url")&&e===w.forSettings.defaultPassword},isEdit:function(){return!!this.get("mode")},setupEdit:function(){this.set("mode","edit"),this.set("modelCache",this.toJSON())},cancelEdit:function(){var e=this.get("modelCache");this.set("modelCache",null),this.set(e),this.set("mode","")},discardEdit:function(){this.isEdit()&&(this.set("modelCache",null),this.set("mode",""))},resetCredentials:function(){this.set("username",""),this.set("password",""),this.set("token","")},validForApiKey:function(){return this.get("systemAuth")==="APIKEY"},validForBasic:function(){var e=this.get("systemAuth");return e==="BASIC"||e==="NTLM"},isRally:function(){return this.get("systemType")==="RALLY"},isTFS:function(){return this.get("systemType")==="TFS"},fieldsWereSelected:function(){return this.get("id")&&this.get("fields").length},toJSON:function(){var e=i.Model.prototype.toJSON.call(this);return this.isTFS()||delete e.domain,e},getBtsSettings:function(){var e=this.toJSON(),t=function(){delete e.username,delete e.password};return delete e.mode,delete e.modelCache,delete e.restorable,delete e.links,delete e.access,delete e.text,delete e.defaultPassword,delete e.hasPassword,e.id&&e.password&&e.password===w.forSettings.defaultPassword&&t(),this.validForApiKey()&&t(),this.validForBasic()&&delete e.accessKey,e.id||delete e.fields,e}}),O=o.BaseView.extend({defaultFields:null,initialize:function(e){this.$el=e.holder,this.settings=e.settings,this.access=e.access,this.systems=e.externalSystems,this.appModel=new d;var t=[];_.each(e.externalSystems,function(e){return _.each(w.forSettings.btsList,function(n){if(n.name==e.systemType)return t.push(e),!1})}),this.model=new A(t[0]),this.systemAt=0},wrapperTpl:"tpl-bts-wrapper",instanceTpl:"tpl-bts-instance",multiTpl:"tpl-bts-multi-selector",authTpl:"tpl-bts-auth-type",render:function(){return this.$el.html(s.templates(this.wrapperTpl,{settings:this.settings,systemType:this.model.get("systemType"),access:this.access})),this.$instanceHead=r("#instanceHead",this.$el),this.$instanceBoby=r("#instanceBody",this.$el),w.forSettings.btsList.length?(this.renderMultiSelector(),this.renderInstance()):(r("button",this.$el).prop({disabled:"disabled"}),r("[data-js-no-bts-message]",this.$el).removeClass("hide")),this},renderMultiSelector:function(){this.$instanceHead.empty();var e=this.model.get("systemType");if(this.systemWithMultipleProjects(e)){var t=this.systems.length&&e===this.systems[0].systemType?this.systems:[];return this.$instanceHead.html(s.templates(this.multiTpl,{systems:t,index:this.systemAt,access:this.access})),!0}return!1},renderInstance:function(){this.$instanceBoby.empty();var e=this.model.toJSON();e.authorizationTypes=this.settings["bts"+this.model.get("systemType")].authorizationType,e.access=this.access,e.settings=this.settings,e.projectType=this.model.isRally()?"projectId":"projectName",this.$instanceBoby.html(s.templates(this.instanceTpl,e)),this.setupAnchors(),this.setAuthBlock(e),this.bindValidators(),this.access&&this.setupValidityState(),this.renderFields()},validateForAuthenticationType:function(){s.hasValidBtsSystem()&&this.model.set("systemAuth",this.settings["bts"+this.model.get("systemType")].authorizationType[0].value)},systemWithMultipleProjects:function(e){return this.settings["bts"+e]&&this.settings["bts"+e].multiple},changeBts:function(e){e.preventDefault();var t=r(e.currentTarget),n=t.text();if(t.hasClass("active"))return;s.flipActiveLi(t),this.validateBtsChange(n)},validateBtsChange:function(e){var t=this.checkIfSystemDefined(e)?this.systems[this.systemAt]:{systemType:e};this.model=new A(t),this.validateForChangeBtsWarning(),this.renderMultiSelector(),this.renderInstance()},validateForChangeBtsWarning:function(){var e=this.systems.length&&!this.model.get("id")?"show":"hide";this.$tbsChangeWarning[e]()},checkIfSystemDefined:function(e){return _.any(this.systems,function(t){return t.systemType===e})},focusOnFields:function(){r("html, body").animate({scrollTop:this.$fieldsWrapper.offset().top},1e3)},renderFields:function(){this.model.get("id")&&(this.model.get("fields").length?(this.fieldsView&&this.fieldsView.destroy(),this.fieldsView=(new M({holder:this.$dynamicFieldsWrapper,fields:this.model.get("fields"),editable:!0})).render(),this.$fieldsWrapper.show()):(this.fieldsView=new M({holder:this.$dynamicFieldsWrapper,fields:[],editable:!0}),this.loadDefaultBtsFields()))},setupAnchors:function(){this.$tbsChangeWarning=r("#tbsChangeWarning",this.$el),this.$authDropDown=r("#systemAuth",this.$el),this.$authType=r("#authorizationType",this.$el),this.$fieldsLoader=r("#fieldsLoader",this.$el),this.$submitBlock=r("#submitPropertiesBlock",this.$el),this.$editBtn=r("#editBtsProperties",this.$el),this.$deleteBtn=r("#deleteInstance",this.$el),this.$cancelBtn=r("#cancelBtsProperties",this.$el),this.$propertiesWrapper=r("#propertiesWrapper",this.$el),this.$resetFieldsWarning=r("#resetFieldsWarning",this.$el),this.$externalSystemWarning=r("#externalError",this.$el),this.$fieldsWrapper=r("#fieldsWrapper",this.$el),this.$dynamicFieldsWrapper=r("#dynamicFields",this.$el),this.$fieldsControls=r(".fields-controls",this.$el),this.$updateFieldsBtn=r("#updateFields",this.$fieldsControls),this.$cancelFieldsBtn=r("#cancelFields",this.$fieldsControls)},events:{"click .bts-option":"changeBts","click .auth-type":"updateAuthType","keyup .bts-property":"updateModel","blur .bts-property":"updateModel","click #submitBtsProperties":"saveProperties","click #editBtsProperties":"editProperties","click #deleteInstance":"deleteInstance","click #cancelBtsProperties":"cancelEditProperties","click .bts-instance":"selectBtsInstance","click .close-add-action":"discardAddNew","click #submitFields":"submitFields","click #updateFields":"loadDefaultBtsFields","click #cancelFields":"cancelFieldsUpdate"},discardAddNew:function(e){e.preventDefault(),r(e.currentTarget).closest("li").removeClass("activated").removeClass("active"),r(e.currentTarget).closest("ul").find("[data-index="+this.systemAt+"]").parent().addClass("active"),r(e.currentTarget).closest("ul").find(".bts-instance-action").removeClass("disabled"),this.model=new A(this.systems[this.systemAt]),this.renderInstance(),e.stopPropagation()},selectBtsInstance:function(e){e.preventDefault();var t,n,i,s;t=r(e.currentTarget),n=t.parent();if(n.hasClass("active")||n.hasClass("disabled"))return!1;t.hasClass("add-new")?(n.closest("ul").find(".active").removeClass("active"),n.addClass("disabled"),n.closest("ul").find(".bts-name-new-project").addClass("active").addClass("activated"),i=this.model.get("systemType"),s=this.systems[0].url,this.model=new A({systemType:i,url:s}),this.renderInstance()):(this.systemAt=t.data("index"),this.model=new A(this.systems[this.systemAt]),this.renderMultiSelector(),this.renderInstance())},submitFields:function(){var e=[],t=this.defaultFields?this.defaultFields:this.model.get("fields");_.forEach(this.fieldsView.getDefaultValues(),function(n,r){var i=_.find(t,{id:r});i&&(i.fieldType==="array"?n=n.split(","):n=[n],i.value=n,e.push(i))}),this.model.set("fields",e),this.saveProperties(),this.systems[this.systemAt].fields=e},loadDefaultBtsFields:function(){var e=this;this.$fieldsLoader.show(),l.getBtsFields(this.model.get("id")).done(function(t){e.$fieldsLoader.hide(),e.defaultFields=_.cloneDeep(t),_.forEach(e.model.get("fields"),function(e){var n=_.find(t,{id:e.id});n.value=e.value,n.checked=!0}),e.fieldsView.update(t),e.$updateFieldsBtn.hide(),e.model.fieldsWereSelected()&&e.$cancelFieldsBtn.show(),e.$fieldsWrapper.show(),e.$externalSystemWarning.hide(),e.focusOnFields()}).fail(function(t){e.handleBtsFailure(t),e.$fieldsLoader.hide()})},cancelFieldsUpdate:function(){this.fieldsView.render(),this.$updateFieldsBtn.show(),this.$cancelFieldsBtn.hide()},preventDefault:function(e){e.preventDefault()},saveProperties:function(){this.model.isValid()?this.validateForSystemsClearance()?(w.userModel.set("bts",null),l.clearExternalSystem().done(function(){this.saveBts(!0)}.bind(this)).fail(function(){s.ajaxSuccessMessenger("clearExternalSystem")})):this.saveBts():r("input:visible, textarea:visible",this.$propertiesWrapper).trigger("validate")},saveBts:function(e){this.$fieldsLoader.show();if(e)while(this.systems.length)this.systems.pop();var t=this,n=this.model.get("id")?"updateExternalSystem":"createExternalSystem",r=this.model.getBtsSettings();this.checkIfLinkOrProjectNameChanged(r)&&(this.model.set("fields",[]),r.fields=[]),l[n](r).done(function(e){t.setupValidityState(),t.$fieldsWrapper.show(),e.id?(t.externalId=e.id,t.updateCredentials(r,e.id),t.systems.push(r),t.systemAt=t.systems.length-1,t.renderMultiSelector(),r.id=t.externalId):(_.merge(t.systems[t.systemAt],r),t.model.discardEdit(),r.id=t.systems[t.systemAt].id),t.appModel.setArr("externalSystem",t.systems),t.renderInstance(),t.renderMultiSelector(),t.$tbsChangeWarning.hide()}).fail(function(e){t.handleBtsFailure(e),t.$fieldsWrapper.hide(),t.$fieldsLoader.hide()}).always(function(){t.model.get("fields").length&&t.$fieldsLoader.hide()})},handleBtsFailure:function(e){var t,n=this.$externalSystemWarning.data("casual");try{t=JSON.parse(e.responseText)}catch(r){}e.status==404&&(n="Impossible interact with external system. External system with type JIRA is not deployed or not available"),e.status==403?n=f.failMessages.noPermissions:e.responseText&&e.responseText.indexOf(this.settings.projectNotFoundPattern)!==-1&&(n=this.$externalSystemWarning.data("noproject").replace("%%%",this.model.get("project"))),(e.status==400||e.status==409)&&t.error_code==4032&&(n=t.message),this.$externalSystemWarning.text(n).show()},updateCredentials:function(e,t){this.model.set("id",t),e.id=t,this.model.validForBasic()?(this.model.set("password",this.settings.defaultPassword),e.password=this.settings.defaultPassword):this.model.validForApiKey()&&(e.accessKey=this.model.get("accessKey"))},validateForSystemsClearance:function(){return this.systems.length&&this.model.get("systemType")!==this.systems[0].systemType},deleteInstance:function(){var e=this,t=new y({headerText:f.dialogHeader.deleteBts,bodyText:s.replaceTemplate(f.dialog.deleteBts,this.model.get("systemType"),this.model.get("project")),cancelButtonText:f.ui.cancel,okButtonDanger:!0,okButtonText:f.ui.delete,confirmFunction:function(){return l.deleteExternalSystem(e.model.get("id")).done(function(){e.systems.splice(e.systemAt,1);if(e.systems.length)e.model=new A(e.systems[0]);else{var t=e.model.get("systemType");e.model=new A({systemType:t})}e.systems.length>0?e.appModel.setArr("externalSystem",[e.systems[0]]):e.appModel.setArr("externalSystem",[]),e.systemAt=0,e.renderMultiSelector(),e.renderInstance(),e.setPristineBTSForm(),s.ajaxSuccessMessenger("deleteBts")}).fail(function(e){s.ajaxFailMessenger(e,"deleteBts")})}});t.show()},setPristineBTSForm:function(e){var t=w.forSettings.btsList[0].value;r("#btsSettings").find("#systemType").find(".select-value").text(t),this.renderMultiSelector(),this.renderInstance()},checkIfLinkOrProjectNameChanged:function(e){var t=_.find(this.systems,{id:e.id});return t&&(t.url!==e.url||t.project!==e.project)},editProperties:function(){this.model.setupEdit(),this.setupValidityState(),this.$cancelBtn.show()},cancelEditProperties:function(){var e=this.model.get("modelCache"),t=this;_.forEach(e.restorable,function(n){r("#"+n,t.$propertiesWrapper).val(e[n])});var n=r("#"+e.systemAuth,this.$propertiesWrapper);n.closest(".dropdown-menu").find(".active").removeClass("active"),n.addClass("active"),r("#systemAuth",this.$el).find(".select-value").text(n.text()),this.setAuthBlock(e),r(".has-error",this.$propertiesWrapper).removeClass("has-error"),this.model.cancelEdit(),this.$resetFieldsWarning.hide(),this.setupValidityState(),this.$externalSystemWarning.is(":visible")&&(this.$externalSystemWarning.hide(),this.$fieldsWrapper.show())},updateModel:function(e){var t=r(e.currentTarget),n=t.val().trim(),i=t.attr("id");if(n!==this.model.get(i)){i!=="password"&&t.trigger("validate"),n=t.data("valid")?n:"",this.model.isEdit()&&this.checkIfCanResetFields(i)&&(this.model.fieldsWereSelected()&&this.$resetFieldsWarning.show(),r("#username, #password, #accessKey",this.$el).val(""),this.model.set({username:"",password:"",accessKey:""}));if(i==="username"){var s=r("#password",this.$propertiesWrapper);s.val()===this.settings.defaultPassword&&(s.val(""),this.model.set("password",""))}this.model.set(i,n)}},bindValidators:function(){s.bootValidator(r("#url",this.$propertiesWrapper),[{validator:"required",type:"btsLink"},{validator:"matchRegex",type:"btsLinkRegex",pattern:"(http|https)://[a-z0-9-_]+(.[a-z0-9-_]+)+([a-z0-9-.,@?^=%&;:/~+#]*[a-z0-9-@?^=%&;/~+#])?",arg:"i"}]),s.bootValidator(r("#project",this.$propertiesWrapper),{validator:"minMaxRequired",type:"projectName",min:1,max:55}),this.model.isRally()&&s.bootValidator(r("#accessKey",this.$propertiesWrapper),{validator:"required",type:"accessKey"})},setupValidityState:function(){this.model.isValid()&&!this.model.isEdit()?(this.$submitBlock.hide(),this.$editBtn.show(),this.$deleteBtn.show(),r("input, textarea",this.$propertiesWrapper).prop("disabled",!0),this.$authDropDown.prop("disabled",!0)):(this.$submitBlock.show(),this.$editBtn.hide(),this.$deleteBtn.hide(),r("input, textarea",this.$propertiesWrapper).prop("disabled",!1),this.$authDropDown.prop("disabled",!1))},setAuthBlock:function(e){e.access=this.access,e.hasPassword=!!this.model.get("id"),e.defaultPassword=this.settings.defaultPassword,this.$authType.html(s.templates(this.authTpl,e)),this.model.validForBasic()?(s.bootValidator(r("#username",this.$propertiesWrapper),{validator:"required"}),s.bootValidator(r("#password",this.$propertiesWrapper),{validator:"required"}),this.model.isTFS()&&s.bootValidator(r("#domain",this.$propertiesWrapper),{validator:"minMaxRequired",type:"tfsDomain",min:1,max:255})):this.model.validForApiKey()?s.bootValidator(r("#accessKey",this.$propertiesWrapper),{validator:"minMaxRequired",type:"apiKey",min:4,max:128}):s.bootValidator(r("#accessKey",this.$propertiesWrapper),{validator:"required"})},updateAuthType:function(e){e.preventDefault();var t=r(e.currentTarget).parent(),n=t.attr("id");if(t.hasClass("active"))return;s.flipActiveLi(t),this.model.set("systemAuth",n),this.setAuthBlock()},checkIfCanResetFields:function(e){return e==="url"||e==="project"},destroy:function(){this.defaultFields&&(this.defaultFields=null),this.fieldsView&&this.fieldsView.destroy(),o.BaseView.prototype.destroy.call(this)}}),M=o.BaseView.extend({initialize:function(e){this.$el=e.holder,this.editable=e.editable,this.fields=e.fields,this.disabled=w.forSettings.btsJIRA.disabledForEdit},fieldsTpl:"tpl-dynamic-fields",events:{"click .option-selector":"handleDropDown"},handleDropDown:function(e){s.dropDownHandler(e)},render:function(){return this.$el.html(s.templates(this.fieldsTpl,{collection:this.fields,disabled:this.disabled,update:!0,editable:this.editable,access:w.userModel.hasPermissions()})),this.setupMultiSelect(this.fields),this},setupMultiSelect:function(e){c.applyTypeForBtsFields(e,this.$el)},update:function(e){return this.$el.html(s.templates(this.fieldsTpl,{collection:e,update:!0,disabled:this.disabled,access:w.userModel.hasPermissions()})),this.setupMultiSelect(e),this},updateData:function(e){this.fields=e,this.render()},getDefaultValues:function(){var e={};return _.forEach(r(".default-selector:checked",this.$el),function(t){var n=r(t),i,s;if(n.data("type")==="array")i=n.closest(".rp-form-group").find("input.default-value:first"),s=i.val();else{var o=n.closest(".rp-form-group").find("select:first");o.length?i=o:i=n.closest(".rp-form-group").find(".default-value:first"),s=i.is("button")?i.parent().find(".select-value:first").text():i.val()}e[i.attr("id")]=s.trim()}),e}}),D=o.BaseView.extend({model:{},"static":"tpl-defect-type-item",editor:"tpl-defect-type-item-edit",confirmModal:"tpl-modal-with-confirm",el:"",parent:{},name:"",events:{"click .delete-item":"deleteItem","click .edit-item":"editItem","click .save-item":"saveItem","click .cancel-item":"cancelItem","focusout .rp-input":"liveValidate"},initialize:function(e){_.extend(this,e),this.on("initClrPicker",this.initColorPicker,this),this.editModel=new m,this.listenTo(this.model,"change:locator",this.onChangeLocator),this.listenTo(this.model,"change",this.render)},onChangeLocator:function(e,t){this.$el.attr({id:t})},render:function(){var e=this.model.get("locator"),t=this.static,n=this.setTemplateData();r(this.el).html(s.templates(t,n));if(e==="newItem"){var i=r("#"+e);this.trigger("initClrPicker",i)}},setTemplateData:function(){var e={model:this.model.toJSON(),color:this.parent.color,edit:this.edit};return e.first=this.model.get("mainType"),e},editItem:function(e){e&&e.preventDefault(),this.el.html(s.templates(this.editor,this.model.toJSON())),this.editModel.set(this.model.toJSON());var t,n;t=this.model.get("locator"),n=r("#"+t),this.trigger("initClrPicker",n)},saveItem:function(e){e.preventDefault();if(!this.editModel.isValid()){r('[data-type="longName"]',this.$el).focusout(),r('[data-type="shortName"]',this.$el).focusout();return}r("[data-js-colorpicker-holder]",this.$el).spectrum("hide"),this.model.set(this.editModel.toJSON()),this.el.html(s.templates(this.static,this.setTemplateData())),this.model.get("locator")==="newItem"&&this.model.collection.add(this.model)},deleteItem:function(e){e.preventDefault();var t=this,n=r(e.target).closest(".dt-body-item").attr("id"),i=r(e.target).closest(".dt-body-item").attr("data-defect-type"),o=this.model.get("typeRef").replace("_"," ").capitalize(),u=this.model.get("longName"),a=s.replaceOccurrences.call(null,[u,o]);if(n===i.toUpperCase()+"0")return;var l=new y({headerText:f.dialogHeader.titleDeleteDefectType,bodyText:s.replaceTemplate(f.dialog.msgMessageTop,u,o),confirmText:f.dialog.msgDeleteDefectType,cancelButtonText:f.ui.cancel,okButtonDanger:!0,okButtonText:f.ui.delete});l.show().done(function(){t.model.collection.remove(t.model),t.destroy(),s.ajaxSuccessMessenger("deleteOneSubType")})},cancelItem:function(e){e.preventDefault();if(this.model.get("locator")==="newItem"){var t=this.model;this.destroy(),t.collection.trigger("cancel:add",t.get("typeRef"));return}this.el.html(s.templates(this.static,this.setTemplateData()))},getData:function(e){var t={longName:r(e).find("[data-type=longName]").val(),shortName:r(e).find("[data-type=shortName]").val().toUpperCase(),color:r(e).find("[data-type=color]").val()};return t},initColorPicker:function(e){var t=new b({initColor:this.editModel.get("color")}),n=this;r(".holder-color-picker",this.$el).html(t.el),this.listenTo(t,"change:color",function(e){n.editModel.set("color",e)})},liveValidate:function(e){var t=r(e.target).closest(".dt-body-item"),n=r(e.target).attr("data-type"),i=r.trim(r(e.target).val());r(e.target).val(i),this.editModel.set(n,i);if(!this.editModel.isValid()){var s=this.uniteErrors(this.editModel.validationError,{});_.each(s,function(e,t){t!==n&&delete s[t]}),this.showErrors({data:s},t,[n]);return}},uniteErrors:function(e,t){var n={};return _.each(e,function(e){e.valid||(n[e.key]=e.reason)}),_.each(t,function(e){if(e.valid==1)return;if(_.has(n,e.key)){_.each(e.reason,function(t){n[e.key].push(t)},this);return}n[e.key]=e.reason}),n},showErrors:function(e,t,n){this.clearErrMessages(n,t),this.addErrMessage(e,t)},addErrMessage:function(e,t){_.each(e.data,function(e,n){var i=r(t).find("[data-type="+n+"]");i.attr("required",!0);var s=f.validation[e];i.closest("div").find("p")&&i.closest("div").append("<p>"+s+"</p>"),i.closest("div").find(".check-color-picker")&&i.closest("div").find(".check-color-picker").addClass("data-failed")},this)},clearErrMessages:function(e,t){_.each(e,function(e){if(e==="color")return;var n=r(t).find("[data-type="+e+"]");n.removeAttr("required"),n.closest("div").find("p").remove(),n.closest("div").find(".check-color-picker").removeClass("data-failed")})},destroy:function(){this.stopListening(),this.$el.remove(),i.Events.off(null,null,this),o.BaseView.prototype.destroy.call(this)}}),P=o.BaseView.extend({collection:{},name:"",diagrammParams:[],template:"tpl-defect-type",subTemplate:"tpl-defect-subType",initialize:function(e){_.extend(this,e),this.el=r(this.el),this.updateControls(),this.collection.on("AddNew:"+this.name,this.updateControls,this),this.collection.on("Remove:"+this.name,this.updateControls,this),this.collection.on("cancel:add",this.lockAddButton,this),this.collection.on("change",this.updateControls,this),this.collection.on("remove",this.updateControls,this)},events:{"click .add-item":"addItem"},render:function(){var e;e={name:this.name,color:this.color,addLeft:this.addLeft,edit:this.edit},this.el.html(s.templates(this.template,e)),this.updateControls(),this.renderSubTypes()},renderSubTypes:function(){if(this.collection.length==0)return;_.each(this.collection.models,function(e,t){if(e.get("typeRef").toLowerCase()!==this.name)return;var n={model:e,parent:this,edit:this.edit};this.renderItem(n),this.name==="to_investigate"&&r(this.el).find(".controll-panel").remove()},this),this.getDataForDiagramm(this.collection),this.getDataForGraph(this.diagrammParams)},renderItem:function(e){var t=e.model.get("locator"),n=s.templates(this.subTemplate,{id:t,type:e.model.get("typeRef"),edit:e.edit});r(".controll-panel",this.el).before(n),e.el=r("#"+t,this.el);var i=new D(e);return i.render(),i},addItem:function(e){e.preventDefault();var t=new m({locator:"newItem",typeRef:this.name.toUpperCase(),color:this.color});t.collection=this.collection,r(e.currentTarget).attr("disabled","disabled");var n={model:t,parent:this,edit:this.edit},i=this.renderItem(n);i.editItem()},getDataForDiagramm:function(e){var t,n=[];return _.map(e.models,function(e){if(e.get("typeRef").toLowerCase()!==this.name)return;t={parent:e.get("typeRef").toLowerCase(),child:{itemLongName:e.get("longName").toLowerCase(),itemShortName:e.get("shortName").toLowerCase(),itemColor:e.get("color")}},n.push(t)},this),this.diagrammParams=_.groupBy(n,"parent"),this.diagrammParams},getDataForGraph:function(e){_.map(e,function(e,t){this.drawPieChart(e,t)},this)},drawPieChart:function(e,t){var n,r=[],i=46,s=46,o="#diagramm_"+t;return _.map(e,function(e,t){r.push({key:e.child.itemLongName,y:1,color:e.child.itemColor})},this),n=p.models.pie().x(function(e){return e.key}).y(function(e){return e.y}).width(i).height(s).showLabels(!1).donut(!0).donutRatio(.4).color(function(e){return e.data.color}).valueFormat(h.format("f")),h.select(o).datum([r]).transition().duration(350).attr("width",i).attr("height",s).call(n),n},updateDiagramm:function(){this.getDataForDiagramm(this.collection),this.getDataForGraph(this.diagrammParams)},onRemove:function(){this.updateControls(),this.getDataForDiagramm(this.collection),this.getDataForGraph(this.diagrammParams)},lockAddButton:function(){var e=this.getCollectionLength();if(e>=10||r("#newItem",this.$el).length){r(this.el).find(".add-item").prop("disabled",!0);return}r(this.el).find(".add-item").prop("disabled",!1)},getCollectionLength:function(){var e=0;return _.each(this.collection.models,function(t){var n=t.get("typeRef").toLowerCase();n===this.name&&e++},this),e},recountAddLeft:function(){var e=this.getCollectionLength();this.addLeft=10-e;var t=this.$el.find(".add-item").parent();if(this.addLeft>0){r(t).find("p:first span").html(this.addLeft),r(t).find("p:last").hide(),r(t).find("p:first").show();return}r(t).find("p:first").hide(),r(t).find("p:last").show()},updateControls:function(){this.recountAddLeft(),this.lockAddButton(),this.updateDiagramm()},destroy:function(){o.BaseView.prototype.destroy.call(this)}}),H=o.BaseView.extend({defectTypes:{},items:{},showOrder:["product_bug","automation_bug","system_issue","no_defect","to_investigate"],editAccess:["PROJECT_MANAGER","LEAD"],template:"tpl-defect-type-main-view",confirmModal:"tpl-modal-with-confirm",item:"tpl-defect-type-item",events:{"click #reset-color":"onResetColors"},canEdit:!0,initialize:function(e){this.$el=e.holder,this.drawOrder=this.showOrder.slice(0,this.showOrder.length).reverse(),this.settings=e.settings,this.roles=e.roles,this.userRole=e.userRole||"ADMINISTRATOR",this.userRole==="ADMINISTRATOR"?this.canEdit=!0:this.canEdit=_.include(this.editAccess,this.roles.projectRole);var t=this;this.defectTypes=new v,this.defectTypes.on("reset",function(){this.render()},this),this.defectTypes.on("change remove add",_.debounce(t.updateControls,100),this)},updateControls:function(){this.drawChart(),this.disableReset()},render:function(){return this.$el.html(s.templates(this.template,{order:this.showOrder,edit:this.canEdit})),this.renderTypes(),this},renderTypes:function(){_.each(this.showOrder,function(e,t){var n=this.getColor(e),r=new P({name:e,color:n,collection:this.defectTypes,el:"#"+e,edit:this.canEdit});r.render()},this),this.updateControls()},getColor:function(e){var t;return _.each(this.defectTypes.models,function(n){var r=n.get("locator"),i=n.get("typeRef").toLowerCase(),s=n.get("shortName")+"001";r===s&&i==e&&(t=n.get("color"))}),t},drawChart:function(){var e=this.getChartData();this.chart=p.addGraph(function(){var t=p.models.stackedAreaChart().margin({left:0}).margin({right:0}).margin({top:0}).margin({bottom:0}).style("stack_percent").x(function(e){return e[0]}).y(function(e){return e[1]}).useInteractiveGuideline(!1).rightAlignYAxis(!0).showControls(!1).clipEdge(!0).height(150).showXAxis(!1).showYAxis(!1).showLegend(!1);return h.select("#chart svg").datum(e).call(t),t.stacked.dispatch.on("areaClick",null),t.stacked.dispatch.on("areaClick.toggle",null),p.utils.windowResize(t.update),t})},getChartData:function(){var e=[];return _.each(this.drawOrder,function(t,n){_.each(this.defectTypes.models,function(r,i){if(r.get("typeRef").toLowerCase()!==t)return;e.push({key:r.get("typeRef"),color:r.get("color"),values:this.generateChartValues(i,n)})},this)},this),e},generateChartValues:function(e,t){var n=[],r;for(var i=1;i<6;i++)i==0?r=20+(t+e+i)*3:r=i&1?e&1?Math.random()*(50-(10+t+e*3))+10:Math.random()*(10-t+e)+10:t&1?Math.random()*(10-t+e)+10:Math.random()*(20-(1+t+e*3))+10,n.push([i,r]);return n},onResetColors:function(e){e.preventDefault();if(r(e.target).hasClass("disabled"))return;this.showModalResetColors()},showModalResetColors:function(){var e=this,t=new y({headerText:f.dialogHeader.titleResetDefectColors,bodyText:f.dialog.msgResetColorsDefectType,cancelButtonText:f.ui.cancel,okButtonDanger:!0,okButtonText:f.uiCommonElements.reset});t.show().done(function(){e.resetColors(),s.ajaxSuccessMessenger("changedColorDefectTypes")})},resetColors:function(){this.defectTypes.trigger("resetColors")},disableReset:function(){var e=[];_.each(this.defectTypes.models,function(t){t.get("mainType")&&e.push(t.get("color"))});var t=_.every(this.defectTypes.models,function(t){return _.contains(e,t.get("color"))},this);if(t){r("#reset-color").addClass("disabled"),r("#reset-color").attr("title",f.project.noCustomColors);return}r("#reset-color").removeClass("disabled"),r("#reset-color").removeAttr("title")},destroy:function(){this.defectTypes.off("reset"),o.BaseView.prototype.destroy.call(this)}});return{ContentView:E,SettingsView:C,NotificationsView:L,BtsView:O,BtsProperties:A,DefectView:H}}),define("adminService",["require","exports","module","jquery","dataUrlResolver","callService"],function(e,t,n){"use strict";var r=e("jquery"),i=e("dataUrlResolver"),s=e("callService"),o=s.call,u=function(e){return o("GET",i.adminProject(e))},a=function(e){return o("GET",i.getProject(e))},f=function(e){return o("GET",i.adminProjects(e))},l=function(e){return o("DELETE",i.modifyUserUrl(e))},c=function(e){return o("POST",i.adminProjectRoot(),{projectName:e,entryType:"INTERNAL"})},h=function(e){return o("DELETE",i.adminProjectRootId(e))},p=function(){return o("GET",i.getProjectNames())},d=function(e){return o("GET",i.allUsersUrl(e))},v=function(e){return o("GET",i.searchUsersUrl(e))},m=function(e,t,n){return o("GET",i.projectDetailsWidgets(e,t,n))},g=function(e){return o("GET",i.getAdminSettings(e))},y=function(e){return o("DELETE",i.deleteEmailSettings(e))},b=function(e,t){return o("POST",i.setAdminSettings(t),e)},w=function(){return o("GET",i.adminAuthSettings())},E=function(e){return o("PUT",i.adminAuthSettings(),e)},S=function(e){return o("DELETE",i.adminAuthSettings())},x=function(e,t){return o("GET",i.detailsIntervalCall(e,t))};return{getProject:u,getProjectInfo:a,getProjects:f,deleteUser:l,createProject:c,deleteProject:h,getAdminSettings:g,setAdminSettings:b,deleteEmailSettings:y,getProjectNames:p,getAllUser:d,getSearchUser:v,loadProjectInfo:x,loadProjectDetailsWidgets:m,getAuthSettings:w,setAuthSettings:E,deleteAuthSettings:S}}),define("projectinfo",["require","exports","module","jquery","backbone","util","core/components","dataUrlResolver","app","localization","coreService","helpers","adminService","widgets","select2"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("core/components"),u=e("dataUrlResolver"),a=e("app"),f=e("localization"),l=e("coreService"),c=e("helpers"),h=e("adminService"),p=e("widgets");e("select2");var d=a.getInstance(),v=i.View.extend({initialize:function(e){this.contextName=e.contextName,this.context=e.context,this.subContext=e.subContext},render:function(){return this.$header=(new m({header:this.context.getMainView().$header})).render(),this.$body=(new g({context:this.context,body:this.context.getMainView().$body,tab:this.subContext})).render(),this},update:function(e){this.$body.update(e.subContext)},destroy:function(){this.$header.destroy(),this.$body.destroy(),this.undelegateEvents(),this.unbind(),delete this}}),m=o.BaseView.extend({initialize:function(e){this.$el=e.header},tpl:"tpl-projectinfo-header",render:function(){return this.$el.html(s.templates(this.tpl,{projectId:d.project.projectId})),this}}),g=o.BaseView.extend({initialize:function(e){this.widgets=[],this.staticWidgets=[{id:"launches_quantity"},{id:"investigated"},{id:"last_launch"},{id:"activities"},{id:"issues_chart",childs:["bugs_percentage","system_issues_percentage","auto_bugs_percentage"]}],this.context=e.context,this.$el=e.body,this.interval=3,this.project=d.project.projectId,this.isRenderLaunchesOwner=!1,this.xhrPool=[]},tpl:"tpl-projectinfo-page",tplGeneralInfo:"tpl-project-general-info",tplLaunchesOwners:"tpl-project-launch-owners",unableLoadTpl:"tpl-project-widget-unable-load",render:function(){return this.$el.html(s.templates(this.tpl)),this.setupAnchors(),this.loadProjectInfo(),this.loadWidgets(),this},renderGeneralInfo:function(e){var t=this.$generalInfo,n=t.find(".general-info"),i=n.length>0;r(".loading-widget",t).hide(),n.remove(),t.append(s.templates(this.tplGeneralInfo,{info:e,hasValidBtsSystem:s.hasValidBtsSystem()})),i||s.setupBaronScroll(t)},renderLaunchesOwners:function(e){var t=this.$launchOwners,n={};r(".loading-widget",t).hide(),n.launchesPerUser=_.sortByOrder(e.launchesPerUser,"count",!1),t.append(s.templates(this.tplLaunchesOwners,n)),this.isRenderLaunchesOwner||(s.setupBaronScroll(t),this.isRenderLaunchesOwner=!0)},setupAnchors:function(){this.$launchOwners=r("#launches_owners .widget-body",this.$el),this.$generalInfo=r("#general_info .widget-body",this.$el),this.$projectDetails=[this.$generalInfo,this.$launchOwners]},loadProjectInfo:function(){var e=this,t=this.project;_.each(this.$projectDetails,function(e){var t=r(".project-content",e);t.length&&t.remove(),r(".loading-widget",e).show()}),h.loadProjectInfo(t,this.interval).done(function(t){e.renderGeneralInfo(t),e.renderLaunchesOwners(t)}).fail(function(e){s.ajaxFailMessenger(e,"loadProjectInfo")})},loadStaticWidget:function(e){var t=this,n=e.id,r=this.project,i=h.loadProjectDetailsWidgets(r,n,this.interval).done(function(r){t.renderWidget(r,n),e.childs&&_.each(e.childs,function(e){t.renderWidget(r,e)})}).fail(function(r){t.renderFailedLoad(n),e.childs&&_.each(e.childs,function(e){t.renderFailedLoad(e)}),s.ajaxFailMessenger(r,"widgetData")}).always(function(){var e=this.xhrPool.indexOf(i);e>-1&&this.xhrPool.splice(e,1)}.bind(this));this.xhrPool.push(i)},renderFailedLoad:function(e){var t=r("#"+e),n=r(".loading-widget",t),i=r("div.no-data-error",t);n.hide(),i.length&&i.remove(),r(".widget-body",t).append(s.templates(this.unableLoadTpl,{}))},renderWidget:function(e,t){var n=r("#"+t),i=r("div.no-data-error",n),s=r(".loading-widget",n),o=p.widgetService(t),u=null,a={container:r(".widget-body",n),param:{id:t,content:e,interval:this.interval}};t=="activities"&&(a.isAutoRefresh=!1,a.isReverse=!1,a.projectId=this.project),s.hide(),i.length&&i.remove(),u=(new o(a)).render(),this.widgets.push({id:t,view:u})},loadWidgets:function(){var e=_.clone(this.xhrPool);_.each(e,function(e){e.abort()}),_.each(this.widgets,function(e){e.view.destroy();var t=e.id,n=r("#"+t);r(".loading-widget",n).show()},this),this.widgets=[],_.each(this.staticWidgets,function(e){this.loadStaticWidget(e)},this)},update:function(){this.loadProjectInfo(),this.loadWidgets()},destroy:function(){_.each(this.widgets,function(e){e.view.destroy()}),o.BaseView.prototype.destroy.call(this)}});return{Body:g,ContentView:v}}),define("projectMembers/MembersService",["require","exports","module","jquery","dataUrlResolver","callService","app"],function(e,t,n){"use strict";var r=e("jquery"),i=e("dataUrlResolver"),s=e("callService"),o=e("app"),u=s.call,a=o.getInstance(),f=function(e){return e||(e={}),e.page||(e.page=1),e.size||(e.size=10),"?page.page="+e.page+"&page.size="+e.size+"&page.sort=login,ASC"},l=function(e,t){var n=f(t);return t.search&&(n+="&filter.cnt.name="+t.search),u("GET",i.getMembers(e,n))},c=function(e,t){var n=f(t);return t.search&&(n+="&filter.cnt.name="+t.search),u("GET",i.getAssignableMembers(e,n))},h=function(e,t){return u("PUT",i.updateProjectUnassign(t),{userNames:[e]})},p=function(e,t,n){var r={};return r[t]=e,u("PUT",i.updateProject(n),{users:r})},d=function(e,t){return u("PUT",i.updateProjectAssign(t),{userNames:e})},v=function(e){return u("POST",i.addMemberUrl(),e)},m=function(e){return u("POST",i.sendInviteUrl(),e)},g=function(e,t){return u("POST",i.registerUserUrl(t),e,null,!0)},y=function(e,t,n){return u("PUT",i.modifyUserUrl(t),e)},b=function(e){return u("GET",i.validateRegisterBidUrl(e))},w=function(e){return u("GET",i.searchUsersUrl(e))};return{assignMember:d,getMembers:l,getAssignableMembers:c,unAssignMember:h,updateMember:p,updateUser:y,addMember:v,inviteMember:m,validateRegisterBid:b,registerUser:g,getSearchUser:w}}),define("projectMembers/MembersItemView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","localization","model/SingletonAppModel","modals/modalConfirm","projectMembers/MembersService"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("localization"),f=e("model/SingletonAppModel"),l=e("modals/modalConfirm"),c=e("projectMembers/MembersService"),h=u.getInstance(),p=s.View.extend({tpl:"tpl-project-members-item",className:"row rp-table-row",bindings:{"[data-js-time-from-now]":"text: lastLoginFromNow","[data-js-time-exact]":"text: lastLoginFormat","[data-js-member-avatar]":"attr: {src: imagePath}","[data-js-member-name]":"html: getFullName","[data-js-member-login]":"html: getLogin","[data-js-member-you]":"classes: {hide: not(isYou)}","[data-js-member-admin]":"classes: {hide: not(isAdmin)}","[data-js-member-unassign]":"classes: {disabled: not(canUnAssign)}, attr: {disabled: not(canUnAssign), title: getUnAssignTitle}","[data-js-select-roles]":"classes: {hide: isAdmin}","[data-js-admin-role]":"classes: {hide: not(isAdmin)}","[data-js-selected-role]":"text: getProjectRole","[data-js-member-role-mobile]":"text: getProjectRole","[data-js-dropdown-roles]":"updateRoleDropDown: assigned_projects","[data-js-button-roles] ":"classes: {disabled: not(canChangeRole)}, attr: {disabled: not(canChangeRole)}"},computeds:{getFullName:{deps:["full_name"],get:function(e){return this.searchString?o.textWrapper(e,this.searchString):e}},getUnAssignTitle:{deps:["isYou","userId","assigned_projects"],get:function(e,t,n){var r=a.members;return this.isPersonalProjectOwner()?r.unAssignTitlePersonal:e?r.unAssignTitleYou:this.validateForPermissions()?this.unassignedLock()?r.unAssignTitleExternal:r.unAssignTitle:r.unAssignTitleNoPermission}},getLogin:{deps:["userId"],get:function(e){return this.searchString?o.textWrapper(e,this.searchString):e}},canUnAssign:{deps:["isYou","userId","assigned_projects"],get:function(e,t,n){return!this.isPersonalProjectOwner()&&!this.unassignedLock()&&!e&&this.validateForPermissions()}},canChangeRole:{deps:["isYou","assigned_projects"],get:function(e,t){return!e&&this.validateForPermissions()}},getProjectRole:{deps:["assigned_projects"],get:function(){var e=this.model.getAssignedProjects(),t=this.appModel.get("projectId"),n=o.getRolesMap();return n[e[t].projectRole]}}},bindingHandlers:{updateRoleDropDown:{set:function(e,t){var n=this.view.model.getAssignedProjects(),i=this.view.appModel.get("projectId"),s=n[i].projectRole;_.each(r("a",e),function(e){var t=r(e).data("value")===s?"add":"remove";r(e)[t+"Class"]("active")})}}},events:{"click [data-js-login-time]":"toggleTimeView","click [data-js-dropdown-roles] a":"updateProjectRole","click [data-js-member-unassign]":"unAssignMember"},initialize:function(e){this.searchString=e.searchString||"",this.roles=o.getRolesMap(),this.appModel=new f,this.render()},render:function(){this.$el.html(o.templates(this.tpl,{roles:this.roles}))},isPersonalProjectOwner:function(){var e=this.appModel.get("projectId"),t=this.appModel.isPersonalProject();return t&&e===this.model.get("userId")+"_personal"},unassignedLock:function(){var e=this.model.toJSON(),t=this.appModel.get("projectId");return o.isUnassignedLock(e,e.assigned_projects[t])},updateProjectRole:function(e){e.preventDefault();var t=r(e.currentTarget);if(t.hasClass("active")||t.hasClass("disabled"))return;var n=t.data("value"),i=this.model.get("userId"),s=this.appModel.get("projectId"),u=this.model.getAssignedProjects();u[s].projectRole=n,c.updateMember(n,i,s).done(function(){this.model.setAssignedProjects(u),o.ajaxSuccessMessenger("updateProjectRole",this.model.get("full_name")||this.model.get("userId"))}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"updateProjectRole")})},validateForPermissions:function(){var e=h.userModel.getRoleForCurrentProject(),t=this.model.getAssignedProjects(),n=this.appModel.get("projectId"),r=t[n].projectRole,i=_.indexOf(h.projectRoles,e),s=_.indexOf(h.projectRoles,r);return h.userModel.get("isAdmin")||h.userModel.hasPermissions()&&i>=s},unAssignMember:function(e){e.preventDefault();var t=new l({headerText:a.dialogHeader.unAssignMember,bodyText:o.replaceTemplate(a.dialog.unAssignMember,this.model.get("userId").escapeHtml(),this.appModel.get("projectId")),okButtonDanger:!0,cancelButtonText:a.ui.cancel,okButtonText:a.ui.unassign});t.show().done(function(){return this.model.unAssign(this.appModel.get("projectId"))}.bind(this))},toggleTimeView:function(e){e.preventDefault();var t=r(e.currentTarget);t.closest("[data-js-members-table]").toggleClass("show-from-now")},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return p}),define("projectMembers/MembersModel",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","dataUrlResolver","callService"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("dataUrlResolver"),f=e("callService"),l=u.getInstance(),c=s.Model.extend({defaults:{account_type:"INTERNAL",assigned_projects:{},full_name:"",last_login:0,photoId:"",photo_loaded:!1,userId:"",userRole:"USER"},computeds:{isAdmin:{deps:["userRole"],get:function(e){return e===l.accountRolesEnum.administrator}},isYou:{deps:["userId"],get:function(e){return e===l.userModel.get("name")}},lastLoginFormat:{deps:["last_login"],get:function(e){return o.dateFormat(e)}},lastLoginFromNow:{deps:["lastLoginFormat"],get:function(e){return o.fromNowFormat(e)}},imagePath:{deps:["userId"],get:function(e){return o.updateImagePath(a.getAvatar()+e)}}},getAssignedProjects:function(){try{return JSON.parse(this.get("assigned_projects"))}catch(e){return{}}},setAssignedProjects:function(e){this.set({assigned_projects:JSON.stringify(e)})},getProjectRole:function(e){var t=this.getAssignedProjects();return t?t[e].projectRole:null},setProjectRole:function(e,t){var n=this.getAssignedProjects();n&&(n[e].projectRole=t),this.setAssignedProjects(n)},unAssign:function(e){var t=this.get("userId");return f.call("PUT",a.updateProjectUnassign(e),{userNames:[t]}).done(function(){o.ajaxSuccessMessenger("unAssignMember"),this.collection&&this.collection.remove(this)}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"unAssignMember")})},"delete":function(){var e=this.get("userId"),t=this.get("full_name");return f.call("DELETE",a.modifyUserUrl(e)).done(function(){o.ajaxSuccessMessenger("deleteMember",t||e),this.collection&&this.collection.remove(this)}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"deleteMember")})}});return c}),define("projectMembers/MembersCollection",["require","exports","module","jquery","backbone","projectMembers/MembersModel"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("projectMembers/MembersModel"),o=i.Collection.extend({model:s,parse:function(e){_.each(e,function(e){e.assigned_projects&&(e.assigned_projects=JSON.stringify(e.assigned_projects))},this),this.reset(e)}});return o}),function(e){typeof define=="function"&&define.amd?define("validate",["jquery"],e):e(jQuery)}(function(e){e.extend(e.fn,{validate:function(t){if(!this.length){t&&t.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.");return}var n=e.data(this[0],"validator");return n?n:(this.attr("novalidate","novalidate"),n=new e.validator(t,this[0]),e.data(this[0],"validator",n),n.settings.onsubmit&&(this.validateDelegate(":submit","click",function(t){n.settings.submitHandler&&(n.submitButton=t.target),e(t.target).hasClass("cancel")&&(n.cancelSubmit=!0),e(t.target).attr("formnovalidate")!==undefined&&(n.cancelSubmit=!0)}),this.submit(function(t){function r(){var r,i;return n.settings.submitHandler?(n.submitButton&&(r=e("<input type='hidden'/>").attr("name",n.submitButton.name).val(e(n.submitButton).val()).appendTo(n.currentForm)),i=n.settings.submitHandler.call(n,n.currentForm,t),n.submitButton&&r.remove(),i!==undefined?i:!1):!0}return n.settings.debug&&t.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,r()):n.form()?n.pendingRequest?(n.formSubmitted=!0,!1):r():(n.focusInvalid(),!1)})),n)},valid:function(){var t,n;return e(this[0]).is("form")?t=this.validate().form():(t=!0,n=e(this[0].form).validate(),this.each(function(){t=n.element(this)&&t})),t},removeAttrs:function(t){var n={},r=this;return e.each(t.split(/\s/),function(e,t){n[t]=r.attr(t),r.removeAttr(t)}),n},rules:function(t,n){var r=this[0],i,s,o,u,a,f;if(t){i=e.data(r.form,"validator").settings,s=i.rules,o=e.validator.staticRules(r);switch(t){case"add":e.extend(o,e.validator.normalizeRule(n)),delete o.messages,s[r.name]=o,n.messages&&(i.messages[r.name]=e.extend(i.messages[r.name],n.messages));break;case"remove":if(!n)return delete s[r.name],o;return f={},e.each(n.split(/\s/),function(t,n){f[n]=o[n],delete o[n],n==="required"&&e(r).removeAttr("aria-required")}),f}}return u=e.validator.normalizeRules(e.extend({},e.validator.classRules(r),e.validator.attributeRules(r),e.validator.dataRules(r),e.validator.staticRules(r)),r),u.required&&(a=u.required,delete u.required,u=e.extend({required:a},u),e(r).attr("aria-required","true")),u.remote&&(a=u.remote,delete u.remote,u=e.extend(u,{remote:a})),u}}),e.extend(e.expr[":"],{blank:function(t){return!e.trim(""+e(t).val())},filled:function(t){return!!e.trim(""+e(t).val())},unchecked:function(t){return!e(t).prop("checked")}}),e.validator=function(t,n){this.settings=e.extend(!0,{},e.validator.defaults,t),this.currentForm=n,this.init()},e.validator.format=function(t,n){return arguments.length===1?function(){var n=e.makeArray(arguments);return n.unshift(t),e.validator.format.apply(this,n)}:(arguments.length>2&&n.constructor!==Array&&(n=e.makeArray(arguments).slice(1)),n.constructor!==Array&&(n=[n]),e.each(n,function(e,n){t=t.replace(new RegExp("\\{"+e+"\\}","g"),function(){return n})}),t)},e.extend(e.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:e([]),errorLabelContainer:e([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){!this.checkable(e)&&(e.name in this.submitted||!this.optional(e))&&this.element(e)},onkeyup:function(e,t){if(t.which===9&&this.elementValue(e)==="")return;(e.name in this.submitted||e===this.lastElement)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(t,n,r){t.type==="radio"?this.findByName(t.name).addClass(n).removeClass(r):e(t).addClass(n).removeClass(r)},unhighlight:function(t,n,r){t.type==="radio"?this.findByName(t.name).removeClass(n).addClass(r):e(t).removeClass(n).addClass(r)}},setDefaults:function(t){e.extend(e.validator.defaults,t)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",maxlength:e.validator.format("Please enter no more than {0} characters."),minlength:e.validator.format("Please enter at least {0} characters."),rangelength:e.validator.format("Please enter a value between {0} and {1} characters long."),range:e.validator.format("Please enter a value between {0} and {1}."),max:e.validator.format("Please enter a value less than or equal to {0}."),min:e.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:!1,prototype:{init:function(){function r(t){var n=e.data(this[0].form,"validator"),r="on"+t.type.replace(/^validate/,""),i=n.settings;i[r]&&!this.is(i.ignore)&&i[r].call(n,this[0],t)}this.labelContainer=e(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||e(this.currentForm),this.containers=e(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var t=this.groups={},n;e.each(this.settings.groups,function(n,r){typeof r=="string"&&(r=r.split(/\s/)),e.each(r,function(e,r){t[r]=n})}),n=this.settings.rules,e.each(n,function(t,r){n[t]=e.validator.normalizeRule(r)}),e(this.currentForm).validateDelegate(":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox']","focusin focusout keyup",r).validateDelegate("select, option, [type='radio'], [type='checkbox']","click",r),this.settings.invalidHandler&&e(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler),e(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),e.extend(this.submitted,this.errorMap),this.invalid=e.extend({},this.errorMap),this.valid()||e(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(t){var n=this.clean(t),r=this.validationTargetFor(n),i=!0;return this.lastElement=r,r===undefined?delete this.invalid[n.name]:(this.prepareElement(r),this.currentElements=e(r),i=this.check(r)!==!1,i?delete this.invalid[r.name]:this.invalid[r.name]=!0),e(t).attr("aria-invalid",!i),this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),i},showErrors:function(t){if(t){e.extend(this.errorMap,t),this.errorList=[];for(var n in t)this.errorList.push({message:t[n],element:this.findByName(n)[0]});this.successList=e.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){e.fn.resetForm&&e(this.currentForm).resetForm(),this.submitted={},this.lastElement=null,this.prepareForm(),this.hideErrors(),this.elements().removeClass(this.settings.errorClass).removeData("previousValue").removeAttr("aria-invalid")},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t=0,n;for(n in e)t++;return t},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return this.size()===0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{e(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(t){}},findLastActive:function(){var t=this.lastActive;return t&&e.grep(this.errorList,function(e){return e.element.name===t.name}).length===1&&t},elements:function(){var t=this,n={};return e(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled], [readonly]").not(this.settings.ignore).filter(function(){return!this.name&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.name in n||!t.objectLength(e(this).rules())?!1:(n[this.name]=!0,!0)})},clean:function(t){return e(t)[0]},errors:function(){var t=this.settings.errorClass.split(" ").join(".");return e(this.settings.errorElement+"."+t,this.errorContext)},reset:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=e([]),this.toHide=e([]),this.currentElements=e([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(t){var n,r=e(t),i=t.type;return i==="radio"||i==="checkbox"?e("input[name='"+t.name+"']:checked").val():i==="number"&&typeof t.validity!="undefined"?t.validity.badInput?!1:r.val():(n=r.val(),typeof n=="string"?n.replace(/\r/g,""):n)},check:function(t){t=this.validationTargetFor(this.clean(t));var n=e(t).rules(),r=e.map(n,function(e,t){return t}).length,i=!1,s=this.elementValue(t),o,u,a;for(u in n){a={method:u,parameters:n[u]};try{o=e.validator.methods[u].call(this,s,t,a.parameters);if(o==="dependency-mismatch"&&r===1){i=!0;continue}i=!1;if(o==="pending"){this.toHide=this.toHide.not(this.errorsFor(t));return}if(!o)return this.formatAndAdd(t,a),!1}catch(f){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+a.method+"' method.",f),f}}if(i)return;return this.objectLength(n)&&this.successList.push(t),!0},customDataMessage:function(t,n){return e(t).data("msg"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase())||e(t).data("msg")},customMessage:function(e,t){var n=this.settings.messages[e];return n&&(n.constructor===String?n:n[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(arguments[e]!==undefined)return arguments[e];return undefined},defaultMessage:function(t,n){return this.findDefined(this.customMessage(t.name,n),this.customDataMessage(t,n),!this.settings.ignoreTitle&&t.title||undefined,e.validator.messages[n],"<strong>Warning: No message defined for "+t.name+"</strong>")},formatAndAdd:function(t,n){var r=this.defaultMessage(t,n.method),i=/\$?\{(\d+)\}/g;typeof r=="function"?r=r.call(this,n.parameters,t):i.test(r)&&(r=e.validator.format(r.replace(i,"{$1}"),n.parameters)),this.errorList.push({message:r,element:t,method:n.method}),this.errorMap[t.name]=r,this.submitted[t.name]=r},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,n;for(e=0;this.errorList[e];e++)n=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,n.element,this.settings.errorClass,this.settings.validClass),this.showLabel(n.element,n.message);this.errorList.length&&(this.toShow=this.toShow.add(this.containers));if(this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return e(this.errorList).map(function(){return this.element})},showLabel:function(t,n){var r,i,s,o=this.errorsFor(t),u=this.idOrName(t),a=e(t).attr("aria-describedby");o.length?(o.removeClass(this.settings.validClass).addClass(this.settings.errorClass),o.html(n)):(o=e("<"+this.settings.errorElement+">").attr("id",u+"-error").addClass(this.settings.errorClass).html(n||""),r=o,this.settings.wrapper&&(r=o.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(r):this.settings.errorPlacement?this.settings.errorPlacement(r,e(t)):r.insertAfter(t),o.is("label")?o.attr("for",u):o.parents("label[for='"+u+"']").length===0&&(s=o.attr("id").replace(/(:|\.|\[|\])/g,"\\$1"),a?a.match(new RegExp("\\b"+s+"\\b"))||(a+=" "+s):a=s,e(t).attr("aria-describedby",a),i=this.groups[t.name],i&&e.each(this.groups,function(t,n){n===i&&e("[name='"+t+"']",this.currentForm).attr("aria-describedby",o.attr("id"))}))),!n&&this.settings.success&&(o.text(""),typeof this.settings.success=="string"?o.addClass(this.settings.success):this.settings.success(o,t)),this.toShow=this.toShow.add(o)},errorsFor:function(t){var n=this.idOrName(t),r=e(t).attr("aria-describedby"),i="label[for='"+n+"'], label[for='"+n+"'] *";return r&&(i=i+", #"+r.replace(/\s+/g,", #")),this.errors().filter(i)},idOrName:function(e){return this.groups[e.name]||(this.checkable(e)?e.name:e.id||e.name)},validationTargetFor:function(t){return this.checkable(t)&&(t=this.findByName(t.name)),e(t).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(t){return e(this.currentForm).find("[name='"+t+"']")},getLength:function(t,n){switch(n.nodeName.toLowerCase()){case"select":return e("option:selected",n).length;case"input":if(this.checkable(n))return this.findByName(n.name).filter(":checked").length}return t.length},depend:function(e,t){return this.dependTypes[typeof e]?this.dependTypes[typeof e](e,t):!0},dependTypes:{"boolean":function(e){return e},string:function(t,n){return!!e(t,n.form).length},"function":function(e,t){return e(t)}},optional:function(t){var n=this.elementValue(t);return!e.validator.methods.required.call(this,n,t)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,this.pending[e.name]=!0)},stopRequest:function(t,n){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[t.name],n&&this.pendingRequest===0&&this.formSubmitted&&this.form()?(e(this.currentForm).submit(),this.formSubmitted=!1):!n&&this.pendingRequest===0&&this.formSubmitted&&(e(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(t){return e.data(t,"previousValue")||e.data(t,"previousValue",{old:null,valid:!0,message:this.defaultMessage(t,"remote")})}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(t,n){t.constructor===String?this.classRuleSettings[t]=n:e.extend(this.classRuleSettings,t)},classRules:function(t){var n={},r=e(t).attr("class");return r&&e.each(r.split(" "),function(){this in e.validator.classRuleSettings&&e.extend(n,e.validator.classRuleSettings[this])}),n},attributeRules:function(t){var n={},r=e(t),i=t.getAttribute("type"),s,o;for(s in e.validator.methods)s==="required"?(o=t.getAttribute(s),o===""&&(o=!0),o=!!o):o=r.attr(s),/min|max/.test(s)&&(i===null||/number|range|text/.test(i))&&(o=Number(o)),o||o===0?n[s]=o:i===s&&i!=="range"&&(n[s]=!0);return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(t){var n,r,i={},s=e(t);for(n in e.validator.methods)r=s.data("rule"+n.charAt(0).toUpperCase()+n.substring(1).toLowerCase()),r!==undefined&&(i[n]=r);return i},staticRules:function(t){var n={},r=e.data(t.form,"validator");return r.settings.rules&&(n=e.validator.normalizeRule(r.settings.rules[t.name])||{}),n},normalizeRules:function(t,n){return e.each(t,function(r,i){if(i===!1){delete t[r];return}if(i.param||i.depends){var s=!0;switch(typeof i.depends){case"string":s=!!e(i.depends,n.form).length;break;case"function":s=i.depends.call(n,n)}s?t[r]=i.param!==undefined?i.param:!0:delete t[r]}}),e.each(t,function(r,i){t[r]=e.isFunction(i)?i(n):i}),e.each(["minlength","maxlength"],function(){t[this]&&(t[this]=Number(t[this]))}),e.each(["rangelength","range"],function(){var n;t[this]&&(e.isArray(t[this])?t[this]=[Number(t[this][0]),Number(t[this][1])]:typeof t[this]=="string"&&(n=t[this].replace(/[\[\]]/g,"").split(/[\s,]+/),t[this]=[Number(n[0]),Number(n[1])]))}),e.validator.autoCreateRanges&&(t.min!=null&&t.max!=null&&(t.range=[t.min,t.max],delete t.min,delete t.max),t.minlength!=null&&t.maxlength!=null&&(t.rangelength=[t.minlength,t.maxlength],delete t.minlength,delete t.maxlength)),t},normalizeRule:function(t){if(typeof t=="string"){var n={};e.each(t.split(/\s/),function(){n[this]=!0}),t=n}return t},addMethod:function(t,n,r){e.validator.methods[t]=n,e.validator.messages[t]=r!==undefined?r:e.validator.messages[t],n.length<3&&e.validator.addClassRules(t,e.validator.normalizeRule(t))},methods:{required:function(t,n,r){if(!this.depend(r,n))return"dependency-mismatch";if(n.nodeName.toLowerCase()==="select"){var i=e(n).val();return i&&i.length>0}return this.checkable(n)?this.getLength(t,n)>0:e.trim(t).length>0},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(https?|s?ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test((new Date(e)).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},creditcard:function(e,t){if(this.optional(t))return"dependency-mismatch";if(/[^0-9 \-]+/.test(e))return!1;var n=0,r=0,i=!1,s,o;e=e.replace(/\D/g,"");if(e.length<13||e.length>19)return!1;for(s=e.length-1;s>=0;s--)o=e.charAt(s),r=parseInt(o,10),i&&(r*=2)>9&&(r-=9),n+=r,i=!i;return n%10===0},minlength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||i>=r},maxlength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||i<=r},rangelength:function(t,n,r){var i=e.isArray(t)?t.length:this.getLength(t,n);return this.optional(n)||i>=r[0]&&i<=r[1]},min:function(e,t,n){return this.optional(t)||e>=n},max:function(e,t,n){return this.optional(t)||e<=n},range:function(e,t,n){return this.optional(t)||e>=n[0]&&e<=n[1]},equalTo:function(t,n,r){var i=e(r);return this.settings.onfocusout&&i.unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){e(n).valid()}),t===i.val()},remote:function(t,n,r){if(this.optional(n))return"dependency-mismatch";var i=this.previousValue(n),s,o;return this.settings.messages[n.name]||(this.settings.messages[n.name]={}),i.originalMessage=this.settings.messages[n.name].remote,this.settings.messages[n.name].remote=i.message,r=typeof r=="string"&&{url:r}||r,i.old===t?i.valid:(i.old=t,s=this,this.startRequest(n),o={},o[n.name]=t,e.ajax(e.extend(!0,{url:r,mode:"abort",port:"validate"+n.name,dataType:"json",data:o,context:s.currentForm,success:function(r){var o=r===!0||r==="true",u,a,f;s.settings.messages[n.name].remote=i.originalMessage,o?(f=s.formSubmitted,s.prepareElement(n),s.formSubmitted=f,s.successList.push(n),delete s.invalid[n.name],s.showErrors()):(u={},a=r||s.defaultMessage(n,"remote"),u[n.name]=i.message=e.isFunction(a)?a(t):a,s.invalid[n.name]=!0,s.showErrors(u)),i.valid=o,s.stopRequest(n,o)}},r)),"pending")}}}),e.format=function(){throw"$.format has been deprecated. Please use $.validator.format instead."};var t={},n;e.ajaxPrefilter?e.ajaxPrefilter(function(e,n,r){var i=e.port;e.mode==="abort"&&(t[i]&&t[i].abort(),t[i]=r)}):(n=e.ajax,e.ajax=function(r){var i=("mode"in r?r:e.ajaxSettings).mode,s=("port"in r?r:e.ajaxSettings).port;return i==="abort"?(t[s]&&t[s].abort(),t[s]=n.apply(this,arguments),t[s]):n.apply(this,arguments)}),e.extend(e.fn,{validateDelegate:function(t,n,r){return this.bind(n,function(n){var i=e(n.target);if(i.is(t))return r.apply(i,arguments)})}})}),define("modals/modalAddUser",["require","exports","module","jquery","underscore","modals/_modalView","backbone","backbone-epoxy","app","util","projectMembers/MembersService","adminService","model/SingletonAppModel","dataUrlResolver","localization","validate"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("modals/_modalView"),o=e("backbone"),u=e("backbone-epoxy"),a=e("app"),f=e("util"),l=e("projectMembers/MembersService"),c=e("adminService"),h=e("model/SingletonAppModel"),p=e("dataUrlResolver"),d=e("localization");e("validate");var v=a.getInstance(),m=s.extend({template:"tpl-modal-add-user",className:"modal-add-user",events:{"click [data-js-load]":"onClickLoad","click [data-js-generate-password]":"generatePassword","click [data-js-select-role-dropdown] a":"selectRole","click [data-js-account-role-dropdown] a":"selectAccount"},bindings:{"[data-js-user-login]":"value: userId","[data-js-user-password]":"value: password","[data-js-user-email]":"value: email","[data-js-user-full-name]":"value: full_name","[data-js-user-project]":"value: default_project","[data-js-user-project-role-text]":"text: getProjectRole","[data-js-user-account-role]":"value: accountRole","[data-js-user-account-role-text]":"text: accountRole"},computeds:{getProjectRole:{deps:["projectRole"],get:function(e){var t=f.getRolesMap();return t[e]}}},initialize:function(e){this.type=e.type,this.appModel=new h,this.model=new u.Model({userId:"",password:"",email:"",full_name:"",accountRole:v.defaultAccountRole,default_project:"",projectRole:v.defaultProjectRole}),this.render()},onClickLoad:function(){this.$form.valid()&&this.addUser()},onKeySuccess:function(){r("[data-js-load]",this.$el).focus(),this.$form.valid()&&this.addUser()},render:function(){this.$el.html(f.templates(this.template,{roles:f.getRolesMap(),isUsers:this.isUsers(),accountRoles:v.accountRoles})),this.setupAnchors(),this.setupValidation(),this.isUsers()&&this.setupProjectSearch()},isUsers:function(){return this.type=="users"},setupAnchors:function(){this.$password=r("[data-js-user-password]",this.$el),this.$form=r("[data-js-add-user-form]",this.$el),this.$selectProject=r("[data-js-user-project]",this.$el)},setupValidation:function(){var e=this;r.validator.setDefaults({debug:!0,success:"valid"}),this.validator=this.$form.validate({errorClass:"has-error",label:r("[data-js-add-user-form-group]"),rules:{username:{required:!0,rangelength:v.forms.nameRange,remote:this.remoteValidation(),symbols:v.patterns.symbolsLogin},fullName:{required:!0,rangelength:v.forms.fullNameRange,symbols:v.patterns.symbolsFullName},email:{required:!0,email:!0,remote:this.remoteValidation()},password:{required:!0,rangelength:v.forms.passwordRange}},messages:{username:{required:d.validation.requiredDefault,rangelength:d.validation.loginSize,remote:d.validation.registeredLogin,symbols:d.validation.projectNameRegex},fullName:{required:d.validation.requiredDefault,rangelength:d.validation.fullNameSize,symbols:d.validation.fullNameRegex},email:{required:d.validation.requiredDefault,email:d.validation.incorrectEmail,remote:d.validation.registeredEmail},password:{required:d.validation.requiredDefault,rangelength:d.validation.passwordSize}},ignore:'input[id^="s2id"]',errorPlacement:function(e,t){e.appendTo(r("[data-js-add-user-form-error]",t.closest("[data-js-add-user-form-group]")))},highlight:function(e,t){r(e).closest("[data-js-add-user-form-group]").addClass(t)},unhighlight:function(e,t){r(e).closest("[data-js-add-user-form-group]").removeClass(t)}}),this.isUsers()&&this.addProjectValidation()},addProjectValidation:function(){this.$selectProject.rules("add",{required:!0,messages:{required:d.validation.requiredDefault}}),this.$selectProject.on("change",function(){this.$selectProject.valid&&i.isFunction(this.$selectProject.valid)&&this.$selectProject.valid()}.bind(this))},setupProjectSearch:function(){var e=this;f.setupSelect2WhithScroll(this.$selectProject,{multiple:!1,min:v.forms.projectNameRange[0],minimumInputLength:v.forms.projectNameRange[0],maximumInputLength:v.forms.projectNameRange[1],placeholder:d.admin.enterProjectName,allowClear:!0,initSelection:function(e,t){t({id:e.val(),text:e.val()})},query:function(t){c.getProjects(e.getSearchQuery(t.term)).done(function(n){var r={results:[]};i.each(n.content,function(t){t.projectId!==e.model.get("default_project")&&r.results.push({id:t.projectId,text:t.projectId})}),t.callback(r)}).fail(function(e){f.ajaxFailMessenger(e)})}})},getSearchQuery:function(e){return"?page.sort=name,asc&page.page=1&page.size=10&&filter.cnt.name="+e},remoteValidation:function(){return{type:"GET",url:p.userInfoValidation(),data:{},dataFilter:function(e){var t=JSON.parse(e);return!t.is}}},selectRole:function(e){e.preventDefault();var t=r(e.target),n=t.closest(".open").find(".dropdown-toggle"),i=t.data("value")?t.data("value"):t.text();if(t.hasClass("disabled-option"))return;this.model.set("projectRole",i)},selectAccount:function(e){e.preventDefault();var t=r(e.target),n=t.closest(".open").find(".dropdown-toggle"),i=t.data("value")?t.data("value"):t.text();if(t.hasClass("disabled-option"))return;n.attr("value",i),this.model.set("accountRole",i),r(".select-value",n).text(t.text())},generatePassword:function(e){e.preventDefault();if(!r(e.target).hasClass("disabled")){var t=this.randomPassword();this.$password.val(t),this.$password.valid&&i.isFunction(this.$password.valid)&&this.$password.valid(),this.model.set("password",t)}},randomPassword:function(){var e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890",t=6,n="";for(var r=0,i=e.length;r<t;++r)n+=e.charAt(Math.floor(Math.random()*i));return n},getUserData:function(){var e=this.model.toJSON();return{default_project:this.isUsers()?e.default_project:this.appModel.get("projectId"),login:e.userId,email:e.email,projectRole:e.projectRole,accountRole:this.isUsers()?e.accountRole:v.defaultAccountRole,full_name:e.full_name,password:e.password}},addUser:function(){var e=this.getUserData();this.showLoading(),e&&l.addMember(e).done(function(e){if(e.warning){var t=d.failMessages;e.warning.indexOf(t.serverNotConfigured)>=0?f.ajaxFailMessenger(null,"addUserWithoutEmail"):f.ajaxFailMessenger(null,"addMember",e.warning)}else f.ajaxSuccessMessenger("addMember");this.trigger("add:user")}.bind(this)).fail(function(e){f.ajaxFailMessenger(e,"addMember")}).always(function(){this.successClose()}.bind(this))}});return m}),define("components/UserSearchComponent",["require","exports","module","jquery","backbone","util","app","projectMembers/MembersService","model/SingletonAppModel","localization","dataUrlResolver"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("app"),u=e("projectMembers/MembersService"),a=e("model/SingletonAppModel"),f=e("localization"),l=e("dataUrlResolver"),c=o.getInstance(),h=function(e,t){t=t||{};var n=new a,r=function(e){var t=n.get("projectId"),r=_.keys(e.assigned_projects);return _.contains(r,t)},i=[];s.setupSelect2WhithScroll(e,{min:1,minimumInputLength:1,maximumInputLength:256,maximumSelectionSize:1,multiple:!1,dropdownCssClass:"rp-select2-user-search",allowClear:!0,placeholder:f.members.enterLoginEmail,initSelection:function(e,t){t({id:e.val(),text:e.val()})},formatResultCssClass:function(e){if(i.length==0)return"no-exact-match-user"},createSearchChoice:function(e,t){if(_.filter(t,function(t){return t.text.localeCompare(e)===0}).length===0)return s.validateEmail(e)?{id:e,text:e}:null},formatResult:function(e){return s.templates("tpl-user-search-result",{user:e,imagePath:s.updateImagePath(l.getAvatar()+e.id)})},query:function(e){u.getSearchUser({search:e.term}).done(function(t){var n={results:[]};i=[],_.each(t.content,function(e){i.push(e),n.results.push({id:e.userId,text:e.userId,name:e.full_name,disabled:r(e)})}),e.callback(n)}).fail(function(e){s.ajaxFailMessenger(e)})}})};return{setupUserSearch:h}}),define("modals/modalInviteUser",["require","exports","module","jquery","underscore","modals/_modalView","backbone","backbone-epoxy","app","util","projectMembers/MembersService","adminService","model/SingletonAppModel","localization","dataUrlResolver","components/UserSearchComponent","validate"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("modals/_modalView"),o=e("backbone"),u=e("backbone-epoxy"),a=e("app"),f=e("util"),l=e("projectMembers/MembersService"),c=e("adminService"),h=e("model/SingletonAppModel"),p=e("localization"),d=e("dataUrlResolver"),v=e("components/UserSearchComponent");e("validate");var m=a.getInstance(),g=s.extend({template:"tpl-modal-invite-user",className:"modal-invite-user",events:{"click [data-js-load]":"onClickInvite","click [data-js-ok]":"onClickOk","click [data-js-select-role-dropdown] a":"selectRole","focus [data-js-invite-link]":"selectLink","click [data-js-copy-link]":"copyLink"},bindings:{"[data-js-user]":"value: user","[data-js-user-project]":"value: default_project","[data-js-user-project-role-text]":"text: getProjectRole"},computeds:{getProjectRole:{deps:["projectRole"],get:function(e){var t=f.getRolesMap();return t[e]}}},initialize:function(e){this.type=e.type,this.appModel=new h,this.model=new u.Model({user:"",default_project:"",projectRole:m.defaultProjectRole}),this.render()},onKeySuccess:function(){r("[data-js-load]",this.$el).trigger("click")},onClickInvite:function(){this.$form.valid()&&(f.validateEmail(this.model.get("user"))?this.inviteUser():this.assignUser())},onClickOk:function(){this.successClose()},render:function(){this.$el.html(f.templates(this.template,{roles:f.getRolesMap(),canSelectRole:this.canSelectRole.bind(this),isUsers:this.isUsers()})),this.setupAnchors(),this.setupValidation(),this.setupUserSearch(),this.setupProjectSearch()},isUsers:function(){return this.type=="users"},canSelectRole:function(e){var t=m.userModel,n=t.getRoleForCurrentProject(),r=i.indexOf(m.projectRoles,n),s=i.indexOf(m.projectRoles,e),o=t.get("isAdmin");return o||t.hasPermissions()&&r>=s},setupAnchors:function(){this.$form=r("[data-js-invite-user-form]",this.$el),this.$inviteBtn=r("[ data-js-load]",this.$el),this.$okBtn=r("[ data-js-ok]",this.$el),this.$cancelBtn=r("[data-js-cancel]",this.$el),this.$successFrom=r("[data-js-success-from]",this.$el),this.$usersField=r("[data-js-user]",this.$el),this.$inviteLink=r("[data-js-invite-link]",this.$el),this.$selectProject=r("[data-js-user-project]",this.$el)},setupUserSearch:function(){var e=this;this.isUsers()?(e.$usersField.addClass("rp-input-default rp-width-100 form-control"),e.$usersField.rules("add",{email:!0,remote:this.remoteValidation(),messages:{email:p.validation.incorrectEmail,remote:p.validation.registeredEmail}})):(v.setupUserSearch(e.$usersField),e.$usersField.on("change",function(){e.$usersField.valid&&i.isFunction(e.$usersField.valid)&&e.$usersField.valid()}))},remoteValidation:function(){return{type:"GET",url:d.userInfoValidation(),data:{},dataFilter:function(e){var t=JSON.parse(e);return!t.is}}},setupValidation:function(){var e=this;r.validator.setDefaults({debug:!0,success:"valid"}),this.validator=this.$form.validate({errorClass:"has-error",label:r("[data-js-invite-user-form-group]"),rules:{user:{required:!0}},messages:{user:{required:p.validation.requiredDefault}},ignore:'input[id^="s2id"]',errorPlacement:function(e,t){e.appendTo(r("[data-js-invite-user-form-error]",t.closest("[data-js-invite-user-form-group]")))},highlight:function(e,t){r(e).closest("[data-js-invite-user-form-group]").addClass(t)},unhighlight:function(e,t){r(e).closest("[data-js-invite-user-form-group]").removeClass(t)}}),this.isUsers()&&this.addProjectValidation()},addProjectValidation:function(){this.$selectProject.rules("add",{required:!0,messages:{required:p.validation.requiredDefault}}),this.$selectProject.on("change",function(){this.$selectProject.valid&&i.isFunction(this.$selectProject.valid)&&this.$selectProject.valid()}.bind(this))},selectRole:function(e){e.preventDefault();var t=r(e.target),n=t.closest(".open").find(".dropdown-toggle"),i=t.data("value")?t.data("value"):t.text();if(t.hasClass("disabled-option"))return;this.model.set("projectRole",i)},setupProjectSearch:function(){var e=this;f.setupSelect2WhithScroll(this.$selectProject,{multiple:!1,min:m.forms.projectNameRange[0],minimumInputLength:m.forms.projectNameRange[0],maximumInputLength:m.forms.projectNameRange[1],placeholder:p.admin.enterProjectName,allowClear:!0,initSelection:function(e,t){t({id:e.val(),text:e.val()})},query:function(t){c.getProjects(e.getSearchQuery(t.term)).done(function(n){var r={results:[]};i.each(n.content,function(t){t.projectId!==e.model.get("default_project")&&r.results.push({id:t.projectId,text:t.projectId})}),t.callback(r)}).fail(function(e){f.ajaxFailMessenger(e)})}})},getSearchQuery:function(e){return"?page.sort=name,asc&page.page=1&page.size="+m.autocompletePageSize+"&filter.cnt.name="+e},selectLink:function(e){e.preventDefault(),r(e.currentTarget).select()},copyLink:function(e){e.preventDefault(),this.$inviteLink.select();try{document.execCommand("copy")}catch(t){}},getUserData:function(){var e=this.model.toJSON();return{default_project:this.isUsers()?e.default_project:this.appModel.get("projectId"),email:e.user,role:e.projectRole}},assignUser:function(){var e=this.getUserData();if(e){var t={};t[e.email]=e.role,this.showLoading(),l.assignMember(t,e.default_project).done(function(){f.ajaxSuccessMessenger("assignMember",e.email),this.trigger("add:user"),this.successClose()}.bind(this)).fail(function(e){f.ajaxFailMessenger(e,"assignMember")}).always(function(){this.hideLoading()}.bind(this))}},inviteUser:function(){var e=this.getUserData();e&&(this.showLoading(),l.inviteMember(e).done(function(e){this.showSuccess(e),f.ajaxSuccessMessenger("inviteMember")}.bind(this)).fail(function(e){var t=p.failMessages,n;if(e)try{n=JSON.parse(e.responseText)}catch(r){}n&&(n.error_code==40305||n.message.indexOf(t.serverNotConfigured)>=0)?f.ajaxFailMessenger(null,"inviteMember",t.impossibleInvite):f.ajaxFailMessenger(e,"inviteMember")}).always(function(){this.hideLoading()}.bind(this)))},showSuccess:function(e){this.$inviteLink.val(e.backLink),this.$inviteBtn.addClass("hide"),this.$cancelBtn.addClass("hide"),this.$okBtn.removeClass("hide"),this.$form.addClass("hide"),this.$successFrom.removeClass("hide"),r("[data-js-email]",this.$successFrom).text(this.model.get("user"))}});return g}),define("modals/modalPermissionsMap",["require","exports","module","jquery","modals/_modalView","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("modals/_modalView"),s=e("util"),o=i.extend({template:"tpl-modal-permissions-map",className:"modal-permissions-map",initialize:function(e){this.render()},render:function(){this.$el.html(s.templates(this.template,{}))},onKeySuccess:function(){return}});return o}),define("projectMembers/MembersTableView",["require","exports","module","jquery","backbone","backbone-epoxy","util","core/components","app","localization","model/SingletonAppModel","projectMembers/MembersItemView","projectMembers/MembersService","projectMembers/MembersCollection","modals/modalAddUser","modals/modalInviteUser","modals/modalPermissionsMap"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("core/components"),a=e("app"),f=e("localization"),l=e("model/SingletonAppModel"),c=e("projectMembers/MembersItemView"),h=e("projectMembers/MembersService"),p=e("projectMembers/MembersCollection"),d=e("modals/modalAddUser"),v=e("modals/modalInviteUser"),m=e("modals/modalPermissionsMap"),g=a.getInstance(),y=s.View.extend({tpl:"tpl-project-members-shell",emptyMembersTpl:"tpl-project-members-empty",className:"rp-project-members",bindings:{"[data-js-members-search]":"attr: {placeholder: getPlaceHolder}","[data-js-add-user]":"classes: {hide: not(showAddMemberBtn)}","[data-js-invite-user]":"classes: {disabled: not(canInviteUser)}, attr: {disabled: not(canInviteUser)}"},computeds:{getPlaceHolder:function(){return f.members.searchName},showAddMemberBtn:function(){return this.isGrandAdmin},canInviteUser:function(){return g.userModel.get("isAdmin")||g.userModel.hasPermissions()}},initialize:function(e){this.isGrandAdmin=e.grandAdmin,this.model=new i.Model({search:"",empty:!1,notFound:!1}),this.renderViews=[],this.appModel=new l,e.project&&this.appModel.set(e.project),this.collection=new p,this.listenTo(this.collection,"reset",this.renderMembersList),this.listenTo(this.collection,"remove",this.updateMembers),this.pageType="PaginateProjectMembers_unAssignMember_"+this.projectId,this.render()},events:{"validation::change [data-js-members-search]":"onChangeFilterName","click [data-js-add-user]":"showAddUser","click [data-js-invite-user]":"showInviteUser","click [data-js-permissions]":"showPermissionsModal"},render:function(){return this.$el.html(o.templates(this.tpl,{})),this.setupAnchors(),o.bootValidator(this.$searchFilter,[{validator:"minMaxNotRequired",type:"memberName",min:1,max:128}]),this.paging=new u.PagingToolbarSaveUser({el:this.$pagingBlock,model:new i.Model,pageType:this.pageType}),this.listenTo(this.paging,"page",this.updateMembers),this.listenTo(this.paging,"count",this.updateMembers),this.paging.ready.done(function(){this.paging.urlModel.get("filter.cnt.name")&&(this.model.set({search:this.paging.urlModel.get("filter.cnt.name")}),this.$searchFilter.val(this.model.get("search"))),this.listenTo(this.model,"change:search",this.onChangeModelSearch),this.updateMembers()}.bind(this)),this},setupAnchors:function(){this.$membersList=r("[data-js-members-list]",this.$el),this.$pagingBlock=r("[data-js-members-paginate]",this.$el),this.$searchFilter=r("[data-js-members-search]",this.$el)},updateMembers:function(){this.paging.render(),this.loadMembers()},loadMembers:function(){h.getMembers(this.appModel.get("projectId"),this.getSearchQuery()).done(function(e){if(e.page.totalPages<e.page.number&&e.page.totalPages!=0){this.paging.trigger("page",e.page.totalPages);return}this.paging.model.set(e.page),this.paging.render(),this.collection.parse(e.content?e.content:e)}.bind(this)).fail(function(e){this.collection.parse([]),o.ajaxFailMessenger(e,"loadMembers")}.bind(this)).always(function(){r("#filter-page",this.$el).removeClass("load")}.bind(this))},onChangeModelSearch:function(){this.paging.trigger("page",1)},onChangeFilterName:function(e,t){t.valid&&(this.model.set({search:t.value}),this.paging.urlModel.set({"filter.cnt.name":t.value}))},getSearchQuery:function(){return{search:encodeURIComponent(this.model.get("search")),page:this.paging.model.get("number"),size:this.paging.model.get("size")}},renderEmptyMembers:function(){this.clearMembers(),this.$membersList.append(o.templates(this.emptyMembersTpl,{}))},renderMembersList:function(){this.clearMembers();if(_.isEmpty(this.collection.models)){this.renderEmptyMembers();return}_.each(this.collection.models,function(e){var t=new c({model:e,searchString:this.model.get("search")});this.$membersList.append(t.$el),this.renderViews.push(t)},this)},clearMembers:function(){_.each(this.renderViews,function(e){e.destroy()}),this.$membersList.html(""),this.renderViews=[]},showInviteUser:function(e){e.preventDefault();var t=new v({});this.listenToOnce(t,"add:user",this.updateMembers),t.show()},showAddUser:function(e){e.preventDefault();var t=new d({});this.listenToOnce(t,"add:user",this.updateMembers),t.show()},showPermissionsModal:function(e){e.preventDefault();var t=new m({});t.show()},destroy:function(){this.clearMembers(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return y}),define("projectMembers/MembersPageView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","projectMembers/MembersTableView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("projectMembers/MembersTableView"),f=u.getInstance(),l=s.View.extend({template:"tpl-project-members",templateHeader:"tpl-project-members-header",initialize:function(e){this.context=e.context,this.$header=this.context.getMainView().$header,this.$el=this.context.getMainView().$body},render:function(){this.renderHeader(),this.$el.html(o.templates(this.template),{}),this.body=new a({}),r("[data-js-members]",this.$el).append(this.body.$el)},renderHeader:function(){this.$header.html(o.templates(this.templateHeader),{})},destroy:function(){this.$header.empty(),this.body&&this.body.destroy(),this.undelegateEvents(),this.stopListening()}});return{ContentView:l}}),define("userProfile/UserProfileHeader",["require","exports","module","jquery","backbone","backbone-epoxy","core/components","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("core/components"),u=e("util"),a=o.BaseView.extend({initialize:function(e){this.$el=e.header,this.vent=e.vent,this.context=e.context},tpl:"tpl-user-page-header",render:function(){return this.$el.html(u.templates(this.tpl)),this},clearActives:function(){r("#main_content #topHeader").find(".active").removeClass("active")},destroy:function(){this.$el.empty(),this.clearActives(),this.undelegateEvents(),this.unbind(),delete this}});return a}),define("modals/modalChangePassword",["require","exports","module","jquery","underscore","modals/_modalView","backbone","backbone-epoxy","app","util","coreService"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("modals/_modalView"),o=e("backbone"),u=e("backbone-epoxy"),a=e("app"),f=e("util"),l=e("coreService"),c=a.getInstance(),h=s.extend({tpl:"tpl-modal-change-password",className:"modal-change-password",events:{"click [data-js-ok]:not(.disabled)":"submitChangePassword","change [data-js-show-password]":"showPassword","validation::change [data-js-change-password]":"validatePass"},initialize:function(e){this.render(),f.confirmValidator({holder:this.$confirmGroup,min:4,max:25}),f.configRegexValidation(this.$originalPass,"originalPass")},render:function(){this.$el.html(f.templates(this.tpl)),this.setupAnchors()},setupAnchors:function(){this.$originalPass=r("[data-js-origin-password]",this.$el),this.$newPass=r("[data-js-new-password]",this.$el),this.$confirmPass=r("[data-js-confirm-password]",this.$el),this.$submitBtn=r("[data-js-ok]",this.$el),this.$confirmGroup=r("[data-js-confirm-group]",this.$el)},onKeySuccess:function(){this.$submitBtn.hasClass("disabled")||this.submitChangePassword()},validatePass:function(e,t){var n;t.valid?n=this.$originalPass.val()&&this.$originalPass.data("valid")&&this.$newPass.val()&&!this.$confirmGroup.hasClass("has-error")?"remove":"add":n="add",this.$submitBtn[n+"Class"]("disabled")},showPassword:function(e){var t=r(e.currentTarget).is(":checked")?"text":"password";this.$originalPass.add(this.$newPass).add(this.$confirmPass).attr("type",t)},submitChangePassword:function(){var e={oldPassword:this.$originalPass.val(),newPassword:this.$newPass.val()},t=this;l.submitPassChange(e).done(function(){f.ajaxSuccessMessenger("submitChangePass"),t.hide()}).fail(function(e){var n=e.responseText.indexOf("40010")>-1?"submitChangePassInvalid":"submitChangePass";n==="submitChangePassInvalid"&&(t.$originalPass.focus(),t.$originalPass.closest(".rp-form-group").addClass("has-error")),f.ajaxFailMessenger(null,n)})}});return h}),define("modals/modalRegenerateUUID",["require","exports","module","jquery","underscore","modals/_modalView","backbone","backbone-epoxy","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("modals/_modalView"),o=e("backbone"),u=e("backbone-epoxy"),a=e("util"),f=s.extend({tpl:"tpl-modal-regenerate-uuid",className:"modal-regenerate-UUID",events:{"click [data-js-ok]":"onConfirm"},initialize:function(){this.render()},render:function(){this.$el.html(a.templates(this.tpl))},onConfirm:function(){this.successClose()}});return f}),define("modals/modalEditUserInfo",["require","exports","module","jquery","underscore","modals/_modalView","backbone","backbone-epoxy","app","util","localization","coreService"],function(e,t,n){var r=e("jquery"),i=e("underscore"),s=e("modals/_modalView"),o=e("backbone"),u=e("backbone-epoxy"),a=e("app"),f=e("util"),l=e("localization"),c=e("coreService"),h=a.getInstance(),p=s.extend({tpl:"tpl-modal-edit-user-info",className:"modal-edit-user-info",bindings:{"[data-js-full-name]":"value: fullName","[data-js-user-email]":"value: email"},events:{"click [data-js-cancel]":"resetUserInfo","click [data-js-ok]:not(.disabled)":"submitEditInfo","validation::change [data-js-full-name]":"validateUserInfo","validation::change [data-js-user-email]":"validateUserInfo"},initialize:function(e){this.oldName=this.model.get("fullName"),this.oldEmail=this.model.get("email"),this.isSubmit=!1,this.render()},render:function(){this.$el.html(f.templates(this.tpl)),this.setupAnchors(),this.setupValidation()},onKeySuccess:function(){this.$submitInfo.hasClass("disabled")||this.submitEditInfo()},validateUserInfo:function(){var e=this.$email.data("valid")&&this.$fullName.data("valid")&&(this.$fullName.val()!==this.oldName||this.$email.val()!==this.oldEmail)?"remove":"add";this.$submitInfo[e+"Class"]("disabled")},setupAnchors:function(){this.$fullName=r("[data-js-full-name]",this.$el),this.$email=r("[data-js-user-email]",this.$el),this.$submitInfo=r("[data-js-ok]",this.$el)},setupValidation:function(){f.bootValidator(this.$email,[{validator:"matchRegex",type:"emailMatchRegex",message:l.validation.submitProfileInfoEmail,pattern:h.patterns.email},{validator:"remoteEmail",remote:!0,message:l.validation.registeredEmail,type:"remoteEmail"},{validator:"required"}]),f.bootValidator(this.$fullName,[{validator:"matchRegex",type:"fullNameInfoRegex",pattern:h.patterns.fullName},{validator:"required"}])},resetUserInfo:function(){this.model.set("fullName",this.oldName),this.model.set("email",this.oldEmail)},submitEditInfo:function(){var e={},t=this,n=h.userModel.get("image"),i=this.$fullName.val(),s=this.$email.val();e.full_name=i,this.model.set("fullName",i),e.email=s,this.model.set("email",s),this.isSubmit=!0,c.submitProfileInfo(e).done(function(){f.ajaxSuccessMessenger("submitProfileInfo"),h.userModel.get("image")||h.userModel.set("image",n),t.isSubmit=!1,t.hide()}).fail(function(e){var n="submitProfileInfo",i="";e.responseText.indexOf("4094")>=0?n="submitProfileInfoDuplication":h.patterns.emailWrong.test(e.responseText)&&(n="submitProfileInfoWrongData"),n!=="submitProfileInfoWrongData"?(t.$email.focus(),t.$email.closest(".rp-form-group").addClass("has-error"),i=l.validation.registeredEmail):i=l.failMessages.submitProfileInfoWrongData,r(".help-line",t.$email.closest(".rp-form-group")).text(i),t.isSubmit=!1,t.resetUserInfo(),f.ajaxFailMessenger(null,n)})}});return p}),define("tooltips/RegenerateUUIDTooltipView",["require","exports","module","jquery","backbone-epoxy","util","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone-epoxy"),s=e("util"),o=e("localization"),u=i.View.extend({template:"tpl-profile-regenerate-uuid",className:"regenerate-uuid-tooltip",initialize:function(){this.render()},render:function(){this.$el.html(s.templates(this.template))},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove(),delete this}});return u}),define("modals/modalForceUpdate",["require","exports","module","jquery","underscore","modals/_modalView","backbone","backbone-epoxy","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("modals/_modalView"),o=e("backbone"),u=e("backbone-epoxy"),a=e("util"),f=s.extend({tpl:"tpl-modal-force-update",className:"modal-force-update",events:{"click [data-js-ok]":"onConfirm"},bindings:{"[data-js-type]":"text: account_type"},initialize:function(e){this.msg=e.msg,this.render()},render:function(){this.$el.html(a.templates(this.tpl,{msg:this.msg}))},onConfirm:function(){this.successClose()}});return f}),define("userProfile/UserProfileView",["require","exports","module","jquery","backbone","backbone-epoxy","core/components","coreService","localization","modals/modalChangePassword","modals/modalRegenerateUUID","modals/modalEditUserInfo","modals/modalConfirm","tooltips/RegenerateUUIDTooltipView","modals/modalForceUpdate","callService","dataUrlResolver","util","app"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("core/components"),u=e("coreService"),a=e("localization"),f=e("modals/modalChangePassword"),l=e("modals/modalRegenerateUUID"),c=e("modals/modalEditUserInfo"),h=e("modals/modalConfirm"),p=e("tooltips/RegenerateUUIDTooltipView"),d=e("modals/modalForceUpdate"),v=e("callService"),m=e("dataUrlResolver"),g=e("util"),y=e("app"),b=y.getInstance(),w=o.BaseView.extend({tpl:"tpl-user-profile-view",initialize:function(e){this.$el=e.body,this.context=e.context,this.model=b.userModel,this.apiTokenModel=new i.Model({apiToken:null}),this.listenTo(this.apiTokenModel,"change:apiToken",this.setEditorValue);var t=this;u.getApiToken().done(function(e){t.apiTokenModel.set({apiToken:e.access_token}),t.$apiToken.val(e.access_token)}).fail(function(){t.generateApiToken()}),this.render()},bindings:{"[data-js-user-name]":"text: fullName","[data-js-user-email]":"text: email","[data-js-user-login]":"text: user_login"},events:{"click [data-js-config-tab] li > a ":"changeLangConfig","click [data-js-change-password]":"showChangePass","click [data-js-edit-info]":"showEditUserInfo","change [data-js-select-photo]":"previewPhoto","submit [data-js-upload-photo-form]":"uploadPhoto","click [data-js-remove-photo]":"removePhoto","click [data-js-input-token]":"selectToken","click [data-js-update-token]":"updateToken","click [data-js-force-update]":"forceUpdate"},render:function(){return this.model.ready.done(function(){var e=this.getParams();this.$el.html(g.templates(this.tpl,e)),this.setupAnchors(),this.initEditor(),this.loadRegenerateUUIDTooltip()}.bind(this)),this},getParams:function(){var e=this.model.toJSON();return e.image=g.updateImagePath(e.image),e.apiToken=this.apiTokenModel.get("apiToken"),e},setupAnchors:function(){this.$editPhotoBlock=r("[data-js-edit-photo]",this.$el),this.$uploadPhotoBlock=r("[data-js-upload-block]",this.$el),this.$wrongImageMessage=r("[data-js-photo-error]",this.$el),this.$imgSelector=r("[data-js-select-photo]",this.$el),this.$profileAvatar=r("[data-js-user-img]",this.$el),this.$editor=r("[data-js-editor]",this.$el),this.$certificate=r("[data-js-certificate]",this.$el),this.$apiToken=r("[data-js-input-token]",this.$el)},selectToken:function(e){r(e.target).select()},loadRegenerateUUIDTooltip:function(){var e=r("[data-js-update-token]",this.$el);g.appendTooltip(function(){var e=new p({});return e.$el.html()},e,e)},updateToken:function(){var e=this;(new l).show().done(function(){return e.generateApiToken()})},forceUpdate:function(e){e.preventDefault();var t=this.model.get("account_type");t.toLowerCase()==="github"&&u.gitHubForceUpdate().done(function(e){this.showForceUpdateModal(e)}.bind(this)).fail(function(e){g.ajaxFailMessenger(e,"forceUpdateGitHub")}.bind(this))},showForceUpdateModal:function(e){var t=this,n=e&&e.msg?e.msg:a.userProfile.infoSynchronized;(new d({model:t.model,msg:n})).show().done(function(){t.model.logout()})},showChangePass:function(){var e=new f({model:this.model});e.show()},showEditUserInfo:function(){var e=new c({model:this.model});e.show()},generateApiToken:function(){var e=this;u.generateApiToken().done(function(t){e.apiTokenModel.set({apiToken:t.access_token}),e.$apiToken.val(t.access_token),g.ajaxSuccessMessenger("updateUuid")}).fail(function(e){e.status!==401&&g.ajaxFailMessenger(e,"updateUuid")}).always(function(){e.modalToken&&e.modalToken.$el.modal("hide")})},previewPhoto:function(e){var t=e.currentTarget.files[0],n=this;if(t)if(this.validateFileExtension(t)){var r=new FileReader,i=new Image;r.readAsDataURL(t),r.onload=function(e){i.src=e.target.result,i.onload=function(){n.validateImageSize(i,t)?(n.$profileAvatar.attr("src",e.target.result),n.$editPhotoBlock.hide(),n.$uploadPhotoBlock.show(),n.$wrongImageMessage.hide().removeClass("shown")):(n.$editPhotoBlock.show(),n.$uploadPhotoBlock.hide(),n.$wrongImageMessage.show().addClass("shown"))}}}else this.$wrongImageMessage.show()},validateImageSize:function(e,t){var n=e.width,r=e.height,i=~~(t.size/1024);return i<=1e3&&n<=300&&r<=500},validateFileExtension:function(e){return/\.(gif|jpg|jpeg|png)$/i.test(e.name)},uploadPhoto:function(e){var t=new FormData;t.append("file",this.$imgSelector[0].files[0]);var n=new XMLHttpRequest,i=this,s="";n.onreadystatechange=function(){i.$editPhotoBlock.show(),i.$uploadPhotoBlock.hide(),n.readyState===4&&n.status===200?(s=i.$profileAvatar.attr("src"),r("#profileImage").attr("src",s),b.userModel.set("photo_loaded",!0),i.$profileAvatar.parent().addClass("active"),i.$imgSelector.wrap("<form></form>").parent().trigger("reset").children().unwrap("<form></form>"),g.setProfileUrl(),g.ajaxSuccessMessenger("submitUpload")):n.readyState===4&&n.status!==200&&g.ajaxFailMessenger(null,"submitUpload")},n.open("POST",g.updateImagePath(m.uploadPhoto()),!0),n.send(t),e.preventDefault()},removePhoto:function(e){var t=this,n=new h({headerText:a.dialogHeader.deleteImage,bodyText:a.dialog.deleteImage,cancelButtonText:a.ui.cancel,okButtonText:a.ui.delete,confirmFunction:function(){return v.call("DELETE",m.uploadPhoto()).done(function(){b.userModel.set("photo_loaded",!1),g.setProfileUrl(),r("#profileImage").attr("src",b.userModel.get("image")),t.$profileAvatar.attr("src",b.userModel.get("image")),t.$profileAvatar.parent().removeClass("active"),t.$wrongImageMessage.hide().removeClass("shown"),g.ajaxSuccessMessenger("deletePhoto")}).fail(function(e){g.ajaxFailMessenger(e,"deletePhoto")})}});n.show()},changeLangConfig:function(e){e.preventDefault();var t=r(e.target);if(!t.parent().hasClass("active")){var n=t.attr("href")||t.find("a").attr("href");this.lang=_.last(n.split("#")),r("li",t.closest("ul")).removeClass("active"),t.parent().addClass("active"),this.setEditorValue();var i=this.lang==="testng"?"show":"hide";this.$certificate[i]()}},initEditor:function(){this.setEditorValue()},setEditorValue:function(){if(this.$editor){var e;switch(this.lang){case"ruby":e="<h1>"+a.userProfile.rubyConfigTitle+"</h1>"+"<br>"+'<div class="options">'+"<p>password: "+this.apiTokenModel.get("apiToken")+"</p>"+"<p>endpoint: "+document.location.origin+"/api/v1"+"</p>"+"<p>project: "+this.model.get("defaultProject")+"</p>"+"<p>launch: "+this.model.get("name")+"_TEST_EXAMPLE</p>"+"<p>tags:  [tag1, tag2]</p>"+"</div>";break;case"soap":e="<h1>"+a.userProfile.soapConfigTitle+"</h1>"+"<br>"+'<div class="options">'+"<p>rp.uuid = "+this.apiTokenModel.get("apiToken")+"</p>"+"<p>rp.endpoint = "+document.location.origin+"</p>"+"<br>"+"<p>rp.launch = "+this.model.get("name")+"_TEST_EXAMPLE</p>"+"<p>rp.project = "+this.model.get("defaultProject")+"</p>"+"<p>rp.tags = TAG1;TAG2</p>"+"</div>";break;case".net":e="<h1>"+a.userProfile.dotnetConfigTitle+"</h1>";break;default:e="<h1>"+a.userProfile.defaultConfigTitle+"</h1>"+"<h1>"+a.userProfile.required+"</h1>"+'<div class="options">'+"<p>rp.endpoint = "+document.location.origin+"</p>"+"<p>rp.uuid = "+this.apiTokenModel.get("apiToken")+"</p>"+"<p>rp.launch = "+this.model.get("name")+"_TEST_EXAMPLE</p>"+"<p>rp.project = "+this.model.get("defaultProject")+"</p>"+"</div>"+"<h1>"+a.userProfile.notRequired+"</h1>"+'<div class="options">'+"<p>rp.enable = true</p>"+"<p>rp.tags = TAG1;TAG2</p>"+"<p>rp.convertimage = true</p>"+"<p>rp.mode = DEFAULT</p>"+"<p>rp.skipped.issue = true</p>"+"<p>rp.batch.size.logs = 20</p>"+"<p>rp.keystore.resource = &lt;PATH_TO_YOUR_KEYSTORE&gt;</p>"+"<p>rp.keystore.password = &lt;PASSWORD_OF_YOUR_KEYSTORE&gt;</p>"+"</div>"}this.$editor.html(e)}},destroy:function(){this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return w}),define("userProfile/UserProfilePage",["require","exports","module","jquery","backbone","app","core/components","userProfile/UserProfileHeader","userProfile/UserProfileView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("app"),o=e("core/components"),u=e("userProfile/UserProfileHeader"),a=e("userProfile/UserProfileView"),f=s.getInstance(),l=o.BaseView.extend({initialize:function(e){this.contextName=e.contextName,this.context=e.context,this.vent=_.extend({},i.Events)},render:function(){return this.createHeader(),this.createBody(),this},createHeader:function(e){this.$header&&this.$header.destroy(),this.$header=(new u({header:this.context.getMainView().$header,vent:this.vent,context:this.context})).render()},createBody:function(e){this.$body&&this.$body.destroy(),this.$body=new a({body:this.context.getMainView().$body,vent:this.vent,context:this.context})},destroy:function(){this.$header.destroy(),this.$body.destroy(),this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return{ContentView:l}}),define("adminProjects/ProjectsDetailsView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","localization","adminService","dataUrlResolver","projectinfo","core/components"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("localization"),f=e("adminService"),l=e("dataUrlResolver"),c=e("projectinfo"),h=e("core/components"),p=u.getInstance(),d=c.Body.extend({initialize:function(e){c.Body.prototype.initialize.call(this,e),this.$el=e.el,this.action=e.action,this.interval=this.getInterval(e.queryString),this.project=e.id},bodyTpl:"tpl-projects-details",getInterval:function(e){return e?+e.split("=")[1]:3},render:function(){this.$el.html(o.templates(this.bodyTpl,{})),this.$content=r("#contentTarget",this.$el),this.$content.html(o.templates(this.tpl)),this.$interval=r(".btn-group:first",this.$el),this.setupAnchors();var e=this;return p.project={projectId:this.project},r.when(f.getProjectInfo()).done(function(t){p.project=t,e.loadProjectInfo(),e.loadWidgets()}).fail(function(e){o.ajaxFailMessenger(e,"projectLoad")}),this},events:{"change [name=interval]":"updateInterval"},setActiveInterval:function(){r(".active",this.$interval).removeClass("active"),r("#interval"+this.interval,this.$interval).prop("checked",!0).parent().addClass("active")},updateInterval:function(e){var t=r("input[name=interval]:checked",this.$interval).data("value");this.interval=t,p.router.navigate(l.detailsInterval(this.id,t),{silent:!0}),this.loadProjectInfo(),this.loadWidgets()},update:function(e){this.interval=e.queryString?+e.queryString.split("=")[1]:3,this.setActiveInterval(),this.loadProjectInfo(),this.loadWidgets()},destroy:function(){h.BaseView.prototype.destroy.call(this)}});return d}),define("adminProjects/ProjectsModel",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","adminService"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("adminService"),f=u.getInstance(),l=s.Model.extend({defaults:{creationDate:0,entryType:"",launchesQuantity:0,usersQuantity:0,projectId:""},"delete":function(){var e=this.get("projectId");return a.deleteProject(e).done(function(){var t=f.userModel.get("projects");delete t[e],f.userModel.set("projects",t),this.collection&&this.collection.remove(this),o.ajaxSuccessMessenger("deleteProject")}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"deleteProject")})}});return l}),define("adminProjects/ProjectsCollection",["require","exports","module","jquery","backbone","adminProjects/ProjectsModel"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("adminProjects/ProjectsModel"),o=i.Collection.extend({model:s});return o}),define("adminProjects/ProjectsItemView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","localization","modals/modalConfirm","projectMembers/MembersService"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("localization"),f=e("modals/modalConfirm"),l=e("projectMembers/MembersService"),c=u.getInstance(),h=s.View.extend({tplList:"tpl-projects-item-list",tplTable:"tpl-projects-item-table",bindings:{"[data-js-project-name]":"html: getProjectName, attr: {href: getProjectDetailsUrl}","[data-js-project-name-label]":"classes: {nameLabel: isNew}","[data-js-project-new]":"classes: {hide: not(isNew)}","[data-js-project-users]":"html: getUsersQuantity","[data-js-project-launches]":"html: getLaunchesQuantity","[data-js-project-last-run]":"text: getLastRun","[data-js-settings-link]":"attr: {href: getSettingsUrl}","[data-js-members-link]":"attr: {href: getMembersUrl}","[data-js-go-to-project]":"classes: {hide: not(assignToProject)}, attr: {href: openProjectUrl}","[data-js-assign-to-project]":"classes: {hide: assignToProject}","[data-js-delete-project]":"classes: {hide: not(canDeleteProject)}"},computeds:{getProjectName:{deps:["projectId"],get:function(e){return this.wrapSearchResult(e)}},getUsersQuantity:{deps:["usersQuantity"],get:function(e){var t=this.filterModel.get("viewType");return"<strong>"+e+"</strong> "+(t!="table"?e==1?a.admin.usersQuantitySingular:a.admin.usersQuantity:"")}},getLaunchesQuantity:{deps:["launchesQuantity"],get:function(e){var t=this.filterModel.get("viewType");return"<strong>"+e+"</strong> "+(t!="table"?e==1?a.admin.launchesQuantitySingular:a.admin.launchesQuantity:"")}},getLastRun:{deps:["lastRun"],get:function(e){return a.admin.lastRunPrefix+" "+(e?o.daysFromNow(e):a.admin.lastRunSuffix)}},getProjectDetailsUrl:{deps:["projectId"],get:function(e){return"#administrate/project-details/"+e}},openProjectUrl:{deps:["projectId"],get:function(e){return"#"+e}},getSettingsUrl:{deps:["projectId"],get:function(e){return"#administrate/project-details/"+e+"/settings"}},getMembersUrl:{deps:["projectId"],get:function(e){return"#administrate/project-details/"+e+"/members"}},isNew:{deps:["creationDate"],get:function(e){return o.daysBetween(new Date,new Date(e))<=7}},assignToProject:{deps:["projectId"],get:function(e){var t=c.userModel.get("projects");return!!t[e]}},canDeleteProject:{deps:["entryType"],get:function(e){return!this.isDeleteLock()&&!this.isPersonalProject(e)}}},events:{"click [data-js-delete-project]":"deleteProject","click [data-js-assign-to-project]":"assignAdminToProject"},initialize:function(e){this.filterModel=e.filterModel,this.render()},render:function(){var e=this.getViewTemplate();this.$el.addClass(this.getViewClass()).html(o.templates(e,{}))},getViewClass:function(){return this.filterModel.get("viewType")=="table"?"project-table-row project-item":"project-list-row project-item"},getViewTemplate:function(){return this.filterModel.get("viewType")=="table"?this.tplTable:this.tplList},wrapSearchResult:function(e){var t=this.filterModel.get("search");return t?o.textWrapper(e,t):e},isPersonalProject:function(e){return e==="PERSONAL"},isDeleteLock:function(){var e=this.model.toJSON();return o.isDeleteLock(e)},assignAdminToProject:function(e){e.preventDefault();var t=this.model.get("projectId"),n={},i=c.projectRoles[1];n[c.userModel.get("name")]=i,l.assignMember(n,t).done(function(){c.userModel.get("projects")[t]={projectRole:i},r("[data-js-assign-to-project]",this.$el).addClass("hide"),r("[data-js-go-to-project]",this.$el).removeClass("hide"),o.ajaxSuccessMessenger("assignYourSelf",(t+"").toUpperCase())}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"assignYourSelf")})},deleteProject:function(e){e.preventDefault();var t=new f({headerText:a.dialogHeader.deleteProject,bodyText:o.replaceTemplate(a.dialog.deleteProject,this.model.get("projectId")),confirmText:a.dialog.msgDeleteProject,cancelButtonText:a.ui.cancel,okButtonDanger:!0,okButtonText:a.ui.delete,confirmFunction:function(){return this.model.delete()}.bind(this)});t.show()},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return h}),define("adminProjects/ProjectsListView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","core/components","adminService","localization","adminProjects/ProjectsCollection","adminProjects/ProjectsItemView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("core/components"),f=e("adminService"),l=e("localization"),c=e("adminProjects/ProjectsCollection"),h=e("adminProjects/ProjectsItemView"),p=u.getInstance(),d=s.View.extend({template:"tpl-projects-list",listHeadTpl:"tpl-projects-list-head",bindings:{"[data-js-search-text]":"text: search"},initialize:function(e){this.projectsType=e.projectsType,this.$total=e.total,this.renderViews=[],this.collection=new c,this.listenTo(this.collection,"reset",this.updateView.bind(this)),this.listenTo(this.collection,"remove",this.update.bind(this)),this.render()},render:function(){this.$el.html(o.templates(this.template,{})),this.setupAnchors(),this.paging=new a.PagingToolbarSaveUser({el:this.$pagingEl,model:new i.Model(this.getDefaultPaging()),pageType:"adminProjectList"}),this.listenTo(this.paging,"page",this.onPage),this.listenTo(this.paging,"count",this.onPageCount),this.loadProjects()},setupAnchors:function(){this.$loaderEl=r("[data-js-projects-loader]",this.$el),this.$projectsList=r("[data-js-projects-list]",this.$el),this.$pagingEl=r("[data-js-projects-paging]",this.$el),this.$projectsContent=r("[data-js-projects-content]",this.$el),this.$emptyContent=r("[data-js-projects-empty]",this.$el)},renderProjects:function(){if(_.isEmpty(this.collection.models)){this.$emptyContent.removeClass("hide");return}this.$projectsContent.removeClass("hide"),this.updateList(),_.each(this.collection.models,function(e){var t=new h({model:e,filterModel:this.model});this.$projectsList.append(t.$el),this.renderViews.push(t)},this),this.trigger("loadProjectsReady")},updateView:function(){this.clearProjects(),this.renderProjects()},updateList:function(){this.model.get("viewType")==="table"?(this.$projectsList.attr("class","projects-table-view"),this.$projectsList.append(o.templates(this.listHeadTpl,{}))):this.$projectsList.attr("class","projects-list-view")},update:function(){this.clearProjects(),this.loadProjects()},getDefaultPaging:function(){return{number:1,size:12}},onPage:function(e){this.update()},onPageCount:function(e){this.update()},onLoadProjects:function(e){if(e.page.totalPages<e.page.number&&e.page.totalPages!=0){this.paging.trigger("page",e.page.totalPages);return}this.paging.model.set(e.page),this.paging.render(),this.collection.reset(e.content?e.content:e),this.$total.html("("+e.page.totalElements+")")},getQueryData:function(){var e=this.projectsType=="personal"?"?filter.eq.configuration$entryType=PERSONAL":"?filter.in.configuration$entryType=INTERNAL,UPSA",t=this.model.get("search"),n=this.model.get("sort"),r=this.model.get("direction");return t&&(e+="&filter.cnt.name="+t),n&&(e+="&page.sort="+n,r&&(e+=","+r)),e+="&page.page="+this.paging.model.get("number")+"&page.size="+this.paging.model.get("size"),e},loadProjects:function(){var e=this.getQueryData();p.userModel.ready.done(function(){this.$projectsContent.addClass("hide"),this.$emptyContent.addClass("hide"),this.toggleLoader("show"),f.getProjects(e).done(function(e){this.onLoadProjects(e)}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"adminLoadProjects")}).always(function(){this.toggleLoader("hide")}.bind(this))}.bind(this))},toggleLoader:function(e){this.$loaderEl[e]()},clearProjects:function(){_.each(this.renderViews,function(e){e.destroy()}),this.$projectsList.empty(),this.renderViews=[]},destroy:function(){this.clearProjects(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return d}),define("adminProjects/ProjectsTabsView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","adminProjects/ProjectsListView","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("adminProjects/ProjectsListView"),f=e("localization"),l=u.getInstance(),c=s.View.extend({tpl:"tpl-projects-list-shell",events:{"click [data-js-tab-action]":"updateTabs","click [data-js-sort-block] .rp-btn":"changeSorting","validation::change [data-js-filter-projects]":"filterProjects","click [data-js-view-type]":"changeProjectsView",'click [data-toggle="tab"]':"updateTabs"},initialize:function(e){this.tab=e.action,this.model=new s.Model({search:l.defaultProjectsSettings.search,sort:l.defaultProjectsSettings.sorting,direction:l.defaultProjectsSettings.sortingDirection,viewType:l.defaultProjectsSettings.listView});var t=this;this.model.on("change:sort change:direction change:search",function(){t.update(t.tab)}),this.model.on("change:viewType",function(){t.tabView.updateView()}),this.render()},render:function(){this.$el.html(o.templates(this.tpl,{tab:this.tab})),this.setupAnchors(),this.fillContent()},update:function(e,t){this.tab=e||"internal",this.renderTabContent()},updateTabs:function(e){var t=r(e.currentTarget),n=t.data("js-tab-action");l.router.navigate(t.attr("href"),{silent:!0}),this.clearSearch(),this.update(n,!0)},renderTabContent:function(){this.tabView&&this.tabView.destroy(),this.tabView=this.getProjectsView();var e=r('[data-js-tab-content="'+this.tab+'"]',this.$el);r("[data-js-tab-content]",this.$el).hide(),r("[data-js-selected-tab]",this.$el).text(this.tab==="internal"?f.admin.internalProjects:f.admin.personalProjects),r("[data-js-tab-action]",this.$el).closest("li.active").removeClass("active"),r('[data-js-tab-action="'+this.tab+'"]',this.$el).closest("li").addClass("active"),e.append(this.tabView.$el),e.show()},fillContent:function(e){o.bootValidator(this.$searchString,[{validator:"minMaxNotRequired",type:"addProjectName",min:3,max:256}]),this.renderTabContent(),this.listenTo(this.tabView,"loadProjectsReady",this.onLoadProjectsReady)},setupAnchors:function(){this.$sortBlock=r("[data-js-sort-block]",this.$el),this.$searchString=r("[data-js-filter-projects]",this.$el)},getProjectsView:function(){return new a({projectsType:this.tab,total:r("[data-js-"+this.tab+"-qty]",this.$el),model:this.model})},changeProjectsView:function(e){e.preventDefault();var t=r(e.currentTarget),n=t.data("js-view-type");r(".projects-view.active").removeClass("active"),t.addClass("active"),this.model.set("viewType",n)},changeSorting:function(e){var t=r(e.currentTarget);t.hasClass("active")?(t.toggleClass("desc"),this.model.set("direction",t.hasClass("desc")?"desc":"asc")):(r(".active, .desc",this.$sortBlock).removeClass("active").removeClass("desc"),t.addClass("active"),this.model.set("direction","asc"),this.model.set("sort",t.data("type")))},filterProjects:function(e,t){var n=this;clearTimeout(this.searching),this.searching=setTimeout(function(){t.valid&&n.model.get("search")!==t.value&&n.model.set("search",t.value)},l.userFilterDelay)},clearSearch:function(){this.model.set("search",l.defaultProjectsSettings.search,{silent:!0}),this.$searchString.val("")},destroy:function(){this.tabView&&this.tabView.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return c}),define("modals/modalAddProject",["require","exports","module","jquery","underscore","modals/_modalView","backbone","backbone-epoxy","app","util","adminService","validate"],function(e,t,n){"use strict";var r=e("jquery"),i=e("underscore"),s=e("modals/_modalView"),o=e("backbone"),u=e("backbone-epoxy"),a=e("app"),f=e("util"),l=e("adminService");e("validate");var c=a.getInstance(),h=s.extend({template:"tpl-modal-add-project",className:"modal-add-project",events:{"click [data-js-add]":"addProject"},initialize:function(e){this.render()},render:function(){this.$el.html(f.templates(this.template,{})),this.setupAnchors(),this.showLoading(),l.getProjectNames().done(function(e){this.allNames=i.map(e,function(e){return e.toLowerCase()}),this.bindValidators(),this.hideLoading()}.bind(this)).fail(function(e){})},setupAnchors:function(){this.$project=r("[data-js-project-name]",this.$el)},bindValidators:function(){f.hintValidator(this.$project,[{validator:"required",type:"projectName",noTrim:!0},{validator:"minMaxNotRequired",type:"addProjectName",min:3,max:256,noTrim:!0},{validator:"matchRegex",type:"projectNameRegex",pattern:"^[a-zA-Z0-9_-]*$",arg:"i",noTrim:!0},{validator:"noDuplications",type:"projectName",source:this.allNames||[]}])},getProjectUrl:function(e,t){var n="#administrate/project-details/",r=e?e+"/"+t:t;return n+r},onKeySuccess:function(){r("[data-js-add]",this.$el).focus().trigger("click")},addProject:function(){this.$project.trigger("validate");if(r(".validate-error",this.$el).length)return;this.showLoading();var e=this.$project.val().toLowerCase();l.createProject(e).done(function(t){c.userModel.get("projects")[e]={projectRole:"MEMBER",entryType:"INTERNAL"},f.ajaxSuccessMessenger("projectCreated",e),c.router.navigate(this.getProjectUrl(e,"settings"),{trigger:!0}),this.successClose()}.bind(this)).fail(function(e){f.ajaxFailMessenger(e,"projectCreate")})}});return h}),define("adminProjects/ProjectsHeaderView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","localization","components/MainBreadcrumbsComponent","modals/modalAddProject"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("localization"),f=e("components/MainBreadcrumbsComponent"),l=e("modals/modalAddProject"),c=u.getInstance(),h=s.View.extend({tpl:"tpl-projects-header",bindings:{"[data-js-project-buttons]":"classes: {hide: showProjectBtns}","[data-js-add-project-button]":"classes: {hide: showAddProject}","[data-js-project-settings]":"classes: {disabled: showSettingsBtn}, attr: {href: getSettingsLink}","[data-js-project-members]":"classes: {disabled: showMembersBtn}, attr: {href: getMembersLink}"},computeds:{showProjectBtns:{deps:["id","action"],get:function(e,t){return!e||!t}},showAddProject:{deps:["id","action"],get:function(e,t){return!!e||!!t}},showSettingsBtn:{deps:["action"],get:function(e){return e=="settings"}},showMembersBtn:{deps:["action"],get:function(e){return e=="members"}},getSettingsLink:{deps:["id"],get:function(e){return"#administrate/project-details/"+e+"/settings"}},getMembersLink:{deps:["id"],get:function(e){return"#administrate/project-details/"+e+"/members"}}},initialize:function(e){this.model=new s.Model,this.model.set({page:e.page,id:e.id,action:e.action,queryString:e.queryString}),this.mainBreadcrumbs=new f({data:this.getHeaderData()}),this.render()},events:{"click [data-js-add-project]":"addProject"},render:function(){this.$el.html(o.templates(this.tpl)),r("[data-js-main-breadcrumbs]",this.$el).append(this.mainBreadcrumbs.$el)},getHeaderData:function(){var e=this.model.get("page"),t=this.model.get("id"),n=this.model.get("action"),r="#administrate/"+e,i=[{name:a.admin.titleAllProjects,link:"#administrate/projects"}];return this.id&&(r+="/"+t,i.push({name:t,link:r}),n&&(r+="/"+n,i.push({name:a.admin["title"+n.capitalize()],link:r}))),i},addProject:function(e){e.preventDefault();var t=new l;t.show()},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return h}),define("adminProjects/ProjectsPageView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","localization","projectMembers/MembersTableView","project","adminProjects/ProjectsDetailsView","adminProjects/ProjectsTabsView","adminService","adminProjects/ProjectsHeaderView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("localization"),f=e("projectMembers/MembersTableView"),l=e("project"),c=e("adminProjects/ProjectsDetailsView"),h=e("adminProjects/ProjectsTabsView"),p=e("adminService"),d=e("adminProjects/ProjectsHeaderView"),v=u.getInstance(),m=s.View.extend({tpl:"tpl-projects-body",initialize:function(e){this.$el=e.el,this.$header=e.header,this.page=e.page,this.id=e.id,this.action=e.action,this.queryString=e.queryString},events:{"[data-js-add-project]":"addProject"},render:function(){return this.$el.html(o.templates(this.tpl)),this.renderHeader(),this.renderBody(),this},renderHeader:function(){this.destroyHeader(),this.header=new d({page:this.page,id:this.id,action:this.action,queryString:this.queryString}),this.$header.append(this.header.$el)},renderBody:function(){this.destroyBody(),this.page=="project-details"?p.getProjectInfo(this.id).done(function(e){v.project=e,this.renderProject()}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"projectLoad")}):this.renderProjectsList()},renderProjectsList:function(){this.body=new h({action:this.action||"internal"}),r("[data-js-admin-projects]",this.$el).append(this.body.$el)},renderProject:function(){var e=this.action;switch(e){case"settings":this.body=(new l.SettingsView({holder:r("[data-js-admin-projects]",this.$el),projectId:this.id,adminPage:!0,tab:this.queryString})).render();break;case"members":this.body=new f({projectId:this.id,grandAdmin:!0}),r("[data-js-admin-projects]",this.$el).append(this.body.$el);break;default:this.body=(new c({contextName:this.page,context:{},el:r("[data-js-admin-projects]",this.$el),id:this.id,queryString:this.queryString,adminPage:!0})).render()}},update:function(){this.renderHeader(),this.renderBody()},addProject:function(e){e.preventDefault()},destroyHeader:function(){this.header&&(this.header.destroy(),this.header=null),this.$header.empty()},destroyBody:function(){this.body&&(this.body.destroy(),this.body=null)},destroy:function(){this.destroyHeader(),this.destroyBody(),this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return{ContentView:m}}),define("adminUsers/UsersHeaderView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","localization","components/MainBreadcrumbsComponent"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("localization"),f=e("components/MainBreadcrumbsComponent"),l=u.getInstance(),c=s.View.extend({tpl:"tpl-users-header",initialize:function(e){this.mainBreadcrumbs=new f({data:this.getHeaderData()}),this.render()},render:function(){this.$el.html(o.templates(this.tpl)),r("[data-js-main-breadcrumbs]",this.$el).append(this.mainBreadcrumbs.$el)},getHeaderData:function(){var e=[{name:a.admin.users,link:"#administrate/users"}];return e},destroy:function(){this.mainBreadcrumbs&&this.mainBreadcrumbs.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return c}),define("memberService",["require","exports","module","jquery","dataUrlResolver","callService","app"],function(e,t,n){"use strict";var r=e("jquery"),i=e("dataUrlResolver"),s=e("callService"),o=e("app"),u=s.call,a=o.getInstance(),f=function(e){return e||(e={}),e.page||(e.page=1),e.size||(e.size=10),"?page.page="+e.page+"&page.size="+e.size+"&page.sort=login,ASC"},l=function(e,t){var n=f(t);return t.search&&(n+="&filter.cnt.name="+t.search),u("GET",i.getMembers(e,n))},c=function(e,t){var n=f(t);return t.search&&(n+="&filter.cnt.name="+t.search),u("GET",i.getAssignableMembers(e,n))},h=function(e,t){return u("PUT",i.updateProjectUnassign(t),{userNames:[e]})},p=function(e,t,n){var r={};return r[t]=e,u("PUT",i.updateProject(n),{users:r})},d=function(e,t){return u("PUT",i.updateProjectAssign(t),{userNames:e})},v=function(e){return u("POST",i.addMemberUrl(),e)},m=function(e){return u("POST",i.sendInviteUrl(),e)},g=function(e,t){return u("POST",i.registerUserUrl(t),e,null,!0)},y=function(e,t,n){return u("PUT",i.modifyUserUrl(t),e)},b=function(e){return u("GET",i.validateRegisterBidUrl(e))};return{assignMember:d,getMembers:l,getAssignableMembers:c,unAssignMember:h,updateMember:p,updateUser:y,addMember:v,inviteMember:m,validateRegisterBid:b,registerUser:g}}),define("adminUsers/UserProjectsItemView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","callService","memberService","dataUrlResolver","modals/modalConfirm","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("callService"),f=e("memberService"),l=e("dataUrlResolver"),c=e("modals/modalConfirm"),h=e("localization"),p=u.getInstance(),d=s.View.extend({tpl:"tpl-users-projects-item",className:"row rp-table-row user-projects-row",bindings:{"[data-js-project]":"text: projectId","[data-js-project-role]":"text: getProjectRole","[data-js-dropdown-roles]":"updateRoleDropDown: projectRole","[data-js-unassign]":"classes: {disabled: not(canUnAssign)}, attr: {disabled: not(canUnAssign)}"},computeds:{canUnAssign:{deps:["projectId","entryType"],get:function(){return!this.isPersonalProjectOwner()&&!this.unassignedLock()}},getProjectRole:{deps:["projectRole"],get:function(e){var t=o.getRolesMap();return t[e]}}},bindingHandlers:{updateRoleDropDown:{set:function(e,t){_.each(r("a",e),function(e){var n=r(e).data("value")===t?"add":"remove";r(e)[n+"Class"]("active")})}}},events:{"click [data-js-dropdown-roles] a":"updateProjectRole","click [data-js-unassign]":"confirmUnassign"},initialize:function(e){this.userModel=e.userModel,this.render()},render:function(){this.$el.html(o.templates(this.tpl,{roles:o.getRolesMap()}))},isPersonalProjectOwner:function(){var e=this.model.get("projectId"),t=this.model.get("entryType")==="PERSONAL";return t&&e===this.userModel.get("userId")+"_personal"},unassignedLock:function(){return o.isUnassignedLock(this.userModel.toJSON(),this.model.toJSON())},updateProjectRole:function(e){e.preventDefault();var t=r(e.currentTarget);if(t.hasClass("active")||t.hasClass("disabled"))return;var n=t.data("value");f.updateMember(n,this.userModel.get("userId"),this.model.get("projectId")).done(function(){this.model.set("projectRole",n),o.ajaxSuccessMessenger("updateProjectRole",this.userModel.get("full_name")||this.userModel.get("userId"))}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"updateProjectRole")})},confirmUnassign:function(e){e.preventDefault();var t=this,n=new c({headerText:h.dialogHeader.unAssignMember,bodyText:o.replaceTemplate(h.dialog.unAssignMember,this.userModel.get("userId").escapeHtml(),this.model.get("projectId")),okButtonDanger:!0,cancelButtonText:h.ui.cancel,okButtonText:h.ui.unassign,confirmFunction:function(){return t.unAssign()}});n.show()},unAssign:function(){return a.call("PUT",l.updateProjectUnassign(this.model.get("projectId")),{userNames:[this.userModel.get("userId")]}).done(function(){o.ajaxSuccessMessenger("unAssignMember"),this.model.collection&&this.model.collection.remove(this.model)}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"unAssignMember")})},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.html(""),delete this}});return d}),define("adminUsers/UserProjectsCollection",["require","exports","module","jquery","backbone","backbone-epoxy"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=i.Collection.extend({model:s.Model,parse:function(e){var t=[];_.each(e,function(e,n){t.push(_.extend(e,{projectId:n}))},this),this.reset(t)},comparator:function(e,t){return e.get("projectId")>t.get("projectId")?1:e.get("projectId")<t.get("projectId")?-1:0}});return o}),define("adminUsers/UserAddProjectView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","localization","adminService","projectMembers/MembersService","validate"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("localization"),f=e("adminService"),l=e("projectMembers/MembersService");e("validate");var c=u.getInstance(),h=s.View.extend({tpl:"tpl-users-project-add",className:"row rp-table-row user-projects-row",bindings:{"[data-js-project]":"value: projectId","[data-js-project-role]":"text: getProjectRole","[data-js-dropdown-roles]":"updateRoleDropDown: projectRole","[data-js-assign]":"classes: {disabled: not(canAssign)}, attr: {disabled: not(canAssign)}"},computeds:{canAssign:{deps:["projectId","projectRole"],get:function(e,t){return e&&t}},getProjectRole:{deps:["projectRole"],get:function(e){var t=o.getRolesMap();return t[e]}}},bindingHandlers:{updateRoleDropDown:{set:function(e,t){_.each(r("a",e),function(e){var n=r(e).data("value")===t?"add":"remove";r(e)[n+"Class"]("active")})}}},events:{"click [data-js-dropdown-roles] a":"selectProjectRole","click [data-js-assign]":"assignToProject"},initialize:function(e){this.userModel=e.userModel,this.model=new s.Model({projectId:"",entryType:"",projectRole:c.defaultProjectRole}),this.render(),this.setupAnchors()},render:function(){this.$el.html(o.templates(this.tpl,{roles:o.getRolesMap()})),this.setupAnchors(),this.setupValidation(),this.setupProjectSearch()},setupAnchors:function(){this.$form=r("[data-js-assign-form]",this.$el),this.$selectProject=r("[data-js-project]",this.$el)},setupProjectSearch:function(){var e=this;o.setupSelect2WhithScroll(this.$selectProject,{multiple:!1,min:c.forms.projectNameRange[0],minimumInputLength:c.forms.projectNameRange[0],maximumInputLength:c.forms.projectNameRange[1],placeholder:a.admin.enterProjectName,allowClear:!0,initSelection:function(e,t){t({id:e.val(),text:e.val()})},query:function(t){f.getProjects(e.getSearchQuery(t.term)).done(function(n){var r={results:[]};_.each(n.content,function(t){var n=_.keys(e.userModel.getAssignedProjects());_.contains(n,t.projectId)||r.results.push({id:t.projectId,text:t.projectId})}),t.callback(r)}).fail(function(e){o.ajaxFailMessenger(e)})}})},setupValidation:function(){r.validator.setDefaults({debug:!0,success:"valid"}),this.validator=this.$form.validate({errorClass:"has-error",rules:{project:{required:!0}},messages:{project:{required:a.validation.requiredDefault}},ignore:'input[id^="s2id"]',errorPlacement:function(e,t){e.appendTo(r("[data-js-error-text]",t.closest("[data-js-assign-form-group]")))},highlight:function(e,t){r(e).closest("[data-js-assign-form-group]").addClass(t)},unhighlight:function(e,t){r(e).closest("[data-js-assign-form-group]").removeClass(t)}})},getSearchQuery:function(e){return"?page.sort=name,asc&page.page=1&page.size=10&&filter.cnt.name="+e},selectProjectRole:function(e){e.preventDefault();var t=r(e.currentTarget);if(t.hasClass("active")||t.hasClass("disabled"))return;var n=t.data("value");this.model.set("projectRole",n)},assignToProject:function(e){e.preventDefault();var t={};t[this.userModel.get("userId")]=this.model.get("projectRole"),l.assignMember(t,this.model.get("projectId")).done(function(){this.trigger("user:assigned"),o.ajaxSuccessMessenger("assignMember",this.userModel.get("full_name")||this.userModel.get("userId"))}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"assignMember")})},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return h}),define("adminUsers/UserProjectsView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","adminUsers/UserProjectsItemView","adminUsers/UserProjectsCollection","coreService","adminUsers/UserAddProjectView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("adminUsers/UserProjectsItemView"),f=e("adminUsers/UserProjectsCollection"),l=e("coreService"),c=e("adminUsers/UserAddProjectView"),h=u.getInstance(),p=s.View.extend({tpl:"tpl-users-projects",className:"user-projects-list",bindings:{},computeds:{},events:{"click [data-js-add-project]":"addUserProject"},initialize:function(e){this.renderViews=[],this.collection=new f,this.listenTo(this.collection,"reset",this.renderProjectsList),this.listenTo(this.collection,"remove",this.renderProjectsList),this.render(),this.setupAnchors(),this.loadProjects()},render:function(){this.$el.html(o.templates(this.tpl,{}))},setupAnchors:function(){this.$addProjectRow=r("[data-js-add-project-row]",this.$el),this.$loader=r("[data-js-loader]",this.$el)},loadProjects:function(){this.toggleLoader("show"),l.getUserAssignedProjects(this.model.get("userId")).done(function(e){this.collection.parse(e),this.toggleLoader("hide")}.bind(this))},renderProjectsList:function(){this.clearItems(),_.each(this.collection.models,function(e){var t=new a({model:e,userModel:this.model});r("[data-js-project-list]",this.$el).append(t.$el),this.renderViews.push(t)},this)},toggleAddProject:function(e){var t=e=="hide"?"add":"remove";this.$addProjectRow[t+"Class"]("hide")},toggleLoader:function(e){var t=e=="hide"?"add":"remove";this.$loader[t+"Class"]("hide")},addUserProject:function(e){e.preventDefault(),this.toggleAddProject("hide");var t=new c({userModel:this.model});r("[data-js-add-form]",this.$el).append(t.$el),this.listenToOnce(t,"user:assigned",function(){this.loadProjects(),this.toggleAddProject("show"),t.destroy()}.bind(this))},clearItems:function(){_.each(this.renderViews,function(e){e.destroy()}),r("[data-js-project-list]",this.$el).html(""),this.renderViews=[]},destroy:function(){this.clearItems(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return p}),define("adminUsers/UsersItemView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","localization","model/SingletonAppModel","modals/modalConfirm","callService","dataUrlResolver","adminUsers/UserProjectsView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("localization"),f=e("model/SingletonAppModel"),l=e("modals/modalConfirm"),c=e("callService"),h=e("dataUrlResolver"),p=e("adminUsers/UserProjectsView"),d=u.getInstance(),v=s.View.extend({tpl:"tpl-users-item",className:"row rp-table-row user-row",bindings:{"[data-js-time-from-now]":"text: lastLoginFromNow","[data-js-time-exact]":"text: lastLoginFormat","[data-js-user-avatar]":"attr: {src: imagePath}","[data-js-user-name]":"html: getFullName","[data-js-user-login]":"html: getLogin","[data-js-user-email]":"html: getEmail, attr: {href: getEmailLink}","[data-js-user-you]":"classes: {hide: not(isYou)}","[data-js-user-admin]":"classes: {hide: not(isAdmin), notlink: isYou}","[data-js-make-admin]":"classes: {hide: hideMakeAdmin}","[data-js-user-projects-mobile]":"getUserProjects: assigned_projects"},computeds:{getFullName:{deps:["full_name"],get:function(e){return this.wrapSearchResult(e)}},getLogin:{deps:["userId"],get:function(e){return this.wrapSearchResult(e)}},getEmail:{deps:["email"],get:function(e){return this.wrapSearchResult(e)}},getEmailLink:{deps:["email"],get:function(e){return"mailto: "+e}},canDelete:{deps:["isAdmin"],get:function(e){return""}},hideMakeAdmin:{deps:["isAdmin","isYou"],get:function(e,t){return e||t}}},bindingHandlers:{getUserProjects:{set:function(e,t){var n=this.view.model.getAssignedProjects();_.each(n,function(t,n){e.append("<p><span>"+a.admin.projectName+":</span><strong>"+n+"</strong><br> <span>"+a.admin.projectRole+":</span>"+t.projectRole+"</p>")})}}},events:{"click [data-js-login-time]":"toggleTimeView","click [data-js-view-projects]":"showUserProjects","click [data-js-delete-user]":"deleteUser","click [data-js-user-admin]":"confirmChangeRole","click [data-js-make-admin]":"confirmChangeRole"},initialize:function(e){this.table=e.table,this.searchString=e.searchString||"",this.appModel=new f,this.render()},render:function(){this.$el.html(o.templates(this.tpl,{}))},showUserProjects:function(e){e.preventDefault();var t=r(e.currentTarget);_.each(this.table.renderViews,function(e){e.userProjectsView&&e.model.get("userId")!==this.model.get("userId")&&(r("[data-js-view-projects]",e.$el).removeClass("active"),e.userProjectsView.destroy(),e.userProjectsView=null)},this),this.userProjectsView?(t.removeClass("active"),this.userProjectsView.destroy(),this.userProjectsView=null):(t.addClass("active"),this.userProjectsView=new p({model:this.model}),r("[data-js-user-projects]",this.$el).html(this.userProjectsView.$el))},wrapSearchResult:function(e){return this.searchString?o.textWrapper(e,this.searchString):e},confirmChangeRole:function(e){e.preventDefault();if(!this.model.get("isYou")){var t=new l({headerText:a.dialogHeader.changeRole,bodyText:o.replaceTemplate(a.dialog.changeRole,this.model.get("full_name")||this.model.get("userId")),cancelButtonText:a.ui.cancel,okButtonDanger:!0,okButtonText:a.dialog.changeRoleBtn,confirmFunction:this.changeRole.bind(this)});t.show()}},changeRole:function(){var e=this.model.get("userId"),t=this.model.get("full_name"),n=this.model.get("userRole")==d.accountRolesEnum.user?d.accountRolesEnum.administrator:d.accountRolesEnum.user;return c.call("PUT",h.modifyUserUrl(e),{role:n}).done(function(){this.model.set("userRole",n),o.ajaxSuccessMessenger("changeRole",t||e)}.bind(this)).fail(function(n){o.ajaxFailMessenger(n,"changeRole",t||e)})},deleteUser:function(e){e.preventDefault();var t=new l({headerText:a.dialogHeader.deleteUser,bodyText:o.replaceTemplate(a.dialog.deleteUser,this.model.get("full_name")||this.model.get("userId")),cancelButtonText:a.ui.cancel,okButtonDanger:!0,okButtonText:a.ui.delete,confirmFunction:function(){return this.model.delete()}.bind(this)});t.show()},toggleTimeView:function(e){e.preventDefault();var t=r(e.currentTarget);t.closest("[data-js-users-table]").toggleClass("show-from-now")},destroy:function(){this.userProjectsView&&this.userProjectsView.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return v}),define("adminUsers/UsersTableView",["require","exports","module","jquery","backbone","backbone-epoxy","util","core/components","app","localization","adminUsers/UsersItemView","projectMembers/MembersCollection","adminService","modals/modalAddUser","modals/modalInviteUser"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("core/components"),a=e("app"),f=e("localization"),l=e("adminUsers/UsersItemView"),c=e("projectMembers/MembersCollection"),h=e("adminService"),p=e("modals/modalAddUser"),d=e("modals/modalInviteUser"),v=a.getInstance(),m=s.View.extend({tpl:"tpl-users-shell",emptyMembersTpl:"tpl-project-members-empty",bindings:{"[data-js-users-search]":"attr: {placeholder: getPlaceHolder}"},computeds:{getPlaceHolder:function(){return f.members.searchNameLoginEmail}},initialize:function(e){this.model=new i.Model({search:"",empty:!1,notFound:!1}),this.renderViews=[],this.collection=new c,this.listenTo(this.collection,"reset",this.renderUsersList),this.listenTo(this.collection,"remove",this.updateUsers),this.pageType="PaginateAdminMembers",this.render()},events:{"validation::change [data-js-users-search]":"onChangeFilterName","click [data-js-add-user]":"showAddUser","click [data-js-invite-user]":"showInviteUser"},render:function(){return this.$el.html(o.templates(this.tpl,{})),this.setupAnchors(),o.bootValidator(this.$searchFilter,[{validator:"minMaxNotRequired",type:"memberName",min:1,max:128}]),this.paging=new u.PagingToolbarSaveUser({el:this.$pagingBlock,model:new i.Model,pageType:this.pageType}),this.listenTo(this.paging,"page",this.updateUsers),this.listenTo(this.paging,"count",this.updateUsers),this.paging.ready.done(function(){this.paging.urlModel.get("filter.cnt.name")&&(this.model.set({search:this.paging.urlModel.get("filter.cnt.name")}),this.$searchFilter.val(this.model.get("search"))),this.listenTo(this.model,"change:search",this.onChangeModelSearch),this.updateUsers()}.bind(this)),this},setupAnchors:function(){this.$usersList=r("[data-js-users-list]",this.$el),this.$pagingBlock=r("[data-js-users-paginate]",this.$el),this.$searchFilter=r("[data-js-users-search]",this.$el)},updateUsers:function(){this.paging.render(),this.loadUsers()},loadUsers:function(){h.getSearchUser(this.getSearchQuery()).done(function(e){if(e.page.totalPages<e.page.number&&e.page.totalPages!=0){this.paging.trigger("page",e.page.totalPages);return}this.paging.model.set(e.page),this.paging.render(),this.collection.parse(e.content?e.content:e)}.bind(this)).fail(function(e){this.collection.parse([]),o.ajaxFailMessenger(e,"loadUsers")}.bind(this))},onChangeModelSearch:function(){this.paging.trigger("page",1)},onChangeFilterName:function(e,t){t.valid&&(this.model.set({search:t.value}),this.paging.urlModel.set({"filter.cnt.name":t.value}))},getSearchQuery:function(){return{search:encodeURIComponent(this.model.get("search")),page:this.paging.model.get("number"),size:this.paging.model.get("size")}},renderEmptyUsers:function(){this.clearUsers(),this.$usersList.append(o.templates(this.emptyMembersTpl,{}))},renderUsersList:function(){this.clearUsers();if(_.isEmpty(this.collection.models)){this.renderEmptyUsers();return}_.each(this.collection.models,function(e){var t=new l({model:e,searchString:this.model.get("search"),table:this});this.$usersList.append(t.$el),this.renderViews.push(t)},this)},clearUsers:function(){_.each(this.renderViews,function(e){e.destroy()}),this.$usersList.html(""),this.renderViews=[]},showInviteUser:function(e){e.preventDefault();var t=new d({type:"users"});t.show()},showAddUser:function(e){e.preventDefault();var t=new p({type:"users"});this.listenToOnce(t,"add:user",this.updateUsers),t.show()},destroy:function(){this.clearUsers(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.$el.remove(),delete this}});return m}),define("adminUsers/UsersPageView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","adminUsers/UsersHeaderView","adminUsers/UsersTableView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("adminUsers/UsersHeaderView"),f=e("adminUsers/UsersTableView"),l=u.getInstance(),c=s.View.extend({template:"tpl-users-body",initialize:function(e){this.context=e.context,this.$el=e.el,this.$header=e.header,this.action=e.action,this.queryString=e.queryString},render:function(){return this.renderHeader(),this.$el.html(o.templates(this.template),{}),this.renderBody(),this},renderBody:function(){this.body=new f({}),r("[data-js-all-users]",this.$el).append(this.body.$el)},update:function(){this.body&&(this.body.destroy(),this.body=null),this.renderBody()},renderHeader:function(){this.header=new a,this.$header.append(this.header.$el)},destroy:function(){this.header&&this.header.destroy(),this.body&&this.body.destroy(),this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return{ContentView:c}}),define("adminServerSettings/ServerSettingsHeaderView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","localization","components/MainBreadcrumbsComponent"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("localization"),f=e("components/MainBreadcrumbsComponent"),l=u.getInstance(),c=s.View.extend({tpl:"tpl-server-settings-header",initialize:function(e){this.mainBreadcrumbs=new f({data:this.getHeaderData()}),this.render()},render:function(){this.$el.html(o.templates(this.tpl)),r("[data-js-main-breadcrumbs]",this.$el).append(this.mainBreadcrumbs.$el)},getHeaderData:function(){var e=[{name:a.admin.serverSettings,link:"#administrate/settings"}];return e},destroy:function(){this.mainBreadcrumbs&&this.mainBreadcrumbs.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return c}),define("adminServerSettings/EmailServerSettingsModel",["require","exports","module","jquery","backbone","backbone-epoxy","app"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("app"),u=o.getInstance(),a=s.Model.extend({defaults:{enableEmailServer:!1,authEnabled:!1,host:"",port:"",from:"",protocol:u.forAdminSettings.defaultProtocol,sslEnabled:!1,starTlsEnabled:!1,username:"",password:""},getEmailServerSettings:function(){var e={authEnabled:this.get("authEnabled"),starTlsEnabled:this.get("starTlsEnabled"),sslEnabled:this.get("sslEnabled"),host:r.trim(this.get("host")),password:this.get("authEnabled")?this.get("password"):"",port:r.trim(this.get("port")),from:r.trim(this.get("from")),protocol:this.get("protocol"),username:this.get("authEnabled")?this.get("username"):""};return this.get("enableEmailServer")?e:{}}});return a}),define("adminServerSettings/EmailServerSettingsView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","adminService","adminServerSettings/EmailServerSettingsModel","components/DropDownComponent","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("adminService"),f=e("adminServerSettings/EmailServerSettingsModel"),l=e("components/DropDownComponent"),c=e("localization"),h=u.getInstance(),p=s.View.extend({template:"tpl-email-server-settings",bindings:{"[data-js-server-enable]":"checked: enableEmailServer","[data-js-server-enable-mobile]":"html: getState","[data-js-server-config]":"classes: {hide: not(enableEmailServer)}","[data-js-server-host]":"value: host","[data-js-server-port]":"value: port","[dats-js-server-auth-config]":"classes: {hide: not(authEnabled)}","[data-js-server-username]":"value: username","[data-js-server-sender]":"value: from","[data-js-server-password]":"value: password","[data-js-server-tls]":"checked: starTlsEnabled","[data-js-server-ssl]":"checked: sslEnabled"},computeds:{getState:{deps:["enableEmailServer"],get:function(e){return e?"ON":"OFF"}}},events:{"click [data-js-submit-server-settings]":"submitEmailSettings"},initialize:function(e){this.model=new f,this.getSettings()},getSettings:function(e){a.getAdminSettings("default").done(function(e){this.serverSettings=e,this.model.set(_.extend({enableEmailServer:!!e.serverEmailConfig},e.serverEmailConfig)),this.render(e),this.bindValidators()}.bind(this))},render:function(e){this.$el.html(o.templates(this.template,{emailConfig:e.serverEmailConfig,settings:h.forAdminSettings})),this.applyBindings(),this.setupAnchors(),this.setupSelectDropDown(),this.bindValidators()},setupAnchors:function(){this.$host=r("[data-js-server-host]",this.$el),this.$port=r("[data-js-server-port]",this.$el),this.$user=r("[data-js-server-user]",this.$el),this.$sender=r("[data-js-server-sender]",this.$el),this.$password=r("[data-js-server-password]",this.$el),this.$errorBlock=r("[data-js-server-connection-error]",this.$el),this.$errorMessage=r("[data-js-server-connection-message]",this.$el)},setupSelectDropDown:function(){var e=h.forAdminSettings,t=[c.ui.on,c.ui.off];this.selectProtocol=new l({data:e.protocol,multiple:!1,defaultValue:this.model.get("protocol")}),r("[data-js-server-protocol]",this.$el).html(this.selectProtocol.$el),this.listenTo(this.selectProtocol,"change",this.onChangeProtocol),this.authEnabled=new l({data:[{name:t[0],value:t[0]},{name:t[1],value:t[1]}],multiple:!1,defaultValue:this.model.get("authEnabled")?t[0]:t[1]}),r("[data-js-server-auth]",this.$el).html(this.authEnabled.$el),this.listenTo(this.authEnabled,"change",this.onChangeAuth)},onChangeProtocol:function(e){this.model.set("protocol",e)},onChangeAuth:function(e){e=e==="ON",e||this.resetAuth(),this.model.set("authEnabled",e)},bindValidators:function(){o.hintValidator(this.$host,[{validator:"required"},{validator:"matchRegex",type:"hostMatchRegex",pattern:h.patterns.hostandIP}]),o.hintValidator(this.$port,[{validator:"required"},{validator:"minMaxNumberRequired",min:1,type:"host",max:65535}])},resetAuth:function(){this.model.set("username",""),this.$user.val(""),this.model.set("password",""),this.$password.val("")},deleteEmailSettings:function(){a.deleteEmailSettings("default").done(function(e){this.model.set(this.model.defaults),this.resetAuth(),this.selectProtocol.activateItem(h.forAdminSettings.defaultProtocol),this.authEnabled.activateItem(c.ui.off),o.ajaxSuccessMessenger("deleteOAuthSettings")}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"deleteOAuthSettings")})},submitEmailSettings:function(e){e.preventDefault();var t=this.model.get("enableEmailServer");t?this.updateEmailSettings():this.deleteEmailSettings()},updateEmailSettings:function(){this.$host.trigger("validate"),this.$port.trigger("validate");if(r(".validate-error",this.$el).length)return;var e=this.model.getEmailServerSettings();this.toggleErrorMessage("hide"),a.setAdminSettings(e,"default").done(function(e){o.ajaxSuccessMessenger("setAdminSettings")}).fail(function(e){this.toggleErrorMessage("show",e)}.bind(this))},toggleErrorMessage:function(e,t){var n=c.failMessages.setAdminSettings,r="";if(e=="show"){if(t){try{r=JSON.parse(t.responseText)}catch(i){}r&&r.message&&(n='<strong class="connection-error-title"><i class="rp-icons rp-icons-warning"></i>'+c.admin.emailError+"</strong><br>"+r.message)}this.$errorMessage.html(n),this.$errorBlock.removeClass("hide")}else this.$errorBlock.addClass("hide"),this.$errorMessage.html("")},destroy:function(){this.selectProtocol&&this.selectProtocol.destroy(),this.authEnabled&&this.authEnabled.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return p}),define("adminServerSettings/AuthServerSettingsModel",["require","exports","module","jquery","backbone","backbone-epoxy","util","app"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=u.getInstance(),f=s.Model.extend({defaults:{gitHubAuthEnabled:!1,clientId:"",clientSecret:"",organizations:""},getOrganizations:function(){try{return JSON.parse(this.get("organizations"))}catch(e){return[]}},setOrganizations:function(e){this.set({organizations:JSON.stringify(e)})}});return f}),define("adminServerSettings/AuthServerSettingsView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","adminService","adminServerSettings/AuthServerSettingsModel","modals/modalConfirm","localization"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("adminService"),f=e("adminServerSettings/AuthServerSettingsModel"),l=e("modals/modalConfirm"),c=e("localization"),h=u.getInstance(),p=s.View.extend({template:"tpl-auth-server-settings",orgTpl:"tpl-auth-server-organizations",bindings:{"[data-js-github-enable]":"checked: gitHubAuthEnabled","[data-js-github-enable-mobile]":"html: getGitHubAuthState","[data-js-github-config]":"classes: {hide: not(gitHubAuthEnabled)}","[data-js-client-id]":"value: clientId","[data-js-client-secret]":"value: clientSecret","[data-js-onganizations]":"updateOrganizations: organizations"},computeds:{getGitHubAuthState:{deps:["gitHubAuthEnabled"],get:function(e){return e?"ON":"OFF"}},showAddOrg:{deps:["organizations"],get:function(e){var t=this.model.getOrganizations();return t&&!_.isEmpty(t)?!0:!1}}},bindingHandlers:{updateOrganizations:{set:function(e,t){var n=this.view.model.getOrganizations();e.empty(),_.each(n,function(t){e.append(o.templates(this.view.orgTpl,{name:t}))},this)}}},events:{"click [data-js-add-org-btn]":"showAddOrganization","click [data-js-delete-org]":"confirmDeleteOrg","click [data-js-remove-add-new-org]":"hideAddOrganization","click [data-js-submit-auth-settings]":"submitAuthSettings"},initialize:function(e){this.model=new f,this.getAuthSettings()},render:function(){this.$el.html(o.templates(this.template,{})),this.setupAnchors(),this.bindValidators(),this.applyBindings()},setupAnchors:function(){this.$addOrg=r("[data-js-add-org-btn]",this.$el),this.$addOrgForm=r("[data-js-add-org-form]",this.$el),this.$addOrgField=r("[data-js-new-org]",this.$el),this.$clientId=r("[data-js-client-id]",this.$el),this.$clientSecret=r("[data-js-client-secret]",this.$el)},bindValidators:function(){o.hintValidator(this.$clientId,[{validator:"required"}]),o.hintValidator(this.$clientSecret,[{validator:"required"}])},updateModel:function(e){this.model.set({clientId:e.clientId,clientSecret:e.clientSecret}),this.model.setOrganizations(e.restrictions&&e.restrictions.organizations?e.restrictions.organizations.split(","):[])},showAddOrganization:function(e){e.preventDefault(),this.$addOrg.addClass("hide"),this.$addOrgForm.removeClass("hide")},hideAddOrganization:function(e){e&&e.preventDefault(),this.$addOrg.removeClass("hide"),this.$addOrgForm.addClass("hide"),this.$addOrgField.val(""),this.$addOrgField.closest("[data-js-add-org-row]").removeClass("validate-error")},confirmDeleteOrg:function(e){e.preventDefault();var t=r(e.currentTarget),n=r("[data-js-org-name]",t.closest("[data-js-org-row]")),i=n.data("js-org-name"),s=new l({headerText:c.dialogHeader.deleteOrg,confirmText:o.replaceTemplate(c.dialog.deleteOrg,i),bodyText:o.replaceTemplate(c.dialog.msgDeleteOrg),okButtonDanger:!0,cancelButtonText:c.ui.cancel,okButtonText:c.ui.delete});s.show().done(function(){this.deleteOrganization(i)}.bind(this))},deleteOrganization:function(e){var t=_.without(this.model.getOrganizations(),e);this.model.setOrganizations(t),this.updateAuthSettings("delete_org")},deleteAuthSettings:function(){a.deleteAuthSettings().done(function(e){this.updateModel(this.model.defaults),o.ajaxSuccessMessenger("deleteOAuthSettings")}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"deleteOAuthSettings")})},updateAuthSettings:function(e){var t=this.model.getOrganizations(),n={};this.$addOrgField.val()&&t.push(this.$addOrgField.val()),n.restrictions={organizations:t.join(",")},n.clientId=this.model.get("clientId"),n.clientSecret=this.model.get("clientSecret"),a.setAuthSettings(n).done(function(t){this.updateModel(t.github),this.hideAddOrganization(),e=="delete_org"?o.ajaxSuccessMessenger("deleteOrgOAuthSettings"):o.ajaxSuccessMessenger("setOAuthSettings")}.bind(this)).fail(function(e){o.ajaxFailMessenger(e,"setOAuthSettings")})},submitAuthSettings:function(e){e.preventDefault();var t=this.model.get("gitHubAuthEnabled");t?this.validate()&&this.updateAuthSettings():this.deleteAuthSettings()},validate:function(){return this.$clientId.trigger("validate"),this.$clientSecret.trigger("validate"),!this.$clientId.data("validate-error")&&!this.$clientSecret.data("validate-error")},getAuthSettings:function(){a.getAuthSettings().done(function(e){this.model.set("gitHubAuthEnabled",!0),this.updateModel(e)}.bind(this)).fail(function(e){this.model.set("gitHubAuthEnabled",!1)}.bind(this)).always(function(){this.render()}.bind(this))},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return p}),define("adminServerSettings/ServerSettingsTabsView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","adminServerSettings/ServerSettingsTabsView","adminServerSettings/EmailServerSettingsView","adminServerSettings/AuthServerSettingsView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("adminServerSettings/ServerSettingsTabsView"),f=e("adminServerSettings/EmailServerSettingsView"),l=e("adminServerSettings/AuthServerSettingsView"),c=u.getInstance(),a=s.View.extend({tpl:"tpl-server-settings-shell",events:{"click [data-js-tab-action]":"updateTabs"},initialize:function(e){this.tab=e.action||"email",this.render()},render:function(){this.$el.html(o.templates(this.tpl,{tab:this.tab})),this.setupAnchors(),this.renderTabContent()},update:function(e,t){this.tab=e||"email",t||r("[data-action="+this.tab+"]",this.$el).tab("show"),this.renderTabContent()},updateTabs:function(e){var t=r(e.currentTarget),n=t.data("js-tab-action");c.router.navigate(t.attr("href"),{silent:!0}),this.update(n,!0)},renderTabContent:function(){this.tabView&&this.tabView.destroy();var e=this.getTabView(this.tab),t=r('[data-js-tab-content="'+this.tab+'"]',this.$el);this.tabView=new e,r("[data-js-tab-content]",this.$el).hide(),r("[data-js-tab-action]",this.$el).closest("li.active").removeClass("active"),r('[data-js-tab-action="'+this.tab+'"]',this.$el).closest("li").addClass("active"),t.append(this.tabView.$el),t.show()},getTabView:function(e){switch(e){case"auth":return l;default:return f}},setupAnchors:function(){},destroy:function(){this.tabView&&this.tabView.destroy(),this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return a}),define("adminServerSettings/ServerSettingsPageView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","adminServerSettings/ServerSettingsHeaderView","adminServerSettings/ServerSettingsTabsView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("adminServerSettings/ServerSettingsHeaderView"),f=e("adminServerSettings/ServerSettingsTabsView"),l=u.getInstance(),c=s.View.extend({tpl:"tpl-server-settings-body",initialize:function(e){this.$el=e.el,this.$header=e.header,this.action=e.action},render:function(){return this.$el.html(o.templates(this.tpl)),this.renderHeader(),this.renderBody(),this},renderHeader:function(){this.header=new a,this.$header.append(this.header.$el)},renderBody:function(){this.body&&(this.body.destroy(),this.body=null),this.body=new f({action:this.action}),r("[data-js-settings]",this.$el).append(this.body.$el)},update:function(){this.body&&(this.body.destroy(),this.body=null),this.renderBody()},destroy:function(){this.header&&this.header.destroy(),this.body&&this.body.destroy(),this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return{ContentView:c}}),define("sections/content",["require","exports","module","jquery","backbone","util","dashboard/dashboard-view","favorites/favorites","launch","launches/LaunchPage","launches/LaunchDebugPage","dashboard/DashboardPage","project","projectinfo","projectMembers/MembersPageView","userProfile/UserProfilePage","adminProjects/ProjectsPageView","adminUsers/UsersPageView","adminServerSettings/ServerSettingsPageView"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("dashboard/dashboard-view"),u=e("favorites/favorites"),a=e("launch"),f=e("launches/LaunchPage"),l=e("launches/LaunchDebugPage"),c=e("dashboard/DashboardPage"),h=e("project"),p=e("projectinfo"),d=e("projectMembers/MembersPageView"),v=e("userProfile/UserProfilePage"),m=e("adminProjects/ProjectsPageView"),g=e("adminUsers/UsersPageView"),y=e("adminServerSettings/ServerSettingsPageView"),b=i.View.extend({initialize:function(e){this.isAdminPage=e.isAdminPage,this.$el=e.el,this.isAdminPage&&(this.queryString=e.queryString)},tpl:"tpl-container",render:function(e){return this.$el.html(s.templates(this.tpl)),this.isAdminPage&&(this.$container=r("#dynamic-content",this.$el)),this.setupPageView(e),(this.pageView.contextName==="settings"||this.isAdminPage)&&this.$el.find(".rp-main-panel").addClass("mobile-without-content-header"),this},update:function(e){this.page!==e.contextName||this.action!==e.action?(this.pageView.destroy(),this.isAdminPage&&(this.page=e.page,this.action=e.action),this.setupPageView(e)):this.pageView.update(e),this.isAdminPage||this.pageView.contextName==="settings"?this.$el.find(".rp-main-panel").addClass("mobile-without-content-header"):this.$el.find(".rp-main-panel").removeClass("mobile-without-content-header")},setupPageView:function(e){if(this.isAdminPage){this.page=e.page;var t=this.getViewForAdministratePage(e);e.el=this.$container,e.header=r("#contentHeader",this.$el),this.pageView=(new t(e)).render()}else{this.page=e.contextName;var t=this.getViewForPage(e.contextName);this.$header=r("#contentHeader",this.$el),this.$body=r("#dynamic-content",this.$el);var n=this;this.pageView=new t.ContentView({contextName:e.contextName,context:this.getAppProp(n),subContext:e.subContext,queryString:e.queryString}),this.pageView.render()}},getAppProp:function(e){var t=e;return{getMainView:function(){return t}}},getViewForPage:function(e){switch(e){case"dashboard":return o;case"newdashboard":return c;case"filters":return u;case"launches":case"userdebug":return l;case"newlaunches":return f;case"members":return d;case"settings":return h;case"user-profile":return v;case"info":return p;default:}},getViewForAdministratePage:function(e){return e.page==="users"?g.ContentView:e.page==="settings"?y.ContentView:m.ContentView},destroy:function(){this.pageView.destroy(),this.$el.off().empty(),this.undelegateEvents(),this.stopListening()}});return b}),define("sections/sidebar",["require","exports","module","jquery","backbone","util","storageService","storage/SingletonUserStorage","app"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("storageService"),u=e("storage/SingletonUserStorage"),a=e("app"),f=a.getInstance(),l=i.View.extend({el:"#pageSidebar",events:{"click .main-menu a":"onClickSidebarLink","click .user-menu a":"closeMenu","click [data-js-sidebar-close]":"closeMenu","click [data-js-administrate-page-link]":"setLastActivePage","click [data-js-logout]":"onClickLogout"},initialize:function(e){this.tpl=e.tpl,this.lastURL=e.lastURL,this.projectUrl=e.projectUrl,this.currentPage=e.currentPage,this.canDebug=s.isAdmin()||!s.isCustomer(),this.currentHash="#"+i.history.getFragment().split("?")[0].split("/",2).join("/"),this.listenTo(f.router,"route",this.updateActiveLink),this.userStorage=new u},setupAnchors:function(){this.$bodyElement=r("body")},render:function(){var e={projectUrl:this.projectUrl,userLogin:o.getDebugUser()||f.userModel.get("name"),canDebug:this.canDebug,isAdmin:s.isAdmin(f.userModel.toJSON()),lastActive:this.getLastActive(),lastURL:this.lastURL};this.$el.html(s.templates(this.tpl,e)).show(),this.setupAnchors(),this.updateActiveLink(),s.setupBaronScroll(this.$el.find("[data-js-scroll-container]"));var t=this;return r(window).resize(function(){window.innerWidth>=768&&t.$bodyElement.hasClass("menu-open")&&t.closeMenu()}),this},setLastActivePage:function(){var e=i.history.getFragment();e=="user-profile"?this.userStorage.set("lastActiveURL",this.projectUrl):this.userStorage.set("lastActiveURL",e)},updateActiveLink:function(){this.clearActives(),this.currentHash="#"+i.history.getFragment().split("?")[0].split("/",2).join("/"),this.currentHash==="#"+this.projectUrl&&(this.currentHash+="/dashboard"),this.currentHash==="#"+this.projectUrl+"/"&&(this.currentHash+="dashboard"),this.currentHash==="#administrate"&&(this.currentHash+="/projects"),this.$el.find('a[href^="'+this.currentHash+'"]',this.$el).addClass("active")},getLastActive:function(){var e="",t=this.userStorage.get("lastActiveURL");return t&&(e=t),e},onClickSidebarLink:function(e){switch(r(e.currentTarget).attr("id")){case"dashboard":f.trackingDispatcher.trackEventNumber(1);break;case"filters":f.trackingDispatcher.trackEventNumber(2);break;case"userdebug":f.trackingDispatcher.trackEventNumber(3)}this.closeMenu()},closeMenu:function(){this.$bodyElement.removeClass("menu-open")},clearActives:function(){r("a.active",this.$el).removeClass("active")},onClickLogout:function(e){e.preventDefault(),e.stopPropagation(),f.userModel.logout()},destroy:function(){r(window).unbind("resize"),this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return l}),define("sections/footer",["require","exports","module","jquery","backbone","util","moment","model/SingletonRegistryInfoModel"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("moment"),u=e("model/SingletonRegistryInfoModel"),a=i.View.extend({el:"#pageFooter",tpl:"tpl-footer",initialize:function(){this.viewModel=new u},render:function(){var e=this;return this.$el.html(s.templates(this.tpl,{moment:o,util:s})).show(),this.viewModel.ready.done(function(){r("#buildVersion",e.$el).text(e.viewModel.get("uiBuildVersion"))}),s.setupBaronScroll(r("#ComponentsModal .modal-dialog",this.$el)),this},destroy:function(){this.$el.html(""),this.undelegateEvents(),this.stopListening(),this.unbind(),delete this}});return a}),function(e){"use strict";e.fn.equalHeight=function(){var t=[];return e.each(this,function(n,r){var i=e(r),s,o=i.css("box-sizing")==="border-box"||i.css("-moz-box-sizing")==="border-box";o?s=i.innerHeight():s=i.height(),t.push(s)}),this.css("height",Math.max.apply(window,t)+"px"),this},e.fn.equalHeightGrid=function(t){var n=this.filter(":visible");n.css("height","auto");for(var r=0;r<n.length;r++)if(r%t===0){var i=e(n[r]);for(var s=1;s<t;s++)i=i.add(n[r+s]);i.equalHeight()}return this},e.fn.detectGridColumns=function(){var t=0,n=0,r=this.filter(":visible");return r.each(function(r,i){var s=e(i).offset().top;if(t!==0&&s!==t)return!1;n++,t=s}),n};var t=0;e.fn.responsiveEqualHeightGrid=function(){function i(){var e=n.detectGridColumns();n.equalHeightGrid(e)}var n=this,r=".grids_"+t;return n.data("grids-event-namespace",r),e(window).bind("resize"+r+" load"+r,i),i(),t++,this},e.fn.responsiveEqualHeightGridDestroy=function(){var t=this;return t.css("height","auto"),e(window).unbind(t.data("grids-event-namespace")),this}}(window.jQuery),define("equalHeightRows",["jquery"],function(){}),define("mainview",["require","exports","module","jquery","backbone","app","model/UserModel","model/SingletonRegistryInfoModel","model/SingletonAppModel","sections/header","sections/content","sections/sidebar","sections/footer","equalHeightRows"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("app"),o=e("model/UserModel"),u=e("model/SingletonRegistryInfoModel"),a=e("model/SingletonAppModel"),f=e("sections/header"),l=e("sections/content"),c=e("sections/sidebar"),h=e("sections/footer");e("equalHeightRows");var p=s.getInstance(),d=i.View.extend({initialize:function(e){this.$el=e.el,this.contextName=e.contextName},render:function(e){this.$el.empty(),this.sidebarView=(new c({tpl:"tpl-sidebar",projectUrl:p.project.projectId,currentPage:this.contextName})).render(),this.footerView=(new h).render(),this.headerView=(new f({tpl:"tpl-header",currentPage:this.contextName})).render(),this.contentView=(new l({isAdminPage:!1,el:this.$el})).render(e)},update:function(e){this.contentView.update(e)},destroy:function(){this.contentView.destroy(),this.contentView=null,this.sidebarView.destroy(),this.sidebarView=null,this.headerView.destroy(),this.headerView=null,this.footerView.destroy(),this.footerView=null,this.undelegateEvents(),this.stopListening(),this.$el&&this.$el.off()}});return{MainView:d}}),define("admin",["require","exports","module","jquery","backbone","app","model/UserModel","storage/SingletonUserStorage","sections/header","sections/content","sections/sidebar","sections/footer"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("app"),o=e("model/UserModel"),u=e("storage/SingletonUserStorage"),a=e("sections/header"),f=e("sections/content"),l=e("sections/sidebar"),c=e("sections/footer"),h=s.getInstance(),p=i.View.extend({initialize:function(e){this.$el=e.el,this.contextName="admin",this.$body=r("#mainContainer",this.$el),this.user=new o,this.userStorage=new u},events:{"click #logout":"onClickLogout"},render:function(e){h.currentProjectsSettings={};var t=this.userStorage.get("lastActiveURL")||h.userModel.get("defaultProject");return this.headerView=(new a({isAdminPage:!0,tpl:"tpl-admin-header",currentPage:e.page,lastURL:t})).render(),this.contentView=(new f({isAdminPage:!0,contextName:this.contextName,el:this.$body,queryString:e.queryString})).render(e),this.footerView=(new c).render(),this.sidebarView=(new l({tpl:"tpl-admin-side-bar",lastURL:t})).render(),this},onClickLogout:function(e){e.preventDefault(),this.user.logout()},update:function(e){this.contentView.update(e),this.headerView.update(e)},destroy:function(){this.contentView.destroy(),this.contentView=null,this.sidebarView.destroy(),this.sidebarView=null,this.headerView.destroy(),this.headerView=null,this.footerView.destroy(),this.footerView=null,this.undelegateEvents(),this.stopListening(),this.$el&&this.$el.off()}});return{MainView:p}}),define("register/registerModel",["require","exports","module","jquery","backbone","backbone-epoxy","util"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=s.Model.extend({defaults:{login:"",fullName:"",email:"",password:""}});return u}),define("register/registerView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","memberService","callService","localization","dataUrlResolver","model/UserModel","register/registerModel"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("memberService"),f=e("callService"),l=e("localization"),c=e("dataUrlResolver"),h=e("model/UserModel"),p=e("register/registerModel"),d=u.getInstance(),v=s.View.extend({className:"registration",template:"tpl-register",messagesTpl:"tpl-register-messages",bindings:{"[data-js-login]":"value: login","[data-js-name]":"value: fullName","[data-js-email]":"value: email","[data-js-password]":"value: password"},events:{"click [data-js-cancel]":"resetForm","click [data-js-register]":"registerMember","click [data-js-show-password]":"togglePassword","validation:success .rp-input":"checkFields","validation:success [data-js-login]":"checkForLoginUniqueness"},initialize:function(e){this.id=e.uuid.slice(5,e.uuid.length),this.context=e.context,this.model=new p,this.user=new h;var t=this;a.validateRegisterBid(this.id).done(function(e){e.isActive?(t.model.set("email",e.email),t.render()):t.showExpiredPage()}).fail(function(e){o.ajaxFailMessenger(e,"validateRegisterBid")})},render:function(){this.$el.html(o.templates(this.template,{})),this.setupAnchors(),this.bindValidators(),this.applyBindings()},setupAnchors:function(){this.$login=r("[data-js-login]",this.$el),this.$name=r("[data-js-name]",this.$el),this.$email=r("[data-js-email]",this.$el),this.$password=r("[data-js-password]",this.$el),this.$confirmPassword=r("[data-js-password-confirm]",this.$el),this.$register=r("[data-js-register]",this.$el)},checkForLoginUniqueness:function(){var e=this;this.$register.addClass("disabled"),f.call("GET",c.userInfoValidation()+"?username="+this.$login.val()).done(function(t){t.is&&e.$login.parent().addClass("validate-error").find(".validate-hint").addClass("show-hint").html(l.validation.registeredLogin),e.isFormReady()&&e.$register.removeClass("disabled")}).fail(function(e){})},showExpiredPage:function(e){e&&e.preventDefault(),this.$el.addClass("fail").append(o.templates(this.messagesTpl))},isFormReady:function(){var e=!0;return r(".rp-input",this.$el).each(function(t,n){if(r(n).val()===""||r(n).parent().hasClass("validate-error"))e=!1}),e},checkFields:function(){this.$confirmPassword.val()!==this.$password.val()&&this.$confirmPassword.parent().addClass("validate-error").find(".validate-hint").addClass("show-hint").html(l.validation.confirmMatch);if(!this.isFormReady()||this.$confirmPassword.val()!==this.$password.val()){this.$register.addClass("disabled");return}this.$register.removeClass("disabled")},bindValidators:function(){o.hintValidator(this.$login,[{validator:"matchRegex",type:"loginRegex",pattern:d.patterns.login}]),o.hintValidator(this.$name,[{validator:"matchRegex",type:"fullNameInfoRegex",pattern:d.patterns.fullName}]),o.hintValidator(this.$password,[{validator:"matchRegex",type:"originalPassRegex",pattern:d.patterns.originalPass}]),o.hintValidator(this.$confirmPassword,[{validator:"matchRegex",type:"originalPassRegex",pattern:d.patterns.originalPass}])},togglePassword:function(e){var t=r(e.target);t.prop("checked")?this.$password.add(this.$confirmPassword).attr("type","text"):this.$password.add(this.$confirmPassword).attr("type","password")},getData:function(){return{login:this.model.get("login"),email:this.model.get("email"),full_name:this.model.get("fullName"),password:this.model.get("password")}},registerMember:function(){r(".rp-field",this.$el).find("input").trigger("validate");if(r(".validate-error",this.$el).length)return;var e=this.getData(),t=this;e&&a.registerUser(e,this.id).done(function(n){t.context.destroyViews(),t.user.login(e.login,e.password).done(function(){o.ajaxSuccessMessenger("registerMember")}).fail(function(){d.router.navigate("#login",{trigger:!0})})}).fail(function(e){o.ajaxFailMessenger(e,"registerMember")})},resetForm:function(){r(".rp-field",this.$el).find("input:enabled").val("")},destroy:function(){this.undelegateEvents(),this.stopListening(),this.unbind(),this.remove(),delete this}});return v}),define("pages/404",["require","exports","module","jquery","backbone","util","model/UserModel","app"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("model/UserModel"),u=e("app"),a=u.getInstance(),f=i.View.extend({tpl:"tpl-404",initialize:function(e){this.$el=e.container},render:function(){return this.$el.html(s.templates(this.tpl,{url:a.userModel.getDefaultProjectHash()})),a.userModel.set({lastInsideHash:a.userModel.getDefaultProjectHash()}),this},destroy:function(){this.undelegateEvents(),this.stopListening(),this.$el.empty()}});return f}),define("context",["require","exports","module","jquery","backbone","app","mainview","launches/LaunchPage","util","coreService","admin","register/registerView","pages/404","model/SingletonAppModel","filters/SingletonLaunchFilterCollection"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("app"),o=e("mainview"),u=e("launches/LaunchPage"),a=e("util"),f=e("coreService"),l=e("admin"),c=e("register/registerView"),h=e("pages/404"),p=e("model/SingletonAppModel"),d=e("filters/SingletonLaunchFilterCollection"),v=s.getInstance(),m=new p,g=new d,y={currentContext:null,mainView:undefined,invalidView:null,contentView:null,currentProjectId:null,bodyContainer:null,mainContainer:null,containersSet:!1,wrongResponseTo404:function(){v.userModel.clearLastInsidePage(),this.currentProjectId?(this.destroyMainView(),this.openInvalid()):this.logout()},loadProject:function(){var e=this;return f.getProject().then(function(t){e.currentProjectId=t.projectId,v.project=t,m.parse(t)})},loadPreferences:function(){return f.getPreferences().done(function(e){v.preferences=e,g.parse(e.filters)})},openAdmin:function(e,t,n,i){this.currentContext=e,t&&m.set({projectId:t}),this.checkForContextChange(e);var s={page:e,id:t,action:n,contextName:this.currentContext,queryString:i};this.currentProjectId=null,this.validateMainViewByContextName(),this.bodyContainer=r("#bodyContainer"),this.mainView?this.mainView.update(s):(this.mainView=new l.MainView({el:this.bodyContainer}),this.mainView.render(s))},openRouted:function(e,t,n,i){v.trackingDispatcher.pageView(t),this.currentContext=t,this.checkForContextChange(t),this.validateMainViewForAdmin(),this.container=r("#mainContainer"),v.project.projectId=e||v.userModel.get("defaultProject");var s={container:this.container,projectId:e,contextName:t,subContext:n,queryString:i},u=[];this.preferencesAreNotLoaded()&&u.push(this.loadPreferences()),(this.projectIsNotLoaded(this.projectId)||this.isSettingsPage(this.contextName))&&u.push(this.loadProject()),this.destroyInvalidView();var a=this,f=function(){a.mainView?a.mainView.update(s):(a.mainView=new o.MainView({el:a.container,contextName:t,projectId:e}),a.mainView.render(s))};this.validateContentViewByContextName(t),u.length?r.when.apply(r,u).done(function(){a.destroyMainView(),f()}).fail(function(){a.wrongResponseTo404()}):f()},projectIsNotLoaded:function(){return!this.currentProjectId||this.currentProjectId!==v.project.projectId},preferencesAreNotLoaded:function(){return!v.preferences||v.preferences.projectRef!==v.project.projectId},checkForContextChange:function(e){this.currentContext&&this.currentContext!==e&&a.clearXhrPool(),this.currentContext=e},openRegister:function(e){this.destroyViews(),this.mainView=new c({uuid:e,context:this}),r("#mainContainer").html(this.mainView.el)},isSettingsPage:function(e){return e==="settings"},validateMainViewForAdmin:function(){this.mainView&&this.mainView.contextName==="admin"&&this.destroyMainView()},validateMainViewByContextName:function(){this.mainView&&this.mainView.contextName!=="admin"&&this.destroyMainView()},destroyViews:function(){this.destroyContentView(),this.destroyMainView()},validateContentViewByContextName:function(e){this.contentView&&this.contentView.contextName!==e&&this.destroyContentView()},openInvalid:function(){this.validateContentViewByContextName("not-found");var e;this.mainView?e=r("#dynamic-content",this.mainView.$el):e=r("#mainContainer"),this.invalidView=(new h({container:e})).render()},logout:function(){v.userModel&&window.location.hash.indexOf("documentation")==-1&&(v.userModel.logout(),this.currentProjectId=null,a.ajaxInfoMessenger("logOuted"))},destroyMainView:function(){this.mainView&&(this.mainView.destroy(),this.mainView=null)},destroyContentView:function(){this.contentView&&(this.contentView.destroy(),this.contentView=null)},destroyInvalidView:function(){this.invalidView&&(this.invalidView.destroy(),this.invalidView=null)},getAppProp:function(){var e=this.mainView;return{getMainView:function(){return e}}}};return _.extend(y,i.Events),y}),define("landing/LoginView",["require","exports","module","jquery","backbone","backbone-epoxy","util","app","model/UserModel","localization","coreService","model/SingletonRegistryInfoModel","model/SingletonURLParamsModel"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("backbone-epoxy"),o=e("util"),u=e("app"),a=e("model/UserModel"),f=e("localization"),l=e("coreService"),c=e("model/SingletonRegistryInfoModel"),h=e("model/SingletonURLParamsModel"),p=u.getInstance(),d=i.Epoxy.View.extend({el:".block-login",tpl:"tpl-login",tplRestore:"tpl-login-restore",tplReset:"tpl-login-reset",events:{"click #submit_user":"submitForm","click .close":"hideError","keyup #user_login":"lookForEnter","keyup #user_password":"lookForEnter","keyup #submit_user":"lookForEnter","submit .block-login-form":"preventSubmit","click #forgotPass":"openForgotPass","click #cancel_restore":"closerForgotPass","click #submit_restore:not([disabled])":"submitForgotPass","change #showPass":"showPass","click #backToLogin":"closerResetPassword","click #submit_change:not(.disabled)":"submitChangePass"},bindings:{"[data-js-build-versions]":"html: fullServicesHtml","[data-js-github-login]":"classes: {hide: validateGitHubAuth}","[data-js-github-login-btn]":"attr: {disabled: validateGitHubAuth}"},computeds:{validateGitHubAuth:{deps:["authExtensions"],get:function(e){return!_.contains(e,"github")}}},initialize:function(e){this.user=new a,this.listenTo(this.user,"login::loader::hide",this.hideLoader),this.viewModel=new c,this.render()},render:function(){this.$el.html(o.templates(this.tpl)),this.setupAnchors(),o.setupBaronScroll(r("#login-form",this.$el));var e=new h;if(e.get("reset")){var t=this;l.validateRestorationKey(e.get("reset")).done(function(n){n.is?(t.restoreKey=e.get("reset"),t.openResetPassword()):t.showRestorationError()}).fail(function(e){t.showRestorationError()})}else e.get("errorAuth")&&(this.showError(e.get("errorAuth"),!1),e.set("errorAuth",null));return this},preventSubmit:function(e){return e.preventDefault(),!1},showPass:function(e){var t=r(e.currentTarget).is(":checked")?"text":"password";r("#reset-form form input.rp-input-auth",this.$el).attr("type",t)},openForgotPass:function(){this.$loginForm.hide().after(o.templates(this.tplRestore)),this.$restoreForm=r("#restore-form",this.$el),this.$submitRestore=r("#submit_restore",this.$el),this.$email=r("#restore_email",this.$restoreForm),o.bootValidator(this.$email,[{validator:"matchRegex",type:"emailMatchRegex",pattern:p.patterns.email,arg:"i"}]);var e=this;this.$email.on("validation::change",function(t,n){n.valid?e.$submitRestore.removeAttr("disabled"):e.$submitRestore.attr("disabled","disabled"),e.targetEmail=n.value})},submitForgotPass:function(){var e=this;l.initializePassChange(this.targetEmail).done(function(){o.ajaxSuccessMessenger("submitForgotPass",e.targetEmail),_.delay(e.closerForgotPass.bind(e),700)}).fail(function(e){var t=e.responseText.indexOf("external user")>-1?"submitForgotPassRestricted":"submitForgotPass";if(e.responseText.indexOf("40010")>-1||e.responseText.indexOf(f.failMessages.serverNotConfigured)>-1)t="submitForgotPassBrokenConf";o.ajaxFailMessenger(null,t)})},submitChangePass:function(){var e=this;l.submitPassReset(this.targetPass,this.restoreKey).done(function(){o.ajaxSuccessMessenger("submitChangePass"),_.delay(e.closerResetPassword.bind(e),700)}).fail(function(e){o.ajaxFailMessenger(e,"submitChangePass")})},closerForgotPass:function(){this.$restoreForm=r("#restore-form",this.$el),this.$loginForm=r("#login-form",this.$el),this.$restoreForm&&(this.$restoreForm.hide().remove(),this.$restoreForm=null,this.$loginForm.show(),r("#user_login").focus(),this.targetEmail=null,o.hideMessage())},openResetPassword:function(){this.$loginForm.hide().after(o.templates(this.tplReset)),this.$resetForm=r("#reset-form",this.$el),this.$form=r(".rp-form-group:first",this.$resetForm),this.$submitReset=r("#submit_change",this.$el);var e=p.forms.passwordRange;o.confirmValidator({holder:this.$form,min:e[0],max:e[1],firstCheckLength:!0});var t=this;this.$form.on("validation::change",function(e,n){var r=n.valid?"remove":"add";t.targetPass=n.value,t.$submitReset[r+"Class"]("disabled")})},closerResetPassword:function(){this.$resetForm=this.$resetForm||r("#reset-form",this.$el),this.$loginForm=this.$loginForm||r("#login-form",this.$el),this.$resetForm&&(this.$resetForm.hide().remove(),this.$resetForm=null,this.$loginForm.show(),window.location.hash=window.location.hash.split(p.restorationStamp)[0],o.hideMessage())},lookForEnter:function(e){e.keyCode===13&&this.submitForm()},toggle:function(){this.$el.toggleClass("block-login-show"),r("#user_login",this.$el).focus()},show:function(){this.$el.addClass("block-login-show"),r("#user_login",this.$el).focus()},hide:function(){this.$el.removeClass("block-login-show")},showRestorationError:function(){this.showError(f.validation.restorationExpired),window.location.hash=window.location.hash.split(p.restorationStamp)[0],this.restoreKey=null},setupAnchors:function(){this.$loader=r(".loader:first",this.$el),this.$login=r("#user_login",this.$el),this.$pass=r("#user_password",this.$el),this.$errorBlock=r(".js-loginerror",this.$el),this.$errorText=r("#errorText",this.$el),this.$loginForm=r("#login-form",this.$el)},showLoader:function(){this.$loader.show()},hideLoader:function(){this.$loader.hide()},hideError:function(){this.$errorText.empty(),this.$errorBlock.fadeOut(100)},submitForm:function(){var e=/^[A-Za-z0-9_]/,t=this.cutIfEmail(this.$login.val()),n=this.$pass.val(),r=p.forms.nameRange,i=p.forms.passwordRange;if(t.length<r[0]||t.length>r[1])return this.$login.focus(),this.showError(f.ui.wronglength),!1;if(!e.test(t))return this.$login.focus(),this.showError(f.ui.wrongcharacters),!1;if(!n)return this.$pass.focus(),this.showError(f.forms.passwordEmpty),!1;if(n.length<i[0]||n.length>i[1])return this.$pass.focus(),this.showError(f.forms.passwordSize),!1;this.hideError(),this.showLoader(),p.router&&p.router.navigate("login",{silent:!0});var s=this;this.user.login(t,n).fail(function(e){e.status==403?s.showBlockMessage():e.status==400&&s.showError(f.ui.wrongCredentials)})},cutIfEmail:function(e){if(o.validateEmail(e)){var t=e.indexOf("@");return e.slice(0,t)}return e},showError:function(e,t){this.$loader.hide();var n=t?"html":"text";this.$errorText[n](e),this.$errorBlock.fadeIn(100)},showBlockMessage:function(){var e=30,t,n=r("#user_login, #user_password, #submit_user, #submit_user_sso",this.$el),i=this,s=f.login.blockedLoginForm+' <strong id="blockTimer">'+e+"</strong> "+f.ui.sec+".";n.attr("disabled","disabled"),this.showError(s,!0),t=setInterval(function(){e--,r("#blockTimer",this.$el).text(e),e<=0&&(clearTimeout(t),n.removeAttr("disabled"),i.hideError())},1e3)},destroy:function(){this.undelegateEvents(),this.$el.removeData().unbind(),this.$el.empty()}});return d}),define("landing/LandingHeaderView",["require","exports","module","backbone","backbone-epoxy","util","app","landing/LoginView","model/UserModel"],function(e,t,n){"use strict";var r=e("backbone"),i=e("backbone-epoxy"),s=e("util"),o=e("app"),u=e("landing/LoginView"),a=e("model/UserModel"),f=o.getInstance(),l=r.Epoxy.View.extend({tpl:"tpl-landing-header",bindings:{":el":'classes: {"b-header--dark": darkMenu, authorized: auth}',"[data-js-return-button]":"attr: {href: lastInsideHash}"},events:{"click .js-logo":"onClickLogo","mouseover .js-headermenu li":"onMouseOverMenuLi","mouseout .js-headermenu":"onMouseOutMenu","click .b-menu__link":"onClickMenuItem","click .navbar-toggle":"onOpenMenuMobile","click [data-js-show-login]":"onClickShowLogin",keydown:"keyDownHandler"},initialize:function(){this.render(),this.$menuItems=$(".b-menu__link",this.$el),this.listenTo(this.model,"change:activeSlide",this.onChangeActiveSlide),this.logo=$(".js-logo",this.$el),this.loginView=new u({el:$(".js-loginblock",this.$el).get()}),this.viewModel=new a,$(".b-menu__link",this.$el).on("touchend",this.onClickMenuItem.bind(this))},onClickShowLogin:function(){f.userModel.get("auth")&&(window.location.href=""),$(".js-navbar",this.$el).removeClass("in"),this.loginView.toggle()},showLoginBlock:function(){var e=this;this.viewModel.isAuth().fail(function(){$(".js-navbar",e.$el).removeClass("in"),e.loginView.show()})},keyDownHandler:function(e){switch(e.which){case 27:return this.onOpenMenuMobile()}},render:function(){return this.$el.html(s.templates(this.tpl)),this},onClickMenuItem:function(e){$(".js-navbar",this.$el).removeClass("in");var t=$(e.target);t.attr("href")&&(e.preventDefault(),t.attr("href")=="#documentation"?this.trigger("clickDocumentation"):this.trigger("clickMenu",t.attr("href")))},onMouseOverMenuLi:function(e){this.moveLineToElement($(e.currentTarget))},onMouseOutMenu:function(){var e=$(".active",this.$el);e.length?this.moveLineToElement(e):this.hideMenuLine()},onChangeActiveSlide:function(e,t){this.$menuItems.removeClass("active");if(t==0){this.hideMenuLine();return}t>1&&t--;var n=this.$menuItems.eq(t-1);n.addClass("active"),this.moveLineToElement(n)},moveLineToElement:function(e){var t=e.position();$(".js-menuline").stop().animate({left:t.left,width:e.width()},150)},hideMenuLine:function(){var e=this.logo.offset();$(".js-menuline").stop().animate({left:e.left<50?50:e.left,width:0},150)},onClickLogo:function(){$(".js-navbar",this.$el).removeClass("in"),this.trigger("clickMenu","#trees")},onOpenMenuMobile:function(){this.loginView.hide()},destroy:function(){}});return l}),define("landing/_LandingSection",["require","exports","module","backbone","backbone-epoxy","util"],function(e,t,n){var r=e("backbone"),i=e("backbone-epoxy"),s=e("util"),o=r.Epoxy.View.extend({tagName:"section",initialize:function(){this.render()},render:function(){this.$el.html(s.templates(this.tpl)),this.onRender()},showAndAnimateElements:function(e){e.each(function(e,t){$(t).removeClass("g-invisible"),$(t).addClass($(t).data("animation"))})},onRender:function(){},onShow:function(){},changeScroll:function(){}});return o}),define("landing/LandingSectionTreesView",["require","exports","module","landing/_LandingSection"],function(e,t,n){var r=e("landing/_LandingSection"),i=r.extend({id:"trees",className:"b-trees",tpl:"tpl-landing-section-trees",onRender:function(){this.paralaxElements=$(".js-forest",this.$el)},changeScroll:function(e,t){function r(e,t){e.css({transform:"translate(0, "+t+"px)"})}var n=$("body").width();this.paralaxElements.each(function(t,i){$(i).hasClass("js-leaf")?n>768?r($(i),-1.3*e*$(i).data("speed")):r($(i),0):r($(i),-1*e*$(i).data("speed"))})}});return i}),define("landing/LandingSectionFeaturesView",["require","exports","module","landing/_LandingSection"],function(e,t,n){var r=e("landing/_LandingSection"),i=r.extend({id:"features",className:"b-features clearfix",tpl:"tpl-landing-section-features",onRender:function(){this.animateElements=$(".js-feature",this.$el)},changeScroll:function(e,t){var n=!0;return this.animateElements.each(function(e,r){if(!$(r).data("animate")){n=!1;var i=$(r).data("animation"),s=$(r).find(".js-featicon").data("animation"),o=r.offsetParent.offsetTop+r.offsetTop;t>o+100&&!$(r).hasClass("fadeIn")&&($(r).data({animate:!0}),setTimeout(function(){$(r).removeClass("g-invisible"),$(r).addClass(i),$(r).find(".js-featicon").addClass(s)},e*100+150))}}),n}});return i}),define("landing/LandingSectionWatchView",["require","exports","module","landing/_LandingSection"],function(e,t,n){var r=e("landing/_LandingSection"),i=r.extend({id:"watch",className:"b-watch clearfix",tpl:"tpl-landing-section-watch",onRender:function(){var e=this;$(window).off("resize.landingPageWatch").on("resize.landingPageWatch",function(){e.resize()})},onShow:function(){this.resize()},changeScroll:function(e,t){if(t>400){$(".js-watch__container",this.$el).removeClass("g-invisible");var n=$(".js-thewatch",this.$el);return n.hasClass(n.data("animation"))||n.addClass(n.data("animation")),$(".js-watch",this.$el).each(function(e,t){var n=$(t).data("animation");$(t).hasClass(n)||$(t).addClass(n)}),$(".js-arrow",this.$el).addClass("b-watcharrow--rotate"),!0}},resize:function(){var e=$(".js-watchcircle",this.$el).width(),t=e/2;$(".js-watchcircle").css({bottom:$("body").width()>768?t-5:t-3,"margin-bottom":-t+5,height:t,"border-bottom-left-radius":t,"border-bottom-right-radius":t}),$(".js-arrow").css({bottom:$("body").width()>992?t:t+1}),$(".js-arrowcircle").css({bottom:$("body").width()>992?t:t-2})}});return i}),define("landing/LandingSectionAnalysisView",["require","exports","module","landing/_LandingSection"],function(e,t,n){var r=e("landing/_LandingSection"),i=r.extend({id:"analysis",className:"b-common b-autotrees clearfix",tpl:"tpl-landing-section-analysis",fallenLeaves:!1,changeScroll:function(e,t){var n=this,r=!0;return $("#analysis [data-js-scroll-action]").not(".activate").each(function(e,i){r=!1,t>i.offsetTop+i.offsetHeight*.75&&(n.showAndAnimateElements($(".js-commonel",i)),$(i).addClass("activate"))}),this.fallenLeaves||(this.fallenLeaves=!0,this.redLeavesFalling()),r},redLeavesFalling:function(){function a(n,i){e.find(".js-redleaves--back .js-redleaf").each(function(e,n){if(e==i)return setTimeout(function(){$(n).addClass(r).delay(500).queue(function(){$(this).addClass(t).dequeue()}).delay(1300).queue(function(){$(this).removeClass(t).removeClass(r).dequeue()})},i*150),!1;setTimeout(function(){$(n).addClass(r).delay(300).queue(function(){$(this).removeClass(r).dequeue()})},e*150)})}var e=$(".js-redleaves"),t="swing",n="b-redleaf--moveup",r="b-redleaf__back--moveup",i=e.find(".js-redleaves--front .js-redleaf"),s=0,o=[];while(o.length<5){var u=Math.floor(Math.random()*17);o.indexOf(u)==-1&&u!=17&&o.push(u)}$.each(i,function(e,r){var i=o[e];setTimeout(function(){$(r).addClass(n).delay(i*150+300).queue(function(){$(this).addClass(t).dequeue()}).delay(1500).queue(function(){$(this).removeClass(t).removeClass(n).dequeue()}),a($(r),i)},s),s+=i*150+3e3})}});return i}),define("landing/LandingSectionProductionUsageView",["require","exports","module","landing/_LandingSection","d3"],function(e,t,n){var r=e("landing/_LandingSection");e("d3");var i=r.extend({id:"productionUsage",className:"b-common clearfix",tpl:"tpl-landing-section-production_usage",changeScroll:function(e,t){if(t>400){var n=$(".js-d3",this.$el);return this.showAndAnimateElements($(".js-commonel",this.$el)),n.removeClass("g-invisible").addClass(n.data("animation")),this.animateDiagram(),!0}},animateDiagram:function(){var e=[{end_time:"2014-12-25",value:0},{end_time:"2015-01-12",value:35},{end_time:"2015-02-10",value:60},{end_time:"2015-03-18",value:70},{end_time:"2015-04-23",value:90},{end_time:"2015-05-29",value:200},{end_time:"2015-06-6",value:250}],t=[50,100,200],n=d3.time.format("%a %d %b"),r=[0,180,30,50],i=700-r[1]-r[3],s=350-r[0]-r[2],o=d3.time.format("%Y-%m-%d").parse,u=d3.time.scale().range([0,i+100]),a=d3.scale.linear().range([s,0]),f=d3.svg.area().interpolate("monotone").x(function(e){return u(e.end_time)}).y0(s).y1(function(e){return a(e.value)}),l=d3.svg.line().interpolate("monotone").x(function(e){return u(e.end_time)}).y(function(e){return a(e.value)});e.forEach(function(e){e.end_time=o(e.end_time),e.value=+e.value}),u.domain([e[0].end_time,e[e.length-1].end_time]),a.domain([0,300]).nice();var c=d3.select(".js-graph").append("svg:svg").attr("width","100%").attr("height",s+r[0]+r[2]).attr("viewBox","0 0 700 350").attr("preserveAspectRatio","xMaxYMax meet").append("svg:g").attr("transform","translate("+r[3]+","+r[0]+")");c.append("clipPath").attr("id","rectClip").append("rect").attr("x",-50).attr("y",20).attr("width",0).attr("height",s),c.append("svg:path").attr("class","line").attr("d",l(e)).attr("clip-path","url(#rectClip)"),c.append("svg:path").attr("class","area").attr("d",f(e)).attr("clip-path","url(#rectClip)"),c.append("line").attr("class","x axis").attr("x1",-50).attr("x2",i+150).attr("y1",s).attr("y2",s),c.append("line").attr("class","y axis").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",s+80),e.forEach(function(t){t.end_time!=e[e.length-1].end_time&&t.end_time!=e[0].end_time&&(c.append("line").attr("x1",u(t.end_time)).attr("x2",u(t.end_time)).attr("y1",t.value*2>s?a(s-70):a(t.value*2)).attr("y2",a(5)).attr("stroke","#000").attr("class","vlinecircle").attr("clip-path","url(#rectClip)"),c.append("svg:text").text(n(t.end_time)).attr("y",s+25).attr("x",u(t.end_time)-23))}),t.forEach(function(e){c.append("svg:text").text(e).attr("y",a(e)).attr("x",-10).attr("class","text-y").attr("text-anchor","end")}),d3.select("#rectClip rect").transition().duration(3e3).attr("width","100%"),e.forEach(function(e,t){c.append("circle").attr("r",11).attr("stroke","#e9e9e9").attr("stroke-width","4").attr("fill","#a3c644").attr("cx",u(e.end_time)).attr("cy",a(e.value)).attr("clip-path","url(#rectClip)")})}});return i}),define("landing/LandingSectionDistributionView",["require","exports","module","landing/_LandingSection"],function(e,t,n){var r=e("landing/_LandingSection"),i=r.extend({id:"distributionOfFails",className:"b-common clearfix",tpl:"tpl-landing-section-distribution",changeScroll:function(e,t){if(t>400)return this.showAndAnimateElements($(".js-commonel",this.$el)),!0}});return i}),define("landing/LandingSectionResultAnalysisView",["require","exports","module","landing/_LandingSection","d3"],function(e,t,n){var r=e("landing/_LandingSection");e("d3");var i=r.extend({id:"resultAnalysis",className:"b-common clearfix",tpl:"tpl-landing-section-result_analysis",changeScroll:function(e,t){if(t>400){var n=$(".js-d3",this.$el);return this.showAndAnimateElements($(".js-commonel",this.$el)),n.removeClass("g-invisible").addClass(n.data("animation")),this.animateDiagram(),!0}},animateDiagram:function(){var e=[90,90,90,75,60,70,90,25],t=[0,20,40,60,80],n={top:0,right:180,bottom:30,left:50},r=700-n.left-n.right,i=350-n.top-n.bottom,s=d3.scale.linear().domain([0,1]).range([0,r]),o=d3.layout.histogram().bins(s.ticks(20))(e),u=d3.scale.linear().domain([0,120]).range([0,i]),a=d3.svg.axis().scale(s).orient("bottom"),f=d3.select(".js-histogram").append("svg:svg").attr("width","100%").attr("height",i+n.top+n.bottom).attr("viewBox","0 0 700 350").attr("preserveAspectRatio","xMaxYMax meet").append("svg:g").attr("transform","translate("+n.left+","+n.top+")");f.append("clipPath").attr("id","rectClipper").append("rect").attr("x",-50).attr("y",20).attr("width","0").attr("height",i),e.forEach(function(t,n){f.append("rect").attr("x",2*n+1+s(1.1/e.length)*n).attr("y",i-u(90)).attr("width",s(1.1/e.length)).attr("height",u(90)).attr("fill","#a3c644"),f.append("rect").attr("x",2*n+1+s(1.1/e.length)*n).attr("y",80).attr("width",s(1.1/e.length)).attr("height",u(90)).attr("fill","#ffc97d").transition().duration(2500).attr("height",u(90-t)),f.append("line").attr("x1",2*n+2+s(1.1/e.length)*(n+1)).attr("x2",2*n+2+s(1.1/e.length)*(n+1)).attr("y1",50).attr("y2",i+20).attr("class","vlinehist").attr("clip-path","url(#rectClipper)")}),e.forEach(function(e,t){e!=90&&f.append("line").attr("x1",-10).attr("x2",r+150).attr("y1",i-u(e)).attr("y2",i-u(e)).attr("class","hlinehist").attr("clip-path","url(#rectClipper)")}),d3.select("#rectClipper rect").transition().duration(3e3).attr("width","100%"),f.append("line").attr("class","x axis").attr("x1",-50).attr("x2",r+150).attr("y1",i).attr("y2",i),f.append("line").attr("class","y axis").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2",i+80),t.forEach(function(e){f.append("svg:text").text(e).attr("y",-(u(e)-i-18)).attr("x",-10).attr("class","text-y").attr("text-anchor","end")})}});return i}),function(){var e=function(t){var n=new e.Index;return n.pipeline.add(e.trimmer,e.stopWordFilter,e.stemmer),t&&t.call(n,n),n};e.version="0.7.0",e.utils={},e.utils.warn=function(e){return function(t){e.console&&console.warn&&console.warn(t)}}(this),e.utils.asString=function(e){return e===void 0||e===null?"":e.toString()},e.EventEmitter=function(){this.events={}},e.EventEmitter.prototype.addListener=function(){var e=Array.prototype.slice.call(arguments),t=e.pop(),n=e;if(typeof t!="function")throw new TypeError("last argument must be a function");n.forEach(function(e){this.hasHandler(e)||(this.events[e]=[]),this.events[e].push(t)},this)},e.EventEmitter.prototype.removeListener=function(e,t){if(!this.hasHandler(e))return;var n=this.events[e].indexOf(t);this.events[e].splice(n,1),this.events[e].length||delete this.events[e]},e.EventEmitter.prototype.emit=function(e){if(!this.hasHandler(e))return;var t=Array.prototype.slice.call(arguments,1);this.events[e].forEach(function(e){e.apply(undefined,t)})},e.EventEmitter.prototype.hasHandler=function(e){return e in this.events},e.tokenizer=function(t){return!arguments.length||t==null||t==undefined?[]:Array.isArray(t)?t.map(function(t){return e.utils.asString(t).toLowerCase()}):t.toString().trim().toLowerCase().split(e.tokenizer.seperator)},e.tokenizer.seperator=/[\s\-]+/,e.tokenizer.load=function(e){var t=this.registeredFunctions[e];if(!t)throw new Error("Cannot load un-registered function: "+e);return t},e.tokenizer.label="default",e.tokenizer.registeredFunctions={"default":e.tokenizer},e.tokenizer.registerFunction=function(t,n){n in this.registeredFunctions&&e.utils.warn("Overwriting existing tokenizer: "+n),t.label=n,this.registeredFunctions[n]=t},e.Pipeline=function(){this._stack=[]},e.Pipeline.registeredFunctions={},e.Pipeline.registerFunction=function(t,n){n in this.registeredFunctions&&e.utils.warn("Overwriting existing registered function: "+n),t.label=n,e.Pipeline.registeredFunctions[t.label]=t},e.Pipeline.warnIfFunctionNotRegistered=function(t){var n=t.label&&t.label in this.registeredFunctions;n||e.utils.warn("Function is not registered with pipeline. This may cause problems when serialising the index.\n",t)},e.Pipeline.load=function(t){var n=new e.Pipeline;return t.forEach(function(t){var r=e.Pipeline.registeredFunctions[t];if(!r)throw new Error("Cannot load un-registered function: "+t);n.add(r)}),n},e.Pipeline.prototype.add=function(){var t=Array.prototype.slice.call(arguments);t.forEach(function(t){e.Pipeline.warnIfFunctionNotRegistered(t),this._stack.push(t)},this)},e.Pipeline.prototype.after=function(t,n){e.Pipeline.warnIfFunctionNotRegistered(n);var r=this._stack.indexOf(t);if(r==-1)throw new Error("Cannot find existingFn");r+=1,this._stack.splice(r,0,n)},e.Pipeline.prototype.before=function(t,n){e.Pipeline.warnIfFunctionNotRegistered(n);var r=this._stack.indexOf(t);if(r==-1)throw new Error("Cannot find existingFn");this._stack.splice(r,0,n)},e.Pipeline.prototype.remove=function(e){var t=this._stack.indexOf(e);if(t==-1)return;this._stack.splice(t,1)},e.Pipeline.prototype.run=function(e){var t=[],n=e.length,r=this._stack.length;for(var i=0;i<n;i++){var s=e[i];for(var o=0;o<r;o++){s=this._stack[o](s,i,e);if(s===void 0||s==="")break}s!==void 0&&s!==""&&t.push(s)}return t},e.Pipeline.prototype.reset=function(){this._stack=[]},e.Pipeline.prototype.toJSON=function(){return this._stack.map(function(t){return e.Pipeline.warnIfFunctionNotRegistered(t),t.label})},e.Vector=function(){this._magnitude=null,this.list=undefined,this.length=0},e.Vector.Node=function(e,t,n){this.idx=e,this.val=t,this.next=n},e.Vector.prototype.insert=function(t,n){this._magnitude=undefined;var r=this.list;if(!r)return this.list=new e.Vector.Node(t,n,r),this.length++;if(t<r.idx)return this.list=new e.Vector.Node(t,n,r),this.length++;var i=r,s=r.next;while(s!=undefined){if(t<s.idx)return i.next=new e.Vector.Node(t,n,s),this.length++;i=s,s=s.next}return i.next=new e.Vector.Node(t,n,s),this.length++},e.Vector.prototype.magnitude=function(){if(this._magnitude)return this._magnitude;var e=this.list,t=0,n;while(e)n=e.val,t+=n*n,e=e.next;return this._magnitude=Math.sqrt(t)},e.Vector.prototype.dot=function(e){var t=this.list,n=e.list,r=0;while(t&&n)t.idx<n.idx?t=t.next:t.idx>n.idx?n=n.next:(r+=t.val*n.val,t=t.next,n=n.next);return r},e.Vector.prototype.similarity=function(e){return this.dot(e)/(this.magnitude()*e.magnitude())},e.SortedSet=function(){this.length=0,this.elements=[]},e.SortedSet.load=function(e){var t=new this;return t.elements=e,t.length=e.length,t},e.SortedSet.prototype.add=function(){var e,t;for(e=0;e<arguments.length;e++){t=arguments[e];if(~this.indexOf(t))continue;this.elements.splice(this.locationFor(t),0,t)}this.length=this.elements.length},e.SortedSet.prototype.toArray=function(){return this.elements.slice()},e.SortedSet.prototype.map=function(e,t){return this.elements.map(e,t)},e.SortedSet.prototype.forEach=function(e,t){return this.elements.forEach(e,t)},e.SortedSet.prototype.indexOf=function(e){var t=0,n=this.elements.length,r=n-t,i=t+Math.floor(r/2),s=this.elements[i];while(r>1){if(s===e)return i;s<e&&(t=i),s>e&&(n=i),r=n-t,i=t+Math.floor(r/2),s=this.elements[i]}return s===e?i:-1},e.SortedSet.prototype.locationFor=function(e){var t=0,n=this.elements.length,r=n-t,i=t+Math.floor(r/2),s=this.elements[i];while(r>1)s<e&&(t=i),s>e&&(n=i),r=n-t,i=t+Math.floor(r/2),s=this.elements[i];if(s>e)return i;if(s<e)return i+1},e.SortedSet.prototype.intersect=function(t){var n=new e.SortedSet,r=0,i=0,s=this.length,o=t.length,u=this.elements,a=t.elements;for(;;){if(r>s-1||i>o-1)break;if(u[r]===a[i]){n.add(u[r]),r++,i++;continue}if(u[r]<a[i]){r++;continue}if(u[r]>a[i]){i++;continue}}return n},e.SortedSet.prototype.clone=function(){var t=new e.SortedSet;return t.elements=this.toArray(),t.length=t.elements.length,t},e.SortedSet.prototype.union=function(e){var t,n,r;this.length>=e.length?(t=this,n=e):(t=e,n=this),r=t.clone();for(var i=0,s=n.toArray();i<s.length;i++)r.add(s[i]);return r},e.SortedSet.prototype.toJSON=function(){return this.toArray()},e.Index=function(){this._fields=[],this._ref="id",this.pipeline=new e.Pipeline,this.documentStore=new e.Store,this.tokenStore=new e.TokenStore,this.corpusTokens=new e.SortedSet,this.eventEmitter=new e.EventEmitter,this.tokenizerFn=e.tokenizer,this._idfCache={},this.on("add","remove","update",function(){this._idfCache={}}.bind(this))},e.Index.prototype.on=function(){var e=Array.prototype.slice.call(arguments);return this.eventEmitter.addListener.apply(this.eventEmitter,e)},e.Index.prototype.off=function(e,t){return this.eventEmitter.removeListener(e,t)},e.Index.load=function(t){t.version!==e.version&&e.utils.warn("version mismatch: current "+e.version+" importing "+t.version);var n=new this;return n._fields=t.fields,n._ref=t.ref,n.tokenizer=e.tokenizer.load(t.tokenizer),n.documentStore=e.Store.load(t.documentStore),n.tokenStore=e.TokenStore.load(t.tokenStore),n.corpusTokens=e.SortedSet.load(t.corpusTokens),n.pipeline=e.Pipeline.load(t.pipeline),n},e.Index.prototype.field=function(e,t){var t=t||{},n={name:e,boost:t.boost||1};return this._fields.push(n),this},e.Index.prototype.ref=function(e){return this._ref=e,this},e.Index.prototype.tokenizer=function(t){var n=t.label&&t.label in e.tokenizer.registeredFunctions;return n||e.utils.warn("Function is not a registered tokenizer. This may cause problems when serialising the index"),this.tokenizerFn=t,this},e.Index.prototype.add=function(t,n){var r={},i=new e.SortedSet,s=t[this._ref],n=n===undefined?!0:n;this._fields.forEach(function(e){var n=this.pipeline.run(this.tokenizerFn(t[e.name]));r[e.name]=n;for(var s=0;s<n.length;s++){var o=n[s];i.add(o),this.corpusTokens.add(o)}},this),this.documentStore.set(s,i);for(var o=0;o<i.length;o++){var u=i.elements[o],a=0;for(var f=0;f<this._fields.length;f++){var l=this._fields[f],c=r[l.name],h=c.length;if(!h)continue;var p=0;for(var d=0;d<h;d++)c[d]===u&&p++;a+=p/h*l.boost}this.tokenStore.add(u,{ref:s,tf:a})}n&&this.eventEmitter.emit("add",t,this)},e.Index.prototype.remove=function(e,t){var n=e[this._ref],t=t===undefined?!0:t;if(!this.documentStore.has(n))return;var r=this.documentStore.get(n);this.documentStore.remove(n),r.forEach(function(e){this.tokenStore.remove(e,n)},this),t&&this.eventEmitter.emit("remove",e,this)},e.Index.prototype.update=function(e,t){var t=t===undefined?!0:t;this.remove(e,!1),this.add(e,!1),t&&this.eventEmitter.emit("update",e,this)},e.Index.prototype.idf=function(e){var t="@"+e;if(Object.prototype.hasOwnProperty.call(this._idfCache,t))return this._idfCache[t];var n=this.tokenStore.count(e),r=1;return n>0&&(r=1+Math.log(this.documentStore.length/n)),this._idfCache[t]=r},e.Index.prototype.search=function(t){var n=this.pipeline.run(this.tokenizerFn(t)),r=new e.Vector,i=[],s=this._fields.reduce(function(e,t){return e+t.boost},0),o=n.some(function(e){return this.tokenStore.has(e)},this);if(!o)return[];n.forEach(function(t,n,o){var u=1/o.length*this._fields.length*s,a=this,f=this.tokenStore.expand(t).reduce(function(n,i){var s=a.corpusTokens.indexOf(i),o=a.idf(i),f=1,l=new e.SortedSet;if(i!==t){var c=Math.max(3,i.length-t.length);f=1/Math.log(c)}s>-1&&r.insert(s,u*o*f);var h=a.tokenStore.get(i),p=Object.keys(h),d=p.length;for(var v=0;v<d;v++)l.add(h[p[v]].ref);return n.union(l)},new e.SortedSet);i.push(f)},this);var u=i.reduce(function(e,t){return e.intersect(t)});return u.map(function(e){return{ref:e,score:r.similarity(this.documentVector(e))}},this).sort(function(e,t){return t.score-e.score})},e.Index.prototype.documentVector=function(t){var n=this.documentStore.get(t),r=n.length,i=new e.Vector;for(var s=0;s<r;s++){var o=n.elements[s],u=this.tokenStore.get(o)[t].tf,a=this.idf(o);i.insert(this.corpusTokens.indexOf(o),u*a)}return i},e.Index.prototype.toJSON=function(){return{version:e.version,fields:this._fields,ref:this._ref,tokenizer:this.tokenizerFn.label,documentStore:this.documentStore.toJSON(),tokenStore:this.tokenStore.toJSON(),corpusTokens:this.corpusTokens.toJSON(),pipeline:this.pipeline.toJSON()}},e.Index.prototype.use=function(e){var t=Array.prototype.slice.call(arguments,1);t.unshift(this),e.apply(this,t)},e.Store=function(){this.store={},this.length=0},e.Store.load=function(t){var n=new this;return n.length=t.length,n.store=Object.keys(t.store).reduce(function(n,r){return n[r]=e.SortedSet.load(t.store[r]),n},{}),n},e.Store.prototype.set=function(e,t){this.has(e)||this.length++,this.store[e]=t},e.Store.prototype.get=function(e){return this.store[e]},e.Store.prototype.has=function(e){return e in this.store},e.Store.prototype.remove=function(e){if(!this.has(e))return;delete this.store[e],this.length--},e.Store.prototype.toJSON=function(){return{store:this.store,length:this.length}},e.stemmer=function(){var e={ational:"ate",tional:"tion",enci:"ence",anci:"ance",izer:"ize",bli:"ble",alli:"al",entli:"ent",eli:"e",ousli:"ous",ization:"ize",ation:"ate",ator:"ate",alism:"al",iveness:"ive",fulness:"ful",ousness:"ous",aliti:"al",iviti:"ive",biliti:"ble",logi:"log"},t={icate:"ic",ative:"",alize:"al",iciti:"ic",ical:"ic",ful:"",ness:""},n="[^aeiou]",r="[aeiouy]",i=n+"[^aeiouy]*",s=r+"[aeiou]*",o="^("+i+")?"+s+i,u="^("+i+")?"+s+i+"("+s+")?$",a="^("+i+")?"+s+i+s+i,f="^("+i+")?"+r,l=new RegExp(o),c=new RegExp(a),h=new RegExp(u),p=new RegExp(f),d=/^(.+?)(ss|i)es$/,v=/^(.+?)([^s])s$/,m=/^(.+?)eed$/,g=/^(.+?)(ed|ing)$/,y=/.$/,b=/(at|bl|iz)$/,w=new RegExp("([^aeiouylsz])\\1$"),E=new RegExp("^"+i+r+"[^aeiouwxy]$"),S=/^(.+?[^aeiou])y$/,x=/^(.+?)(ational|tional|enci|anci|izer|bli|alli|entli|eli|ousli|ization|ation|ator|alism|iveness|fulness|ousness|aliti|iviti|biliti|logi)$/,T=/^(.+?)(icate|ative|alize|iciti|ical|ful|ness)$/,N=/^(.+?)(al|ance|ence|er|ic|able|ible|ant|ement|ment|ent|ou|ism|ate|iti|ous|ive|ize)$/,C=/^(.+?)(s|t)(ion)$/,k=/^(.+?)e$/,L=/ll$/,A=new RegExp("^"+i+r+"[^aeiouwxy]$"),O=function(r){var i,s,o,u,a,f,O;if(r.length<3)return r;o=r.substr(0,1),o=="y"&&(r=o.toUpperCase()+r.substr(1)),u=d,a=v,u.test(r)?r=r.replace(u,"$1$2"):a.test(r)&&(r=r.replace(a,"$1$2")),u=m,a=g;if(u.test(r)){var M=u.exec(r);u=l,u.test(M[1])&&(u=y,r=r.replace(u,""))}else if(a.test(r)){var M=a.exec(r);i=M[1],a=p,a.test(i)&&(r=i,a=b,f=w,O=E,a.test(r)?r+="e":f.test(r)?(u=y,r=r.replace(u,"")):O.test(r)&&(r+="e"))}u=S;if(u.test(r)){var M=u.exec(r);i=M[1],r=i+"i"}u=x;if(u.test(r)){var M=u.exec(r);i=M[1],s=M[2],u=l,u.test(i)&&(r=i+e[s])}u=T;if(u.test(r)){var M=u.exec(r);i=M[1],s=M[2],u=l,u.test(i)&&(r=i+t[s])}u=N,a=C;if(u.test(r)){var M=u.exec(r);i=M[1],u=c,u.test(i)&&(r=i)}else if(a.test(r)){var M=a.exec(r);i=M[1]+M[2],a=c,a.test(i)&&(r=i)}u=k;if(u.test(r)){var M=u.exec(r);i=M[1],u=c,a=h,f=A;if(u.test(i)||a.test(i)&&!f.test(i))r=i}return u=L,a=c,u.test(r)&&a.test(r)&&(u=y,r=r.replace(u,"")),o=="y"&&(r=o.toLowerCase()+r.substr(1)),r};return O}(),e.Pipeline.registerFunction(e.stemmer,"stemmer"),e.generateStopWordFilter=function(e){var t=e.reduce(function(e,t){return e[t]=t,e},{});return function(e){if(e&&t[e]!==e)return e}},e.stopWordFilter=e.generateStopWordFilter(["a","able","about","across","after","all","almost","also","am","among","an","and","any","are","as","at","be","because","been","but","by","can","cannot","could","dear","did","do","does","either","else","ever","every","for","from","get","got","had","has","have","he","her","hers","him","his","how","however","i","if","in","into","is","it","its","just","least","let","like","likely","may","me","might","most","must","my","neither","no","nor","not","of","off","often","on","only","or","other","our","own","rather","said","say","says","she","should","since","so","some","than","that","the","their","them","then","there","these","they","this","tis","to","too","twas","us","wants","was","we","were","what","when","where","which","while","who","whom","why","will","with","would","yet","you","your"]),e.Pipeline.registerFunction(e.stopWordFilter,"stopWordFilter"),e.trimmer=function(e){return e.replace(/^\W+/,"").replace(/\W+$/,"")},e.Pipeline.registerFunction(e.trimmer,"trimmer"),e.TokenStore=function(){this.root={docs:{}},this.length=0},e.TokenStore.load=function(e){var t=new this;return t.root=e.root,t.length=e.length,t},e.TokenStore.prototype.add=function(e,t,n){var n=n||this.root,r=e.charAt(0),i=e.slice(1);r in n||(n[r]={docs:{}});if(i.length===0){n[r].docs[t.ref]=t,this.length+=1;return}return this.add(i,t,n[r])},e.TokenStore.prototype.has=function(e){if(!e)return!1;var t=this.root;for(var n=0;n<e.length;n++){if(!t[e.charAt(n)])return!1;t=t[e.charAt(n)]}return!0},e.TokenStore.prototype.getNode=function(e){if(!e)return{};var t=this.root;for(var n=0;n<e.length;n++){if(!t[e.charAt(n)])return{};t=t[e.charAt(n)]}return t},e.TokenStore.prototype.get=function(e,t){return this.getNode(e,t).docs||{}},e.TokenStore.prototype.count=function(e,t){return Object.keys(this.get(e,t)).length},e.TokenStore.prototype.remove=function(e,t){if(!e)return;var n=this.root;for(var r=0;r<e.length;r++){if(!(e.charAt(r)in n))return;n=n[e.charAt(r)]}delete n.docs[t]},e.TokenStore.prototype.expand=function(e,t){var n=this.getNode(e),r=n.docs||{},t=t||[];return Object.keys(r).length&&t.push(e),Object.keys(n).forEach(function(n){if(n==="docs")return;t.concat(this.expand(e+n,t))},this),t},e.TokenStore.prototype.toJSON=function(){return{root:this.root,length:this.length}},function(e,t){typeof define=="function"&&define.amd?define("lunr",t):typeof exports=="object"?module.exports=t():e.lunr=t()}(this,function(){return e})}(),function(e){typeof define=="function"&&define.amd?define("popup",["jquery"],e):typeof exports=="object"?e(require("jquery")):e(window.jQuery||window.Zepto)}(function(e){var t="Close",n="BeforeClose",r="AfterClose",i="BeforeAppend",s="MarkupParse",o="Open",u="Change",a="mfp",f="."+a,l="mfp-ready",c="mfp-removing",h="mfp-prevent-close",p,d=function(){},v=!!window.jQuery,m,g=e(window),y,b,w,E,S=function(e,t){p.ev.on(a+e+f,t)},x=function(t,n,r,i){var s=document.createElement("div");return s.className="mfp-"+t,r&&(s.innerHTML=r),i?n&&n.appendChild(s):(s=e(s),n&&s.appendTo(n)),s},T=function(t,n){p.ev.triggerHandler(a+t,n),p.st.callbacks&&(t=t.charAt(0).toLowerCase()+t.slice(1),p.st.callbacks[t]&&p.st.callbacks[t].apply(p,e.isArray(n)?n:[n]))},N=function(t){if(t!==E||!p.currTemplate.closeBtn)p.currTemplate.closeBtn=e(p.st.closeMarkup.replace("%title%",p.st.tClose)),E=t;return p.currTemplate.closeBtn},C=function(){e.magnificPopup.instance||(p=new d,p.init(),e.magnificPopup.instance=p)},k=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(e.transition!==undefined)return!0;while(t.length)if(t.pop()+"Transition"in e)return!0;return!1};d.prototype={constructor:d,init:function(){var t=navigator.appVersion;p.isIE7=t.indexOf("MSIE 7.")!==-1,p.isIE8=t.indexOf("MSIE 8.")!==-1,p.isLowIE=p.isIE7||p.isIE8,p.isAndroid=/android/gi.test(t),p.isIOS=/iphone|ipad|ipod/gi.test(t),p.supportsTransition=k(),p.probablyMobile=p.isAndroid||p.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),y=e(document),p.popupsCache={}},open:function(t){var n;if(t.isObj===!1){p.items=t.items.toArray(),p.index=0;var r=t.items,i;for(n=0;n<r.length;n++){i=r[n],i.parsed&&(i=i.el[0]);if(i===t.el[0]){p.index=n;break}}}else p.items=e.isArray(t.items)?t.items:[t.items],p.index=t.index||0;if(p.isOpen){p.updateItemHTML();return}p.types=[],w="",t.mainEl&&t.mainEl.length?p.ev=t.mainEl.eq(0):p.ev=y,t.key?(p.popupsCache[t.key]||(p.popupsCache[t.key]={}),p.currTemplate=p.popupsCache[t.key]):p.currTemplate={},p.st=e.extend(!0,{},e.magnificPopup.defaults,t),p.fixedContentPos=p.st.fixedContentPos==="auto"?!p.probablyMobile:p.st.fixedContentPos,p.st.modal&&(p.st.closeOnContentClick=!1,p.st.closeOnBgClick=!1,p.st.showCloseBtn=!1,p.st.enableEscapeKey=!1),p.bgOverlay||(p.bgOverlay=x("bg").on("click"+f,function(){p.close()}),p.wrap=x("wrap").attr("tabindex",-1).on("click"+f,function(e){p._checkIfClose(e.target)&&p.close()}),p.container=x("container",p.wrap)),p.contentContainer=x("content"),p.st.preloader&&(p.preloader=x("preloader",p.container,p.st.tLoading));var u=e.magnificPopup.modules;for(n=0;n<u.length;n++){var a=u[n];a=a.charAt(0).toUpperCase()+a.slice(1),p["init"+a].call(p)}T("BeforeOpen"),p.st.showCloseBtn&&(p.st.closeBtnInside?(S(s,function(e,t,n,r){n.close_replaceWith=N(r.type)}),w+=" mfp-close-btn-in"):p.wrap.append(N())),p.st.alignTop&&(w+=" mfp-align-top"),p.fixedContentPos?p.wrap.css({overflow:p.st.overflowY,overflowX:"hidden",overflowY:p.st.overflowY}):p.wrap.css({top:g.scrollTop(),position:"absolute"}),(p.st.fixedBgPos===!1||p.st.fixedBgPos==="auto"&&!p.fixedContentPos)&&p.bgOverlay.css({height:y.height(),position:"absolute"}),p.st.enableEscapeKey&&y.on("keyup"+f,function(e){e.keyCode===27&&p.close()}),g.on("resize"+f,function(){p.updateSize()}),p.st.closeOnContentClick||(w+=" mfp-auto-cursor"),w&&p.wrap.addClass(w);var c=p.wH=g.height(),h={};if(p.fixedContentPos&&p._hasScrollBar(c)){var d=p._getScrollbarSize();d&&(h.marginRight=d)}p.fixedContentPos&&(p.isIE7?e("body, html").css("overflow","hidden"):h.overflow="hidden");var v=p.st.mainClass;return p.isIE7&&(v+=" mfp-ie7"),v&&p._addClassToMFP(v),p.updateItemHTML(),T("BuildControls"),e("html").css(h),p.bgOverlay.add(p.wrap).prependTo(p.st.prependTo||e(document.body)),p._lastFocusedEl=document.activeElement,setTimeout(function(){p.content?(p._addClassToMFP(l),p._setFocus()):p.bgOverlay.addClass(l),y.on("focusin"+f,p._onFocusIn)},16),p.isOpen=!0,p.updateSize(c),T(o),t},close:function(){if(!p.isOpen)return;T(n),p.isOpen=!1,p.st.removalDelay&&!p.isLowIE&&p.supportsTransition?(p._addClassToMFP(c),setTimeout(function(){p._close()},p.st.removalDelay)):p._close()},_close:function(){T(t);var n=c+" "+l+" ";p.bgOverlay.detach(),p.wrap.detach(),p.container.empty(),p.st.mainClass&&(n+=p.st.mainClass+" "),p._removeClassFromMFP(n);if(p.fixedContentPos){var i={marginRight:""};p.isIE7?e("body, html").css("overflow",""):i.overflow="",e("html").css(i)}y.off("keyup"+f+" focusin"+f),p.ev.off(f),p.wrap.attr("class","mfp-wrap").removeAttr("style"),p.bgOverlay.attr("class","mfp-bg"),p.container.attr("class","mfp-container"),p.st.showCloseBtn&&(!p.st.closeBtnInside||p.currTemplate[p.currItem.type]===!0)&&p.currTemplate.closeBtn&&p.currTemplate.closeBtn.detach(),p._lastFocusedEl&&e(p._lastFocusedEl).focus(),p.currItem=null,p.content=null,p.currTemplate=null,p.prevHeight=0,T(r)},updateSize:function(e){if(p.isIOS){var t=document.documentElement.clientWidth/window.innerWidth,n=window.innerHeight*t;p.wrap.css("height",n),p.wH=n}else p.wH=e||g.height();p.fixedContentPos||p.wrap.css("height",p.wH),T("Resize")},updateItemHTML:function(){var t=p.items[p.index];p.contentContainer.detach(),p.content&&p.content.detach(),t.parsed||(t=p.parseEl(p.index));var n=t.type;T("BeforeChange",[p.currItem?p.currItem.type:"",n]),p.currItem=t;if(!p.currTemplate[n]){var r=p.st[n]?p.st[n].markup:!1;T("FirstMarkupParse",r),r?p.currTemplate[n]=e(r):p.currTemplate[n]=!0}b&&b!==t.type&&p.container.removeClass("mfp-"+b+"-holder");var i=p["get"+n.charAt(0).toUpperCase()+n.slice(1)](t,p.currTemplate[n]);p.appendContent(i,n),t.preloaded=!0,T(u,t),b=t.type,p.container.prepend(p.contentContainer),T("AfterChange")},appendContent:function(e,t){p.content=e,e?p.st.showCloseBtn&&p.st.closeBtnInside&&p.currTemplate[t]===!0?p.content.find(".mfp-close").length||p.content.append(N()):p.content=e:p.content="",T(i),p.container.addClass("mfp-"+t+"-holder"),p.contentContainer.append(p.content)},parseEl:function(t){var n=p.items[t],r;n.tagName?n={el:e(n)}:(r=n.type,n={data:n,src:n.src});if(n.el){var i=p.types;for(var s=0;s<i.length;s++)if(n.el.hasClass("mfp-"+i[s])){r=i[s];break}n.src=n.el.attr("data-mfp-src"),n.src||(n.src=n.el.attr("href"))}return n.type=r||p.st.type||"inline",n.index=t,n.parsed=!0,p.items[t]=n,T("ElementParse",n),p.items[t]},addGroup:function(e,t){var n=function(n){n.mfpEl=this,p._openClick(n,e,t)};t||(t={});var r="click.magnificPopup";t.mainEl=e,t.items?(t.isObj=!0,e.off(r).on(r,n)):(t.isObj=!1,t.delegate?e.off(r).on(r,t.delegate,n):(t.items=e,e.off(r).on(r,n)))},_openClick:function(t,n,r){var i=r.midClick!==undefined?r.midClick:e.magnificPopup.defaults.midClick;if(!i&&(t.which===2||t.ctrlKey||t.metaKey||t.altKey||t.shiftKey))return;var s=r.disableOn!==undefined?r.disableOn:e.magnificPopup.defaults.disableOn;if(s)if(e.isFunction(s)){if(!s.call(p))return!0}else if(g.width()<s)return!0;t.type&&(t.preventDefault(),p.isOpen&&t.stopPropagation()),r.el=e(t.mfpEl),r.delegate&&(r.items=n.find(r.delegate)),p.open(r)},updateStatus:function(e,t){if(p.preloader){m!==e&&p.container.removeClass("mfp-s-"+m),!t&&e==="loading"&&(t=p.st.tLoading);var n={status:e,text:t};T("UpdateStatus",n),e=n.status,t=n.text,p.preloader.html(t),p.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),p.container.addClass("mfp-s-"+e),m=e}},_checkIfClose:function(t){if(e(t).hasClass(h))return;var n=p.st.closeOnContentClick,r=p.st.closeOnBgClick;if(n&&r)return!0;if(!p.content||e(t).hasClass("mfp-close")||p.preloader&&t===p.preloader[0])return!0;if(t!==p.content[0]&&!e.contains(p.content[0],t)){if(r&&e.contains(document,t))return!0}else if(n)return!0;return!1},_addClassToMFP:function(e){p.bgOverlay.addClass(e),p.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),p.wrap.removeClass(e)},_hasScrollBar:function(e){return(p.isIE7?y.height():document.body.scrollHeight)>(e||g.height())},_setFocus:function(){(p.st.focus?p.content.find(p.st.focus).eq(0):p.wrap).focus()},_onFocusIn:function(t){if(t.target!==p.wrap[0]&&!e.contains(p.wrap[0],t.target))return p._setFocus(),!1},_parseMarkup:function(t,n,r){var i;r.data&&(n=e.extend(r.data,n)),T(s,[t,n,r]),e.each(n,function(e,n){if(n===undefined||n===!1)return!0;i=e.split("_");if(i.length>1){var r=t.find(f+"-"+i[0]);if(r.length>0){var s=i[1];s==="replaceWith"?r[0]!==n[0]&&r.replaceWith(n):s==="img"?r.is("img")?r.attr("src",n):r.replaceWith('<img src="'+n+'" class="'+r.attr("class")+'" />'):r.attr(i[1],n)}}else t.find(f+"-"+e).html(n)})},_getScrollbarSize:function(){if(p.scrollbarSize===undefined){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),p.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return p.scrollbarSize}},e.magnificPopup={instance:null,proto:d.prototype,modules:[],open:function(t,n){return C(),t?t=e.extend(!0,{},t):t={},t.isObj=!0,t.index=n||0,this.instance.open(t)},close:function(){return e.magnificPopup.instance&&e.magnificPopup.instance.close()},registerModule:function(t,n){n.options&&(e.magnificPopup.defaults[t]=n.options),e.extend(this.proto,n.proto),this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading..."}},e.fn.magnificPopup=function(t){C();var n=e(this);if(typeof t=="string")if(t==="open"){var r,i=v?n.data("magnificPopup"):n[0].magnificPopup,s=parseInt(arguments[1],10)||0;i.items?r=i.items[s]:(r=n,i.delegate&&(r=r.find(i.delegate)),r=r.eq(s)),p._openClick({mfpEl:r},n,i)}else p.isOpen&&p[t].apply(p,Array.prototype.slice.call(arguments,1));else t=e.extend(!0,{},t),v?n.data("magnificPopup",t):n[0].magnificPopup=t,p.addGroup(n,t);return n};var L="inline",A,O,M,_=function(){M&&(O.after(M.addClass(A)).detach(),M=null)};e.magnificPopup.registerModule(L,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){p.types.push(L),S(t+"."+L,function(){_()})},getInline:function(t,n){_();if(t.src){var r=p.st.inline,i=e(t.src);if(i.length){var s=i[0].parentNode;s&&s.tagName&&(O||(A=r.hiddenClass,O=x(A),A="mfp-"+A),M=i.after(O).detach().removeClass(A)),p.updateStatus("ready")}else p.updateStatus("error",r.tNotFound),i=e("<div>");return t.inlineElement=i,i}return p.updateStatus("ready"),p._parseMarkup(n,{},t),n}}});var D="ajax",P,H=function(){P&&e(document.body).removeClass(P)},B=function(){H(),p.req&&p.req.abort()};e.magnificPopup.registerModule(D,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){p.types.push(D),P=p.st.ajax.cursor,S(t+"."+D,B),S("BeforeChange."+D,B)},getAjax:function(t){P&&e(document.body).addClass(P),p.updateStatus("loading");var n=e.extend({url:t.src,success:function(n,r,i){var s={data:n,xhr:i};T("ParseAjax",s),p.appendContent(e(s.data),D),t.finished=!0,H(),p._setFocus(),setTimeout(function(){p.wrap.addClass(l)},16),p.updateStatus("ready"),T("AjaxContentAdded")},error:function(){H(),t.finished=t.loadError=!0,p.updateStatus("error",p.st.ajax.tError.replace("%url%",t.src))}},p.st.ajax.settings);return p.req=e.ajax(n),""}}});var j,F=function(t){if(t.data&&t.data.title!==undefined)return t.data.title;var n=p.st.image.titleSrc;if(n){if(e.isFunction(n))return n.call(p,t);if(t.el)return t.el.attr(n)||""}return""};e.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var n=p.st.image,r=".image";p.types.push("image"),S(o+r,function(){p.currItem.type==="image"&&n.cursor&&e(document.body).addClass(n.cursor)}),S(t+r,function(){n.cursor&&e(document.body).removeClass(n.cursor),g.off("resize"+f)}),S("Resize"+r,p.resizeImage),p.isLowIE&&S("AfterChange",p.resizeImage)},resizeImage:function(){var e=p.currItem;if(!e||!e.img)return;if(p.st.image.verticalFit){var t=0;p.isLowIE&&(t=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",p.wH-t)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,j&&clearInterval(j),e.isCheckingImgSize=!1,T("ImageHasSize",e),e.imgHidden&&(p.content&&p.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var t=0,n=e.img[0],r=function(i){j&&clearInterval(j),j=setInterval(function(){if(n.naturalWidth>0){p._onImageHasSize(e);return}t>200&&clearInterval(j),t++,t===3?r(10):t===40?r(50):t===100&&r(500)},i)};r(1)},getImage:function(t,n){var r=0,i=function(){t&&(t.img[0].complete?(t.img.off(".mfploader"),t===p.currItem&&(p._onImageHasSize(t),p.updateStatus("ready")),t.hasSize=!0,t.loaded=!0,T("ImageLoadComplete")):(r++,r<200?setTimeout(i,100):s()))},s=function(){t&&(t.img.off(".mfploader"),t===p.currItem&&(p._onImageHasSize(t),p.updateStatus("error",o.tError.replace("%url%",t.src))),t.hasSize=!0,t.loaded=!0,t.loadError=!0)},o=p.st.image,u=n.find(".mfp-img");if(u.length){var a=document.createElement("img");a.className="mfp-img",t.el&&t.el.find("img").length&&(a.alt=t.el.find("img").attr("alt")),t.img=e(a).on("load.mfploader",i).on("error.mfploader",s),a.src=t.src,u.is("img")&&(t.img=t.img.clone()),a=t.img[0],a.naturalWidth>0?t.hasSize=!0:a.width||(t.hasSize=!1)}return p._parseMarkup(n,{title:F(t),img_replaceWith:t.img},t),p.resizeImage(),t.hasSize?(j&&clearInterval(j),t.loadError?(n.addClass("mfp-loading"),p.updateStatus("error",o.tError.replace("%url%",t.src))):(n.removeClass("mfp-loading"),p.updateStatus("ready")),n):(p.updateStatus("loading"),t.loading=!0,t.hasSize||(t.imgHidden=!0,n.addClass("mfp-loading"),p.findImageSize(t)),n)}}});var I,q=function(){return I===undefined&&(I=document.createElement("p").style.MozTransform!==undefined),I};e.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e=p.st.zoom,r=".zoom",i;if(!e.enabled||!p.supportsTransition)return;var s=e.duration,o=function(t){var n=t.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),r="all "+e.duration/1e3+"s "+e.easing,i={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},s="transition";return i["-webkit-"+s]=i["-moz-"+s]=i["-o-"+s]=i[s]=r,n.css(i),n},u=function(){p.content.css("visibility","visible")},a,f;S("BuildControls"+r,function(){if(p._allowZoom()){clearTimeout(a),p.content.css("visibility","hidden"),i=p._getItemToZoom();if(!i){u();return}f=o(i),f.css(p._getOffset()),p.wrap.append(f),a=setTimeout(function(){f.css(p._getOffset(!0)),a=setTimeout(function(){u(),setTimeout(function(){f.remove(),i=f=null,T("ZoomAnimationEnded")},16)},s)},16)}}),S(n+r,function(){if(p._allowZoom()){clearTimeout(a),p.st.removalDelay=s;if(!i){i=p._getItemToZoom();if(!i)return;f=o(i)}f.css(p._getOffset(!0)),p.wrap.append(f),p.content.css("visibility","hidden"),setTimeout(function(){f.css(p._getOffset())},16)}}),S(t+r,function(){p._allowZoom()&&(u(),f&&f.remove(),i=null)})},_allowZoom:function(){return p.currItem.type==="image"},_getItemToZoom:function(){return p.currItem.hasSize?p.currItem.img:!1},_getOffset:function(t){var n;t?n=p.currItem.img:n=p.st.zoom.opener(p.currItem.el||p.currItem);var r=n.offset(),i=parseInt(n.css("padding-top"),10),s=parseInt(n.css("padding-bottom"),10);r.top-=e(window).scrollTop()-i;var o={width:n.width(),height:(v?n.innerHeight():n[0].offsetHeight)-s-i};return q()?o["-moz-transform"]=o.transform="translate("+r.left+"px,"+r.top+"px)":(o.left=r.left,o.top=r.top),o}}});var R="iframe",U="//about:blank",z=function(e){if(p.currTemplate[R]){var t=p.currTemplate[R].find("iframe");t.length&&(e||(t[0].src=U),p.isIE8&&t.css("display",e?"block":"none"))}};e.magnificPopup.registerModule(R,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//maps.google.",src:"%id%&output=embed"}}},proto:{initIframe:function(){p.types.push(R),S("BeforeChange",function(e,t,n){t!==n&&(t===R?z():n===R&&z(!0))}),S(t+"."+R,function(){z()})},getIframe:function(t,n){var r=t.src,i=p.st.iframe;e.each(i.patterns,function(){if(r.indexOf(this.index)>-1)return this.id&&(typeof this.id=="string"?r=r.substr(r.lastIndexOf(this.id)+this.id.length,r.length):r=this.id.call(this,r)),r=this.src.replace("%id%",r),!1});var s={};return i.srcAction&&(s[i.srcAction]=r),p._parseMarkup(n,s,t),p.updateStatus("ready"),n}}});var W=function(e){var t=p.items.length;return e>t-1?e-t:e<0?t+e:e},X=function(e,t,n){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,n)};e.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var n=p.st.gallery,r=".mfp-gallery",i=Boolean(e.fn.mfpFastClick);p.direction=!0;if(!n||!n.enabled)return!1;w+=" mfp-gallery",S(o+r,function(){n.navigateByImgClick&&p.wrap.on("click"+r,".mfp-img",function(){if(p.items.length>1)return p.next(),!1}),y.on("keydown"+r,function(e){e.keyCode===37?p.prev():e.keyCode===39&&p.next()})}),S("UpdateStatus"+r,function(e,t){t.text&&(t.text=X(t.text,p.currItem.index,p.items.length))}),S(s+r,function(e,t,r,i){var s=p.items.length;r.counter=s>1?X(n.tCounter,i.index,s):""}),S("BuildControls"+r,function(){if(p.items.length>1&&n.arrows&&!p.arrowLeft){var t=n.arrowMarkup,r=p.arrowLeft=e(t.replace(/%title%/gi,n.tPrev).replace(/%dir%/gi,"left")).addClass(h),s=p.arrowRight=e(t.replace(/%title%/gi,n.tNext).replace(/%dir%/gi,"right")).addClass(h),o=i?"mfpFastClick":"click";r[o](function(){p.prev()}),s[o](function(){p.next()}),p.isIE7&&(x("b",r[0],!1,!0),x("a",r[0],!1,!0),x("b",s[0],!1,!0),x("a",s[0],!1,!0)),p.container.append(r.add(s))}}),S(u+r,function(){p._preloadTimeout&&clearTimeout(p._preloadTimeout),p._preloadTimeout=setTimeout(function(){p.preloadNearbyImages(),p._preloadTimeout=null},16)}),S(t+r,function(){y.off(r),p.wrap.off("click"+r),p.arrowLeft&&i&&p.arrowLeft.add(p.arrowRight).destroyMfpFastClick(),p.arrowRight=p.arrowLeft=null})},next:function(){p.direction=!0,p.index=W(p.index+1),p.updateItemHTML()},prev:function(){p.direction=!1,p.index=W(p.index-1),p.updateItemHTML()},goTo:function(e){p.direction=e>=p.index,p.index=e,p.updateItemHTML()},preloadNearbyImages:function(){var e=p.st.gallery.preload,t=Math.min(e[0],p.items.length),n=Math.min(e[1],p.items.length),r;for(r=1;r<=(p.direction?n:t);r++)p._preloadItem(p.index+r);for(r=1;r<=(p.direction?t:n);r++)p._preloadItem(p.index-r)},_preloadItem:function(t){t=W(t);if(p.items[t].preloaded)return;var n=p.items[t];n.parsed||(n=p.parseEl(t)),T("LazyLoad",n),n.type==="image"&&(n.img=e('<img class="mfp-img" />').on("load.mfploader",function(){n.hasSize=!0}).on("error.mfploader",function(){n.hasSize=!0,n.loadError=!0,T("LazyLoadError",n)}).attr("src",n.src)),n.preloaded=!0}}});var V="retina";e.magnificPopup.registerModule(V,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var e=p.st.retina,t=e.ratio;t=isNaN(t)?t():t,t>1&&(S("ImageHasSize."+V,function(e,n){n.img.css({"max-width":n.img[0].naturalWidth/t,width:"100%"})}),S("ElementParse."+V,function(n,r){r.src=e.replaceSrc(r,t)}))}}}}),function(){var t=1e3,n="ontouchstart"in window,r=function(){g.off("touchmove"+s+" touchend"+s)},i="mfpFastClick",s="."+i;e.fn.mfpFastClick=function(i){return e(this).each(function(){var o=e(this),u;if(n){var a,f,l,c,h,p;o.on("touchstart"+s,function(e){c=!1,p=1,h=e.originalEvent?e.originalEvent.touches[0]:e.touches[0],f=h.clientX,l=h.clientY,g.on("touchmove"+s,function(e){h=e.originalEvent?e.originalEvent.touches:e.touches,p=h.length,h=h[0];if(Math.abs(h.clientX-f)>10||Math.abs(h.clientY-l)>10)c=!0,r()}).on("touchend"+s,function(e){r();if(c||p>1)return;u=!0,e.preventDefault(),clearTimeout(a),a=setTimeout(function(){u=!1},t),i()})})}o.on("click"+s,function(){u||i()})})},e.fn.destroyMfpFastClick=function(){e(this).off("touchstart"+s+" click"+s),n&&g.off("touchmove"+s+" touchend"+s)}}(),C()}),define("landingDocs",["require","exports","module","jquery","util","app","lunr","backbone","components/CodeBlockWithHighlightComponent","popup"],function(e,t,n){"use strict";var r=e("jquery"),i=e("util"),s=e("app"),o=e("lunr"),u=e("backbone"),a=e("components/CodeBlockWithHighlightComponent");e("popup");var f=s.getInstance(),l={currentId:0,getCurUrl:function(){return u.history.getFragment().split("/")},hasSectionChilds:function(e,t){return e.filter(t).length>0?!0:!1},hideMenu:function(){r(".sidenav li").each(function(e,t){r(t).hide()})},scrollTo:function(e){var t,n;e==="top"?n=0:(t=r(".js-content #"+e),n=l.contentScroll.scrollTop()+t.position().top),l.contentScroll.stop().animate({scrollTop:n},500,"swing")},initImgZoom:function(){r(".documentation img").closest("a").magnificPopup({type:"image",closeOnContentClick:!0,fixedContentPos:!0,mainClass:"mfp-no-margins mfp-with-zoom",image:{verticalFit:!0},zoom:{enabled:!0,duration:300}})},renderQuestionView:function(e){l.currentId=e.id,r(".b-docs__wrapper").empty().append(i.templates("tpl-documentation-question-view",e)),l.reInitListeners([e]),r(document).ready(function(t){var n=t("img"),r=n.length;if(r==0){t(".b-docs__wrapper").trigger("Loaded",e.id);return}var i=0;t("img").load(function(){i++,i==r&&t(".b-docs__wrapper").trigger("Loaded",e.id)}),l.initImgZoom()}),r("pre",r(".b-docs__wrapper")).each(function(e,t){l.highLightCode(t)})},setMenuListener:function(e,t,n){var i=_.has(t,"parentEl");e.click(function(e,s){e.preventDefault(),e.stopPropagation();var o,u,a;u=_.isObject(s)&&_.has(s,"navigate")?s.navigate:!0,i?r(".sidenav").trigger("Select:section",t.id):r(".sidenav").trigger("Show:section",t.id),l.currentId!==t.id&&(o=n.filter(function(e){return e.id==t.id})[0],l.renderQuestionView(o),a=r(this).find("a").attr("href"),u?f.router.navigate(a):""),l.scrollTo("top"),(!r(this).children("ul.nav").length||_.isEmpty(r(this).children("ul.nav").children()))&&r("[data-js-content-dropdown]").parent().removeClass("open");return})},addMenuItem:function(e,t){var n,s,o;n=_.has(e,"parentEl"),n?(s=r(".sidenav [data-question-id="+e.parentEl+"]"),s.hasClass("not-nested")?s.removeClass("not-nested"):"",s.find("ul").append(i.templates("tpl-documentation-menu-item",e))):r(".sidenav").append(i.templates("tpl-documentation-questions-list",e)),o=r(".sidenav [data-question-id="+e.id+"]"),e.$el=o,l.setMenuListener(o,e,t)},renderQuestionList:function(e){l.hideMenu();var t=!1;if(!e.length){r(".b-docs__nav").addClass("empty");return}r(".b-docs__nav").removeClass("empty"),_.each(e,function(n){var i=r(".sidenav [data-question-id="+n.id+"]"),s=i.length==0;if(s){l.addMenuItem(n,e);return}var o=_.has(n,"parentEl")&&!t;if(o){r(".sidenav [data-question-id="+n.parentEl+"]").show(),r(".sidenav").trigger("Show:section",[n.parentEl,!0]),r(".sidenav [data-question-id="+n.id+"]").show(),r(".sidenav [data-question-id="+n.id+"]").trigger("click",{navigate:!1}),t=!0;return}var u=_.has(n,"elMap")&&!_.has(n,"parenEl")&&!t;if(u){r(".sidenav [data-question-id="+n.id+"]").show(),r(".sidenav").trigger("Show:section",[n.id,!0]),t=!0;return}if(!t){r(".sidenav [data-question-id="+n.id+"]").show(),r(".sidenav [data-question-id="+n.id+"]").trigger("click",{navigate:!1}),r(".sidenav").trigger("Show:section",[n.id,!0]),t=!0;return}r(".sidenav [data-question-id="+n.id+"]").show()})},initListeners:function(e){var t=function(e){var t;return function(){var n=Array.prototype.slice.call(arguments),r=this;clearTimeout(t),t=setTimeout(function(){e.apply(r,n)},100)}};r("#search").on("keyup",t(function(){if(r(this).val()<2){l.renderQuestionList(e);return}var t=r(this).val(),n=idx.search(t).map(function(t){var n=e.filter(function(e){return e.id===parseInt(t.ref,10)})[0];return n});l.renderQuestionList(n)})),r("[data-show-all]").click(function(t){t.preventDefault(),l.renderQuestionList(e),r(t.target).closest(".controls").find("input").val("")}),r("[data-js-show-serach]").click(function(e){e.preventDefault(),r("[data-js-content-search]").show(),r(this).hide(),r("[data-js-content-dropdown]").hide()}),r("[data-js-search-cancel]").click(function(e){e.preventDefault(),r("[data-js-content-search]").hide(),r("[data-js-show-serach]").show(),r("[data-js-content-dropdown]").show(),r("[data-show-all]").trigger("click")}),r(".sidenav").on("Show:section",function(t,n,i){_.each(e,function(e,t){if(_.has(e,"parentEl"))return;if(e.id==n){i?e.$el.addClass("g-nav--open"):e.$el.hasClass("g-nav--open")?e.$el.removeClass("g-nav--open"):e.$el.addClass("g-nav--open");return}e.$el.hasClass("g-nav--open")?e.$el.removeClass("g-nav--open"):""}),r(this).trigger("Select:section",-1)}),r(".sidenav").on("Select:section",function(t,n){_.each(e,function(e,t){if(!_.has(e,"parentEl"))return;if(e.id==n){e.$el.hasClass("g-nav--scrolled")?e.$el.removeClass("g-nav--scrolled"):"";return}e.$el.hasClass("g-nav--scrolled")?"":e.$el.addClass("g-nav--scrolled")})})},reInitListeners:function(e){r("a.anchor").each(function(e,t){r(this).click(function(e){e.preventDefault();var t=r(this).attr("href");f.router.navigate(t.replace("#",""),{trigger:!0});return})}),r("#toc a").each(function(e,t){r(this).click(function(e){e.preventDefault();var t=r(this).attr("href");f.router.navigate(t,{trigger:!0})})})},urlNavigateTo:function(e){var t=l.lunarData.questions,n=e?decodeURIComponent(e).split(">"):[t[0].titleForIndex],r=!1;_.each(t,function(e,r){e.titleForIndex.trim()==n[0].trim()&&(l.onContentLoadListener(e,n),l.renderQuestionView(t[r]))})},onContentLoadListener:function(e,t){r(".b-docs__wrapper").on("Loaded",function(n,i){if(i!==e.id)return;r(".sidenav").trigger("Select:section",e.id),_.has(e,"parentEl")&&r(".sidenav").trigger("Show:section",e.parentEl),e.$el.trigger("click",{navigate:!1}),t.length>1&&l.scrollTo(t[1]),r(".b-docs__wrapper").off("Loaded")})},startDoc:function(e){var t=o(function(){this.ref("id"),this.field("title",{boost:10}),this.field("tags",{boost:100}),this.field("body")});l.lunarData.questions.forEach(function(e){t.add(e)});var t=JSON.stringify(t);window.idx=o.Index.load(JSON.parse(t)),l.renderQuestionList(l.lunarData.questions),l.initListeners(l.lunarData.questions),l.urlNavigateTo(e)},renderSection:function(e){l.renderQuestionList(l.lunarData.questions),l.urlNavigateTo(e)},buildSectionMenu:function(e,t){if(!e||!_.has(e,"elMap"))return;var n=[];_.each(e.elMap,function(e,r){var i=0;n.push({level:i,link:e.elId,title:e.title}),_.has(t[e.id],"childs")&&(i=1,_.each(t[e.id].childs,function(t,r){var s=e.elId+">"+t.elId;n.push({level:i,link:encodeURIComponent(s),title:t.title})}))}),e.body=i.templates("tpl-documentation-section-menu",{menu:n})+e.body},highLightCode:function(e){r("code",e).each(function(e,t){var n,i=t.textContent;r(t).is('[class*="language-"]')?_.each(r(t).attr("class").split(" "),function(e){~e.indexOf("language-")&&(n=e.split("language-")[1])}):n="xml";var s=new a({language:n,binaryContent:i});r(t).parent().replaceWith(s.$el)})},isTag:function(e,t){return r(e).prop("tagName")===t?!0:!1},buildIndex:function(e){var t=e.split(" ");t.length>3&&(t=e.split(" ",3));var n=t.length>1?t.join("-"):t[0];return n},addAnchor:function(e,t){var n=l.buildIndex(r(e).attr("id")),s=t.titleForIndex+">"+n,o=i.templates("tpl-documentation-anchor",{anchor:encodeURIComponent(s),currentIndex:n});r(e).addClass("docs-heading"),r(e).append(o)},addTarget:function(e){r(e).find("a").attr("target","_blank")},parseNewSection:function(e,t,n,i){var s=t.questions.length,o={id:0,title:"",titleForIndex:"",tags:[],body:""};return o.title=r(e).text(),o.titleForIndex=l.buildIndex(o.title),o.id=s,l.isTag(e,"H1")&&(l.buildSectionMenu(t.questions[n],t.questions),n=o.id),l.isTag(e,"H2")&&(o.parentEl=n,o.parentTitle=t.questions[n].title,_.has(t.questions[n],"elMap")?"":t.questions[n].elMap=[],t.questions[n].elMap.push({id:t.questions.length,elId:o.titleForIndex,title:o.title}),i=o.id),t.questions.push(o),{prevH1ID:n,prevH2ID:i}},addTagToSection:function(e,t){var n=t.questions.length;l.isTag(e,"H3")?l.addAnchor(e,t.questions[n-1]):"",l.isTag(e,"H4")?l.addAnchor(e,t.questions[n-1]):"",l.addTarget(e),e=r(e),t.questions[n-1].body+=e.prop("outerHTML"),!_.has(t.questions[n-1],"childs")&&l.isTag(e,"H3")?t.questions[n-1].childs=[]:"",!_.has(t.questions[n-1],"childs")&&l.isTag(e,"H4")?t.questions[n-1].childs=[]:"",l.isTag(e,"H3")?t.questions[n-1].childs.push({elId:l.buildIndex(e.attr("id")),title:e.text()}):"",l.isTag(e,"H4")?t.questions[n-1].childs.push({elId:l.buildIndex(e.attr("id")),title:e.text()}):""},convertData:function(e){var t={total:0,page:1,pagesize:100,questions:[]},e=r.parseHTML(e),n=0,i=0;return _.each(e,function(e,s){var o=r(e).prop("outerHTML");if(!o)return;var u=l.isTag(e,"H1")?!0:l.isTag(e,"H2");if(!u){l.addTagToSection(e,t);return}var a=l.parseNewSection(e,t,n,i);n=a.prevH1ID,i=a.prevH2ID}),l.buildSectionMenu(t.questions[n],t.questions),t.total=t.questions.length,t},init:function(e,t){r(".not-toc",t).remove(),r("#toc",t).remove(),l.content=r(".js-content .b-docs__wrapper",t).html(),r(".js-docnav").html(i.templates("tpl-documentation-menu")),r(".js-content").html(i.templates("tpl-documentation-content")),l.contentScroll=i.setupBaronScroll(r(".js-content .b-docs__wrapper")),l.lunarData=l.convertData(l.content),l.startDoc(e),i.setupBaronScroll(r("[data-js-content-nav] .nav.sidenav"))}};return{init:l.init,docApi:l,renderSection:l.renderSection}}),define("landing/LandingDocumentationView",["require","exports","module","backbone","backbone-epoxy","util","landingDocs"],function(e,t,n){var r=e("backbone"),i=e("backbone-epoxy"),s=e("util"),o=e("landingDocs"),u=r.Epoxy.View.extend({initialize:function(e){this.idDocumentation=e.id},tpl:"tpl-documentation-view",render:function(e){this.$el.html(s.templates(this.tpl)),e.append(this.$el);var t=this;s.getDocumentationHtml().done(function(e){o.init(t.idDocumentation,e)}).fail(function(){t.$el.addClass("documentation-is-not-available")})},changeAnchor:function(e){o.renderSection(e)}});return u}),define("landingPage",["require","exports","module","backbone","backbone-epoxy","util","underscore","app","landing/LandingHeaderView","landing/LandingSectionTreesView","landing/LandingSectionFeaturesView","landing/LandingSectionWatchView","landing/LandingSectionAnalysisView","landing/LandingSectionProductionUsageView","landing/LandingSectionDistributionView","landing/LandingSectionResultAnalysisView","landing/LandingDocumentationView"],function(e,t,n){function w(e){this.blocks=e,this.scrollMap=[],this.documentHeight=0,this._createScrollMap=function(){this.scrollMap=[],this.documentHeight=document.documentElement.clientHeight;for(var e=0;e<this.blocks.length;e++)this.scrollMap.push({scrollStart:this.blocks[e].el.offsetTop,scrollEnd:this.blocks[e].el.offsetTop+this.blocks[e].el.offsetHeight})},this.activateScroll=function(e){var t=e+this.documentHeight,n=[];for(var r=0;r<this.scrollMap.length;r++)if(this.scrollMap[r].scrollStart<=t&&e<this.scrollMap[r].scrollStart||this.scrollMap[r].scrollEnd<=t&&e<this.scrollMap[r].scrollEnd||this.scrollMap[r].scrollEnd>t&&e>=this.scrollMap[r].scrollStart)n.push(r),this.blocks[r].activate||this.blocks[r].changeScroll(e,t-this.scrollMap[r].scrollStart)&&(this.blocks[r].activate=!0);if(n.length!=2)return n[parseInt(n.length/2)];var i=t-this.documentHeight/2,s=this.scrollMap[n[0]].scrollEnd;return s>i?n[0]:n[1]},this.resize=function(){this._createScrollMap(),this.activateScroll(g.mainScrollElement.scrollTop())},this._createScrollMap()}var r=e("backbone"),i=e("backbone-epoxy"),s=e("util"),o=e("underscore"),u=e("app"),a=e("landing/LandingHeaderView"),f=e("landing/LandingSectionTreesView"),l=e("landing/LandingSectionFeaturesView"),c=e("landing/LandingSectionWatchView"),h=e("landing/LandingSectionAnalysisView"),p=e("landing/LandingSectionProductionUsageView"),d=e("landing/LandingSectionDistributionView"),v=e("landing/LandingSectionResultAnalysisView"),m=e("landing/LandingDocumentationView"),g=u.getInstance(),y=r.Model.extend({defaults:{darkMenu:!1,activeSlide:0}}),b=r.Epoxy.View.extend({className:"landing-page js-landing-page",tpl:"tpl-landing-page",initialize:function(){this.model=new y,this.scrollElement=g.mainScrollElement,this.render(),this.listenTo(this.landingHeader,"clickMenu",this.onClickMenu),this.listenTo(this.landingHeader,"clickDocumentation",this.onClickDocumentation),this.currentShow=""},render:function(){this.$el.html(s.templates(this.tpl)),this.landingHeader=new a({el:$("header.b-header",this.$el),model:this.model}),this.setupAnchors()},setupAnchors:function(){this.socialBlock=$("[data-js-social-block]",this.$el)},showLoginBlock:function(){if(!this.landingHeader)return;this.landingHeader.showLoginBlock()},showParallax:function(){this.currentShow=="documentation"&&this.hideDocumentation();if(this.currentShow=="parallax")return;this.currentShow="parallax",this.section=[new f,new l,new c,new h,new p,new d,new v];var e=$(".js-main-container",this.$el);o.each(this.section,function(t){e.append(t.$el),t.onShow()}),this.scrollerAnimate=new w(this.section);var t=this;this.scrollElement.off("scroll.landingPage").on("scroll.landingPage",function(e){t.onScroll()}),$(window).off("resize.landingPage").on("resize.landingPage",function(){t.scrollerAnimate.resize()})},hideParallax:function(){this.scrollElement.off("scroll.landingPage"),$(window).off("resize.landingPage"),this.scrollerAnimate=null,this.section=null,$(".js-main-container",this.$el).html("")},showDocumentation:function(e){this.currentShow=="parallax"&&this.hideParallax();if(this.currentShow=="documentation"){this.documentation.changeAnchor(e);return}this.currentShow="documentation",this.model.set({activeSlide:7}),this.$el.addClass("documentation"),this.documentation=new m({id:e}),this.documentation.render($(".js-docs-container",this.$el))},hideDocumentation:function(){this.$el.removeClass("documentation"),this.documentation&&this.documentation.remove()},hide:function(){this.currentShow=="parallax"&&this.hideParallax()},onScroll:function(){var e=this.scrollElement.scrollTop(),t=this.scrollerAnimate.activateScroll(e);this.model.set({activeSlide:t}),e>this.scrollerAnimate.scrollMap[1].scrollStart?this.model.set({darkMenu:!0}):this.model.set({darkMenu:!1}),e>this.el.scrollHeight-this.scrollerAnimate.documentHeight-30?this.socialBlock.addClass("hide"):this.socialBlock.removeClass("hide")},onClickMenu:function(e){this.showParallax(),this.socialBlock.removeClass("hide"),g.router.navigate("",{trigger:!1});var t=$(e);t&&this.scrollElement.animate({scrollTop:t.get(0).offsetTop-200},200)},onClickDocumentation:function(){g.router.navigate("documentation",{trigger:!0})}});return b}),define("landing/LandingController",["require","exports","module","landingPage","backbone"],function(e,t,n){var r=e("landingPage"),i=e("backbone"),s=null,o=function(){if(s)return s;s=this,_.extend(this,i.Events),this.landingPage=null,this.showLanding=function(){$(".js-wrapper, #pageFooter").addClass("hide");if(this.landingPage)return;this.landingPage=new r,$("#main_content").prepend(this.landingPage.$el),this.trigger("onRenderLanding",this.landingPage)},this.showParallax=function(){this.showLanding(),this.landingPage.showParallax()},this.hideLanding=function(){$(".js-wrapper, #pageFooter").removeClass("hide");if(!this.landingPage)return;this.landingPage.hide(),this.landingPage.remove(),this.landingPage=null,this.trigger("onHideLanding",this)},this.showDocumentation=function(e){this.showLanding(),this.landingPage.showDocumentation(e)},this.openLogin=function(){if(!this.landingPage)return;this.landingPage.showLoginBlock()},this.isShow=function(){return!!this.landingPage}};return o}),define("TestRoute",["require","exports","module"],function(e,t,n){"use strict";var r=function(){this.tests={}};return r.prototype.addTest=function(e,t){this.tests[e]=t},r.prototype.checkTest=function(e,t){var n=this;return function(){var r=arguments,i=this;if(!n.tests[e])throw"TestRoute: test not defined";n.tests[e]().done(function(){t.apply(i,r)})}},r}),define("router",["require","exports","module","jquery","backbone","context","app","landing/LandingController","TestRoute","model/UserModel"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("context"),o=e("app"),u=e("landing/LandingController"),a=e("TestRoute"),f=e("model/UserModel"),l=o.getInstance(),c=new a,h=i.Router.extend({initialize:function(){var e=this;this.context=s,this.user=new f,c.addTest("insidePage",function(){var t=r.Deferred();return e.user.isAuth().done(function(){e.landingController.hideLanding(),t.resolve(),e.user.set({lastInsideHash:window.location.hash})}).fail(function(){e.user.set({lastInsideHash:window.location.hash}),e.navigate("login",{trigger:!0})}),t.promise()}),this.landingController=new u,this.user.ready.done(function(){e.listenTo(e.user,"change:auth",e.onChangeUserAuth.bind(e))}),this.route(/^(.*)\/launches\/all(.*)$/,"openLaunches"),this.route(/^(.*)\/userdebug\/all(.*)$/,"openUserDebug")},onChangeUserAuth:function(e,t){t?(outdatedBrowser({bgColor:"#f25648;",color:"#ffffff",lowerThan:"transform",languagePath:""}),this.navigate(e.get("lastInsideHash"),{trigger:!0})):(this.navigate("",{trigger:!0}),s.destroyViews())},routes:{"":"openParallax",login:"openParallax",documentation:"openDocumentation","documentation/:id":"openDocumentation","*invalidRoute":"openParallax"},show404Page:function(e){e&&e.indexOf("launches/all")===-1&&e.indexOf("userdebug/all")===-1&&s.openInvalid(e)},openParallax:function(){this.landingController.showParallax(),s.destroyViews()},openParallaxLogin:function(){this.landingController.showParallax(),this.landingController.openLogin(),s.destroyViews()},registerUser:function(e){s.openRegister(e)},openDocumentation:function(e){this.landingController.showDocumentation(e),s.destroyViews()},openProject:c.checkTest("insidePage",function(e){s.openRouted(e,"info",null,null)}),openLaunches:c.checkTest("insidePage",function(e,t){s.openRouted(e,"launches","all",t)}),openUserDebug:c.checkTest("insidePage",function(e){s.openRouted(e,"userdebug",arguments)}),openFilters:c.checkTest("insidePage",function(e,t){s.openRouted(e,"filters",null,t)}),userProfile:c.checkTest("insidePage",function(){s.openRouted(l.project.projectId,"user-profile",null,null)}),openMembers:c.checkTest("insidePage",function(e,t){s.openRouted(e,"members",t,null)}),openMembersDefault:c.checkTest("insidePage",function(e){s.openRouted(e,"members","assigned",null)}),openLaunch:c.checkTest("insidePage",function(e){s.openRouted(e,"newlaunches",arguments)}),openSettings:c.checkTest("insidePage",function(e,t){s.openRouted(e,"settings",t,null)}),openDashboard:c.checkTest("insidePage",function(e,t,n){s.openRouted(e,"dashboard",t,n)}),openNewDashboard:c.checkTest("insidePage",function(e,t,n){s.openRouted(e,"newdashboard",t,n)}),openAdminPage:c.checkTest("insidePage",function(e,t){e=e||"projects",s.openAdmin(e,null,null,t)}),openAdminPageAction:c.checkTest("insidePage",function(e,t,n){s.openAdmin(e,undefined,t,n)}),openAdminResource:c.checkTest("insidePage",function(e,t,n,r){s.openAdmin(e,t,n,r)}),openAdminUsersAction:c.checkTest("insidePage",function(e,t,n,r){s.openAdmin(e,t,n,r)}),openAdminProjectDetails:c.checkTest("insidePage",function(e,t,n){s.openAdmin("project-details",e,t,n)})});return{Router:h}}),define("dispatchers/TrackingDispatcher",["require","exports","module","backbone"],function(e,t,n){function s(e){return'Click on "Export: '+e+'" in Launch Menu'}function o(e){return"Stars download of report in "+e}function u(e){return'Hover on Table title "'+e+'"'}function a(e){return'Arise filter icon before Table title "'+e+'"'}function f(e){return'Click on Filter Icon before Table title "'+e+'"'}function l(){return"Arise new field in filter"}var r=e("backbone"),i={1:["Sidebar","Click on Menu Bttn Dashboards","Transition on Dashboards Page"],2:["Sidebar","Click on Menu Bttn Filters","Transition on Filters Page"],3:["Sidebar","Click on Menu Bttn Debug","Transition on Debug Page"],4:["Header","Click on Menu Bttn Members","Transition on Members Page"],5:["Header","Click on Menu Bttn Settings","Transition on Settings Page"],6:["Header","Click on Profile Dropdown","Arise Dropdown Menu"],7:["Header","Click on Profile link on Dropdown","Transition on Profile Page"],8:["Header","Click on Administrate link on Dropdown","Transition to Administrate Mode"],9:["Header","Click on Logout link on Dropdown","Logout and transition on Landing Page"],10:["Header","Click on Project Dropdown","Arise Dropdown with list of Projects"],11:["Header","Click on Another Project Name","Transition to another project"],12:["Filter Launches","Click on Bttn Add Filters","Add New Filter"],13:["Filter Panel","Click on Bttn Discard","Discard Filter parameters"],14:["Filter Panel","Click on Bttn Clone","Clone Filter parameters"],15:["Filter Panel","Click on Bttn Edit",'Edit Filter parameters/Arise modal "Edit Filter"'],16:["Filter Panel","Click on Bttn Save","Save Filter parameters"],17:["Filter Panel","Click on Bttn Add Widget",'Add New Widget from Launches Page/Arise Modal "Add Widget"'],18:["Filter Launches","Hover on Icon Comment on Filter Tab","Arise Tooltip with comment from Filter Tab"],19:["Filter Launches","Hover on Icon Shared by other on Filter Tab",'Arise Tooltip with "Filter is shared by other user" from Filter Tab'],20:["Filter Launches","Hover on Icon Shared on Filter Tab",'Arise Tooltip with "Filter is shared" from Filter Tab'],21:["Filter Launches","Hover on Icon Star on Filter Tab",'Arise Tooltip with "Filter is not saved: from Filter Tab'],22:["Launches","Click on All Launches","Transition to All Launches without filter"],23:["Launches","Click on Item Name","Transition to Item page"],24:["Launches","Click on Icon Menu near Launch Name","Arise Dropdown with single actions for this launch"],25:["Launches",'Click on "Move to Debug" in Launch Menu','Arise Modal "Move to Debug"'],26:["Launches",'Click on "Force Finish" in Launch Menu',"Interrupt launch loading"],27:["Launches",'Click on "Match Issues in Launch" in Launch Menu',"Starts Matching"],28:["Launches",'Click on "Analysis" in Launch Menu',"Starts Analysing"],29:["Launches",'Click on "Delete" in Launch Menu','Arise Modal "Delete Launch"'],30:["Launches",s("PDF"),o("PDF")],31:["Launches",s("XLS"),o("XLS")],32:["Launches",s("HTML"),o("HTML")],33:["Launches",u("NAME"),a("NAME")],34:["Launches",f("NAME"),l()],35:["Launches",u("START"),a("START")],36:["Launches",f("START"),l()],37:["Launches",u("TOTAL"),a("TOTAL")],38:["Launches",f("TOTAL"),l()],39:["Launches",u("PASSED"),a("PASSED")],40:["Launches",f("PASSED"),l()],41:["Launches",u("FAILED"),a("FAILED")],42:["Launches",f("FAILED"),l()],43:["Launches",u("SKIPPED"),a("SKIPPED")],44:["Launches",f("SKIPPED"),l()],45:["Launches",u("PRODUCT BUG"),a("PRODUCT BUG")],46:["Launches",f("PRODUCT BUG"),l()],47:["Launches",u("AUTO BUG"),a("AUTO BUG")],48:["Launches",f("AUTO BUG"),l()],49:["Launches",u("SYSTEM ISSUE"),a("SYSTEM ISSUE")],50:["Launches",f("SYSTEM ISSUE"),l()],51:["Launches",u("TO INVESTIGATE"),a("TO INVESTIGATE")],52:["Launches",f("TO INVESTIGATE"),l()],53:["Launches","Click on Edit Icon after launch name",'Edit Launch/Arise Modal "Edit Launch"'],54:["Launches","Hover on Product Bug Circle",'Arise Tooltip with "Total Product Bugs"'],55:["Launches",'Click on Tooltip "Total Product Bugs"',"Transition to inner level of launch with Product Bugs"],56:["Launches","Hover on Auto Bug Circle",'Arise Tooltip with "Total Auto Bug"'],57:["Launches",'Click on Tooltip "Total Auto Bug"',"Transition to inner level of launch with Auto Bug"],58:["Launches","Hover on System Issue Circle",'Arise Tooltip with "Total System Issue"'],59:["Launches",'Click on Tooltip "Total System Issue"',"Transition to inner level of launch with System Issue"],60:["Launches","Click on To Investigate Circle","Transition to inner level of launch with To Investigate"],61:["Launches","Click on Bttn Actions","Arise Dropdown with list of actions"],62:["Launches",'Click on Bttn "Merge" in list of actions','Arise Modal "Merge Launches"'],63:["Launches",'Click on Bttn "Compare" in list of actions','Arise Modal "Compare Launches"'],64:["Launches",'Click on Bttn "Move to Debug" in list of actions','Arise Modal "Move to Debug"'],65:["Launches",'Click on Bttn "Force Finish" in list of actions',"Force Finish"],66:["Launches",'Click on Bttn "Delete" in list of actions','Arise Modal "Delete Launch"'],67:["Launches","Click on Close Icon on Tag of Launch","Remove launch from  selection"],68:["Launches","Click on Close Icon of all selection","Unselect all launches"],69:["Launches","Click on Close Icon on Error Tag of Launch","Remove launch from  selection"],70:["Launches",'Click on Bttn "Proceed Valid Items"',"Remove invalid launches from selection"],71:["Modal Launches",'Click on Close Icon on Modal "Edit Launch"','Close modal "Edit Launch"'],72:["Modal Launches",'Click on Bttn Cancel on Modal "Edit Launch"','Close modal "Edit Launch"'],73:["Modal Launches",'Click on Bttn Save on Modal "Edit Launch"','Save changes "Edit Launch"'],74:["Modal Launches",'Click on Close Icon on Modal "Move to Debug"','Close modal "Move to Debug"'],75:["Modal Launches",'Click on Bttn Cancel on Modal "Move to Debug"','Close modal "Move to Debug"'],76:["Modal Launches",'Click on Bttn Save on Modal "Move to Debug"','Save changes "Move to Debug"'],77:["Modal Launches",'Click on Close Icon on Modal "Delete Launch"','Close modal "Delete Launch"'],78:["Modal Launches",'Click on Bttn Cancel on Modal "Delete Launch"','Close modal "Delete Launch"'],79:["Modal Launches",'Click on Bttn Delete on Modal "Delete Launch"','Delete launch mentioned in modal "Delete Launch"'],80:["Modal Launches",'Click on Close Icon on Modal "Merge Launches"','Close modal "Merge Launches"'],81:["Modal Launches",'Click on Bttn Cancel on Modal "Merge Launches"','Close modal "Merge Launches"'],82:["Modal Launches",'Click on Bttn Merge on Modal "Merge Launches"','Merge launches mentioned in modal "Merge Launches"']},c={trackEvent:function(){this.trigger("track:event",arguments)},pageView:function(){this.trigger("page:view",arguments)},trackEventNumber:function(e){if(!i[e]){console.log('event "'+e+'" not found');return}this.trigger("track:event",i[e])}};return _.extend(c,r.Events),c});var outdatedBrowser=function(e){function r(e){t.style.opacity=e/100,t.style.filter="alpha(opacity="+e+")"}function i(e){r(e),e==1&&(t.style.display="block"),e==100&&(n=!0)}function u(){var e=document.getElementById("btnCloseUpdateBrowser"),n=document.getElementById("btnUpdateBrowser");t.style.backgroundColor=bkgColor,t.style.color=txtColor,t.children[0].style.color=txtColor,t.children[1].style.color=txtColor,n.style.color=txtColor,n.style.borderColor&&(n.style.borderColor=txtColor),e.style.color=txtColor,e.onmousedown=function(){return t.style.display="none",!1},n.onmouseover=function(){this.style.color=bkgColor,this.style.backgroundColor=txtColor},n.onmouseout=function(){this.style.color=txtColor,this.style.backgroundColor=bkgColor}}function f(){var e=!1;if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){e=!1}}return e}function l(e){var t=f();return t&&(t.onreadystatechange=function(){c(t)},t.open("GET",e,!0),t.send(null)),!1}function c(e){var t=document.getElementById("outdated");return e.readyState==4&&(e.status==200||e.status==304?t.innerHTML=e.responseText:t.innerHTML=a,u()),!1}var t=document.getElementById("outdated");this.defaultOpts={bgColor:"#f25648",color:"#ffffff",lowerThan:"transform",languagePath:"../outdatedbrowser/lang/en.html"};if(e){if(e.lowerThan=="IE8"||e.lowerThan=="borderSpacing")e.lowerThan="borderSpacing";else if(e.lowerThan=="IE9"||e.lowerThan=="boxShadow")e.lowerThan="boxShadow";else if(e.lowerThan=="IE10"||e.lowerThan=="transform"||e.lowerThan==""||typeof e.lowerThan=="undefined")e.lowerThan="transform";else if(e.lowerThan=="IE11"||e.lowerThan=="borderImage")e.lowerThan="borderImage";this.defaultOpts.bgColor=e.bgColor,this.defaultOpts.color=e.color,this.defaultOpts.lowerThan=e.lowerThan,this.defaultOpts.languagePath=e.languagePath,bkgColor=this.defaultOpts.bgColor,txtColor=this.defaultOpts.color,cssProp=this.defaultOpts.lowerThan,languagePath=this.defaultOpts.languagePath}else bkgColor=this.defaultOpts.bgColor,txtColor=this.defaultOpts.color,cssProp=this.defaultOpts.lowerThan,languagePath=this.defaultOpts.languagePath;var n=!0,s=function(){var e=document.createElement("div"),t="Khtml Ms O Moz Webkit".split(" "),n=t.length;return function(r){if(r in e.style)return!0;r=r.replace(/^[a-z]/,function(e){return e.toUpperCase()});while(n--)if(t[n]+r in e.style)return!0;return!1}}();if(!!s(""+cssProp+""))return;if(n&&t.style.opacity!=="1"){n=!1;for(var o=1;o<=100;o++)setTimeout(function(e){return function(){i(e)}}(o),o*8)}languagePath===" "||languagePath.length==0?u():l(languagePath);var a='<h6>Your browser is out-of-date!</h6><p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p><p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>'};define("../lib/outdatedbrowser",function(){}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/position",["jquery","./version"],e):e(jQuery)}(function(e){return function(){function l(e,t,n){return[parseFloat(e[0])*(a.test(e[0])?t/100:1),parseFloat(e[1])*(a.test(e[1])?n/100:1)]}function c(t,n){return parseInt(e.css(t,n),10)||0}function h(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}var t,n=Math.max,r=Math.abs,i=/left|center|right/,s=/top|center|bottom/,o=/[\+\-]\d+(\.[\d]+)?%?/,u=/^\w+/,a=/%$/,f=e.fn.position;e.position={scrollbarWidth:function(){if(t!==undefined)return t;var n,r,i=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=i.children()[0];return e("body").append(i),n=s.offsetWidth,i.css("overflow","scroll"),r=s.offsetWidth,n===r&&(r=i[0].clientWidth),i.remove(),t=n-r},getScrollInfo:function(t){var n=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),r=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:i?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]),i=!!n[0]&&n[0].nodeType===9,s=!r&&!i;return{element:n,isWindow:r,isDocument:i,offset:s?e(t).offset():{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:n.outerWidth(),height:n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return f.apply(this,arguments);t=e.extend({},t);var a,p,d,v,m,g,y=e(t.of),b=e.position.getWithinInfo(t.within),w=e.position.getScrollInfo(b),E=(t.collision||"flip").split(" "),S={};return g=h(y),y[0].preventDefault&&(t.at="left top"),p=g.width,d=g.height,v=g.offset,m=e.extend({},v),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=i.test(e[0])?e.concat(["center"]):s.test(e[0])?["center"].concat(e):["center","center"]),e[0]=i.test(e[0])?e[0]:"center",e[1]=s.test(e[1])?e[1]:"center",n=o.exec(e[0]),r=o.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[u.exec(e[0])[0],u.exec(e[1])[0]]}),E.length===1&&(E[1]=E[0]),t.at[0]==="right"?m.left+=p:t.at[0]==="center"&&(m.left+=p/2),t.at[1]==="bottom"?m.top+=d:t.at[1]==="center"&&(m.top+=d/2),a=l(S.at,p,d),m.left+=a[0],m.top+=a[1],this.each(function(){var i,s,o=e(this),u=o.outerWidth(),f=o.outerHeight(),h=c(this,"marginLeft"),g=c(this,"marginTop"),x=u+h+c(this,"marginRight")+w.width,T=f+g+c(this,"marginBottom")+w.height,N=e.extend({},m),C=l(S.my,o.outerWidth(),o.outerHeight());t.my[0]==="right"?N.left-=u:t.my[0]==="center"&&(N.left-=u/2),t.my[1]==="bottom"?N.top-=f:t.my[1]==="center"&&(N.top-=f/2),N.left+=C[0],N.top+=C[1],i={marginLeft:h,marginTop:g},e.each(["left","top"],function(n,r){e.ui.position[E[n]]&&e.ui.position[E[n]][r](N,{targetWidth:p,targetHeight:d,elemWidth:u,elemHeight:f,collisionPosition:i,collisionWidth:x,collisionHeight:T,offset:[a[0]+C[0],a[1]+C[1]],my:t.my,at:t.at,within:b,elem:o})}),t.using&&(s=function(e){var i=v.left-N.left,s=i+p-u,a=v.top-N.top,l=a+d-f,c={target:{element:y,left:v.left,top:v.top,width:p,height:d},element:{element:o,left:N.left,top:N.top,width:u,height:f},horizontal:s<0?"left":i>0?"right":"center",vertical:l<0?"top":a>0?"bottom":"middle"};p<u&&r(i+s)<p&&(c.horizontal="center"),d<f&&r(a+l)<d&&(c.vertical="middle"),n(r(i),r(s))>n(r(a),r(l))?c.important="horizontal":c.important="vertical",t.using.call(this,e,c)}),o.offset(e.extend(N,{using:s}))})},e.ui.position={fit:{left:function(e,t){var r=t.within,i=r.isWindow?r.scrollLeft:r.offset.left,s=r.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=n(e.left-o,e.left)},top:function(e,t){var r=t.within,i=r.isWindow?r.scrollTop:r.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=n(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,i=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-i;if(p<0||p<r(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||r(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,i=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;if(a<0){v=e.top+c+h+p+t.collisionHeight-s-i;if(v<0||v<r(a))e.top+=c+h+p}else if(f>0){d=e.top-t.collisionPosition.marginTop+c+h+p-o;if(d>0||r(d)<f)e.top+=c+h+p}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position}),function(e){typeof define=="function"&&define.amd?define("jquery-ui/widgets/tooltip",["jquery","../keycode","../position","../unique-id","../version","../widget"],e):e(jQuery)}(function(e){return e.widget("ui.tooltip",{version:"1.12.1",options:{classes:{"ui-tooltip":"ui-corner-all ui-widget-shadow"},content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,track:!1,close:null,open:null},_addDescribedBy:function(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))},_removeDescribedBy:function(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.liveRegion=e("<div>").attr({role:"log","aria-live":"assertive","aria-relevant":"additions"}).appendTo(this.document[0].body),this._addClass(this.liveRegion,null,"ui-helper-hidden-accessible"),this.disabledTitles=e([])},_setOption:function(t,n){var r=this;this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t.element)})},_setOptionDisabled:function(e){this[e?"_disable":"_enable"]()},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r.element[0],t.close(i,!0)}),this.disabledTitles=this.disabledTitles.add(this.element.find(this.options.items).addBack().filter(function(){var t=e(this);if(t.is("[title]"))return t.data("ui-tooltip-title",t.attr("title")).removeAttr("title")}))},_enable:function(){this.disabledTitles.each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))}),this.disabledTitles=e([])},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);if(!r.length||r.data("ui-tooltip-id"))return;r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&t.type==="mouseover"&&r.parents().each(function(){var t=e(this),r;t.data("ui-tooltip-open")&&(r=e.Event("blur"),r.target=r.currentTarget=this,n.close(r,!0)),t.attr("title")&&(t.uniqueId(),n.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._registerCloseHandlers(t,r),this._updateContent(r,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;if(typeof r=="string"||r.nodeType||r.jquery)return this._open(t,e,r);n=r.call(e[0],function(n){i._delay(function(){if(!e.data("ui-tooltip-open"))return;t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,n,r){function f(e){a.of=e;if(s.is(":hidden"))return;s.position(a)}var i,s,o,u,a=e.extend({},this.options.position);if(!r)return;i=this._find(n);if(i){i.tooltip.find(".ui-tooltip-content").html(r);return}n.is("[title]")&&(t&&t.type==="mouseover"?n.attr("title",""):n.removeAttr("title")),i=this._tooltip(n),s=i.tooltip,this._addDescribedBy(n,s.attr("id")),s.find(".ui-tooltip-content").html(r),this.liveRegion.children().hide(),u=e("<div>").html(s.find(".ui-tooltip-content").html()),u.removeAttr("name").find("[name]").removeAttr("name"),u.removeAttr("id").find("[id]").removeAttr("id"),u.appendTo(this.liveRegion),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:n},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.track&&this.options.show&&this.options.show.delay&&(o=this.delayedShow=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(o))},e.fx.interval)),this._trigger("open",t,{tooltip:s})},_registerCloseHandlers:function(t,n){var r={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var r=e.Event(t);r.currentTarget=n[0],this.close(r,!0)}}};n[0]!==this.element[0]&&(r.remove=function(){this._removeTooltip(this._find(n).tooltip)});if(!t||t.type==="mouseover")r.mouseleave="close";if(!t||t.type==="focusin")r.focusout="close";this._on(!0,n,r)},close:function(t){var n,r=this,i=e(t?t.currentTarget:this.element),s=this._find(i);if(!s){i.removeData("ui-tooltip-open");return}n=s.tooltip;if(s.closing)return;clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&!i.attr("title")&&i.attr("title",i.data("ui-tooltip-title")),this._removeDescribedBy(i),s.hiding=!0,n.stop(!0),this._hide(n,this.options.hide,function(){r._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&e.each(this.parents,function(t,n){e(n.element).attr("title",n.title),delete r.parents[t]}),s.closing=!0,this._trigger("close",t,{tooltip:n}),s.hiding||(s.closing=!1)},_tooltip:function(t){var n=e("<div>").attr("role","tooltip"),r=e("<div>").appendTo(n),i=n.uniqueId().attr("id");return this._addClass(r,"ui-tooltip-content"),this._addClass(n,"ui-tooltip","ui-widget ui-widget-content"),n.appendTo(this._appendTo(t)),this.tooltips[i]={element:t,tooltip:n}},_find:function(e){var t=e.data("ui-tooltip-id");return t?this.tooltips[t]:null},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_appendTo:function(e){var t=e.closest(".ui-front, dialog");return t.length||(t=this.document[0].body),t},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur"),s=r.element;i.target=i.currentTarget=s[0],t.close(i,!0),e("#"+n).remove(),s.data("ui-tooltip-title")&&(s.attr("title")||s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))}),this.liveRegion.remove()}}),e.uiBackCompat!==!1&&e.widget("ui.tooltip",e.ui.tooltip,{options:{tooltipClass:null},_tooltip:function(){var e=this._superApply(arguments);return this.options.tooltipClass&&e.tooltip.addClass(this.options.tooltipClass),e}}),e.ui.tooltip}),!function(e,t,n){function r(e,t){return typeof e===t}function i(){var e,t,n,i,s,o,u;for(var a in b)if(b.hasOwnProperty(a)){if(e=[],t=b[a],t.name&&(e.push(t.name.toLowerCase()),t.options&&t.options.aliases&&t.options.aliases.length))for(n=0;n<t.options.aliases.length;n++)e.push(t.options.aliases[n].toLowerCase());for(i=r(t.fn,"function")?t.fn():t.fn,s=0;s<e.length;s++)o=e[s],u=o.split("."),1===u.length?E[u[0]]=i:(!E[u[0]]||E[u[0]]instanceof Boolean||(E[u[0]]=new Boolean(E[u[0]])),E[u[0]][u[1]]=i),y.push((i?"":"no-")+u.join("-"))}}function s(e){var t=S.className,n=E._config.classPrefix||"";if(x&&(t=t.baseVal),E._config.enableJSClass){var r=new RegExp("(^|\\s)"+n+"no-js(\\s|$)");t=t.replace(r,"$1"+n+"js$2")}E._config.enableClasses&&(t+=" "+n+e.join(" "+n),x?S.className.baseVal=t:S.className=t)}function o(){return"function"!=typeof t.createElement?t.createElement(arguments[0]):x?t.createElementNS.call(t,"http://www.w3.org/2000/svg",arguments[0]):t.createElement.apply(t,arguments)}function u(){var e=t.body;return e||(e=o(x?"svg":"body"),e.fake=!0),e}function a(e,n,r,i){var s,a,f,l,c="modernizr",h=o("div"),p=u();if(parseInt(r,10))for(;r--;)f=o("div"),f.id=i?i[r]:c+(r+1),h.appendChild(f);return s=o("style"),s.type="text/css",s.id="s"+c,(p.fake?p:h).appendChild(s),p.appendChild(h),s.styleSheet?s.styleSheet.cssText=e:s.appendChild(t.createTextNode(e)),h.id=c,p.fake&&(p.style.background="",p.style.overflow="hidden",l=S.style.overflow,S.style.overflow="hidden",S.appendChild(p)),a=n(h,e),p.fake?(p.parentNode.removeChild(p),S.style.overflow=l,S.offsetHeight):h.parentNode.removeChild(h),!!a}function f(e,t){return!!~(""+e).indexOf(t)}function l(e){return e.replace(/([a-z])-([a-z])/g,function(e,t,n){return t+n.toUpperCase()}).replace(/^-/,"")}function c(e,t){return function(){return e.apply(t,arguments)}}function h(e,t,n){var i;for(var s in e)if(e[s]in t)return n===!1?e[s]:(i=t[e[s]],r(i,"function")?c(i,n||t):i);return!1}function p(e){return e.replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()}).replace(/^ms-/,"-ms-")}function d(t,r){var i=t.length;if("CSS"in e&&"supports"in e.CSS){for(;i--;)if(e.CSS.supports(p(t[i]),r))return!0;return!1}if("CSSSupportsRule"in e){for(var s=[];i--;)s.push("("+p(t[i])+":"+r+")");return s=s.join(" or "),a("@supports ("+s+") { #modernizr { position: absolute; } }",function(e){return"absolute"==getComputedStyle(e,null).position})}return n}function v(e,t,i,s){function u(){c&&(delete _.style,delete _.modElem)}if(s=r(s,"undefined")?!1:s,!r(i,"undefined")){var a=d(e,i);if(!r(a,"undefined"))return a}for(var c,h,p,v,m,g=["modernizr","tspan","samp"];!_.style&&g.length;)c=!0,_.modElem=o(g.shift()),_.style=_.modElem.style;for(p=e.length,h=0;p>h;h++)if(v=e[h],m=_.style[v],f(v,"-")&&(v=l(v)),_.style[v]!==n){if(s||r(i,"undefined"))return u(),"pfx"==t?v:!0;try{_.style[v]=i}catch(y){}if(_.style[v]!=m)return u(),"pfx"==t?v:!0}return u(),!1}function m(e,t,n,i,s){var o=e.charAt(0).toUpperCase()+e.slice(1),u=(e+" "+A.join(o+" ")+o).split(" ");return r(t,"string")||r(t,"undefined")?v(u,t,i,s):(u=(e+" "+O.join(o+" ")+o).split(" "),h(u,t,n))}function g(e,t,r){return m(e,n,n,t,r)}var y=[],b=[],w={_version:"3.3.1",_config:{classPrefix:"",enableClasses:!0,enableJSClass:!0,usePrefixes:!0},_q:[],on:function(e,t){var n=this;setTimeout(function(){t(n[e])},0)},addTest:function(e,t,n){b.push({name:e,fn:t,options:n})},addAsyncTest:function(e){b.push({name:null,fn:e})}},E=function(){};E.prototype=w,E=new E;var S=t.documentElement,x="svg"===S.nodeName.toLowerCase(),T=w._config.usePrefixes?" -webkit- -moz- -o- -ms- ".split(" "):["",""];w._prefixes=T;var N="CSS"in e&&"supports"in e.CSS,C="supportsCSS"in e;E.addTest("supports",N||C);var k=w.testStyles=a;E.addTest("touchevents",function(){var n;if("ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch)n=!0;else{var r=["@media (",T.join("touch-enabled),("),"heartz",")","{#modernizr{top:9px;position:absolute}}"].join("");k(r,function(e){n=9===e.offsetTop})}return n});var L="Moz O ms Webkit",A=w._config.usePrefixes?L.split(" "):[];w._cssomPrefixes=A;var O=w._config.usePrefixes?L.toLowerCase().split(" "):[];w._domPrefixes=O;var M={elem:o("modernizr")};E._q.push(function(){delete M.elem});var _={style:M.elem.style};E._q.unshift(function(){delete _.style}),w.testAllProps=m,w.testAllProps=g,E.addTest("csstransforms3d",function(){var e=!!g("perspective","1px",!0),t=E._config.usePrefixes;if(e&&(!t||"webkitPerspective"in S.style)){var n,r="#modernizr{width:0;height:0}";E.supports?n="@supports (perspective: 1px)":(n="@media (transform-3d)",t&&(n+=",(-webkit-transform-3d)")),n+="{#modernizr{width:7px;height:18px;margin:0;padding:0;border:0}}",k(r+n,function(t){e=7===t.offsetWidth&&18===t.offsetHeight})}return e}),E.addTest("csstransforms",function(){return-1===navigator.userAgent.indexOf("Android 2.")&&g("transform","scale(1)",!0)}),i(),s(y),delete w.addTest,delete w.addAsyncTest;for(var D=0;D<E._q.length;D++)E._q[D]();e.Modernizr=E}(window,document),define("../lib/modernizr-custom",function(){}),define("updateBackbone",["require","exports","module","jquery","backbone","underscore","../lib/modernizr-custom"],function(e,t,n){"use strict";function f(e,t,n){return e+=".delegateEvents"+this.cid,t===""?this.$el.on(e,n):this.$el.on(e,t,n)}var r=e("jquery"),i=e("backbone"),s=e("underscore");e("../lib/modernizr-custom"),i.View.prototype.destroy=function(){this.onDestroy&&this.onDestroy(),this.undelegateEvents(),this.stopListening(),this.unbind()};var o=/^(\S+)\s*(.*)$/,u="touchHover",a="notouch";i.View.prototype.delegateEvents=function(e){e||(e=s.result(this,"events"));if(!e)return this;this.undelegateEvents();var t=this;for(var n in e){var i=e[n];s.isFunction(i)||(i=this[e[n]]);if(!i)continue;var l=n.match(o),c=l[1],h=l[2];c=="click"?(Modernizr.touchevents&&(f.call(this,"touchstart",h,function(e){r(e.currentTarget).not(".disabled").length&&r(e.currentTarget).addClass(u)}),f.call(this,"touchmove",h,function(e){r(e.currentTarget).not(".disabled").length&&r(e.currentTarget).removeClass(u).data(a,!0)}),function(e){f.call(t,"touchend",h,function(n){if(r(n.currentTarget).not(".disabled").length){n.preventDefault();var i=r(n.currentTarget);i.data(a)||(r(":focus").blur(),e.call(t,n)),i.removeClass(u).data(a,!1)}})(e)}),function(e){f.call(t,l[1],l[2],function(n){r(n.currentTarget).not('.disabled, [disabled="disabled"]').length&&(e.call(t,n),r(n.currentTarget).removeClass(u))})}(i)):f.call(this,l[1],l[2],s.bind(i,this))}return this}}),define("application",["require","exports","module","jquery","backbone","util","model/UserModel","message","app","router","dispatchers/TrackingDispatcher","callService","../lib/outdatedbrowser","cookie","jquery-ui/widgets/tooltip","bootstrap","jaddons","landingDocs","updateBackbone"],function(e,t,n){"use strict";var r=e("jquery"),i=e("backbone"),s=e("util"),o=e("model/UserModel"),u=e("message"),a=e("app"),f=e("router"),l=e("dispatchers/TrackingDispatcher"),c=e("callService"),h=c.call;e("../lib/outdatedbrowser"),e("cookie"),e("jquery-ui/widgets/tooltip"),r.widget.bridge("uitooltip",r.ui.tooltip),e("bootstrap"),e("jaddons"),e("landingDocs"),e("updateBackbone"),r('[rel="shortcut icon"]').attr("href",document.location.protocol+"//"+document.location.host+document.location.pathname+"favicon.ico"),s.extendStings(),s.extendArrays(),s.setupMessagesTracker(new u.Success({el:r("div.flash-container")})),s.trackAjaxCalls(),s.shimBind(),s.addSymbolsValidation();var p=a.getInstance();s.checkWidthScroll(),p.mainScrollElement=s.setupBaronScroll(r("#main_content")),p.userModel=new o,p.trackingDispatcher=l,p.router=new f.Router,s.setupWindowEvents(),s.setupBackTop(),r("html").removeClass("loading"),i.history.start()}),require.config({paths:{application:"application",jquery:"../lib/jquery-latest",jqueryUI:"../lib/jquery-ui","jquery-ui":"../lib/jQuery-ui",bootstrap:"../lib/bootstrap.min",underscore:"../lib/lodash.min",lodash:"../lib/lodash.min",backbone:"../lib/backbone","backbone-epoxy":"../lib/backbone-epoxy",jaddons:"../lib/jquery-addons",cookie:"../lib/jquery.cookie",bootswitch:"../lib/bootstrap-switch.min",elementQuery:"../lib/EQCSS",baron:"../lib/baron",base64:"../lib/base64",util:"core/util",nprogress:"../lib/nprogress",localization:"localizations/default",moment:"../lib/moment.2.10.2",SwipeGallery:"../lib/SwipeGallery",Hammer:"../lib/hammer",message:"message/message-panel",app:"core/app-config",validators:"core/validators",fullscreen:"../lib/jquery.fullscreen",isLoading:"../lib/jquery.isLoading",equalHeightRows:"../lib/grids",popup:"../lib/jquery.magnific-popup",lunr:"../lib/lunr",elasticColumns:"../lib/elastic-columns.min",select2:"../lib/select2.custom",daterangepicker:"../lib/daterangepicker","readmore-js":"../lib/readmore",gridstack:"../lib/gridstack/gridstack.custom",gridstackUi:"../lib/gridstack/gridstack.jQueryUI",validate:"../lib/jquery.validate",d3:"../lib/d3/d3.v3.min",d3Tip:"../lib/d3/d3.tip.custom",nvd3:"../lib/nvd3/nv.d3.custom",profile:"login/user_profile",slick:"../lib/slick",landingPage:"landing/LandingPage",landingDocs:"landing/documentation",log:"log/logs",TestRoute:"router/TestRoute",router:"router/router",project:"project/project",projectinfo:"project/projectinfo",member:"member/member",memberService:"member/service",launch:"launch/launch-navigation",launchgrid:"launch/launch-grid",launchEditor:"launch/launch-editor",launchCrumbs:"launch/launch-crumbs",defectEditor:"defect/defect-editor",mainview:"main-view",widgets:"widget/widgets",context:"context",dataUrlResolver:"core/data-url-resolver",callService:"core/call-service",coreService:"core/core-service",admin:"admin/admin",projects:"admin/projects",users:"admin/users",settings:"admin/settings",adminService:"admin/service",filtersPanel:"filter/filters-panel",filtersResolver:"filter/filters-resolver",filtersService:"filter/filters-service",widgetWizard:"wizard/widget",helpers:"core/helpers",storageService:"core/storage-service",simplemde:"../lib/markdown/simplemde.min",textile:"../lib/textile",markitup:"../lib/jquery.markitup.custom",markitupset:"../lib/jquery.markitup.textile",stickyHeader:"core/sticky-header",cacheService:"core/cache-service",scrollable:"core/scrollable-view",text:"../lib/text",DemoDataSettingsView:"project/DemoDataSettingsView",spectrum:"../lib/spectrum/spectrum",templates:"../../compiled/templates/templates"},shim:{jqueryUI:["jquery"],slick:{deps:["jquery"],exports:"jQuery.fn.slick"},bootstrap:["jqueryUI"],equalHeightRows:["jquery"],bootswitch:["jquery","bootstrap"],base64:{exports:"Base64"},cookie:["jquery"],popup:["jquery"],isLoading:["jquery"],fullscreen:["jquery"],customScroll:["jquery"],select2:["jquery"],daterangepicker:["jquery"],gridstack:["jquery","underscore"],gridstackUi:["gridstack"],validate:{deps:["jquery"]},elasticColumns:["jquery"],nvd3:{deps:["d3"],exports:"nv"},widgets:["d3","nvd3","elementQuery"],markitup:["jquery"],markitupset:["markitup"],underscore:{exports:"_"},backbone:{deps:["jquery","underscore"],exports:"Backbone"}}}),require(["application"]),define("config",function(){});